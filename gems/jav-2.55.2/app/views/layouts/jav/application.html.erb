<!DOCTYPE html>
<!-- ✨ Built with Jav • https://www.javhq.io/ -->
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= display_meta_tags site: Jav.configuration.app_name, reverse: true, separator: "—" %>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= render partial: 'jav/partials/javascript' %>
    <%= render partial: 'jav/partials/branding' %>
    <%= render partial: 'jav/partials/pre_head' %>
    <% if Jav::PACKED %>
      <%= javascript_include_tag "/jav-assets/jav.base", "data-turbo-track": "reload", defer: true %>
      <%= stylesheet_link_tag "/jav-assets/jav.base", "data-turbo-track": "reload", defer: true %>
    <% else %>
      <%= javascript_include_tag "jav.base", "data-turbo-track": "reload", defer: true %>
      <%= stylesheet_link_tag "jav.base", "data-turbo-track": "reload", defer: true %>
    <% end %>
    <%= render partial: 'jav/partials/head' %>
  </head>
  <body class="bg-application os-mac">
    <div class="relative flex flex-1 w-full min-h-full" data-controller="sidebar" data-sidebar-open-value="<%= @sidebar_open %>">
      <div class="flex-1 flex flex-col max-w-full">
        <%= render partial: "jav/partials/navbar" %>
        <div data-sidebar-target="mainArea" class="content-area flex-1 flex pt-16 relative <%= 'sidebar-open' if @sidebar_open %>">
          <div class="hidden lg:flex">
            <%= render Jav::SidebarComponent.new sidebar_open: @sidebar_open %>
          </div>
          <div class="flex lg:hidden">
            <%= render Jav::SidebarComponent.new sidebar_open: false, for_mobile: true %>
          </div>
          <div class="main-content-area flex-1 flex flex-col min-h-full max-w-full">
            <div class="content p-4 lg:p-6 flex-1 flex flex-col justify-between items-stretch <%= @container_classes %>">
              <%= render partial: "jav/partials/custom_tools_alert" %>
              <div class="flex flex-1 flex-col justify-between items-stretch space-y-8">
                <%= yield.force_encoding('UTF-8') %>
                <%= render partial: "jav/partials/footer" %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <%= turbo_frame_tag 'actions_show' %>
    <%= turbo_frame_tag 'attach_modal' %>
    <%= turbo_frame_tag 'alerts', class: "fixed inset-0 bottom-0 flex flex-col space-y-4 items-end justify-right px-4 py-6 sm:p-6 justify-end z-[100] pointer-events-none" do %>
      <%= render Jav::FlashAlertsComponent.new flashes: flash %>
      <% # In case we have other general error messages %>
      <% if @errors.present? %>
        <% @errors.each do |message| %>
          <%= render Jav::AlertComponent.new :error, message %>
        <% end %>
      <% end %>
    <% end %>
    <%= render partial: "jav/partials/scripts" %>

  </body>
</html>
