(()=>{var STe=Object.create;var TL=Object.defineProperty;var ETe=Object.getOwnPropertyDescriptor;var TTe=Object.getOwnPropertyNames;var ATe=Object.getPrototypeOf,kTe=Object.prototype.hasOwnProperty;var A8=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Ip=(t,e)=>()=>(t&&(e=t(t=0)),e);var J=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),k8=(t,e)=>{for(var r in e)TL(t,r,{get:e[r],enumerable:!0})},CTe=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of TTe(e))!kTe.call(t,i)&&i!==r&&TL(t,i,{get:()=>e[i],enumerable:!(n=ETe(e,i))||n.enumerable});return t};var ua=(t,e,r)=>(r=t!=null?STe(ATe(t)):{},CTe(e||!t||!t.__esModule?TL(r,"default",{value:t,enumerable:!0}):r,t));var Jr=J((AL,C8)=>{"use strict";var uw=function(t){return t&&t.Math===Math&&t};C8.exports=uw(typeof globalThis=="object"&&globalThis)||uw(typeof window=="object"&&window)||uw(typeof self=="object"&&self)||uw(typeof global=="object"&&global)||uw(typeof AL=="object"&&AL)||function(){return this}()||Function("return this")()});var Sr=J((rAt,I8)=>{"use strict";I8.exports=function(t){try{return!!t()}catch{return!0}}});var zn=J((nAt,D8)=>{"use strict";var ITe=Sr();D8.exports=!ITe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var K0=J((iAt,O8)=>{"use strict";var DTe=Sr();O8.exports=!DTe(function(){var t=function(){}.bind();return typeof t!="function"||t.hasOwnProperty("prototype")})});var $n=J((oAt,P8)=>{"use strict";var OTe=K0(),bk=Function.prototype.call;P8.exports=OTe?bk.bind(bk):function(){return bk.apply(bk,arguments)}});var cw=J(R8=>{"use strict";var M8={}.propertyIsEnumerable,L8=Object.getOwnPropertyDescriptor,PTe=L8&&!M8.call({1:2},1);R8.f=PTe?function(e){var r=L8(this,e);return!!r&&r.enumerable}:M8});var zf=J((sAt,F8)=>{"use strict";F8.exports=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}}});var qr=J((lAt,B8)=>{"use strict";var q8=K0(),N8=Function.prototype,kL=N8.call,MTe=q8&&N8.bind.bind(kL,kL);B8.exports=q8?MTe:function(t){return function(){return kL.apply(t,arguments)}}});var au=J((uAt,j8)=>{"use strict";var z8=qr(),LTe=z8({}.toString),RTe=z8("".slice);j8.exports=function(t){return RTe(LTe(t),8,-1)}});var Fy=J((cAt,U8)=>{"use strict";var FTe=qr(),qTe=Sr(),NTe=au(),CL=Object,BTe=FTe("".split);U8.exports=qTe(function(){return!CL("z").propertyIsEnumerable(0)})?function(t){return NTe(t)==="String"?BTe(t,""):CL(t)}:CL});var rc=J((fAt,V8)=>{"use strict";V8.exports=function(t){return t==null}});var Na=J((hAt,H8)=>{"use strict";var zTe=rc(),jTe=TypeError;H8.exports=function(t){if(zTe(t))throw new jTe("Can't call method on "+t);return t}});var xl=J((dAt,W8)=>{"use strict";var UTe=Fy(),VTe=Na();W8.exports=function(t){return UTe(VTe(t))}});var Wi=J((pAt,$8)=>{"use strict";var IL=typeof document=="object"&&document.all;$8.exports=typeof IL>"u"&&IL!==void 0?function(t){return typeof t=="function"||t===IL}:function(t){return typeof t=="function"}});var ki=J((mAt,G8)=>{"use strict";var HTe=Wi();G8.exports=function(t){return typeof t=="object"?t!==null:HTe(t)}});var Uo=J((gAt,K8)=>{"use strict";var DL=Jr(),WTe=Wi(),$Te=function(t){return WTe(t)?t:void 0};K8.exports=function(t,e){return arguments.length<2?$Te(DL[t]):DL[t]&&DL[t][e]}});var nc=J((vAt,Z8)=>{"use strict";var GTe=qr();Z8.exports=GTe({}.isPrototypeOf)});var wd=J((yAt,J8)=>{"use strict";var KTe=Jr(),Y8=KTe.navigator,X8=Y8&&Y8.userAgent;J8.exports=X8?String(X8):""});var Dp=J((bAt,i9)=>{"use strict";var n9=Jr(),OL=wd(),Q8=n9.process,e9=n9.Deno,t9=Q8&&Q8.versions||e9&&e9.version,r9=t9&&t9.v8,Sd,_k;r9&&(Sd=r9.split("."),_k=Sd[0]>0&&Sd[0]<4?1:+(Sd[0]+Sd[1]));!_k&&OL&&(Sd=OL.match(/Edge\/(\d+)/),(!Sd||Sd[1]>=74)&&(Sd=OL.match(/Chrome\/(\d+)/),Sd&&(_k=+Sd[1])));i9.exports=_k});var qy=J((_At,a9)=>{"use strict";var o9=Dp(),ZTe=Sr(),YTe=Jr(),XTe=YTe.String;a9.exports=!!Object.getOwnPropertySymbols&&!ZTe(function(){var t=Symbol("symbol detection");return!XTe(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&o9&&o9<41})});var PL=J((xAt,s9)=>{"use strict";var JTe=qy();s9.exports=JTe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var iv=J((wAt,l9)=>{"use strict";var QTe=Uo(),eAe=Wi(),tAe=nc(),rAe=PL(),nAe=Object;l9.exports=rAe?function(t){return typeof t=="symbol"}:function(t){var e=QTe("Symbol");return eAe(e)&&tAe(e.prototype,nAe(t))}});var ov=J((SAt,u9)=>{"use strict";var iAe=String;u9.exports=function(t){try{return iAe(t)}catch{return"Object"}}});var no=J((EAt,c9)=>{"use strict";var oAe=Wi(),aAe=ov(),sAe=TypeError;c9.exports=function(t){if(oAe(t))return t;throw new sAe(aAe(t)+" is not a function")}});var Ed=J((TAt,f9)=>{"use strict";var lAe=no(),uAe=rc();f9.exports=function(t,e){var r=t[e];return uAe(r)?void 0:lAe(r)}});var FL=J((AAt,h9)=>{"use strict";var ML=$n(),LL=Wi(),RL=ki(),cAe=TypeError;h9.exports=function(t,e){var r,n;if(e==="string"&&LL(r=t.toString)&&!RL(n=ML(r,t))||LL(r=t.valueOf)&&!RL(n=ML(r,t))||e!=="string"&&LL(r=t.toString)&&!RL(n=ML(r,t)))return n;throw new cAe("Can't convert object to primitive value")}});var Mo=J((kAt,d9)=>{"use strict";d9.exports=!1});var xk=J((CAt,m9)=>{"use strict";var p9=Jr(),fAe=Object.defineProperty;m9.exports=function(t,e){try{fAe(p9,t,{value:e,configurable:!0,writable:!0})}catch{p9[t]=e}return e}});var wk=J((IAt,y9)=>{"use strict";var hAe=Mo(),dAe=Jr(),pAe=xk(),g9="__core-js_shared__",v9=y9.exports=dAe[g9]||pAe(g9,{});(v9.versions||(v9.versions=[])).push({version:"3.41.0",mode:hAe?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.41.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Ny=J((DAt,_9)=>{"use strict";var b9=wk();_9.exports=function(t,e){return b9[t]||(b9[t]=e||{})}});var mo=J((OAt,x9)=>{"use strict";var mAe=Na(),gAe=Object;x9.exports=function(t){return gAe(mAe(t))}});var Xi=J((PAt,w9)=>{"use strict";var vAe=qr(),yAe=mo(),bAe=vAe({}.hasOwnProperty);w9.exports=Object.hasOwn||function(e,r){return bAe(yAe(e),r)}});var By=J((MAt,S9)=>{"use strict";var _Ae=qr(),xAe=0,wAe=Math.random(),SAe=_Ae(1 .toString);S9.exports=function(t){return"Symbol("+(t===void 0?"":t)+")_"+SAe(++xAe+wAe,36)}});var Ci=J((LAt,T9)=>{"use strict";var EAe=Jr(),TAe=Ny(),E9=Xi(),AAe=By(),kAe=qy(),CAe=PL(),Z0=EAe.Symbol,qL=TAe("wks"),IAe=CAe?Z0.for||Z0:Z0&&Z0.withoutSetter||AAe;T9.exports=function(t){return E9(qL,t)||(qL[t]=kAe&&E9(Z0,t)?Z0[t]:IAe("Symbol."+t)),qL[t]}});var fw=J((RAt,C9)=>{"use strict";var DAe=$n(),A9=ki(),k9=iv(),OAe=Ed(),PAe=FL(),MAe=Ci(),LAe=TypeError,RAe=MAe("toPrimitive");C9.exports=function(t,e){if(!A9(t)||k9(t))return t;var r=OAe(t,RAe),n;if(r){if(e===void 0&&(e="default"),n=DAe(r,t,e),!A9(n)||k9(n))return n;throw new LAe("Can't convert object to primitive value")}return e===void 0&&(e="number"),PAe(t,e)}});var zm=J((FAt,I9)=>{"use strict";var FAe=fw(),qAe=iv();I9.exports=function(t){var e=FAe(t,"string");return qAe(e)?e:e+""}});var hw=J((qAt,O9)=>{"use strict";var NAe=Jr(),D9=ki(),NL=NAe.document,BAe=D9(NL)&&D9(NL.createElement);O9.exports=function(t){return BAe?NL.createElement(t):{}}});var BL=J((NAt,P9)=>{"use strict";var zAe=zn(),jAe=Sr(),UAe=hw();P9.exports=!zAe&&!jAe(function(){return Object.defineProperty(UAe("div"),"a",{get:function(){return 7}}).a!==7})});var Ru=J(L9=>{"use strict";var VAe=zn(),HAe=$n(),WAe=cw(),$Ae=zf(),GAe=xl(),KAe=zm(),ZAe=Xi(),YAe=BL(),M9=Object.getOwnPropertyDescriptor;L9.f=VAe?M9:function(e,r){if(e=GAe(e),r=KAe(r),YAe)try{return M9(e,r)}catch{}if(ZAe(e,r))return $Ae(!HAe(WAe.f,e,r),e[r])}});var zL=J((zAt,R9)=>{"use strict";var XAe=zn(),JAe=Sr();R9.exports=XAe&&JAe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var qn=J((jAt,F9)=>{"use strict";var QAe=ki(),eke=String,tke=TypeError;F9.exports=function(t){if(QAe(t))return t;throw new tke(eke(t)+" is not an object")}});var ts=J(N9=>{"use strict";var rke=zn(),nke=BL(),ike=zL(),Sk=qn(),q9=zm(),oke=TypeError,jL=Object.defineProperty,ake=Object.getOwnPropertyDescriptor,UL="enumerable",VL="configurable",HL="writable";N9.f=rke?ike?function(e,r,n){if(Sk(e),r=q9(r),Sk(n),typeof e=="function"&&r==="prototype"&&"value"in n&&HL in n&&!n[HL]){var i=ake(e,r);i&&i[HL]&&(e[r]=n.value,n={configurable:VL in n?n[VL]:i[VL],enumerable:UL in n?n[UL]:i[UL],writable:!1})}return jL(e,r,n)}:jL:function(e,r,n){if(Sk(e),r=q9(r),Sk(n),nke)try{return jL(e,r,n)}catch{}if("get"in n||"set"in n)throw new oke("Accessors not supported");return"value"in n&&(e[r]=n.value),e}});var su=J((VAt,B9)=>{"use strict";var ske=zn(),lke=ts(),uke=zf();B9.exports=ske?function(t,e,r){return lke.f(t,e,uke(1,r))}:function(t,e,r){return t[e]=r,t}});var zy=J((HAt,j9)=>{"use strict";var WL=zn(),cke=Xi(),z9=Function.prototype,fke=WL&&Object.getOwnPropertyDescriptor,$L=cke(z9,"name"),hke=$L&&function(){}.name==="something",dke=$L&&(!WL||WL&&fke(z9,"name").configurable);j9.exports={EXISTS:$L,PROPER:hke,CONFIGURABLE:dke}});var Ek=J((WAt,U9)=>{"use strict";var pke=qr(),mke=Wi(),GL=wk(),gke=pke(Function.toString);mke(GL.inspectSource)||(GL.inspectSource=function(t){return gke(t)});U9.exports=GL.inspectSource});var KL=J(($At,H9)=>{"use strict";var vke=Jr(),yke=Wi(),V9=vke.WeakMap;H9.exports=yke(V9)&&/native code/.test(String(V9))});var dw=J((GAt,$9)=>{"use strict";var bke=Ny(),_ke=By(),W9=bke("keys");$9.exports=function(t){return W9[t]||(W9[t]=_ke(t))}});var Y0=J((KAt,G9)=>{"use strict";G9.exports={}});var Us=J((ZAt,Y9)=>{"use strict";var xke=KL(),Z9=Jr(),wke=ki(),Ske=su(),ZL=Xi(),YL=wk(),Eke=dw(),Tke=Y0(),K9="Object already initialized",XL=Z9.TypeError,Ake=Z9.WeakMap,Tk,pw,Ak,kke=function(t){return Ak(t)?pw(t):Tk(t,{})},Cke=function(t){return function(e){var r;if(!wke(e)||(r=pw(e)).type!==t)throw new XL("Incompatible receiver, "+t+" required");return r}};xke||YL.state?(Td=YL.state||(YL.state=new Ake),Td.get=Td.get,Td.has=Td.has,Td.set=Td.set,Tk=function(t,e){if(Td.has(t))throw new XL(K9);return e.facade=t,Td.set(t,e),e},pw=function(t){return Td.get(t)||{}},Ak=function(t){return Td.has(t)}):(jy=Eke("state"),Tke[jy]=!0,Tk=function(t,e){if(ZL(t,jy))throw new XL(K9);return e.facade=t,Ske(t,jy,e),e},pw=function(t){return ZL(t,jy)?t[jy]:{}},Ak=function(t){return ZL(t,jy)});var Td,jy;Y9.exports={set:Tk,get:pw,has:Ak,enforce:kke,getterFor:Cke}});var Ik=J((YAt,Q9)=>{"use strict";var QL=qr(),Ike=Sr(),Dke=Wi(),kk=Xi(),JL=zn(),Oke=zy().CONFIGURABLE,Pke=Ek(),J9=Us(),Mke=J9.enforce,Lke=J9.get,X9=String,Ck=Object.defineProperty,Rke=QL("".slice),Fke=QL("".replace),qke=QL([].join),Nke=JL&&!Ike(function(){return Ck(function(){},"length",{value:8}).length!==8}),Bke=String(String).split("String"),zke=Q9.exports=function(t,e,r){Rke(X9(e),0,7)==="Symbol("&&(e="["+Fke(X9(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!kk(t,"name")||Oke&&t.name!==e)&&(JL?Ck(t,"name",{value:e,configurable:!0}):t.name=e),Nke&&r&&kk(r,"arity")&&t.length!==r.arity&&Ck(t,"length",{value:r.arity});try{r&&kk(r,"constructor")&&r.constructor?JL&&Ck(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var n=Mke(t);return kk(n,"source")||(n.source=qke(Bke,typeof e=="string"?e:"")),t};Function.prototype.toString=zke(function(){return Dke(this)&&Lke(this).source||Pke(this)},"toString")});var Ba=J((XAt,eH)=>{"use strict";var jke=Wi(),Uke=ts(),Vke=Ik(),Hke=xk();eH.exports=function(t,e,r,n){n||(n={});var i=n.enumerable,o=n.name!==void 0?n.name:e;if(jke(r)&&Vke(r,o,n),n.global)i?t[e]=r:Hke(e,r);else{try{n.unsafe?t[e]&&(i=!0):delete t[e]}catch{}i?t[e]=r:Uke.f(t,e,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return t}});var eR=J((JAt,tH)=>{"use strict";var Wke=Math.ceil,$ke=Math.floor;tH.exports=Math.trunc||function(e){var r=+e;return(r>0?$ke:Wke)(r)}});var ds=J((QAt,rH)=>{"use strict";var Gke=eR();rH.exports=function(t){var e=+t;return e!==e||e===0?0:Gke(e)}});var Op=J((ekt,nH)=>{"use strict";var Kke=ds(),Zke=Math.max,Yke=Math.min;nH.exports=function(t,e){var r=Kke(t);return r<0?Zke(r+e,0):Yke(r,e)}});var Fc=J((tkt,iH)=>{"use strict";var Xke=ds(),Jke=Math.min;iH.exports=function(t){var e=Xke(t);return e>0?Jke(e,9007199254740991):0}});var Vo=J((rkt,oH)=>{"use strict";var Qke=Fc();oH.exports=function(t){return Qke(t.length)}});var X0=J((nkt,sH)=>{"use strict";var eCe=xl(),tCe=Op(),rCe=Vo(),aH=function(t){return function(e,r,n){var i=eCe(e),o=rCe(i);if(o===0)return!t&&-1;var s=tCe(n,o),u;if(t&&r!==r){for(;o>s;)if(u=i[s++],u!==u)return!0}else for(;o>s;s++)if((t||s in i)&&i[s]===r)return t||s||0;return!t&&-1}};sH.exports={includes:aH(!0),indexOf:aH(!1)}});var rR=J((ikt,uH)=>{"use strict";var nCe=qr(),tR=Xi(),iCe=xl(),oCe=X0().indexOf,aCe=Y0(),lH=nCe([].push);uH.exports=function(t,e){var r=iCe(t),n=0,i=[],o;for(o in r)!tR(aCe,o)&&tR(r,o)&&lH(i,o);for(;e.length>n;)tR(r,o=e[n++])&&(~oCe(i,o)||lH(i,o));return i}});var Dk=J((okt,cH)=>{"use strict";cH.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var av=J(fH=>{"use strict";var sCe=rR(),lCe=Dk(),uCe=lCe.concat("length","prototype");fH.f=Object.getOwnPropertyNames||function(e){return sCe(e,uCe)}});var mw=J(hH=>{"use strict";hH.f=Object.getOwnPropertySymbols});var Ok=J((lkt,dH)=>{"use strict";var cCe=Uo(),fCe=qr(),hCe=av(),dCe=mw(),pCe=qn(),mCe=fCe([].concat);dH.exports=cCe("Reflect","ownKeys")||function(e){var r=hCe.f(pCe(e)),n=dCe.f;return n?mCe(r,n(e)):r}});var J0=J((ukt,mH)=>{"use strict";var pH=Xi(),gCe=Ok(),vCe=Ru(),yCe=ts();mH.exports=function(t,e,r){for(var n=gCe(e),i=yCe.f,o=vCe.f,s=0;s<n.length;s++){var u=n[s];!pH(t,u)&&!(r&&pH(r,u))&&i(t,u,o(e,u))}}});var Q0=J((ckt,gH)=>{"use strict";var bCe=Sr(),_Ce=Wi(),xCe=/#|\.prototype\./,gw=function(t,e){var r=SCe[wCe(t)];return r===TCe?!0:r===ECe?!1:_Ce(e)?bCe(e):!!e},wCe=gw.normalize=function(t){return String(t).replace(xCe,".").toLowerCase()},SCe=gw.data={},ECe=gw.NATIVE="N",TCe=gw.POLYFILL="P";gH.exports=gw});var ht=J((fkt,vH)=>{"use strict";var Pk=Jr(),ACe=Ru().f,kCe=su(),CCe=Ba(),ICe=xk(),DCe=J0(),OCe=Q0();vH.exports=function(t,e){var r=t.target,n=t.global,i=t.stat,o,s,u,h,y,w;if(n?s=Pk:i?s=Pk[r]||ICe(r,{}):s=Pk[r]&&Pk[r].prototype,s)for(u in e){if(y=e[u],t.dontCallGetSet?(w=ACe(s,u),h=w&&w.value):h=s[u],o=OCe(n?u:r+(i?".":"#")+u,t.forced),!o&&h!==void 0){if(typeof y==typeof h)continue;DCe(y,h)}(t.sham||h&&h.sham)&&kCe(y,"sham",!0),CCe(s,u,y,t)}}});var Mk=J((hkt,bH)=>{"use strict";var PCe=Ci(),MCe=PCe("toStringTag"),yH={};yH[MCe]="z";bH.exports=String(yH)==="[object z]"});var Ih=J((dkt,_H)=>{"use strict";var LCe=Mk(),RCe=Wi(),Lk=au(),FCe=Ci(),qCe=FCe("toStringTag"),NCe=Object,BCe=Lk(function(){return arguments}())==="Arguments",zCe=function(t,e){try{return t[e]}catch{}};_H.exports=LCe?Lk:function(t){var e,r,n;return t===void 0?"Undefined":t===null?"Null":typeof(r=zCe(e=NCe(t),qCe))=="string"?r:BCe?Lk(e):(n=Lk(e))==="Object"&&RCe(e.callee)?"Arguments":n}});var ai=J((pkt,xH)=>{"use strict";var jCe=Ih(),UCe=String;xH.exports=function(t){if(jCe(t)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return UCe(t)}});var e_=J((mkt,wH)=>{"use strict";var VCe=rR(),HCe=Dk();wH.exports=Object.keys||function(e){return VCe(e,HCe)}});var Rk=J(SH=>{"use strict";var WCe=zn(),$Ce=zL(),GCe=ts(),KCe=qn(),ZCe=xl(),YCe=e_();SH.f=WCe&&!$Ce?Object.defineProperties:function(e,r){KCe(e);for(var n=ZCe(r),i=YCe(r),o=i.length,s=0,u;o>s;)GCe.f(e,u=i[s++],n[u]);return e}});var nR=J((vkt,EH)=>{"use strict";var XCe=Uo();EH.exports=XCe("document","documentElement")});var ic=J((ykt,OH)=>{"use strict";var JCe=qn(),QCe=Rk(),TH=Dk(),e2e=Y0(),t2e=nR(),r2e=hw(),n2e=dw(),AH=">",kH="<",oR="prototype",aR="script",IH=n2e("IE_PROTO"),iR=function(){},DH=function(t){return kH+aR+AH+t+kH+"/"+aR+AH},CH=function(t){t.write(DH("")),t.close();var e=t.parentWindow.Object;return t=null,e},i2e=function(){var t=r2e("iframe"),e="java"+aR+":",r;return t.style.display="none",t2e.appendChild(t),t.src=String(e),r=t.contentWindow.document,r.open(),r.write(DH("document.F=Object")),r.close(),r.F},Fk,qk=function(){try{Fk=new ActiveXObject("htmlfile")}catch{}qk=typeof document<"u"?document.domain&&Fk?CH(Fk):i2e():CH(Fk);for(var t=TH.length;t--;)delete qk[oR][TH[t]];return qk()};e2e[IH]=!0;OH.exports=Object.create||function(e,r){var n;return e!==null?(iR[oR]=JCe(e),n=new iR,iR[oR]=null,n[IH]=e):n=qk(),r===void 0?n:QCe.f(n,r)}});var jf=J((bkt,PH)=>{"use strict";var o2e=qr();PH.exports=o2e([].slice)});var Nk=J((_kt,RH)=>{"use strict";var a2e=au(),s2e=xl(),MH=av().f,l2e=jf(),LH=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u2e=function(t){try{return MH(t)}catch{return l2e(LH)}};RH.exports.f=function(e){return LH&&a2e(e)==="Window"?u2e(e):MH(s2e(e))}});var el=J((xkt,qH)=>{"use strict";var FH=Ik(),c2e=ts();qH.exports=function(t,e,r){return r.get&&FH(r.get,e,{getter:!0}),r.set&&FH(r.set,e,{setter:!0}),c2e.f(t,e,r)}});var sR=J(NH=>{"use strict";var f2e=Ci();NH.f=f2e});var Bk=J((Skt,BH)=>{"use strict";var h2e=Jr();BH.exports=h2e});var oc=J((Ekt,jH)=>{"use strict";var zH=Bk(),d2e=Xi(),p2e=sR(),m2e=ts().f;jH.exports=function(t){var e=zH.Symbol||(zH.Symbol={});d2e(e,t)||m2e(e,t,{value:p2e.f(t)})}});var lR=J((Tkt,UH)=>{"use strict";var g2e=$n(),v2e=Uo(),y2e=Ci(),b2e=Ba();UH.exports=function(){var t=v2e("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,n=y2e("toPrimitive");e&&!e[n]&&b2e(e,n,function(i){return g2e(r,this)},{arity:1})}});var ac=J((Akt,HH)=>{"use strict";var _2e=ts().f,x2e=Xi(),w2e=Ci(),VH=w2e("toStringTag");HH.exports=function(t,e,r){t&&!r&&(t=t.prototype),t&&!x2e(t,VH)&&_2e(t,VH,{configurable:!0,value:e})}});var sv=J((kkt,WH)=>{"use strict";var S2e=au(),E2e=qr();WH.exports=function(t){if(S2e(t)==="Function")return E2e(t)}});var Dh=J((Ckt,GH)=>{"use strict";var $H=sv(),T2e=no(),A2e=K0(),k2e=$H($H.bind);GH.exports=function(t,e){return T2e(t),e===void 0?t:A2e?k2e(t,e):function(){return t.apply(e,arguments)}}});var jm=J((Ikt,KH)=>{"use strict";var C2e=au();KH.exports=Array.isArray||function(e){return C2e(e)==="Array"}});var Uy=J((Dkt,QH)=>{"use strict";var I2e=qr(),D2e=Sr(),ZH=Wi(),O2e=Ih(),P2e=Uo(),M2e=Ek(),YH=function(){},XH=P2e("Reflect","construct"),uR=/^\s*(?:class|function)\b/,L2e=I2e(uR.exec),R2e=!uR.test(YH),vw=function(e){if(!ZH(e))return!1;try{return XH(YH,[],e),!0}catch{return!1}},JH=function(e){if(!ZH(e))return!1;switch(O2e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return R2e||!!L2e(uR,M2e(e))}catch{return!0}};JH.sham=!0;QH.exports=!XH||D2e(function(){var t;return vw(vw.call)||!vw(Object)||!vw(function(){t=!0})||t})?JH:vw});var nW=J((Okt,rW)=>{"use strict";var eW=jm(),F2e=Uy(),q2e=ki(),N2e=Ci(),B2e=N2e("species"),tW=Array;rW.exports=function(t){var e;return eW(t)&&(e=t.constructor,F2e(e)&&(e===tW||eW(e.prototype))?e=void 0:q2e(e)&&(e=e[B2e],e===null&&(e=void 0))),e===void 0?tW:e}});var t_=J((Pkt,iW)=>{"use strict";var z2e=nW();iW.exports=function(t,e){return new(z2e(t))(e===0?0:e)}});var zl=J((Mkt,aW)=>{"use strict";var j2e=Dh(),U2e=qr(),V2e=Fy(),H2e=mo(),W2e=Vo(),$2e=t_(),oW=U2e([].push),lv=function(t){var e=t===1,r=t===2,n=t===3,i=t===4,o=t===6,s=t===7,u=t===5||o;return function(h,y,w,T){for(var I=H2e(h),P=V2e(I),L=W2e(P),R=j2e(y,w),W=0,G=T||$2e,q=e?G(h,L):r||s?G(h,0):void 0,V,p;L>W;W++)if((u||W in P)&&(V=P[W],p=R(V,W,I),t))if(e)q[W]=p;else if(p)switch(t){case 3:return!0;case 5:return V;case 6:return W;case 2:oW(q,V)}else switch(t){case 4:return!1;case 7:oW(q,V)}return o?-1:n||i?i:q}};aW.exports={forEach:lv(0),map:lv(1),filter:lv(2),some:lv(3),every:lv(4),find:lv(5),findIndex:lv(6),filterReject:lv(7)}});var SW=J(()=>{"use strict";var zk=ht(),_w=Jr(),yR=$n(),G2e=qr(),K2e=Mo(),r_=zn(),n_=qy(),Z2e=Sr(),jl=Xi(),Y2e=nc(),dR=qn(),jk=xl(),bR=zm(),X2e=ai(),pR=zf(),i_=ic(),uW=e_(),J2e=av(),cW=Nk(),Q2e=mw(),fW=Ru(),hW=ts(),eIe=Rk(),dW=cw(),cR=Ba(),tIe=el(),_R=Ny(),rIe=dw(),pW=Y0(),sW=By(),nIe=Ci(),iIe=sR(),oIe=oc(),aIe=lR(),sIe=ac(),mW=Us(),Uk=zl().forEach,qc=rIe("hidden"),Vk="Symbol",bw="prototype",lIe=mW.set,lW=mW.getterFor(Vk),Oh=Object[bw],Vy=_w.Symbol,yw=Vy&&Vy[bw],uIe=_w.RangeError,cIe=_w.TypeError,fR=_w.QObject,gW=fW.f,Hy=hW.f,vW=cW.f,fIe=dW.f,yW=G2e([].push),Um=_R("symbols"),xw=_R("op-symbols"),hIe=_R("wks"),mR=!fR||!fR[bw]||!fR[bw].findChild,bW=function(t,e,r){var n=gW(Oh,e);n&&delete Oh[e],Hy(t,e,r),n&&t!==Oh&&Hy(Oh,e,n)},gR=r_&&Z2e(function(){return i_(Hy({},"a",{get:function(){return Hy(this,"a",{value:7}).a}})).a!==7})?bW:Hy,hR=function(t,e){var r=Um[t]=i_(yw);return lIe(r,{type:Vk,tag:t,description:e}),r_||(r.description=e),r},Hk=function(e,r,n){e===Oh&&Hk(xw,r,n),dR(e);var i=bR(r);return dR(n),jl(Um,i)?(n.enumerable?(jl(e,qc)&&e[qc][i]&&(e[qc][i]=!1),n=i_(n,{enumerable:pR(0,!1)})):(jl(e,qc)||Hy(e,qc,pR(1,i_(null))),e[qc][i]=!0),gR(e,i,n)):Hy(e,i,n)},xR=function(e,r){dR(e);var n=jk(r),i=uW(n).concat(wW(n));return Uk(i,function(o){(!r_||yR(vR,n,o))&&Hk(e,o,n[o])}),e},dIe=function(e,r){return r===void 0?i_(e):xR(i_(e),r)},vR=function(e){var r=bR(e),n=yR(fIe,this,r);return this===Oh&&jl(Um,r)&&!jl(xw,r)?!1:n||!jl(this,r)||!jl(Um,r)||jl(this,qc)&&this[qc][r]?n:!0},_W=function(e,r){var n=jk(e),i=bR(r);if(!(n===Oh&&jl(Um,i)&&!jl(xw,i))){var o=gW(n,i);return o&&jl(Um,i)&&!(jl(n,qc)&&n[qc][i])&&(o.enumerable=!0),o}},xW=function(e){var r=vW(jk(e)),n=[];return Uk(r,function(i){!jl(Um,i)&&!jl(pW,i)&&yW(n,i)}),n},wW=function(t){var e=t===Oh,r=vW(e?xw:jk(t)),n=[];return Uk(r,function(i){jl(Um,i)&&(!e||jl(Oh,i))&&yW(n,Um[i])}),n};n_||(Vy=function(){if(Y2e(yw,this))throw new cIe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:X2e(arguments[0]),r=sW(e),n=function(i){var o=this===void 0?_w:this;o===Oh&&yR(n,xw,i),jl(o,qc)&&jl(o[qc],r)&&(o[qc][r]=!1);var s=pR(1,i);try{gR(o,r,s)}catch(u){if(!(u instanceof uIe))throw u;bW(o,r,s)}};return r_&&mR&&gR(Oh,r,{configurable:!0,set:n}),hR(r,e)},yw=Vy[bw],cR(yw,"toString",function(){return lW(this).tag}),cR(Vy,"withoutSetter",function(t){return hR(sW(t),t)}),dW.f=vR,hW.f=Hk,eIe.f=xR,fW.f=_W,J2e.f=cW.f=xW,Q2e.f=wW,iIe.f=function(t){return hR(nIe(t),t)},r_&&(tIe(yw,"description",{configurable:!0,get:function(){return lW(this).description}}),K2e||cR(Oh,"propertyIsEnumerable",vR,{unsafe:!0})));zk({global:!0,constructor:!0,wrap:!0,forced:!n_,sham:!n_},{Symbol:Vy});Uk(uW(hIe),function(t){oIe(t)});zk({target:Vk,stat:!0,forced:!n_},{useSetter:function(){mR=!0},useSimple:function(){mR=!1}});zk({target:"Object",stat:!0,forced:!n_,sham:!r_},{create:dIe,defineProperty:Hk,defineProperties:xR,getOwnPropertyDescriptor:_W});zk({target:"Object",stat:!0,forced:!n_},{getOwnPropertyNames:xW});aIe();sIe(Vy,Vk);pW[qc]=!0});var wR=J((Fkt,EW)=>{"use strict";var pIe=qy();EW.exports=pIe&&!!Symbol.for&&!!Symbol.keyFor});var AW=J(()=>{"use strict";var mIe=ht(),gIe=Uo(),vIe=Xi(),yIe=ai(),TW=Ny(),bIe=wR(),SR=TW("string-to-symbol-registry"),_Ie=TW("symbol-to-string-registry");mIe({target:"Symbol",stat:!0,forced:!bIe},{for:function(t){var e=yIe(t);if(vIe(SR,e))return SR[e];var r=gIe("Symbol")(e);return SR[e]=r,_Ie[r]=e,r}})});var CW=J(()=>{"use strict";var xIe=ht(),wIe=Xi(),SIe=iv(),EIe=ov(),TIe=Ny(),AIe=wR(),kW=TIe("symbol-to-string-registry");xIe({target:"Symbol",stat:!0,forced:!AIe},{keyFor:function(e){if(!SIe(e))throw new TypeError(EIe(e)+" is not a symbol");if(wIe(kW,e))return kW[e]}})});var Uf=J((jkt,PW)=>{"use strict";var kIe=K0(),OW=Function.prototype,IW=OW.apply,DW=OW.call;PW.exports=typeof Reflect=="object"&&Reflect.apply||(kIe?DW.bind(IW):function(){return DW.apply(IW,arguments)})});var qW=J((Ukt,FW)=>{"use strict";var CIe=qr(),MW=jm(),IIe=Wi(),LW=au(),DIe=ai(),RW=CIe([].push);FW.exports=function(t){if(IIe(t))return t;if(MW(t)){for(var e=t.length,r=[],n=0;n<e;n++){var i=t[n];typeof i=="string"?RW(r,i):(typeof i=="number"||LW(i)==="Number"||LW(i)==="String")&&RW(r,DIe(i))}var o=r.length,s=!0;return function(u,h){if(s)return s=!1,h;if(MW(this))return h;for(var y=0;y<o;y++)if(r[y]===u)return h}}}});var ER=J(()=>{"use strict";var OIe=ht(),WW=Uo(),$W=Uf(),PIe=$n(),ww=qr(),GW=Sr(),NW=Wi(),BW=iv(),KW=jf(),MIe=qW(),LIe=qy(),RIe=String,uv=WW("JSON","stringify"),Wk=ww(/./.exec),zW=ww("".charAt),FIe=ww("".charCodeAt),qIe=ww("".replace),NIe=ww(1 .toString),BIe=/[\uD800-\uDFFF]/g,jW=/^[\uD800-\uDBFF]$/,UW=/^[\uDC00-\uDFFF]$/,VW=!LIe||GW(function(){var t=WW("Symbol")("stringify detection");return uv([t])!=="[null]"||uv({a:t})!=="{}"||uv(Object(t))!=="{}"}),HW=GW(function(){return uv("\uDF06\uD834")!=='"\\udf06\\ud834"'||uv("\uDEAD")!=='"\\udead"'}),zIe=function(t,e){var r=KW(arguments),n=MIe(e);if(!(!NW(n)&&(t===void 0||BW(t))))return r[1]=function(i,o){if(NW(n)&&(o=PIe(n,this,RIe(i),o)),!BW(o))return o},$W(uv,null,r)},jIe=function(t,e,r){var n=zW(r,e-1),i=zW(r,e+1);return Wk(jW,t)&&!Wk(UW,i)||Wk(UW,t)&&!Wk(jW,n)?"\\u"+NIe(FIe(t,0),16):t};uv&&OIe({target:"JSON",stat:!0,arity:3,forced:VW||HW},{stringify:function(e,r,n){var i=KW(arguments),o=$W(VW?zIe:uv,null,i);return HW&&typeof o=="string"?qIe(o,BIe,jIe):o}})});var YW=J(()=>{"use strict";var UIe=ht(),VIe=qy(),HIe=Sr(),ZW=mw(),WIe=mo(),$Ie=!VIe||HIe(function(){ZW.f(1)});UIe({target:"Object",stat:!0,forced:$Ie},{getOwnPropertySymbols:function(e){var r=ZW.f;return r?r(WIe(e)):[]}})});var XW=J(()=>{"use strict";SW();AW();CW();ER();YW()});var i7=J(()=>{"use strict";var GIe=ht(),KIe=zn(),ZIe=Jr(),$k=qr(),YIe=Xi(),XIe=Wi(),JIe=nc(),QIe=ai(),eDe=el(),tDe=J0(),Vm=ZIe.Symbol,Wy=Vm&&Vm.prototype;KIe&&XIe(Vm)&&(!("description"in Wy)||Vm().description!==void 0)&&(TR={},Sw=function(){var e=arguments.length<1||arguments[0]===void 0?void 0:QIe(arguments[0]),r=JIe(Wy,this)?new Vm(e):e===void 0?Vm():Vm(e);return e===""&&(TR[r]=!0),r},tDe(Sw,Vm),Sw.prototype=Wy,Wy.constructor=Sw,JW=String(Vm("description detection"))==="Symbol(description detection)",QW=$k(Wy.valueOf),e7=$k(Wy.toString),t7=/^Symbol\((.*)\)[^)]+$/,r7=$k("".replace),n7=$k("".slice),eDe(Wy,"description",{configurable:!0,get:function(){var e=QW(this);if(YIe(TR,e))return"";var r=e7(e),n=JW?n7(r,7,-1):r7(r,t7,"$1");return n===""?void 0:n}}),GIe({global:!0,constructor:!0,forced:!0},{Symbol:Sw}));var TR,Sw,JW,QW,e7,t7,r7,n7});var o7=J(()=>{"use strict";var rDe=oc();rDe("asyncIterator")});var a7=J(()=>{"use strict";var nDe=oc();nDe("hasInstance")});var s7=J(()=>{"use strict";var iDe=oc();iDe("isConcatSpreadable")});var l7=J(()=>{"use strict";var oDe=oc();oDe("iterator")});var u7=J(()=>{"use strict";var aDe=oc();aDe("match")});var c7=J(()=>{"use strict";var sDe=oc();sDe("matchAll")});var f7=J(()=>{"use strict";var lDe=oc();lDe("replace")});var h7=J(()=>{"use strict";var uDe=oc();uDe("search")});var d7=J(()=>{"use strict";var cDe=oc();cDe("species")});var p7=J(()=>{"use strict";var fDe=oc();fDe("split")});var m7=J(()=>{"use strict";var hDe=oc(),dDe=lR();hDe("toPrimitive");dDe()});var g7=J(()=>{"use strict";var pDe=Uo(),mDe=oc(),gDe=ac();mDe("toStringTag");gDe(pDe("Symbol"),"Symbol")});var v7=J(()=>{"use strict";var vDe=oc();vDe("unscopables")});var Ew=J((SCt,y7)=>{"use strict";var yDe=qr(),bDe=no();y7.exports=function(t,e,r){try{return yDe(bDe(Object.getOwnPropertyDescriptor(t,e)[r]))}catch{}}});var AR=J((ECt,b7)=>{"use strict";var _De=ki();b7.exports=function(t){return _De(t)||t===null}});var kR=J((TCt,_7)=>{"use strict";var xDe=AR(),wDe=String,SDe=TypeError;_7.exports=function(t){if(xDe(t))return t;throw new SDe("Can't set "+wDe(t)+" as a prototype")}});var Ad=J((ACt,x7)=>{"use strict";var EDe=Ew(),TDe=ki(),ADe=Na(),kDe=kR();x7.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t=!1,e={},r;try{r=EDe(Object.prototype,"__proto__","set"),r(e,[]),t=e instanceof Array}catch{}return function(i,o){return ADe(i),kDe(o),TDe(i)&&(t?r(i,o):i.__proto__=o),i}}():void 0)});var CR=J((kCt,w7)=>{"use strict";var CDe=ts().f;w7.exports=function(t,e,r){r in t||CDe(t,r,{configurable:!0,get:function(){return e[r]},set:function(n){e[r]=n}})}});var cv=J((CCt,E7)=>{"use strict";var IDe=Wi(),DDe=ki(),S7=Ad();E7.exports=function(t,e,r){var n,i;return S7&&IDe(n=e.constructor)&&n!==r&&DDe(i=n.prototype)&&i!==r.prototype&&S7(t,i),t}});var o_=J((ICt,T7)=>{"use strict";var ODe=ai();T7.exports=function(t,e){return t===void 0?arguments.length<2?"":e:ODe(t)}});var IR=J((DCt,A7)=>{"use strict";var PDe=ki(),MDe=su();A7.exports=function(t,e){PDe(e)&&"cause"in e&&MDe(t,"cause",e.cause)}});var Gk=J((OCt,I7)=>{"use strict";var LDe=qr(),k7=Error,RDe=LDe("".replace),FDe=function(t){return String(new k7(t).stack)}("zxcasd"),C7=/\n\s*at [^:]*:[^\n]*/,qDe=C7.test(FDe);I7.exports=function(t,e){if(qDe&&typeof t=="string"&&!k7.prepareStackTrace)for(;e--;)t=RDe(t,C7,"");return t}});var DR=J((PCt,D7)=>{"use strict";var NDe=Sr(),BDe=zf();D7.exports=!NDe(function(){var t=new Error("a");return"stack"in t?(Object.defineProperty(t,"stack",BDe(1,7)),t.stack!==7):!0})});var OR=J((MCt,P7)=>{"use strict";var zDe=su(),jDe=Gk(),UDe=DR(),O7=Error.captureStackTrace;P7.exports=function(t,e,r,n){UDe&&(O7?O7(t,e):zDe(t,"stack",jDe(r,n)))}});var PR=J((LCt,B7)=>{"use strict";var M7=Uo(),VDe=Xi(),L7=su(),HDe=nc(),R7=Ad(),F7=J0(),q7=CR(),WDe=cv(),$De=o_(),GDe=IR(),KDe=OR(),ZDe=zn(),N7=Mo();B7.exports=function(t,e,r,n){var i="stackTraceLimit",o=n?2:1,s=t.split("."),u=s[s.length-1],h=M7.apply(null,s);if(h){var y=h.prototype;if(!N7&&VDe(y,"cause")&&delete y.cause,!r)return h;var w=M7("Error"),T=e(function(I,P){var L=$De(n?P:I,void 0),R=n?new h(I):new h;return L!==void 0&&L7(R,"message",L),KDe(R,T,R.stack,2),this&&HDe(y,this)&&WDe(R,this,T),arguments.length>o&&GDe(R,arguments[o]),R});if(T.prototype=y,u!=="Error"?R7?R7(T,w):F7(T,w,{name:!0}):ZDe&&i in h&&(q7(T,h,i),q7(T,h,"prepareStackTrace")),F7(T,h),!N7)try{y.name!==u&&L7(y,"name",u),y.constructor=T}catch{}return T}}});var V7=J(()=>{"use strict";var j7=ht(),YDe=Jr(),Pp=Uf(),U7=PR(),MR="WebAssembly",z7=YDe[MR],Kk=new Error("e",{cause:7}).cause!==7,$y=function(t,e){var r={};r[t]=U7(t,e,Kk),j7({global:!0,constructor:!0,arity:1,forced:Kk},r)},LR=function(t,e){if(z7&&z7[t]){var r={};r[t]=U7(MR+"."+t,e,Kk),j7({target:MR,stat:!0,constructor:!0,arity:1,forced:Kk},r)}};$y("Error",function(t){return function(r){return Pp(t,this,arguments)}});$y("EvalError",function(t){return function(r){return Pp(t,this,arguments)}});$y("RangeError",function(t){return function(r){return Pp(t,this,arguments)}});$y("ReferenceError",function(t){return function(r){return Pp(t,this,arguments)}});$y("SyntaxError",function(t){return function(r){return Pp(t,this,arguments)}});$y("TypeError",function(t){return function(r){return Pp(t,this,arguments)}});$y("URIError",function(t){return function(r){return Pp(t,this,arguments)}});LR("CompileError",function(t){return function(r){return Pp(t,this,arguments)}});LR("LinkError",function(t){return function(r){return Pp(t,this,arguments)}});LR("RuntimeError",function(t){return function(r){return Pp(t,this,arguments)}})});var RR=J((qCt,W7)=>{"use strict";var XDe=zn(),JDe=Sr(),QDe=qn(),H7=o_(),Zk=Error.prototype.toString,eOe=JDe(function(){if(XDe){var t=Object.create(Object.defineProperty({},"name",{get:function(){return this===t}}));if(Zk.call(t)!=="true")return!0}return Zk.call({message:1,name:2})!=="2: 1"||Zk.call({})!=="Error"});W7.exports=eOe?function(){var e=QDe(this),r=H7(e.name,"Error"),n=H7(e.message);return r?n?r+": "+n:r:n}:Zk});var K7=J(()=>{"use strict";var tOe=Ba(),$7=RR(),G7=Error.prototype;G7.toString!==$7&&tOe(G7,"toString",$7)});var Yk=J((zCt,Z7)=>{"use strict";var rOe=Sr();Z7.exports=!rOe(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})});var Nc=J((jCt,X7)=>{"use strict";var nOe=Xi(),iOe=Wi(),oOe=mo(),aOe=dw(),sOe=Yk(),Y7=aOe("IE_PROTO"),FR=Object,lOe=FR.prototype;X7.exports=sOe?FR.getPrototypeOf:function(t){var e=oOe(t);if(nOe(e,Y7))return e[Y7];var r=e.constructor;return iOe(r)&&e instanceof r?r.prototype:e instanceof FR?lOe:null}});var a_=J((UCt,J7)=>{"use strict";J7.exports={}});var Xk=J((VCt,Q7)=>{"use strict";var uOe=Ci(),cOe=a_(),fOe=uOe("iterator"),hOe=Array.prototype;Q7.exports=function(t){return t!==void 0&&(cOe.Array===t||hOe[fOe]===t)}});var Gy=J((HCt,t$)=>{"use strict";var dOe=Ih(),e$=Ed(),pOe=rc(),mOe=a_(),gOe=Ci(),vOe=gOe("iterator");t$.exports=function(t){if(!pOe(t))return e$(t,vOe)||e$(t,"@@iterator")||mOe[dOe(t)]}});var Tw=J((WCt,r$)=>{"use strict";var yOe=$n(),bOe=no(),_Oe=qn(),xOe=ov(),wOe=Gy(),SOe=TypeError;r$.exports=function(t,e){var r=arguments.length<2?wOe(t):e;if(bOe(r))return _Oe(yOe(r,t));throw new SOe(xOe(t)+" is not iterable")}});var fv=J(($Ct,i$)=>{"use strict";var EOe=$n(),n$=qn(),TOe=Ed();i$.exports=function(t,e,r){var n,i;n$(t);try{if(n=TOe(t,"return"),!n){if(e==="throw")throw r;return r}n=EOe(n,t)}catch(o){i=!0,n=o}if(e==="throw")throw r;if(i)throw n;return n$(n),r}});var wl=J((GCt,l$)=>{"use strict";var AOe=Dh(),kOe=$n(),COe=qn(),IOe=ov(),DOe=Xk(),OOe=Vo(),o$=nc(),POe=Tw(),MOe=Gy(),a$=fv(),LOe=TypeError,Jk=function(t,e){this.stopped=t,this.result=e},s$=Jk.prototype;l$.exports=function(t,e,r){var n=r&&r.that,i=!!(r&&r.AS_ENTRIES),o=!!(r&&r.IS_RECORD),s=!!(r&&r.IS_ITERATOR),u=!!(r&&r.INTERRUPTED),h=AOe(e,n),y,w,T,I,P,L,R,W=function(q){return y&&a$(y,"normal",q),new Jk(!0,q)},G=function(q){return i?(COe(q),u?h(q[0],q[1],W):h(q[0],q[1])):u?h(q,W):h(q)};if(o)y=t.iterator;else if(s)y=t;else{if(w=MOe(t),!w)throw new LOe(IOe(t)+" is not iterable");if(DOe(w)){for(T=0,I=OOe(t);I>T;T++)if(P=G(t[T]),P&&o$(s$,P))return P;return new Jk(!1)}y=POe(t,w)}for(L=o?t.next:y.next;!(R=kOe(L,y)).done;){try{P=G(R.value)}catch(q){a$(y,"throw",q)}if(typeof P=="object"&&P&&o$(s$,P))return P}return new Jk(!1)}});var c$=J(()=>{"use strict";var ROe=ht(),FOe=nc(),qOe=Nc(),Qk=Ad(),NOe=J0(),u$=ic(),qR=su(),NR=zf(),BOe=IR(),zOe=OR(),jOe=wl(),UOe=o_(),VOe=Ci(),HOe=VOe("toStringTag"),eC=Error,WOe=[].push,s_=function(e,r){var n=FOe(BR,this),i;Qk?i=Qk(new eC,n?qOe(this):BR):(i=n?this:u$(BR),qR(i,HOe,"Error")),r!==void 0&&qR(i,"message",UOe(r)),zOe(i,s_,i.stack,1),arguments.length>2&&BOe(i,arguments[2]);var o=[];return jOe(e,WOe,{that:o}),qR(i,"errors",o),i};Qk?Qk(s_,eC):NOe(s_,eC,{name:!0});var BR=s_.prototype=u$(eC.prototype,{constructor:NR(1,s_),message:NR(1,""),name:NR(1,"AggregateError")});ROe({global:!0,constructor:!0,arity:2},{AggregateError:s_})});var f$=J(()=>{"use strict";c$()});var m$=J(()=>{"use strict";var $Oe=ht(),GOe=Uo(),KOe=Uf(),h$=Sr(),ZOe=PR(),zR="AggregateError",d$=GOe(zR),p$=!h$(function(){return d$([1]).errors[0]!==1})&&h$(function(){return d$([1],zR,{cause:7}).cause!==7});$Oe({global:!0,constructor:!0,arity:2,forced:p$},{AggregateError:ZOe(zR,function(t){return function(r,n){return KOe(t,this,arguments)}},p$,!0)})});var sc=J((e2t,g$)=>{"use strict";var YOe=Ci(),XOe=ic(),JOe=ts().f,jR=YOe("unscopables"),UR=Array.prototype;UR[jR]===void 0&&JOe(UR,jR,{configurable:!0,value:XOe(null)});g$.exports=function(t){UR[jR][t]=!0}});var v$=J(()=>{"use strict";var QOe=ht(),ePe=mo(),tPe=Vo(),rPe=ds(),nPe=sc();QOe({target:"Array",proto:!0},{at:function(e){var r=ePe(this),n=tPe(r),i=rPe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]}});nPe("at")});var Ky=J((n2t,y$)=>{"use strict";var iPe=TypeError,oPe=9007199254740991;y$.exports=function(t){if(t>oPe)throw iPe("Maximum allowed index exceeded");return t}});var Mp=J((i2t,b$)=>{"use strict";var aPe=zn(),sPe=ts(),lPe=zf();b$.exports=function(t,e,r){aPe?sPe.f(t,e,lPe(0,r)):t[e]=r}});var l_=J((o2t,_$)=>{"use strict";var uPe=Sr(),cPe=Ci(),fPe=Dp(),hPe=cPe("species");_$.exports=function(t){return fPe>=51||!uPe(function(){var e=[],r=e.constructor={};return r[hPe]=function(){return{foo:1}},e[t](Boolean).foo!==1})}});var E$=J(()=>{"use strict";var dPe=ht(),pPe=Sr(),mPe=jm(),gPe=ki(),vPe=mo(),yPe=Vo(),x$=Ky(),w$=Mp(),bPe=t_(),_Pe=l_(),xPe=Ci(),wPe=Dp(),S$=xPe("isConcatSpreadable"),SPe=wPe>=51||!pPe(function(){var t=[];return t[S$]=!1,t.concat()[0]!==t}),EPe=function(t){if(!gPe(t))return!1;var e=t[S$];return e!==void 0?!!e:mPe(t)},TPe=!SPe||!_Pe("concat");dPe({target:"Array",proto:!0,arity:1,forced:TPe},{concat:function(e){var r=vPe(this),n=bPe(r,0),i=0,o,s,u,h,y;for(o=-1,u=arguments.length;o<u;o++)if(y=o===-1?r:arguments[o],EPe(y))for(h=yPe(y),x$(i+h),s=0;s<h;s++,i++)s in y&&w$(n,i,y[s]);else x$(i+1),w$(n,i++,y);return n.length=i,n}})});var Aw=J((l2t,A$)=>{"use strict";var T$=ov(),APe=TypeError;A$.exports=function(t,e){if(!delete t[e])throw new APe("Cannot delete property "+T$(e)+" of "+T$(t))}});var HR=J((u2t,k$)=>{"use strict";var kPe=mo(),VR=Op(),CPe=Vo(),IPe=Aw(),DPe=Math.min;k$.exports=[].copyWithin||function(e,r){var n=kPe(this),i=CPe(n),o=VR(e,i),s=VR(r,i),u=arguments.length>2?arguments[2]:void 0,h=DPe((u===void 0?i:VR(u,i))-s,i-o),y=1;for(s<o&&o<s+h&&(y=-1,s+=h-1,o+=h-1);h-- >0;)s in n?n[o]=n[s]:IPe(n,o),o+=y,s+=y;return n}});var C$=J(()=>{"use strict";var OPe=ht(),PPe=HR(),MPe=sc();OPe({target:"Array",proto:!0},{copyWithin:PPe});MPe("copyWithin")});var Lp=J((h2t,I$)=>{"use strict";var LPe=Sr();I$.exports=function(t,e){var r=[][t];return!!r&&LPe(function(){r.call(null,e||function(){return 1},1)})}});var D$=J(()=>{"use strict";var RPe=ht(),FPe=zl().every,qPe=Lp(),NPe=qPe("every");RPe({target:"Array",proto:!0,forced:!NPe},{every:function(e){return FPe(this,e,arguments.length>1?arguments[1]:void 0)}})});var tC=J((m2t,P$)=>{"use strict";var BPe=mo(),O$=Op(),zPe=Vo();P$.exports=function(e){for(var r=BPe(this),n=zPe(r),i=arguments.length,o=O$(i>1?arguments[1]:void 0,n),s=i>2?arguments[2]:void 0,u=s===void 0?n:O$(s,n);u>o;)r[o++]=e;return r}});var M$=J(()=>{"use strict";var jPe=ht(),UPe=tC(),VPe=sc();jPe({target:"Array",proto:!0},{fill:UPe});VPe("fill")});var L$=J(()=>{"use strict";var HPe=ht(),WPe=zl().filter,$Pe=l_(),GPe=$Pe("filter");HPe({target:"Array",proto:!0,forced:!GPe},{filter:function(e){return WPe(this,e,arguments.length>1?arguments[1]:void 0)}})});var F$=J(()=>{"use strict";var KPe=ht(),ZPe=zl().find,YPe=sc(),WR="find",R$=!0;WR in[]&&Array(1)[WR](function(){R$=!1});KPe({target:"Array",proto:!0,forced:R$},{find:function(e){return ZPe(this,e,arguments.length>1?arguments[1]:void 0)}});YPe(WR)});var N$=J(()=>{"use strict";var XPe=ht(),JPe=zl().findIndex,QPe=sc(),$R="findIndex",q$=!0;$R in[]&&Array(1)[$R](function(){q$=!1});XPe({target:"Array",proto:!0,forced:q$},{findIndex:function(e){return JPe(this,e,arguments.length>1?arguments[1]:void 0)}});QPe($R)});var kw=J((E2t,z$)=>{"use strict";var eMe=Dh(),tMe=Fy(),rMe=mo(),nMe=Vo(),B$=function(t){var e=t===1;return function(r,n,i){for(var o=rMe(r),s=tMe(o),u=nMe(s),h=eMe(n,i),y,w;u-- >0;)if(y=s[u],w=h(y,u,o),w)switch(t){case 0:return y;case 1:return u}return e?-1:void 0}};z$.exports={findLast:B$(0),findLastIndex:B$(1)}});var j$=J(()=>{"use strict";var iMe=ht(),oMe=kw().findLast,aMe=sc();iMe({target:"Array",proto:!0},{findLast:function(e){return oMe(this,e,arguments.length>1?arguments[1]:void 0)}});aMe("findLast")});var U$=J(()=>{"use strict";var sMe=ht(),lMe=kw().findLastIndex,uMe=sc();sMe({target:"Array",proto:!0},{findLastIndex:function(e){return lMe(this,e,arguments.length>1?arguments[1]:void 0)}});uMe("findLastIndex")});var GR=J((I2t,H$)=>{"use strict";var cMe=jm(),fMe=Vo(),hMe=Ky(),dMe=Dh(),V$=function(t,e,r,n,i,o,s,u){for(var h=i,y=0,w=s?dMe(s,u):!1,T,I;y<n;)y in r&&(T=w?w(r[y],y,e):r[y],o>0&&cMe(T)?(I=fMe(T),h=V$(t,e,T,I,h,o-1)-1):(hMe(h+1),t[h]=T),h++),y++;return h};H$.exports=V$});var W$=J(()=>{"use strict";var pMe=ht(),mMe=GR(),gMe=mo(),vMe=Vo(),yMe=ds(),bMe=t_();pMe({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,r=gMe(this),n=vMe(r),i=bMe(r,0);return i.length=mMe(i,r,r,n,0,e===void 0?1:yMe(e)),i}})});var $$=J(()=>{"use strict";var _Me=ht(),xMe=GR(),wMe=no(),SMe=mo(),EMe=Vo(),TMe=t_();_Me({target:"Array",proto:!0},{flatMap:function(e){var r=SMe(this),n=EMe(r),i;return wMe(e),i=TMe(r,0),i.length=xMe(i,r,r,n,0,1,e,arguments.length>1?arguments[1]:void 0),i}})});var KR=J((L2t,G$)=>{"use strict";var AMe=zl().forEach,kMe=Lp(),CMe=kMe("forEach");G$.exports=CMe?[].forEach:function(e){return AMe(this,e,arguments.length>1?arguments[1]:void 0)}});var Z$=J(()=>{"use strict";var IMe=ht(),K$=KR();IMe({target:"Array",proto:!0,forced:[].forEach!==K$},{forEach:K$})});var rC=J((q2t,Y$)=>{"use strict";var DMe=qn(),OMe=fv();Y$.exports=function(t,e,r,n){try{return n?e(DMe(r)[0],r[1]):e(r)}catch(i){OMe(t,"throw",i)}}});var ZR=J((N2t,Q$)=>{"use strict";var PMe=Dh(),MMe=$n(),LMe=mo(),RMe=rC(),FMe=Xk(),qMe=Uy(),NMe=Vo(),X$=Mp(),BMe=Tw(),zMe=Gy(),J$=Array;Q$.exports=function(e){var r=LMe(e),n=qMe(this),i=arguments.length,o=i>1?arguments[1]:void 0,s=o!==void 0;s&&(o=PMe(o,i>2?arguments[2]:void 0));var u=zMe(r),h=0,y,w,T,I,P,L;if(u&&!(this===J$&&FMe(u)))for(w=n?new this:[],I=BMe(r,u),P=I.next;!(T=MMe(P,I)).done;h++)L=s?RMe(I,o,[T.value,h],!0):T.value,X$(w,h,L);else for(y=NMe(r),w=n?new this(y):J$(y);y>h;h++)L=s?o(r[h],h):r[h],X$(w,h,L);return w.length=h,w}});var Cw=J((B2t,nG)=>{"use strict";var jMe=Ci(),tG=jMe("iterator"),rG=!1;try{eG=0,YR={next:function(){return{done:!!eG++}},return:function(){rG=!0}},YR[tG]=function(){return this},Array.from(YR,function(){throw 2})}catch{}var eG,YR;nG.exports=function(t,e){try{if(!e&&!rG)return!1}catch{return!1}var r=!1;try{var n={};n[tG]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch{}return r}});var iG=J(()=>{"use strict";var UMe=ht(),VMe=ZR(),HMe=Cw(),WMe=!HMe(function(t){Array.from(t)});UMe({target:"Array",stat:!0,forced:WMe},{from:VMe})});var oG=J(()=>{"use strict";var $Me=ht(),GMe=X0().includes,KMe=Sr(),ZMe=sc(),YMe=KMe(function(){return!Array(1).includes()});$Me({target:"Array",proto:!0,forced:YMe},{includes:function(e){return GMe(this,e,arguments.length>1?arguments[1]:void 0)}});ZMe("includes")});var sG=J(()=>{"use strict";var XMe=ht(),JMe=sv(),QMe=X0().indexOf,eLe=Lp(),XR=JMe([].indexOf),aG=!!XR&&1/XR([1],1,-0)<0,tLe=aG||!eLe("indexOf");XMe({target:"Array",proto:!0,forced:tLe},{indexOf:function(e){var r=arguments.length>1?arguments[1]:void 0;return aG?XR(this,e,r)||0:QMe(this,e,r)}})});var lG=J(()=>{"use strict";var rLe=ht(),nLe=jm();rLe({target:"Array",stat:!0},{isArray:nLe})});var u_=J((K2t,fG)=>{"use strict";var iLe=Sr(),oLe=Wi(),aLe=ki(),sLe=ic(),uG=Nc(),lLe=Ba(),uLe=Ci(),cLe=Mo(),eF=uLe("iterator"),cG=!1,Hm,JR,QR;[].keys&&(QR=[].keys(),"next"in QR?(JR=uG(uG(QR)),JR!==Object.prototype&&(Hm=JR)):cG=!0);var fLe=!aLe(Hm)||iLe(function(){var t={};return Hm[eF].call(t)!==t});fLe?Hm={}:cLe&&(Hm=sLe(Hm));oLe(Hm[eF])||lLe(Hm,eF,function(){return this});fG.exports={IteratorPrototype:Hm,BUGGY_SAFARI_ITERATORS:cG}});var nC=J((Z2t,hG)=>{"use strict";var hLe=u_().IteratorPrototype,dLe=ic(),pLe=zf(),mLe=ac(),gLe=a_(),vLe=function(){return this};hG.exports=function(t,e,r,n){var i=e+" Iterator";return t.prototype=dLe(hLe,{next:pLe(+!n,r)}),mLe(t,i,!1,!0),gLe[i]=vLe,t}});var aC=J((Y2t,wG)=>{"use strict";var yLe=ht(),bLe=$n(),iC=Mo(),_G=zy(),_Le=Wi(),xLe=nC(),dG=Nc(),pG=Ad(),wLe=ac(),SLe=su(),tF=Ba(),ELe=Ci(),mG=a_(),xG=u_(),TLe=_G.PROPER,ALe=_G.CONFIGURABLE,gG=xG.IteratorPrototype,oC=xG.BUGGY_SAFARI_ITERATORS,Iw=ELe("iterator"),vG="keys",Dw="values",yG="entries",bG=function(){return this};wG.exports=function(t,e,r,n,i,o,s){xLe(r,e,n);var u=function(G){if(G===i&&I)return I;if(!oC&&G&&G in w)return w[G];switch(G){case vG:return function(){return new r(this,G)};case Dw:return function(){return new r(this,G)};case yG:return function(){return new r(this,G)}}return function(){return new r(this)}},h=e+" Iterator",y=!1,w=t.prototype,T=w[Iw]||w["@@iterator"]||i&&w[i],I=!oC&&T||u(i),P=e==="Array"&&w.entries||T,L,R,W;if(P&&(L=dG(P.call(new t)),L!==Object.prototype&&L.next&&(!iC&&dG(L)!==gG&&(pG?pG(L,gG):_Le(L[Iw])||tF(L,Iw,bG)),wLe(L,h,!0,!0),iC&&(mG[h]=bG))),TLe&&i===Dw&&T&&T.name!==Dw&&(!iC&&ALe?SLe(w,"name",Dw):(y=!0,I=function(){return bLe(T,this)})),i)if(R={values:u(Dw),keys:o?I:u(vG),entries:u(yG)},s)for(W in R)(oC||y||!(W in w))&&tF(w,W,R[W]);else yLe({target:e,proto:!0,forced:oC||y},R);return(!iC||s)&&w[Iw]!==I&&tF(w,Iw,I,{name:i}),mG[e]=I,R}});var Zy=J((X2t,SG)=>{"use strict";SG.exports=function(t,e){return{value:t,done:e}}});var Ow=J((J2t,CG)=>{"use strict";var kLe=xl(),rF=sc(),EG=a_(),AG=Us(),CLe=ts().f,ILe=aC(),sC=Zy(),DLe=Mo(),OLe=zn(),kG="Array Iterator",PLe=AG.set,MLe=AG.getterFor(kG);CG.exports=ILe(Array,"Array",function(t,e){PLe(this,{type:kG,target:kLe(t),index:0,kind:e})},function(){var t=MLe(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,sC(void 0,!0);switch(t.kind){case"keys":return sC(r,!1);case"values":return sC(e[r],!1)}return sC([r,e[r]],!1)},"values");var TG=EG.Arguments=EG.Array;rF("keys");rF("values");rF("entries");if(!DLe&&OLe&&TG.name!=="values")try{CLe(TG,"name",{value:"values"})}catch{}});var IG=J(()=>{"use strict";var LLe=ht(),RLe=qr(),FLe=Fy(),qLe=xl(),NLe=Lp(),BLe=RLe([].join),zLe=FLe!==Object,jLe=zLe||!NLe("join",",");LLe({target:"Array",proto:!0,forced:jLe},{join:function(e){return BLe(qLe(this),e===void 0?",":e)}})});var iF=J((tIt,OG)=>{"use strict";var ULe=Uf(),VLe=xl(),HLe=ds(),WLe=Vo(),$Le=Lp(),GLe=Math.min,nF=[].lastIndexOf,DG=!!nF&&1/[1].lastIndexOf(1,-0)<0,KLe=$Le("lastIndexOf"),ZLe=DG||!KLe;OG.exports=ZLe?function(e){if(DG)return ULe(nF,this,arguments)||0;var r=VLe(this),n=WLe(r);if(n===0)return-1;var i=n-1;for(arguments.length>1&&(i=GLe(i,HLe(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in r&&r[i]===e)return i||0;return-1}:nF});var MG=J(()=>{"use strict";var YLe=ht(),PG=iF();YLe({target:"Array",proto:!0,forced:PG!==[].lastIndexOf},{lastIndexOf:PG})});var LG=J(()=>{"use strict";var XLe=ht(),JLe=zl().map,QLe=l_(),eRe=QLe("map");XLe({target:"Array",proto:!0,forced:!eRe},{map:function(e){return JLe(this,e,arguments.length>1?arguments[1]:void 0)}})});var FG=J(()=>{"use strict";var tRe=ht(),rRe=Sr(),nRe=Uy(),iRe=Mp(),RG=Array,oRe=rRe(function(){function t(){}return!(RG.of.call(t)instanceof t)});tRe({target:"Array",stat:!0,forced:oRe},{of:function(){for(var e=0,r=arguments.length,n=new(nRe(this)?this:RG)(r);r>e;)iRe(n,e,arguments[e++]);return n.length=r,n}})});var lC=J((lIt,qG)=>{"use strict";var aRe=zn(),sRe=jm(),lRe=TypeError,uRe=Object.getOwnPropertyDescriptor,cRe=aRe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();qG.exports=cRe?function(t,e){if(sRe(t)&&!uRe(t,"length").writable)throw new lRe("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}});var NG=J(()=>{"use strict";var fRe=ht(),hRe=mo(),dRe=Vo(),pRe=lC(),mRe=Ky(),gRe=Sr(),vRe=gRe(function(){return[].push.call({length:4294967296},1)!==4294967297}),yRe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},bRe=vRe||!yRe();fRe({target:"Array",proto:!0,arity:1,forced:bRe},{push:function(e){var r=hRe(this),n=dRe(r),i=arguments.length;mRe(n+i);for(var o=0;o<i;o++)r[n]=arguments[o],n++;return pRe(r,n),n}})});var Pw=J((fIt,UG)=>{"use strict";var _Re=no(),xRe=mo(),wRe=Fy(),SRe=Vo(),BG=TypeError,zG="Reduce of empty array with no initial value",jG=function(t){return function(e,r,n,i){var o=xRe(e),s=wRe(o),u=SRe(o);if(_Re(r),u===0&&n<2)throw new BG(zG);var h=t?u-1:0,y=t?-1:1;if(n<2)for(;;){if(h in s){i=s[h],h+=y;break}if(h+=y,t?h<0:u<=h)throw new BG(zG)}for(;t?h>=0:u>h;h+=y)h in s&&(i=r(i,s[h],h,o));return i}};UG.exports={left:jG(!1),right:jG(!0)}});var Lw=J((hIt,VG)=>{"use strict";var Mw=Jr(),ERe=wd(),TRe=au(),uC=function(t){return ERe.slice(0,t.length)===t};VG.exports=function(){return uC("Bun/")?"BUN":uC("Cloudflare-Workers")?"CLOUDFLARE":uC("Deno/")?"DENO":uC("Node.js/")?"NODE":Mw.Bun&&typeof Bun.version=="string"?"BUN":Mw.Deno&&typeof Deno.version=="object"?"DENO":TRe(Mw.process)==="process"?"NODE":Mw.window&&Mw.document?"BROWSER":"REST"}()});var Yy=J((dIt,HG)=>{"use strict";var ARe=Lw();HG.exports=ARe==="NODE"});var $G=J(()=>{"use strict";var kRe=ht(),CRe=Pw().left,IRe=Lp(),WG=Dp(),DRe=Yy(),ORe=!DRe&&WG>79&&WG<83,PRe=ORe||!IRe("reduce");kRe({target:"Array",proto:!0,forced:PRe},{reduce:function(e){var r=arguments.length;return CRe(this,e,r,r>1?arguments[1]:void 0)}})});var KG=J(()=>{"use strict";var MRe=ht(),LRe=Pw().right,RRe=Lp(),GG=Dp(),FRe=Yy(),qRe=!FRe&&GG>79&&GG<83,NRe=qRe||!RRe("reduceRight");MRe({target:"Array",proto:!0,forced:NRe},{reduceRight:function(e){return LRe(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var YG=J(()=>{"use strict";var BRe=ht(),zRe=qr(),jRe=jm(),URe=zRe([].reverse),ZG=[1,2];BRe({target:"Array",proto:!0,forced:String(ZG)===String(ZG.reverse())},{reverse:function(){return jRe(this)&&(this.length=this.length),URe(this)}})});var QG=J(()=>{"use strict";var VRe=ht(),XG=jm(),HRe=Uy(),WRe=ki(),JG=Op(),$Re=Vo(),GRe=xl(),KRe=Mp(),ZRe=Ci(),YRe=l_(),XRe=jf(),JRe=YRe("slice"),QRe=ZRe("species"),oF=Array,eFe=Math.max;VRe({target:"Array",proto:!0,forced:!JRe},{slice:function(e,r){var n=GRe(this),i=$Re(n),o=JG(e,i),s=JG(r===void 0?i:r,i),u,h,y;if(XG(n)&&(u=n.constructor,HRe(u)&&(u===oF||XG(u.prototype))?u=void 0:WRe(u)&&(u=u[QRe],u===null&&(u=void 0)),u===oF||u===void 0))return XRe(n,o,s);for(h=new(u===void 0?oF:u)(eFe(s-o,0)),y=0;o<s;o++,y++)o in n&&KRe(h,y,n[o]);return h.length=y,h}})});var eK=J(()=>{"use strict";var tFe=ht(),rFe=zl().some,nFe=Lp(),iFe=nFe("some");tFe({target:"Array",proto:!0,forced:!iFe},{some:function(e){return rFe(this,e,arguments.length>1?arguments[1]:void 0)}})});var cC=J((EIt,rK)=>{"use strict";var tK=jf(),oFe=Math.floor,aF=function(t,e){var r=t.length;if(r<8)for(var n=1,i,o;n<r;){for(o=n,i=t[n];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==n++&&(t[o]=i)}else for(var s=oFe(r/2),u=aF(tK(t,0,s),e),h=aF(tK(t,s),e),y=u.length,w=h.length,T=0,I=0;T<y||I<w;)t[T+I]=T<y&&I<w?e(u[T],h[I])<=0?u[T++]:h[I++]:T<y?u[T++]:h[I++];return t};rK.exports=aF});var sF=J((TIt,iK)=>{"use strict";var aFe=wd(),nK=aFe.match(/firefox\/(\d+)/i);iK.exports=!!nK&&+nK[1]});var lF=J((AIt,oK)=>{"use strict";var sFe=wd();oK.exports=/MSIE|Trident/.test(sFe)});var fC=J((kIt,sK)=>{"use strict";var lFe=wd(),aK=lFe.match(/AppleWebKit\/(\d+)\./);sK.exports=!!aK&&+aK[1]});var gK=J(()=>{"use strict";var uFe=ht(),pK=qr(),cFe=no(),fFe=mo(),lK=Vo(),hFe=Aw(),uK=ai(),uF=Sr(),dFe=cC(),pFe=Lp(),cK=sF(),mFe=lF(),fK=Dp(),hK=fC(),hv=[],dK=pK(hv.sort),gFe=pK(hv.push),vFe=uF(function(){hv.sort(void 0)}),yFe=uF(function(){hv.sort(null)}),bFe=pFe("sort"),mK=!uF(function(){if(fK)return fK<70;if(!(cK&&cK>3)){if(mFe)return!0;if(hK)return hK<603;var t="",e,r,n,i;for(e=65;e<76;e++){switch(r=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)hv.push({k:r+i,v:n})}for(hv.sort(function(o,s){return s.v-o.v}),i=0;i<hv.length;i++)r=hv[i].k.charAt(0),t.charAt(t.length-1)!==r&&(t+=r);return t!=="DGBEFHACIJK"}}),_Fe=vFe||!yFe||!bFe||!mK,xFe=function(t){return function(e,r){return r===void 0?-1:e===void 0?1:t!==void 0?+t(e,r)||0:uK(e)>uK(r)?1:-1}};uFe({target:"Array",proto:!0,forced:_Fe},{sort:function(e){e!==void 0&&cFe(e);var r=fFe(this);if(mK)return e===void 0?dK(r):dK(r,e);var n=[],i=lK(r),o,s;for(s=0;s<i;s++)s in r&&gFe(n,r[s]);for(dFe(n,xFe(e)),o=lK(n),s=0;s<o;)r[s]=n[s++];for(;s<i;)hFe(r,s++);return r}})});var Xy=J((DIt,yK)=>{"use strict";var wFe=Uo(),SFe=el(),EFe=Ci(),TFe=zn(),vK=EFe("species");yK.exports=function(t){var e=wFe(t);TFe&&e&&!e[vK]&&SFe(e,vK,{configurable:!0,get:function(){return this}})}});var bK=J(()=>{"use strict";var AFe=Xy();AFe("Array")});var _K=J(()=>{"use strict";var kFe=ht(),CFe=mo(),IFe=Op(),DFe=ds(),OFe=Vo(),PFe=lC(),MFe=Ky(),LFe=t_(),RFe=Mp(),cF=Aw(),FFe=l_(),qFe=FFe("splice"),NFe=Math.max,BFe=Math.min;kFe({target:"Array",proto:!0,forced:!qFe},{splice:function(e,r){var n=CFe(this),i=OFe(n),o=IFe(e,i),s=arguments.length,u,h,y,w,T,I;for(s===0?u=h=0:s===1?(u=0,h=i-o):(u=s-2,h=BFe(NFe(DFe(r),0),i-o)),MFe(i+u-h),y=LFe(n,h),w=0;w<h;w++)T=o+w,T in n&&RFe(y,w,n[T]);if(y.length=h,u<h){for(w=o;w<i-h;w++)T=w+h,I=w+u,T in n?n[I]=n[T]:cF(n,I);for(w=i;w>i-h+u;w--)cF(n,w-1)}else if(u>h)for(w=i-h;w>o;w--)T=w+h-1,I=w+u-1,T in n?n[I]=n[T]:cF(n,I);for(w=0;w<u;w++)n[w+o]=arguments[w+2];return PFe(n,i-h+u),y}})});var fF=J((RIt,xK)=>{"use strict";var zFe=Vo();xK.exports=function(t,e){for(var r=zFe(t),n=new e(r),i=0;i<r;i++)n[i]=t[r-i-1];return n}});var wK=J(()=>{"use strict";var jFe=ht(),UFe=fF(),VFe=xl(),HFe=sc(),WFe=Array;jFe({target:"Array",proto:!0},{toReversed:function(){return UFe(VFe(this),WFe)}});HFe("toReversed")});var Rw=J((NIt,SK)=>{"use strict";var $Fe=Vo();SK.exports=function(t,e,r){for(var n=0,i=arguments.length>2?r:$Fe(e),o=new t(i);i>n;)o[n]=e[n++];return o}});var TK=J((BIt,EK)=>{"use strict";var GFe=Jr();EK.exports=function(t,e){var r=GFe[t],n=r&&r.prototype;return n&&n[e]}});var AK=J(()=>{"use strict";var KFe=ht(),ZFe=qr(),YFe=no(),XFe=xl(),JFe=Rw(),QFe=TK(),eqe=sc(),tqe=Array,rqe=ZFe(QFe("Array","sort"));KFe({target:"Array",proto:!0},{toSorted:function(e){e!==void 0&&YFe(e);var r=XFe(this),n=JFe(tqe,r);return rqe(n,e)}});eqe("toSorted")});var kK=J(()=>{"use strict";var nqe=ht(),iqe=sc(),oqe=Ky(),aqe=Vo(),sqe=Op(),lqe=xl(),uqe=ds(),cqe=Array,fqe=Math.max,hqe=Math.min;nqe({target:"Array",proto:!0},{toSpliced:function(e,r){var n=lqe(this),i=aqe(n),o=sqe(e,i),s=arguments.length,u=0,h,y,w,T;for(s===0?h=y=0:s===1?(h=0,y=i-o):(h=s-2,y=hqe(fqe(uqe(r),0),i-o)),w=oqe(i+h-y),T=cqe(w);u<o;u++)T[u]=n[u];for(;u<o+h;u++)T[u]=arguments[u-o+2];for(;u<w;u++)T[u]=n[u+y-h];return T}});iqe("toSpliced")});var CK=J(()=>{"use strict";var dqe=sc();dqe("flat")});var IK=J(()=>{"use strict";var pqe=sc();pqe("flatMap")});var DK=J(()=>{"use strict";var mqe=ht(),gqe=mo(),vqe=Vo(),yqe=lC(),bqe=Aw(),_qe=Ky(),xqe=[].unshift(0)!==1,wqe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},Sqe=xqe||!wqe();mqe({target:"Array",proto:!0,arity:1,forced:Sqe},{unshift:function(e){var r=gqe(this),n=vqe(r),i=arguments.length;if(i){_qe(n+i);for(var o=n;o--;){var s=o+i;o in r?r[s]=r[o]:bqe(r,s)}for(var u=0;u<i;u++)r[u]=arguments[u]}return yqe(r,n+i)}})});var hF=J((YIt,OK)=>{"use strict";var Eqe=Vo(),Tqe=ds(),Aqe=RangeError;OK.exports=function(t,e,r,n){var i=Eqe(t),o=Tqe(r),s=o<0?i+o:o;if(s>=i||s<0)throw new Aqe("Incorrect index");for(var u=new e(i),h=0;h<i;h++)u[h]=h===s?n:t[h];return u}});var PK=J(()=>{"use strict";var kqe=ht(),Cqe=hF(),Iqe=xl(),Dqe=Array;kqe({target:"Array",proto:!0},{with:function(t,e){return Cqe(Iqe(this),Dqe,t,e)}})});var Fw=J((QIt,MK)=>{"use strict";MK.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"});var Jy=J((eDt,LK)=>{"use strict";var Oqe=Ba();LK.exports=function(t,e,r){for(var n in e)Oqe(t,n,e[n],r);return t}});var Ph=J((tDt,RK)=>{"use strict";var Pqe=nc(),Mqe=TypeError;RK.exports=function(t,e){if(Pqe(e,t))return t;throw new Mqe("Incorrect invocation")}});var qw=J((rDt,FK)=>{"use strict";var Lqe=ds(),Rqe=Fc(),Fqe=RangeError;FK.exports=function(t){if(t===void 0)return 0;var e=Lqe(t),r=Rqe(e);if(e!==r)throw new Fqe("Wrong length or index");return r}});var hC=J((nDt,qK)=>{"use strict";qK.exports=Math.sign||function(e){var r=+e;return r===0||r!==r?r:r<0?-1:1}});var dF=J((iDt,BK)=>{"use strict";var qqe=2220446049250313e-31,NK=1/qqe;BK.exports=function(t){return t+NK-NK}});var pF=J((oDt,zK)=>{"use strict";var Nqe=hC(),Bqe=dF(),zqe=Math.abs,jqe=2220446049250313e-31;zK.exports=function(t,e,r,n){var i=+t,o=zqe(i),s=Nqe(i);if(o<n)return s*Bqe(o/n/e)*n*e;var u=(1+e/jqe)*o,h=u-(u-o);return h>r||h!==h?s*(1/0):s*h}});var mF=J((aDt,jK)=>{"use strict";var Uqe=pF(),Vqe=11920928955078125e-23,Hqe=34028234663852886e22,Wqe=11754943508222875e-54;jK.exports=Math.fround||function(e){return Uqe(e,Vqe,Hqe,Wqe)}});var VK=J((sDt,UK)=>{"use strict";var $qe=Array,Gqe=Math.abs,Wm=Math.pow,Kqe=Math.floor,Zqe=Math.log,Yqe=Math.LN2,Xqe=function(t,e,r){var n=$qe(r),i=r*8-e-1,o=(1<<i)-1,s=o>>1,u=e===23?Wm(2,-24)-Wm(2,-77):0,h=t<0||t===0&&1/t<0?1:0,y=0,w,T,I;for(t=Gqe(t),t!==t||t===1/0?(T=t!==t?1:0,w=o):(w=Kqe(Zqe(t)/Yqe),I=Wm(2,-w),t*I<1&&(w--,I*=2),w+s>=1?t+=u/I:t+=u*Wm(2,1-s),t*I>=2&&(w++,I/=2),w+s>=o?(T=0,w=o):w+s>=1?(T=(t*I-1)*Wm(2,e),w+=s):(T=t*Wm(2,s-1)*Wm(2,e),w=0));e>=8;)n[y++]=T&255,T/=256,e-=8;for(w=w<<e|T,i+=e;i>0;)n[y++]=w&255,w/=256,i-=8;return n[y-1]|=h*128,n},Jqe=function(t,e){var r=t.length,n=r*8-e-1,i=(1<<n)-1,o=i>>1,s=n-7,u=r-1,h=t[u--],y=h&127,w;for(h>>=7;s>0;)y=y*256+t[u--],s-=8;for(w=y&(1<<-s)-1,y>>=-s,s+=e;s>0;)w=w*256+t[u--],s-=8;if(y===0)y=1-o;else{if(y===i)return w?NaN:h?-1/0:1/0;w+=Wm(2,e),y-=o}return(h?-1:1)*w*Wm(2,y-e)};UK.exports={pack:Xqe,unpack:Jqe}});var zw=J((lDt,aZ)=>{"use strict";var vC=Jr(),_F=qr(),gF=zn(),Qqe=Fw(),tZ=zy(),eNe=su(),tNe=el(),HK=Jy(),vF=Sr(),dC=Ph(),rNe=ds(),nNe=Fc(),mC=qw(),iNe=mF(),rZ=VK(),oNe=Nc(),WK=Ad(),aNe=tC(),sNe=jf(),lNe=cv(),uNe=J0(),nZ=ac(),xF=Us(),cNe=tZ.PROPER,$K=tZ.CONFIGURABLE,f_="ArrayBuffer",yC="DataView",h_="prototype",fNe="Wrong length",iZ="Wrong index",GK=xF.getterFor(f_),Bw=xF.getterFor(yC),KK=xF.set,kd=vC[f_],Vf=kd,c_=Vf&&Vf[h_],Rp=vC[yC],Qy=Rp&&Rp[h_],ZK=Object.prototype,hNe=vC.Array,gC=vC.RangeError,dNe=_F(aNe),pNe=_F([].reverse),oZ=rZ.pack,YK=rZ.unpack,XK=function(t){return[t&255]},JK=function(t){return[t&255,t>>8&255]},QK=function(t){return[t&255,t>>8&255,t>>16&255,t>>24&255]},eZ=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},mNe=function(t){return oZ(iNe(t),23,4)},gNe=function(t){return oZ(t,52,8)},pC=function(t,e,r){tNe(t[h_],e,{configurable:!0,get:function(){return r(this)[e]}})},dv=function(t,e,r,n){var i=Bw(t),o=mC(r),s=!!n;if(o+e>i.byteLength)throw new gC(iZ);var u=i.bytes,h=o+i.byteOffset,y=sNe(u,h,h+e);return s?y:pNe(y)},pv=function(t,e,r,n,i,o){var s=Bw(t),u=mC(r),h=n(+i),y=!!o;if(u+e>s.byteLength)throw new gC(iZ);for(var w=s.bytes,T=u+s.byteOffset,I=0;I<e;I++)w[T+I]=h[y?I:e-I-1]};Qqe?(yF=cNe&&kd.name!==f_,!vF(function(){kd(1)})||!vF(function(){new kd(-1)})||vF(function(){return new kd,new kd(1.5),new kd(NaN),kd.length!==1||yF&&!$K})?(Vf=function(e){return dC(this,c_),lNe(new kd(mC(e)),this,Vf)},Vf[h_]=c_,c_.constructor=Vf,uNe(Vf,kd)):yF&&$K&&eNe(kd,"name",f_),WK&&oNe(Qy)!==ZK&&WK(Qy,ZK),Nw=new Rp(new Vf(2)),bF=_F(Qy.setInt8),Nw.setInt8(0,2147483648),Nw.setInt8(1,2147483649),(Nw.getInt8(0)||!Nw.getInt8(1))&&HK(Qy,{setInt8:function(e,r){bF(this,e,r<<24>>24)},setUint8:function(e,r){bF(this,e,r<<24>>24)}},{unsafe:!0})):(Vf=function(e){dC(this,c_);var r=mC(e);KK(this,{type:f_,bytes:dNe(hNe(r),0),byteLength:r}),gF||(this.byteLength=r,this.detached=!1)},c_=Vf[h_],Rp=function(e,r,n){dC(this,Qy),dC(e,c_);var i=GK(e),o=i.byteLength,s=rNe(r);if(s<0||s>o)throw new gC("Wrong offset");if(n=n===void 0?o-s:nNe(n),s+n>o)throw new gC(fNe);KK(this,{type:yC,buffer:e,byteLength:n,byteOffset:s,bytes:i.bytes}),gF||(this.buffer=e,this.byteLength=n,this.byteOffset=s)},Qy=Rp[h_],gF&&(pC(Vf,"byteLength",GK),pC(Rp,"buffer",Bw),pC(Rp,"byteLength",Bw),pC(Rp,"byteOffset",Bw)),HK(Qy,{getInt8:function(e){return dv(this,1,e)[0]<<24>>24},getUint8:function(e){return dv(this,1,e)[0]},getInt16:function(e){var r=dv(this,2,e,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(e){var r=dv(this,2,e,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(e){return eZ(dv(this,4,e,arguments.length>1?arguments[1]:!1))},getUint32:function(e){return eZ(dv(this,4,e,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(e){return YK(dv(this,4,e,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(e){return YK(dv(this,8,e,arguments.length>1?arguments[1]:!1),52)},setInt8:function(e,r){pv(this,1,e,XK,r)},setUint8:function(e,r){pv(this,1,e,XK,r)},setInt16:function(e,r){pv(this,2,e,JK,r,arguments.length>2?arguments[2]:!1)},setUint16:function(e,r){pv(this,2,e,JK,r,arguments.length>2?arguments[2]:!1)},setInt32:function(e,r){pv(this,4,e,QK,r,arguments.length>2?arguments[2]:!1)},setUint32:function(e,r){pv(this,4,e,QK,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(e,r){pv(this,4,e,mNe,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(e,r){pv(this,8,e,gNe,r,arguments.length>2?arguments[2]:!1)}}));var yF,Nw,bF;nZ(Vf,f_);nZ(Rp,yC);aZ.exports={ArrayBuffer:Vf,DataView:Rp}});var lZ=J(()=>{"use strict";var vNe=ht(),yNe=Jr(),bNe=zw(),_Ne=Xy(),wF="ArrayBuffer",sZ=bNe[wF],xNe=yNe[wF];vNe({global:!0,constructor:!0,forced:xNe!==sZ},{ArrayBuffer:sZ});_Ne(wF)});var Fi=J((fDt,yZ)=>{"use strict";var wNe=Fw(),AF=zn(),lc=Jr(),hZ=Wi(),xC=ki(),gv=Xi(),kF=Ih(),SNe=ov(),ENe=su(),SF=Ba(),TNe=el(),ANe=nc(),wC=Nc(),p_=Ad(),kNe=Ci(),CNe=By(),dZ=Us(),pZ=dZ.enforce,INe=dZ.get,bC=lc.Int8Array,EF=bC&&bC.prototype,uZ=lc.Uint8ClampedArray,cZ=uZ&&uZ.prototype,Fp=bC&&wC(bC),Cd=EF&&wC(EF),DNe=Object.prototype,CF=lc.TypeError,fZ=kNe("toStringTag"),TF=CNe("TYPED_ARRAY_TAG"),_C="TypedArrayConstructor",$m=wNe&&!!p_&&kF(lc.opera)!=="Opera",mZ=!1,Bc,mv,d_,Gm={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},IF={BigInt64Array:8,BigUint64Array:8},ONe=function(e){if(!xC(e))return!1;var r=kF(e);return r==="DataView"||gv(Gm,r)||gv(IF,r)},gZ=function(t){var e=wC(t);if(xC(e)){var r=INe(e);return r&&gv(r,_C)?r[_C]:gZ(e)}},vZ=function(t){if(!xC(t))return!1;var e=kF(t);return gv(Gm,e)||gv(IF,e)},PNe=function(t){if(vZ(t))return t;throw new CF("Target is not a typed array")},MNe=function(t){if(hZ(t)&&(!p_||ANe(Fp,t)))return t;throw new CF(SNe(t)+" is not a typed array constructor")},LNe=function(t,e,r,n){if(AF){if(r)for(var i in Gm){var o=lc[i];if(o&&gv(o.prototype,t))try{delete o.prototype[t]}catch{try{o.prototype[t]=e}catch{}}}(!Cd[t]||r)&&SF(Cd,t,r?e:$m&&EF[t]||e,n)}},RNe=function(t,e,r){var n,i;if(AF){if(p_){if(r){for(n in Gm)if(i=lc[n],i&&gv(i,t))try{delete i[t]}catch{}}if(!Fp[t]||r)try{return SF(Fp,t,r?e:$m&&Fp[t]||e)}catch{}else return}for(n in Gm)i=lc[n],i&&(!i[t]||r)&&SF(i,t,e)}};for(Bc in Gm)mv=lc[Bc],d_=mv&&mv.prototype,d_?pZ(d_)[_C]=mv:$m=!1;for(Bc in IF)mv=lc[Bc],d_=mv&&mv.prototype,d_&&(pZ(d_)[_C]=mv);if((!$m||!hZ(Fp)||Fp===Function.prototype)&&(Fp=function(){throw new CF("Incorrect invocation")},$m))for(Bc in Gm)lc[Bc]&&p_(lc[Bc],Fp);if((!$m||!Cd||Cd===DNe)&&(Cd=Fp.prototype,$m))for(Bc in Gm)lc[Bc]&&p_(lc[Bc].prototype,Cd);$m&&wC(cZ)!==Cd&&p_(cZ,Cd);if(AF&&!gv(Cd,fZ)){mZ=!0,TNe(Cd,fZ,{configurable:!0,get:function(){return xC(this)?this[TF]:void 0}});for(Bc in Gm)lc[Bc]&&ENe(lc[Bc],TF,Bc)}yZ.exports={NATIVE_ARRAY_BUFFER_VIEWS:$m,TYPED_ARRAY_TAG:mZ&&TF,aTypedArray:PNe,aTypedArrayConstructor:MNe,exportTypedArrayMethod:LNe,exportTypedArrayStaticMethod:RNe,getTypedArrayConstructor:gZ,isView:ONe,isTypedArray:vZ,TypedArray:Fp,TypedArrayPrototype:Cd}});var _Z=J(()=>{"use strict";var FNe=ht(),bZ=Fi(),qNe=bZ.NATIVE_ARRAY_BUFFER_VIEWS;FNe({target:"ArrayBuffer",stat:!0,forced:!qNe},{isView:bZ.isView})});var AZ=J(()=>{"use strict";var NNe=ht(),OF=sv(),BNe=Sr(),EZ=zw(),xZ=qn(),wZ=Op(),zNe=Fc(),PF=EZ.ArrayBuffer,DF=EZ.DataView,TZ=DF.prototype,SZ=OF(PF.prototype.slice),jNe=OF(TZ.getUint8),UNe=OF(TZ.setUint8),VNe=BNe(function(){return!new PF(2).slice(1,void 0).byteLength});NNe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:VNe},{slice:function(e,r){if(SZ&&r===void 0)return SZ(xZ(this),e);for(var n=xZ(this).byteLength,i=wZ(e,n),o=wZ(r===void 0?n:r,n),s=new PF(zNe(o-i)),u=new DF(this),h=new DF(s),y=0;i<o;)UNe(h,y++,jNe(u,i++));return s}})});var kZ=J(()=>{"use strict";var HNe=ht(),WNe=zw(),$Ne=Fw();HNe({global:!0,constructor:!0,forced:!$Ne},{DataView:WNe.DataView})});var CZ=J(()=>{"use strict";kZ()});var MZ=J(()=>{"use strict";var GNe=ht(),KNe=qr(),PZ=Math.pow,IZ=31,ZNe=1023,DZ=PZ(2,-24),OZ=.0009765625,YNe=function(t){var e=t>>>15,r=t>>>10&IZ,n=t&ZNe;return r===IZ?n===0?e===0?1/0:-1/0:NaN:r===0?n*(e===0?DZ:-DZ):PZ(2,r-15)*(e===0?1+n*OZ:-1-n*OZ)},XNe=KNe(DataView.prototype.getUint16);GNe({target:"DataView",proto:!0},{getFloat16:function(e){var r=XNe(this,e,arguments.length>1?arguments[1]:!1);return YNe(r)}})});var RZ=J((wDt,LZ)=>{"use strict";var JNe=Ih(),QNe=TypeError;LZ.exports=function(t){if(JNe(t)==="DataView")return t;throw new QNe("Argument is not a DataView")}});var MF=J((SDt,FZ)=>{"use strict";var e3e=Math.log,t3e=Math.LN2;FZ.exports=Math.log2||function(e){return e3e(e)/t3e}});var NZ=J(()=>{"use strict";var r3e=ht(),n3e=qr(),i3e=RZ(),o3e=qw(),a3e=MF(),qZ=dF(),s3e=Math.pow,l3e=65520,u3e=61005353927612305e-21,c3e=16777216,LF=1024,f3e=function(t){if(t!==t)return 32256;if(t===0)return(1/t===-1/0)<<15;var e=t<0;if(e&&(t=-t),t>=l3e)return e<<15|31744;if(t<u3e)return e<<15|qZ(t*c3e);var r=a3e(t)|0;if(r===-15)return e<<15|LF;var n=qZ((t*s3e(2,-r)-1)*LF);return n===LF?e<<15|r+16<<10:e<<15|r+15<<10|n},h3e=n3e(DataView.prototype.setUint16);r3e({target:"DataView",proto:!0},{setFloat16:function(e,r){i3e(this);var n=o3e(e),i=f3e(+r);return h3e(this,n,i,arguments.length>2?arguments[2]:!1)}})});var RF=J((ADt,jZ)=>{"use strict";var zZ=Jr(),d3e=Ew(),p3e=au(),BZ=zZ.ArrayBuffer,m3e=zZ.TypeError;jZ.exports=BZ&&d3e(BZ.prototype,"byteLength","get")||function(t){if(p3e(t)!=="ArrayBuffer")throw new m3e("ArrayBuffer expected");return t.byteLength}});var FF=J((kDt,UZ)=>{"use strict";var g3e=Jr(),v3e=Fw(),y3e=RF(),b3e=g3e.DataView;UZ.exports=function(t){if(!v3e||y3e(t)!==0)return!1;try{return new b3e(t),!1}catch{return!0}}});var HZ=J(()=>{"use strict";var _3e=zn(),x3e=el(),w3e=FF(),VZ=ArrayBuffer.prototype;_3e&&!("detached"in VZ)&&x3e(VZ,"detached",{configurable:!0,get:function(){return w3e(this)}})});var $Z=J((DDt,WZ)=>{"use strict";var S3e=FF(),E3e=TypeError;WZ.exports=function(t){if(S3e(t))throw new E3e("ArrayBuffer is detached");return t}});var qF=J((ODt,GZ)=>{"use strict";var T3e=Jr(),A3e=Yy();GZ.exports=function(t){if(A3e){try{return T3e.process.getBuiltinModule(t)}catch{}try{return Function('return require("'+t+'")')()}catch{}}}});var SC=J((PDt,ZZ)=>{"use strict";var k3e=Jr(),C3e=Sr(),NF=Dp(),BF=Lw(),KZ=k3e.structuredClone;ZZ.exports=!!KZ&&!C3e(function(){if(BF==="DENO"&&NF>92||BF==="NODE"&&NF>94||BF==="BROWSER"&&NF>97)return!1;var t=new ArrayBuffer(8),e=KZ(t,{transfer:[t]});return t.byteLength!==0||e.byteLength!==8})});var HF=J((MDt,JZ)=>{"use strict";var VF=Jr(),I3e=qF(),D3e=SC(),O3e=VF.structuredClone,YZ=VF.ArrayBuffer,EC=VF.MessageChannel,UF=!1,zF,XZ,TC,jF;if(D3e)UF=function(t){O3e(t,{transfer:[t]})};else if(YZ)try{EC||(zF=I3e("worker_threads"),zF&&(EC=zF.MessageChannel)),EC&&(XZ=new EC,TC=new YZ(2),jF=function(t){XZ.port1.postMessage(null,[t])},TC.byteLength===2&&(jF(TC),TC.byteLength===0&&(UF=jF)))}catch{}JZ.exports=UF});var YF=J((LDt,oY)=>{"use strict";var GF=Jr(),KF=qr(),rY=Ew(),P3e=qw(),M3e=$Z(),L3e=RF(),QZ=HF(),WF=SC(),R3e=GF.structuredClone,nY=GF.ArrayBuffer,$F=GF.DataView,F3e=Math.min,ZF=nY.prototype,iY=$F.prototype,q3e=KF(ZF.slice),eY=rY(ZF,"resizable","get"),tY=rY(ZF,"maxByteLength","get"),N3e=KF(iY.getInt8),B3e=KF(iY.setInt8);oY.exports=(WF||QZ)&&function(t,e,r){var n=L3e(t),i=e===void 0?n:P3e(e),o=!eY||!eY(t),s;if(M3e(t),WF&&(t=R3e(t,{transfer:[t]}),n===i&&(r||o)))return t;if(n>=i&&(!r||o))s=q3e(t,0,i);else{var u=r&&!o&&tY?{maxByteLength:tY(t)}:void 0;s=new nY(i,u);for(var h=new $F(t),y=new $F(s),w=F3e(i,n),T=0;T<w;T++)B3e(y,T,N3e(h,T))}return WF||QZ(t),s}});var sY=J(()=>{"use strict";var z3e=ht(),aY=YF();aY&&z3e({target:"ArrayBuffer",proto:!0},{transfer:function(){return aY(this,arguments.length?arguments[0]:void 0,!0)}})});var uY=J(()=>{"use strict";var j3e=ht(),lY=YF();lY&&j3e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return lY(this,arguments.length?arguments[0]:void 0,!1)}})});var cY=J(()=>{"use strict";var U3e=ht(),V3e=qr(),H3e=Sr(),W3e=H3e(function(){return new Date(16e11).getYear()!==120}),$3e=V3e(Date.prototype.getFullYear);U3e({target:"Date",proto:!0,forced:W3e},{getYear:function(){return $3e(this)-1900}})});var hY=J(()=>{"use strict";var G3e=ht(),K3e=qr(),fY=Date,Z3e=K3e(fY.prototype.getTime);G3e({target:"Date",stat:!0},{now:function(){return Z3e(new fY)}})});var mY=J(()=>{"use strict";var Y3e=ht(),dY=qr(),X3e=ds(),pY=Date.prototype,J3e=dY(pY.getTime),Q3e=dY(pY.setFullYear);Y3e({target:"Date",proto:!0},{setYear:function(e){J3e(this);var r=X3e(e),n=r>=0&&r<=99?r+1900:r;return Q3e(this,n)}})});var gY=J(()=>{"use strict";var eBe=ht();eBe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var jw=J((GDt,vY)=>{"use strict";var tBe=ds(),rBe=ai(),nBe=Na(),iBe=RangeError;vY.exports=function(e){var r=rBe(nBe(this)),n="",i=tBe(e);if(i<0||i===1/0)throw new iBe("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(r+=r))i&1&&(n+=r);return n}});var Uw=J((KDt,xY)=>{"use strict";var _Y=qr(),oBe=Fc(),yY=ai(),aBe=jw(),sBe=Na(),lBe=_Y(aBe),uBe=_Y("".slice),cBe=Math.ceil,bY=function(t){return function(e,r,n){var i=yY(sBe(e)),o=oBe(r),s=i.length,u=n===void 0?" ":yY(n),h,y;return o<=s||u===""?i:(h=o-s,y=lBe(u,cBe(h/u.length)),y.length>h&&(y=uBe(y,0,h)),t?i+y:y+i)}};xY.exports={start:bY(!1),end:bY(!0)}});var EY=J((ZDt,SY)=>{"use strict";var vv=qr(),wY=Sr(),eb=Uw().start,fBe=RangeError,hBe=isFinite,dBe=Math.abs,Km=Date.prototype,XF=Km.toISOString,pBe=vv(Km.getTime),mBe=vv(Km.getUTCDate),gBe=vv(Km.getUTCFullYear),vBe=vv(Km.getUTCHours),yBe=vv(Km.getUTCMilliseconds),bBe=vv(Km.getUTCMinutes),_Be=vv(Km.getUTCMonth),xBe=vv(Km.getUTCSeconds);SY.exports=wY(function(){return XF.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!wY(function(){XF.call(new Date(NaN))})?function(){if(!hBe(pBe(this)))throw new fBe("Invalid time value");var e=this,r=gBe(e),n=yBe(e),i=r<0?"-":r>9999?"+":"";return i+eb(dBe(r),i?6:4,0)+"-"+eb(_Be(e)+1,2,0)+"-"+eb(mBe(e),2,0)+"T"+eb(vBe(e),2,0)+":"+eb(bBe(e),2,0)+":"+eb(xBe(e),2,0)+"."+eb(n,3,0)+"Z"}:XF});var AY=J(()=>{"use strict";var wBe=ht(),TY=EY();wBe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==TY},{toISOString:TY})});var kY=J(()=>{"use strict";var SBe=ht(),EBe=Sr(),TBe=mo(),ABe=fw(),kBe=EBe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});SBe({target:"Date",proto:!0,arity:1,forced:kBe},{toJSON:function(e){var r=TBe(this),n=ABe(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var IY=J((eOt,CY)=>{"use strict";var CBe=qn(),IBe=FL(),DBe=TypeError;CY.exports=function(t){if(CBe(this),t==="string"||t==="default")t="string";else if(t!=="number")throw new DBe("Incorrect hint");return IBe(this,t)}});var PY=J(()=>{"use strict";var OBe=Xi(),PBe=Ba(),MBe=IY(),LBe=Ci(),DY=LBe("toPrimitive"),OY=Date.prototype;OBe(OY,DY)||PBe(OY,DY,MBe)});var FY=J(()=>{"use strict";var LY=qr(),RBe=Ba(),JF=Date.prototype,MY="Invalid Date",RY="toString",FBe=LY(JF[RY]),qBe=LY(JF.getTime);String(new Date(NaN))!==MY&&RBe(JF,RY,function(){var e=qBe(this);return e===e?FBe(this):MY})});var NY=J(()=>{"use strict";var NBe=ht(),Vw=qr(),BBe=ai(),zBe=Vw("".charAt),jBe=Vw("".charCodeAt),UBe=Vw(/./.exec),VBe=Vw(1 .toString),HBe=Vw("".toUpperCase),WBe=/[\w*+\-./@]/,qY=function(t,e){for(var r=VBe(t,16);r.length<e;)r="0"+r;return r};NBe({global:!0},{escape:function(e){for(var r=BBe(e),n="",i=r.length,o=0,s,u;o<i;)s=zBe(r,o++),UBe(WBe,s)?n+=s:(u=jBe(s,0),u<256?n+="%"+qY(u,2):n+="%u"+HBe(qY(u,4)));return n}})});var eq=J((sOt,UY)=>{"use strict";var zY=qr(),$Be=no(),GBe=ki(),KBe=Xi(),BY=jf(),ZBe=K0(),jY=Function,YBe=zY([].concat),XBe=zY([].join),QF={},JBe=function(t,e,r){if(!KBe(QF,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";QF[e]=jY("C,a","return new C("+XBe(n,",")+")")}return QF[e](t,r)};UY.exports=ZBe?jY.bind:function(e){var r=$Be(this),n=r.prototype,i=BY(arguments,1),o=function(){var u=YBe(i,BY(arguments));return this instanceof o?JBe(r,u.length,u):r.apply(e,u)};return GBe(n)&&(o.prototype=n),o}});var HY=J(()=>{"use strict";var QBe=ht(),VY=eq();QBe({target:"Function",proto:!0,forced:Function.bind!==VY},{bind:VY})});var GY=J(()=>{"use strict";var eze=Wi(),WY=ki(),tze=ts(),rze=nc(),nze=Ci(),ize=Ik(),tq=nze("hasInstance"),$Y=Function.prototype;tq in $Y||tze.f($Y,tq,{value:ize(function(t){if(!eze(this)||!WY(t))return!1;var e=this.prototype;return WY(e)?rze(e,t):t instanceof this},tq)})});var XY=J(()=>{"use strict";var oze=zn(),aze=zy().EXISTS,KY=qr(),sze=el(),ZY=Function.prototype,lze=KY(ZY.toString),YY=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,uze=KY(YY.exec),cze="name";oze&&!aze&&sze(ZY,cze,{configurable:!0,get:function(){try{return uze(YY,lze(this))[1]}catch{return""}}})});var JY=J(()=>{"use strict";var fze=ht(),rq=Jr();fze({global:!0,forced:rq.globalThis!==rq},{globalThis:rq})});var iX=J(()=>{"use strict";var hze=ht(),dze=Jr(),pze=Ph(),mze=qn(),gze=Wi(),vze=Nc(),yze=el(),bze=Mp(),_ze=Sr(),oq=Xi(),xze=Ci(),qp=u_().IteratorPrototype,wze=zn(),Sze=Mo(),nq="constructor",eX="Iterator",QY=xze("toStringTag"),tX=TypeError,iq=dze[eX],rX=Sze||!gze(iq)||iq.prototype!==qp||!_ze(function(){iq({})}),aq=function(){if(pze(this,qp),vze(this)===qp)throw new tX("Abstract class Iterator not directly constructable")},nX=function(t,e){wze?yze(qp,t,{configurable:!0,get:function(){return e},set:function(r){if(mze(this),this===qp)throw new tX("You can't redefine this property");oq(this,t)?this[t]=r:bze(this,t,r)}}):qp[t]=e};oq(qp,QY)||nX(QY,eX);(rX||!oq(qp,nq)||qp[nq]===Object)&&nX(nq,aq);aq.prototype=qp;hze({global:!0,constructor:!0,forced:rX},{Iterator:aq})});var zc=J((yOt,oX)=>{"use strict";oX.exports=function(t){return{iterator:t,next:t.next,done:!1}}});var sq=J((bOt,aX)=>{"use strict";var Eze=RangeError;aX.exports=function(t){if(t===t)return t;throw new Eze("NaN is not allowed")}});var AC=J((_Ot,sX)=>{"use strict";var Tze=ds(),Aze=RangeError;sX.exports=function(t){var e=Tze(t);if(e<0)throw new Aze("The argument can't be less than 0");return e}});var tb=J((xOt,dX)=>{"use strict";var kze=$n(),Cze=ic(),Ize=su(),Dze=Jy(),Oze=Ci(),lX=Us(),Pze=Ed(),Mze=u_().IteratorPrototype,kC=Zy(),lq=fv(),Lze=Oze("toStringTag"),uX="IteratorHelper",cX="WrapForValidIterator",Rze=lX.set,fX=function(t){var e=lX.getterFor(t?cX:uX);return Dze(Cze(Mze),{next:function(){var n=e(this);if(t)return n.nextHandler();if(n.done)return kC(void 0,!0);try{var i=n.nextHandler();return n.returnHandlerResult?i:kC(i,n.done)}catch(o){throw n.done=!0,o}},return:function(){var r=e(this),n=r.iterator;if(r.done=!0,t){var i=Pze(n,"return");return i?kze(i,n):kC(void 0,!0)}if(r.inner)try{lq(r.inner.iterator,"normal")}catch(o){return lq(n,"throw",o)}return n&&lq(n,"normal"),kC(void 0,!0)}})},Fze=fX(!0),hX=fX(!1);Ize(hX,Lze,"Iterator Helper");dX.exports=function(t,e,r){var n=function(o,s){s?(s.iterator=o.iterator,s.next=o.next):s=o,s.type=e?cX:uX,s.returnHandlerResult=!!r,s.nextHandler=t,s.counter=0,s.done=!1,Rze(this,s)};return n.prototype=e?Fze:hX,n}});var mX=J(()=>{"use strict";var qze=ht(),pX=$n(),uq=qn(),Nze=zc(),Bze=sq(),zze=AC(),jze=tb(),Uze=Mo(),Vze=jze(function(){for(var t=this.iterator,e=this.next,r,n;this.remaining;)if(this.remaining--,r=uq(pX(e,t)),n=this.done=!!r.done,n)return;if(r=uq(pX(e,t)),n=this.done=!!r.done,!n)return r.value});qze({target:"Iterator",proto:!0,real:!0,forced:Uze},{drop:function(e){uq(this);var r=zze(Bze(+e));return new Vze(Nze(this),{remaining:r})}})});var gX=J(()=>{"use strict";var Hze=ht(),Wze=wl(),$ze=no(),Gze=qn(),Kze=zc();Hze({target:"Iterator",proto:!0,real:!0},{every:function(e){Gze(this),$ze(e);var r=Kze(this),n=0;return!Wze(r,function(i,o){if(!e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var yX=J(()=>{"use strict";var Zze=ht(),Yze=$n(),Xze=no(),vX=qn(),Jze=zc(),Qze=tb(),e5e=rC(),t5e=Mo(),r5e=Qze(function(){for(var t=this.iterator,e=this.predicate,r=this.next,n,i,o;;){if(n=vX(Yze(r,t)),i=this.done=!!n.done,i)return;if(o=n.value,e5e(t,e,[o,this.counter++],!0))return o}});Zze({target:"Iterator",proto:!0,real:!0,forced:t5e},{filter:function(e){return vX(this),Xze(e),new r5e(Jze(this),{predicate:e})}})});var bX=J(()=>{"use strict";var n5e=ht(),i5e=wl(),o5e=no(),a5e=qn(),s5e=zc();n5e({target:"Iterator",proto:!0,real:!0},{find:function(e){a5e(this),o5e(e);var r=s5e(this),n=0;return i5e(r,function(i,o){if(e(i,n++))return o(i)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var cq=J((DOt,xX)=>{"use strict";var l5e=$n(),_X=qn(),u5e=zc(),c5e=Gy();xX.exports=function(t,e){(!e||typeof t!="string")&&_X(t);var r=c5e(t);return u5e(_X(r!==void 0?l5e(r,t):t))}});var EX=J(()=>{"use strict";var f5e=ht(),wX=$n(),h5e=no(),fq=qn(),d5e=zc(),p5e=cq(),m5e=tb(),SX=fv(),g5e=Mo(),v5e=m5e(function(){for(var t=this.iterator,e=this.mapper,r,n;;){if(n=this.inner)try{if(r=fq(wX(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(i){SX(t,"throw",i)}if(r=fq(wX(this.next,t)),this.done=!!r.done)return;try{this.inner=p5e(e(r.value,this.counter++),!1)}catch(i){SX(t,"throw",i)}}});f5e({target:"Iterator",proto:!0,real:!0,forced:g5e},{flatMap:function(e){return fq(this),h5e(e),new v5e(d5e(this),{mapper:e,inner:null})}})});var TX=J(()=>{"use strict";var y5e=ht(),b5e=wl(),_5e=no(),x5e=qn(),w5e=zc();y5e({target:"Iterator",proto:!0,real:!0},{forEach:function(e){x5e(this),_5e(e);var r=w5e(this),n=0;b5e(r,function(i){e(i,n++)},{IS_RECORD:!0})}})});var AX=J(()=>{"use strict";var S5e=ht(),E5e=$n(),T5e=mo(),A5e=nc(),k5e=u_().IteratorPrototype,C5e=tb(),I5e=cq(),D5e=Mo(),O5e=C5e(function(){return E5e(this.next,this.iterator)},!0);S5e({target:"Iterator",stat:!0,forced:D5e},{from:function(e){var r=I5e(typeof e=="string"?T5e(e):e,!0);return A5e(k5e,r.iterator)?r.iterator:new O5e(r)}})});var IX=J((qOt,CX)=>{"use strict";var P5e=$n(),M5e=no(),kX=qn(),L5e=zc(),R5e=tb(),F5e=rC(),q5e=R5e(function(){var t=this.iterator,e=kX(P5e(this.next,t)),r=this.done=!!e.done;if(!r)return F5e(t,this.mapper,[e.value,this.counter++],!0)});CX.exports=function(e){return kX(this),M5e(e),new q5e(L5e(this),{mapper:e})}});var DX=J(()=>{"use strict";var N5e=ht(),B5e=IX(),z5e=Mo();N5e({target:"Iterator",proto:!0,real:!0,forced:z5e},{map:B5e})});var OX=J(()=>{"use strict";var j5e=ht(),U5e=wl(),V5e=no(),H5e=qn(),W5e=zc(),$5e=TypeError;j5e({target:"Iterator",proto:!0,real:!0},{reduce:function(e){H5e(this),V5e(e);var r=W5e(this),n=arguments.length<2,i=n?void 0:arguments[1],o=0;if(U5e(r,function(s){n?(n=!1,i=s):i=e(i,s,o),o++},{IS_RECORD:!0}),n)throw new $5e("Reduce of empty iterator with no initial value");return i}})});var PX=J(()=>{"use strict";var G5e=ht(),K5e=wl(),Z5e=no(),Y5e=qn(),X5e=zc();G5e({target:"Iterator",proto:!0,real:!0},{some:function(e){Y5e(this),Z5e(e);var r=X5e(this),n=0;return K5e(r,function(i,o){if(e(i,n++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var LX=J(()=>{"use strict";var J5e=ht(),Q5e=$n(),MX=qn(),e4e=zc(),t4e=sq(),r4e=AC(),n4e=tb(),i4e=fv(),o4e=Mo(),a4e=n4e(function(){var t=this.iterator;if(!this.remaining--)return this.done=!0,i4e(t,"normal",void 0);var e=MX(Q5e(this.next,t)),r=this.done=!!e.done;if(!r)return e.value});J5e({target:"Iterator",proto:!0,real:!0,forced:o4e},{take:function(e){MX(this);var r=r4e(t4e(+e));return new a4e(e4e(this),{remaining:r})}})});var RX=J(()=>{"use strict";var s4e=ht(),l4e=qn(),u4e=wl(),c4e=zc(),f4e=[].push;s4e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var e=[];return u4e(c4e(l4e(this)),f4e,{that:e,IS_RECORD:!0}),e}})});var FX=J(()=>{"use strict";var h4e=Jr(),d4e=ac();d4e(h4e.JSON,"JSON",!0)});var CC=J((YOt,qX)=>{"use strict";var p4e=Sr();qX.exports=p4e(function(){if(typeof ArrayBuffer=="function"){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})});var DC=J((XOt,BX)=>{"use strict";var m4e=Sr(),g4e=ki(),v4e=au(),NX=CC(),IC=Object.isExtensible,y4e=m4e(function(){IC(1)});BX.exports=y4e||NX?function(e){return!g4e(e)||NX&&v4e(e)==="ArrayBuffer"?!1:IC?IC(e):!0}:IC});var rb=J((JOt,zX)=>{"use strict";var b4e=Sr();zX.exports=!b4e(function(){return Object.isExtensible(Object.preventExtensions({}))})});var yv=J((QOt,VX)=>{"use strict";var _4e=ht(),x4e=qr(),w4e=Y0(),S4e=ki(),hq=Xi(),E4e=ts().f,jX=av(),T4e=Nk(),dq=DC(),A4e=By(),k4e=rb(),UX=!1,Zm=A4e("meta"),C4e=0,pq=function(t){E4e(t,Zm,{value:{objectID:"O"+C4e++,weakData:{}}})},I4e=function(t,e){if(!S4e(t))return typeof t=="symbol"?t:(typeof t=="string"?"S":"P")+t;if(!hq(t,Zm)){if(!dq(t))return"F";if(!e)return"E";pq(t)}return t[Zm].objectID},D4e=function(t,e){if(!hq(t,Zm)){if(!dq(t))return!0;if(!e)return!1;pq(t)}return t[Zm].weakData},O4e=function(t){return k4e&&UX&&dq(t)&&!hq(t,Zm)&&pq(t),t},P4e=function(){M4e.enable=function(){},UX=!0;var t=jX.f,e=x4e([].splice),r={};r[Zm]=1,t(r).length&&(jX.f=function(n){for(var i=t(n),o=0,s=i.length;o<s;o++)if(i[o]===Zm){e(i,o,1);break}return i},_4e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:T4e.f}))},M4e=VX.exports={enable:P4e,fastKey:I4e,getWeakData:D4e,onFreeze:O4e};w4e[Zm]=!0});var Hw=J((ePt,WX)=>{"use strict";var L4e=ht(),R4e=Jr(),F4e=qr(),HX=Q0(),q4e=Ba(),N4e=yv(),B4e=wl(),z4e=Ph(),j4e=Wi(),U4e=rc(),mq=ki(),gq=Sr(),V4e=Cw(),H4e=ac(),W4e=cv();WX.exports=function(t,e,r){var n=t.indexOf("Map")!==-1,i=t.indexOf("Weak")!==-1,o=n?"set":"add",s=R4e[t],u=s&&s.prototype,h=s,y={},w=function(G){var q=F4e(u[G]);q4e(u,G,G==="add"?function(p){return q(this,p===0?0:p),this}:G==="delete"?function(V){return i&&!mq(V)?!1:q(this,V===0?0:V)}:G==="get"?function(p){return i&&!mq(p)?void 0:q(this,p===0?0:p)}:G==="has"?function(p){return i&&!mq(p)?!1:q(this,p===0?0:p)}:function(p,K){return q(this,p===0?0:p,K),this})},T=HX(t,!j4e(s)||!(i||u.forEach&&!gq(function(){new s().entries().next()})));if(T)h=r.getConstructor(e,t,n,o),N4e.enable();else if(HX(t,!0)){var I=new h,P=I[o](i?{}:-0,1)!==I,L=gq(function(){I.has(1)}),R=V4e(function(G){new s(G)}),W=!i&&gq(function(){for(var G=new s,q=5;q--;)G[o](q,q);return!G.has(-0)});R||(h=e(function(G,q){z4e(G,u);var V=W4e(new s,G,h);return U4e(q)||B4e(q,V[o],{that:V,AS_ENTRIES:n}),V}),h.prototype=u,u.constructor=h),(L||W)&&(w("delete"),w("has"),n&&w("get")),(W||P)&&w(o),i&&u.clear&&delete u.clear}return y[t]=h,L4e({global:!0,constructor:!0,forced:h!==s},y),H4e(h,t),i||r.setStrong(h,t,n),h}});var yq=J((tPt,XX)=>{"use strict";var $X=ic(),$4e=el(),GX=Jy(),G4e=Dh(),K4e=Ph(),Z4e=rc(),Y4e=wl(),X4e=aC(),OC=Zy(),J4e=Xy(),Ww=zn(),KX=yv().fastKey,YX=Us(),ZX=YX.set,vq=YX.getterFor;XX.exports={getConstructor:function(t,e,r,n){var i=t(function(y,w){K4e(y,o),ZX(y,{type:e,index:$X(null),first:null,last:null,size:0}),Ww||(y.size=0),Z4e(w)||Y4e(w,y[n],{that:y,AS_ENTRIES:r})}),o=i.prototype,s=vq(e),u=function(y,w,T){var I=s(y),P=h(y,w),L,R;return P?P.value=T:(I.last=P={index:R=KX(w,!0),key:w,value:T,previous:L=I.last,next:null,removed:!1},I.first||(I.first=P),L&&(L.next=P),Ww?I.size++:y.size++,R!=="F"&&(I.index[R]=P)),y},h=function(y,w){var T=s(y),I=KX(w),P;if(I!=="F")return T.index[I];for(P=T.first;P;P=P.next)if(P.key===w)return P};return GX(o,{clear:function(){for(var w=this,T=s(w),I=T.first;I;)I.removed=!0,I.previous&&(I.previous=I.previous.next=null),I=I.next;T.first=T.last=null,T.index=$X(null),Ww?T.size=0:w.size=0},delete:function(y){var w=this,T=s(w),I=h(w,y);if(I){var P=I.next,L=I.previous;delete T.index[I.index],I.removed=!0,L&&(L.next=P),P&&(P.previous=L),T.first===I&&(T.first=P),T.last===I&&(T.last=L),Ww?T.size--:w.size--}return!!I},forEach:function(w){for(var T=s(this),I=G4e(w,arguments.length>1?arguments[1]:void 0),P;P=P?P.next:T.first;)for(I(P.value,P.key,this);P&&P.removed;)P=P.previous},has:function(w){return!!h(this,w)}}),GX(o,r?{get:function(w){var T=h(this,w);return T&&T.value},set:function(w,T){return u(this,w===0?0:w,T)}}:{add:function(w){return u(this,w=w===0?0:w,w)}}),Ww&&$4e(o,"size",{configurable:!0,get:function(){return s(this).size}}),i},setStrong:function(t,e,r){var n=e+" Iterator",i=vq(e),o=vq(n);X4e(t,e,function(s,u){ZX(this,{type:n,target:s,state:i(s),kind:u,last:null})},function(){for(var s=o(this),u=s.kind,h=s.last;h&&h.removed;)h=h.previous;return!s.target||!(s.last=h=h?h.next:s.state.first)?(s.target=null,OC(void 0,!0)):OC(u==="keys"?h.key:u==="values"?h.value:[h.key,h.value],!1)},r?"entries":"values",!r,!0),J4e(e)}}});var JX=J(()=>{"use strict";var Q4e=Hw(),eje=yq();Q4e("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},eje)});var QX=J(()=>{"use strict";JX()});var bq=J((aPt,eJ)=>{"use strict";var PC=qr(),$w=Map.prototype;eJ.exports={Map,set:PC($w.set),get:PC($w.get),has:PC($w.has),remove:PC($w.delete),proto:$w}});var nJ=J(()=>{"use strict";var tje=ht(),rje=qr(),nje=no(),ije=Na(),oje=wl(),MC=bq(),tJ=Mo(),aje=Sr(),rJ=MC.Map,sje=MC.has,lje=MC.get,uje=MC.set,cje=rje([].push),fje=tJ||aje(function(){return rJ.groupBy("ab",function(t){return t}).get("a").length!==1});tje({target:"Map",stat:!0,forced:tJ||fje},{groupBy:function(e,r){ije(e),nje(r);var n=new rJ,i=0;return oje(e,function(o){var s=r(o,i++);sje(n,s)?cje(lje(n,s),o):uje(n,s,[o])}),n}})});var _q=J((uPt,iJ)=>{"use strict";var hje=Math.log;iJ.exports=Math.log1p||function(e){var r=+e;return r>-1e-8&&r<1e-8?r-r*r/2:hje(1+r)}});var aJ=J(()=>{"use strict";var dje=ht(),pje=_q(),xq=Math.acosh,mje=Math.log,oJ=Math.sqrt,gje=Math.LN2,vje=!xq||Math.floor(xq(Number.MAX_VALUE))!==710||xq(1/0)!==1/0;dje({target:"Math",stat:!0,forced:vje},{acosh:function(e){var r=+e;return r<1?NaN:r>9490626562425156e-8?mje(r)+gje:pje(r-1+oJ(r-1)*oJ(r+1))}})});var uJ=J(()=>{"use strict";var yje=ht(),sJ=Math.asinh,bje=Math.log,_je=Math.sqrt;function lJ(t){var e=+t;return!isFinite(e)||e===0?e:e<0?-lJ(-e):bje(e+_je(e*e+1))}var xje=!(sJ&&1/sJ(0)>0);yje({target:"Math",stat:!0,forced:xje},{asinh:lJ})});var fJ=J(()=>{"use strict";var wje=ht(),cJ=Math.atanh,Sje=Math.log,Eje=!(cJ&&1/cJ(-0)<0);wje({target:"Math",stat:!0,forced:Eje},{atanh:function(e){var r=+e;return r===0?r:Sje((1+r)/(1-r))/2}})});var hJ=J(()=>{"use strict";var Tje=ht(),Aje=hC(),kje=Math.abs,Cje=Math.pow;Tje({target:"Math",stat:!0},{cbrt:function(e){var r=+e;return Aje(r)*Cje(kje(r),1/3)}})});var dJ=J(()=>{"use strict";var Ije=ht(),Dje=Math.floor,Oje=Math.log,Pje=Math.LOG2E;Ije({target:"Math",stat:!0},{clz32:function(e){var r=e>>>0;return r?31-Dje(Oje(r+.5)*Pje):32}})});var Kw=J((_Pt,pJ)=>{"use strict";var Gw=Math.expm1,Mje=Math.exp;pJ.exports=!Gw||Gw(10)>22025.465794806718||Gw(10)<22025.465794806718||Gw(-2e-17)!==-2e-17?function(e){var r=+e;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:Mje(r)-1}:Gw});var gJ=J(()=>{"use strict";var Lje=ht(),Rje=Kw(),mJ=Math.cosh,Fje=Math.abs,wq=Math.E,qje=!mJ||mJ(710)===1/0;Lje({target:"Math",stat:!0,forced:qje},{cosh:function(e){var r=Rje(Fje(e)-1)+1;return(r+1/(r*wq*wq))*(wq/2)}})});var yJ=J(()=>{"use strict";var Nje=ht(),vJ=Kw();Nje({target:"Math",stat:!0,forced:vJ!==Math.expm1},{expm1:vJ})});var bJ=J(()=>{"use strict";var Bje=ht(),zje=mF();Bje({target:"Math",stat:!0},{fround:zje})});var _J=J(()=>{"use strict";var jje=ht(),Uje=pF(),Vje=.0009765625,Hje=65504,Wje=6103515625e-14;jje({target:"Math",stat:!0},{f16round:function(e){return Uje(e,Vje,Hje,Wje)}})});var wJ=J(()=>{"use strict";var $je=ht(),xJ=Math.hypot,Gje=Math.abs,Kje=Math.sqrt,Zje=!!xJ&&xJ(1/0,NaN)!==1/0;$je({target:"Math",stat:!0,arity:2,forced:Zje},{hypot:function(e,r){for(var n=0,i=0,o=arguments.length,s=0,u,h;i<o;)u=Gje(arguments[i++]),s<u?(h=s/u,n=n*h*h+1,s=u):u>0?(h=u/s,n+=h*h):n+=u;return s===1/0?1/0:s*Kje(n)}})});var EJ=J(()=>{"use strict";var Yje=ht(),Xje=Sr(),SJ=Math.imul,Jje=Xje(function(){return SJ(4294967295,5)!==-5||SJ.length!==2});Yje({target:"Math",stat:!0,forced:Jje},{imul:function(e,r){var n=65535,i=+e,o=+r,s=n&i,u=n&o;return 0|s*u+((n&i>>>16)*u+s*(n&o>>>16)<<16>>>0)}})});var Sq=J((MPt,TJ)=>{"use strict";var Qje=Math.log,e6e=Math.LOG10E;TJ.exports=Math.log10||function(e){return Qje(e)*e6e}});var AJ=J(()=>{"use strict";var t6e=ht(),r6e=Sq();t6e({target:"Math",stat:!0},{log10:r6e})});var kJ=J(()=>{"use strict";var n6e=ht(),i6e=_q();n6e({target:"Math",stat:!0},{log1p:i6e})});var CJ=J(()=>{"use strict";var o6e=ht(),a6e=MF();o6e({target:"Math",stat:!0},{log2:a6e})});var IJ=J(()=>{"use strict";var s6e=ht(),l6e=hC();s6e({target:"Math",stat:!0},{sign:l6e})});var PJ=J(()=>{"use strict";var u6e=ht(),c6e=Sr(),DJ=Kw(),f6e=Math.abs,OJ=Math.exp,h6e=Math.E,d6e=c6e(function(){return Math.sinh(-2e-17)!==-2e-17});u6e({target:"Math",stat:!0,forced:d6e},{sinh:function(e){var r=+e;return f6e(r)<1?(DJ(r)-DJ(-r))/2:(OJ(r-1)-OJ(-r-1))*(h6e/2)}})});var RJ=J(()=>{"use strict";var p6e=ht(),MJ=Kw(),LJ=Math.exp;p6e({target:"Math",stat:!0},{tanh:function(e){var r=+e,n=MJ(r),i=MJ(-r);return n===1/0?1:i===1/0?-1:(n-i)/(LJ(r)+LJ(-r))}})});var FJ=J(()=>{"use strict";var m6e=ac();m6e(Math,"Math",!0)});var qJ=J(()=>{"use strict";var g6e=ht(),v6e=eR();g6e({target:"Math",stat:!0},{trunc:v6e})});var Zw=J((YPt,NJ)=>{"use strict";var y6e=qr();NJ.exports=y6e(1 .valueOf)});var m_=J((XPt,BJ)=>{"use strict";BJ.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var nb=J((JPt,jJ)=>{"use strict";var b6e=qr(),_6e=Na(),x6e=ai(),Tq=m_(),zJ=b6e("".replace),w6e=RegExp("^["+Tq+"]+"),S6e=RegExp("(^|[^"+Tq+"])["+Tq+"]+$"),Eq=function(t){return function(e){var r=x6e(_6e(e));return t&1&&(r=zJ(r,w6e,"")),t&2&&(r=zJ(r,S6e,"$1")),r}};jJ.exports={start:Eq(1),end:Eq(2),trim:Eq(3)}});var KJ=J(()=>{"use strict";var E6e=ht(),Aq=Mo(),T6e=zn(),HJ=Jr(),kq=Bk(),WJ=qr(),A6e=Q0(),UJ=Xi(),k6e=cv(),C6e=nc(),I6e=iv(),$J=fw(),D6e=Sr(),O6e=av().f,P6e=Ru().f,M6e=ts().f,L6e=Zw(),R6e=nb().trim,Yw="Number",g_=HJ[Yw],VJ=kq[Yw],Cq=g_.prototype,F6e=HJ.TypeError,q6e=WJ("".slice),LC=WJ("".charCodeAt),N6e=function(t){var e=$J(t,"number");return typeof e=="bigint"?e:B6e(e)},B6e=function(t){var e=$J(t,"number"),r,n,i,o,s,u,h,y;if(I6e(e))throw new F6e("Cannot convert a Symbol value to a number");if(typeof e=="string"&&e.length>2){if(e=R6e(e),r=LC(e,0),r===43||r===45){if(n=LC(e,2),n===88||n===120)return NaN}else if(r===48){switch(LC(e,1)){case 66:case 98:i=2,o=49;break;case 79:case 111:i=8,o=55;break;default:return+e}for(s=q6e(e,2),u=s.length,h=0;h<u;h++)if(y=LC(s,h),y<48||y>o)return NaN;return parseInt(s,i)}}return+e},Iq=A6e(Yw,!g_(" 0o1")||!g_("0b1")||g_("+0x1")),z6e=function(t){return C6e(Cq,t)&&D6e(function(){L6e(t)})},RC=function(e){var r=arguments.length<1?0:g_(N6e(e));return z6e(this)?k6e(Object(r),this,RC):r};RC.prototype=Cq;Iq&&!Aq&&(Cq.constructor=RC);E6e({global:!0,constructor:!0,wrap:!0,forced:Iq},{Number:RC});var GJ=function(t,e){for(var r=T6e?O6e(e):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,i;r.length>n;n++)UJ(e,i=r[n])&&!UJ(t,i)&&M6e(t,i,P6e(e,i))};Aq&&VJ&&GJ(kq[Yw],VJ);(Iq||Aq)&&GJ(kq[Yw],g_)});var ZJ=J(()=>{"use strict";var j6e=ht();j6e({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var XJ=J((nMt,YJ)=>{"use strict";var U6e=Jr(),V6e=U6e.isFinite;YJ.exports=Number.isFinite||function(e){return typeof e=="number"&&V6e(e)}});var JJ=J(()=>{"use strict";var H6e=ht(),W6e=XJ();H6e({target:"Number",stat:!0},{isFinite:W6e})});var FC=J((aMt,QJ)=>{"use strict";var $6e=ki(),G6e=Math.floor;QJ.exports=Number.isInteger||function(e){return!$6e(e)&&isFinite(e)&&G6e(e)===e}});var eQ=J(()=>{"use strict";var K6e=ht(),Z6e=FC();K6e({target:"Number",stat:!0},{isInteger:Z6e})});var tQ=J(()=>{"use strict";var Y6e=ht();Y6e({target:"Number",stat:!0},{isNaN:function(e){return e!==e}})});var rQ=J(()=>{"use strict";var X6e=ht(),J6e=FC(),Q6e=Math.abs;X6e({target:"Number",stat:!0},{isSafeInteger:function(e){return J6e(e)&&Q6e(e)<=9007199254740991}})});var nQ=J(()=>{"use strict";var eUe=ht();eUe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var iQ=J(()=>{"use strict";var tUe=ht();tUe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var Dq=J((vMt,lQ)=>{"use strict";var sQ=Jr(),rUe=Sr(),nUe=qr(),iUe=ai(),oUe=nb().trim,aUe=m_(),sUe=nUe("".charAt),qC=sQ.parseFloat,oQ=sQ.Symbol,aQ=oQ&&oQ.iterator,lUe=1/qC(aUe+"-0")!==-1/0||aQ&&!rUe(function(){qC(Object(aQ))});lQ.exports=lUe?function(e){var r=oUe(iUe(e)),n=qC(r);return n===0&&sUe(r,0)==="-"?-0:n}:qC});var cQ=J(()=>{"use strict";var uUe=ht(),uQ=Dq();uUe({target:"Number",stat:!0,forced:Number.parseFloat!==uQ},{parseFloat:uQ})});var Oq=J((_Mt,gQ)=>{"use strict";var pQ=Jr(),cUe=Sr(),fUe=qr(),hUe=ai(),dUe=nb().trim,fQ=m_(),Xw=pQ.parseInt,hQ=pQ.Symbol,dQ=hQ&&hQ.iterator,mQ=/^[+-]?0x/i,pUe=fUe(mQ.exec),mUe=Xw(fQ+"08")!==8||Xw(fQ+"0x16")!==22||dQ&&!cUe(function(){Xw(Object(dQ))});gQ.exports=mUe?function(e,r){var n=dUe(hUe(e));return Xw(n,r>>>0||(pUe(mQ,n)?16:10))}:Xw});var yQ=J(()=>{"use strict";var gUe=ht(),vQ=Oq();gUe({target:"Number",stat:!0,forced:Number.parseInt!==vQ},{parseInt:vQ})});var SQ=J(()=>{"use strict";var vUe=ht(),Mq=qr(),yUe=ds(),bUe=Zw(),_Ue=jw(),xUe=Sq(),Pq=Sr(),wUe=RangeError,bQ=String,SUe=isFinite,EUe=Math.abs,TUe=Math.floor,_Q=Math.pow,AUe=Math.round,Np=Mq(1 .toExponential),kUe=Mq(_Ue),xQ=Mq("".slice),wQ=Np(-69e-12,4)==="-6.9000e-11"&&Np(1.255,2)==="1.25e+0"&&Np(12345,3)==="1.235e+4"&&Np(25,0)==="3e+1",CUe=function(){return Pq(function(){Np(1,1/0)})&&Pq(function(){Np(1,-1/0)})},IUe=function(){return!Pq(function(){Np(1/0,1/0),Np(NaN,1/0)})},DUe=!wQ||!CUe()||!IUe();vUe({target:"Number",proto:!0,forced:DUe},{toExponential:function(e){var r=bUe(this);if(e===void 0)return Np(r);var n=yUe(e);if(!SUe(r))return String(r);if(n<0||n>20)throw new wUe("Incorrect fraction digits");if(wQ)return Np(r,n);var i="",o,s,u,h;if(r<0&&(i="-",r=-r),r===0)s=0,o=kUe("0",n+1);else{var y=xUe(r);s=TUe(y);var w=_Q(10,s-n),T=AUe(r/w);2*r>=(2*T+1)*w&&(T+=1),T>=_Q(10,n+1)&&(T/=10,s+=1),o=bQ(T)}return n!==0&&(o=xQ(o,0,1)+"."+xQ(o,1)),s===0?(u="+",h="0"):(u=s>0?"+":"-",h=bQ(EUe(s))),o+="e"+u+h,i+o}})});var IQ=J(()=>{"use strict";var OUe=ht(),Fq=qr(),PUe=ds(),MUe=Zw(),LUe=jw(),EQ=Sr(),RUe=RangeError,kQ=String,CQ=Math.floor,Rq=Fq(LUe),TQ=Fq("".slice),Jw=Fq(1 .toFixed),y_=function(t,e,r){return e===0?r:e%2===1?y_(t,e-1,r*t):y_(t*t,e/2,r)},FUe=function(t){for(var e=0,r=t;r>=4096;)e+=12,r/=4096;for(;r>=2;)e+=1,r/=2;return e},v_=function(t,e,r){for(var n=-1,i=r;++n<6;)i+=e*t[n],t[n]=i%1e7,i=CQ(i/1e7)},Lq=function(t,e){for(var r=6,n=0;--r>=0;)n+=t[r],t[r]=CQ(n/e),n=n%e*1e7},AQ=function(t){for(var e=6,r="";--e>=0;)if(r!==""||e===0||t[e]!==0){var n=kQ(t[e]);r=r===""?n:r+Rq("0",7-n.length)+n}return r},qUe=EQ(function(){return Jw(8e-5,3)!=="0.000"||Jw(.9,0)!=="1"||Jw(1.255,2)!=="1.25"||Jw(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!EQ(function(){Jw({})});OUe({target:"Number",proto:!0,forced:qUe},{toFixed:function(e){var r=MUe(this),n=PUe(e),i=[0,0,0,0,0,0],o="",s="0",u,h,y,w;if(n<0||n>20)throw new RUe("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return kQ(r);if(r<0&&(o="-",r=-r),r>1e-21)if(u=FUe(r*y_(2,69,1))-69,h=u<0?r*y_(2,-u,1):r/y_(2,u,1),h*=4503599627370496,u=52-u,u>0){for(v_(i,0,h),y=n;y>=7;)v_(i,1e7,0),y-=7;for(v_(i,y_(10,y,1),0),y=u-1;y>=23;)Lq(i,1<<23),y-=23;Lq(i,1<<y),v_(i,1,1),Lq(i,2),s=AQ(i)}else v_(i,0,h),v_(i,1<<-u,0),s=AQ(i)+Rq("0",n);return n>0?(w=s.length,s=o+(w<=n?"0."+Rq("0",n-w)+s:TQ(s,0,w-n)+"."+TQ(s,w-n))):s=o+s,s}})});var PQ=J(()=>{"use strict";var NUe=ht(),BUe=qr(),DQ=Sr(),OQ=Zw(),NC=BUe(1 .toPrecision),zUe=DQ(function(){return NC(1,void 0)!=="1"})||!DQ(function(){NC({})});NUe({target:"Number",proto:!0,forced:zUe},{toPrecision:function(e){return e===void 0?NC(OQ(this)):NC(OQ(this),e)}})});var Nq=J((IMt,RQ)=>{"use strict";var MQ=zn(),jUe=qr(),UUe=$n(),VUe=Sr(),qq=e_(),HUe=mw(),WUe=cw(),$Ue=mo(),GUe=Fy(),b_=Object.assign,LQ=Object.defineProperty,KUe=jUe([].concat);RQ.exports=!b_||VUe(function(){if(MQ&&b_({b:1},b_(LQ({},"a",{enumerable:!0,get:function(){LQ(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var t={},e={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(i){e[i]=i}),b_({},t)[r]!==7||qq(b_({},e)).join("")!==n})?function(e,r){for(var n=$Ue(e),i=arguments.length,o=1,s=HUe.f,u=WUe.f;i>o;)for(var h=GUe(arguments[o++]),y=s?KUe(qq(h),s(h)):qq(h),w=y.length,T=0,I;w>T;)I=y[T++],(!MQ||UUe(u,h,I))&&(n[I]=h[I]);return n}:b_});var qQ=J(()=>{"use strict";var ZUe=ht(),FQ=Nq();ZUe({target:"Object",stat:!0,arity:2,forced:Object.assign!==FQ},{assign:FQ})});var NQ=J(()=>{"use strict";var YUe=ht(),XUe=zn(),JUe=ic();YUe({target:"Object",stat:!0,sham:!XUe},{create:JUe})});var Qw=J((LMt,zQ)=>{"use strict";var QUe=Mo(),eVe=Jr(),tVe=Sr(),BQ=fC();zQ.exports=QUe||!tVe(function(){if(!(BQ&&BQ<535)){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete eVe[t]}})});var jQ=J(()=>{"use strict";var rVe=ht(),nVe=zn(),iVe=Qw(),oVe=no(),aVe=mo(),sVe=ts();nVe&&rVe({target:"Object",proto:!0,forced:iVe},{__defineGetter__:function(e,r){sVe.f(aVe(this),e,{get:oVe(r),enumerable:!0,configurable:!0})}})});var VQ=J(()=>{"use strict";var lVe=ht(),uVe=zn(),UQ=Rk().f;lVe({target:"Object",stat:!0,forced:Object.defineProperties!==UQ,sham:!uVe},{defineProperties:UQ})});var WQ=J(()=>{"use strict";var cVe=ht(),fVe=zn(),HQ=ts().f;cVe({target:"Object",stat:!0,forced:Object.defineProperty!==HQ,sham:!fVe},{defineProperty:HQ})});var $Q=J(()=>{"use strict";var hVe=ht(),dVe=zn(),pVe=Qw(),mVe=no(),gVe=mo(),vVe=ts();dVe&&hVe({target:"Object",proto:!0,forced:pVe},{__defineSetter__:function(e,r){vVe.f(gVe(this),e,{set:mVe(r),enumerable:!0,configurable:!0})}})});var Bq=J((VMt,XQ)=>{"use strict";var KQ=zn(),yVe=Sr(),ZQ=qr(),bVe=Nc(),_Ve=e_(),xVe=xl(),wVe=cw().f,YQ=ZQ(wVe),SVe=ZQ([].push),EVe=KQ&&yVe(function(){var t=Object.create(null);return t[2]=2,!YQ(t,2)}),GQ=function(t){return function(e){for(var r=xVe(e),n=_Ve(r),i=EVe&&bVe(r)===null,o=n.length,s=0,u=[],h;o>s;)h=n[s++],(!KQ||(i?h in r:YQ(r,h)))&&SVe(u,t?[h,r[h]]:r[h]);return u}};XQ.exports={entries:GQ(!0),values:GQ(!1)}});var JQ=J(()=>{"use strict";var TVe=ht(),AVe=Bq().entries;TVe({target:"Object",stat:!0},{entries:function(e){return AVe(e)}})});var QQ=J(()=>{"use strict";var kVe=ht(),CVe=rb(),IVe=Sr(),DVe=ki(),OVe=yv().onFreeze,zq=Object.freeze,PVe=IVe(function(){zq(1)});kVe({target:"Object",stat:!0,forced:PVe,sham:!CVe},{freeze:function(e){return zq&&DVe(e)?zq(OVe(e)):e}})});var eee=J(()=>{"use strict";var MVe=ht(),LVe=wl(),RVe=Mp();MVe({target:"Object",stat:!0},{fromEntries:function(e){var r={};return LVe(e,function(n,i){RVe(r,n,i)},{AS_ENTRIES:!0}),r}})});var nee=J(()=>{"use strict";var FVe=ht(),qVe=Sr(),NVe=xl(),tee=Ru().f,ree=zn(),BVe=!ree||qVe(function(){tee(1)});FVe({target:"Object",stat:!0,forced:BVe,sham:!ree},{getOwnPropertyDescriptor:function(e,r){return tee(NVe(e),r)}})});var iee=J(()=>{"use strict";var zVe=ht(),jVe=zn(),UVe=Ok(),VVe=xl(),HVe=Ru(),WVe=Mp();zVe({target:"Object",stat:!0,sham:!jVe},{getOwnPropertyDescriptors:function(e){for(var r=VVe(e),n=HVe.f,i=UVe(r),o={},s=0,u,h;i.length>s;)h=n(r,u=i[s++]),h!==void 0&&WVe(o,u,h);return o}})});var oee=J(()=>{"use strict";var $Ve=ht(),GVe=Sr(),KVe=Nk().f,ZVe=GVe(function(){return!Object.getOwnPropertyNames(1)});$Ve({target:"Object",stat:!0,forced:ZVe},{getOwnPropertyNames:KVe})});var see=J(()=>{"use strict";var YVe=ht(),XVe=Sr(),JVe=mo(),aee=Nc(),QVe=Yk(),e8e=XVe(function(){aee(1)});YVe({target:"Object",stat:!0,forced:e8e,sham:!QVe},{getPrototypeOf:function(e){return aee(JVe(e))}})});var uee=J(()=>{"use strict";var t8e=ht(),r8e=Uo(),n8e=qr(),i8e=no(),o8e=Na(),a8e=zm(),s8e=wl(),l8e=Sr(),lee=Object.groupBy,u8e=r8e("Object","create"),c8e=n8e([].push),f8e=!lee||l8e(function(){return lee("ab",function(t){return t}).a.length!==1});t8e({target:"Object",stat:!0,forced:f8e},{groupBy:function(e,r){o8e(e),i8e(r);var n=u8e(null),i=0;return s8e(e,function(o){var s=a8e(r(o,i++));s in n?c8e(n[s],o):n[s]=[o]}),n}})});var cee=J(()=>{"use strict";var h8e=ht(),d8e=Xi();h8e({target:"Object",stat:!0},{hasOwn:d8e})});var jq=J((lLt,fee)=>{"use strict";fee.exports=Object.is||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}});var hee=J(()=>{"use strict";var p8e=ht(),m8e=jq();p8e({target:"Object",stat:!0},{is:m8e})});var pee=J(()=>{"use strict";var g8e=ht(),dee=DC();g8e({target:"Object",stat:!0,forced:Object.isExtensible!==dee},{isExtensible:dee})});var gee=J(()=>{"use strict";var v8e=ht(),y8e=Sr(),b8e=ki(),_8e=au(),mee=CC(),Uq=Object.isFrozen,x8e=mee||y8e(function(){Uq(1)});v8e({target:"Object",stat:!0,forced:x8e},{isFrozen:function(e){return!b8e(e)||mee&&_8e(e)==="ArrayBuffer"?!0:Uq?Uq(e):!1}})});var yee=J(()=>{"use strict";var w8e=ht(),S8e=Sr(),E8e=ki(),T8e=au(),vee=CC(),Vq=Object.isSealed,A8e=vee||S8e(function(){Vq(1)});w8e({target:"Object",stat:!0,forced:A8e},{isSealed:function(e){return!E8e(e)||vee&&T8e(e)==="ArrayBuffer"?!0:Vq?Vq(e):!1}})});var _ee=J(()=>{"use strict";var k8e=ht(),C8e=mo(),bee=e_(),I8e=Sr(),D8e=I8e(function(){bee(1)});k8e({target:"Object",stat:!0,forced:D8e},{keys:function(e){return bee(C8e(e))}})});var xee=J(()=>{"use strict";var O8e=ht(),P8e=zn(),M8e=Qw(),L8e=mo(),R8e=zm(),F8e=Nc(),q8e=Ru().f;P8e&&O8e({target:"Object",proto:!0,forced:M8e},{__lookupGetter__:function(e){var r=L8e(this),n=R8e(e),i;do if(i=q8e(r,n))return i.get;while(r=F8e(r))}})});var wee=J(()=>{"use strict";var N8e=ht(),B8e=zn(),z8e=Qw(),j8e=mo(),U8e=zm(),V8e=Nc(),H8e=Ru().f;B8e&&N8e({target:"Object",proto:!0,forced:z8e},{__lookupSetter__:function(e){var r=j8e(this),n=U8e(e),i;do if(i=H8e(r,n))return i.set;while(r=V8e(r))}})});var See=J(()=>{"use strict";var W8e=ht(),$8e=ki(),G8e=yv().onFreeze,K8e=rb(),Z8e=Sr(),Hq=Object.preventExtensions,Y8e=Z8e(function(){Hq(1)});W8e({target:"Object",stat:!0,forced:Y8e,sham:!K8e},{preventExtensions:function(e){return Hq&&$8e(e)?Hq(G8e(e)):e}})});var Cee=J(()=>{"use strict";var X8e=zn(),J8e=el(),Q8e=ki(),e9e=AR(),t9e=mo(),r9e=Na(),Eee=Object.getPrototypeOf,Tee=Object.setPrototypeOf,Aee=Object.prototype,kee="__proto__";if(X8e&&Eee&&Tee&&!(kee in Aee))try{J8e(Aee,kee,{configurable:!0,get:function(){return Eee(t9e(this))},set:function(e){var r=r9e(this);e9e(e)&&Q8e(r)&&Tee(r,e)}})}catch{}});var Iee=J(()=>{"use strict";var n9e=ht(),i9e=ki(),o9e=yv().onFreeze,a9e=rb(),s9e=Sr(),Wq=Object.seal,l9e=s9e(function(){Wq(1)});n9e({target:"Object",stat:!0,forced:l9e,sham:!a9e},{seal:function(e){return Wq&&i9e(e)?Wq(o9e(e)):e}})});var Dee=J(()=>{"use strict";var u9e=ht(),c9e=Ad();u9e({target:"Object",stat:!0},{setPrototypeOf:c9e})});var Pee=J((OLt,Oee)=>{"use strict";var f9e=Mk(),h9e=Ih();Oee.exports=f9e?{}.toString:function(){return"[object "+h9e(this)+"]"}});var Mee=J(()=>{"use strict";var d9e=Mk(),p9e=Ba(),m9e=Pee();d9e||p9e(Object.prototype,"toString",m9e,{unsafe:!0})});var Lee=J(()=>{"use strict";var g9e=ht(),v9e=Bq().values;g9e({target:"Object",stat:!0},{values:function(e){return v9e(e)}})});var Fee=J(()=>{"use strict";var y9e=ht(),Ree=Dq();y9e({global:!0,forced:parseFloat!==Ree},{parseFloat:Ree})});var Nee=J(()=>{"use strict";var b9e=ht(),qee=Oq();b9e({global:!0,forced:parseInt!==qee},{parseInt:qee})});var BC=J((zLt,Bee)=>{"use strict";var _9e=Uy(),x9e=ov(),w9e=TypeError;Bee.exports=function(t){if(_9e(t))return t;throw new w9e(x9e(t)+" is not a constructor")}});var eS=J((jLt,jee)=>{"use strict";var zee=qn(),S9e=BC(),E9e=rc(),T9e=Ci(),A9e=T9e("species");jee.exports=function(t,e){var r=zee(t).constructor,n;return r===void 0||E9e(n=zee(r)[A9e])?e:S9e(n)}});var Hf=J((ULt,Uee)=>{"use strict";var k9e=TypeError;Uee.exports=function(t,e){if(t<e)throw new k9e("Not enough arguments");return t}});var $q=J((VLt,Vee)=>{"use strict";var C9e=wd();Vee.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(C9e)});var nS=J((HLt,Jee)=>{"use strict";var Wf=Jr(),I9e=Uf(),D9e=Dh(),Hee=Wi(),O9e=Xi(),Xee=Sr(),Wee=nR(),P9e=jf(),$ee=hw(),M9e=Hf(),L9e=$q(),R9e=Yy(),Jq=Wf.setImmediate,Qq=Wf.clearImmediate,F9e=Wf.process,Gq=Wf.Dispatch,q9e=Wf.Function,Gee=Wf.MessageChannel,N9e=Wf.String,Kq=0,tS={},Kee="onreadystatechange",rS,ib,Zq,Yq;Xee(function(){rS=Wf.location});var eN=function(t){if(O9e(tS,t)){var e=tS[t];delete tS[t],e()}},Xq=function(t){return function(){eN(t)}},Zee=function(t){eN(t.data)},Yee=function(t){Wf.postMessage(N9e(t),rS.protocol+"//"+rS.host)};(!Jq||!Qq)&&(Jq=function(e){M9e(arguments.length,1);var r=Hee(e)?e:q9e(e),n=P9e(arguments,1);return tS[++Kq]=function(){I9e(r,void 0,n)},ib(Kq),Kq},Qq=function(e){delete tS[e]},R9e?ib=function(t){F9e.nextTick(Xq(t))}:Gq&&Gq.now?ib=function(t){Gq.now(Xq(t))}:Gee&&!L9e?(Zq=new Gee,Yq=Zq.port2,Zq.port1.onmessage=Zee,ib=D9e(Yq.postMessage,Yq)):Wf.addEventListener&&Hee(Wf.postMessage)&&!Wf.importScripts&&rS&&rS.protocol!=="file:"&&!Xee(Yee)?(ib=Yee,Wf.addEventListener("message",Zee,!1)):Kee in $ee("script")?ib=function(t){Wee.appendChild($ee("script"))[Kee]=function(){Wee.removeChild(this),eN(t)}}:ib=function(t){setTimeout(Xq(t),0)});Jee.exports={set:Jq,clear:Qq}});var tN=J((WLt,ete)=>{"use strict";var Qee=Jr(),B9e=zn(),z9e=Object.getOwnPropertyDescriptor;ete.exports=function(t){if(!B9e)return Qee[t];var e=z9e(Qee,t);return e&&e.value}});var rN=J(($Lt,rte)=>{"use strict";var tte=function(){this.head=null,this.tail=null};tte.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return e===null&&(this.tail=null),t.item}}};rte.exports=tte});var ite=J((GLt,nte)=>{"use strict";var j9e=wd();nte.exports=/ipad|iphone|ipod/i.test(j9e)&&typeof Pebble<"u"});var ate=J((KLt,ote)=>{"use strict";var U9e=wd();ote.exports=/web0s(?!.*chrome)/i.test(U9e)});var lN=J((ZLt,hte)=>{"use strict";var x_=Jr(),V9e=tN(),ste=Dh(),nN=nS().set,H9e=rN(),W9e=$q(),$9e=ite(),G9e=ate(),iN=Yy(),lte=x_.MutationObserver||x_.WebKitMutationObserver,ute=x_.document,cte=x_.process,zC=x_.Promise,sN=V9e("queueMicrotask"),__,oN,aN,jC,fte;sN||(iS=new H9e,oS=function(){var t,e;for(iN&&(t=cte.domain)&&t.exit();e=iS.get();)try{e()}catch(r){throw iS.head&&__(),r}t&&t.enter()},!W9e&&!iN&&!G9e&&lte&&ute?(oN=!0,aN=ute.createTextNode(""),new lte(oS).observe(aN,{characterData:!0}),__=function(){aN.data=oN=!oN}):!$9e&&zC&&zC.resolve?(jC=zC.resolve(void 0),jC.constructor=zC,fte=ste(jC.then,jC),__=function(){fte(oS)}):iN?__=function(){cte.nextTick(oS)}:(nN=ste(nN,x_),__=function(){nN(oS)}),sN=function(t){iS.head||__(),iS.add(t)});var iS,oS;hte.exports=sN});var pte=J((YLt,dte)=>{"use strict";dte.exports=function(t,e){try{arguments.length===1?console.error(t):console.error(t,e)}catch{}}});var ob=J((XLt,mte)=>{"use strict";mte.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}});var ab=J((JLt,gte)=>{"use strict";var K9e=Jr();gte.exports=K9e.Promise});var w_=J((QLt,_te)=>{"use strict";var Z9e=Jr(),aS=ab(),Y9e=Wi(),X9e=Q0(),J9e=Ek(),Q9e=Ci(),vte=Lw(),eHe=Mo(),uN=Dp(),yte=aS&&aS.prototype,tHe=Q9e("species"),cN=!1,bte=Y9e(Z9e.PromiseRejectionEvent),rHe=X9e("Promise",function(){var t=J9e(aS),e=t!==String(aS);if(!e&&uN===66||eHe&&!(yte.catch&&yte.finally))return!0;if(!uN||uN<51||!/native code/.test(t)){var r=new aS(function(o){o(1)}),n=function(o){o(function(){},function(){})},i=r.constructor={};if(i[tHe]=n,cN=r.then(function(){})instanceof n,!cN)return!0}return!e&&(vte==="BROWSER"||vte==="DENO")&&!bte});_te.exports={CONSTRUCTOR:rHe,REJECTION_EVENT:bte,SUBCLASSING:cN}});var Bp=J((eRt,wte)=>{"use strict";var xte=no(),nHe=TypeError,iHe=function(t){var e,r;this.promise=new t(function(n,i){if(e!==void 0||r!==void 0)throw new nHe("Bad Promise constructor");e=n,r=i}),this.resolve=xte(e),this.reject=xte(r)};wte.exports.f=function(t){return new iHe(t)}});var jte=J(()=>{"use strict";var oHe=ht(),aHe=Mo(),WC=Yy(),bv=Jr(),A_=$n(),Ste=Ba(),Ete=Ad(),sHe=ac(),lHe=Xy(),uHe=no(),HC=Wi(),cHe=ki(),fHe=Ph(),hHe=eS(),Ite=nS().set,mN=lN(),dHe=pte(),pHe=ob(),mHe=rN(),Dte=Us(),$C=ab(),gN=w_(),Ote=Bp(),GC="Promise",Pte=gN.CONSTRUCTOR,gHe=gN.REJECTION_EVENT,vHe=gN.SUBCLASSING,fN=Dte.getterFor(GC),yHe=Dte.set,S_=$C&&$C.prototype,sb=$C,UC=S_,Mte=bv.TypeError,hN=bv.document,vN=bv.process,dN=Ote.f,bHe=dN,_He=!!(hN&&hN.createEvent&&bv.dispatchEvent),Lte="unhandledrejection",xHe="rejectionhandled",Tte=0,Rte=1,wHe=2,yN=1,Fte=2,VC,Ate,SHe,kte,qte=function(t){var e;return cHe(t)&&HC(e=t.then)?e:!1},Nte=function(t,e){var r=e.value,n=e.state===Rte,i=n?t.ok:t.fail,o=t.resolve,s=t.reject,u=t.domain,h,y,w;try{i?(n||(e.rejection===Fte&&THe(e),e.rejection=yN),i===!0?h=r:(u&&u.enter(),h=i(r),u&&(u.exit(),w=!0)),h===t.promise?s(new Mte("Promise-chain cycle")):(y=qte(h))?A_(y,h,o,s):o(h)):s(r)}catch(T){u&&!w&&u.exit(),s(T)}},Bte=function(t,e){t.notified||(t.notified=!0,mN(function(){for(var r=t.reactions,n;n=r.get();)Nte(n,t);t.notified=!1,e&&!t.rejection&&EHe(t)}))},zte=function(t,e,r){var n,i;_He?(n=hN.createEvent("Event"),n.promise=e,n.reason=r,n.initEvent(t,!1,!0),bv.dispatchEvent(n)):n={promise:e,reason:r},!gHe&&(i=bv["on"+t])?i(n):t===Lte&&dHe("Unhandled promise rejection",r)},EHe=function(t){A_(Ite,bv,function(){var e=t.facade,r=t.value,n=Cte(t),i;if(n&&(i=pHe(function(){WC?vN.emit("unhandledRejection",r,e):zte(Lte,e,r)}),t.rejection=WC||Cte(t)?Fte:yN,i.error))throw i.value})},Cte=function(t){return t.rejection!==yN&&!t.parent},THe=function(t){A_(Ite,bv,function(){var e=t.facade;WC?vN.emit("rejectionHandled",e):zte(xHe,e,t.value)})},E_=function(t,e,r){return function(n){t(e,n,r)}},T_=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=wHe,Bte(t,!0))},pN=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new Mte("Promise can't be resolved itself");var n=qte(e);n?mN(function(){var i={done:!1};try{A_(n,e,E_(pN,i,t),E_(T_,i,t))}catch(o){T_(i,o,t)}}):(t.value=e,t.state=Rte,Bte(t,!1))}catch(i){T_({done:!1},i,t)}}};if(Pte&&(sb=function(e){fHe(this,UC),uHe(e),A_(VC,this);var r=fN(this);try{e(E_(pN,r),E_(T_,r))}catch(n){T_(r,n)}},UC=sb.prototype,VC=function(e){yHe(this,{type:GC,done:!1,notified:!1,parent:!1,reactions:new mHe,rejection:!1,state:Tte,value:null})},VC.prototype=Ste(UC,"then",function(e,r){var n=fN(this),i=dN(hHe(this,sb));return n.parent=!0,i.ok=HC(e)?e:!0,i.fail=HC(r)&&r,i.domain=WC?vN.domain:void 0,n.state===Tte?n.reactions.add(i):mN(function(){Nte(i,n)}),i.promise}),Ate=function(){var t=new VC,e=fN(t);this.promise=t,this.resolve=E_(pN,e),this.reject=E_(T_,e)},Ote.f=dN=function(t){return t===sb||t===SHe?new Ate(t):bHe(t)},!aHe&&HC($C)&&S_!==Object.prototype)){kte=S_.then,vHe||Ste(S_,"then",function(e,r){var n=this;return new sb(function(i,o){A_(kte,n,i,o)}).then(e,r)},{unsafe:!0});try{delete S_.constructor}catch{}Ete&&Ete(S_,UC)}oHe({global:!0,constructor:!0,wrap:!0,forced:Pte},{Promise:sb});sHe(sb,GC,!1,!0);lHe(GC)});var sS=J((nRt,Ute)=>{"use strict";var AHe=ab(),kHe=Cw(),CHe=w_().CONSTRUCTOR;Ute.exports=CHe||!kHe(function(t){AHe.all(t).then(void 0,function(){})})});var Vte=J(()=>{"use strict";var IHe=ht(),DHe=$n(),OHe=no(),PHe=Bp(),MHe=ob(),LHe=wl(),RHe=sS();IHe({target:"Promise",stat:!0,forced:RHe},{all:function(e){var r=this,n=PHe.f(r),i=n.resolve,o=n.reject,s=MHe(function(){var u=OHe(r.resolve),h=[],y=0,w=1;LHe(e,function(T){var I=y++,P=!1;w++,DHe(u,r,T).then(function(L){P||(P=!0,h[I]=L,--w||i(h))},o)}),--w||i(h)});return s.error&&o(s.value),n.promise}})});var Wte=J(()=>{"use strict";var FHe=ht(),qHe=Mo(),NHe=w_().CONSTRUCTOR,_N=ab(),BHe=Uo(),zHe=Wi(),jHe=Ba(),Hte=_N&&_N.prototype;FHe({target:"Promise",proto:!0,forced:NHe,real:!0},{catch:function(t){return this.then(void 0,t)}});!qHe&&zHe(_N)&&(bN=BHe("Promise").prototype.catch,Hte.catch!==bN&&jHe(Hte,"catch",bN,{unsafe:!0}));var bN});var $te=J(()=>{"use strict";var UHe=ht(),VHe=$n(),HHe=no(),WHe=Bp(),$He=ob(),GHe=wl(),KHe=sS();UHe({target:"Promise",stat:!0,forced:KHe},{race:function(e){var r=this,n=WHe.f(r),i=n.reject,o=$He(function(){var s=HHe(r.resolve);GHe(e,function(u){VHe(s,r,u).then(n.resolve,i)})});return o.error&&i(o.value),n.promise}})});var Gte=J(()=>{"use strict";var ZHe=ht(),YHe=Bp(),XHe=w_().CONSTRUCTOR;ZHe({target:"Promise",stat:!0,forced:XHe},{reject:function(e){var r=YHe.f(this),n=r.reject;return n(e),r.promise}})});var xN=J((hRt,Kte)=>{"use strict";var JHe=qn(),QHe=ki(),eWe=Bp();Kte.exports=function(t,e){if(JHe(t),QHe(e)&&e.constructor===t)return e;var r=eWe.f(t),n=r.resolve;return n(e),r.promise}});var Xte=J(()=>{"use strict";var tWe=ht(),rWe=Uo(),Zte=Mo(),nWe=ab(),Yte=w_().CONSTRUCTOR,iWe=xN(),oWe=rWe("Promise"),aWe=Zte&&!Yte;tWe({target:"Promise",stat:!0,forced:Zte||Yte},{resolve:function(e){return iWe(aWe&&this===oWe?nWe:this,e)}})});var Jte=J(()=>{"use strict";jte();Vte();Wte();$te();Gte();Xte()});var Qte=J(()=>{"use strict";var sWe=ht(),lWe=$n(),uWe=no(),cWe=Bp(),fWe=ob(),hWe=wl(),dWe=sS();sWe({target:"Promise",stat:!0,forced:dWe},{allSettled:function(e){var r=this,n=cWe.f(r),i=n.resolve,o=n.reject,s=fWe(function(){var u=uWe(r.resolve),h=[],y=0,w=1;hWe(e,function(T){var I=y++,P=!1;w++,lWe(u,r,T).then(function(L){P||(P=!0,h[I]={status:"fulfilled",value:L},--w||i(h))},function(L){P||(P=!0,h[I]={status:"rejected",reason:L},--w||i(h))})}),--w||i(h)});return s.error&&o(s.value),n.promise}})});var tre=J(()=>{"use strict";var pWe=ht(),mWe=$n(),gWe=no(),vWe=Uo(),yWe=Bp(),bWe=ob(),_We=wl(),xWe=sS(),ere="No one promise resolved";pWe({target:"Promise",stat:!0,forced:xWe},{any:function(e){var r=this,n=vWe("AggregateError"),i=yWe.f(r),o=i.resolve,s=i.reject,u=bWe(function(){var h=gWe(r.resolve),y=[],w=0,T=1,I=!1;_We(e,function(P){var L=w++,R=!1;T++,mWe(h,r,P).then(function(W){R||I||(I=!0,o(W))},function(W){R||I||(R=!0,y[L]=W,--T||s(new n(y,ere)))})}),--T||s(new n(y,ere))});return u.error&&s(u.value),i.promise}})});var ore=J(()=>{"use strict";var wWe=ht(),SWe=Mo(),KC=ab(),EWe=Sr(),nre=Uo(),ire=Wi(),TWe=eS(),rre=xN(),AWe=Ba(),SN=KC&&KC.prototype,kWe=!!KC&&EWe(function(){SN.finally.call({then:function(){}},function(){})});wWe({target:"Promise",proto:!0,real:!0,forced:kWe},{finally:function(t){var e=TWe(this,nre("Promise")),r=ire(t);return this.then(r?function(n){return rre(e,t()).then(function(){return n})}:t,r?function(n){return rre(e,t()).then(function(){throw n})}:t)}});!SWe&&ire(KC)&&(wN=nre("Promise").prototype.finally,SN.finally!==wN&&AWe(SN,"finally",wN,{unsafe:!0}));var wN});var lre=J(()=>{"use strict";var CWe=ht(),IWe=Jr(),DWe=Uf(),OWe=jf(),PWe=Bp(),MWe=no(),sre=ob(),EN=IWe.Promise,are=!1,LWe=!EN||!EN.try||sre(function(){EN.try(function(t){are=t===8},8)}).error||!are;CWe({target:"Promise",stat:!0,forced:LWe},{try:function(t){var e=arguments.length>1?OWe(arguments,1):[],r=PWe.f(this),n=sre(function(){return DWe(MWe(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var ure=J(()=>{"use strict";var RWe=ht(),FWe=Bp();RWe({target:"Promise",stat:!0},{withResolvers:function(){var e=FWe.f(this);return{promise:e.promise,resolve:e.resolve,reject:e.reject}}})});var cre=J(()=>{"use strict";var qWe=ht(),NWe=Uf(),BWe=no(),zWe=qn(),jWe=Sr(),UWe=!jWe(function(){Reflect.apply(function(){})});qWe({target:"Reflect",stat:!0,forced:UWe},{apply:function(e,r,n){return NWe(BWe(e),r,zWe(n))}})});var vre=J(()=>{"use strict";var VWe=ht(),HWe=Uo(),TN=Uf(),WWe=eq(),fre=BC(),$We=qn(),hre=ki(),GWe=ic(),pre=Sr(),AN=HWe("Reflect","construct"),KWe=Object.prototype,ZWe=[].push,mre=pre(function(){function t(){}return!(AN(function(){},[],t)instanceof t)}),gre=!pre(function(){AN(function(){})}),dre=mre||gre;VWe({target:"Reflect",stat:!0,forced:dre,sham:dre},{construct:function(e,r){fre(e),$We(r);var n=arguments.length<3?e:fre(arguments[2]);if(gre&&!mre)return AN(e,r,n);if(e===n){switch(r.length){case 0:return new e;case 1:return new e(r[0]);case 2:return new e(r[0],r[1]);case 3:return new e(r[0],r[1],r[2]);case 4:return new e(r[0],r[1],r[2],r[3])}var i=[null];return TN(ZWe,i,r),new(TN(WWe,e,i))}var o=n.prototype,s=GWe(hre(o)?o:KWe),u=TN(e,s,r);return hre(u)?u:s}})});var _re=J(()=>{"use strict";var YWe=ht(),XWe=zn(),yre=qn(),JWe=zm(),bre=ts(),QWe=Sr(),e7e=QWe(function(){Reflect.defineProperty(bre.f({},1,{value:1}),1,{value:2})});YWe({target:"Reflect",stat:!0,forced:e7e,sham:!XWe},{defineProperty:function(e,r,n){yre(e);var i=JWe(r);yre(n);try{return bre.f(e,i,n),!0}catch{return!1}}})});var xre=J(()=>{"use strict";var t7e=ht(),r7e=qn(),n7e=Ru().f;t7e({target:"Reflect",stat:!0},{deleteProperty:function(e,r){var n=n7e(r7e(e),r);return n&&!n.configurable?!1:delete e[r]}})});var kN=J((RRt,Sre)=>{"use strict";var wre=Xi();Sre.exports=function(t){return t!==void 0&&(wre(t,"value")||wre(t,"writable"))}});var Tre=J(()=>{"use strict";var i7e=ht(),o7e=$n(),a7e=ki(),s7e=qn(),l7e=kN(),u7e=Ru(),c7e=Nc();function Ere(t,e){var r=arguments.length<3?t:arguments[2],n,i;if(s7e(t)===r)return t[e];if(n=u7e.f(t,e),n)return l7e(n)?n.value:n.get===void 0?void 0:o7e(n.get,r);if(a7e(i=c7e(t)))return Ere(i,e,r)}i7e({target:"Reflect",stat:!0},{get:Ere})});var Are=J(()=>{"use strict";var f7e=ht(),h7e=zn(),d7e=qn(),p7e=Ru();f7e({target:"Reflect",stat:!0,sham:!h7e},{getOwnPropertyDescriptor:function(e,r){return p7e.f(d7e(e),r)}})});var kre=J(()=>{"use strict";var m7e=ht(),g7e=qn(),v7e=Nc(),y7e=Yk();m7e({target:"Reflect",stat:!0,sham:!y7e},{getPrototypeOf:function(e){return v7e(g7e(e))}})});var Cre=J(()=>{"use strict";var b7e=ht();b7e({target:"Reflect",stat:!0},{has:function(e,r){return r in e}})});var Ire=J(()=>{"use strict";var _7e=ht(),x7e=qn(),w7e=DC();_7e({target:"Reflect",stat:!0},{isExtensible:function(e){return x7e(e),w7e(e)}})});var Dre=J(()=>{"use strict";var S7e=ht(),E7e=Ok();S7e({target:"Reflect",stat:!0},{ownKeys:E7e})});var Ore=J(()=>{"use strict";var T7e=ht(),A7e=Uo(),k7e=qn(),C7e=rb();T7e({target:"Reflect",stat:!0,sham:!C7e},{preventExtensions:function(e){k7e(e);try{var r=A7e("Object","preventExtensions");return r&&r(e),!0}catch{return!1}}})});var Fre=J(()=>{"use strict";var I7e=ht(),D7e=$n(),O7e=qn(),Pre=ki(),P7e=kN(),M7e=Sr(),CN=ts(),Mre=Ru(),L7e=Nc(),Lre=zf();function Rre(t,e,r){var n=arguments.length<4?t:arguments[3],i=Mre.f(O7e(t),e),o,s,u;if(!i){if(Pre(s=L7e(t)))return Rre(s,e,r,n);i=Lre(0)}if(P7e(i)){if(i.writable===!1||!Pre(n))return!1;if(o=Mre.f(n,e)){if(o.get||o.set||o.writable===!1)return!1;o.value=r,CN.f(n,e,o)}else CN.f(n,e,Lre(0,r))}else{if(u=i.set,u===void 0)return!1;D7e(u,n,r)}return!0}var R7e=M7e(function(){var t=function(){},e=CN.f(new t,"a",{configurable:!0});return Reflect.set(t.prototype,"a",1,e)!==!1});I7e({target:"Reflect",stat:!0,forced:R7e},{set:Rre})});var Nre=J(()=>{"use strict";var F7e=ht(),q7e=qn(),N7e=kR(),qre=Ad();qre&&F7e({target:"Reflect",stat:!0},{setPrototypeOf:function(e,r){q7e(e),N7e(r);try{return qre(e,r),!0}catch{return!1}}})});var Bre=J(()=>{"use strict";var B7e=ht(),z7e=Jr(),j7e=ac();B7e({global:!0},{Reflect:{}});j7e(z7e.Reflect,"Reflect",!0)});var lS=J((rFt,zre)=>{"use strict";var U7e=ki(),V7e=au(),H7e=Ci(),W7e=H7e("match");zre.exports=function(t){var e;return U7e(t)&&((e=t[W7e])!==void 0?!!e:V7e(t)==="RegExp")}});var ZC=J((nFt,jre)=>{"use strict";var $7e=qn();jre.exports=function(){var t=$7e(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}});var k_=J((iFt,Vre)=>{"use strict";var G7e=$n(),K7e=Xi(),Z7e=nc(),Y7e=ZC(),Ure=RegExp.prototype;Vre.exports=function(t){var e=t.flags;return e===void 0&&!("flags"in Ure)&&!K7e(t,"flags")&&Z7e(Ure,t)?G7e(Y7e,t):e}});var uS=J((oFt,Hre)=>{"use strict";var IN=Sr(),X7e=Jr(),DN=X7e.RegExp,ON=IN(function(){var t=DN("a","y");return t.lastIndex=2,t.exec("abcd")!==null}),J7e=ON||IN(function(){return!DN("a","y").sticky}),Q7e=ON||IN(function(){var t=DN("^r","gy");return t.lastIndex=2,t.exec("str")!==null});Hre.exports={BROKEN_CARET:Q7e,MISSED_STICKY:J7e,UNSUPPORTED_Y:ON}});var YC=J((aFt,Wre)=>{"use strict";var e$e=Sr(),t$e=Jr(),r$e=t$e.RegExp;Wre.exports=e$e(function(){var t=r$e(".","s");return!(t.dotAll&&t.test(`
`)&&t.flags==="s")})});var PN=J((sFt,$re)=>{"use strict";var n$e=Sr(),i$e=Jr(),o$e=i$e.RegExp;$re.exports=n$e(function(){var t=o$e("(?<a>b)","g");return t.exec("b").groups.a!=="b"||"b".replace(t,"$<a>c")!=="bc"})});var rne=J(()=>{"use strict";var a$e=zn(),FN=Jr(),cS=qr(),s$e=Q0(),l$e=cv(),u$e=su(),c$e=ic(),f$e=av().f,Gre=nc(),h$e=lS(),Kre=ai(),d$e=k_(),Jre=uS(),p$e=CR(),m$e=Ba(),g$e=Sr(),v$e=Xi(),y$e=Us().enforce,b$e=Xy(),_$e=Ci(),Qre=YC(),ene=PN(),x$e=_$e("match"),xv=FN.RegExp,C_=xv.prototype,w$e=FN.SyntaxError,S$e=cS(C_.exec),XC=cS("".charAt),Zre=cS("".replace),Yre=cS("".indexOf),Xre=cS("".slice),E$e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,lb=/a/g,MN=/a/g,T$e=new xv(lb)!==lb,tne=Jre.MISSED_STICKY,A$e=Jre.UNSUPPORTED_Y,k$e=a$e&&(!T$e||tne||Qre||ene||g$e(function(){return MN[x$e]=!1,xv(lb)!==lb||xv(MN)===MN||String(xv(lb,"i"))!=="/a/i"})),C$e=function(t){for(var e=t.length,r=0,n="",i=!1,o;r<=e;r++){if(o=XC(t,r),o==="\\"){n+=o+XC(t,++r);continue}!i&&o==="."?n+="[\\s\\S]":(o==="["?i=!0:o==="]"&&(i=!1),n+=o)}return n},I$e=function(t){for(var e=t.length,r=0,n="",i=[],o=c$e(null),s=!1,u=!1,h=0,y="",w;r<=e;r++){if(w=XC(t,r),w==="\\")w+=XC(t,++r);else if(w==="]")s=!1;else if(!s)switch(!0){case w==="[":s=!0;break;case w==="(":if(n+=w,Xre(t,r+1,r+3)==="?:")continue;S$e(E$e,Xre(t,r+1))&&(r+=2,u=!0),h++;continue;case(w===">"&&u):if(y===""||v$e(o,y))throw new w$e("Invalid capture group name");o[y]=!0,i[i.length]=[y,h],u=!1,y="";continue}u?y+=w:n+=w}return[n,i]};if(s$e("RegExp",k$e)){for(_v=function(e,r){var n=Gre(C_,this),i=h$e(e),o=r===void 0,s=[],u=e,h,y,w,T,I,P;if(!n&&i&&o&&e.constructor===_v)return e;if((i||Gre(C_,e))&&(e=e.source,o&&(r=d$e(u))),e=e===void 0?"":Kre(e),r=r===void 0?"":Kre(r),u=e,Qre&&"dotAll"in lb&&(y=!!r&&Yre(r,"s")>-1,y&&(r=Zre(r,/s/g,""))),h=r,tne&&"sticky"in lb&&(w=!!r&&Yre(r,"y")>-1,w&&A$e&&(r=Zre(r,/y/g,""))),ene&&(T=I$e(e),e=T[0],s=T[1]),I=l$e(xv(e,r),n?this:C_,_v),(y||w||s.length)&&(P=y$e(I),y&&(P.dotAll=!0,P.raw=_v(C$e(e),h)),w&&(P.sticky=!0),s.length&&(P.groups=s)),e!==u)try{u$e(I,"source",u===""?"(?:)":u)}catch{}return I},LN=f$e(xv),RN=0;LN.length>RN;)p$e(_v,xv,LN[RN++]);C_.constructor=_v,_v.prototype=C_,m$e(FN,"RegExp",_v,{constructor:!0})}var _v,LN,RN;b$e("RegExp")});var ine=J((cFt,nne)=>{"use strict";var D$e=TypeError;nne.exports=function(t){if(typeof t=="string")return t;throw new D$e("Argument is not a string")}});var cne=J(()=>{"use strict";var O$e=ht(),fS=qr(),P$e=ine(),M$e=Xi(),one=Uw().start,L$e=m_(),R$e=Array,ane=RegExp.escape,sne=fS("".charAt),BN=fS("".charCodeAt),F$e=fS(1.1.toString),q$e=fS([].join),une=/^[0-9a-z]/i,N$e=/^[$()*+./?[\\\]^{|}]/,B$e=RegExp("^[!\"#%&',\\-:;<=>@`~"+L$e+"]"),qN=fS(une.exec),lne={"	":"t","\n":"n","\v":"v","\f":"f","\r":"r"},NN=function(t){var e=F$e(BN(t,0),16);return e.length<3?"\\x"+one(e,2,"0"):"\\u"+one(e,4,"0")},z$e=!ane||ane("ab")!=="\\x61b";O$e({target:"RegExp",stat:!0,forced:z$e},{escape:function(e){P$e(e);for(var r=e.length,n=R$e(r),i=0;i<r;i++){var o=sne(e,i);if(i===0&&qN(une,o))n[i]=NN(o);else if(M$e(lne,o))n[i]="\\"+lne[o];else if(qN(N$e,o))n[i]="\\"+o;else if(qN(B$e,o))n[i]=NN(o);else{var s=BN(o,0);(s&63488)!==55296?n[i]=o:s>=56320||i+1>=r||(BN(e,i+1)&64512)!==56320?n[i]=NN(o):(n[i]=o,n[++i]=sne(e,i))}}return q$e(n,"")}})});var hne=J(()=>{"use strict";var j$e=zn(),U$e=YC(),V$e=au(),H$e=el(),W$e=Us().get,fne=RegExp.prototype,$$e=TypeError;j$e&&U$e&&H$e(fne,"dotAll",{configurable:!0,get:function(){if(this!==fne){if(V$e(this)==="RegExp")return!!W$e(this).dotAll;throw new $$e("Incompatible receiver, RegExp required")}}})});var e2=J((mFt,pne)=>{"use strict";var I_=$n(),QC=qr(),G$e=ai(),K$e=ZC(),Z$e=uS(),Y$e=Ny(),X$e=ic(),J$e=Us().get,Q$e=YC(),eGe=PN(),tGe=Y$e("native-string-replace",String.prototype.replace),JC=RegExp.prototype.exec,jN=JC,rGe=QC("".charAt),nGe=QC("".indexOf),iGe=QC("".replace),zN=QC("".slice),UN=function(){var t=/a/,e=/b*/g;return I_(JC,t,"a"),I_(JC,e,"a"),t.lastIndex!==0||e.lastIndex!==0}(),dne=Z$e.BROKEN_CARET,VN=/()??/.exec("")[1]!==void 0,oGe=UN||VN||dne||Q$e||eGe;oGe&&(jN=function(e){var r=this,n=J$e(r),i=G$e(e),o=n.raw,s,u,h,y,w,T,I;if(o)return o.lastIndex=r.lastIndex,s=I_(jN,o,i),r.lastIndex=o.lastIndex,s;var P=n.groups,L=dne&&r.sticky,R=I_(K$e,r),W=r.source,G=0,q=i;if(L&&(R=iGe(R,"y",""),nGe(R,"g")===-1&&(R+="g"),q=zN(i,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&rGe(i,r.lastIndex-1)!==`
`)&&(W="(?: "+W+")",q=" "+q,G++),u=new RegExp("^(?:"+W+")",R)),VN&&(u=new RegExp("^"+W+"$(?!\\s)",R)),UN&&(h=r.lastIndex),y=I_(JC,L?u:r,q),L?y?(y.input=zN(y.input,G),y[0]=zN(y[0],G),y.index=r.lastIndex,r.lastIndex+=y[0].length):r.lastIndex=0:UN&&y&&(r.lastIndex=r.global?y.index+y[0].length:h),VN&&y&&y.length>1&&I_(tGe,y[0],u,function(){for(w=1;w<arguments.length-2;w++)arguments[w]===void 0&&(y[w]=void 0)}),y&&P)for(y.groups=T=X$e(null),w=0;w<P.length;w++)I=P[w],T[I[0]]=y[I[1]];return y});pne.exports=jN});var t2=J(()=>{"use strict";var aGe=ht(),mne=e2();aGe({target:"RegExp",proto:!0,forced:/./.exec!==mne},{exec:mne})});var yne=J(()=>{"use strict";var sGe=Jr(),lGe=zn(),uGe=el(),cGe=ZC(),fGe=Sr(),gne=sGe.RegExp,vne=gne.prototype,hGe=lGe&&fGe(function(){var t=!0;try{gne(".","d")}catch{t=!1}var e={},r="",n=t?"dgimsy":"gimsy",i=function(h,y){Object.defineProperty(e,h,{get:function(){return r+=y,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};t&&(o.hasIndices="d");for(var s in o)i(s,o[s]);var u=Object.getOwnPropertyDescriptor(vne,"flags").get.call(e);return u!==n||r!==n});hGe&&uGe(vne,"flags",{configurable:!0,get:cGe})});var _ne=J(()=>{"use strict";var dGe=zn(),pGe=uS().MISSED_STICKY,mGe=au(),gGe=el(),vGe=Us().get,bne=RegExp.prototype,yGe=TypeError;dGe&&pGe&&gGe(bne,"sticky",{configurable:!0,get:function(){if(this!==bne){if(mGe(this)==="RegExp")return!!vGe(this).sticky;throw new yGe("Incompatible receiver, RegExp required")}}})});var Sne=J(()=>{"use strict";t2();var bGe=ht(),xne=$n(),_Ge=Wi(),wne=qn(),xGe=ai(),wGe=function(){var t=!1,e=/[ac]/;return e.exec=function(){return t=!0,/./.exec.apply(this,arguments)},e.test("abc")===!0&&t}(),SGe=/./.test;bGe({target:"RegExp",proto:!0,forced:!wGe},{test:function(t){var e=wne(this),r=xGe(t),n=e.exec;if(!_Ge(n))return xne(SGe,e,r);var i=xne(n,e,r);return i===null?!1:(wne(i),!0)}})});var kne=J(()=>{"use strict";var EGe=zy().PROPER,TGe=Ba(),AGe=qn(),Ene=ai(),kGe=Sr(),CGe=k_(),HN="toString",Tne=RegExp.prototype,Ane=Tne[HN],IGe=kGe(function(){return Ane.call({source:"a",flags:"b"})!=="/a/b"}),DGe=EGe&&Ane.name!==HN;(IGe||DGe)&&TGe(Tne,HN,function(){var e=AGe(this),r=Ene(e.source),n=Ene(CGe(e));return"/"+r+"/"+n},{unsafe:!0})});var Cne=J(()=>{"use strict";var OGe=Hw(),PGe=yq();OGe("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},PGe)});var Ine=J(()=>{"use strict";Cne()});var Mh=J((DFt,Dne)=>{"use strict";var WN=qr(),r2=Set.prototype;Dne.exports={Set,add:WN(r2.add),has:WN(r2.has),remove:WN(r2.delete),proto:r2}});var wv=J((OFt,One)=>{"use strict";var MGe=Mh().has;One.exports=function(t){return MGe(t),t}});var Sv=J((PFt,Pne)=>{"use strict";var LGe=$n();Pne.exports=function(t,e,r){for(var n=r?t:t.iterator,i=t.next,o,s;!(o=LGe(i,n)).done;)if(s=e(o.value),s!==void 0)return s}});var ub=J((MFt,qne)=>{"use strict";var Mne=qr(),RGe=Sv(),Lne=Mh(),FGe=Lne.Set,Rne=Lne.proto,qGe=Mne(Rne.forEach),Fne=Mne(Rne.keys),NGe=Fne(new FGe).next;qne.exports=function(t,e,r){return r?RGe({iterator:Fne(t),next:NGe},e):qGe(t,e)}});var n2=J((LFt,Bne)=>{"use strict";var Nne=Mh(),BGe=ub(),zGe=Nne.Set,jGe=Nne.add;Bne.exports=function(t){var e=new zGe;return BGe(t,function(r){jGe(e,r)}),e}});var D_=J((RFt,zne)=>{"use strict";var UGe=Ew(),VGe=Mh();zne.exports=UGe(VGe.proto,"size","get")||function(t){return t.size}});var Ev=J((FFt,$ne)=>{"use strict";var jne=no(),Hne=qn(),Une=$n(),HGe=ds(),WGe=zc(),Vne="Invalid size",$Ge=RangeError,GGe=TypeError,KGe=Math.max,Wne=function(t,e){this.set=t,this.size=KGe(e,0),this.has=jne(t.has),this.keys=jne(t.keys)};Wne.prototype={getIterator:function(){return WGe(Hne(Une(this.keys,this.set)))},includes:function(t){return Une(this.has,this.set,t)}};$ne.exports=function(t){Hne(t);var e=+t.size;if(e!==e)throw new GGe(Vne);var r=HGe(e);if(r<0)throw new $Ge(Vne);return new Wne(t,r)}});var Yne=J((qFt,Zne)=>{"use strict";var ZGe=wv(),Kne=Mh(),YGe=n2(),XGe=D_(),JGe=Ev(),QGe=ub(),eKe=Sv(),tKe=Kne.has,Gne=Kne.remove;Zne.exports=function(e){var r=ZGe(this),n=JGe(e),i=YGe(r);return XGe(r)<=n.size?QGe(r,function(o){n.includes(o)&&Gne(i,o)}):eKe(n.getIterator(),function(o){tKe(r,o)&&Gne(i,o)}),i}});var Tv=J((NFt,Qne)=>{"use strict";var rKe=Uo(),Xne=function(t){return{size:t,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},Jne=function(t){return{size:t,has:function(){return!0},keys:function(){throw new Error("e")}}};Qne.exports=function(t,e){var r=rKe("Set");try{new r()[t](Xne(0));try{return new r()[t](Xne(-1)),!1}catch{if(!e)return!0;try{return new r()[t](Jne(-1/0)),!1}catch{var n=new r;return n.add(1),n.add(2),e(n[t](Jne(1/0)))}}}catch{return!1}}});var eie=J(()=>{"use strict";var nKe=ht(),iKe=Yne(),oKe=Tv(),aKe=!oKe("difference",function(t){return t.size===0});nKe({target:"Set",proto:!0,real:!0,forced:aKe},{difference:iKe})});var nie=J((jFt,rie)=>{"use strict";var sKe=wv(),$N=Mh(),lKe=D_(),uKe=Ev(),cKe=ub(),fKe=Sv(),hKe=$N.Set,tie=$N.add,dKe=$N.has;rie.exports=function(e){var r=sKe(this),n=uKe(e),i=new hKe;return lKe(r)>n.size?fKe(n.getIterator(),function(o){dKe(r,o)&&tie(i,o)}):cKe(r,function(o){n.includes(o)&&tie(i,o)}),i}});var iie=J(()=>{"use strict";var pKe=ht(),mKe=Sr(),gKe=nie(),vKe=Tv(),yKe=!vKe("intersection",function(t){return t.size===2&&t.has(1)&&t.has(2)})||mKe(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});pKe({target:"Set",proto:!0,real:!0,forced:yKe},{intersection:gKe})});var aie=J((HFt,oie)=>{"use strict";var bKe=wv(),_Ke=Mh().has,xKe=D_(),wKe=Ev(),SKe=ub(),EKe=Sv(),TKe=fv();oie.exports=function(e){var r=bKe(this),n=wKe(e);if(xKe(r)<=n.size)return SKe(r,function(o){if(n.includes(o))return!1},!0)!==!1;var i=n.getIterator();return EKe(i,function(o){if(_Ke(r,o))return TKe(i,"normal",!1)})!==!1}});var sie=J(()=>{"use strict";var AKe=ht(),kKe=aie(),CKe=Tv(),IKe=!CKe("isDisjointFrom",function(t){return!t});AKe({target:"Set",proto:!0,real:!0,forced:IKe},{isDisjointFrom:kKe})});var uie=J((GFt,lie)=>{"use strict";var DKe=wv(),OKe=D_(),PKe=ub(),MKe=Ev();lie.exports=function(e){var r=DKe(this),n=MKe(e);return OKe(r)>n.size?!1:PKe(r,function(i){if(!n.includes(i))return!1},!0)!==!1}});var cie=J(()=>{"use strict";var LKe=ht(),RKe=uie(),FKe=Tv(),qKe=!FKe("isSubsetOf",function(t){return t});LKe({target:"Set",proto:!0,real:!0,forced:qKe},{isSubsetOf:RKe})});var hie=J((YFt,fie)=>{"use strict";var NKe=wv(),BKe=Mh().has,zKe=D_(),jKe=Ev(),UKe=Sv(),VKe=fv();fie.exports=function(e){var r=NKe(this),n=jKe(e);if(zKe(r)<n.size)return!1;var i=n.getIterator();return UKe(i,function(o){if(!BKe(r,o))return VKe(i,"normal",!1)})!==!1}});var die=J(()=>{"use strict";var HKe=ht(),WKe=hie(),$Ke=Tv(),GKe=!$Ke("isSupersetOf",function(t){return!t});HKe({target:"Set",proto:!0,real:!0,forced:GKe},{isSupersetOf:WKe})});var mie=J((QFt,pie)=>{"use strict";var KKe=wv(),GN=Mh(),ZKe=n2(),YKe=Ev(),XKe=Sv(),JKe=GN.add,QKe=GN.has,eZe=GN.remove;pie.exports=function(e){var r=KKe(this),n=YKe(e).getIterator(),i=ZKe(r);return XKe(n,function(o){QKe(r,o)?eZe(i,o):JKe(i,o)}),i}});var gie=J(()=>{"use strict";var tZe=ht(),rZe=mie(),nZe=Tv();tZe({target:"Set",proto:!0,real:!0,forced:!nZe("symmetricDifference")},{symmetricDifference:rZe})});var yie=J((rqt,vie)=>{"use strict";var iZe=wv(),oZe=Mh().add,aZe=n2(),sZe=Ev(),lZe=Sv();vie.exports=function(e){var r=iZe(this),n=sZe(e).getIterator(),i=aZe(r);return lZe(n,function(o){oZe(i,o)}),i}});var bie=J(()=>{"use strict";var uZe=ht(),cZe=yie(),fZe=Tv();uZe({target:"Set",proto:!0,real:!0,forced:!fZe("union")},{union:cZe})});var _ie=J(()=>{"use strict";var hZe=ht(),dZe=qr(),pZe=Na(),mZe=ds(),gZe=ai(),vZe=Sr(),yZe=dZe("".charAt),bZe=vZe(function(){return"\u{20BB7}".at(-2)!=="\uD842"});hZe({target:"String",proto:!0,forced:bZe},{at:function(e){var r=gZe(pZe(this)),n=r.length,i=mZe(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:yZe(r,o)}})});var hS=J((sqt,Sie)=>{"use strict";var KN=qr(),_Ze=ds(),xZe=ai(),wZe=Na(),SZe=KN("".charAt),xie=KN("".charCodeAt),EZe=KN("".slice),wie=function(t){return function(e,r){var n=xZe(wZe(e)),i=_Ze(r),o=n.length,s,u;return i<0||i>=o?t?"":void 0:(s=xie(n,i),s<55296||s>56319||i+1===o||(u=xie(n,i+1))<56320||u>57343?t?SZe(n,i):s:t?EZe(n,i,i+2):(s-55296<<10)+(u-56320)+65536)}};Sie.exports={codeAt:wie(!1),charAt:wie(!0)}});var Eie=J(()=>{"use strict";var TZe=ht(),AZe=hS().codeAt;TZe({target:"String",proto:!0},{codePointAt:function(e){return AZe(this,e)}})});var i2=J((cqt,Tie)=>{"use strict";var kZe=lS(),CZe=TypeError;Tie.exports=function(t){if(kZe(t))throw new CZe("The method doesn't accept regular expressions");return t}});var o2=J((fqt,Aie)=>{"use strict";var IZe=Ci(),DZe=IZe("match");Aie.exports=function(t){var e=/./;try{"/./"[t](e)}catch{try{return e[DZe]=!1,"/./"[t](e)}catch{}}return!1}});var Iie=J(()=>{"use strict";var OZe=ht(),PZe=sv(),MZe=Ru().f,LZe=Fc(),kie=ai(),RZe=i2(),FZe=Na(),qZe=o2(),NZe=Mo(),BZe=PZe("".slice),zZe=Math.min,Cie=qZe("endsWith"),jZe=!NZe&&!Cie&&!!function(){var t=MZe(String.prototype,"endsWith");return t&&!t.writable}();OZe({target:"String",proto:!0,forced:!jZe&&!Cie},{endsWith:function(e){var r=kie(FZe(this));RZe(e);var n=arguments.length>1?arguments[1]:void 0,i=r.length,o=n===void 0?i:zZe(LZe(n),i),s=kie(e);return BZe(r,o-s.length,o)===s}})});var ZN=J(()=>{"use strict";var UZe=ht(),VZe=qr(),HZe=Op(),WZe=RangeError,Die=String.fromCharCode,Oie=String.fromCodePoint,$Ze=VZe([].join),GZe=!!Oie&&Oie.length!==1;UZe({target:"String",stat:!0,arity:1,forced:GZe},{fromCodePoint:function(e){for(var r=[],n=arguments.length,i=0,o;n>i;){if(o=+arguments[i++],HZe(o,1114111)!==o)throw new WZe(o+" is not a valid code point");r[i]=o<65536?Die(o):Die(((o-=65536)>>10)+55296,o%1024+56320)}return $Ze(r,"")}})});var Mie=J(()=>{"use strict";var KZe=ht(),ZZe=qr(),YZe=i2(),XZe=Na(),Pie=ai(),JZe=o2(),QZe=ZZe("".indexOf);KZe({target:"String",proto:!0,forced:!JZe("includes")},{includes:function(e){return!!~QZe(Pie(XZe(this)),Pie(YZe(e)),arguments.length>1?arguments[1]:void 0)}})});var Rie=J(()=>{"use strict";var eYe=ht(),tYe=qr(),rYe=Na(),nYe=ai(),Lie=tYe("".charCodeAt);eYe({target:"String",proto:!0},{isWellFormed:function(){for(var e=nYe(rYe(this)),r=e.length,n=0;n<r;n++){var i=Lie(e,n);if((i&63488)===55296&&(i>=56320||++n>=r||(Lie(e,n)&64512)!==56320))return!1}return!0}})});var YN=J(()=>{"use strict";var iYe=hS().charAt,oYe=ai(),qie=Us(),aYe=aC(),Fie=Zy(),Nie="String Iterator",sYe=qie.set,lYe=qie.getterFor(Nie);aYe(String,"String",function(t){sYe(this,{type:Nie,string:oYe(t),index:0})},function(){var e=lYe(this),r=e.string,n=e.index,i;return n>=r.length?Fie(void 0,!0):(i=iYe(r,n),e.index+=i.length,Fie(i,!1))})});var dS=J((wqt,Vie)=>{"use strict";t2();var Bie=$n(),zie=Ba(),uYe=e2(),jie=Sr(),Uie=Ci(),cYe=su(),fYe=Uie("species"),XN=RegExp.prototype;Vie.exports=function(t,e,r,n){var i=Uie(t),o=!jie(function(){var y={};return y[i]=function(){return 7},""[t](y)!==7}),s=o&&!jie(function(){var y=!1,w=/a/;return t==="split"&&(w={},w.constructor={},w.constructor[fYe]=function(){return w},w.flags="",w[i]=/./[i]),w.exec=function(){return y=!0,null},w[i](""),!y});if(!o||!s||r){var u=/./[i],h=e(i,""[t],function(y,w,T,I,P){var L=w.exec;return L===uYe||L===XN.exec?o&&!P?{done:!0,value:Bie(u,w,T,I)}:{done:!0,value:Bie(y,T,w,I)}:{done:!1}});zie(String.prototype,t,h[0]),zie(XN,i,h[1])}n&&cYe(XN[i],"sham",!0)}});var pS=J((Sqt,Hie)=>{"use strict";var hYe=hS().charAt;Hie.exports=function(t,e,r){return e+(r?hYe(t,e).length:1)}});var O_=J((Eqt,$ie)=>{"use strict";var Wie=$n(),dYe=qn(),pYe=Wi(),mYe=au(),gYe=e2(),vYe=TypeError;$ie.exports=function(t,e){var r=t.exec;if(pYe(r)){var n=Wie(r,t,e);return n!==null&&dYe(n),n}if(mYe(t)==="RegExp")return Wie(gYe,t,e);throw new vYe("RegExp#exec called on incompatible receiver")}});var Kie=J(()=>{"use strict";var yYe=$n(),bYe=dS(),_Ye=qn(),xYe=rc(),wYe=Fc(),JN=ai(),SYe=Na(),EYe=Ed(),TYe=pS(),Gie=O_();bYe("match",function(t,e,r){return[function(i){var o=SYe(this),s=xYe(i)?void 0:EYe(i,t);return s?yYe(s,i,o):new RegExp(i)[t](JN(o))},function(n){var i=_Ye(this),o=JN(n),s=r(e,i,o);if(s.done)return s.value;if(!i.global)return Gie(i,o);var u=i.unicode;i.lastIndex=0;for(var h=[],y=0,w;(w=Gie(i,o))!==null;){var T=JN(w[0]);h[y]=T,T===""&&(i.lastIndex=TYe(o,wYe(i.lastIndex),u)),y++}return y===0?null:h}]})});var ioe=J(()=>{"use strict";var AYe=ht(),Zie=$n(),Jie=sv(),kYe=nC(),a2=Zy(),Yie=Na(),Qie=Fc(),mS=ai(),CYe=qn(),IYe=rc(),DYe=au(),OYe=lS(),eoe=k_(),PYe=Ed(),MYe=Ba(),LYe=Sr(),RYe=Ci(),FYe=eS(),qYe=pS(),NYe=O_(),toe=Us(),e3=Mo(),s2=RYe("matchAll"),roe="RegExp String",noe=roe+" Iterator",BYe=toe.set,zYe=toe.getterFor(noe),Xie=RegExp.prototype,jYe=TypeError,t3=Jie("".indexOf),l2=Jie("".matchAll),QN=!!l2&&!LYe(function(){l2("a",/./)}),UYe=kYe(function(e,r,n,i){BYe(this,{type:noe,regexp:e,string:r,global:n,unicode:i,done:!1})},roe,function(){var e=zYe(this);if(e.done)return a2(void 0,!0);var r=e.regexp,n=e.string,i=NYe(r,n);return i===null?(e.done=!0,a2(void 0,!0)):e.global?(mS(i[0])===""&&(r.lastIndex=qYe(n,Qie(r.lastIndex),e.unicode)),a2(i,!1)):(e.done=!0,a2(i,!1))}),r3=function(t){var e=CYe(this),r=mS(t),n=FYe(e,RegExp),i=mS(eoe(e)),o,s,u;return o=new n(n===RegExp?e.source:e,i),s=!!~t3(i,"g"),u=!!~t3(i,"u"),o.lastIndex=Qie(e.lastIndex),new UYe(o,r,s,u)};AYe({target:"String",proto:!0,forced:QN},{matchAll:function(e){var r=Yie(this),n,i,o,s;if(IYe(e)){if(QN)return l2(r,e)}else{if(OYe(e)&&(n=mS(Yie(eoe(e))),!~t3(n,"g")))throw new jYe("`.matchAll` does not allow non-global regexes");if(QN)return l2(r,e);if(o=PYe(e,s2),o===void 0&&e3&&DYe(e)==="RegExp"&&(o=r3),o)return Zie(o,e,r)}return i=mS(r),s=new RegExp(e,"g"),e3?Zie(r3,s,i):s[s2](i)}});e3||s2 in Xie||MYe(Xie,s2,r3)});var n3=J((Iqt,ooe)=>{"use strict";var VYe=wd();ooe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(VYe)});var aoe=J(()=>{"use strict";var HYe=ht(),WYe=Uw().end,$Ye=n3();HYe({target:"String",proto:!0,forced:$Ye},{padEnd:function(e){return WYe(this,e,arguments.length>1?arguments[1]:void 0)}})});var soe=J(()=>{"use strict";var GYe=ht(),KYe=Uw().start,ZYe=n3();GYe({target:"String",proto:!0,forced:ZYe},{padStart:function(e){return KYe(this,e,arguments.length>1?arguments[1]:void 0)}})});var foe=J(()=>{"use strict";var YYe=ht(),coe=qr(),XYe=xl(),JYe=mo(),loe=ai(),QYe=Vo(),uoe=coe([].push),eXe=coe([].join);YYe({target:"String",stat:!0},{raw:function(e){var r=XYe(JYe(e).raw),n=QYe(r);if(!n)return"";for(var i=arguments.length,o=[],s=0;;){if(uoe(o,loe(r[s++])),s===n)return eXe(o,"");s<i&&uoe(o,loe(arguments[s]))}}})});var hoe=J(()=>{"use strict";var tXe=ht(),rXe=jw();tXe({target:"String",proto:!0},{repeat:rXe})});var s3=J((Nqt,doe)=>{"use strict";var a3=qr(),nXe=mo(),iXe=Math.floor,i3=a3("".charAt),oXe=a3("".replace),o3=a3("".slice),aXe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,sXe=/\$([$&'`]|\d{1,2})/g;doe.exports=function(t,e,r,n,i,o){var s=r+t.length,u=n.length,h=sXe;return i!==void 0&&(i=nXe(i),h=aXe),oXe(o,h,function(y,w){var T;switch(i3(w,0)){case"$":return"$";case"&":return t;case"`":return o3(e,0,r);case"'":return o3(e,s);case"<":T=i[o3(w,1,-1)];break;default:var I=+w;if(I===0)return y;if(I>u){var P=iXe(I/10);return P===0?y:P<=u?n[P-1]===void 0?i3(w,1):n[P-1]+i3(w,1):y}T=n[I-1]}return T===void 0?"":T})}});var yoe=J(()=>{"use strict";var lXe=Uf(),poe=$n(),u2=qr(),uXe=dS(),cXe=Sr(),fXe=qn(),hXe=Wi(),dXe=rc(),pXe=ds(),mXe=Fc(),P_=ai(),gXe=Na(),vXe=pS(),yXe=Ed(),bXe=s3(),_Xe=O_(),xXe=Ci(),u3=xXe("replace"),wXe=Math.max,SXe=Math.min,EXe=u2([].concat),l3=u2([].push),moe=u2("".indexOf),goe=u2("".slice),TXe=function(t){return t===void 0?t:String(t)},AXe=function(){return"a".replace(/./,"$0")==="$0"}(),voe=function(){return/./[u3]?/./[u3]("a","$0")==="":!1}(),kXe=!cXe(function(){var t=/./;return t.exec=function(){var e=[];return e.groups={a:"7"},e},"".replace(t,"$<a>")!=="7"});uXe("replace",function(t,e,r){var n=voe?"$":"$0";return[function(o,s){var u=gXe(this),h=dXe(o)?void 0:yXe(o,u3);return h?poe(h,o,u,s):poe(e,P_(u),o,s)},function(i,o){var s=fXe(this),u=P_(i);if(typeof o=="string"&&moe(o,n)===-1&&moe(o,"$<")===-1){var h=r(e,s,u,o);if(h.done)return h.value}var y=hXe(o);y||(o=P_(o));var w=s.global,T;w&&(T=s.unicode,s.lastIndex=0);for(var I=[],P;P=_Xe(s,u),!(P===null||(l3(I,P),!w));){var L=P_(P[0]);L===""&&(s.lastIndex=vXe(u,mXe(s.lastIndex),T))}for(var R="",W=0,G=0;G<I.length;G++){P=I[G];for(var q=P_(P[0]),V=wXe(SXe(pXe(P.index),u.length),0),p=[],K,j=1;j<P.length;j++)l3(p,TXe(P[j]));var Q=P.groups;if(y){var ee=EXe([q],p,V,u);Q!==void 0&&l3(ee,Q),K=P_(lXe(o,void 0,ee))}else K=bXe(q,u,V,p,Q,o);V>=W&&(R+=goe(u,W,V)+K,W=V+q.length)}return R+goe(u,W)}]},!kXe||!AXe||voe)});var xoe=J(()=>{"use strict";var CXe=ht(),IXe=$n(),f3=qr(),boe=Na(),DXe=Wi(),OXe=rc(),PXe=lS(),M_=ai(),MXe=Ed(),LXe=k_(),RXe=s3(),FXe=Ci(),qXe=Mo(),NXe=FXe("replace"),BXe=TypeError,c3=f3("".indexOf),zXe=f3("".replace),_oe=f3("".slice),jXe=Math.max;CXe({target:"String",proto:!0},{replaceAll:function(e,r){var n=boe(this),i,o,s,u,h,y,w,T,I,P,L=0,R="";if(!OXe(e)){if(i=PXe(e),i&&(o=M_(boe(LXe(e))),!~c3(o,"g")))throw new BXe("`.replaceAll` does not allow non-global regexes");if(s=MXe(e,NXe),s)return IXe(s,e,n,r);if(qXe&&i)return zXe(M_(n),e,r)}for(u=M_(n),h=M_(e),y=DXe(r),y||(r=M_(r)),w=h.length,T=jXe(1,w),I=c3(u,h);I!==-1;)P=y?M_(r(h,I,u)):RXe(h,u,I,[],void 0,r),R+=_oe(u,L,I)+P,L=I+w,I=I+T>u.length?-1:c3(u,h,I+T);return L<u.length&&(R+=_oe(u,L)),R}})});var Eoe=J(()=>{"use strict";var UXe=$n(),VXe=dS(),HXe=qn(),WXe=rc(),$Xe=Na(),woe=jq(),Soe=ai(),GXe=Ed(),KXe=O_();VXe("search",function(t,e,r){return[function(i){var o=$Xe(this),s=WXe(i)?void 0:GXe(i,t);return s?UXe(s,i,o):new RegExp(i)[t](Soe(o))},function(n){var i=HXe(this),o=Soe(n),s=r(e,i,o);if(s.done)return s.value;var u=i.lastIndex;woe(u,0)||(i.lastIndex=0);var h=KXe(i,o);return woe(i.lastIndex,u)||(i.lastIndex=u),h===null?-1:h.index}]})});var Ioe=J(()=>{"use strict";var h3=$n(),Coe=qr(),ZXe=dS(),YXe=qn(),XXe=rc(),JXe=Na(),QXe=eS(),eJe=pS(),tJe=Fc(),Toe=ai(),rJe=Ed(),Aoe=O_(),nJe=uS(),iJe=Sr(),L_=nJe.UNSUPPORTED_Y,oJe=4294967295,aJe=Math.min,d3=Coe([].push),p3=Coe("".slice),sJe=!iJe(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),koe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;ZXe("split",function(t,e,r){var n="0".split(void 0,0).length?function(i,o){return i===void 0&&o===0?[]:h3(e,this,i,o)}:e;return[function(o,s){var u=JXe(this),h=XXe(o)?void 0:rJe(o,t);return h?h3(h,o,u,s):h3(n,Toe(u),o,s)},function(i,o){var s=YXe(this),u=Toe(i);if(!koe){var h=r(n,s,u,o,n!==e);if(h.done)return h.value}var y=QXe(s,RegExp),w=s.unicode,T=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(L_?"g":"y"),I=new y(L_?"^(?:"+s.source+")":s,T),P=o===void 0?oJe:o>>>0;if(P===0)return[];if(u.length===0)return Aoe(I,u)===null?[u]:[];for(var L=0,R=0,W=[];R<u.length;){I.lastIndex=L_?0:R;var G=Aoe(I,L_?p3(u,R):u),q;if(G===null||(q=aJe(tJe(I.lastIndex+(L_?R:0)),u.length))===L)R=eJe(u,R,w);else{if(d3(W,p3(u,L,R)),W.length===P)return W;for(var V=1;V<=G.length-1;V++)if(d3(W,G[V]),W.length===P)return W;R=L=q}}return d3(W,p3(u,L)),W}]},koe||!sJe,L_)});var Poe=J(()=>{"use strict";var lJe=ht(),uJe=sv(),cJe=Ru().f,fJe=Fc(),Doe=ai(),hJe=i2(),dJe=Na(),pJe=o2(),mJe=Mo(),gJe=uJe("".slice),vJe=Math.min,Ooe=pJe("startsWith"),yJe=!mJe&&!Ooe&&!!function(){var t=cJe(String.prototype,"startsWith");return t&&!t.writable}();lJe({target:"String",proto:!0,forced:!yJe&&!Ooe},{startsWith:function(e){var r=Doe(dJe(this));hJe(e);var n=fJe(vJe(arguments.length>1?arguments[1]:void 0,r.length)),i=Doe(e);return gJe(r,n,n+i.length)===i}})});var Loe=J(()=>{"use strict";var bJe=ht(),_Je=qr(),xJe=Na(),Moe=ds(),wJe=ai(),SJe=_Je("".slice),EJe=Math.max,TJe=Math.min,AJe=!"".substr||"ab".substr(-1)!=="b";bJe({target:"String",proto:!0,forced:AJe},{substr:function(e,r){var n=wJe(xJe(this)),i=n.length,o=Moe(e),s,u;return o===1/0&&(o=0),o<0&&(o=EJe(i+o,0)),s=r===void 0?i:Moe(r),s<=0||s===1/0?"":(u=TJe(o+s,i),o>=u?"":SJe(n,o,u))}})});var Noe=J(()=>{"use strict";var kJe=ht(),qoe=$n(),v3=qr(),CJe=Na(),IJe=ai(),DJe=Sr(),OJe=Array,m3=v3("".charAt),Roe=v3("".charCodeAt),PJe=v3([].join),g3="".toWellFormed,MJe="\uFFFD",Foe=g3&&DJe(function(){return qoe(g3,1)!=="1"});kJe({target:"String",proto:!0,forced:Foe},{toWellFormed:function(){var e=IJe(CJe(this));if(Foe)return qoe(g3,e);for(var r=e.length,n=OJe(r),i=0;i<r;i++){var o=Roe(e,i);(o&63488)!==55296?n[i]=m3(e,i):o>=56320||i+1>=r||(Roe(e,i+1)&64512)!==56320?n[i]=MJe:(n[i]=m3(e,i),n[++i]=m3(e,i))}return PJe(n,"")}})});var c2=J((Qqt,joe)=>{"use strict";var LJe=zy().PROPER,RJe=Sr(),Boe=m_(),zoe="\u200B\x85\u180E";joe.exports=function(t){return RJe(function(){return!!Boe[t]()||zoe[t]()!==zoe||LJe&&Boe[t].name!==t})}});var Uoe=J(()=>{"use strict";var FJe=ht(),qJe=nb().trim,NJe=c2();FJe({target:"String",proto:!0,forced:NJe("trim")},{trim:function(){return qJe(this)}})});var y3=J((rNt,Voe)=>{"use strict";var BJe=nb().end,zJe=c2();Voe.exports=zJe("trimEnd")?function(){return BJe(this)}:"".trimEnd});var Woe=J(()=>{"use strict";var jJe=ht(),Hoe=y3();jJe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==Hoe},{trimRight:Hoe})});var Goe=J(()=>{"use strict";Woe();var UJe=ht(),$oe=y3();UJe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==$oe},{trimEnd:$oe})});var b3=J((sNt,Koe)=>{"use strict";var VJe=nb().start,HJe=c2();Koe.exports=HJe("trimStart")?function(){return VJe(this)}:"".trimStart});var Yoe=J(()=>{"use strict";var WJe=ht(),Zoe=b3();WJe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==Zoe},{trimLeft:Zoe})});var Joe=J(()=>{"use strict";Yoe();var $Je=ht(),Xoe=b3();$Je({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==Xoe},{trimStart:Xoe})});var jc=J((hNt,eae)=>{"use strict";var GJe=qr(),KJe=Na(),Qoe=ai(),ZJe=/"/g,YJe=GJe("".replace);eae.exports=function(t,e,r,n){var i=Qoe(KJe(t)),o="<"+e;return r!==""&&(o+=" "+r+'="'+YJe(Qoe(n),ZJe,"&quot;")+'"'),o+">"+i+"</"+e+">"}});var Uc=J((dNt,tae)=>{"use strict";var XJe=Sr();tae.exports=function(t){return XJe(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})}});var rae=J(()=>{"use strict";var JJe=ht(),QJe=jc(),eQe=Uc();JJe({target:"String",proto:!0,forced:eQe("anchor")},{anchor:function(e){return QJe(this,"a","name",e)}})});var nae=J(()=>{"use strict";var tQe=ht(),rQe=jc(),nQe=Uc();tQe({target:"String",proto:!0,forced:nQe("big")},{big:function(){return rQe(this,"big","","")}})});var iae=J(()=>{"use strict";var iQe=ht(),oQe=jc(),aQe=Uc();iQe({target:"String",proto:!0,forced:aQe("blink")},{blink:function(){return oQe(this,"blink","","")}})});var oae=J(()=>{"use strict";var sQe=ht(),lQe=jc(),uQe=Uc();sQe({target:"String",proto:!0,forced:uQe("bold")},{bold:function(){return lQe(this,"b","","")}})});var aae=J(()=>{"use strict";var cQe=ht(),fQe=jc(),hQe=Uc();cQe({target:"String",proto:!0,forced:hQe("fixed")},{fixed:function(){return fQe(this,"tt","","")}})});var sae=J(()=>{"use strict";var dQe=ht(),pQe=jc(),mQe=Uc();dQe({target:"String",proto:!0,forced:mQe("fontcolor")},{fontcolor:function(e){return pQe(this,"font","color",e)}})});var lae=J(()=>{"use strict";var gQe=ht(),vQe=jc(),yQe=Uc();gQe({target:"String",proto:!0,forced:yQe("fontsize")},{fontsize:function(e){return vQe(this,"font","size",e)}})});var uae=J(()=>{"use strict";var bQe=ht(),_Qe=jc(),xQe=Uc();bQe({target:"String",proto:!0,forced:xQe("italics")},{italics:function(){return _Qe(this,"i","","")}})});var cae=J(()=>{"use strict";var wQe=ht(),SQe=jc(),EQe=Uc();wQe({target:"String",proto:!0,forced:EQe("link")},{link:function(e){return SQe(this,"a","href",e)}})});var fae=J(()=>{"use strict";var TQe=ht(),AQe=jc(),kQe=Uc();TQe({target:"String",proto:!0,forced:kQe("small")},{small:function(){return AQe(this,"small","","")}})});var hae=J(()=>{"use strict";var CQe=ht(),IQe=jc(),DQe=Uc();CQe({target:"String",proto:!0,forced:DQe("strike")},{strike:function(){return IQe(this,"strike","","")}})});var dae=J(()=>{"use strict";var OQe=ht(),PQe=jc(),MQe=Uc();OQe({target:"String",proto:!0,forced:MQe("sub")},{sub:function(){return PQe(this,"sub","","")}})});var pae=J(()=>{"use strict";var LQe=ht(),RQe=jc(),FQe=Uc();LQe({target:"String",proto:!0,forced:FQe("sup")},{sup:function(){return RQe(this,"sup","","")}})});var f2=J((zNt,gae)=>{"use strict";var mae=Jr(),_3=Sr(),qQe=Cw(),NQe=Fi().NATIVE_ARRAY_BUFFER_VIEWS,BQe=mae.ArrayBuffer,cb=mae.Int8Array;gae.exports=!NQe||!_3(function(){cb(1)})||!_3(function(){new cb(-1)})||!qQe(function(t){new cb,new cb(null),new cb(1.5),new cb(t)},!0)||_3(function(){return new cb(new BQe(2),1,void 0).length!==1})});var x3=J((jNt,vae)=>{"use strict";var zQe=AC(),jQe=RangeError;vae.exports=function(t,e){var r=zQe(t);if(r%e)throw new jQe("Wrong offset");return r}});var bae=J((UNt,yae)=>{"use strict";var UQe=Math.round;yae.exports=function(t){var e=UQe(t);return e<0?0:e>255?255:e&255}});var w3=J((VNt,_ae)=>{"use strict";var VQe=Ih();_ae.exports=function(t){var e=VQe(t);return e==="BigInt64Array"||e==="BigUint64Array"}});var h2=J((HNt,xae)=>{"use strict";var HQe=fw(),WQe=TypeError;xae.exports=function(t){var e=HQe(t,"number");if(typeof e=="number")throw new WQe("Can't convert number to bigint");return BigInt(e)}});var S3=J((WNt,wae)=>{"use strict";var $Qe=Dh(),GQe=$n(),KQe=BC(),ZQe=mo(),YQe=Vo(),XQe=Tw(),JQe=Gy(),QQe=Xk(),eet=w3(),tet=Fi().aTypedArrayConstructor,ret=h2();wae.exports=function(e){var r=KQe(this),n=ZQe(e),i=arguments.length,o=i>1?arguments[1]:void 0,s=o!==void 0,u=JQe(n),h,y,w,T,I,P,L,R;if(u&&!QQe(u))for(L=XQe(n,u),R=L.next,n=[];!(P=GQe(R,L)).done;)n.push(P.value);for(s&&i>2&&(o=$Qe(o,arguments[2])),y=YQe(n),w=new(tet(r))(y),T=eet(w),h=0;y>h;h++)I=s?o(n[h],h):n[h],w[h]=T?ret(I):+I;return w}});var zp=J(($Nt,D3)=>{"use strict";var Sae=ht(),Lae=Jr(),Eae=$n(),net=zn(),iet=f2(),bS=Fi(),Rae=zw(),Tae=Ph(),oet=zf(),gS=su(),aet=FC(),set=Fc(),Aae=qw(),E3=x3(),uet=bae(),Fae=zm(),vS=Xi(),cet=Ih(),k3=ki(),fet=iv(),het=ic(),det=nc(),d2=Ad(),pet=av().f,kae=S3(),met=zl().forEach,get=Xy(),vet=el(),qae=ts(),Nae=Ru(),Cae=Rw(),O3=Us(),yet=cv(),C3=O3.get,bet=O3.set,_et=O3.enforce,Bae=qae.f,xet=Nae.f,T3=Lae.RangeError,zae=Rae.ArrayBuffer,wet=zae.prototype,Eet=Rae.DataView,p2=bS.NATIVE_ARRAY_BUFFER_VIEWS,Iae=bS.TYPED_ARRAY_TAG,Dae=bS.TypedArray,yS=bS.TypedArrayPrototype,I3=bS.isTypedArray,m2="BYTES_PER_ELEMENT",A3="Wrong length",g2=function(t,e){vet(t,e,{configurable:!0,get:function(){return C3(this)[e]}})},Oae=function(t){var e;return det(wet,t)||(e=cet(t))==="ArrayBuffer"||e==="SharedArrayBuffer"},jae=function(t,e){return I3(t)&&!fet(e)&&e in t&&aet(+e)&&e>=0},Pae=function(e,r){return r=Fae(r),jae(e,r)?oet(2,e[r]):xet(e,r)},Mae=function(e,r,n){return r=Fae(r),jae(e,r)&&k3(n)&&vS(n,"value")&&!vS(n,"get")&&!vS(n,"set")&&!n.configurable&&(!vS(n,"writable")||n.writable)&&(!vS(n,"enumerable")||n.enumerable)?(e[r]=n.value,e):Bae(e,r,n)};net?(p2||(Nae.f=Pae,qae.f=Mae,g2(yS,"buffer"),g2(yS,"byteOffset"),g2(yS,"byteLength"),g2(yS,"length")),Sae({target:"Object",stat:!0,forced:!p2},{getOwnPropertyDescriptor:Pae,defineProperty:Mae}),D3.exports=function(t,e,r){var n=t.match(/\d+/)[0]/8,i=t+(r?"Clamped":"")+"Array",o="get"+t,s="set"+t,u=Lae[i],h=u,y=h&&h.prototype,w={},T=function(R,W){var G=C3(R);return G.view[o](W*n+G.byteOffset,!0)},I=function(R,W,G){var q=C3(R);q.view[s](W*n+q.byteOffset,r?uet(G):G,!0)},P=function(R,W){Bae(R,W,{get:function(){return T(this,W)},set:function(G){return I(this,W,G)},enumerable:!0})};p2?iet&&(h=e(function(R,W,G,q){return Tae(R,y),yet(function(){return k3(W)?Oae(W)?q!==void 0?new u(W,E3(G,n),q):G!==void 0?new u(W,E3(G,n)):new u(W):I3(W)?Cae(h,W):Eae(kae,h,W):new u(Aae(W))}(),R,h)}),d2&&d2(h,Dae),met(pet(u),function(R){R in h||gS(h,R,u[R])}),h.prototype=y):(h=e(function(R,W,G,q){Tae(R,y);var V=0,p=0,K,j,Q;if(!k3(W))Q=Aae(W),j=Q*n,K=new zae(j);else if(Oae(W)){K=W,p=E3(G,n);var ee=W.byteLength;if(q===void 0){if(ee%n)throw new T3(A3);if(j=ee-p,j<0)throw new T3(A3)}else if(j=set(q)*n,j+p>ee)throw new T3(A3);Q=j/n}else return I3(W)?Cae(h,W):Eae(kae,h,W);for(bet(R,{buffer:K,byteOffset:p,byteLength:j,length:Q,view:new Eet(K)});V<Q;)P(R,V++)}),d2&&d2(h,Dae),y=h.prototype=het(yS)),y.constructor!==h&&gS(y,"constructor",h),_et(y).TypedArrayConstructor=h,Iae&&gS(y,Iae,i);var L=h!==u;w[i]=h,Sae({global:!0,constructor:!0,forced:L,sham:!p2},w),m2 in h||gS(h,m2,n),m2 in y||gS(y,m2,n),get(i)}):D3.exports=function(){}});var Uae=J(()=>{"use strict";var Tet=zp();Tet("Float32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Vae=J(()=>{"use strict";var Aet=zp();Aet("Float64",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Hae=J(()=>{"use strict";var ket=zp();ket("Int8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Wae=J(()=>{"use strict";var Cet=zp();Cet("Int16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var $ae=J(()=>{"use strict";var Iet=zp();Iet("Int32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Gae=J(()=>{"use strict";var Det=zp();Det("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Kae=J(()=>{"use strict";var Oet=zp();Oet("Uint8",function(t){return function(r,n,i){return t(this,r,n,i)}},!0)});var Zae=J(()=>{"use strict";var Pet=zp();Pet("Uint16",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Yae=J(()=>{"use strict";var Met=zp();Met("Uint32",function(t){return function(r,n,i){return t(this,r,n,i)}})});var Jae=J(()=>{"use strict";var Xae=Fi(),Let=Vo(),Ret=ds(),Fet=Xae.aTypedArray,qet=Xae.exportTypedArrayMethod;qet("at",function(e){var r=Fet(this),n=Let(r),i=Ret(e),o=i>=0?i:n+i;return o<0||o>=n?void 0:r[o]})});var ese=J(()=>{"use strict";var Net=qr(),Qae=Fi(),Bet=HR(),zet=Net(Bet),jet=Qae.aTypedArray,Uet=Qae.exportTypedArrayMethod;Uet("copyWithin",function(e,r){return zet(jet(this),e,r,arguments.length>2?arguments[2]:void 0)})});var rse=J(()=>{"use strict";var tse=Fi(),Vet=zl().every,Het=tse.aTypedArray,Wet=tse.exportTypedArrayMethod;Wet("every",function(e){return Vet(Het(this),e,arguments.length>1?arguments[1]:void 0)})});var ise=J(()=>{"use strict";var nse=Fi(),$et=tC(),Get=h2(),Ket=Ih(),Zet=$n(),Yet=qr(),Xet=Sr(),Jet=nse.aTypedArray,Qet=nse.exportTypedArrayMethod,ett=Yet("".slice),ttt=Xet(function(){var t=0;return new Int8Array(2).fill({valueOf:function(){return t++}}),t!==1});Qet("fill",function(e){var r=arguments.length;Jet(this);var n=ett(Ket(this),0,3)==="Big"?Get(e):+e;return Zet($et,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},ttt)});var ase=J((b3t,ose)=>{"use strict";var rtt=Rw(),ntt=Fi().getTypedArrayConstructor;ose.exports=function(t,e){return rtt(ntt(t),e)}});var lse=J(()=>{"use strict";var sse=Fi(),itt=zl().filter,ott=ase(),att=sse.aTypedArray,stt=sse.exportTypedArrayMethod;stt("filter",function(e){var r=itt(att(this),e,arguments.length>1?arguments[1]:void 0);return ott(this,r)})});var cse=J(()=>{"use strict";var use=Fi(),ltt=zl().find,utt=use.aTypedArray,ctt=use.exportTypedArrayMethod;ctt("find",function(e){return ltt(utt(this),e,arguments.length>1?arguments[1]:void 0)})});var hse=J(()=>{"use strict";var fse=Fi(),ftt=zl().findIndex,htt=fse.aTypedArray,dtt=fse.exportTypedArrayMethod;dtt("findIndex",function(e){return ftt(htt(this),e,arguments.length>1?arguments[1]:void 0)})});var pse=J(()=>{"use strict";var dse=Fi(),ptt=kw().findLast,mtt=dse.aTypedArray,gtt=dse.exportTypedArrayMethod;gtt("findLast",function(e){return ptt(mtt(this),e,arguments.length>1?arguments[1]:void 0)})});var gse=J(()=>{"use strict";var mse=Fi(),vtt=kw().findLastIndex,ytt=mse.aTypedArray,btt=mse.exportTypedArrayMethod;btt("findLastIndex",function(e){return vtt(ytt(this),e,arguments.length>1?arguments[1]:void 0)})});var yse=J(()=>{"use strict";var vse=Fi(),_tt=zl().forEach,xtt=vse.aTypedArray,wtt=vse.exportTypedArrayMethod;wtt("forEach",function(e){_tt(xtt(this),e,arguments.length>1?arguments[1]:void 0)})});var bse=J(()=>{"use strict";var Stt=f2(),Ett=Fi().exportTypedArrayStaticMethod,Ttt=S3();Ett("from",Ttt,Stt)});var xse=J(()=>{"use strict";var _se=Fi(),Att=X0().includes,ktt=_se.aTypedArray,Ctt=_se.exportTypedArrayMethod;Ctt("includes",function(e){return Att(ktt(this),e,arguments.length>1?arguments[1]:void 0)})});var Sse=J(()=>{"use strict";var wse=Fi(),Itt=X0().indexOf,Dtt=wse.aTypedArray,Ott=wse.exportTypedArrayMethod;Ott("indexOf",function(e){return Itt(Dtt(this),e,arguments.length>1?arguments[1]:void 0)})});var Cse=J(()=>{"use strict";var Ptt=Jr(),Mtt=Sr(),P3=qr(),Tse=Fi(),M3=Ow(),Ltt=Ci(),L3=Ltt("iterator"),Ese=Ptt.Uint8Array,Rtt=P3(M3.values),Ftt=P3(M3.keys),qtt=P3(M3.entries),R3=Tse.aTypedArray,v2=Tse.exportTypedArrayMethod,R_=Ese&&Ese.prototype,y2=!Mtt(function(){R_[L3].call([1])}),Ase=!!R_&&R_.values&&R_[L3]===R_.values&&R_.values.name==="values",kse=function(){return Rtt(R3(this))};v2("entries",function(){return qtt(R3(this))},y2);v2("keys",function(){return Ftt(R3(this))},y2);v2("values",kse,y2||!Ase,{name:"values"});v2(L3,kse,y2||!Ase,{name:"values"})});var Dse=J(()=>{"use strict";var Ise=Fi(),Ntt=qr(),Btt=Ise.aTypedArray,ztt=Ise.exportTypedArrayMethod,jtt=Ntt([].join);ztt("join",function(e){return jtt(Btt(this),e)})});var Pse=J(()=>{"use strict";var Ose=Fi(),Utt=Uf(),Vtt=iF(),Htt=Ose.aTypedArray,Wtt=Ose.exportTypedArrayMethod;Wtt("lastIndexOf",function(e){var r=arguments.length;return Utt(Vtt,Htt(this),r>1?[e,arguments[1]]:[e])})});var Mse=J(()=>{"use strict";var F3=Fi(),$tt=zl().map,Gtt=F3.aTypedArray,Ktt=F3.getTypedArrayConstructor,Ztt=F3.exportTypedArrayMethod;Ztt("map",function(e){return $tt(Gtt(this),e,arguments.length>1?arguments[1]:void 0,function(r,n){return new(Ktt(r))(n)})})});var Rse=J(()=>{"use strict";var Lse=Fi(),Ytt=f2(),Xtt=Lse.aTypedArrayConstructor,Jtt=Lse.exportTypedArrayStaticMethod;Jtt("of",function(){for(var e=0,r=arguments.length,n=new(Xtt(this))(r);r>e;)n[e]=arguments[e++];return n},Ytt)});var qse=J(()=>{"use strict";var Fse=Fi(),Qtt=Pw().left,ert=Fse.aTypedArray,trt=Fse.exportTypedArrayMethod;trt("reduce",function(e){var r=arguments.length;return Qtt(ert(this),e,r,r>1?arguments[1]:void 0)})});var Bse=J(()=>{"use strict";var Nse=Fi(),rrt=Pw().right,nrt=Nse.aTypedArray,irt=Nse.exportTypedArrayMethod;irt("reduceRight",function(e){var r=arguments.length;return rrt(nrt(this),e,r,r>1?arguments[1]:void 0)})});var jse=J(()=>{"use strict";var zse=Fi(),ort=zse.aTypedArray,art=zse.exportTypedArrayMethod,srt=Math.floor;art("reverse",function(){for(var e=this,r=ort(e).length,n=srt(r/2),i=0,o;i<n;)o=e[i],e[i++]=e[--r],e[r]=o;return e})});var Gse=J(()=>{"use strict";var Vse=Jr(),Hse=$n(),B3=Fi(),lrt=Vo(),urt=x3(),crt=mo(),Wse=Sr(),frt=Vse.RangeError,q3=Vse.Int8Array,Use=q3&&q3.prototype,$se=Use&&Use.set,hrt=B3.aTypedArray,drt=B3.exportTypedArrayMethod,N3=!Wse(function(){var t=new Uint8ClampedArray(2);return Hse($se,t,{length:1,0:3},1),t[1]!==3}),prt=N3&&B3.NATIVE_ARRAY_BUFFER_VIEWS&&Wse(function(){var t=new q3(2);return t.set(1),t.set("2",1),t[0]!==0||t[1]!==2});drt("set",function(e){hrt(this);var r=urt(arguments.length>1?arguments[1]:void 0,1),n=crt(e);if(N3)return Hse($se,this,n,r);var i=this.length,o=lrt(n),s=0;if(o+r>i)throw new frt("Wrong length");for(;s<o;)this[r+s]=n[s++]},!N3||prt)});var Kse=J(()=>{"use strict";var z3=Fi(),mrt=Sr(),grt=jf(),vrt=z3.aTypedArray,yrt=z3.getTypedArrayConstructor,brt=z3.exportTypedArrayMethod,_rt=mrt(function(){new Int8Array(1).slice()});brt("slice",function(e,r){for(var n=grt(vrt(this),e,r),i=yrt(this),o=0,s=n.length,u=new i(s);s>o;)u[o]=n[o++];return u},_rt)});var Yse=J(()=>{"use strict";var Zse=Fi(),xrt=zl().some,wrt=Zse.aTypedArray,Srt=Zse.exportTypedArrayMethod;Srt("some",function(e){return xrt(wrt(this),e,arguments.length>1?arguments[1]:void 0)})});var rle=J(()=>{"use strict";var Ert=Jr(),Trt=sv(),j3=Sr(),Art=no(),krt=cC(),tle=Fi(),Xse=sF(),Crt=lF(),Jse=Dp(),Qse=fC(),Irt=tle.aTypedArray,Drt=tle.exportTypedArrayMethod,_S=Ert.Uint16Array,F_=_S&&Trt(_S.prototype.sort),Ort=!!F_&&!(j3(function(){F_(new _S(2),null)})&&j3(function(){F_(new _S(2),{})})),ele=!!F_&&!j3(function(){if(Jse)return Jse<74;if(Xse)return Xse<67;if(Crt)return!0;if(Qse)return Qse<602;var t=new _S(516),e=Array(516),r,n;for(r=0;r<516;r++)n=r%4,t[r]=515-r,e[r]=r-2*n+3;for(F_(t,function(i,o){return(i/4|0)-(o/4|0)}),r=0;r<516;r++)if(t[r]!==e[r])return!0}),Prt=function(t){return function(e,r){return t!==void 0?+t(e,r)||0:r!==r?-1:e!==e?1:e===0&&r===0?1/e>0&&1/r<0?1:-1:e>r}};Drt("sort",function(e){return e!==void 0&&Art(e),ele?F_(this,e):krt(Irt(this),Prt(e))},!ele||Ort)});var ile=J(()=>{"use strict";var U3=Fi(),Mrt=Fc(),nle=Op(),Lrt=U3.aTypedArray,Rrt=U3.getTypedArrayConstructor,Frt=U3.exportTypedArrayMethod;Frt("subarray",function(e,r){var n=Lrt(this),i=n.length,o=nle(e,i),s=Rrt(n);return new s(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,Mrt((r===void 0?i:nle(r,i))-o))})});var ule=J(()=>{"use strict";var qrt=Jr(),Nrt=Uf(),sle=Fi(),V3=Sr(),ole=jf(),b2=qrt.Int8Array,ale=sle.aTypedArray,Brt=sle.exportTypedArrayMethod,lle=[].toLocaleString,zrt=!!b2&&V3(function(){lle.call(new b2(1))}),jrt=V3(function(){return[1,2].toLocaleString()!==new b2([1,2]).toLocaleString()})||!V3(function(){b2.prototype.toLocaleString.call([1,2])});Brt("toLocaleString",function(){return Nrt(lle,zrt?ole(ale(this)):ale(this),ole(arguments))},jrt)});var cle=J(()=>{"use strict";var Urt=fF(),H3=Fi(),Vrt=H3.aTypedArray,Hrt=H3.exportTypedArrayMethod,Wrt=H3.getTypedArrayConstructor;Hrt("toReversed",function(){return Urt(Vrt(this),Wrt(this))})});var fle=J(()=>{"use strict";var _2=Fi(),$rt=qr(),Grt=no(),Krt=Rw(),Zrt=_2.aTypedArray,Yrt=_2.getTypedArrayConstructor,Xrt=_2.exportTypedArrayMethod,Jrt=$rt(_2.TypedArrayPrototype.sort);Xrt("toSorted",function(e){e!==void 0&&Grt(e);var r=Zrt(this),n=Krt(Yrt(r),r);return Jrt(n,e)})});var dle=J(()=>{"use strict";var Qrt=Fi().exportTypedArrayMethod,ent=Sr(),tnt=Jr(),rnt=qr(),hle=tnt.Uint8Array,nnt=hle&&hle.prototype||{},x2=[].toString,int=rnt([].join);ent(function(){x2.call({})})&&(x2=function(){return int(this)});var ont=nnt.toString!==x2;Qrt("toString",x2,ont)});var ple=J(()=>{"use strict";var ant=hF(),W3=Fi(),snt=w3(),lnt=ds(),unt=h2(),cnt=W3.aTypedArray,fnt=W3.getTypedArrayConstructor,hnt=W3.exportTypedArrayMethod,dnt=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(t){return t===8}}();hnt("with",function(t,e){var r=cnt(this),n=lnt(t),i=snt(r)?unt(e):+e;return ant(r,fnt(r),n,i)},!dnt)});var ble=J(()=>{"use strict";var pnt=ht(),$3=qr(),mnt=ai(),mle=String.fromCharCode,gle=$3("".charAt),vle=$3(/./.exec),yle=$3("".slice),gnt=/^[\da-f]{2}$/i,vnt=/^[\da-f]{4}$/i;pnt({global:!0},{unescape:function(e){for(var r=mnt(e),n="",i=r.length,o=0,s,u;o<i;){if(s=gle(r,o++),s==="%"){if(gle(r,o)==="u"){if(u=yle(r,o+1,o+5),vle(vnt,u)){n+=mle(parseInt(u,16)),o+=5;continue}}else if(u=yle(r,o,o+2),vle(gnt,u)){n+=mle(parseInt(u,16)),o+=2;continue}}n+=s}return n}})});var Z3=J((wBt,Tle)=>{"use strict";var ynt=qr(),_le=Jy(),w2=yv().getWeakData,bnt=Ph(),_nt=qn(),xnt=rc(),G3=ki(),wnt=wl(),wle=zl(),xle=Xi(),Sle=Us(),Snt=Sle.set,Ent=Sle.getterFor,Tnt=wle.find,Ant=wle.findIndex,knt=ynt([].splice),Cnt=0,S2=function(t){return t.frozen||(t.frozen=new Ele)},Ele=function(){this.entries=[]},K3=function(t,e){return Tnt(t.entries,function(r){return r[0]===e})};Ele.prototype={get:function(t){var e=K3(this,t);if(e)return e[1]},has:function(t){return!!K3(this,t)},set:function(t,e){var r=K3(this,t);r?r[1]=e:this.entries.push([t,e])},delete:function(t){var e=Ant(this.entries,function(r){return r[0]===t});return~e&&knt(this.entries,e,1),!!~e}};Tle.exports={getConstructor:function(t,e,r,n){var i=t(function(h,y){bnt(h,o),Snt(h,{type:e,id:Cnt++,frozen:null}),xnt(y)||wnt(y,h[n],{that:h,AS_ENTRIES:r})}),o=i.prototype,s=Ent(e),u=function(h,y,w){var T=s(h),I=w2(_nt(y),!0);return I===!0?S2(T).set(y,w):I[T.id]=w,h};return _le(o,{delete:function(h){var y=s(this);if(!G3(h))return!1;var w=w2(h);return w===!0?S2(y).delete(h):w&&xle(w,y.id)&&delete w[y.id]},has:function(y){var w=s(this);if(!G3(y))return!1;var T=w2(y);return T===!0?S2(w).has(y):T&&xle(T,w.id)}}),_le(o,r?{get:function(y){var w=s(this);if(G3(y)){var T=w2(y);if(T===!0)return S2(w).get(y);if(T)return T[w.id]}},set:function(y,w){return u(this,y,w)}}:{add:function(y){return u(this,y,!0)}}),i}}});var Mle=J(()=>{"use strict";var Int=rb(),Ale=Jr(),k2=qr(),kle=Jy(),Dnt=yv(),Ont=Hw(),Cle=Z3(),E2=ki(),T2=Us().enforce,Pnt=Sr(),Mnt=KL(),SS=Object,Lnt=Array.isArray,A2=SS.isExtensible,Ile=SS.isFrozen,Rnt=SS.isSealed,Dle=SS.freeze,Fnt=SS.seal,qnt=!Ale.ActiveXObject&&"ActiveXObject"in Ale,xS,Ole=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ple=Ont("WeakMap",Ole,Cle),q_=Ple.prototype,C2=k2(q_.set),Nnt=function(){return Int&&Pnt(function(){var t=Dle([]);return C2(new Ple,t,1),!Ile(t)})};Mnt&&(qnt?(xS=Cle.getConstructor(Ole,"WeakMap",!0),Dnt.enable(),Y3=k2(q_.delete),wS=k2(q_.has),X3=k2(q_.get),kle(q_,{delete:function(t){if(E2(t)&&!A2(t)){var e=T2(this);return e.frozen||(e.frozen=new xS),Y3(this,t)||e.frozen.delete(t)}return Y3(this,t)},has:function(e){if(E2(e)&&!A2(e)){var r=T2(this);return r.frozen||(r.frozen=new xS),wS(this,e)||r.frozen.has(e)}return wS(this,e)},get:function(e){if(E2(e)&&!A2(e)){var r=T2(this);return r.frozen||(r.frozen=new xS),wS(this,e)?X3(this,e):r.frozen.get(e)}return X3(this,e)},set:function(e,r){if(E2(e)&&!A2(e)){var n=T2(this);n.frozen||(n.frozen=new xS),wS(this,e)?C2(this,e,r):n.frozen.set(e,r)}else C2(this,e,r);return this}})):Nnt()&&kle(q_,{set:function(e,r){var n;return Lnt(e)&&(Ile(e)?n=Dle:Rnt(e)&&(n=Fnt)),C2(this,e,r),n&&n(e),this}}));var Y3,wS,X3});var Lle=J(()=>{"use strict";Mle()});var Rle=J(()=>{"use strict";var Bnt=Hw(),znt=Z3();Bnt("WeakSet",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},znt)});var Fle=J(()=>{"use strict";Rle()});var J3=J((OBt,jle)=>{"use strict";var zle="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",qle=zle+"+/",Nle=zle+"-_",Ble=function(t){for(var e={},r=0;r<64;r++)e[t.charAt(r)]=r;return e};jle.exports={i2c:qle,c2i:Ble(qle),i2cUrl:Nle,c2iUrl:Ble(Nle)}});var Kle=J(()=>{"use strict";var jnt=ht(),Unt=Jr(),Hle=Uo(),Q3=qr(),Vnt=$n(),I2=Sr(),Hnt=ai(),Wnt=Hf(),Ule=J3().c2i,Wle=/[^\d+/a-z]/i,$nt=/[\t\n\f\r ]+/g,Gnt=/[=]{1,2}$/,fb=Hle("atob"),Knt=String.fromCharCode,Znt=Q3("".charAt),Vle=Q3("".replace),Ynt=Q3(Wle.exec),N_=!!fb&&!I2(function(){return fb("aGk=")!=="hi"}),$le=N_&&I2(function(){return fb(" ")!==""}),Gle=N_&&!I2(function(){fb("a")}),Xnt=N_&&!I2(function(){fb()}),Jnt=N_&&fb.length!==1,Qnt=!N_||$le||Gle||Xnt||Jnt;jnt({global:!0,bind:!0,enumerable:!0,forced:Qnt},{atob:function(e){if(Wnt(arguments.length,1),N_&&!$le&&!Gle)return Vnt(fb,Unt,e);var r=Vle(Hnt(e),$nt,""),n="",i=0,o=0,s,u,h;if(r.length%4===0&&(r=Vle(r,Gnt,"")),s=r.length,s%4===1||Ynt(Wle,r))throw new(Hle("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;i<s;)u=Znt(r,i++),h=o%4?h*64+Ule[u]:Ule[u],o++%4&&(n+=Knt(255&h>>(-2*o&6)));return n}})});var Qle=J(()=>{"use strict";var eit=ht(),tit=Jr(),Xle=Uo(),Jle=qr(),rit=$n(),eB=Sr(),Zle=ai(),nit=Hf(),iit=J3().i2c,B_=Xle("btoa"),Yle=Jle("".charAt),oit=Jle("".charCodeAt),ES=!!B_&&!eB(function(){return B_("hi")!=="aGk="}),ait=ES&&!eB(function(){B_()}),sit=ES&&eB(function(){return B_(null)!=="bnVsbA=="}),lit=ES&&B_.length!==1;eit({global:!0,bind:!0,enumerable:!0,forced:!ES||ait||sit||lit},{btoa:function(e){if(nit(arguments.length,1),ES)return rit(B_,tit,Zle(e));for(var r=Zle(e),n="",i=0,o=iit,s,u;Yle(r,i)||(o="=",i%1);){if(u=oit(r,i+=3/4),u>255)throw new(Xle("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");s=s<<8|u,n+=Yle(o,63&s>>8-i%1*8)}return n}})});var tB=J((FBt,eue)=>{"use strict";eue.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var nB=J((qBt,rue)=>{"use strict";var uit=hw(),rB=uit("span").classList,tue=rB&&rB.constructor&&rB.constructor.prototype;rue.exports=tue===Object.prototype?void 0:tue});var aue=J(()=>{"use strict";var nue=Jr(),iue=tB(),cit=nB(),iB=KR(),fit=su(),oue=function(t){if(t&&t.forEach!==iB)try{fit(t,"forEach",iB)}catch{t.forEach=iB}};for(D2 in iue)iue[D2]&&oue(nue[D2]&&nue[D2].prototype);var D2;oue(cit)});var fue=J(()=>{"use strict";var sue=Jr(),uue=tB(),hit=nB(),TS=Ow(),lue=su(),dit=ac(),pit=Ci(),oB=pit("iterator"),aB=TS.values,cue=function(t,e){if(t){if(t[oB]!==aB)try{lue(t,oB,aB)}catch{t[oB]=aB}if(dit(t,e,!0),uue[e]){for(var r in TS)if(t[r]!==TS[r])try{lue(t,r,TS[r])}catch{t[r]=TS[r]}}}};for(O2 in uue)cue(sue[O2]&&sue[O2].prototype,O2);var O2;cue(hit,"DOMTokenList")});var sB=J((UBt,hue)=>{"use strict";hue.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Sue=J(()=>{"use strict";var mit=ht(),L2=Uo(),git=qF(),dB=Sr(),vit=ic(),pB=zf(),R2=ts().f,yit=Ba(),P2=el(),M2=Xi(),bit=Ph(),_it=qn(),mue=RR(),due=o_(),z_=sB(),xit=Gk(),gue=Us(),mB=zn(),vue=Mo(),j_="DOMException",hB="DATA_CLONE_ERR",q2=L2("Error"),Ym=L2(j_)||function(){try{var t=L2("MessageChannel")||git("worker_threads").MessageChannel;new t().port1.postMessage(new WeakMap)}catch(e){if(e.name===hB&&e.code===25)return e.constructor}}(),wit=Ym&&Ym.prototype,yue=q2.prototype,Sit=gue.set,Eit=gue.getterFor(j_),Tit="stack"in new q2(j_),bue=function(t){return M2(z_,t)&&z_[t].m?z_[t].c:0},gB=function(){bit(this,kS);var e=arguments.length,r=due(e<1?void 0:arguments[0]),n=due(e<2?void 0:arguments[1],"Error"),i=bue(n);if(Sit(this,{type:j_,name:n,message:r,code:i}),mB||(this.name=n,this.message=r,this.code=i),Tit){var o=new q2(r);o.name=j_,R2(this,"stack",pB(1,xit(o.stack,1)))}},kS=gB.prototype=vit(yue),_ue=function(t){return{enumerable:!0,configurable:!0,get:t}},lB=function(t){return _ue(function(){return Eit(this)[t]})};mB&&(P2(kS,"code",lB("code")),P2(kS,"message",lB("message")),P2(kS,"name",lB("name")));R2(kS,"constructor",pB(1,gB));var N2=dB(function(){return!(new Ym instanceof q2)}),xue=N2||dB(function(){return yue.toString!==mue||String(new Ym(1,2))!=="2: 1"}),wue=N2||dB(function(){return new Ym(1,"DataCloneError").code!==25}),Ait=N2||Ym[hB]!==25||wit[hB]!==25,pue=vue?xue||wue||Ait:N2;mit({global:!0,constructor:!0,forced:pue},{DOMException:pue?gB:Ym});var CS=L2(j_),F2=CS.prototype;xue&&(vue||Ym===CS)&&yit(F2,"toString",mue);wue&&mB&&Ym===CS&&P2(F2,"code",_ue(function(){return bue(_it(this).name)}));for(uB in z_)M2(z_,uB)&&(cB=z_[uB],AS=cB.s,fB=pB(6,cB.c),M2(CS,AS)||R2(CS,AS,fB),M2(F2,AS)||R2(F2,AS,fB));var cB,AS,fB,uB});var Due=J(()=>{"use strict";var kit=ht(),Cit=Jr(),EB=Uo(),wB=zf(),SB=ts().f,Eue=Xi(),Iit=Ph(),Dit=cv(),Tue=o_(),vB=sB(),Oit=Gk(),Pit=zn(),Cue=Mo(),DS="DOMException",Iue=EB("Error"),OS=EB(DS),TB=function(){Iit(this,Mit);var e=arguments.length,r=Tue(e<1?void 0:arguments[0]),n=Tue(e<2?void 0:arguments[1],"Error"),i=new OS(r,n),o=new Iue(r);return o.name=DS,SB(i,"stack",wB(1,Oit(o.stack,1))),Dit(i,this,TB),i},Mit=TB.prototype=OS.prototype,Lit="stack"in new Iue(DS),Rit="stack"in new OS(1,2),yB=OS&&Pit&&Object.getOwnPropertyDescriptor(Cit,DS),Fit=!!yB&&!(yB.writable&&yB.configurable),Aue=Lit&&!Fit&&!Rit;kit({global:!0,constructor:!0,forced:Cue||Aue},{DOMException:Aue?TB:OS});var IS=EB(DS),kue=IS.prototype;if(kue.constructor!==IS){Cue||SB(kue,"constructor",wB(1,IS));for(bB in vB)Eue(vB,bB)&&(_B=vB[bB],xB=_B.s,Eue(IS,xB)||SB(IS,xB,wB(6,_B.c)))}var _B,xB,bB});var Pue=J(()=>{"use strict";var qit=Uo(),Nit=ac(),Oue="DOMException";Nit(qit(Oue),Oue)});var Lue=J(()=>{"use strict";var Bit=ht(),zit=Jr(),Mue=nS().clear;Bit({global:!0,bind:!0,enumerable:!0,forced:zit.clearImmediate!==Mue},{clearImmediate:Mue})});var B2=J((XBt,Fue)=>{"use strict";var Rue=Jr(),jit=Uf(),Uit=Wi(),Vit=Lw(),Hit=wd(),Wit=jf(),$it=Hf(),Git=Rue.Function,Kit=/MSIE .\./.test(Hit)||Vit==="BUN"&&function(){var t=Rue.Bun.version.split(".");return t.length<3||t[0]==="0"&&(t[1]<3||t[1]==="3"&&t[2]==="0")}();Fue.exports=function(t,e){var r=e?2:1;return Kit?function(n,i){var o=$it(arguments.length,1)>r,s=Uit(n)?n:Git(n),u=o?Wit(arguments,r):[],h=o?function(){jit(s,this,u)}:s;return e?t(h,i):t(h)}:t}});var zue=J(()=>{"use strict";var Zit=ht(),Bue=Jr(),que=nS().set,Yit=B2(),Nue=Bue.setImmediate?Yit(que,!1):que;Zit({global:!0,bind:!0,enumerable:!0,forced:Bue.setImmediate!==Nue},{setImmediate:Nue})});var jue=J(()=>{"use strict";Lue();zue()});var Uue=J(()=>{"use strict";var Xit=ht(),Jit=Jr(),Qit=lN(),eot=no(),tot=Hf(),rot=Sr(),not=zn(),iot=rot(function(){return not&&Object.getOwnPropertyDescriptor(Jit,"queueMicrotask").value.length!==1});Xit({global:!0,enumerable:!0,dontCallGetSet:!0,forced:iot},{queueMicrotask:function(e){tot(arguments.length,1),Qit(eot(e))}})});var Hue=J(()=>{"use strict";var oot=ht(),Av=Jr(),aot=el(),sot=zn(),lot=TypeError,uot=Object.defineProperty,Vue=Av.self!==Av;try{sot?(z2=Object.getOwnPropertyDescriptor(Av,"self"),(Vue||!z2||!z2.get||!z2.enumerable)&&aot(Av,"self",{get:function(){return Av},set:function(e){if(this!==Av)throw new lot("Illegal invocation");uot(Av,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):oot({global:!0,simple:!0,forced:Vue},{self:Av})}catch{}var z2});var tce=J(()=>{"use strict";var cot=Mo(),fot=ht(),uu=Jr(),MS=Uo(),RS=qr(),OB=Sr(),hot=By(),V_=Wi(),dot=Uy(),pot=rc(),W2=ki(),mot=iv(),got=wl(),Gue=qn(),V2=Ih(),vot=Xi(),yot=Mp(),AB=su(),j2=Vo(),bot=Hf(),_ot=k_(),$2=bq(),PB=Mh(),xot=ub(),Wue=HF(),wot=DR(),MB=SC(),PS=uu.Object,Sot=uu.Array,Kue=uu.Date,Zue=uu.Error,Eot=uu.TypeError,Tot=uu.PerformanceMark,hb=MS("DOMException"),IB=$2.Map,LB=$2.has,Yue=$2.get,H2=$2.set,Xue=PB.Set,Jue=PB.add,Aot=PB.has,kot=MS("Object","keys"),Cot=RS([].push),Iot=RS((!0).valueOf),Dot=RS(1 .valueOf),Oot=RS("".valueOf),Pot=RS(Kue.prototype.getTime),DB=hot("structuredClone"),LS="DataCloneError",U2="Transferring",Que=function(t){return!OB(function(){var e=new uu.Set([7]),r=t(e),n=t(PS(7));return r===e||!r.has(7)||!W2(n)||+n!=7})&&t},$ue=function(t,e){return!OB(function(){var r=new e,n=t({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof e&&n.a.stack===r.stack)})},Mot=function(t){return!OB(function(){var e=t(new uu.AggregateError([1],DB,{cause:3}));return e.name!=="AggregateError"||e.errors[0]!==1||e.message!==DB||e.cause!==3})},U_=uu.structuredClone,Lot=cot||!$ue(U_,Zue)||!$ue(U_,hb)||!Mot(U_),Rot=!U_&&Que(function(t){return new Tot(DB,{detail:t}).detail}),Xm=Que(U_)||Rot,kB=function(t){throw new hb("Uncloneable type: "+t,LS)},Vc=function(t,e){throw new hb((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",LS)},CB=function(t,e){return Xm||Vc(e),Xm(t)},Fot=function(){var t;try{t=new uu.DataTransfer}catch{try{t=new uu.ClipboardEvent("").clipboardData}catch{}}return t&&t.items&&t.files?t:null},ece=function(t,e,r){if(LB(e,t))return Yue(e,t);var n=r||V2(t),i,o,s,u,h,y;if(n==="SharedArrayBuffer")Xm?i=Xm(t):i=t;else{var w=uu.DataView;!w&&!V_(t.slice)&&Vc("ArrayBuffer");try{if(V_(t.slice)&&!t.resizable)i=t.slice(0);else for(o=t.byteLength,s=("maxByteLength"in t)?{maxByteLength:t.maxByteLength}:void 0,i=new ArrayBuffer(o,s),u=new w(t),h=new w(i),y=0;y<o;y++)h.setUint8(y,u.getUint8(y))}catch{throw new hb("ArrayBuffer is detached",LS)}}return H2(e,t,i),i},qot=function(t,e,r,n,i){var o=uu[e];return W2(o)||Vc(e),new o(ece(t.buffer,i),r,n)},lu=function(t,e){if(mot(t)&&kB("Symbol"),!W2(t))return t;if(e){if(LB(e,t))return Yue(e,t)}else e=new IB;var r=V2(t),n,i,o,s,u,h,y,w;switch(r){case"Array":o=Sot(j2(t));break;case"Object":o={};break;case"Map":o=new IB;break;case"Set":o=new Xue;break;case"RegExp":o=new RegExp(t.source,_ot(t));break;case"Error":switch(i=t.name,i){case"AggregateError":o=new(MS(i))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(MS(i));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(MS("WebAssembly",i));break;default:o=new Zue}break;case"DOMException":o=new hb(t.message,t.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=ece(t,e,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":h=r==="DataView"?t.byteLength:t.length,o=qot(t,r,t.byteOffset,h,e);break;case"DOMQuad":try{o=new DOMQuad(lu(t.p1,e),lu(t.p2,e),lu(t.p3,e),lu(t.p4,e))}catch{o=CB(t,r)}break;case"File":if(Xm)try{o=Xm(t),V2(o)!==r&&(o=void 0)}catch{}if(!o)try{o=new File([t],t.name,t)}catch{}o||Vc(r);break;case"FileList":if(s=Fot(),s){for(u=0,h=j2(t);u<h;u++)s.items.add(lu(t[u],e));o=s.files}else o=CB(t,r);break;case"ImageData":try{o=new ImageData(lu(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch{o=CB(t,r)}break;default:if(Xm)o=Xm(t);else switch(r){case"BigInt":o=PS(t.valueOf());break;case"Boolean":o=PS(Iot(t));break;case"Number":o=PS(Dot(t));break;case"String":o=PS(Oot(t));break;case"Date":o=new Kue(Pot(t));break;case"Blob":try{o=t.slice(0,t.size,t.type)}catch{Vc(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=uu[r];try{o=n.fromPoint?n.fromPoint(t):new n(t.x,t.y,t.z,t.w)}catch{Vc(r)}break;case"DOMRect":case"DOMRectReadOnly":n=uu[r];try{o=n.fromRect?n.fromRect(t):new n(t.x,t.y,t.width,t.height)}catch{Vc(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=uu[r];try{o=n.fromMatrix?n.fromMatrix(t):new n(t)}catch{Vc(r)}break;case"AudioData":case"VideoFrame":V_(t.clone)||Vc(r);try{o=t.clone()}catch{kB(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Vc(r);default:kB(r)}}switch(H2(e,t,o),r){case"Array":case"Object":for(y=kot(t),u=0,h=j2(y);u<h;u++)w=y[u],yot(o,w,lu(t[w],e));break;case"Map":t.forEach(function(T,I){H2(o,lu(I,e),lu(T,e))});break;case"Set":t.forEach(function(T){Jue(o,lu(T,e))});break;case"Error":AB(o,"message",lu(t.message,e)),vot(t,"cause")&&AB(o,"cause",lu(t.cause,e)),i==="AggregateError"?o.errors=lu(t.errors,e):i==="SuppressedError"&&(o.error=lu(t.error,e),o.suppressed=lu(t.suppressed,e));case"DOMException":wot&&AB(o,"stack",lu(t.stack,e))}return o},Not=function(t,e){if(!W2(t))throw new Eot("Transfer option cannot be converted to a sequence");var r=[];got(t,function(I){Cot(r,Gue(I))});for(var n=0,i=j2(r),o=new Xue,s,u,h,y,w,T;n<i;){if(s=r[n++],u=V2(s),u==="ArrayBuffer"?Aot(o,s):LB(e,s))throw new hb("Duplicate transferable",LS);if(u==="ArrayBuffer"){Jue(o,s);continue}if(MB)y=U_(s,{transfer:[s]});else switch(u){case"ImageBitmap":h=uu.OffscreenCanvas,dot(h)||Vc(u,U2);try{w=new h(s.width,s.height),T=w.getContext("bitmaprenderer"),T.transferFromImageBitmap(s),y=w.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!V_(s.clone)||!V_(s.close))&&Vc(u,U2);try{y=s.clone(),s.close()}catch{}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":Vc(u,U2)}if(y===void 0)throw new hb("This object cannot be transferred: "+u,LS);H2(e,s,y)}return o},Bot=function(t){xot(t,function(e){MB?Xm(e,{transfer:[e]}):V_(e.transfer)?e.transfer():Wue?Wue(e):Vc("ArrayBuffer",U2)})};fot({global:!0,enumerable:!0,sham:!MB,forced:Lot},{structuredClone:function(e){var r=bot(arguments.length,1)>1&&!pot(arguments[1])?Gue(arguments[1]):void 0,n=r?r.transfer:void 0,i,o;n!==void 0&&(i=new IB,o=Not(n,i));var s=lu(e,i);return o&&Bot(o),s}})});var ice=J(()=>{"use strict";var zot=ht(),nce=Jr(),jot=B2(),rce=jot(nce.setInterval,!0);zot({global:!0,bind:!0,forced:nce.setInterval!==rce},{setInterval:rce})});var sce=J(()=>{"use strict";var Uot=ht(),ace=Jr(),Vot=B2(),oce=Vot(ace.setTimeout,!0);Uot({global:!0,bind:!0,forced:ace.setTimeout!==oce},{setTimeout:oce})});var lce=J(()=>{"use strict";ice();sce()});var FS=J((pzt,cce)=>{"use strict";var Hot=Sr(),Wot=Ci(),$ot=zn(),uce=Mo(),Got=Wot("iterator");cce.exports=!Hot(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(i,o){e.delete("b"),n+=o+i}),r.delete("a",2),r.delete("b",void 0),uce&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(uce||!$ot)||!e.sort||t.href!=="https://a/c%20d?a=1&c=3"||e.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!e[Got]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var bce=J((mzt,yce)=>{"use strict";var db=qr(),RB=2147483647,qS=36,mce=1,NB=26,Kot=38,Zot=700,Yot=72,Xot=128,Jot="-",Qot=/[^\0-\u007E]/,gce=/[.\u3002\uFF0E\uFF61]/g,fce="Overflow: input needs wider integers to process",FB=qS-mce,hce=RangeError,eat=db(gce.exec),H_=Math.floor,qB=String.fromCharCode,dce=db("".charCodeAt),vce=db([].join),kv=db([].push),tat=db("".replace),rat=db("".split),nat=db("".toLowerCase),iat=function(t){for(var e=[],r=0,n=t.length;r<n;){var i=dce(t,r++);if(i>=55296&&i<=56319&&r<n){var o=dce(t,r++);(o&64512)===56320?kv(e,((i&1023)<<10)+(o&1023)+65536):(kv(e,i),r--)}else kv(e,i)}return e},pce=function(t){return t+22+75*(t<26)},oat=function(t,e,r){var n=0;for(t=r?H_(t/Zot):t>>1,t+=H_(t/e);t>FB*NB>>1;)t=H_(t/FB),n+=qS;return H_(n+(FB+1)*t/(t+Kot))},aat=function(t){var e=[];t=iat(t);var r=t.length,n=Xot,i=0,o=Yot,s,u;for(s=0;s<t.length;s++)u=t[s],u<128&&kv(e,qB(u));var h=e.length,y=h;for(h&&kv(e,Jot);y<r;){var w=RB;for(s=0;s<t.length;s++)u=t[s],u>=n&&u<w&&(w=u);var T=y+1;if(w-n>H_((RB-i)/T))throw new hce(fce);for(i+=(w-n)*T,n=w,s=0;s<t.length;s++){if(u=t[s],u<n&&++i>RB)throw new hce(fce);if(u===n){for(var I=i,P=qS;;){var L=P<=o?mce:P>=o+NB?NB:P-o;if(I<L)break;var R=I-L,W=qS-L;kv(e,qB(pce(L+R%W))),I=H_(R/W),P+=qS}kv(e,qB(pce(I))),o=oat(i,T,y===h),i=0,y++}}i++,n++}return vce(e,"")};yce.exports=function(t){var e=[],r=rat(tat(nat(t),gce,"."),"."),n,i;for(n=0;n<r.length;n++)i=r[n],kv(e,eat(Qot,i)?"xn--"+aat(i):i);return vce(e,".")}});var GB=J((gzt,Uce)=>{"use strict";Ow();ZN();var HB=ht(),Pce=Jr(),WB=tN(),sat=Uo(),G2=$n(),Id=qr(),NS=zn(),Mce=FS(),Lce=Ba(),lat=el(),uat=Jy(),cat=ac(),fat=nC(),$B=Us(),Rce=Ph(),BB=Wi(),hat=Xi(),dat=Dh(),pat=Ih(),mat=qn(),Fce=ki(),uc=ai(),gat=ic(),_ce=zf(),xce=Tw(),vat=Gy(),K2=Zy(),W_=Hf(),yat=Ci(),bat=cC(),_at=yat("iterator"),G_="URLSearchParams",qce=G_+"Iterator",Nce=$B.set,Lh=$B.getterFor(G_),xat=$B.getterFor(qce),wce=WB("fetch"),X2=WB("Request"),BS=WB("Headers"),zB=X2&&X2.prototype,Sce=BS&&BS.prototype,wat=Pce.TypeError,Sat=Pce.encodeURIComponent,Eat=String.fromCharCode,Tat=sat("String","fromCodePoint"),Aat=parseInt,Y2=Id("".charAt),Ece=Id([].join),Cv=Id([].push),Bce=Id("".replace),kat=Id([].shift),Tce=Id([].splice),Ace=Id("".split),zce=Id("".slice),Cat=Id(/./.exec),Iat=/\+/g,jB="\uFFFD",Dat=/^[0-9a-f]+$/i,kce=function(t,e){var r=zce(t,e,e+2);return Cat(Dat,r)?Aat(r,16):NaN},Oat=function(t){for(var e=0,r=128;r>0&&(t&r)!==0;r>>=1)e++;return e},Pat=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(t[0]&31)<<6|t[1]&63;break;case 3:e=(t[0]&15)<<12|(t[1]&63)<<6|t[2]&63;break;case 4:e=(t[0]&7)<<18|(t[1]&63)<<12|(t[2]&63)<<6|t[3]&63;break}return e>1114111?null:e},Cce=function(t){t=Bce(t,Iat," ");for(var e=t.length,r="",n=0;n<e;){var i=Y2(t,n);if(i==="%"){if(Y2(t,n+1)==="%"||n+3>e){r+="%",n++;continue}var o=kce(t,n+1);if(o!==o){r+=i,n++;continue}n+=2;var s=Oat(o);if(s===0)i=Eat(o);else{if(s===1||s>4){r+=jB,n++;continue}for(var u=[o],h=1;h<s&&(n++,!(n+3>e||Y2(t,n)!=="%"));){var y=kce(t,n+1);if(y!==y){n+=3;break}if(y>191||y<128)break;Cv(u,y),n+=2,h++}if(u.length!==s){r+=jB;continue}var w=Pat(u);w===null?r+=jB:i=Tat(w)}}r+=i,n++}return r},Mat=/[!'()~]|%20/g,Lat={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Rat=function(t){return Lat[t]},Ice=function(t){return Bce(Sat(t),Mat,Rat)},UB=fat(function(e,r){Nce(this,{type:qce,target:Lh(e).entries,index:0,kind:r})},G_,function(){var e=xat(this),r=e.target,n=e.index++;if(!r||n>=r.length)return e.target=null,K2(void 0,!0);var i=r[n];switch(e.kind){case"keys":return K2(i.key,!1);case"values":return K2(i.value,!1)}return K2([i.key,i.value],!1)},!0),jce=function(t){this.entries=[],this.url=null,t!==void 0&&(Fce(t)?this.parseObject(t):this.parseQuery(typeof t=="string"?Y2(t,0)==="?"?zce(t,1):t:uc(t)))};jce.prototype={type:G_,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e=this.entries,r=vat(t),n,i,o,s,u,h,y;if(r)for(n=xce(t,r),i=n.next;!(o=G2(i,n)).done;){if(s=xce(mat(o.value)),u=s.next,(h=G2(u,s)).done||(y=G2(u,s)).done||!G2(u,s).done)throw new wat("Expected sequence with length 2");Cv(e,{key:uc(h.value),value:uc(y.value)})}else for(var w in t)hat(t,w)&&Cv(e,{key:w,value:uc(t[w])})},parseQuery:function(t){if(t)for(var e=this.entries,r=Ace(t,"&"),n=0,i,o;n<r.length;)i=r[n++],i.length&&(o=Ace(i,"="),Cv(e,{key:Cce(kat(o)),value:Cce(Ece(o,"="))}))},serialize:function(){for(var t=this.entries,e=[],r=0,n;r<t.length;)n=t[r++],Cv(e,Ice(n.key)+"="+Ice(n.value));return Ece(e,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var J2=function(){Rce(this,$_);var e=arguments.length>0?arguments[0]:void 0,r=Nce(this,new jce(e));NS||(this.size=r.entries.length)},$_=J2.prototype;uat($_,{append:function(e,r){var n=Lh(this);W_(arguments.length,2),Cv(n.entries,{key:uc(e),value:uc(r)}),NS||this.length++,n.updateURL()},delete:function(t){for(var e=Lh(this),r=W_(arguments.length,1),n=e.entries,i=uc(t),o=r<2?void 0:arguments[1],s=o===void 0?o:uc(o),u=0;u<n.length;){var h=n[u];if(h.key===i&&(s===void 0||h.value===s)){if(Tce(n,u,1),s!==void 0)break}else u++}NS||(this.size=n.length),e.updateURL()},get:function(e){var r=Lh(this).entries;W_(arguments.length,1);for(var n=uc(e),i=0;i<r.length;i++)if(r[i].key===n)return r[i].value;return null},getAll:function(e){var r=Lh(this).entries;W_(arguments.length,1);for(var n=uc(e),i=[],o=0;o<r.length;o++)r[o].key===n&&Cv(i,r[o].value);return i},has:function(e){for(var r=Lh(this).entries,n=W_(arguments.length,1),i=uc(e),o=n<2?void 0:arguments[1],s=o===void 0?o:uc(o),u=0;u<r.length;){var h=r[u++];if(h.key===i&&(s===void 0||h.value===s))return!0}return!1},set:function(e,r){var n=Lh(this);W_(arguments.length,1);for(var i=n.entries,o=!1,s=uc(e),u=uc(r),h=0,y;h<i.length;h++)y=i[h],y.key===s&&(o?Tce(i,h--,1):(o=!0,y.value=u));o||Cv(i,{key:s,value:u}),NS||(this.size=i.length),n.updateURL()},sort:function(){var e=Lh(this);bat(e.entries,function(r,n){return r.key>n.key?1:-1}),e.updateURL()},forEach:function(e){for(var r=Lh(this).entries,n=dat(e,arguments.length>1?arguments[1]:void 0),i=0,o;i<r.length;)o=r[i++],n(o.value,o.key,this)},keys:function(){return new UB(this,"keys")},values:function(){return new UB(this,"values")},entries:function(){return new UB(this,"entries")}},{enumerable:!0});Lce($_,_at,$_.entries,{name:"entries"});Lce($_,"toString",function(){return Lh(this).serialize()},{enumerable:!0});NS&&lat($_,"size",{get:function(){return Lh(this).entries.length},configurable:!0,enumerable:!0});cat(J2,G_);HB({global:!0,constructor:!0,forced:!Mce},{URLSearchParams:J2});!Mce&&BB(BS)&&(Dce=Id(Sce.has),Oce=Id(Sce.set),VB=function(t){if(Fce(t)){var e=t.body,r;if(pat(e)===G_)return r=t.headers?new BS(t.headers):new BS,Dce(r,"content-type")||Oce(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),gat(t,{body:_ce(0,uc(e)),headers:_ce(0,r)})}return t},BB(wce)&&HB({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return wce(e,arguments.length>1?VB(arguments[1]):{})}}),BB(X2)&&(Z2=function(e){return Rce(this,zB),new X2(e,arguments.length>1?VB(arguments[1]):{})},zB.constructor=Z2,Z2.prototype=zB,HB({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Z2})));var Dce,Oce,VB,Z2;Uce.exports={URLSearchParams:J2,getState:Lh}});var afe=J(()=>{"use strict";YN();var Fat=ht(),cz=zn(),qat=FS(),fz=Jr(),Vce=Dh(),Bh=qr(),nI=Ba(),Rh=el(),Nat=Ph(),sz=Xi(),hz=Nq(),K_=ZR(),Dd=jf(),Bat=hS().codeAt,zat=bce(),Qm=ai(),jat=ac(),Uat=Hf(),efe=GB(),tfe=Us(),Vat=tfe.set,iI=tfe.getterFor("URL"),Hat=efe.URLSearchParams,Wat=efe.getState,zS=fz.URL,lz=fz.TypeError,oI=fz.parseInt,$at=Math.floor,Hce=Math.pow,Nh=Bh("".charAt),Od=Bh(/./.exec),US=Bh([].join),Gat=Bh(1 .toString),Kat=Bh([].pop),Y_=Bh([].push),KB=Bh("".replace),Zat=Bh([].shift),Yat=Bh("".split),HS=Bh("".slice),aI=Bh("".toLowerCase),Xat=Bh([].unshift),Jat="Invalid authority",ZB="Invalid scheme",pb="Invalid host",Wce="Invalid port",rfe=/[a-z]/i,Qat=/[\d+-.a-z]/i,uz=/\d/,est=/^0x/i,tst=/^[0-7]+$/,rst=/^\d+$/,nfe=/^[\da-f]+$/i,nst=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ist=/[\0\t\n\r #/:<>?@[\\\]^|]/,ost=/^[\u0000-\u0020]+/,ast=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,sst=/[\t\n\r]/g,Fh,lst=function(t){var e=Yat(t,"."),r,n,i,o,s,u,h;if(e.length&&e[e.length-1]===""&&e.length--,r=e.length,r>4)return t;for(n=[],i=0;i<r;i++){if(o=e[i],o==="")return t;if(s=10,o.length>1&&Nh(o,0)==="0"&&(s=Od(est,o)?16:8,o=HS(o,s===8?1:2)),o==="")u=0;else{if(!Od(s===10?rst:s===8?tst:nfe,o))return t;u=oI(o,s)}Y_(n,u)}for(i=0;i<r;i++)if(u=n[i],i===r-1){if(u>=Hce(256,5-r))return null}else if(u>255)return null;for(h=Kat(n),i=0;i<n.length;i++)h+=n[i]*Hce(256,3-i);return h},ust=function(t){var e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0,o,s,u,h,y,w,T,I=function(){return Nh(t,i)};if(I()===":"){if(Nh(t,1)!==":")return;i+=2,r++,n=r}for(;I();){if(r===8)return;if(I()===":"){if(n!==null)return;i++,r++,n=r;continue}for(o=s=0;s<4&&Od(nfe,I());)o=o*16+oI(I(),16),i++,s++;if(I()==="."){if(s===0||(i-=s,r>6))return;for(u=0;I();){if(h=null,u>0)if(I()==="."&&u<4)i++;else return;if(!Od(uz,I()))return;for(;Od(uz,I());){if(y=oI(I(),10),h===null)h=y;else{if(h===0)return;h=h*10+y}if(h>255)return;i++}e[r]=e[r]*256+h,u++,(u===2||u===4)&&r++}if(u!==4)return;break}else if(I()===":"){if(i++,!I())return}else if(I())return;e[r++]=o}if(n!==null)for(w=r-n,r=7;r!==0&&w>0;)T=e[r],e[r--]=e[n+w-1],e[n+--w]=T;else if(r!==8)return;return e},cst=function(t){for(var e=null,r=1,n=null,i=0,o=0;o<8;o++)t[o]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=o),++i);return i>r?n:e},jS=function(t){var e,r,n,i;if(typeof t=="number"){for(e=[],r=0;r<4;r++)Xat(e,t%256),t=$at(t/256);return US(e,".")}if(typeof t=="object"){for(e="",n=cst(t),r=0;r<8;r++)i&&t[r]===0||(i&&(i=!1),n===r?(e+=r?":":"::",i=!0):(e+=Gat(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},rI={},ife=hz({},rI,{" ":1,'"':1,"<":1,">":1,"`":1}),ofe=hz({},ife,{"#":1,"?":1,"{":1,"}":1}),YB=hz({},ofe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Iv=function(t,e){var r=Bat(t,0);return r>32&&r<127&&!sz(e,t)?t:encodeURIComponent(t)},Q2={ftp:21,file:null,http:80,https:443,ws:80,wss:443},VS=function(t,e){var r;return t.length===2&&Od(rfe,Nh(t,0))&&((r=Nh(t,1))===":"||!e&&r==="|")},$ce=function(t){var e;return t.length>1&&VS(HS(t,0,2))&&(t.length===2||(e=Nh(t,2))==="/"||e==="\\"||e==="?"||e==="#")},fst=function(t){return t==="."||aI(t)==="%2e"},hst=function(t){return t=aI(t),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"},XB={},Gce={},JB={},Kce={},Zce={},QB={},Yce={},Xce={},eI={},tI={},ez={},tz={},rz={},nz={},Jce={},iz={},Z_={},jp={},Qce={},mb={},Jm={},dz=function(t,e,r){var n=Qm(t),i,o,s;if(e){if(o=this.parse(n),o)throw new lz(o);this.searchParams=null}else{if(r!==void 0&&(i=new dz(r,!0)),o=this.parse(n,null,i),o)throw new lz(o);s=Wat(new Hat),s.bindURL(this),this.searchParams=s}};dz.prototype={type:"URL",parse:function(t,e,r){var n=this,i=e||XB,o=0,s="",u=!1,h=!1,y=!1,w,T,I,P;for(t=Qm(t),e||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,t=KB(t,ost,""),t=KB(t,ast,"$1")),t=KB(t,sst,""),w=K_(t);o<=w.length;){switch(T=w[o],i){case XB:if(T&&Od(rfe,T))s+=aI(T),i=Gce;else{if(e)return ZB;i=JB;continue}break;case Gce:if(T&&(Od(Qat,T)||T==="+"||T==="-"||T==="."))s+=aI(T);else if(T===":"){if(e&&(n.isSpecial()!==sz(Q2,s)||s==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=s,e){n.isSpecial()&&Q2[n.scheme]===n.port&&(n.port=null);return}s="",n.scheme==="file"?i=nz:n.isSpecial()&&r&&r.scheme===n.scheme?i=Kce:n.isSpecial()?i=Xce:w[o+1]==="/"?(i=Zce,o++):(n.cannotBeABaseURL=!0,Y_(n.path,""),i=Qce)}else{if(e)return ZB;s="",i=JB,o=0;continue}break;case JB:if(!r||r.cannotBeABaseURL&&T!=="#")return ZB;if(r.cannotBeABaseURL&&T==="#"){n.scheme=r.scheme,n.path=Dd(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,i=Jm;break}i=r.scheme==="file"?nz:QB;continue;case Kce:if(T==="/"&&w[o+1]==="/")i=eI,o++;else{i=QB;continue}break;case Zce:if(T==="/"){i=tI;break}else{i=jp;continue}case QB:if(n.scheme=r.scheme,T===Fh)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Dd(r.path),n.query=r.query;else if(T==="/"||T==="\\"&&n.isSpecial())i=Yce;else if(T==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Dd(r.path),n.query="",i=mb;else if(T==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Dd(r.path),n.query=r.query,n.fragment="",i=Jm;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Dd(r.path),n.path.length--,i=jp;continue}break;case Yce:if(n.isSpecial()&&(T==="/"||T==="\\"))i=eI;else if(T==="/")i=tI;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,i=jp;continue}break;case Xce:if(i=eI,T!=="/"||Nh(s,o+1)!=="/")continue;o++;break;case eI:if(T!=="/"&&T!=="\\"){i=tI;continue}break;case tI:if(T==="@"){u&&(s="%40"+s),u=!0,I=K_(s);for(var L=0;L<I.length;L++){var R=I[L];if(R===":"&&!y){y=!0;continue}var W=Iv(R,YB);y?n.password+=W:n.username+=W}s=""}else if(T===Fh||T==="/"||T==="?"||T==="#"||T==="\\"&&n.isSpecial()){if(u&&s==="")return Jat;o-=K_(s).length+1,s="",i=ez}else s+=T;break;case ez:case tz:if(e&&n.scheme==="file"){i=iz;continue}else if(T===":"&&!h){if(s==="")return pb;if(P=n.parseHost(s),P)return P;if(s="",i=rz,e===tz)return}else if(T===Fh||T==="/"||T==="?"||T==="#"||T==="\\"&&n.isSpecial()){if(n.isSpecial()&&s==="")return pb;if(e&&s===""&&(n.includesCredentials()||n.port!==null))return;if(P=n.parseHost(s),P)return P;if(s="",i=Z_,e)return;continue}else T==="["?h=!0:T==="]"&&(h=!1),s+=T;break;case rz:if(Od(uz,T))s+=T;else if(T===Fh||T==="/"||T==="?"||T==="#"||T==="\\"&&n.isSpecial()||e){if(s!==""){var G=oI(s,10);if(G>65535)return Wce;n.port=n.isSpecial()&&G===Q2[n.scheme]?null:G,s=""}if(e)return;i=Z_;continue}else return Wce;break;case nz:if(n.scheme="file",T==="/"||T==="\\")i=Jce;else if(r&&r.scheme==="file")switch(T){case Fh:n.host=r.host,n.path=Dd(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Dd(r.path),n.query="",i=mb;break;case"#":n.host=r.host,n.path=Dd(r.path),n.query=r.query,n.fragment="",i=Jm;break;default:$ce(US(Dd(w,o),""))||(n.host=r.host,n.path=Dd(r.path),n.shortenPath()),i=jp;continue}else{i=jp;continue}break;case Jce:if(T==="/"||T==="\\"){i=iz;break}r&&r.scheme==="file"&&!$ce(US(Dd(w,o),""))&&(VS(r.path[0],!0)?Y_(n.path,r.path[0]):n.host=r.host),i=jp;continue;case iz:if(T===Fh||T==="/"||T==="\\"||T==="?"||T==="#"){if(!e&&VS(s))i=jp;else if(s===""){if(n.host="",e)return;i=Z_}else{if(P=n.parseHost(s),P)return P;if(n.host==="localhost"&&(n.host=""),e)return;s="",i=Z_}continue}else s+=T;break;case Z_:if(n.isSpecial()){if(i=jp,T!=="/"&&T!=="\\")continue}else if(!e&&T==="?")n.query="",i=mb;else if(!e&&T==="#")n.fragment="",i=Jm;else if(T!==Fh&&(i=jp,T!=="/"))continue;break;case jp:if(T===Fh||T==="/"||T==="\\"&&n.isSpecial()||!e&&(T==="?"||T==="#")){if(hst(s)?(n.shortenPath(),T!=="/"&&!(T==="\\"&&n.isSpecial())&&Y_(n.path,"")):fst(s)?T!=="/"&&!(T==="\\"&&n.isSpecial())&&Y_(n.path,""):(n.scheme==="file"&&!n.path.length&&VS(s)&&(n.host&&(n.host=""),s=Nh(s,0)+":"),Y_(n.path,s)),s="",n.scheme==="file"&&(T===Fh||T==="?"||T==="#"))for(;n.path.length>1&&n.path[0]==="";)Zat(n.path);T==="?"?(n.query="",i=mb):T==="#"&&(n.fragment="",i=Jm)}else s+=Iv(T,ofe);break;case Qce:T==="?"?(n.query="",i=mb):T==="#"?(n.fragment="",i=Jm):T!==Fh&&(n.path[0]+=Iv(T,rI));break;case mb:!e&&T==="#"?(n.fragment="",i=Jm):T!==Fh&&(T==="'"&&n.isSpecial()?n.query+="%27":T==="#"?n.query+="%23":n.query+=Iv(T,rI));break;case Jm:T!==Fh&&(n.fragment+=Iv(T,ife));break}o++}},parseHost:function(t){var e,r,n;if(Nh(t,0)==="["){if(Nh(t,t.length-1)!=="]"||(e=ust(HS(t,1,-1)),!e))return pb;this.host=e}else if(this.isSpecial()){if(t=zat(t),Od(nst,t)||(e=lst(t),e===null))return pb;this.host=e}else{if(Od(ist,t))return pb;for(e="",r=K_(t),n=0;n<r.length;n++)e+=Iv(r[n],rI);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return sz(Q2,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;e&&(this.scheme!=="file"||e!==1||!VS(t[0],!0))&&t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,i=t.host,o=t.port,s=t.path,u=t.query,h=t.fragment,y=e+":";return i!==null?(y+="//",t.includesCredentials()&&(y+=r+(n?":"+n:"")+"@"),y+=jS(i),o!==null&&(y+=":"+o)):e==="file"&&(y+="//"),y+=t.cannotBeABaseURL?s[0]:s.length?"/"+US(s,"/"):"",u!==null&&(y+="?"+u),h!==null&&(y+="#"+h),y},setHref:function(t){var e=this.parse(t);if(e)throw new lz(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if(t==="blob")try{return new X_(t.path[0]).origin}catch{return"null"}return t==="file"||!this.isSpecial()?"null":t+"://"+jS(this.host)+(e!==null?":"+e:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(Qm(t)+":",XB)},getUsername:function(){return this.username},setUsername:function(t){var e=K_(Qm(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=Iv(e[r],YB)}},getPassword:function(){return this.password},setPassword:function(t){var e=K_(Qm(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=Iv(e[r],YB)}},getHost:function(){var t=this.host,e=this.port;return t===null?"":e===null?jS(t):jS(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,ez)},getHostname:function(){var t=this.host;return t===null?"":jS(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,tz)},getPort:function(){var t=this.port;return t===null?"":Qm(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(t=Qm(t),t===""?this.port=null:this.parse(t,rz))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+US(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Z_))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){t=Qm(t),t===""?this.query=null:(Nh(t,0)==="?"&&(t=HS(t,1)),this.query="",this.parse(t,mb)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){if(t=Qm(t),t===""){this.fragment=null;return}Nh(t,0)==="#"&&(t=HS(t,1)),this.fragment="",this.parse(t,Jm)},update:function(){this.query=this.searchParams.serialize()||null}};var X_=function(e){var r=Nat(this,cc),n=Uat(arguments.length,1)>1?arguments[1]:void 0,i=Vat(r,new dz(e,!1,n));cz||(r.href=i.serialize(),r.origin=i.getOrigin(),r.protocol=i.getProtocol(),r.username=i.getUsername(),r.password=i.getPassword(),r.host=i.getHost(),r.hostname=i.getHostname(),r.port=i.getPort(),r.pathname=i.getPathname(),r.search=i.getSearch(),r.searchParams=i.getSearchParams(),r.hash=i.getHash())},cc=X_.prototype,qh=function(t,e){return{get:function(){return iI(this)[t]()},set:e&&function(r){return iI(this)[e](r)},configurable:!0,enumerable:!0}};cz&&(Rh(cc,"href",qh("serialize","setHref")),Rh(cc,"origin",qh("getOrigin")),Rh(cc,"protocol",qh("getProtocol","setProtocol")),Rh(cc,"username",qh("getUsername","setUsername")),Rh(cc,"password",qh("getPassword","setPassword")),Rh(cc,"host",qh("getHost","setHost")),Rh(cc,"hostname",qh("getHostname","setHostname")),Rh(cc,"port",qh("getPort","setPort")),Rh(cc,"pathname",qh("getPathname","setPathname")),Rh(cc,"search",qh("getSearch","setSearch")),Rh(cc,"searchParams",qh("getSearchParams")),Rh(cc,"hash",qh("getHash","setHash")));nI(cc,"toJSON",function(){return iI(this).serialize()},{enumerable:!0});nI(cc,"toString",function(){return iI(this).serialize()},{enumerable:!0});zS&&(oz=zS.createObjectURL,az=zS.revokeObjectURL,oz&&nI(X_,"createObjectURL",Vce(oz,zS)),az&&nI(X_,"revokeObjectURL",Vce(az,zS)));var oz,az;jat(X_,"URL");Fat({global:!0,constructor:!0,forced:!qat,sham:!cz},{URL:X_})});var sfe=J(()=>{"use strict";afe()});var cfe=J(()=>{"use strict";var dst=ht(),pst=Uo(),ufe=Sr(),mst=Hf(),lfe=ai(),gst=FS(),pz=pst("URL"),vst=gst&&ufe(function(){pz.canParse()}),yst=ufe(function(){return pz.canParse.length!==1});dst({target:"URL",stat:!0,forced:!vst||yst},{canParse:function(e){var r=mst(arguments.length,1),n=lfe(e),i=r<2||arguments[1]===void 0?void 0:lfe(arguments[1]);try{return!!new pz(n,i)}catch{return!1}}})});var hfe=J(()=>{"use strict";var bst=ht(),_st=Uo(),xst=Hf(),ffe=ai(),wst=FS(),Sst=_st("URL");bst({target:"URL",stat:!0,forced:!wst},{parse:function(e){var r=xst(arguments.length,1),n=ffe(e),i=r<2||arguments[1]===void 0?void 0:ffe(arguments[1]);try{return new Sst(n,i)}catch{return null}}})});var dfe=J(()=>{"use strict";var Est=ht(),Tst=$n();Est({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Tst(URL.prototype.toString,this)}})});var pfe=J(()=>{"use strict";GB()});var yfe=J(()=>{"use strict";var Ast=Ba(),sI=qr(),mfe=ai(),kst=Hf(),vfe=URLSearchParams,lI=vfe.prototype,Cst=sI(lI.append),gfe=sI(lI.delete),Ist=sI(lI.forEach),Dst=sI([].push),mz=new vfe("a=1&a=2&b=3");mz.delete("a",1);mz.delete("b",void 0);mz+""!="a=2"&&Ast(lI,"delete",function(t){var e=arguments.length,r=e<2?void 0:arguments[1];if(e&&r===void 0)return gfe(this,t);var n=[];Ist(this,function(T,I){Dst(n,{key:I,value:T})}),kst(e,1);for(var i=mfe(t),o=mfe(r),s=0,u=0,h=!1,y=n.length,w;s<y;)w=n[s++],h||w.key===i?(h=!0,gfe(this,w.key)):u++;for(;u<y;)w=n[u++],w.key===i&&w.value===o||Cst(this,w.key,w.value)},{enumerable:!0,unsafe:!0})});var wfe=J(()=>{"use strict";var Ost=Ba(),_fe=qr(),Pst=ai(),Mst=Hf(),xfe=URLSearchParams,gz=xfe.prototype,Lst=_fe(gz.getAll),Rst=_fe(gz.has),bfe=new xfe("a=1");(bfe.has("a",2)||!bfe.has("a",void 0))&&Ost(gz,"has",function(e){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return Rst(this,e);var i=Lst(this,e);Mst(r,1);for(var o=Pst(n),s=0;s<i.length;)if(i[s++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var Sfe=J(()=>{"use strict";var Fst=zn(),qst=qr(),Nst=el(),vz=URLSearchParams.prototype,Bst=qst(vz.forEach);Fst&&!("size"in vz)&&Nst(vz,"size",{get:function(){var e=0;return Bst(this,function(){e++}),e},configurable:!0,enumerable:!0})});var Tfe=J((Rzt,Efe)=>{"use strict";XW();i7();o7();a7();s7();l7();u7();c7();f7();h7();d7();p7();m7();g7();v7();V7();K7();f$();m$();v$();E$();C$();D$();M$();L$();F$();N$();j$();U$();W$();$$();Z$();iG();oG();sG();lG();Ow();IG();MG();LG();FG();NG();$G();KG();YG();QG();eK();gK();bK();_K();wK();AK();kK();CK();IK();DK();PK();lZ();_Z();AZ();CZ();MZ();NZ();HZ();sY();uY();cY();hY();mY();gY();AY();kY();PY();FY();NY();HY();GY();XY();JY();iX();mX();gX();yX();bX();EX();TX();AX();DX();OX();PX();LX();RX();ER();FX();QX();nJ();aJ();uJ();fJ();hJ();dJ();gJ();yJ();bJ();_J();wJ();EJ();AJ();kJ();CJ();IJ();PJ();RJ();FJ();qJ();KJ();ZJ();JJ();eQ();tQ();rQ();nQ();iQ();cQ();yQ();SQ();IQ();PQ();qQ();NQ();jQ();VQ();WQ();$Q();JQ();QQ();eee();nee();iee();oee();see();uee();cee();hee();pee();gee();yee();_ee();xee();wee();See();Cee();Iee();Dee();Mee();Lee();Fee();Nee();Jte();Qte();tre();ore();lre();ure();cre();vre();_re();xre();Tre();Are();kre();Cre();Ire();Dre();Ore();Fre();Nre();Bre();rne();cne();hne();t2();yne();_ne();Sne();kne();Ine();eie();iie();sie();cie();die();gie();bie();_ie();Eie();Iie();ZN();Mie();Rie();YN();Kie();ioe();aoe();soe();foe();hoe();yoe();xoe();Eoe();Ioe();Poe();Loe();Noe();Uoe();Goe();Joe();rae();nae();iae();oae();aae();sae();lae();uae();cae();fae();hae();dae();pae();Uae();Vae();Hae();Wae();$ae();Gae();Kae();Zae();Yae();Jae();ese();rse();ise();lse();cse();hse();pse();gse();yse();bse();xse();Sse();Cse();Dse();Pse();Mse();Rse();qse();Bse();jse();Gse();Kse();Yse();rle();ile();ule();cle();fle();dle();ple();ble();Lle();Fle();Kle();Qle();aue();fue();Sue();Due();Pue();jue();Uue();Hue();tce();lce();sfe();cfe();hfe();dfe();pfe();yfe();wfe();Sfe();Efe.exports=Bk()});var Afe=J((Fzt,bz)=>{var yz=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(de,we,Ue){de[we]=Ue.value},i,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",h=o.toStringTag||"@@toStringTag";function y(de,we,Ue){return Object.defineProperty(de,we,{value:Ue,enumerable:!0,configurable:!0,writable:!0}),de[we]}try{y({},"")}catch{y=function(we,Ue,ye){return we[Ue]=ye}}function w(de,we,Ue,ye){var ne=we&&we.prototype instanceof G?we:G,st=Object.create(ne.prototype),dt=new he(ye||[]);return n(st,"_invoke",{value:me(de,Ue,dt)}),st}t.wrap=w;function T(de,we,Ue){try{return{type:"normal",arg:de.call(we,Ue)}}catch(ye){return{type:"throw",arg:ye}}}var I="suspendedStart",P="suspendedYield",L="executing",R="completed",W={};function G(){}function q(){}function V(){}var p={};y(p,s,function(){return this});var K=Object.getPrototypeOf,j=K&&K(K(Ce([])));j&&j!==e&&r.call(j,s)&&(p=j);var Q=V.prototype=G.prototype=Object.create(p);q.prototype=V,n(Q,"constructor",{value:V,configurable:!0}),n(V,"constructor",{value:q,configurable:!0}),q.displayName=y(V,h,"GeneratorFunction");function ee(de){["next","throw","return"].forEach(function(we){y(de,we,function(Ue){return this._invoke(we,Ue)})})}t.isGeneratorFunction=function(de){var we=typeof de=="function"&&de.constructor;return we?we===q||(we.displayName||we.name)==="GeneratorFunction":!1},t.mark=function(de){return Object.setPrototypeOf?Object.setPrototypeOf(de,V):(de.__proto__=V,y(de,h,"GeneratorFunction")),de.prototype=Object.create(Q),de},t.awrap=function(de){return{__await:de}};function se(de,we){function Ue(st,dt,lt,kt){var ut=T(de[st],de,dt);if(ut.type==="throw")kt(ut.arg);else{var Ut=ut.arg,Wt=Ut.value;return Wt&&typeof Wt=="object"&&r.call(Wt,"__await")?we.resolve(Wt.__await).then(function(Ht){Ue("next",Ht,lt,kt)},function(Ht){Ue("throw",Ht,lt,kt)}):we.resolve(Wt).then(function(Ht){Ut.value=Ht,lt(Ut)},function(Ht){return Ue("throw",Ht,lt,kt)})}}var ye;function ne(st,dt){function lt(){return new we(function(kt,ut){Ue(st,dt,kt,ut)})}return ye=ye?ye.then(lt,lt):lt()}n(this,"_invoke",{value:ne})}ee(se.prototype),y(se.prototype,u,function(){return this}),t.AsyncIterator=se,t.async=function(de,we,Ue,ye,ne){ne===void 0&&(ne=Promise);var st=new se(w(de,we,Ue,ye),ne);return t.isGeneratorFunction(we)?st:st.next().then(function(dt){return dt.done?dt.value:st.next()})};function me(de,we,Ue){var ye=I;return function(st,dt){if(ye===L)throw new Error("Generator is already running");if(ye===R){if(st==="throw")throw dt;return Se()}for(Ue.method=st,Ue.arg=dt;;){var lt=Ue.delegate;if(lt){var kt=ve(lt,Ue);if(kt){if(kt===W)continue;return kt}}if(Ue.method==="next")Ue.sent=Ue._sent=Ue.arg;else if(Ue.method==="throw"){if(ye===I)throw ye=R,Ue.arg;Ue.dispatchException(Ue.arg)}else Ue.method==="return"&&Ue.abrupt("return",Ue.arg);ye=L;var ut=T(de,we,Ue);if(ut.type==="normal"){if(ye=Ue.done?R:P,ut.arg===W)continue;return{value:ut.arg,done:Ue.done}}else ut.type==="throw"&&(ye=R,Ue.method="throw",Ue.arg=ut.arg)}}}function ve(de,we){var Ue=we.method,ye=de.iterator[Ue];if(ye===i)return we.delegate=null,Ue==="throw"&&de.iterator.return&&(we.method="return",we.arg=i,ve(de,we),we.method==="throw")||Ue!=="return"&&(we.method="throw",we.arg=new TypeError("The iterator does not provide a '"+Ue+"' method")),W;var ne=T(ye,de.iterator,we.arg);if(ne.type==="throw")return we.method="throw",we.arg=ne.arg,we.delegate=null,W;var st=ne.arg;if(!st)return we.method="throw",we.arg=new TypeError("iterator result is not an object"),we.delegate=null,W;if(st.done)we[de.resultName]=st.value,we.next=de.nextLoc,we.method!=="return"&&(we.method="next",we.arg=i);else return st;return we.delegate=null,W}ee(Q),y(Q,h,"Generator"),y(Q,s,function(){return this}),y(Q,"toString",function(){return"[object Generator]"});function U(de){var we={tryLoc:de[0]};1 in de&&(we.catchLoc=de[1]),2 in de&&(we.finallyLoc=de[2],we.afterLoc=de[3]),this.tryEntries.push(we)}function $(de){var we=de.completion||{};we.type="normal",delete we.arg,de.completion=we}function he(de){this.tryEntries=[{tryLoc:"root"}],de.forEach(U,this),this.reset(!0)}t.keys=function(de){var we=Object(de),Ue=[];for(var ye in we)Ue.push(ye);return Ue.reverse(),function ne(){for(;Ue.length;){var st=Ue.pop();if(st in we)return ne.value=st,ne.done=!1,ne}return ne.done=!0,ne}};function Ce(de){if(de!=null){var we=de[s];if(we)return we.call(de);if(typeof de.next=="function")return de;if(!isNaN(de.length)){var Ue=-1,ye=function ne(){for(;++Ue<de.length;)if(r.call(de,Ue))return ne.value=de[Ue],ne.done=!1,ne;return ne.value=i,ne.done=!0,ne};return ye.next=ye}}throw new TypeError(typeof de+" is not iterable")}t.values=Ce;function Se(){return{value:i,done:!0}}return he.prototype={constructor:he,reset:function(de){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach($),!de)for(var we in this)we.charAt(0)==="t"&&r.call(this,we)&&!isNaN(+we.slice(1))&&(this[we]=i)},stop:function(){this.done=!0;var de=this.tryEntries[0],we=de.completion;if(we.type==="throw")throw we.arg;return this.rval},dispatchException:function(de){if(this.done)throw de;var we=this;function Ue(kt,ut){return st.type="throw",st.arg=de,we.next=kt,ut&&(we.method="next",we.arg=i),!!ut}for(var ye=this.tryEntries.length-1;ye>=0;--ye){var ne=this.tryEntries[ye],st=ne.completion;if(ne.tryLoc==="root")return Ue("end");if(ne.tryLoc<=this.prev){var dt=r.call(ne,"catchLoc"),lt=r.call(ne,"finallyLoc");if(dt&&lt){if(this.prev<ne.catchLoc)return Ue(ne.catchLoc,!0);if(this.prev<ne.finallyLoc)return Ue(ne.finallyLoc)}else if(dt){if(this.prev<ne.catchLoc)return Ue(ne.catchLoc,!0)}else if(lt){if(this.prev<ne.finallyLoc)return Ue(ne.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(de,we){for(var Ue=this.tryEntries.length-1;Ue>=0;--Ue){var ye=this.tryEntries[Ue];if(ye.tryLoc<=this.prev&&r.call(ye,"finallyLoc")&&this.prev<ye.finallyLoc){var ne=ye;break}}ne&&(de==="break"||de==="continue")&&ne.tryLoc<=we&&we<=ne.finallyLoc&&(ne=null);var st=ne?ne.completion:{};return st.type=de,st.arg=we,ne?(this.method="next",this.next=ne.finallyLoc,W):this.complete(st)},complete:function(de,we){if(de.type==="throw")throw de.arg;return de.type==="break"||de.type==="continue"?this.next=de.arg:de.type==="return"?(this.rval=this.arg=de.arg,this.method="return",this.next="end"):de.type==="normal"&&we&&(this.next=we),W},finish:function(de){for(var we=this.tryEntries.length-1;we>=0;--we){var Ue=this.tryEntries[we];if(Ue.finallyLoc===de)return this.complete(Ue.completion,Ue.afterLoc),$(Ue),W}},catch:function(de){for(var we=this.tryEntries.length-1;we>=0;--we){var Ue=this.tryEntries[we];if(Ue.tryLoc===de){var ye=Ue.completion;if(ye.type==="throw"){var ne=ye.arg;$(Ue)}return ne}}throw new Error("illegal catch attempt")},delegateYield:function(de,we,Ue){return this.delegate={iterator:Ce(de),resultName:we,nextLoc:Ue},this.method==="next"&&(this.arg=i),W}},t}(typeof bz=="object"?bz.exports:{});try{regeneratorRuntime=yz}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=yz:Function("r","regeneratorRuntime = r")(yz)}});var Iz=J((qzt,uI)=>{(function(t,e,r){if(!t)return;for(var n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},i={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u,h=1;h<20;++h)n[111+h]="f"+h;for(h=0;h<=9;++h)n[h+96]=h.toString();function y(j,Q,ee){if(j.addEventListener){j.addEventListener(Q,ee,!1);return}j.attachEvent("on"+Q,ee)}function w(j){if(j.type=="keypress"){var Q=String.fromCharCode(j.which);return j.shiftKey||(Q=Q.toLowerCase()),Q}return n[j.which]?n[j.which]:i[j.which]?i[j.which]:String.fromCharCode(j.which).toLowerCase()}function T(j,Q){return j.sort().join(",")===Q.sort().join(",")}function I(j){var Q=[];return j.shiftKey&&Q.push("shift"),j.altKey&&Q.push("alt"),j.ctrlKey&&Q.push("ctrl"),j.metaKey&&Q.push("meta"),Q}function P(j){if(j.preventDefault){j.preventDefault();return}j.returnValue=!1}function L(j){if(j.stopPropagation){j.stopPropagation();return}j.cancelBubble=!0}function R(j){return j=="shift"||j=="ctrl"||j=="alt"||j=="meta"}function W(){if(!u){u={};for(var j in n)j>95&&j<112||n.hasOwnProperty(j)&&(u[n[j]]=j)}return u}function G(j,Q,ee){return ee||(ee=W()[j]?"keydown":"keypress"),ee=="keypress"&&Q.length&&(ee="keydown"),ee}function q(j){return j==="+"?["+"]:(j=j.replace(/\+{2}/g,"+plus"),j.split("+"))}function V(j,Q){var ee,se,me,ve=[];for(ee=q(j),me=0;me<ee.length;++me)se=ee[me],s[se]&&(se=s[se]),Q&&Q!="keypress"&&o[se]&&(se=o[se],ve.push("shift")),R(se)&&ve.push(se);return Q=G(se,ve,Q),{key:se,modifiers:ve,action:Q}}function p(j,Q){return j===null||j===e?!1:j===Q?!0:p(j.parentNode,Q)}function K(j){var Q=this;if(j=j||e,!(Q instanceof K))return new K(j);Q.target=j,Q._callbacks={},Q._directMap={};var ee={},se,me=!1,ve=!1,U=!1;function $(ye){ye=ye||{};var ne=!1,st;for(st in ee){if(ye[st]){ne=!0;continue}ee[st]=0}ne||(U=!1)}function he(ye,ne,st,dt,lt,kt){var ut,Ut,Wt=[],Ht=st.type;if(!Q._callbacks[ye])return[];for(Ht=="keyup"&&R(ye)&&(ne=[ye]),ut=0;ut<Q._callbacks[ye].length;++ut)if(Ut=Q._callbacks[ye][ut],!(!dt&&Ut.seq&&ee[Ut.seq]!=Ut.level)&&Ht==Ut.action&&(Ht=="keypress"&&!st.metaKey&&!st.ctrlKey||T(ne,Ut.modifiers))){var pr=!dt&&Ut.combo==lt,zr=dt&&Ut.seq==dt&&Ut.level==kt;(pr||zr)&&Q._callbacks[ye].splice(ut,1),Wt.push(Ut)}return Wt}function Ce(ye,ne,st,dt){Q.stopCallback(ne,ne.target||ne.srcElement,st,dt)||ye(ne,st)===!1&&(P(ne),L(ne))}Q._handleKey=function(ye,ne,st){var dt=he(ye,ne,st),lt,kt={},ut=0,Ut=!1;for(lt=0;lt<dt.length;++lt)dt[lt].seq&&(ut=Math.max(ut,dt[lt].level));for(lt=0;lt<dt.length;++lt){if(dt[lt].seq){if(dt[lt].level!=ut)continue;Ut=!0,kt[dt[lt].seq]=1,Ce(dt[lt].callback,st,dt[lt].combo,dt[lt].seq);continue}Ut||Ce(dt[lt].callback,st,dt[lt].combo)}var Wt=st.type=="keypress"&&ve;st.type==U&&!R(ye)&&!Wt&&$(kt),ve=Ut&&st.type=="keydown"};function Se(ye){typeof ye.which!="number"&&(ye.which=ye.keyCode);var ne=w(ye);if(ne){if(ye.type=="keyup"&&me===ne){me=!1;return}Q.handleKey(ne,I(ye),ye)}}function de(){clearTimeout(se),se=setTimeout($,1e3)}function we(ye,ne,st,dt){ee[ye]=0;function lt(Ht){return function(){U=Ht,++ee[ye],de()}}function kt(Ht){Ce(st,Ht,ye),dt!=="keyup"&&(me=w(Ht)),setTimeout($,10)}for(var ut=0;ut<ne.length;++ut){var Ut=ut+1===ne.length,Wt=Ut?kt:lt(dt||V(ne[ut+1]).action);Ue(ne[ut],Wt,dt,ye,ut)}}function Ue(ye,ne,st,dt,lt){Q._directMap[ye+":"+st]=ne,ye=ye.replace(/\s+/g," ");var kt=ye.split(" "),ut;if(kt.length>1){we(ye,kt,ne,st);return}ut=V(ye,st),Q._callbacks[ut.key]=Q._callbacks[ut.key]||[],he(ut.key,ut.modifiers,{type:ut.action},dt,ye,lt),Q._callbacks[ut.key][dt?"unshift":"push"]({callback:ne,modifiers:ut.modifiers,action:ut.action,seq:dt,level:lt,combo:ye})}Q._bindMultiple=function(ye,ne,st){for(var dt=0;dt<ye.length;++dt)Ue(ye[dt],ne,st)},y(j,"keypress",Se),y(j,"keydown",Se),y(j,"keyup",Se)}K.prototype.bind=function(j,Q,ee){var se=this;return j=j instanceof Array?j:[j],se._bindMultiple.call(se,j,Q,ee),se},K.prototype.unbind=function(j,Q){var ee=this;return ee.bind.call(ee,j,function(){},Q)},K.prototype.trigger=function(j,Q){var ee=this;return ee._directMap[j+":"+Q]&&ee._directMap[j+":"+Q]({},j),ee},K.prototype.reset=function(){var j=this;return j._callbacks={},j._directMap={},j},K.prototype.stopCallback=function(j,Q){var ee=this;if((" "+Q.className+" ").indexOf(" mousetrap ")>-1||p(Q,ee.target))return!1;if("composedPath"in j&&typeof j.composedPath=="function"){var se=j.composedPath()[0];se!==j.target&&(Q=se)}return Q.tagName=="INPUT"||Q.tagName=="SELECT"||Q.tagName=="TEXTAREA"||Q.isContentEditable},K.prototype.handleKey=function(){var j=this;return j._handleKey.apply(j,arguments)},K.addKeycodes=function(j){for(var Q in j)j.hasOwnProperty(Q)&&(n[Q]=j[Q]);u=null},K.init=function(){var j=K(e);for(var Q in j)Q.charAt(0)!=="_"&&(K[Q]=function(ee){return function(){return j[ee].apply(j,arguments)}}(Q))},K.init(),t.Mousetrap=K,typeof uI<"u"&&uI.exports&&(uI.exports=K),typeof define=="function"&&define.amd&&define(function(){return K})})(typeof window<"u"?window:null,typeof window<"u"?document:null)});var Fv,AI=Ip(()=>{Fv={logger:self.console,WebSocket:self.WebSocket}});var Ho,ax=Ip(()=>{AI();Ho={log(...t){this.enabled&&(t.push(Date.now()),Fv.logger.log("[ActionCable]",...t))}}});var XS,kI,JS,CI,p5=Ip(()=>{ax();XS=()=>new Date().getTime(),kI=t=>(XS()-t)/1e3,JS=class{constructor(e){this.visibilityDidChange=this.visibilityDidChange.bind(this),this.connection=e,this.reconnectAttempts=0}start(){this.isRunning()||(this.startedAt=XS(),delete this.stoppedAt,this.startPolling(),addEventListener("visibilitychange",this.visibilityDidChange),Ho.log(`ConnectionMonitor started. stale threshold = ${this.constructor.staleThreshold} s`))}stop(){this.isRunning()&&(this.stoppedAt=XS(),this.stopPolling(),removeEventListener("visibilitychange",this.visibilityDidChange),Ho.log("ConnectionMonitor stopped"))}isRunning(){return this.startedAt&&!this.stoppedAt}recordPing(){this.pingedAt=XS()}recordConnect(){this.reconnectAttempts=0,this.recordPing(),delete this.disconnectedAt,Ho.log("ConnectionMonitor recorded connect")}recordDisconnect(){this.disconnectedAt=XS(),Ho.log("ConnectionMonitor recorded disconnect")}startPolling(){this.stopPolling(),this.poll()}stopPolling(){clearTimeout(this.pollTimeout)}poll(){this.pollTimeout=setTimeout(()=>{this.reconnectIfStale(),this.poll()},this.getPollInterval())}getPollInterval(){let{staleThreshold:e,reconnectionBackoffRate:r}=this.constructor,n=Math.pow(1+r,Math.min(this.reconnectAttempts,10)),o=(this.reconnectAttempts===0?1:r)*Math.random();return e*1e3*n*(1+o)}reconnectIfStale(){this.connectionIsStale()&&(Ho.log(`ConnectionMonitor detected stale connection. reconnectAttempts = ${this.reconnectAttempts}, time stale = ${kI(this.refreshedAt)} s, stale threshold = ${this.constructor.staleThreshold} s`),this.reconnectAttempts++,this.disconnectedRecently()?Ho.log(`ConnectionMonitor skipping reopening recent disconnect. time disconnected = ${kI(this.disconnectedAt)} s`):(Ho.log("ConnectionMonitor reopening"),this.connection.reopen()))}get refreshedAt(){return this.pingedAt?this.pingedAt:this.startedAt}connectionIsStale(){return kI(this.refreshedAt)>this.constructor.staleThreshold}disconnectedRecently(){return this.disconnectedAt&&kI(this.disconnectedAt)<this.constructor.staleThreshold}visibilityDidChange(){document.visibilityState==="visible"&&setTimeout(()=>{(this.connectionIsStale()||!this.connection.isOpen())&&(Ho.log(`ConnectionMonitor reopening stale connection on visibilitychange. visibilityState = ${document.visibilityState}`),this.connection.reopen())},200)}};JS.staleThreshold=6;JS.reconnectionBackoffRate=.15;CI=JS});var QS,m5=Ip(()=>{QS={message_types:{welcome:"welcome",disconnect:"disconnect",ping:"ping",confirmation:"confirm_subscription",rejection:"reject_subscription"},disconnect_reasons:{unauthorized:"unauthorized",invalid_request:"invalid_request",server_restart:"server_restart"},default_mount_path:"/cable",protocols:["actioncable-v1-json","actioncable-unsupported"]}});var eE,II,cut,dhe,tE,DI,g5=Ip(()=>{AI();p5();m5();ax();({message_types:eE,protocols:II}=QS),cut=II.slice(0,II.length-1),dhe=[].indexOf,tE=class{constructor(e){this.open=this.open.bind(this),this.consumer=e,this.subscriptions=this.consumer.subscriptions,this.monitor=new CI(this),this.disconnected=!0}send(e){return this.isOpen()?(this.webSocket.send(JSON.stringify(e)),!0):!1}open(){return this.isActive()?(Ho.log(`Attempted to open WebSocket, but existing socket is ${this.getState()}`),!1):(Ho.log(`Opening WebSocket, current state is ${this.getState()}, subprotocols: ${II}`),this.webSocket&&this.uninstallEventHandlers(),this.webSocket=new Fv.WebSocket(this.consumer.url,II),this.installEventHandlers(),this.monitor.start(),!0)}close({allowReconnect:e}={allowReconnect:!0}){if(e||this.monitor.stop(),this.isOpen())return this.webSocket.close()}reopen(){if(Ho.log(`Reopening WebSocket, current state is ${this.getState()}`),this.isActive())try{return this.close()}catch(e){Ho.log("Failed to reopen WebSocket",e)}finally{Ho.log(`Reopening WebSocket in ${this.constructor.reopenDelay}ms`),setTimeout(this.open,this.constructor.reopenDelay)}else return this.open()}getProtocol(){if(this.webSocket)return this.webSocket.protocol}isOpen(){return this.isState("open")}isActive(){return this.isState("open","connecting")}isProtocolSupported(){return dhe.call(cut,this.getProtocol())>=0}isState(...e){return dhe.call(e,this.getState())>=0}getState(){if(this.webSocket){for(let e in Fv.WebSocket)if(Fv.WebSocket[e]===this.webSocket.readyState)return e.toLowerCase()}return null}installEventHandlers(){for(let e in this.events){let r=this.events[e].bind(this);this.webSocket[`on${e}`]=r}}uninstallEventHandlers(){for(let e in this.events)this.webSocket[`on${e}`]=function(){}}};tE.reopenDelay=500;tE.prototype.events={message(t){if(!this.isProtocolSupported())return;let{identifier:e,message:r,reason:n,reconnect:i,type:o}=JSON.parse(t.data);switch(o){case eE.welcome:return this.monitor.recordConnect(),this.subscriptions.reload();case eE.disconnect:return Ho.log(`Disconnecting. Reason: ${n}`),this.close({allowReconnect:i});case eE.ping:return this.monitor.recordPing();case eE.confirmation:return this.subscriptions.confirmSubscription(e),this.subscriptions.notify(e,"connected");case eE.rejection:return this.subscriptions.reject(e);default:return this.subscriptions.notify(e,"received",r)}},open(){if(Ho.log(`WebSocket onopen event, using '${this.getProtocol()}' subprotocol`),this.disconnected=!1,!this.isProtocolSupported())return Ho.log("Protocol is unsupported. Stopping monitor and disconnecting."),this.close({allowReconnect:!1})},close(t){if(Ho.log("WebSocket onclose event"),!this.disconnected)return this.disconnected=!0,this.monitor.recordDisconnect(),this.subscriptions.notifyAll("disconnected",{willAttemptReconnect:this.monitor.isRunning()})},error(){Ho.log("WebSocket onerror event")}};DI=tE});var fut,_b,v5=Ip(()=>{fut=function(t,e){if(e!=null)for(let r in e){let n=e[r];t[r]=n}return t},_b=class{constructor(e,r={},n){this.consumer=e,this.identifier=JSON.stringify(r),fut(this,n)}perform(e,r={}){return r.action=e,this.send(r)}send(e){return this.consumer.send({command:"message",identifier:this.identifier,data:JSON.stringify(e)})}unsubscribe(){return this.consumer.subscriptions.remove(this)}}});var y5,OI,b5=Ip(()=>{ax();y5=class{constructor(e){this.subscriptions=e,this.pendingSubscriptions=[]}guarantee(e){this.pendingSubscriptions.indexOf(e)==-1?(Ho.log(`SubscriptionGuarantor guaranteeing ${e.identifier}`),this.pendingSubscriptions.push(e)):Ho.log(`SubscriptionGuarantor already guaranteeing ${e.identifier}`),this.startGuaranteeing()}forget(e){Ho.log(`SubscriptionGuarantor forgetting ${e.identifier}`),this.pendingSubscriptions=this.pendingSubscriptions.filter(r=>r!==e)}startGuaranteeing(){this.stopGuaranteeing(),this.retrySubscribing()}stopGuaranteeing(){clearTimeout(this.retryTimeout)}retrySubscribing(){this.retryTimeout=setTimeout(()=>{this.subscriptions&&typeof this.subscriptions.subscribe=="function"&&this.pendingSubscriptions.map(e=>{Ho.log(`SubscriptionGuarantor resubscribing ${e.identifier}`),this.subscriptions.subscribe(e)})},500)}},OI=y5});var xb,_5=Ip(()=>{v5();b5();ax();xb=class{constructor(e){this.consumer=e,this.guarantor=new OI(this),this.subscriptions=[]}create(e,r){let n=e,i=typeof n=="object"?n:{channel:n},o=new _b(this.consumer,i,r);return this.add(o)}add(e){return this.subscriptions.push(e),this.consumer.ensureActiveConnection(),this.notify(e,"initialized"),this.subscribe(e),e}remove(e){return this.forget(e),this.findAll(e.identifier).length||this.sendCommand(e,"unsubscribe"),e}reject(e){return this.findAll(e).map(r=>(this.forget(r),this.notify(r,"rejected"),r))}forget(e){return this.guarantor.forget(e),this.subscriptions=this.subscriptions.filter(r=>r!==e),e}findAll(e){return this.subscriptions.filter(r=>r.identifier===e)}reload(){return this.subscriptions.map(e=>this.subscribe(e))}notifyAll(e,...r){return this.subscriptions.map(n=>this.notify(n,e,...r))}notify(e,r,...n){let i;return typeof e=="string"?i=this.findAll(e):i=[e],i.map(o=>typeof o[r]=="function"?o[r](...n):void 0)}subscribe(e){this.sendCommand(e,"subscribe")&&this.guarantor.guarantee(e)}confirmSubscription(e){Ho.log(`Subscription confirmed ${e}`),this.findAll(e).map(r=>this.guarantor.forget(r))}sendCommand(e,r){let{identifier:n}=e;return this.consumer.send({command:r,identifier:n})}}});function x5(t){if(typeof t=="function"&&(t=t()),t&&!/^wss?:/i.test(t)){let e=document.createElement("a");return e.href=t,e.href=e.href,e.protocol=e.protocol.replace("http","ws"),e.href}else return t}var sx,phe=Ip(()=>{g5();_5();sx=class{constructor(e){this._url=e,this.subscriptions=new xb(this),this.connection=new DI(this)}get url(){return x5(this._url)}send(e){return this.connection.send(e)}connect(){return this.connection.open()}disconnect(){return this.connection.close({allowReconnect:!1})}ensureActiveConnection(){if(!this.connection.isActive())return this.connection.open()}}});var ghe={};k8(ghe,{Connection:()=>DI,ConnectionMonitor:()=>CI,Consumer:()=>sx,INTERNAL:()=>QS,Subscription:()=>_b,SubscriptionGuarantor:()=>OI,Subscriptions:()=>xb,adapters:()=>Fv,createConsumer:()=>hut,createWebSocketURL:()=>x5,getConfig:()=>mhe,logger:()=>Ho});function hut(t=mhe("url")||QS.default_mount_path){return new sx(t)}function mhe(t){let e=document.head.querySelector(`meta[name='action-cable-${t}']`);if(e)return e.getAttribute("content")}var vhe=Ip(()=>{g5();p5();phe();m5();v5();_5();b5();AI();ax()});var Ive=J((Rx,Fx)=>{(function(t){var e=typeof Rx=="object"&&Rx&&!Rx.nodeType&&Rx,r=typeof Fx=="object"&&Fx&&!Fx.nodeType&&Fx,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(t=n);var i,o=2147483647,s=36,u=1,h=26,y=38,w=700,T=72,I=128,P="-",L=/^xn--/,R=/[^\x20-\x7E]/,W=/[\x2E\u3002\uFF0E\uFF61]/g,G={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=s-u,V=Math.floor,p=String.fromCharCode,K;function j(we){throw new RangeError(G[we])}function Q(we,Ue){for(var ye=we.length,ne=[];ye--;)ne[ye]=Ue(we[ye]);return ne}function ee(we,Ue){var ye=we.split("@"),ne="";ye.length>1&&(ne=ye[0]+"@",we=ye[1]),we=we.replace(W,".");var st=we.split("."),dt=Q(st,Ue).join(".");return ne+dt}function se(we){for(var Ue=[],ye=0,ne=we.length,st,dt;ye<ne;)st=we.charCodeAt(ye++),st>=55296&&st<=56319&&ye<ne?(dt=we.charCodeAt(ye++),(dt&64512)==56320?Ue.push(((st&1023)<<10)+(dt&1023)+65536):(Ue.push(st),ye--)):Ue.push(st);return Ue}function me(we){return Q(we,function(Ue){var ye="";return Ue>65535&&(Ue-=65536,ye+=p(Ue>>>10&1023|55296),Ue=56320|Ue&1023),ye+=p(Ue),ye}).join("")}function ve(we){return we-48<10?we-22:we-65<26?we-65:we-97<26?we-97:s}function U(we,Ue){return we+22+75*(we<26)-((Ue!=0)<<5)}function $(we,Ue,ye){var ne=0;for(we=ye?V(we/w):we>>1,we+=V(we/Ue);we>q*h>>1;ne+=s)we=V(we/q);return V(ne+(q+1)*we/(we+y))}function he(we){var Ue=[],ye=we.length,ne,st=0,dt=I,lt=T,kt,ut,Ut,Wt,Ht,pr,zr,Jt,Qr;for(kt=we.lastIndexOf(P),kt<0&&(kt=0),ut=0;ut<kt;++ut)we.charCodeAt(ut)>=128&&j("not-basic"),Ue.push(we.charCodeAt(ut));for(Ut=kt>0?kt+1:0;Ut<ye;){for(Wt=st,Ht=1,pr=s;Ut>=ye&&j("invalid-input"),zr=ve(we.charCodeAt(Ut++)),(zr>=s||zr>V((o-st)/Ht))&&j("overflow"),st+=zr*Ht,Jt=pr<=lt?u:pr>=lt+h?h:pr-lt,!(zr<Jt);pr+=s)Qr=s-Jt,Ht>V(o/Qr)&&j("overflow"),Ht*=Qr;ne=Ue.length+1,lt=$(st-Wt,ne,Wt==0),V(st/ne)>o-dt&&j("overflow"),dt+=V(st/ne),st%=ne,Ue.splice(st++,0,dt)}return me(Ue)}function Ce(we){var Ue,ye,ne,st,dt,lt,kt,ut,Ut,Wt,Ht,pr=[],zr,Jt,Qr,Br;for(we=se(we),zr=we.length,Ue=I,ye=0,dt=T,lt=0;lt<zr;++lt)Ht=we[lt],Ht<128&&pr.push(p(Ht));for(ne=st=pr.length,st&&pr.push(P);ne<zr;){for(kt=o,lt=0;lt<zr;++lt)Ht=we[lt],Ht>=Ue&&Ht<kt&&(kt=Ht);for(Jt=ne+1,kt-Ue>V((o-ye)/Jt)&&j("overflow"),ye+=(kt-Ue)*Jt,Ue=kt,lt=0;lt<zr;++lt)if(Ht=we[lt],Ht<Ue&&++ye>o&&j("overflow"),Ht==Ue){for(ut=ye,Ut=s;Wt=Ut<=dt?u:Ut>=dt+h?h:Ut-dt,!(ut<Wt);Ut+=s)Br=ut-Wt,Qr=s-Wt,pr.push(p(U(Wt+Br%Qr,0))),ut=V(Br/Qr);pr.push(p(U(ut,0))),dt=$(ye,Jt,ne==st),ye=0,++ne}++ye,++Ue}return pr.join("")}function Se(we){return ee(we,function(Ue){return L.test(Ue)?he(Ue.slice(4).toLowerCase()):Ue})}function de(we){return ee(we,function(Ue){return R.test(Ue)?"xn--"+Ce(Ue):Ue})}if(i={version:"1.3.2",ucs2:{decode:se,encode:me},decode:he,encode:Ce,toASCII:de,toUnicode:Se},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&r)if(Fx.exports==e)r.exports=i;else for(K in i)i.hasOwnProperty(K)&&(e[K]=i[K]);else t.punycode=i})(Rx)});var Ove=J((Dve,QD)=>{(function(t,e){"use strict";typeof QD=="object"&&QD.exports?QD.exports=e():typeof define=="function"&&define.amd?define(e):t.IPv6=e(t)})(Dve,function(t){"use strict";var e=t&&t.IPv6;function r(i){var o=i.toLowerCase(),s=o.split(":"),u=s.length,h=8;s[0]===""&&s[1]===""&&s[2]===""?(s.shift(),s.shift()):s[0]===""&&s[1]===""?s.shift():s[u-1]===""&&s[u-2]===""&&s.pop(),u=s.length,s[u-1].indexOf(".")!==-1&&(h=7);var y;for(y=0;y<u&&s[y]!=="";y++);if(y<h)for(s.splice(y,1,"0000");s.length<h;)s.splice(y,0,"0000");for(var w,T=0;T<h;T++){w=s[T].split("");for(var I=0;I<3&&(w[0]==="0"&&w.length>1);I++)w.splice(0,1);s[T]=w.join("")}var P=-1,L=0,R=0,W=-1,G=!1;for(T=0;T<h;T++)G?s[T]==="0"?R+=1:(G=!1,R>L&&(P=W,L=R)):s[T]==="0"&&(G=!0,W=T,R=1);R>L&&(P=W,L=R),L>1&&s.splice(P,L,""),u=s.length;var q="";for(s[0]===""&&(q=":"),T=0;T<u&&(q+=s[T],T!==u-1);T++)q+=":";return s[u-1]===""&&(q+=":"),q}function n(){return t.IPv6===this&&(t.IPv6=e),this}return{best:r,noConflict:n}})});var Mve=J((Pve,eO)=>{(function(t,e){"use strict";typeof eO=="object"&&eO.exports?eO.exports=e():typeof define=="function"&&define.amd?define(e):t.SecondLevelDomains=e(t)})(Pve,function(t){"use strict";var e=t&&t.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(n){var i=n.lastIndexOf(".");if(i<=0||i>=n.length-1)return!1;var o=n.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return!1;var s=r.list[n.slice(i+1)];return s?s.indexOf(" "+n.slice(o+1,i)+" ")>=0:!1},is:function(n){var i=n.lastIndexOf(".");if(i<=0||i>=n.length-1)return!1;var o=n.lastIndexOf(".",i-1);if(o>=0)return!1;var s=r.list[n.slice(i+1)];return s?s.indexOf(" "+n.slice(0,i)+" ")>=0:!1},get:function(n){var i=n.lastIndexOf(".");if(i<=0||i>=n.length-1)return null;var o=n.lastIndexOf(".",i-1);if(o<=0||o>=i-1)return null;var s=r.list[n.slice(i+1)];return!s||s.indexOf(" "+n.slice(o+1,i)+" ")<0?null:n.slice(o+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=e),this}};return r})});var qx=J((Lve,tO)=>{(function(t,e){"use strict";typeof tO=="object"&&tO.exports?tO.exports=e(Ive(),Ove(),Mve()):typeof define=="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],e):t.URI=e(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(Lve,function(t,e,r,n){"use strict";var i=n&&n.URI;function o(U,$){var he=arguments.length>=1,Ce=arguments.length>=2;if(!(this instanceof o))return he?Ce?new o(U,$):new o(U):new o;if(U===void 0){if(he)throw new TypeError("undefined is not a valid argument for URI");typeof location<"u"?U=location.href+"":U=""}if(U===null&&he)throw new TypeError("null is not a valid argument for URI");return this.href(U),$!==void 0?this.absoluteTo($):this}function s(U){return/^[0-9]+$/.test(U)}o.version="1.19.11";var u=o.prototype,h=Object.prototype.hasOwnProperty;function y(U){return U.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function w(U){return U===void 0?"Undefined":String(Object.prototype.toString.call(U)).slice(8,-1)}function T(U){return w(U)==="Array"}function I(U,$){var he={},Ce,Se;if(w($)==="RegExp")he=null;else if(T($))for(Ce=0,Se=$.length;Ce<Se;Ce++)he[$[Ce]]=!0;else he[$]=!0;for(Ce=0,Se=U.length;Ce<Se;Ce++){var de=he&&he[U[Ce]]!==void 0||!he&&$.test(U[Ce]);de&&(U.splice(Ce,1),Se--,Ce--)}return U}function P(U,$){var he,Ce;if(T($)){for(he=0,Ce=$.length;he<Ce;he++)if(!P(U,$[he]))return!1;return!0}var Se=w($);for(he=0,Ce=U.length;he<Ce;he++)if(Se==="RegExp"){if(typeof U[he]=="string"&&U[he].match($))return!0}else if(U[he]===$)return!0;return!1}function L(U,$){if(!T(U)||!T($)||U.length!==$.length)return!1;U.sort(),$.sort();for(var he=0,Ce=U.length;he<Ce;he++)if(U[he]!==$[he])return!1;return!0}function R(U){var $=/^\/+|\/+$/g;return U.replace($,"")}o._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:o.preventInvalidHostname,duplicateQueryParameters:o.duplicateQueryParameters,escapeQuerySpace:o.escapeQuerySpace}},o.preventInvalidHostname=!1,o.duplicateQueryParameters=!1,o.escapeQuerySpace=!0,o.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,o.idn_expression=/[^a-z0-9\._-]/i,o.punycode_expression=/(xn--)/i,o.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,o.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,o.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,o.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},o.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,o.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},o.hostProtocols=["http","https"],o.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,o.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},o.getDomAttribute=function(U){if(!(!U||!U.nodeName)){var $=U.nodeName.toLowerCase();if(!($==="input"&&U.type!=="image"))return o.domAttributes[$]}};function W(U){return escape(U)}function G(U){return encodeURIComponent(U).replace(/[!'()*]/g,W).replace(/\*/g,"%2A")}o.encode=G,o.decode=decodeURIComponent,o.iso8859=function(){o.encode=escape,o.decode=unescape},o.unicode=function(){o.encode=G,o.decode=decodeURIComponent},o.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},o.encodeQuery=function(U,$){var he=o.encode(U+"");return $===void 0&&($=o.escapeQuerySpace),$?he.replace(/%20/g,"+"):he},o.decodeQuery=function(U,$){U+="",$===void 0&&($=o.escapeQuerySpace);try{return o.decode($?U.replace(/\+/g,"%20"):U)}catch{return U}};var q={encode:"encode",decode:"decode"},V,p=function(U,$){return function(he){try{return o[$](he+"").replace(o.characters[U][$].expression,function(Ce){return o.characters[U][$].map[Ce]})}catch{return he}}};for(V in q)o[V+"PathSegment"]=p("pathname",q[V]),o[V+"UrnPathSegment"]=p("urnpath",q[V]);var K=function(U,$,he){return function(Ce){var Se;he?Se=function(ye){return o[$](o[he](ye))}:Se=o[$];for(var de=(Ce+"").split(U),we=0,Ue=de.length;we<Ue;we++)de[we]=Se(de[we]);return de.join(U)}};o.decodePath=K("/","decodePathSegment"),o.decodeUrnPath=K(":","decodeUrnPathSegment"),o.recodePath=K("/","encodePathSegment","decode"),o.recodeUrnPath=K(":","encodeUrnPathSegment","decode"),o.encodeReserved=p("reserved","encode"),o.parse=function(U,$){var he;return $||($={preventInvalidHostname:o.preventInvalidHostname}),U=U.replace(o.leading_whitespace_expression,""),U=U.replace(o.ascii_tab_whitespace,""),he=U.indexOf("#"),he>-1&&($.fragment=U.substring(he+1)||null,U=U.substring(0,he)),he=U.indexOf("?"),he>-1&&($.query=U.substring(he+1)||null,U=U.substring(0,he)),U=U.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),U=U.replace(/^[/\\]{2,}/i,"//"),U.substring(0,2)==="//"?($.protocol=null,U=U.substring(2),U=o.parseAuthority(U,$)):(he=U.indexOf(":"),he>-1&&($.protocol=U.substring(0,he)||null,$.protocol&&!$.protocol.match(o.protocol_expression)?$.protocol=void 0:U.substring(he+1,he+3).replace(/\\/g,"/")==="//"?(U=U.substring(he+3),U=o.parseAuthority(U,$)):(U=U.substring(he+1),$.urn=!0))),$.path=U,$},o.parseHost=function(U,$){U||(U=""),U=U.replace(/\\/g,"/");var he=U.indexOf("/"),Ce,Se;if(he===-1&&(he=U.length),U.charAt(0)==="[")Ce=U.indexOf("]"),$.hostname=U.substring(1,Ce)||null,$.port=U.substring(Ce+2,he)||null,$.port==="/"&&($.port=null);else{var de=U.indexOf(":"),we=U.indexOf("/"),Ue=U.indexOf(":",de+1);Ue!==-1&&(we===-1||Ue<we)?($.hostname=U.substring(0,he)||null,$.port=null):(Se=U.substring(0,he).split(":"),$.hostname=Se[0]||null,$.port=Se[1]||null)}return $.hostname&&U.substring(he).charAt(0)!=="/"&&(he++,U="/"+U),$.preventInvalidHostname&&o.ensureValidHostname($.hostname,$.protocol),$.port&&o.ensureValidPort($.port),U.substring(he)||"/"},o.parseAuthority=function(U,$){return U=o.parseUserinfo(U,$),o.parseHost(U,$)},o.parseUserinfo=function(U,$){var he=U,Ce=U.indexOf("\\");Ce!==-1&&(U=U.replace(/\\/g,"/"));var Se=U.indexOf("/"),de=U.lastIndexOf("@",Se>-1?Se:U.length-1),we;return de>-1&&(Se===-1||de<Se)?(we=U.substring(0,de).split(":"),$.username=we[0]?o.decode(we[0]):null,we.shift(),$.password=we[0]?o.decode(we.join(":")):null,U=he.substring(de+1)):($.username=null,$.password=null),U},o.parseQuery=function(U,$){if(!U)return{};if(U=U.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!U)return{};for(var he={},Ce=U.split("&"),Se=Ce.length,de,we,Ue,ye=0;ye<Se;ye++)de=Ce[ye].split("="),we=o.decodeQuery(de.shift(),$),Ue=de.length?o.decodeQuery(de.join("="),$):null,we!=="__proto__"&&(h.call(he,we)?((typeof he[we]=="string"||he[we]===null)&&(he[we]=[he[we]]),he[we].push(Ue)):he[we]=Ue);return he},o.build=function(U){var $="",he=!1;return U.protocol&&($+=U.protocol+":"),!U.urn&&($||U.hostname)&&($+="//",he=!0),$+=o.buildAuthority(U)||"",typeof U.path=="string"&&(U.path.charAt(0)!=="/"&&he&&($+="/"),$+=U.path),typeof U.query=="string"&&U.query&&($+="?"+U.query),typeof U.fragment=="string"&&U.fragment&&($+="#"+U.fragment),$},o.buildHost=function(U){var $="";if(U.hostname)o.ip6_expression.test(U.hostname)?$+="["+U.hostname+"]":$+=U.hostname;else return"";return U.port&&($+=":"+U.port),$},o.buildAuthority=function(U){return o.buildUserinfo(U)+o.buildHost(U)},o.buildUserinfo=function(U){var $="";return U.username&&($+=o.encode(U.username)),U.password&&($+=":"+o.encode(U.password)),$&&($+="@"),$},o.buildQuery=function(U,$,he){var Ce="",Se,de,we,Ue;for(de in U)if(de!=="__proto__"&&h.call(U,de))if(T(U[de]))for(Se={},we=0,Ue=U[de].length;we<Ue;we++)U[de][we]!==void 0&&Se[U[de][we]+""]===void 0&&(Ce+="&"+o.buildQueryParameter(de,U[de][we],he),$!==!0&&(Se[U[de][we]+""]=!0));else U[de]!==void 0&&(Ce+="&"+o.buildQueryParameter(de,U[de],he));return Ce.substring(1)},o.buildQueryParameter=function(U,$,he){return o.encodeQuery(U,he)+($!==null?"="+o.encodeQuery($,he):"")},o.addQuery=function(U,$,he){if(typeof $=="object")for(var Ce in $)h.call($,Ce)&&o.addQuery(U,Ce,$[Ce]);else if(typeof $=="string"){if(U[$]===void 0){U[$]=he;return}else typeof U[$]=="string"&&(U[$]=[U[$]]);T(he)||(he=[he]),U[$]=(U[$]||[]).concat(he)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},o.setQuery=function(U,$,he){if(typeof $=="object")for(var Ce in $)h.call($,Ce)&&o.setQuery(U,Ce,$[Ce]);else if(typeof $=="string")U[$]=he===void 0?null:he;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},o.removeQuery=function(U,$,he){var Ce,Se,de;if(T($))for(Ce=0,Se=$.length;Ce<Se;Ce++)U[$[Ce]]=void 0;else if(w($)==="RegExp")for(de in U)$.test(de)&&(U[de]=void 0);else if(typeof $=="object")for(de in $)h.call($,de)&&o.removeQuery(U,de,$[de]);else if(typeof $=="string")he!==void 0?w(he)==="RegExp"?!T(U[$])&&he.test(U[$])?U[$]=void 0:U[$]=I(U[$],he):U[$]===String(he)&&(!T(he)||he.length===1)?U[$]=void 0:T(U[$])&&(U[$]=I(U[$],he)):U[$]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},o.hasQuery=function(U,$,he,Ce){switch(w($)){case"String":break;case"RegExp":for(var Se in U)if(h.call(U,Se)&&$.test(Se)&&(he===void 0||o.hasQuery(U,Se,he)))return!0;return!1;case"Object":for(var de in $)if(h.call($,de)&&!o.hasQuery(U,de,$[de]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(w(he)){case"Undefined":return $ in U;case"Boolean":var we=!!(T(U[$])?U[$].length:U[$]);return he===we;case"Function":return!!he(U[$],$,U);case"Array":if(!T(U[$]))return!1;var Ue=Ce?P:L;return Ue(U[$],he);case"RegExp":return T(U[$])?Ce?P(U[$],he):!1:!!(U[$]&&U[$].match(he));case"Number":he=String(he);case"String":return T(U[$])?Ce?P(U[$],he):!1:U[$]===he;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},o.joinPaths=function(){for(var U=[],$=[],he=0,Ce=0;Ce<arguments.length;Ce++){var Se=new o(arguments[Ce]);U.push(Se);for(var de=Se.segment(),we=0;we<de.length;we++)typeof de[we]=="string"&&$.push(de[we]),de[we]&&he++}if(!$.length||!he)return new o("");var Ue=new o("").segment($);return(U[0].path()===""||U[0].path().slice(0,1)==="/")&&Ue.path("/"+Ue.path()),Ue.normalize()},o.commonPath=function(U,$){var he=Math.min(U.length,$.length),Ce;for(Ce=0;Ce<he;Ce++)if(U.charAt(Ce)!==$.charAt(Ce)){Ce--;break}return Ce<1?U.charAt(0)===$.charAt(0)&&U.charAt(0)==="/"?"/":"":((U.charAt(Ce)!=="/"||$.charAt(Ce)!=="/")&&(Ce=U.substring(0,Ce).lastIndexOf("/")),U.substring(0,Ce+1))},o.withinString=function(U,$,he){he||(he={});var Ce=he.start||o.findUri.start,Se=he.end||o.findUri.end,de=he.trim||o.findUri.trim,we=he.parens||o.findUri.parens,Ue=/[a-z0-9-]=["']?$/i;for(Ce.lastIndex=0;;){var ye=Ce.exec(U);if(!ye)break;var ne=ye.index;if(he.ignoreHtml){var st=U.slice(Math.max(ne-3,0),ne);if(st&&Ue.test(st))continue}for(var dt=ne+U.slice(ne).search(Se),lt=U.slice(ne,dt),kt=-1;;){var ut=we.exec(lt);if(!ut)break;var Ut=ut.index+ut[0].length;kt=Math.max(kt,Ut)}if(kt>-1?lt=lt.slice(0,kt)+lt.slice(kt).replace(de,""):lt=lt.replace(de,""),!(lt.length<=ye[0].length)&&!(he.ignore&&he.ignore.test(lt))){dt=ne+lt.length;var Wt=$(lt,ne,dt,U);if(Wt===void 0){Ce.lastIndex=dt;continue}Wt=String(Wt),U=U.slice(0,ne)+Wt+U.slice(dt),Ce.lastIndex=ne+Wt.length}}return Ce.lastIndex=0,U},o.ensureValidHostname=function(U,$){var he=!!U,Ce=!!$,Se=!1;if(Ce&&(Se=P(o.hostProtocols,$)),Se&&!he)throw new TypeError("Hostname cannot be empty, if protocol is "+$);if(U&&U.match(o.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+U+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(U).match(o.invalid_hostname_characters))throw new TypeError('Hostname "'+U+'" contains characters other than [A-Z0-9.-:_]')}},o.ensureValidPort=function(U){if(U){var $=Number(U);if(!(s($)&&$>0&&$<65536))throw new TypeError('Port "'+U+'" is not a valid port')}},o.noConflict=function(U){if(U){var $={URI:this.noConflict()};return n.URITemplate&&typeof n.URITemplate.noConflict=="function"&&($.URITemplate=n.URITemplate.noConflict()),n.IPv6&&typeof n.IPv6.noConflict=="function"&&($.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&typeof n.SecondLevelDomains.noConflict=="function"&&($.SecondLevelDomains=n.SecondLevelDomains.noConflict()),$}else n.URI===this&&(n.URI=i);return this},u.build=function(U){return U===!0?this._deferred_build=!0:(U===void 0||this._deferred_build)&&(this._string=o.build(this._parts),this._deferred_build=!1),this},u.clone=function(){return new o(this)},u.valueOf=u.toString=function(){return this.build(!1)._string};function j(U){return function($,he){return $===void 0?this._parts[U]||"":(this._parts[U]=$||null,this.build(!he),this)}}function Q(U,$){return function(he,Ce){return he===void 0?this._parts[U]||"":(he!==null&&(he=he+"",he.charAt(0)===$&&(he=he.substring(1))),this._parts[U]=he,this.build(!Ce),this)}}u.protocol=j("protocol"),u.username=j("username"),u.password=j("password"),u.hostname=j("hostname"),u.port=j("port"),u.query=Q("query","?"),u.fragment=Q("fragment","#"),u.search=function(U,$){var he=this.query(U,$);return typeof he=="string"&&he.length?"?"+he:he},u.hash=function(U,$){var he=this.fragment(U,$);return typeof he=="string"&&he.length?"#"+he:he},u.pathname=function(U,$){if(U===void 0||U===!0){var he=this._parts.path||(this._parts.hostname?"/":"");return U?(this._parts.urn?o.decodeUrnPath:o.decodePath)(he):he}else return this._parts.urn?this._parts.path=U?o.recodeUrnPath(U):"":this._parts.path=U?o.recodePath(U):"/",this.build(!$),this},u.path=u.pathname,u.href=function(U,$){var he;if(U===void 0)return this.toString();this._string="",this._parts=o._parts();var Ce=U instanceof o,Se=typeof U=="object"&&(U.hostname||U.path||U.pathname);if(U.nodeName){var de=o.getDomAttribute(U);U=U[de]||"",Se=!1}if(!Ce&&Se&&U.pathname!==void 0&&(U=U.toString()),typeof U=="string"||U instanceof String)this._parts=o.parse(String(U),this._parts);else if(Ce||Se){var we=Ce?U._parts:U;for(he in we)he!=="query"&&h.call(this._parts,he)&&(this._parts[he]=we[he]);we.query&&this.query(we.query,!1)}else throw new TypeError("invalid input");return this.build(!$),this},u.is=function(U){var $=!1,he=!1,Ce=!1,Se=!1,de=!1,we=!1,Ue=!1,ye=!this._parts.urn;switch(this._parts.hostname&&(ye=!1,he=o.ip4_expression.test(this._parts.hostname),Ce=o.ip6_expression.test(this._parts.hostname),$=he||Ce,Se=!$,de=Se&&r&&r.has(this._parts.hostname),we=Se&&o.idn_expression.test(this._parts.hostname),Ue=Se&&o.punycode_expression.test(this._parts.hostname)),U.toLowerCase()){case"relative":return ye;case"absolute":return!ye;case"domain":case"name":return Se;case"sld":return de;case"ip":return $;case"ip4":case"ipv4":case"inet4":return he;case"ip6":case"ipv6":case"inet6":return Ce;case"idn":return we;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return Ue}return null};var ee=u.protocol,se=u.port,me=u.hostname;u.protocol=function(U,$){if(U&&(U=U.replace(/:(\/\/)?$/,""),!U.match(o.protocol_expression)))throw new TypeError('Protocol "'+U+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return ee.call(this,U,$)},u.scheme=u.protocol,u.port=function(U,$){return this._parts.urn?U===void 0?"":this:(U!==void 0&&(U===0&&(U=null),U&&(U+="",U.charAt(0)===":"&&(U=U.substring(1)),o.ensureValidPort(U))),se.call(this,U,$))},u.hostname=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U!==void 0){var he={preventInvalidHostname:this._parts.preventInvalidHostname},Ce=o.parseHost(U,he);if(Ce!=="/")throw new TypeError('Hostname "'+U+'" contains characters other than [A-Z0-9.-]');U=he.hostname,this._parts.preventInvalidHostname&&o.ensureValidHostname(U,this._parts.protocol)}return me.call(this,U,$)},u.origin=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0){var he=this.protocol(),Ce=this.authority();return Ce?(he?he+"://":"")+this.authority():""}else{var Se=o(U);return this.protocol(Se.protocol()).authority(Se.authority()).build(!$),this}},u.host=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0)return this._parts.hostname?o.buildHost(this._parts):"";var he=o.parseHost(U,this._parts);if(he!=="/")throw new TypeError('Hostname "'+U+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},u.authority=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0)return this._parts.hostname?o.buildAuthority(this._parts):"";var he=o.parseAuthority(U,this._parts);if(he!=="/")throw new TypeError('Hostname "'+U+'" contains characters other than [A-Z0-9.-]');return this.build(!$),this},u.userinfo=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0){var he=o.buildUserinfo(this._parts);return he&&he.substring(0,he.length-1)}else return U[U.length-1]!=="@"&&(U+="@"),o.parseUserinfo(U,this._parts),this.build(!$),this},u.resource=function(U,$){var he;return U===void 0?this.path()+this.search()+this.hash():(he=o.parse(U),this._parts.path=he.path,this._parts.query=he.query,this._parts.fragment=he.fragment,this.build(!$),this)},u.subdomain=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0){if(!this._parts.hostname||this.is("IP"))return"";var he=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,he)||""}else{var Ce=this._parts.hostname.length-this.domain().length,Se=this._parts.hostname.substring(0,Ce),de=new RegExp("^"+y(Se));if(U&&U.charAt(U.length-1)!=="."&&(U+="."),U.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return U&&o.ensureValidHostname(U,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(de,U),this.build(!$),this}},u.domain=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(typeof U=="boolean"&&($=U,U=void 0),U===void 0){if(!this._parts.hostname||this.is("IP"))return"";var he=this._parts.hostname.match(/\./g);if(he&&he.length<2)return this._parts.hostname;var Ce=this._parts.hostname.length-this.tld($).length-1;return Ce=this._parts.hostname.lastIndexOf(".",Ce-1)+1,this._parts.hostname.substring(Ce)||""}else{if(!U)throw new TypeError("cannot set domain empty");if(U.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(o.ensureValidHostname(U,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=U;else{var Se=new RegExp(y(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(Se,U)}return this.build(!$),this}},u.tld=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(typeof U=="boolean"&&($=U,U=void 0),U===void 0){if(!this._parts.hostname||this.is("IP"))return"";var he=this._parts.hostname.lastIndexOf("."),Ce=this._parts.hostname.substring(he+1);return $!==!0&&r&&r.list[Ce.toLowerCase()]&&r.get(this._parts.hostname)||Ce}else{var Se;if(U)if(U.match(/[^a-zA-Z0-9-]/))if(r&&r.is(U))Se=new RegExp(y(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Se,U);else throw new TypeError('TLD "'+U+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");Se=new RegExp(y(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(Se,U)}else throw new TypeError("cannot set TLD empty");return this.build(!$),this}},u.directory=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0||U===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var he=this._parts.path.length-this.filename().length-1,Ce=this._parts.path.substring(0,he)||(this._parts.hostname?"/":"");return U?o.decodePath(Ce):Ce}else{var Se=this._parts.path.length-this.filename().length,de=this._parts.path.substring(0,Se),we=new RegExp("^"+y(de));return this.is("relative")||(U||(U="/"),U.charAt(0)!=="/"&&(U="/"+U)),U&&U.charAt(U.length-1)!=="/"&&(U+="/"),U=o.recodePath(U),this._parts.path=this._parts.path.replace(we,U),this.build(!$),this}},u.filename=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(typeof U!="string"){if(!this._parts.path||this._parts.path==="/")return"";var he=this._parts.path.lastIndexOf("/"),Ce=this._parts.path.substring(he+1);return U?o.decodePathSegment(Ce):Ce}else{var Se=!1;U.charAt(0)==="/"&&(U=U.substring(1)),U.match(/\.?\//)&&(Se=!0);var de=new RegExp(y(this.filename())+"$");return U=o.recodePath(U),this._parts.path=this._parts.path.replace(de,U),Se?this.normalizePath($):this.build(!$),this}},u.suffix=function(U,$){if(this._parts.urn)return U===void 0?"":this;if(U===void 0||U===!0){if(!this._parts.path||this._parts.path==="/")return"";var he=this.filename(),Ce=he.lastIndexOf("."),Se,de;return Ce===-1?"":(Se=he.substring(Ce+1),de=/^[a-z0-9%]+$/i.test(Se)?Se:"",U?o.decodePathSegment(de):de)}else{U.charAt(0)==="."&&(U=U.substring(1));var we=this.suffix(),Ue;if(we)U?Ue=new RegExp(y(we)+"$"):Ue=new RegExp(y("."+we)+"$");else{if(!U)return this;this._parts.path+="."+o.recodePath(U)}return Ue&&(U=o.recodePath(U),this._parts.path=this._parts.path.replace(Ue,U)),this.build(!$),this}},u.segment=function(U,$,he){var Ce=this._parts.urn?":":"/",Se=this.path(),de=Se.substring(0,1)==="/",we=Se.split(Ce);if(U!==void 0&&typeof U!="number"&&(he=$,$=U,U=void 0),U!==void 0&&typeof U!="number")throw new Error('Bad segment "'+U+'", must be 0-based integer');if(de&&we.shift(),U<0&&(U=Math.max(we.length+U,0)),$===void 0)return U===void 0?we:we[U];if(U===null||we[U]===void 0)if(T($)){we=[];for(var Ue=0,ye=$.length;Ue<ye;Ue++)!$[Ue].length&&(!we.length||!we[we.length-1].length)||(we.length&&!we[we.length-1].length&&we.pop(),we.push(R($[Ue])))}else($||typeof $=="string")&&($=R($),we[we.length-1]===""?we[we.length-1]=$:we.push($));else $?we[U]=R($):we.splice(U,1);return de&&we.unshift(""),this.path(we.join(Ce),he)},u.segmentCoded=function(U,$,he){var Ce,Se,de;if(typeof U!="number"&&(he=$,$=U,U=void 0),$===void 0){if(Ce=this.segment(U,$,he),!T(Ce))Ce=Ce!==void 0?o.decode(Ce):void 0;else for(Se=0,de=Ce.length;Se<de;Se++)Ce[Se]=o.decode(Ce[Se]);return Ce}if(!T($))$=typeof $=="string"||$ instanceof String?o.encode($):$;else for(Se=0,de=$.length;Se<de;Se++)$[Se]=o.encode($[Se]);return this.segment(U,$,he)};var ve=u.query;return u.query=function(U,$){if(U===!0)return o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof U=="function"){var he=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace),Ce=U.call(this,he);return this._parts.query=o.buildQuery(Ce||he,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this}else return U!==void 0&&typeof U!="string"?(this._parts.query=o.buildQuery(U,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!$),this):ve.call(this,U,$)},u.setQuery=function(U,$,he){var Ce=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof U=="string"||U instanceof String)Ce[U]=$!==void 0?$:null;else if(typeof U=="object")for(var Se in U)h.call(U,Se)&&(Ce[Se]=U[Se]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=o.buildQuery(Ce,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof U!="string"&&(he=$),this.build(!he),this},u.addQuery=function(U,$,he){var Ce=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.addQuery(Ce,U,$===void 0?null:$),this._parts.query=o.buildQuery(Ce,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof U!="string"&&(he=$),this.build(!he),this},u.removeQuery=function(U,$,he){var Ce=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.removeQuery(Ce,U,$),this._parts.query=o.buildQuery(Ce,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof U!="string"&&(he=$),this.build(!he),this},u.hasQuery=function(U,$,he){var Ce=o.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return o.hasQuery(Ce,U,$,he)},u.setSearch=u.setQuery,u.addSearch=u.addQuery,u.removeSearch=u.removeQuery,u.hasSearch=u.hasQuery,u.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},u.normalizeProtocol=function(U){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!U)),this},u.normalizeHostname=function(U){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&e&&(this._parts.hostname=e.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!U)),this},u.normalizePort=function(U){return typeof this._parts.protocol=="string"&&this._parts.port===o.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!U)),this},u.normalizePath=function(U){var $=this._parts.path;if(!$)return this;if(this._parts.urn)return this._parts.path=o.recodeUrnPath(this._parts.path),this.build(!U),this;if(this._parts.path==="/")return this;$=o.recodePath($);var he,Ce="",Se,de;for($.charAt(0)!=="/"&&(he=!0,$="/"+$),($.slice(-3)==="/.."||$.slice(-2)==="/.")&&($+="/"),$=$.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),he&&(Ce=$.substring(1).match(/^(\.\.\/)+/)||"",Ce&&(Ce=Ce[0]));Se=$.search(/\/\.\.(\/|$)/),Se!==-1;){if(Se===0){$=$.substring(3);continue}de=$.substring(0,Se).lastIndexOf("/"),de===-1&&(de=Se),$=$.substring(0,de)+$.substring(Se+3)}return he&&this.is("relative")&&($=Ce+$.substring(1)),this._parts.path=$,this.build(!U),this},u.normalizePathname=u.normalizePath,u.normalizeQuery=function(U){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(o.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!U)),this},u.normalizeFragment=function(U){return this._parts.fragment||(this._parts.fragment=null,this.build(!U)),this},u.normalizeSearch=u.normalizeQuery,u.normalizeHash=u.normalizeFragment,u.iso8859=function(){var U=o.encode,$=o.decode;o.encode=escape,o.decode=decodeURIComponent;try{this.normalize()}finally{o.encode=U,o.decode=$}return this},u.unicode=function(){var U=o.encode,$=o.decode;o.encode=G,o.decode=unescape;try{this.normalize()}finally{o.encode=U,o.decode=$}return this},u.readable=function(){var U=this.clone();U.username("").password("").normalize();var $="";if(U._parts.protocol&&($+=U._parts.protocol+"://"),U._parts.hostname&&(U.is("punycode")&&t?($+=t.toUnicode(U._parts.hostname),U._parts.port&&($+=":"+U._parts.port)):$+=U.host()),U._parts.hostname&&U._parts.path&&U._parts.path.charAt(0)!=="/"&&($+="/"),$+=U.path(!0),U._parts.query){for(var he="",Ce=0,Se=U._parts.query.split("&"),de=Se.length;Ce<de;Ce++){var we=(Se[Ce]||"").split("=");he+="&"+o.decodeQuery(we[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),we[1]!==void 0&&(he+="="+o.decodeQuery(we[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}$+="?"+he.substring(1)}return $+=o.decodeQuery(U.hash(),!0),$},u.absoluteTo=function(U){var $=this.clone(),he=["protocol","username","password","hostname","port"],Ce,Se,de;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(U instanceof o||(U=new o(U)),$._parts.protocol||($._parts.protocol=U._parts.protocol,this._parts.hostname))return $;for(Se=0;de=he[Se];Se++)$._parts[de]=U._parts[de];return $._parts.path?($._parts.path.substring(-2)===".."&&($._parts.path+="/"),$.path().charAt(0)!=="/"&&(Ce=U.directory(),Ce=Ce||(U.path().indexOf("/")===0?"/":""),$._parts.path=(Ce?Ce+"/":"")+$._parts.path,$.normalizePath())):($._parts.path=U._parts.path,$._parts.query||($._parts.query=U._parts.query)),$.build(),$},u.relativeTo=function(U){var $=this.clone().normalize(),he,Ce,Se,de,we;if($._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(U=new o(U).normalize(),he=$._parts,Ce=U._parts,de=$.path(),we=U.path(),de.charAt(0)!=="/")throw new Error("URI is already relative");if(we.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(he.protocol===Ce.protocol&&(he.protocol=null),he.username!==Ce.username||he.password!==Ce.password||he.protocol!==null||he.username!==null||he.password!==null)return $.build();if(he.hostname===Ce.hostname&&he.port===Ce.port)he.hostname=null,he.port=null;else return $.build();if(de===we)return he.path="",$.build();if(Se=o.commonPath(de,we),!Se)return $.build();var Ue=Ce.path.substring(Se.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return he.path=Ue+he.path.substring(Se.length)||"./",$.build()},u.equals=function(U){var $=this.clone(),he=new o(U),Ce={},Se={},de={},we,Ue,ye;if($.normalize(),he.normalize(),$.toString()===he.toString())return!0;if(we=$.query(),Ue=he.query(),$.query(""),he.query(""),$.toString()!==he.toString()||we.length!==Ue.length)return!1;Ce=o.parseQuery(we,this._parts.escapeQuerySpace),Se=o.parseQuery(Ue,this._parts.escapeQuerySpace);for(ye in Ce)if(h.call(Ce,ye)){if(T(Ce[ye])){if(!L(Ce[ye],Se[ye]))return!1}else if(Ce[ye]!==Se[ye])return!1;de[ye]=!0}for(ye in Se)if(h.call(Se,ye)&&!de[ye])return!1;return!0},u.preventInvalidHostname=function(U){return this._parts.preventInvalidHostname=!!U,this},u.duplicateQueryParameters=function(U){return this._parts.duplicateQueryParameters=!!U,this},u.escapeQuerySpace=function(U){return this._parts.escapeQuerySpace=!!U,this},o})});var io=J((g6,v6)=>{(function(t,e){typeof g6=="object"&&typeof v6<"u"?v6.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self,t.CodeMirror=e())})(g6,function(){"use strict";var t=navigator.userAgent,e=navigator.platform,r=/gecko\/\d/i.test(t),n=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),s=n||i||o,u=s&&(n?document.documentMode||6:+(o||i)[1]),h=!o&&/WebKit\//.test(t),y=h&&/Qt\/\d+\.\d+/.test(t),w=!o&&/Chrome\/(\d+)/.exec(t),T=w&&+w[1],I=/Opera\//.test(t),P=/Apple Computer/.test(navigator.vendor),L=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),R=/PhantomJS/.test(t),W=P&&(/Mobile\/\w+/.test(t)||navigator.maxTouchPoints>2),G=/Android/.test(t),q=W||G||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),V=W||/Mac/.test(e),p=/\bCrOS\b/.test(t),K=/win/i.test(e),j=I&&t.match(/Version\/(\d*\.\d*)/);j&&(j=Number(j[1])),j&&j>=15&&(I=!1,h=!0);var Q=V&&(y||I&&(j==null||j<12.11)),ee=r||s&&u>=9;function se(c){return new RegExp("(^|\\s)"+c+"(?:$|\\s)\\s*")}var me=function(c,m){var E=c.className,S=se(m).exec(E);if(S){var C=E.slice(S.index+S[0].length);c.className=E.slice(0,S.index)+(C?S[1]+C:"")}};function ve(c){for(var m=c.childNodes.length;m>0;--m)c.removeChild(c.firstChild);return c}function U(c,m){return ve(c).appendChild(m)}function $(c,m,E,S){var C=document.createElement(c);if(E&&(C.className=E),S&&(C.style.cssText=S),typeof m=="string")C.appendChild(document.createTextNode(m));else if(m)for(var B=0;B<m.length;++B)C.appendChild(m[B]);return C}function he(c,m,E,S){var C=$(c,m,E,S);return C.setAttribute("role","presentation"),C}var Ce;document.createRange?Ce=function(c,m,E,S){var C=document.createRange();return C.setEnd(S||c,E),C.setStart(c,m),C}:Ce=function(c,m,E){var S=document.body.createTextRange();try{S.moveToElementText(c.parentNode)}catch{return S}return S.collapse(!0),S.moveEnd("character",E),S.moveStart("character",m),S};function Se(c,m){if(m.nodeType==3&&(m=m.parentNode),c.contains)return c.contains(m);do if(m.nodeType==11&&(m=m.host),m==c)return!0;while(m=m.parentNode)}function de(c){var m=c.ownerDocument||c,E;try{E=c.activeElement}catch{E=m.body||null}for(;E&&E.shadowRoot&&E.shadowRoot.activeElement;)E=E.shadowRoot.activeElement;return E}function we(c,m){var E=c.className;se(m).test(E)||(c.className+=(E?" ":"")+m)}function Ue(c,m){for(var E=c.split(" "),S=0;S<E.length;S++)E[S]&&!se(E[S]).test(m)&&(m+=" "+E[S]);return m}var ye=function(c){c.select()};W?ye=function(c){c.selectionStart=0,c.selectionEnd=c.value.length}:s&&(ye=function(c){try{c.select()}catch{}});function ne(c){return c.display.wrapper.ownerDocument}function st(c){return dt(c.display.wrapper)}function dt(c){return c.getRootNode?c.getRootNode():c.ownerDocument}function lt(c){return ne(c).defaultView}function kt(c){var m=Array.prototype.slice.call(arguments,1);return function(){return c.apply(null,m)}}function ut(c,m,E){m||(m={});for(var S in c)c.hasOwnProperty(S)&&(E!==!1||!m.hasOwnProperty(S))&&(m[S]=c[S]);return m}function Ut(c,m,E,S,C){m==null&&(m=c.search(/[^\s\u00a0]/),m==-1&&(m=c.length));for(var B=S||0,Z=C||0;;){var re=c.indexOf("	",B);if(re<0||re>=m)return Z+(m-B);Z+=re-B,Z+=E-Z%E,B=re+1}}var Wt=function(){this.id=null,this.f=null,this.time=0,this.handler=kt(this.onTimeout,this)};Wt.prototype.onTimeout=function(c){c.id=0,c.time<=+new Date?c.f():setTimeout(c.handler,c.time-+new Date)},Wt.prototype.set=function(c,m){this.f=m;var E=+new Date+c;(!this.id||E<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,c),this.time=E)};function Ht(c,m){for(var E=0;E<c.length;++E)if(c[E]==m)return E;return-1}var pr=50,zr={toString:function(){return"CodeMirror.Pass"}},Jt={scroll:!1},Qr={origin:"*mouse"},Br={origin:"+move"};function Rr(c,m,E){for(var S=0,C=0;;){var B=c.indexOf("	",S);B==-1&&(B=c.length);var Z=B-S;if(B==c.length||C+Z>=m)return S+Math.min(Z,m-C);if(C+=B-S,C+=E-C%E,S=B+1,C>=m)return S}}var Be=[""];function Ge(c){for(;Be.length<=c;)Be.push(vt(Be)+" ");return Be[c]}function vt(c){return c[c.length-1]}function Kt(c,m){for(var E=[],S=0;S<c.length;S++)E[S]=m(c[S],S);return E}function rt(c,m,E){for(var S=0,C=E(m);S<c.length&&E(c[S])<=C;)S++;c.splice(S,0,m)}function Ct(){}function Tt(c,m){var E;return Object.create?E=Object.create(c):(Ct.prototype=c,E=new Ct),m&&ut(m,E),E}var ar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function er(c){return/\w/.test(c)||c>"\x80"&&(c.toUpperCase()!=c.toLowerCase()||ar.test(c))}function ir(c,m){return m?m.source.indexOf("\\w")>-1&&er(c)?!0:m.test(c):er(c)}function sr(c){for(var m in c)if(c.hasOwnProperty(m)&&c[m])return!1;return!0}var He=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Xe(c){return c.charCodeAt(0)>=768&&He.test(c)}function Rt(c,m,E){for(;(E<0?m>0:m<c.length)&&Xe(c.charAt(m));)m+=E;return m}function xr(c,m,E){for(var S=m>E?-1:1;;){if(m==E)return m;var C=(m+E)/2,B=S<0?Math.ceil(C):Math.floor(C);if(B==m)return c(B)?m:E;c(B)?E=B:m=B+S}}function Yn(c,m,E,S){if(!c)return S(m,E,"ltr",0);for(var C=!1,B=0;B<c.length;++B){var Z=c[B];(Z.from<E&&Z.to>m||m==E&&Z.to==m)&&(S(Math.max(Z.from,m),Math.min(Z.to,E),Z.level==1?"rtl":"ltr",B),C=!0)}C||S(m,E,"ltr")}var kn=null;function Cn(c,m,E){var S;kn=null;for(var C=0;C<c.length;++C){var B=c[C];if(B.from<m&&B.to>m)return C;B.to==m&&(B.from!=B.to&&E=="before"?S=C:kn=C),B.from==m&&(B.from!=B.to&&E!="before"?S=C:kn=C)}return S??kn}var wt=function(){var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",m="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function E(xe){return xe<=247?c.charAt(xe):1424<=xe&&xe<=1524?"R":1536<=xe&&xe<=1785?m.charAt(xe-1536):1774<=xe&&xe<=2220?"r":8192<=xe&&xe<=8203?"w":xe==8204?"b":"L"}var S=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,C=/[stwN]/,B=/[LRr]/,Z=/[Lb1n]/,re=/[1n]/;function le(xe,We,Je){this.level=xe,this.from=We,this.to=Je}return function(xe,We){var Je=We=="ltr"?"L":"R";if(xe.length==0||We=="ltr"&&!S.test(xe))return!1;for(var Et=xe.length,bt=[],$t=0;$t<Et;++$t)bt.push(E(xe.charCodeAt($t)));for(var rr=0,gr=Je;rr<Et;++rr){var Tr=bt[rr];Tr=="m"?bt[rr]=gr:gr=Tr}for(var Fr=0,kr=Je;Fr<Et;++Fr){var Hr=bt[Fr];Hr=="1"&&kr=="r"?bt[Fr]="n":B.test(Hr)&&(kr=Hr,Hr=="r"&&(bt[Fr]="R"))}for(var dn=1,fn=bt[0];dn<Et-1;++dn){var Zn=bt[dn];Zn=="+"&&fn=="1"&&bt[dn+1]=="1"?bt[dn]="1":Zn==","&&fn==bt[dn+1]&&(fn=="1"||fn=="n")&&(bt[dn]=fn),fn=Zn}for(var Vi=0;Vi<Et;++Vi){var Do=bt[Vi];if(Do==",")bt[Vi]="N";else if(Do=="%"){var so=void 0;for(so=Vi+1;so<Et&&bt[so]=="%";++so);for(var _i=Vi&&bt[Vi-1]=="!"||so<Et&&bt[so]=="1"?"1":"N",Oo=Vi;Oo<so;++Oo)bt[Oo]=_i;Vi=so-1}}for(var ci=0,ss=Je;ci<Et;++ci){var Fa=bt[ci];ss=="L"&&Fa=="1"?bt[ci]="L":B.test(Fa)&&(ss=Fa)}for(var Ti=0;Ti<Et;++Ti)if(C.test(bt[Ti])){var Ea=void 0;for(Ea=Ti+1;Ea<Et&&C.test(bt[Ea]);++Ea);for(var Yo=(Ti?bt[Ti-1]:Je)=="L",yl=(Ea<Et?bt[Ea]:Je)=="L",gd=Yo==yl?Yo?"L":"R":Je,Pc=Ti;Pc<Ea;++Pc)bt[Pc]=gd;Ti=Ea-1}for(var ls=[],Mc,Ja=0;Ja<Et;)if(Z.test(bt[Ja])){var wh=Ja;for(++Ja;Ja<Et&&Z.test(bt[Ja]);++Ja);ls.push(new le(0,wh,Ja))}else{var Mu=Ja,Pf=ls.length,Mf=We=="rtl"?1:0;for(++Ja;Ja<Et&&bt[Ja]!="L";++Ja);for(var Qs=Mu;Qs<Ja;)if(re.test(bt[Qs])){Mu<Qs&&(ls.splice(Pf,0,new le(1,Mu,Qs)),Pf+=Mf);var vd=Qs;for(++Qs;Qs<Ja&&re.test(bt[Qs]);++Qs);ls.splice(Pf,0,new le(2,vd,Qs)),Pf+=Mf,Mu=Qs}else++Qs;Mu<Ja&&ls.splice(Pf,0,new le(1,Mu,Ja))}return We=="ltr"&&(ls[0].level==1&&(Mc=xe.match(/^\s+/))&&(ls[0].from=Mc[0].length,ls.unshift(new le(0,0,Mc[0].length))),vt(ls).level==1&&(Mc=xe.match(/\s+$/))&&(vt(ls).to-=Mc[0].length,ls.push(new le(0,Et-Mc[0].length,Et)))),We=="rtl"?ls.reverse():ls}}();function Ot(c,m){var E=c.order;return E==null&&(E=c.order=wt(c.text,m)),E}var wr=[],tr=function(c,m,E){if(c.addEventListener)c.addEventListener(m,E,!1);else if(c.attachEvent)c.attachEvent("on"+m,E);else{var S=c._handlers||(c._handlers={});S[m]=(S[m]||wr).concat(E)}};function on(c,m){return c._handlers&&c._handlers[m]||wr}function pn(c,m,E){if(c.removeEventListener)c.removeEventListener(m,E,!1);else if(c.detachEvent)c.detachEvent("on"+m,E);else{var S=c._handlers,C=S&&S[m];if(C){var B=Ht(C,E);B>-1&&(S[m]=C.slice(0,B).concat(C.slice(B+1)))}}}function tn(c,m){var E=on(c,m);if(E.length)for(var S=Array.prototype.slice.call(arguments,2),C=0;C<E.length;++C)E[C].apply(null,S)}function Rn(c,m,E){return typeof m=="string"&&(m={type:m,preventDefault:function(){this.defaultPrevented=!0}}),tn(c,E||m.type,c,m),Ft(m)||m.codemirrorIgnore}function Si(c){var m=c._handlers&&c._handlers.cursorActivity;if(m)for(var E=c.curOp.cursorActivityHandlers||(c.curOp.cursorActivityHandlers=[]),S=0;S<m.length;++S)Ht(E,m[S])==-1&&E.push(m[S])}function Ei(c,m){return on(c,m).length>0}function qe(c){c.prototype.on=function(m,E){tr(this,m,E)},c.prototype.off=function(m,E){pn(this,m,E)}}function ze(c){c.preventDefault?c.preventDefault():c.returnValue=!1}function mt(c){c.stopPropagation?c.stopPropagation():c.cancelBubble=!0}function Ft(c){return c.defaultPrevented!=null?c.defaultPrevented:c.returnValue==!1}function fr(c){ze(c),mt(c)}function yr(c){return c.target||c.srcElement}function an(c){var m=c.which;return m==null&&(c.button&1?m=1:c.button&2?m=3:c.button&4&&(m=2)),V&&c.ctrlKey&&m==1&&(m=3),m}var Or=function(){if(s&&u<9)return!1;var c=$("div");return"draggable"in c||"dragDrop"in c}(),bn;function Pr(c){if(bn==null){var m=$("span","\u200B");U(c,$("span",[m,document.createTextNode("x")])),c.firstChild.offsetHeight!=0&&(bn=m.offsetWidth<=1&&m.offsetHeight>2&&!(s&&u<8))}var E=bn?$("span","\u200B"):$("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return E.setAttribute("cm-text",""),E}var Yr;function Sn(c){if(Yr!=null)return Yr;var m=U(c,document.createTextNode("A\u062EA")),E=Ce(m,0,1).getBoundingClientRect(),S=Ce(m,1,2).getBoundingClientRect();return ve(c),!E||E.left==E.right?!1:Yr=S.right-E.right<3}var ii=`

b`.split(/\n/).length!=3?function(c){for(var m=0,E=[],S=c.length;m<=S;){var C=c.indexOf(`
`,m);C==-1&&(C=c.length);var B=c.slice(m,c.charAt(C-1)=="\r"?C-1:C),Z=B.indexOf("\r");Z!=-1?(E.push(B.slice(0,Z)),m+=Z+1):(E.push(B),m=C+1)}return E}:function(c){return c.split(/\r\n?|\n/)},Xn=window.getSelection?function(c){try{return c.selectionStart!=c.selectionEnd}catch{return!1}}:function(c){var m;try{m=c.ownerDocument.selection.createRange()}catch{}return!m||m.parentElement()!=c?!1:m.compareEndPoints("StartToEnd",m)!=0},ha=function(){var c=$("div");return"oncopy"in c?!0:(c.setAttribute("oncopy","return;"),typeof c.oncopy=="function")}(),xn=null;function pe(c){if(xn!=null)return xn;var m=U(c,$("span","x")),E=m.getBoundingClientRect(),S=Ce(m,0,1).getBoundingClientRect();return xn=Math.abs(E.left-S.left)>1}var Ee={},ke={};function oe(c,m){arguments.length>2&&(m.dependencies=Array.prototype.slice.call(arguments,2)),Ee[c]=m}function Fe(c,m){ke[c]=m}function Pe(c){if(typeof c=="string"&&ke.hasOwnProperty(c))c=ke[c];else if(c&&typeof c.name=="string"&&ke.hasOwnProperty(c.name)){var m=ke[c.name];typeof m=="string"&&(m={name:m}),c=Tt(m,c),c.name=m.name}else{if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(c))return Pe("application/xml");if(typeof c=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(c))return Pe("application/json")}return typeof c=="string"?{name:c}:c||{name:"null"}}function _e(c,m){m=Pe(m);var E=Ee[m.name];if(!E)return _e(c,"text/plain");var S=E(c,m);if(fe.hasOwnProperty(m.name)){var C=fe[m.name];for(var B in C)C.hasOwnProperty(B)&&(S.hasOwnProperty(B)&&(S["_"+B]=S[B]),S[B]=C[B])}if(S.name=m.name,m.helperType&&(S.helperType=m.helperType),m.modeProps)for(var Z in m.modeProps)S[Z]=m.modeProps[Z];return S}var fe={};function Ie(c,m){var E=fe.hasOwnProperty(c)?fe[c]:fe[c]={};ut(m,E)}function nt(c,m){if(m===!0)return m;if(c.copyState)return c.copyState(m);var E={};for(var S in m){var C=m[S];C instanceof Array&&(C=C.concat([])),E[S]=C}return E}function zt(c,m){for(var E;c.innerMode&&(E=c.innerMode(m),!(!E||E.mode==c));)m=E.state,c=E.mode;return E||{mode:c,state:m}}function Vt(c,m,E){return c.startState?c.startState(m,E):!0}var pt=function(c,m,E){this.pos=this.start=0,this.string=c,this.tabSize=m||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=E};pt.prototype.eol=function(){return this.pos>=this.string.length},pt.prototype.sol=function(){return this.pos==this.lineStart},pt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},pt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},pt.prototype.eat=function(c){var m=this.string.charAt(this.pos),E;if(typeof c=="string"?E=m==c:E=m&&(c.test?c.test(m):c(m)),E)return++this.pos,m},pt.prototype.eatWhile=function(c){for(var m=this.pos;this.eat(c););return this.pos>m},pt.prototype.eatSpace=function(){for(var c=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c},pt.prototype.skipToEnd=function(){this.pos=this.string.length},pt.prototype.skipTo=function(c){var m=this.string.indexOf(c,this.pos);if(m>-1)return this.pos=m,!0},pt.prototype.backUp=function(c){this.pos-=c},pt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ut(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Ut(this.string,this.lineStart,this.tabSize):0)},pt.prototype.indentation=function(){return Ut(this.string,null,this.tabSize)-(this.lineStart?Ut(this.string,this.lineStart,this.tabSize):0)},pt.prototype.match=function(c,m,E){if(typeof c=="string"){var S=function(Z){return E?Z.toLowerCase():Z},C=this.string.substr(this.pos,c.length);if(S(C)==S(c))return m!==!1&&(this.pos+=c.length),!0}else{var B=this.string.slice(this.pos).match(c);return B&&B.index>0?null:(B&&m!==!1&&(this.pos+=B[0].length),B)}},pt.prototype.current=function(){return this.string.slice(this.start,this.pos)},pt.prototype.hideFirstChars=function(c,m){this.lineStart+=c;try{return m()}finally{this.lineStart-=c}},pt.prototype.lookAhead=function(c){var m=this.lineOracle;return m&&m.lookAhead(c)},pt.prototype.baseToken=function(){var c=this.lineOracle;return c&&c.baseToken(this.pos)};function _t(c,m){if(m-=c.first,m<0||m>=c.size)throw new Error("There is no line "+(m+c.first)+" in the document.");for(var E=c;!E.lines;)for(var S=0;;++S){var C=E.children[S],B=C.chunkSize();if(m<B){E=C;break}m-=B}return E.lines[m]}function _r(c,m,E){var S=[],C=m.line;return c.iter(m.line,E.line+1,function(B){var Z=B.text;C==E.line&&(Z=Z.slice(0,E.ch)),C==m.line&&(Z=Z.slice(m.ch)),S.push(Z),++C}),S}function dr(c,m,E){var S=[];return c.iter(m,E,function(C){S.push(C.text)}),S}function Mt(c,m){var E=m-c.height;if(E)for(var S=c;S;S=S.parent)S.height+=E}function ce(c){if(c.parent==null)return null;for(var m=c.parent,E=Ht(m.lines,c),S=m.parent;S;m=S,S=S.parent)for(var C=0;S.children[C]!=m;++C)E+=S.children[C].chunkSize();return E+m.first}function Re(c,m){var E=c.first;e:do{for(var S=0;S<c.children.length;++S){var C=c.children[S],B=C.height;if(m<B){c=C;continue e}m-=B,E+=C.chunkSize()}return E}while(!c.lines);for(var Z=0;Z<c.lines.length;++Z){var re=c.lines[Z],le=re.height;if(m<le)break;m-=le}return E+Z}function ct(c,m){return m>=c.first&&m<c.first+c.size}function jt(c,m){return String(c.lineNumberFormatter(m+c.firstLineNumber))}function it(c,m,E){if(E===void 0&&(E=null),!(this instanceof it))return new it(c,m,E);this.line=c,this.ch=m,this.sticky=E}function Qt(c,m){return c.line-m.line||c.ch-m.ch}function rn(c,m){return c.sticky==m.sticky&&Qt(c,m)==0}function un(c){return it(c.line,c.ch)}function En(c,m){return Qt(c,m)<0?m:c}function Mn(c,m){return Qt(c,m)<0?c:m}function Va(c,m){return Math.max(c.first,Math.min(m,c.first+c.size-1))}function Nr(c,m){if(m.line<c.first)return it(c.first,0);var E=c.first+c.size-1;return m.line>E?it(E,_t(c,E).text.length):ko(m,_t(c,m.line).text.length)}function ko(c,m){var E=c.ch;return E==null||E>m?it(c.line,m):E<0?it(c.line,0):c}function yi(c,m){for(var E=[],S=0;S<m.length;S++)E[S]=Nr(c,m[S]);return E}var Fn=function(c,m){this.state=c,this.lookAhead=m},Vn=function(c,m,E,S){this.state=m,this.doc=c,this.line=E,this.maxLookAhead=S||0,this.baseTokens=null,this.baseTokenPos=1};Vn.prototype.lookAhead=function(c){var m=this.doc.getLine(this.line+c);return m!=null&&c>this.maxLookAhead&&(this.maxLookAhead=c),m},Vn.prototype.baseToken=function(c){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=c;)this.baseTokenPos+=2;var m=this.baseTokens[this.baseTokenPos+1];return{type:m&&m.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-c}},Vn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Vn.fromSaved=function(c,m,E){return m instanceof Fn?new Vn(c,nt(c.mode,m.state),E,m.lookAhead):new Vn(c,nt(c.mode,m),E)},Vn.prototype.save=function(c){var m=c!==!1?nt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Fn(m,this.maxLookAhead):m};function is(c,m,E,S){var C=[c.state.modeGen],B={};ta(c,m.text,c.doc.mode,E,function(xe,We){return C.push(xe,We)},B,S);for(var Z=E.state,re=function(xe){E.baseTokens=C;var We=c.state.overlays[xe],Je=1,Et=0;E.state=!0,ta(c,m.text,We.mode,E,function(bt,$t){for(var rr=Je;Et<bt;){var gr=C[Je];gr>bt&&C.splice(Je,1,bt,C[Je+1],gr),Je+=2,Et=Math.min(bt,gr)}if($t)if(We.opaque)C.splice(rr,Je-rr,bt,"overlay "+$t),Je=rr+2;else for(;rr<Je;rr+=2){var Tr=C[rr+1];C[rr+1]=(Tr?Tr+" ":"")+"overlay "+$t}},B),E.state=Z,E.baseTokens=null,E.baseTokenPos=1},le=0;le<c.state.overlays.length;++le)re(le);return{styles:C,classes:B.bgClass||B.textClass?B:null}}function xc(c,m,E){if(!m.styles||m.styles[0]!=c.state.modeGen){var S=bo(c,ce(m)),C=m.text.length>c.options.maxHighlightLength&&nt(c.doc.mode,S.state),B=is(c,m,S);C&&(S.state=C),m.stateAfter=S.save(!C),m.styles=B.styles,B.classes?m.styleClasses=B.classes:m.styleClasses&&(m.styleClasses=null),E===c.doc.highlightFrontier&&(c.doc.modeFrontier=Math.max(c.doc.modeFrontier,++c.doc.highlightFrontier))}return m.styles}function bo(c,m,E){var S=c.doc,C=c.display;if(!S.mode.startState)return new Vn(S,!0,m);var B=ol(c,m,E),Z=B>S.first&&_t(S,B-1).stateAfter,re=Z?Vn.fromSaved(S,Z,B):new Vn(S,Vt(S.mode),B);return S.iter(B,m,function(le){Go(c,le.text,re);var xe=re.line;le.stateAfter=xe==m-1||xe%5==0||xe>=C.viewFrom&&xe<C.viewTo?re.save():null,re.nextLine()}),E&&(S.modeFrontier=re.line),re}function Go(c,m,E,S){var C=c.doc.mode,B=new pt(m,c.options.tabSize,E);for(B.start=B.pos=S||0,m==""&&Qh(C,E.state);!B.eol();)wc(C,B,E.state),B.start=B.pos}function Qh(c,m){if(c.blankLine)return c.blankLine(m);if(c.innerMode){var E=zt(c,m);if(E.mode.blankLine)return E.mode.blankLine(E.state)}}function wc(c,m,E,S){for(var C=0;C<10;C++){S&&(S[0]=zt(c,E).mode);var B=c.token(m,E);if(m.pos>m.start)return B}throw new Error("Mode "+c.name+" failed to advance stream.")}var Co=function(c,m,E){this.start=c.start,this.end=c.pos,this.string=c.current(),this.type=m||null,this.state=E};function nf(c,m,E,S){var C=c.doc,B=C.mode,Z;m=Nr(C,m);var re=_t(C,m.line),le=bo(c,m.line,E),xe=new pt(re.text,c.options.tabSize,le),We;for(S&&(We=[]);(S||xe.pos<m.ch)&&!xe.eol();)xe.start=xe.pos,Z=wc(B,xe,le.state),S&&We.push(new Co(xe,Z,nt(C.mode,le.state)));return S?We:new Co(xe,Z,le.state)}function Ha(c,m){if(c)for(;;){var E=c.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!E)break;c=c.slice(0,E.index)+c.slice(E.index+E[0].length);var S=E[1]?"bgClass":"textClass";m[S]==null?m[S]=E[2]:new RegExp("(?:^|\\s)"+E[2]+"(?:$|\\s)").test(m[S])||(m[S]+=" "+E[2])}return c}function ta(c,m,E,S,C,B,Z){var re=E.flattenSpans;re==null&&(re=c.options.flattenSpans);var le=0,xe=null,We=new pt(m,c.options.tabSize,S),Je,Et=c.options.addModeClass&&[null];for(m==""&&Ha(Qh(E,S.state),B);!We.eol();){if(We.pos>c.options.maxHighlightLength?(re=!1,Z&&Go(c,m,S,We.pos),We.pos=m.length,Je=null):Je=Ha(wc(E,We,S.state,Et),B),Et){var bt=Et[0].name;bt&&(Je="m-"+(Je?bt+" "+Je:bt))}if(!re||xe!=Je){for(;le<We.start;)le=Math.min(We.start,le+5e3),C(le,xe);xe=Je}We.start=We.pos}for(;le<We.pos;){var $t=Math.min(We.pos,le+5e3);C($t,xe),le=$t}}function ol(c,m,E){for(var S,C,B=c.doc,Z=E?-1:m-(c.doc.mode.innerMode?1e3:100),re=m;re>Z;--re){if(re<=B.first)return B.first;var le=_t(B,re-1),xe=le.stateAfter;if(xe&&(!E||re+(xe instanceof Fn?xe.lookAhead:0)<=B.modeFrontier))return re;var We=Ut(le.text,null,c.options.tabSize);(C==null||S>We)&&(C=re-1,S=We)}return C}function oo(c,m){if(c.modeFrontier=Math.min(c.modeFrontier,m),!(c.highlightFrontier<m-10)){for(var E=c.first,S=m-1;S>E;S--){var C=_t(c,S).stateAfter;if(C&&(!(C instanceof Fn)||S+C.lookAhead<m)){E=S+1;break}}c.highlightFrontier=Math.min(c.highlightFrontier,E)}}var Il=!1,ra=!1;function om(){Il=!0}function Dl(){ra=!0}function Jd(c,m,E){this.marker=c,this.from=m,this.to=E}function al(c,m){if(c)for(var E=0;E<c.length;++E){var S=c[E];if(S.marker==m)return S}}function Wa(c,m){for(var E,S=0;S<c.length;++S)c[S]!=m&&(E||(E=[])).push(c[S]);return E}function Ol(c,m,E){var S=E&&window.WeakSet&&(E.markedSpans||(E.markedSpans=new WeakSet));S&&c.markedSpans&&S.has(c.markedSpans)?c.markedSpans.push(m):(c.markedSpans=c.markedSpans?c.markedSpans.concat([m]):[m],S&&S.add(c.markedSpans)),m.marker.attachLine(c)}function xs(c,m,E){var S;if(c)for(var C=0;C<c.length;++C){var B=c[C],Z=B.marker,re=B.from==null||(Z.inclusiveLeft?B.from<=m:B.from<m);if(re||B.from==m&&Z.type=="bookmark"&&(!E||!B.marker.insertLeft)){var le=B.to==null||(Z.inclusiveRight?B.to>=m:B.to>m);(S||(S=[])).push(new Jd(Z,B.from,le?null:B.to))}}return S}function of(c,m,E){var S;if(c)for(var C=0;C<c.length;++C){var B=c[C],Z=B.marker,re=B.to==null||(Z.inclusiveRight?B.to>=m:B.to>m);if(re||B.from==m&&Z.type=="bookmark"&&(!E||B.marker.insertLeft)){var le=B.from==null||(Z.inclusiveLeft?B.from<=m:B.from<m);(S||(S=[])).push(new Jd(Z,le?null:B.from-m,B.to==null?null:B.to-m))}}return S}function am(c,m){if(m.full)return null;var E=ct(c,m.from.line)&&_t(c,m.from.line).markedSpans,S=ct(c,m.to.line)&&_t(c,m.to.line).markedSpans;if(!E&&!S)return null;var C=m.from.ch,B=m.to.ch,Z=Qt(m.from,m.to)==0,re=xs(E,C,Z),le=of(S,B,Z),xe=m.text.length==1,We=vt(m.text).length+(xe?C:0);if(re)for(var Je=0;Je<re.length;++Je){var Et=re[Je];if(Et.to==null){var bt=al(le,Et.marker);bt?xe&&(Et.to=bt.to==null?null:bt.to+We):Et.to=C}}if(le)for(var $t=0;$t<le.length;++$t){var rr=le[$t];if(rr.to!=null&&(rr.to+=We),rr.from==null){var gr=al(re,rr.marker);gr||(rr.from=We,xe&&(re||(re=[])).push(rr))}else rr.from+=We,xe&&(re||(re=[])).push(rr)}re&&(re=Ig(re)),le&&le!=re&&(le=Ig(le));var Tr=[re];if(!xe){var Fr=m.text.length-2,kr;if(Fr>0&&re)for(var Hr=0;Hr<re.length;++Hr)re[Hr].to==null&&(kr||(kr=[])).push(new Jd(re[Hr].marker,null,null));for(var dn=0;dn<Fr;++dn)Tr.push(kr);Tr.push(le)}return Tr}function Ig(c){for(var m=0;m<c.length;++m){var E=c[m];E.from!=null&&E.from==E.to&&E.marker.clearWhenEmpty!==!1&&c.splice(m--,1)}return c.length?c:null}function sm(c,m,E){var S=null;if(c.iter(m.line,E.line+1,function(bt){if(bt.markedSpans)for(var $t=0;$t<bt.markedSpans.length;++$t){var rr=bt.markedSpans[$t].marker;rr.readOnly&&(!S||Ht(S,rr)==-1)&&(S||(S=[])).push(rr)}}),!S)return null;for(var C=[{from:m,to:E}],B=0;B<S.length;++B)for(var Z=S[B],re=Z.find(0),le=0;le<C.length;++le){var xe=C[le];if(!(Qt(xe.to,re.from)<0||Qt(xe.from,re.to)>0)){var We=[le,1],Je=Qt(xe.from,re.from),Et=Qt(xe.to,re.to);(Je<0||!Z.inclusiveLeft&&!Je)&&We.push({from:xe.from,to:re.from}),(Et>0||!Z.inclusiveRight&&!Et)&&We.push({from:re.to,to:xe.to}),C.splice.apply(C,We),le+=We.length-3}}return C}function co(c){var m=c.markedSpans;if(m){for(var E=0;E<m.length;++E)m[E].marker.detachLine(c);c.markedSpans=null}}function Ji(c,m){if(m){for(var E=0;E<m.length;++E)m[E].marker.attachLine(c);c.markedSpans=m}}function Qd(c){return c.inclusiveLeft?-1:0}function ed(c){return c.inclusiveRight?1:0}function ep(c,m){var E=c.lines.length-m.lines.length;if(E!=0)return E;var S=c.find(),C=m.find(),B=Qt(S.from,C.from)||Qd(c)-Qd(m);if(B)return-B;var Z=Qt(S.to,C.to)||ed(c)-ed(m);return Z||m.id-c.id}function af(c,m){var E=ra&&c.markedSpans,S;if(E)for(var C=void 0,B=0;B<E.length;++B)C=E[B],C.marker.collapsed&&(m?C.from:C.to)==null&&(!S||ep(S,C.marker)<0)&&(S=C.marker);return S}function tp(c){return af(c,!0)}function Sc(c){return af(c,!1)}function lm(c,m){var E=ra&&c.markedSpans,S;if(E)for(var C=0;C<E.length;++C){var B=E[C];B.marker.collapsed&&(B.from==null||B.from<m)&&(B.to==null||B.to>m)&&(!S||ep(S,B.marker)<0)&&(S=B.marker)}return S}function td(c,m,E,S,C){var B=_t(c,m),Z=ra&&B.markedSpans;if(Z)for(var re=0;re<Z.length;++re){var le=Z[re];if(le.marker.collapsed){var xe=le.marker.find(0),We=Qt(xe.from,E)||Qd(le.marker)-Qd(C),Je=Qt(xe.to,S)||ed(le.marker)-ed(C);if(!(We>=0&&Je<=0||We<=0&&Je>=0)&&(We<=0&&(le.marker.inclusiveRight&&C.inclusiveLeft?Qt(xe.to,E)>=0:Qt(xe.to,E)>0)||We>=0&&(le.marker.inclusiveRight&&C.inclusiveLeft?Qt(xe.from,S)<=0:Qt(xe.from,S)<0)))return!0}}}function ei(c){for(var m;m=tp(c);)c=m.find(-1,!0).line;return c}function mu(c){for(var m;m=Sc(c);)c=m.find(1,!0).line;return c}function Ws(c){for(var m,E;m=Sc(c);)c=m.find(1,!0).line,(E||(E=[])).push(c);return E}function gu(c,m){var E=_t(c,m),S=ei(E);return E==S?m:ce(S)}function Kl(c,m){if(m>c.lastLine())return m;var E=_t(c,m),S;if(!fo(c,E))return m;for(;S=Sc(E);)E=S.find(1,!0).line;return ce(E)+1}function fo(c,m){var E=ra&&m.markedSpans;if(E){for(var S=void 0,C=0;C<E.length;++C)if(S=E[C],!!S.marker.collapsed){if(S.from==null)return!0;if(!S.marker.widgetNode&&S.from==0&&S.marker.inclusiveLeft&&sf(c,m,S))return!0}}}function sf(c,m,E){if(E.to==null){var S=E.marker.find(1,!0);return sf(c,S.line,al(S.line.markedSpans,E.marker))}if(E.marker.inclusiveRight&&E.to==m.text.length)return!0;for(var C=void 0,B=0;B<m.markedSpans.length;++B)if(C=m.markedSpans[B],C.marker.collapsed&&!C.marker.widgetNode&&C.from==E.to&&(C.to==null||C.to!=E.from)&&(C.marker.inclusiveLeft||E.marker.inclusiveRight)&&sf(c,m,C))return!0}function Fo(c){c=ei(c);for(var m=0,E=c.parent,S=0;S<E.lines.length;++S){var C=E.lines[S];if(C==c)break;m+=C.height}for(var B=E.parent;B;E=B,B=E.parent)for(var Z=0;Z<B.children.length;++Z){var re=B.children[Z];if(re==E)break;m+=re.height}return m}function ho(c){if(c.height==0)return 0;for(var m=c.text.length,E,S=c;E=tp(S);){var C=E.find(0,!0);S=C.from.line,m+=C.from.ch-C.to.ch}for(S=c;E=Sc(S);){var B=E.find(0,!0);m-=S.text.length-B.from.ch,S=B.to.line,m+=S.text.length-B.to.ch}return m}function Vu(c){var m=c.display,E=c.doc;m.maxLine=_t(E,E.first),m.maxLineLength=ho(m.maxLine),m.maxLineChanged=!0,E.iter(function(S){var C=ho(S);C>m.maxLineLength&&(m.maxLineLength=C,m.maxLine=S)})}var Ec=function(c,m,E){this.text=c,Ji(this,m),this.height=E?E(this):1};Ec.prototype.lineNo=function(){return ce(this)},qe(Ec);function Dg(c,m,E,S){c.text=m,c.stateAfter&&(c.stateAfter=null),c.styles&&(c.styles=null),c.order!=null&&(c.order=null),co(c),Ji(c,E);var C=S?S(c):1;C!=c.height&&Mt(c,C)}function sl(c){c.parent=null,co(c)}var um={},$s={};function rp(c,m){if(!c||/^\s*$/.test(c))return null;var E=m.addModeClass?$s:um;return E[c]||(E[c]=c.replace(/\S+/g,"cm-$&"))}function rd(c,m){var E=he("span",null,null,h?"padding-right: .1px":null),S={pre:he("pre",[E],"CodeMirror-line"),content:E,col:0,pos:0,cm:c,trailingSpace:!1,splitSpaces:c.getOption("lineWrapping")};m.measure={};for(var C=0;C<=(m.rest?m.rest.length:0);C++){var B=C?m.rest[C-1]:m.line,Z=void 0;S.pos=0,S.addToken=nd,Sn(c.display.measure)&&(Z=Ot(B,c.doc.direction))&&(S.addToken=Qi(S.addToken,Z)),S.map=[];var re=m!=c.display.externalMeasured&&ce(B);np(B,S,xc(c,B,re)),B.styleClasses&&(B.styleClasses.bgClass&&(S.bgClass=Ue(B.styleClasses.bgClass,S.bgClass||"")),B.styleClasses.textClass&&(S.textClass=Ue(B.styleClasses.textClass,S.textClass||""))),S.map.length==0&&S.map.push(0,0,S.content.appendChild(Pr(c.display.measure))),C==0?(m.measure.map=S.map,m.measure.cache={}):((m.measure.maps||(m.measure.maps=[])).push(S.map),(m.measure.caches||(m.measure.caches=[])).push({}))}if(h){var le=S.content.lastChild;(/\bcm-tab\b/.test(le.className)||le.querySelector&&le.querySelector(".cm-tab"))&&(S.content.className="cm-tab-wrap-hack")}return tn(c,"renderLine",c,m.line,S.pre),S.pre.className&&(S.textClass=Ue(S.pre.className,S.textClass||"")),S}function Hu(c){var m=$("span","\u2022","cm-invalidchar");return m.title="\\u"+c.charCodeAt(0).toString(16),m.setAttribute("aria-label",m.title),m}function nd(c,m,E,S,C,B,Z){if(m){var re=c.splitSpaces?cm(m,c.trailingSpace):m,le=c.cm.state.specialChars,xe=!1,We;if(!le.test(m))c.col+=m.length,We=document.createTextNode(re),c.map.push(c.pos,c.pos+m.length,We),s&&u<9&&(xe=!0),c.pos+=m.length;else{We=document.createDocumentFragment();for(var Je=0;;){le.lastIndex=Je;var Et=le.exec(m),bt=Et?Et.index-Je:m.length-Je;if(bt){var $t=document.createTextNode(re.slice(Je,Je+bt));s&&u<9?We.appendChild($("span",[$t])):We.appendChild($t),c.map.push(c.pos,c.pos+bt,$t),c.col+=bt,c.pos+=bt}if(!Et)break;Je+=bt+1;var rr=void 0;if(Et[0]=="	"){var gr=c.cm.options.tabSize,Tr=gr-c.col%gr;rr=We.appendChild($("span",Ge(Tr),"cm-tab")),rr.setAttribute("role","presentation"),rr.setAttribute("cm-text","	"),c.col+=Tr}else Et[0]=="\r"||Et[0]==`
`?(rr=We.appendChild($("span",Et[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),rr.setAttribute("cm-text",Et[0]),c.col+=1):(rr=c.cm.options.specialCharPlaceholder(Et[0]),rr.setAttribute("cm-text",Et[0]),s&&u<9?We.appendChild($("span",[rr])):We.appendChild(rr),c.col+=1);c.map.push(c.pos,c.pos+1,rr),c.pos++}}if(c.trailingSpace=re.charCodeAt(m.length-1)==32,E||S||C||xe||B||Z){var Fr=E||"";S&&(Fr+=S),C&&(Fr+=C);var kr=$("span",[We],Fr,B);if(Z)for(var Hr in Z)Z.hasOwnProperty(Hr)&&Hr!="style"&&Hr!="class"&&kr.setAttribute(Hr,Z[Hr]);return c.content.appendChild(kr)}c.content.appendChild(We)}}function cm(c,m){if(c.length>1&&!/  /.test(c))return c;for(var E=m,S="",C=0;C<c.length;C++){var B=c.charAt(C);B==" "&&E&&(C==c.length-1||c.charCodeAt(C+1)==32)&&(B="\xA0"),S+=B,E=B==" "}return S}function Qi(c,m){return function(E,S,C,B,Z,re,le){C=C?C+" cm-force-border":"cm-force-border";for(var xe=E.pos,We=xe+S.length;;){for(var Je=void 0,Et=0;Et<m.length&&(Je=m[Et],!(Je.to>xe&&Je.from<=xe));Et++);if(Je.to>=We)return c(E,S,C,B,Z,re,le);c(E,S.slice(0,Je.to-xe),C,B,null,re,le),B=null,S=S.slice(Je.to-xe),xe=Je.to}}}function ll(c,m,E,S){var C=!S&&E.widgetNode;C&&c.map.push(c.pos,c.pos+m,C),!S&&c.cm.display.input.needsContentAttribute&&(C||(C=c.content.appendChild(document.createElement("span"))),C.setAttribute("cm-marker",E.id)),C&&(c.cm.display.input.setUneditable(C),c.content.appendChild(C)),c.pos+=m,c.trailingSpace=!1}function np(c,m,E){var S=c.markedSpans,C=c.text,B=0;if(!S){for(var Z=1;Z<E.length;Z+=2)m.addToken(m,C.slice(B,B=E[Z]),rp(E[Z+1],m.cm.options));return}for(var re=C.length,le=0,xe=1,We="",Je,Et,bt=0,$t,rr,gr,Tr,Fr;;){if(bt==le){$t=rr=gr=Et="",Fr=null,Tr=null,bt=1/0;for(var kr=[],Hr=void 0,dn=0;dn<S.length;++dn){var fn=S[dn],Zn=fn.marker;if(Zn.type=="bookmark"&&fn.from==le&&Zn.widgetNode)kr.push(Zn);else if(fn.from<=le&&(fn.to==null||fn.to>le||Zn.collapsed&&fn.to==le&&fn.from==le)){if(fn.to!=null&&fn.to!=le&&bt>fn.to&&(bt=fn.to,rr=""),Zn.className&&($t+=" "+Zn.className),Zn.css&&(Et=(Et?Et+";":"")+Zn.css),Zn.startStyle&&fn.from==le&&(gr+=" "+Zn.startStyle),Zn.endStyle&&fn.to==bt&&(Hr||(Hr=[])).push(Zn.endStyle,fn.to),Zn.title&&((Fr||(Fr={})).title=Zn.title),Zn.attributes)for(var Vi in Zn.attributes)(Fr||(Fr={}))[Vi]=Zn.attributes[Vi];Zn.collapsed&&(!Tr||ep(Tr.marker,Zn)<0)&&(Tr=fn)}else fn.from>le&&bt>fn.from&&(bt=fn.from)}if(Hr)for(var Do=0;Do<Hr.length;Do+=2)Hr[Do+1]==bt&&(rr+=" "+Hr[Do]);if(!Tr||Tr.from==le)for(var so=0;so<kr.length;++so)ll(m,0,kr[so]);if(Tr&&(Tr.from||0)==le){if(ll(m,(Tr.to==null?re+1:Tr.to)-le,Tr.marker,Tr.from==null),Tr.to==null)return;Tr.to==le&&(Tr=!1)}}if(le>=re)break;for(var _i=Math.min(re,bt);;){if(We){var Oo=le+We.length;if(!Tr){var ci=Oo>_i?We.slice(0,_i-le):We;m.addToken(m,ci,Je?Je+$t:$t,gr,le+ci.length==bt?rr:"",Et,Fr)}if(Oo>=_i){We=We.slice(_i-le),le=_i;break}le=Oo,gr=""}We=C.slice(B,B=E[xe++]),Je=rp(E[xe++],m.cm.options)}}}function Ma(c,m,E){this.line=m,this.rest=Ws(m),this.size=this.rest?ce(vt(this.rest))-E+1:1,this.node=this.text=null,this.hidden=fo(c,m)}function Tc(c,m,E){for(var S=[],C,B=m;B<E;B=C){var Z=new Ma(c.doc,_t(c.doc,B),B);C=B+Z.size,S.push(Z)}return S}var ul=null;function Ac(c){ul?ul.ops.push(c):c.ownsGroup=ul={ops:[c],delayedCallbacks:[]}}function lf(c){var m=c.delayedCallbacks,E=0;do{for(;E<m.length;E++)m[E].call(null);for(var S=0;S<c.ops.length;S++){var C=c.ops[S];if(C.cursorActivityHandlers)for(;C.cursorActivityCalled<C.cursorActivityHandlers.length;)C.cursorActivityHandlers[C.cursorActivityCalled++].call(null,C.cm)}}while(E<m.length)}function kc(c,m){var E=c.ownsGroup;if(E)try{lf(E)}finally{ul=null,m(E)}}var Ls=null;function zi(c,m){var E=on(c,m);if(E.length){var S=Array.prototype.slice.call(arguments,2),C;ul?C=ul.delayedCallbacks:Ls?C=Ls:(C=Ls=[],setTimeout(uf,0));for(var B=function(re){C.push(function(){return E[re].apply(null,S)})},Z=0;Z<E.length;++Z)B(Z)}}function uf(){var c=Ls;Ls=null;for(var m=0;m<c.length;++m)c[m]()}function vu(c,m,E,S){for(var C=0;C<m.changes.length;C++){var B=m.changes[C];B=="text"?Og(c,m):B=="gutter"?id(c,m,E,S):B=="class"?Qf(c,m):B=="widget"&&op(c,m,S)}m.changes=null}function cf(c){return c.node==c.text&&(c.node=$("div",null,null,"position: relative"),c.text.parentNode&&c.text.parentNode.replaceChild(c.node,c.text),c.node.appendChild(c.text),s&&u<8&&(c.node.style.zIndex=2)),c.node}function ip(c,m){var E=m.bgClass?m.bgClass+" "+(m.line.bgClass||""):m.line.bgClass;if(E&&(E+=" CodeMirror-linebackground"),m.background)E?m.background.className=E:(m.background.parentNode.removeChild(m.background),m.background=null);else if(E){var S=cf(m);m.background=S.insertBefore($("div",null,E),S.firstChild),c.display.input.setUneditable(m.background)}}function bi(c,m){var E=c.display.externalMeasured;return E&&E.line==m.line?(c.display.externalMeasured=null,m.measure=E.measure,E.built):rd(c,m)}function Og(c,m){var E=m.text.className,S=bi(c,m);m.text==m.node&&(m.node=S.pre),m.text.parentNode.replaceChild(S.pre,m.text),m.text=S.pre,S.bgClass!=m.bgClass||S.textClass!=m.textClass?(m.bgClass=S.bgClass,m.textClass=S.textClass,Qf(c,m)):E&&(m.text.className=E)}function Qf(c,m){ip(c,m),m.line.wrapClass?cf(m).className=m.line.wrapClass:m.node!=m.text&&(m.node.className="");var E=m.textClass?m.textClass+" "+(m.line.textClass||""):m.line.textClass;m.text.className=E||""}function id(c,m,E,S){if(m.gutter&&(m.node.removeChild(m.gutter),m.gutter=null),m.gutterBackground&&(m.node.removeChild(m.gutterBackground),m.gutterBackground=null),m.line.gutterClass){var C=cf(m);m.gutterBackground=$("div",null,"CodeMirror-gutter-background "+m.line.gutterClass,"left: "+(c.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px; width: "+S.gutterTotalWidth+"px"),c.display.input.setUneditable(m.gutterBackground),C.insertBefore(m.gutterBackground,m.text)}var B=m.line.gutterMarkers;if(c.options.lineNumbers||B){var Z=cf(m),re=m.gutter=$("div",null,"CodeMirror-gutter-wrapper","left: "+(c.options.fixedGutter?S.fixedPos:-S.gutterTotalWidth)+"px");if(re.setAttribute("aria-hidden","true"),c.display.input.setUneditable(re),Z.insertBefore(re,m.text),m.line.gutterClass&&(re.className+=" "+m.line.gutterClass),c.options.lineNumbers&&(!B||!B["CodeMirror-linenumbers"])&&(m.lineNumber=re.appendChild($("div",jt(c.options,E),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+S.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+c.display.lineNumInnerWidth+"px"))),B)for(var le=0;le<c.display.gutterSpecs.length;++le){var xe=c.display.gutterSpecs[le].className,We=B.hasOwnProperty(xe)&&B[xe];We&&re.appendChild($("div",[We],"CodeMirror-gutter-elt","left: "+S.gutterLeft[xe]+"px; width: "+S.gutterWidth[xe]+"px"))}}}function op(c,m,E){m.alignable&&(m.alignable=null);for(var S=se("CodeMirror-linewidget"),C=m.node.firstChild,B=void 0;C;C=B)B=C.nextSibling,S.test(C.className)&&m.node.removeChild(C);ap(c,m,E)}function Pg(c,m,E,S){var C=bi(c,m);return m.text=m.node=C.pre,C.bgClass&&(m.bgClass=C.bgClass),C.textClass&&(m.textClass=C.textClass),Qf(c,m),id(c,m,E,S),ap(c,m,S),m.node}function ap(c,m,E){if(da(c,m.line,m,E,!0),m.rest)for(var S=0;S<m.rest.length;S++)da(c,m.rest[S],m,E,!1)}function da(c,m,E,S,C){if(m.widgets)for(var B=cf(E),Z=0,re=m.widgets;Z<re.length;++Z){var le=re[Z],xe=$("div",[le.node],"CodeMirror-linewidget"+(le.className?" "+le.className:""));le.handleMouseEvents||xe.setAttribute("cm-ignore-events","true"),yu(le,xe,E,S),c.display.input.setUneditable(xe),C&&le.above?B.insertBefore(xe,E.gutter||E.text):B.appendChild(xe),zi(le,"redraw")}}function yu(c,m,E,S){if(c.noHScroll){(E.alignable||(E.alignable=[])).push(m);var C=S.wrapperWidth;m.style.left=S.fixedPos+"px",c.coverGutter||(C-=S.gutterTotalWidth,m.style.paddingLeft=S.gutterTotalWidth+"px"),m.style.width=C+"px"}c.coverGutter&&(m.style.zIndex=5,m.style.position="relative",c.noHScroll||(m.style.marginLeft=-S.gutterTotalWidth+"px"))}function Rs(c){if(c.height!=null)return c.height;var m=c.doc.cm;if(!m)return 0;if(!Se(document.body,c.node)){var E="position: relative;";c.coverGutter&&(E+="margin-left: -"+m.display.gutters.offsetWidth+"px;"),c.noHScroll&&(E+="width: "+m.display.wrapper.clientWidth+"px;"),U(m.display.measure,$("div",[c.node],null,E))}return c.height=c.node.parentNode.offsetHeight}function Zl(c,m){for(var E=yr(m);E!=c.wrapper;E=E.parentNode)if(!E||E.nodeType==1&&E.getAttribute("cm-ignore-events")=="true"||E.parentNode==c.sizer&&E!=c.mover)return!0}function eh(c){return c.lineSpace.offsetTop}function od(c){return c.mover.offsetHeight-c.lineSpace.offsetHeight}function Cc(c){if(c.cachedPaddingH)return c.cachedPaddingH;var m=U(c.measure,$("pre","x","CodeMirror-line-like")),E=window.getComputedStyle?window.getComputedStyle(m):m.currentStyle,S={left:parseInt(E.paddingLeft),right:parseInt(E.paddingRight)};return!isNaN(S.left)&&!isNaN(S.right)&&(c.cachedPaddingH=S),S}function Yl(c){return pr-c.display.nativeBarWidth}function cl(c){return c.display.scroller.clientWidth-Yl(c)-c.display.barWidth}function Wu(c){return c.display.scroller.clientHeight-Yl(c)-c.display.barHeight}function ff(c,m,E){var S=c.options.lineWrapping,C=S&&cl(c);if(!m.measure.heights||S&&m.measure.width!=C){var B=m.measure.heights=[];if(S){m.measure.width=C;for(var Z=m.text.firstChild.getClientRects(),re=0;re<Z.length-1;re++){var le=Z[re],xe=Z[re+1];Math.abs(le.bottom-xe.bottom)>2&&B.push((le.bottom+xe.top)/2-E.top)}}B.push(E.bottom-E.top)}}function th(c,m,E){if(c.line==m)return{map:c.measure.map,cache:c.measure.cache};if(c.rest){for(var S=0;S<c.rest.length;S++)if(c.rest[S]==m)return{map:c.measure.maps[S],cache:c.measure.caches[S]};for(var C=0;C<c.rest.length;C++)if(ce(c.rest[C])>E)return{map:c.measure.maps[C],cache:c.measure.caches[C],before:!0}}}function Gi(c,m){m=ei(m);var E=ce(m),S=c.display.externalMeasured=new Ma(c.doc,m,E);S.lineN=E;var C=S.built=rd(c,S);return S.text=C.pre,U(c.display.lineMeasure,C.pre),S}function hf(c,m,E,S){return Gs(c,$a(c,m),E,S)}function sp(c,m){if(m>=c.display.viewFrom&&m<c.display.viewTo)return c.display.view[wu(c,m)];var E=c.display.externalMeasured;if(E&&m>=E.lineN&&m<E.lineN+E.size)return E}function $a(c,m){var E=ce(m),S=sp(c,E);S&&!S.text?S=null:S&&S.changes&&(vu(c,S,E,Dc(c)),c.curOp.forceUpdate=!0),S||(S=Gi(c,m));var C=th(S,m,E);return{line:m,view:S,rect:null,map:C.map,cache:C.cache,before:C.before,hasHeights:!1}}function Gs(c,m,E,S,C){m.before&&(E=-1);var B=E+(S||""),Z;return m.cache.hasOwnProperty(B)?Z=m.cache[B]:(m.rect||(m.rect=m.view.text.getBoundingClientRect()),m.hasHeights||(ff(c,m.view,m.rect),m.hasHeights=!0),Z=Xl(c,m,E,S),Z.bogus||(m.cache[B]=Z)),{left:Z.left,right:Z.right,top:C?Z.rtop:Z.top,bottom:C?Z.rbottom:Z.bottom}}var Mg={left:0,right:0,top:0,bottom:0};function fm(c,m,E){for(var S,C,B,Z,re,le,xe=0;xe<c.length;xe+=3)if(re=c[xe],le=c[xe+1],m<re?(C=0,B=1,Z="left"):m<le?(C=m-re,B=C+1):(xe==c.length-3||m==le&&c[xe+3]>m)&&(B=le-re,C=B-1,m>=le&&(Z="right")),C!=null){if(S=c[xe+2],re==le&&E==(S.insertLeft?"left":"right")&&(Z=E),E=="left"&&C==0)for(;xe&&c[xe-2]==c[xe-3]&&c[xe-1].insertLeft;)S=c[(xe-=3)+2],Z="left";if(E=="right"&&C==le-re)for(;xe<c.length-3&&c[xe+3]==c[xe+4]&&!c[xe+5].insertLeft;)S=c[(xe+=3)+2],Z="right";break}return{node:S,start:C,end:B,collapse:Z,coverStart:re,coverEnd:le}}function lp(c,m){var E=Mg;if(m=="left")for(var S=0;S<c.length&&(E=c[S]).left==E.right;S++);else for(var C=c.length-1;C>=0&&(E=c[C]).left==E.right;C--);return E}function Xl(c,m,E,S){var C=fm(m.map,E,S),B=C.node,Z=C.start,re=C.end,le=C.collapse,xe;if(B.nodeType==3){for(var We=0;We<4;We++){for(;Z&&Xe(m.line.text.charAt(C.coverStart+Z));)--Z;for(;C.coverStart+re<C.coverEnd&&Xe(m.line.text.charAt(C.coverStart+re));)++re;if(s&&u<9&&Z==0&&re==C.coverEnd-C.coverStart?xe=B.parentNode.getBoundingClientRect():xe=lp(Ce(B,Z,re).getClientRects(),S),xe.left||xe.right||Z==0)break;re=Z,Z=Z-1,le="right"}s&&u<11&&(xe=Fs(c.display.measure,xe))}else{Z>0&&(le=S="right");var Je;c.options.lineWrapping&&(Je=B.getClientRects()).length>1?xe=Je[S=="right"?Je.length-1:0]:xe=B.getBoundingClientRect()}if(s&&u<9&&!Z&&(!xe||!xe.left&&!xe.right)){var Et=B.parentNode.getClientRects()[0];Et?xe={left:Et.left,right:Et.left+Jl(c.display),top:Et.top,bottom:Et.bottom}:xe=Mg}for(var bt=xe.top-m.rect.top,$t=xe.bottom-m.rect.top,rr=(bt+$t)/2,gr=m.view.measure.heights,Tr=0;Tr<gr.length-1&&!(rr<gr[Tr]);Tr++);var Fr=Tr?gr[Tr-1]:0,kr=gr[Tr],Hr={left:(le=="right"?xe.right:xe.left)-m.rect.left,right:(le=="left"?xe.left:xe.right)-m.rect.left,top:Fr,bottom:kr};return!xe.left&&!xe.right&&(Hr.bogus=!0),c.options.singleCursorHeightPerLine||(Hr.rtop=bt,Hr.rbottom=$t),Hr}function Fs(c,m){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!pe(c))return m;var E=screen.logicalXDPI/screen.deviceXDPI,S=screen.logicalYDPI/screen.deviceYDPI;return{left:m.left*E,right:m.right*E,top:m.top*S,bottom:m.bottom*S}}function rh(c){if(c.measure&&(c.measure.cache={},c.measure.heights=null,c.rest))for(var m=0;m<c.rest.length;m++)c.measure.caches[m]={}}function nh(c){c.display.externalMeasure=null,ve(c.display.lineMeasure);for(var m=0;m<c.display.view.length;m++)rh(c.display.view[m])}function bu(c){nh(c),c.display.cachedCharWidth=c.display.cachedTextHeight=c.display.cachedPaddingH=null,c.options.lineWrapping||(c.display.maxLineChanged=!0),c.display.lineNumChars=null}function hm(c){return w&&G?-(c.body.getBoundingClientRect().left-parseInt(getComputedStyle(c.body).marginLeft)):c.defaultView.pageXOffset||(c.documentElement||c.body).scrollLeft}function df(c){return w&&G?-(c.body.getBoundingClientRect().top-parseInt(getComputedStyle(c.body).marginTop)):c.defaultView.pageYOffset||(c.documentElement||c.body).scrollTop}function fl(c){var m=ei(c),E=m.widgets,S=0;if(E)for(var C=0;C<E.length;++C)E[C].above&&(S+=Rs(E[C]));return S}function Pl(c,m,E,S,C){if(!C){var B=fl(m);E.top+=B,E.bottom+=B}if(S=="line")return E;S||(S="local");var Z=Fo(m);if(S=="local"?Z+=eh(c.display):Z-=c.display.viewOffset,S=="page"||S=="window"){var re=c.display.lineSpace.getBoundingClientRect();Z+=re.top+(S=="window"?0:df(ne(c)));var le=re.left+(S=="window"?0:hm(ne(c)));E.left+=le,E.right+=le}return E.top+=Z,E.bottom+=Z,E}function St(c,m,E){if(E=="div")return m;var S=m.left,C=m.top;if(E=="page")S-=hm(ne(c)),C-=df(ne(c));else if(E=="local"||!E){var B=c.display.sizer.getBoundingClientRect();S+=B.left,C+=B.top}var Z=c.display.lineSpace.getBoundingClientRect();return{left:S-Z.left,top:C-Z.top}}function Zt(c,m,E,S,C){return S||(S=_t(c.doc,m.line)),Pl(c,S,hf(c,S,m.ch,C),E)}function qt(c,m,E,S,C,B){S=S||_t(c.doc,m.line),C||(C=$a(c,S));function Z($t,rr){var gr=Gs(c,C,$t,rr?"right":"left",B);return rr?gr.left=gr.right:gr.right=gr.left,Pl(c,S,gr,E)}var re=Ot(S,c.doc.direction),le=m.ch,xe=m.sticky;if(le>=S.text.length?(le=S.text.length,xe="before"):le<=0&&(le=0,xe="after"),!re)return Z(xe=="before"?le-1:le,xe=="before");function We($t,rr,gr){var Tr=re[rr],Fr=Tr.level==1;return Z(gr?$t-1:$t,Fr!=gr)}var Je=Cn(re,le,xe),Et=kn,bt=We(le,Je,xe=="before");return Et!=null&&(bt.other=We(le,Et,xe!="before")),bt}function Ur(c,m){var E=0;m=Nr(c.doc,m),c.options.lineWrapping||(E=Jl(c.display)*m.ch);var S=_t(c.doc,m.line),C=Fo(S)+eh(c.display);return{left:E,right:E,top:C,bottom:C+S.height}}function On(c,m,E,S,C){var B=it(c,m,E);return B.xRel=C,S&&(B.outside=S),B}function di(c,m,E){var S=c.doc;if(E+=c.display.viewOffset,E<0)return On(S.first,0,null,-1,-1);var C=Re(S,E),B=S.first+S.size-1;if(C>B)return On(S.first+S.size-1,_t(S,B).text.length,null,1,1);m<0&&(m=0);for(var Z=_t(S,C);;){var re=dm(c,Z,C,m,E),le=lm(Z,re.ch+(re.xRel>0||re.outside>0?1:0));if(!le)return re;var xe=le.find(1);if(xe.line==C)return xe;Z=_t(S,C=xe.line)}}function qo(c,m,E,S){S-=fl(m);var C=m.text.length,B=xr(function(Z){return Gs(c,E,Z-1).bottom<=S},C,0);return C=xr(function(Z){return Gs(c,E,Z).top>S},B,C),{begin:B,end:C}}function eo(c,m,E,S){E||(E=$a(c,m));var C=Pl(c,m,Gs(c,E,S),"line").top;return qo(c,m,E,C)}function Ic(c,m,E,S){return c.bottom<=E?!1:c.top>E?!0:(S?c.left:c.right)>m}function dm(c,m,E,S,C){C-=Fo(m);var B=$a(c,m),Z=fl(m),re=0,le=m.text.length,xe=!0,We=Ot(m,c.doc.direction);if(We){var Je=(c.options.lineWrapping?ad:hl)(c,m,E,B,We,S,C);xe=Je.level!=1,re=xe?Je.from:Je.to-1,le=xe?Je.to:Je.from-1}var Et=null,bt=null,$t=xr(function(dn){var fn=Gs(c,B,dn);return fn.top+=Z,fn.bottom+=Z,Ic(fn,S,C,!1)?(fn.top<=C&&fn.left<=S&&(Et=dn,bt=fn),!0):!1},re,le),rr,gr,Tr=!1;if(bt){var Fr=S-bt.left<bt.right-S,kr=Fr==xe;$t=Et+(kr?0:1),gr=kr?"after":"before",rr=Fr?bt.left:bt.right}else{!xe&&($t==le||$t==re)&&$t++,gr=$t==0?"after":$t==m.text.length?"before":Gs(c,B,$t-(xe?1:0)).bottom+Z<=C==xe?"after":"before";var Hr=qt(c,it(E,$t,gr),"line",m,B);rr=Hr.left,Tr=C<Hr.top?-1:C>=Hr.bottom?1:0}return $t=Rt(m.text,$t,1),On(E,$t,gr,Tr,S-rr)}function hl(c,m,E,S,C,B,Z){var re=xr(function(Je){var Et=C[Je],bt=Et.level!=1;return Ic(qt(c,it(E,bt?Et.to:Et.from,bt?"before":"after"),"line",m,S),B,Z,!0)},0,C.length-1),le=C[re];if(re>0){var xe=le.level!=1,We=qt(c,it(E,xe?le.from:le.to,xe?"after":"before"),"line",m,S);Ic(We,B,Z,!0)&&We.top>Z&&(le=C[re-1])}return le}function ad(c,m,E,S,C,B,Z){var re=qo(c,m,S,Z),le=re.begin,xe=re.end;/\s/.test(m.text.charAt(xe-1))&&xe--;for(var We=null,Je=null,Et=0;Et<C.length;Et++){var bt=C[Et];if(!(bt.from>=xe||bt.to<=le)){var $t=bt.level!=1,rr=Gs(c,S,$t?Math.min(xe,bt.to)-1:Math.max(le,bt.from)).right,gr=rr<B?B-rr+1e9:rr-B;(!We||Je>gr)&&(We=bt,Je=gr)}}return We||(We=C[C.length-1]),We.from<le&&(We={from:le,to:We.to,level:We.level}),We.to>xe&&(We={from:We.from,to:xe,level:We.level}),We}var _u;function dl(c){if(c.cachedTextHeight!=null)return c.cachedTextHeight;if(_u==null){_u=$("pre",null,"CodeMirror-line-like");for(var m=0;m<49;++m)_u.appendChild(document.createTextNode("x")),_u.appendChild($("br"));_u.appendChild(document.createTextNode("x"))}U(c.measure,_u);var E=_u.offsetHeight/50;return E>3&&(c.cachedTextHeight=E),ve(c.measure),E||1}function Jl(c){if(c.cachedCharWidth!=null)return c.cachedCharWidth;var m=$("span","xxxxxxxxxx"),E=$("pre",[m],"CodeMirror-line-like");U(c.measure,E);var S=m.getBoundingClientRect(),C=(S.right-S.left)/10;return C>2&&(c.cachedCharWidth=C),C||10}function Dc(c){for(var m=c.display,E={},S={},C=m.gutters.clientLeft,B=m.gutters.firstChild,Z=0;B;B=B.nextSibling,++Z){var re=c.display.gutterSpecs[Z].className;E[re]=B.offsetLeft+B.clientLeft+C,S[re]=B.clientWidth}return{fixedPos:pi(m),gutterTotalWidth:m.gutters.offsetWidth,gutterLeft:E,gutterWidth:S,wrapperWidth:m.wrapper.clientWidth}}function pi(c){return c.scroller.getBoundingClientRect().left-c.sizer.getBoundingClientRect().left}function pm(c){var m=dl(c.display),E=c.options.lineWrapping,S=E&&Math.max(5,c.display.scroller.clientWidth/Jl(c.display)-3);return function(C){if(fo(c.doc,C))return 0;var B=0;if(C.widgets)for(var Z=0;Z<C.widgets.length;Z++)C.widgets[Z].height&&(B+=C.widgets[Z].height);return E?B+(Math.ceil(C.text.length/S)||1)*m:B+m}}function xu(c){var m=c.doc,E=pm(c);m.iter(function(S){var C=E(S);C!=S.height&&Mt(S,C)})}function li(c,m,E,S){var C=c.display;if(!E&&yr(m).getAttribute("cm-not-content")=="true")return null;var B,Z,re=C.lineSpace.getBoundingClientRect();try{B=m.clientX-re.left,Z=m.clientY-re.top}catch{return null}var le=di(c,B,Z),xe;if(S&&le.xRel>0&&(xe=_t(c.doc,le.line).text).length==le.ch){var We=Ut(xe,xe.length,c.options.tabSize)-xe.length;le=it(le.line,Math.max(0,Math.round((B-Cc(c.display).left)/Jl(c.display))-We))}return le}function wu(c,m){if(m>=c.display.viewTo||(m-=c.display.viewFrom,m<0))return null;for(var E=c.display.view,S=0;S<E.length;S++)if(m-=E[S].size,m<0)return S}function na(c,m,E,S){m==null&&(m=c.doc.first),E==null&&(E=c.doc.first+c.doc.size),S||(S=0);var C=c.display;if(S&&E<C.viewTo&&(C.updateLineNumbers==null||C.updateLineNumbers>m)&&(C.updateLineNumbers=m),c.curOp.viewChanged=!0,m>=C.viewTo)ra&&gu(c.doc,m)<C.viewTo&&Tn(c);else if(E<=C.viewFrom)ra&&Kl(c.doc,E+S)>C.viewFrom?Tn(c):(C.viewFrom+=S,C.viewTo+=S);else if(m<=C.viewFrom&&E>=C.viewTo)Tn(c);else if(m<=C.viewFrom){var B=ti(c,E,E+S,1);B?(C.view=C.view.slice(B.index),C.viewFrom=B.lineN,C.viewTo+=S):Tn(c)}else if(E>=C.viewTo){var Z=ti(c,m,m,-1);Z?(C.view=C.view.slice(0,Z.index),C.viewTo=Z.lineN):Tn(c)}else{var re=ti(c,m,m,-1),le=ti(c,E,E+S,1);re&&le?(C.view=C.view.slice(0,re.index).concat(Tc(c,re.lineN,le.lineN)).concat(C.view.slice(le.index)),C.viewTo+=S):Tn(c)}var xe=C.externalMeasured;xe&&(E<xe.lineN?xe.lineN+=S:m<xe.lineN+xe.size&&(C.externalMeasured=null))}function qs(c,m,E){c.curOp.viewChanged=!0;var S=c.display,C=c.display.externalMeasured;if(C&&m>=C.lineN&&m<C.lineN+C.size&&(S.externalMeasured=null),!(m<S.viewFrom||m>=S.viewTo)){var B=S.view[wu(c,m)];if(B.node!=null){var Z=B.changes||(B.changes=[]);Ht(Z,E)==-1&&Z.push(E)}}}function Tn(c){c.display.viewFrom=c.display.viewTo=c.doc.first,c.display.view=[],c.display.viewOffset=0}function ti(c,m,E,S){var C=wu(c,m),B,Z=c.display.view;if(!ra||E==c.doc.first+c.doc.size)return{index:C,lineN:E};for(var re=c.display.viewFrom,le=0;le<C;le++)re+=Z[le].size;if(re!=m){if(S>0){if(C==Z.length-1)return null;B=re+Z[C].size-m,C++}else B=re-m;m+=B,E+=B}for(;gu(c.doc,E)!=E;){if(C==(S<0?0:Z.length-1))return null;E+=S*Z[C-(S<0?1:0)].size,C+=S}return{index:C,lineN:E}}function ws(c,m,E){var S=c.display,C=S.view;C.length==0||m>=S.viewTo||E<=S.viewFrom?(S.view=Tc(c,m,E),S.viewFrom=m):(S.viewFrom>m?S.view=Tc(c,m,S.viewFrom).concat(S.view):S.viewFrom<m&&(S.view=S.view.slice(wu(c,m))),S.viewFrom=m,S.viewTo<E?S.view=S.view.concat(Tc(c,S.viewTo,E)):S.viewTo>E&&(S.view=S.view.slice(0,wu(c,E)))),S.viewTo=E}function pf(c){for(var m=c.display.view,E=0,S=0;S<m.length;S++){var C=m[S];!C.hidden&&(!C.node||C.changes)&&++E}return E}function pl(c){c.display.input.showSelection(c.display.input.prepareSelection())}function mf(c,m){m===void 0&&(m=!0);var E=c.doc,S={},C=S.cursors=document.createDocumentFragment(),B=S.selection=document.createDocumentFragment(),Z=c.options.$customCursor;Z&&(m=!0);for(var re=0;re<E.sel.ranges.length;re++)if(!(!m&&re==E.sel.primIndex)){var le=E.sel.ranges[re];if(!(le.from().line>=c.display.viewTo||le.to().line<c.display.viewFrom)){var xe=le.empty();if(Z){var We=Z(c,le);We&&up(c,We,C)}else(xe||c.options.showCursorWhenSelecting)&&up(c,le.head,C);xe||ih(c,le,B)}}return S}function up(c,m,E){var S=qt(c,m,"div",null,null,!c.options.singleCursorHeightPerLine),C=E.appendChild($("div","\xA0","CodeMirror-cursor"));if(C.style.left=S.left+"px",C.style.top=S.top+"px",C.style.height=Math.max(0,S.bottom-S.top)*c.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(c.getWrapperElement().className)){var B=Zt(c,m,"div",null,null),Z=B.right-B.left;C.style.width=(Z>0?Z:c.defaultCharWidth())+"px"}if(S.other){var re=E.appendChild($("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));re.style.display="",re.style.left=S.other.left+"px",re.style.top=S.other.top+"px",re.style.height=(S.other.bottom-S.other.top)*.85+"px"}}function gf(c,m){return c.top-m.top||c.left-m.left}function ih(c,m,E){var S=c.display,C=c.doc,B=document.createDocumentFragment(),Z=Cc(c.display),re=Z.left,le=Math.max(S.sizerWidth,cl(c)-S.sizer.offsetLeft)-Z.right,xe=C.direction=="ltr";function We(kr,Hr,dn,fn){Hr<0&&(Hr=0),Hr=Math.round(Hr),fn=Math.round(fn),B.appendChild($("div",null,"CodeMirror-selected","position: absolute; left: "+kr+`px;
                             top: `+Hr+"px; width: "+(dn??le-kr)+`px;
                             height: `+(fn-Hr)+"px"))}function Je(kr,Hr,dn){var fn=_t(C,kr),Zn=fn.text.length,Vi,Do;function so(ci,ss){return Zt(c,it(kr,ci),"div",fn,ss)}function _i(ci,ss,Fa){var Ti=eo(c,fn,null,ci),Ea=ss=="ltr"==(Fa=="after")?"left":"right",Yo=Fa=="after"?Ti.begin:Ti.end-(/\s/.test(fn.text.charAt(Ti.end-1))?2:1);return so(Yo,Ea)[Ea]}var Oo=Ot(fn,C.direction);return Yn(Oo,Hr||0,dn??Zn,function(ci,ss,Fa,Ti){var Ea=Fa=="ltr",Yo=so(ci,Ea?"left":"right"),yl=so(ss-1,Ea?"right":"left"),gd=Hr==null&&ci==0,Pc=dn==null&&ss==Zn,ls=Ti==0,Mc=!Oo||Ti==Oo.length-1;if(yl.top-Yo.top<=3){var Ja=(xe?gd:Pc)&&ls,wh=(xe?Pc:gd)&&Mc,Mu=Ja?re:(Ea?Yo:yl).left,Pf=wh?le:(Ea?yl:Yo).right;We(Mu,Yo.top,Pf-Mu,Yo.bottom)}else{var Mf,Qs,vd,zg;Ea?(Mf=xe&&gd&&ls?re:Yo.left,Qs=xe?le:_i(ci,Fa,"before"),vd=xe?re:_i(ss,Fa,"after"),zg=xe&&Pc&&Mc?le:yl.right):(Mf=xe?_i(ci,Fa,"before"):re,Qs=!xe&&gd&&ls?le:Yo.right,vd=!xe&&Pc&&Mc?re:yl.left,zg=xe?_i(ss,Fa,"after"):le),We(Mf,Yo.top,Qs-Mf,Yo.bottom),Yo.bottom<yl.top&&We(re,Yo.bottom,null,yl.top),We(vd,yl.top,zg-vd,yl.bottom)}(!Vi||gf(Yo,Vi)<0)&&(Vi=Yo),gf(yl,Vi)<0&&(Vi=yl),(!Do||gf(Yo,Do)<0)&&(Do=Yo),gf(yl,Do)<0&&(Do=yl)}),{start:Vi,end:Do}}var Et=m.from(),bt=m.to();if(Et.line==bt.line)Je(Et.line,Et.ch,bt.ch);else{var $t=_t(C,Et.line),rr=_t(C,bt.line),gr=ei($t)==ei(rr),Tr=Je(Et.line,Et.ch,gr?$t.text.length+1:null).end,Fr=Je(bt.line,gr?0:null,bt.ch).start;gr&&(Tr.top<Fr.top-2?(We(Tr.right,Tr.top,null,Tr.bottom),We(re,Fr.top,Fr.left,Fr.bottom)):We(Tr.right,Tr.top,Fr.left-Tr.right,Tr.bottom)),Tr.bottom<Fr.top&&We(re,Tr.bottom,null,Fr.top)}E.appendChild(B)}function Ql(c){if(c.state.focused){var m=c.display;clearInterval(m.blinker);var E=!0;m.cursorDiv.style.visibility="",c.options.cursorBlinkRate>0?m.blinker=setInterval(function(){c.hasFocus()||yf(c),m.cursorDiv.style.visibility=(E=!E)?"":"hidden"},c.options.cursorBlinkRate):c.options.cursorBlinkRate<0&&(m.cursorDiv.style.visibility="hidden")}}function Ss(c){c.hasFocus()||(c.display.input.focus(),c.state.focused||vf(c))}function po(c){c.state.delayingBlurEvent=!0,setTimeout(function(){c.state.delayingBlurEvent&&(c.state.delayingBlurEvent=!1,c.state.focused&&yf(c))},100)}function vf(c,m){c.state.delayingBlurEvent&&!c.state.draggingText&&(c.state.delayingBlurEvent=!1),c.options.readOnly!="nocursor"&&(c.state.focused||(tn(c,"focus",c,m),c.state.focused=!0,we(c.display.wrapper,"CodeMirror-focused"),!c.curOp&&c.display.selForContextMenu!=c.doc.sel&&(c.display.input.reset(),h&&setTimeout(function(){return c.display.input.reset(!0)},20)),c.display.input.receivedFocus()),Ql(c))}function yf(c,m){c.state.delayingBlurEvent||(c.state.focused&&(tn(c,"blur",c,m),c.state.focused=!1,me(c.display.wrapper,"CodeMirror-focused")),clearInterval(c.display.blinker),setTimeout(function(){c.state.focused||(c.display.shift=!1)},150))}function _o(c){for(var m=c.display,E=m.lineDiv.offsetTop,S=Math.max(0,m.scroller.getBoundingClientRect().top),C=m.lineDiv.getBoundingClientRect().top,B=0,Z=0;Z<m.view.length;Z++){var re=m.view[Z],le=c.options.lineWrapping,xe=void 0,We=0;if(!re.hidden){if(C+=re.line.height,s&&u<8){var Je=re.node.offsetTop+re.node.offsetHeight;xe=Je-E,E=Je}else{var Et=re.node.getBoundingClientRect();xe=Et.bottom-Et.top,!le&&re.text.firstChild&&(We=re.text.firstChild.getBoundingClientRect().right-Et.left-1)}var bt=re.line.height-xe;if((bt>.005||bt<-.005)&&(C<S&&(B-=bt),Mt(re.line,xe),Ir(re.line),re.rest))for(var $t=0;$t<re.rest.length;$t++)Ir(re.rest[$t]);if(We>c.display.sizerWidth){var rr=Math.ceil(We/Jl(c.display));rr>c.display.maxLineLength&&(c.display.maxLineLength=rr,c.display.maxLine=re.line,c.display.maxLineChanged=!0)}}}Math.abs(B)>2&&(m.scroller.scrollTop+=B)}function Ir(c){if(c.widgets)for(var m=0;m<c.widgets.length;++m){var E=c.widgets[m],S=E.node.parentNode;S&&(E.height=S.offsetHeight)}}function pa(c,m,E){var S=E&&E.top!=null?Math.max(0,E.top):c.scroller.scrollTop;S=Math.floor(S-eh(c));var C=E&&E.bottom!=null?E.bottom:S+c.wrapper.clientHeight,B=Re(m,S),Z=Re(m,C);if(E&&E.ensure){var re=E.ensure.from.line,le=E.ensure.to.line;re<B?(B=re,Z=Re(m,Fo(_t(m,re))+c.wrapper.clientHeight)):Math.min(le,m.lastLine())>=Z&&(B=Re(m,Fo(_t(m,le))-c.wrapper.clientHeight),Z=le)}return{from:B,to:Math.max(Z,B+1)}}function oh(c,m){if(!Rn(c,"scrollCursorIntoView")){var E=c.display,S=E.sizer.getBoundingClientRect(),C=null,B=E.wrapper.ownerDocument;if(m.top+S.top<0?C=!0:m.bottom+S.top>(B.defaultView.innerHeight||B.documentElement.clientHeight)&&(C=!1),C!=null&&!R){var Z=$("div","\u200B",null,`position: absolute;
                         top: `+(m.top-E.viewOffset-eh(c.display))+`px;
                         height: `+(m.bottom-m.top+Yl(c)+E.barHeight)+`px;
                         left: `+m.left+"px; width: "+Math.max(2,m.right-m.left)+"px;");c.display.lineSpace.appendChild(Z),Z.scrollIntoView(C),c.display.lineSpace.removeChild(Z)}}}function ah(c,m,E,S){S==null&&(S=0);var C;!c.options.lineWrapping&&m==E&&(E=m.sticky=="before"?it(m.line,m.ch+1,"before"):m,m=m.ch?it(m.line,m.sticky=="before"?m.ch-1:m.ch,"after"):m);for(var B=0;B<5;B++){var Z=!1,re=qt(c,m),le=!E||E==m?re:qt(c,E);C={left:Math.min(re.left,le.left),top:Math.min(re.top,le.top)-S,right:Math.max(re.left,le.left),bottom:Math.max(re.bottom,le.bottom)+S};var xe=Es(c,C),We=c.doc.scrollTop,Je=c.doc.scrollLeft;if(xe.scrollTop!=null&&(Ga(c,xe.scrollTop),Math.abs(c.doc.scrollTop-We)>1&&(Z=!0)),xe.scrollLeft!=null&&(Zs(c,xe.scrollLeft),Math.abs(c.doc.scrollLeft-Je)>1&&(Z=!0)),!Z)break}return C}function Ml(c,m){var E=Es(c,m);E.scrollTop!=null&&Ga(c,E.scrollTop),E.scrollLeft!=null&&Zs(c,E.scrollLeft)}function Es(c,m){var E=c.display,S=dl(c.display);m.top<0&&(m.top=0);var C=c.curOp&&c.curOp.scrollTop!=null?c.curOp.scrollTop:E.scroller.scrollTop,B=Wu(c),Z={};m.bottom-m.top>B&&(m.bottom=m.top+B);var re=c.doc.height+od(E),le=m.top<S,xe=m.bottom>re-S;if(m.top<C)Z.scrollTop=le?0:m.top;else if(m.bottom>C+B){var We=Math.min(m.top,(xe?re:m.bottom)-B);We!=C&&(Z.scrollTop=We)}var Je=c.options.fixedGutter?0:E.gutters.offsetWidth,Et=c.curOp&&c.curOp.scrollLeft!=null?c.curOp.scrollLeft:E.scroller.scrollLeft-Je,bt=cl(c)-E.gutters.offsetWidth,$t=m.right-m.left>bt;return $t&&(m.right=m.left+bt),m.left<10?Z.scrollLeft=0:m.left<Et?Z.scrollLeft=Math.max(0,m.left+Je-($t?0:10)):m.right>bt+Et-3&&(Z.scrollLeft=m.right+($t?0:10)-bt),Z}function sd(c,m){m!=null&&(sh(c),c.curOp.scrollTop=(c.curOp.scrollTop==null?c.doc.scrollTop:c.curOp.scrollTop)+m)}function nr(c){sh(c);var m=c.getCursor();c.curOp.scrollToPos={from:m,to:m,margin:c.options.cursorScrollMargin}}function Ko(c,m,E){(m!=null||E!=null)&&sh(c),m!=null&&(c.curOp.scrollLeft=m),E!=null&&(c.curOp.scrollTop=E)}function cp(c,m){sh(c),c.curOp.scrollToPos=m}function sh(c){var m=c.curOp.scrollToPos;if(m){c.curOp.scrollToPos=null;var E=Ur(c,m.from),S=Ur(c,m.to);Ks(c,E,S,m.margin)}}function Ks(c,m,E,S){var C=Es(c,{left:Math.min(m.left,E.left),top:Math.min(m.top,E.top)-S,right:Math.max(m.right,E.right),bottom:Math.max(m.bottom,E.bottom)+S});Ko(c,C.scrollLeft,C.scrollTop)}function Ga(c,m){Math.abs(c.doc.scrollTop-m)<2||(r||Fl(c,{top:m}),bf(c,m,!0),r&&Fl(c),va(c,100))}function bf(c,m,E){m=Math.max(0,Math.min(c.display.scroller.scrollHeight-c.display.scroller.clientHeight,m)),!(c.display.scroller.scrollTop==m&&!E)&&(c.doc.scrollTop=m,c.display.scrollbars.setScrollTop(m),c.display.scroller.scrollTop!=m&&(c.display.scroller.scrollTop=m))}function Zs(c,m,E,S){m=Math.max(0,Math.min(m,c.display.scroller.scrollWidth-c.display.scroller.clientWidth)),!((E?m==c.doc.scrollLeft:Math.abs(c.doc.scrollLeft-m)<2)&&!S)&&(c.doc.scrollLeft=m,Ns(c),c.display.scroller.scrollLeft!=m&&(c.display.scroller.scrollLeft=m),c.display.scrollbars.setScrollLeft(m))}function ma(c){var m=c.display,E=m.gutters.offsetWidth,S=Math.round(c.doc.height+od(c.display));return{clientHeight:m.scroller.clientHeight,viewHeight:m.wrapper.clientHeight,scrollWidth:m.scroller.scrollWidth,clientWidth:m.scroller.clientWidth,viewWidth:m.wrapper.clientWidth,barLeft:c.options.fixedGutter?E:0,docHeight:S,scrollHeight:S+Yl(c)+m.barHeight,nativeBarWidth:m.nativeBarWidth,gutterWidth:E}}var ga=function(c,m,E){this.cm=E;var S=this.vert=$("div",[$("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),C=this.horiz=$("div",[$("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");S.tabIndex=C.tabIndex=-1,c(S),c(C),tr(S,"scroll",function(){S.clientHeight&&m(S.scrollTop,"vertical")}),tr(C,"scroll",function(){C.clientWidth&&m(C.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,s&&u<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ga.prototype.update=function(c){var m=c.scrollWidth>c.clientWidth+1,E=c.scrollHeight>c.clientHeight+1,S=c.nativeBarWidth;if(E){this.vert.style.display="block",this.vert.style.bottom=m?S+"px":"0";var C=c.viewHeight-(m?S:0);this.vert.firstChild.style.height=Math.max(0,c.scrollHeight-c.clientHeight+C)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(m){this.horiz.style.display="block",this.horiz.style.right=E?S+"px":"0",this.horiz.style.left=c.barLeft+"px";var B=c.viewWidth-c.barLeft-(E?S:0);this.horiz.firstChild.style.width=Math.max(0,c.scrollWidth-c.clientWidth+B)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&c.clientHeight>0&&(S==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:E?S:0,bottom:m?S:0}},ga.prototype.setScrollLeft=function(c){this.horiz.scrollLeft!=c&&(this.horiz.scrollLeft=c),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ga.prototype.setScrollTop=function(c){this.vert.scrollTop!=c&&(this.vert.scrollTop=c),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ga.prototype.zeroWidthHack=function(){var c=V&&!L?"12px":"18px";this.horiz.style.height=this.vert.style.width=c,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Wt,this.disableVert=new Wt},ga.prototype.enableZeroWidthBar=function(c,m,E){c.style.visibility="";function S(){var C=c.getBoundingClientRect(),B=E=="vert"?document.elementFromPoint(C.right-1,(C.top+C.bottom)/2):document.elementFromPoint((C.right+C.left)/2,C.bottom-1);B!=c?c.style.visibility="hidden":m.set(1e3,S)}m.set(1e3,S)},ga.prototype.clear=function(){var c=this.horiz.parentNode;c.removeChild(this.horiz),c.removeChild(this.vert)};var Su=function(){};Su.prototype.update=function(){return{bottom:0,right:0}},Su.prototype.setScrollLeft=function(){},Su.prototype.setScrollTop=function(){},Su.prototype.clear=function(){};function Ys(c,m){m||(m=ma(c));var E=c.display.barWidth,S=c.display.barHeight;_f(c,m);for(var C=0;C<4&&E!=c.display.barWidth||S!=c.display.barHeight;C++)E!=c.display.barWidth&&c.options.lineWrapping&&_o(c),_f(c,ma(c)),E=c.display.barWidth,S=c.display.barHeight}function _f(c,m){var E=c.display,S=E.scrollbars.update(m);E.sizer.style.paddingRight=(E.barWidth=S.right)+"px",E.sizer.style.paddingBottom=(E.barHeight=S.bottom)+"px",E.heightForcer.style.borderBottom=S.bottom+"px solid transparent",S.right&&S.bottom?(E.scrollbarFiller.style.display="block",E.scrollbarFiller.style.height=S.bottom+"px",E.scrollbarFiller.style.width=S.right+"px"):E.scrollbarFiller.style.display="",S.bottom&&c.options.coverGutterNextToScrollbar&&c.options.fixedGutter?(E.gutterFiller.style.display="block",E.gutterFiller.style.height=S.bottom+"px",E.gutterFiller.style.width=m.gutterWidth+"px"):E.gutterFiller.style.display=""}var $u={native:ga,null:Su};function Ll(c){c.display.scrollbars&&(c.display.scrollbars.clear(),c.display.scrollbars.addClass&&me(c.display.wrapper,c.display.scrollbars.addClass)),c.display.scrollbars=new $u[c.options.scrollbarStyle](function(m){c.display.wrapper.insertBefore(m,c.display.scrollbarFiller),tr(m,"mousedown",function(){c.state.focused&&setTimeout(function(){return c.display.input.focus()},0)}),m.setAttribute("cm-not-content","true")},function(m,E){E=="horizontal"?Zs(c,m):Ga(c,m)},c),c.display.scrollbars.addClass&&we(c.display.wrapper,c.display.scrollbars.addClass)}var ml=0;function In(c){c.curOp={cm:c,viewChanged:!1,startHeight:c.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ml,markArrays:null},Ac(c.curOp)}function Ts(c){var m=c.curOp;m&&kc(m,function(E){for(var S=0;S<E.ops.length;S++)E.ops[S].cm.curOp=null;Rl(E)})}function Rl(c){for(var m=c.ops,E=0;E<m.length;E++)ia(m[E]);for(var S=0;S<m.length;S++)eu(m[S]);for(var C=0;C<m.length;C++)Gu(m[C]);for(var B=0;B<m.length;B++)Le(m[B]);for(var Z=0;Z<m.length;Z++)oa(m[Z])}function ia(c){var m=c.cm,E=m.display;Eu(m),c.updateMaxLine&&Vu(m),c.mustUpdate=c.viewChanged||c.forceUpdate||c.scrollTop!=null||c.scrollToPos&&(c.scrollToPos.from.line<E.viewFrom||c.scrollToPos.to.line>=E.viewTo)||E.maxLineChanged&&m.options.lineWrapping,c.update=c.mustUpdate&&new ao(m,c.mustUpdate&&{top:c.scrollTop,ensure:c.scrollToPos},c.forceUpdate)}function eu(c){c.updatedDisplay=c.mustUpdate&&ui(c.cm,c.update)}function Gu(c){var m=c.cm,E=m.display;c.updatedDisplay&&_o(m),c.barMeasure=ma(m),E.maxLineChanged&&!m.options.lineWrapping&&(c.adjustWidthTo=hf(m,E.maxLine,E.maxLine.text.length).left+3,m.display.sizerWidth=c.adjustWidthTo,c.barMeasure.scrollWidth=Math.max(E.scroller.clientWidth,E.sizer.offsetLeft+c.adjustWidthTo+Yl(m)+m.display.barWidth),c.maxScrollLeft=Math.max(0,E.sizer.offsetLeft+c.adjustWidthTo-cl(m))),(c.updatedDisplay||c.selectionChanged)&&(c.preparedSelection=E.input.prepareSelection())}function Le(c){var m=c.cm;c.adjustWidthTo!=null&&(m.display.sizer.style.minWidth=c.adjustWidthTo+"px",c.maxScrollLeft<m.doc.scrollLeft&&Zs(m,Math.min(m.display.scroller.scrollLeft,c.maxScrollLeft),!0),m.display.maxLineChanged=!1);var E=c.focus&&c.focus==de(st(m));c.preparedSelection&&m.display.input.showSelection(c.preparedSelection,E),(c.updatedDisplay||c.startHeight!=m.doc.height)&&Ys(m,c.barMeasure),c.updatedDisplay&&ru(m,c.barMeasure),c.selectionChanged&&Ql(m),m.state.focused&&c.updateInput&&m.display.input.reset(c.typing),E&&Ss(c.cm)}function oa(c){var m=c.cm,E=m.display,S=m.doc;if(c.updatedDisplay&&ya(m,c.update),E.wheelStartX!=null&&(c.scrollTop!=null||c.scrollLeft!=null||c.scrollToPos)&&(E.wheelStartX=E.wheelStartY=null),c.scrollTop!=null&&bf(m,c.scrollTop,c.forceScroll),c.scrollLeft!=null&&Zs(m,c.scrollLeft,!0,!0),c.scrollToPos){var C=ah(m,Nr(S,c.scrollToPos.from),Nr(S,c.scrollToPos.to),c.scrollToPos.margin);oh(m,C)}var B=c.maybeHiddenMarkers,Z=c.maybeUnhiddenMarkers;if(B)for(var re=0;re<B.length;++re)B[re].lines.length||tn(B[re],"hide");if(Z)for(var le=0;le<Z.length;++le)Z[le].lines.length&&tn(Z[le],"unhide");E.wrapper.offsetHeight&&(S.scrollTop=m.display.scroller.scrollTop),c.changeObjs&&tn(m,"changes",m,c.changeObjs),c.update&&c.update.finish()}function aa(c,m){if(c.curOp)return m();In(c);try{return m()}finally{Ts(c)}}function mr(c,m){return function(){if(c.curOp)return m.apply(c,arguments);In(c);try{return m.apply(c,arguments)}finally{Ts(c)}}}function Xt(c){return function(){if(this.curOp)return c.apply(this,arguments);In(this);try{return c.apply(this,arguments)}finally{Ts(this)}}}function Zo(c){return function(){var m=this.cm;if(!m||m.curOp)return c.apply(this,arguments);In(m);try{return c.apply(this,arguments)}finally{Ts(m)}}}function va(c,m){c.doc.highlightFrontier<c.display.viewTo&&c.state.highlight.set(m,kt(tu,c))}function tu(c){var m=c.doc;if(!(m.highlightFrontier>=c.display.viewTo)){var E=+new Date+c.options.workTime,S=bo(c,m.highlightFrontier),C=[];m.iter(S.line,Math.min(m.first+m.size,c.display.viewTo+500),function(B){if(S.line>=c.display.viewFrom){var Z=B.styles,re=B.text.length>c.options.maxHighlightLength?nt(m.mode,S.state):null,le=is(c,B,S,!0);re&&(S.state=re),B.styles=le.styles;var xe=B.styleClasses,We=le.classes;We?B.styleClasses=We:xe&&(B.styleClasses=null);for(var Je=!Z||Z.length!=B.styles.length||xe!=We&&(!xe||!We||xe.bgClass!=We.bgClass||xe.textClass!=We.textClass),Et=0;!Je&&Et<Z.length;++Et)Je=Z[Et]!=B.styles[Et];Je&&C.push(S.line),B.stateAfter=S.save(),S.nextLine()}else B.text.length<=c.options.maxHighlightLength&&Go(c,B.text,S),B.stateAfter=S.line%5==0?S.save():null,S.nextLine();if(+new Date>E)return va(c,c.options.workDelay),!0}),m.highlightFrontier=S.line,m.modeFrontier=Math.max(m.modeFrontier,S.line),C.length&&aa(c,function(){for(var B=0;B<C.length;B++)qs(c,C[B],"text")})}}var ao=function(c,m,E){var S=c.display;this.viewport=m,this.visible=pa(S,c.doc,m),this.editorIsHidden=!S.wrapper.offsetWidth,this.wrapperHeight=S.wrapper.clientHeight,this.wrapperWidth=S.wrapper.clientWidth,this.oldDisplayWidth=cl(c),this.force=E,this.dims=Dc(c),this.events=[]};ao.prototype.signal=function(c,m){Ei(c,m)&&this.events.push(arguments)},ao.prototype.finish=function(){for(var c=0;c<this.events.length;c++)tn.apply(null,this.events[c])};function Eu(c){var m=c.display;!m.scrollbarsClipped&&m.scroller.offsetWidth&&(m.nativeBarWidth=m.scroller.offsetWidth-m.scroller.clientWidth,m.heightForcer.style.height=Yl(c)+"px",m.sizer.style.marginBottom=-m.nativeBarWidth+"px",m.sizer.style.borderRightWidth=Yl(c)+"px",m.scrollbarsClipped=!0)}function mm(c){if(c.hasFocus())return null;var m=de(st(c));if(!m||!Se(c.display.lineDiv,m))return null;var E={activeElt:m};if(window.getSelection){var S=lt(c).getSelection();S.anchorNode&&S.extend&&Se(c.display.lineDiv,S.anchorNode)&&(E.anchorNode=S.anchorNode,E.anchorOffset=S.anchorOffset,E.focusNode=S.focusNode,E.focusOffset=S.focusOffset)}return E}function fp(c){if(!(!c||!c.activeElt||c.activeElt==de(dt(c.activeElt)))&&(c.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(c.activeElt.nodeName)&&c.anchorNode&&Se(document.body,c.anchorNode)&&Se(document.body,c.focusNode))){var m=c.activeElt.ownerDocument,E=m.defaultView.getSelection(),S=m.createRange();S.setEnd(c.anchorNode,c.anchorOffset),S.collapse(!1),E.removeAllRanges(),E.addRange(S),E.extend(c.focusNode,c.focusOffset)}}function ui(c,m){var E=c.display,S=c.doc;if(m.editorIsHidden)return Tn(c),!1;if(!m.force&&m.visible.from>=E.viewFrom&&m.visible.to<=E.viewTo&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo)&&E.renderedView==E.view&&pf(c)==0)return!1;wf(c)&&(Tn(c),m.dims=Dc(c));var C=S.first+S.size,B=Math.max(m.visible.from-c.options.viewportMargin,S.first),Z=Math.min(C,m.visible.to+c.options.viewportMargin);E.viewFrom<B&&B-E.viewFrom<20&&(B=Math.max(S.first,E.viewFrom)),E.viewTo>Z&&E.viewTo-Z<20&&(Z=Math.min(C,E.viewTo)),ra&&(B=gu(c.doc,B),Z=Kl(c.doc,Z));var re=B!=E.viewFrom||Z!=E.viewTo||E.lastWrapHeight!=m.wrapperHeight||E.lastWrapWidth!=m.wrapperWidth;ws(c,B,Z),E.viewOffset=Fo(_t(c.doc,E.viewFrom)),c.display.mover.style.top=E.viewOffset+"px";var le=pf(c);if(!re&&le==0&&!m.force&&E.renderedView==E.view&&(E.updateLineNumbers==null||E.updateLineNumbers>=E.viewTo))return!1;var xe=mm(c);return le>4&&(E.lineDiv.style.display="none"),xf(c,E.updateLineNumbers,m.dims),le>4&&(E.lineDiv.style.display=""),E.renderedView=E.view,fp(xe),ve(E.cursorDiv),ve(E.selectionDiv),E.gutters.style.height=E.sizer.style.minHeight=0,re&&(E.lastWrapHeight=m.wrapperHeight,E.lastWrapWidth=m.wrapperWidth,va(c,400)),E.updateLineNumbers=null,!0}function ya(c,m){for(var E=m.viewport,S=!0;;S=!1){if(!S||!c.options.lineWrapping||m.oldDisplayWidth==cl(c)){if(E&&E.top!=null&&(E={top:Math.min(c.doc.height+od(c.display)-Wu(c),E.top)}),m.visible=pa(c.display,c.doc,E),m.visible.from>=c.display.viewFrom&&m.visible.to<=c.display.viewTo)break}else S&&(m.visible=pa(c.display,c.doc,E));if(!ui(c,m))break;_o(c);var C=ma(c);pl(c),Ys(c,C),ru(c,C),m.force=!1}m.signal(c,"update",c),(c.display.viewFrom!=c.display.reportedViewFrom||c.display.viewTo!=c.display.reportedViewTo)&&(m.signal(c,"viewportChange",c,c.display.viewFrom,c.display.viewTo),c.display.reportedViewFrom=c.display.viewFrom,c.display.reportedViewTo=c.display.viewTo)}function Fl(c,m){var E=new ao(c,m);if(ui(c,E)){_o(c),ya(c,E);var S=ma(c);pl(c),Ys(c,S),ru(c,S),E.finish()}}function xf(c,m,E){var S=c.display,C=c.options.lineNumbers,B=S.lineDiv,Z=B.firstChild;function re($t){var rr=$t.nextSibling;return h&&V&&c.display.currentWheelTarget==$t?$t.style.display="none":$t.parentNode.removeChild($t),rr}for(var le=S.view,xe=S.viewFrom,We=0;We<le.length;We++){var Je=le[We];if(!Je.hidden)if(!Je.node||Je.node.parentNode!=B){var Et=Pg(c,Je,xe,E);B.insertBefore(Et,Z)}else{for(;Z!=Je.node;)Z=re(Z);var bt=C&&m!=null&&m<=xe&&Je.lineNumber;Je.changes&&(Ht(Je.changes,"gutter")>-1&&(bt=!1),vu(c,Je,xe,E)),bt&&(ve(Je.lineNumber),Je.lineNumber.appendChild(document.createTextNode(jt(c.options,xe)))),Z=Je.node.nextSibling}xe+=Je.size}for(;Z;)Z=re(Z)}function ld(c){var m=c.gutters.offsetWidth;c.sizer.style.marginLeft=m+"px",zi(c,"gutterChanged",c)}function ru(c,m){c.display.sizer.style.minHeight=m.docHeight+"px",c.display.heightForcer.style.top=m.docHeight+"px",c.display.gutters.style.height=m.docHeight+c.display.barHeight+Yl(c)+"px"}function Ns(c){var m=c.display,E=m.view;if(!(!m.alignWidgets&&(!m.gutters.firstChild||!c.options.fixedGutter))){for(var S=pi(m)-m.scroller.scrollLeft+c.doc.scrollLeft,C=m.gutters.offsetWidth,B=S+"px",Z=0;Z<E.length;Z++)if(!E[Z].hidden){c.options.fixedGutter&&(E[Z].gutter&&(E[Z].gutter.style.left=B),E[Z].gutterBackground&&(E[Z].gutterBackground.style.left=B));var re=E[Z].alignable;if(re)for(var le=0;le<re.length;le++)re[le].style.left=B}c.options.fixedGutter&&(m.gutters.style.left=S+C+"px")}}function wf(c){if(!c.options.lineNumbers)return!1;var m=c.doc,E=jt(c.options,m.first+m.size-1),S=c.display;if(E.length!=S.lineNumChars){var C=S.measure.appendChild($("div",[$("div",E)],"CodeMirror-linenumber CodeMirror-gutter-elt")),B=C.firstChild.offsetWidth,Z=C.offsetWidth-B;return S.lineGutter.style.width="",S.lineNumInnerWidth=Math.max(B,S.lineGutter.offsetWidth-Z)+1,S.lineNumWidth=S.lineNumInnerWidth+Z,S.lineNumChars=S.lineNumInnerWidth?E.length:-1,S.lineGutter.style.width=S.lineNumWidth+"px",ld(c.display),!0}return!1}function ba(c,m){for(var E=[],S=!1,C=0;C<c.length;C++){var B=c[C],Z=null;if(typeof B!="string"&&(Z=B.style,B=B.className),B=="CodeMirror-linenumbers")if(m)S=!0;else continue;E.push({className:B,style:Z})}return m&&!S&&E.push({className:"CodeMirror-linenumbers",style:null}),E}function ud(c){var m=c.gutters,E=c.gutterSpecs;ve(m),c.lineGutter=null;for(var S=0;S<E.length;++S){var C=E[S],B=C.className,Z=C.style,re=m.appendChild($("div",null,"CodeMirror-gutter "+B));Z&&(re.style.cssText=Z),B=="CodeMirror-linenumbers"&&(c.lineGutter=re,re.style.width=(c.lineNumWidth||1)+"px")}m.style.display=E.length?"":"none",ld(c)}function Tu(c){ud(c.display),na(c),Ns(c)}function cd(c,m,E,S){var C=this;this.input=E,C.scrollbarFiller=$("div",null,"CodeMirror-scrollbar-filler"),C.scrollbarFiller.setAttribute("cm-not-content","true"),C.gutterFiller=$("div",null,"CodeMirror-gutter-filler"),C.gutterFiller.setAttribute("cm-not-content","true"),C.lineDiv=he("div",null,"CodeMirror-code"),C.selectionDiv=$("div",null,null,"position: relative; z-index: 1"),C.cursorDiv=$("div",null,"CodeMirror-cursors"),C.measure=$("div",null,"CodeMirror-measure"),C.lineMeasure=$("div",null,"CodeMirror-measure"),C.lineSpace=he("div",[C.measure,C.lineMeasure,C.selectionDiv,C.cursorDiv,C.lineDiv],null,"position: relative; outline: none");var B=he("div",[C.lineSpace],"CodeMirror-lines");C.mover=$("div",[B],null,"position: relative"),C.sizer=$("div",[C.mover],"CodeMirror-sizer"),C.sizerWidth=null,C.heightForcer=$("div",null,null,"position: absolute; height: "+pr+"px; width: 1px;"),C.gutters=$("div",null,"CodeMirror-gutters"),C.lineGutter=null,C.scroller=$("div",[C.sizer,C.heightForcer,C.gutters],"CodeMirror-scroll"),C.scroller.setAttribute("tabIndex","-1"),C.wrapper=$("div",[C.scrollbarFiller,C.gutterFiller,C.scroller],"CodeMirror"),w&&T>=105&&(C.wrapper.style.clipPath="inset(0px)"),C.wrapper.setAttribute("translate","no"),s&&u<8&&(C.gutters.style.zIndex=-1,C.scroller.style.paddingRight=0),!h&&!(r&&q)&&(C.scroller.draggable=!0),c&&(c.appendChild?c.appendChild(C.wrapper):c(C.wrapper)),C.viewFrom=C.viewTo=m.first,C.reportedViewFrom=C.reportedViewTo=m.first,C.view=[],C.renderedView=null,C.externalMeasured=null,C.viewOffset=0,C.lastWrapHeight=C.lastWrapWidth=0,C.updateLineNumbers=null,C.nativeBarWidth=C.barHeight=C.barWidth=0,C.scrollbarsClipped=!1,C.lineNumWidth=C.lineNumInnerWidth=C.lineNumChars=null,C.alignWidgets=!1,C.cachedCharWidth=C.cachedTextHeight=C.cachedPaddingH=null,C.maxLine=null,C.maxLineLength=0,C.maxLineChanged=!1,C.wheelDX=C.wheelDY=C.wheelStartX=C.wheelStartY=null,C.shift=!1,C.selForContextMenu=null,C.activeTouch=null,C.gutterSpecs=ba(S.gutters,S.lineNumbers),ud(C),E.init(C)}var lh=0,Xs=null;s?Xs=-.53:r?Xs=15:w?Xs=-.7:P&&(Xs=-1/3);function Js(c){var m=c.wheelDeltaX,E=c.wheelDeltaY;return m==null&&c.detail&&c.axis==c.HORIZONTAL_AXIS&&(m=c.detail),E==null&&c.detail&&c.axis==c.VERTICAL_AXIS?E=c.detail:E==null&&(E=c.wheelDelta),{x:m,y:E}}function gm(c){var m=Js(c);return m.x*=Xs,m.y*=Xs,m}function Ku(c,m){w&&T==102&&(c.display.chromeScrollHack==null?c.display.sizer.style.pointerEvents="none":clearTimeout(c.display.chromeScrollHack),c.display.chromeScrollHack=setTimeout(function(){c.display.chromeScrollHack=null,c.display.sizer.style.pointerEvents=""},100));var E=Js(m),S=E.x,C=E.y,B=Xs;m.deltaMode===0&&(S=m.deltaX,C=m.deltaY,B=1);var Z=c.display,re=Z.scroller,le=re.scrollWidth>re.clientWidth,xe=re.scrollHeight>re.clientHeight;if(S&&le||C&&xe){if(C&&V&&h){e:for(var We=m.target,Je=Z.view;We!=re;We=We.parentNode)for(var Et=0;Et<Je.length;Et++)if(Je[Et].node==We){c.display.currentWheelTarget=We;break e}}if(S&&!r&&!I&&B!=null){C&&xe&&Ga(c,Math.max(0,re.scrollTop+C*B)),Zs(c,Math.max(0,re.scrollLeft+S*B)),(!C||C&&xe)&&ze(m),Z.wheelStartX=null;return}if(C&&B!=null){var bt=C*B,$t=c.doc.scrollTop,rr=$t+Z.wrapper.clientHeight;bt<0?$t=Math.max(0,$t+bt-50):rr=Math.min(c.doc.height,rr+bt+50),Fl(c,{top:$t,bottom:rr})}lh<20&&m.deltaMode!==0&&(Z.wheelStartX==null?(Z.wheelStartX=re.scrollLeft,Z.wheelStartY=re.scrollTop,Z.wheelDX=S,Z.wheelDY=C,setTimeout(function(){if(Z.wheelStartX!=null){var gr=re.scrollLeft-Z.wheelStartX,Tr=re.scrollTop-Z.wheelStartY,Fr=Tr&&Z.wheelDY&&Tr/Z.wheelDY||gr&&Z.wheelDX&&gr/Z.wheelDX;Z.wheelStartX=Z.wheelStartY=null,Fr&&(Xs=(Xs*lh+Fr)/(lh+1),++lh)}},200)):(Z.wheelDX+=S,Z.wheelDY+=C))}}var ji=function(c,m){this.ranges=c,this.primIndex=m};ji.prototype.primary=function(){return this.ranges[this.primIndex]},ji.prototype.equals=function(c){if(c==this)return!0;if(c.primIndex!=this.primIndex||c.ranges.length!=this.ranges.length)return!1;for(var m=0;m<this.ranges.length;m++){var E=this.ranges[m],S=c.ranges[m];if(!rn(E.anchor,S.anchor)||!rn(E.head,S.head))return!1}return!0},ji.prototype.deepCopy=function(){for(var c=[],m=0;m<this.ranges.length;m++)c[m]=new mi(un(this.ranges[m].anchor),un(this.ranges[m].head));return new ji(c,this.primIndex)},ji.prototype.somethingSelected=function(){for(var c=0;c<this.ranges.length;c++)if(!this.ranges[c].empty())return!0;return!1},ji.prototype.contains=function(c,m){m||(m=c);for(var E=0;E<this.ranges.length;E++){var S=this.ranges[E];if(Qt(m,S.from())>=0&&Qt(c,S.to())<=0)return E}return-1};var mi=function(c,m){this.anchor=c,this.head=m};mi.prototype.from=function(){return Mn(this.anchor,this.head)},mi.prototype.to=function(){return En(this.anchor,this.head)},mi.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Ka(c,m,E){var S=c&&c.options.selectionsMayTouch,C=m[E];m.sort(function(Et,bt){return Qt(Et.from(),bt.from())}),E=Ht(m,C);for(var B=1;B<m.length;B++){var Z=m[B],re=m[B-1],le=Qt(re.to(),Z.from());if(S&&!Z.empty()?le>0:le>=0){var xe=Mn(re.from(),Z.from()),We=En(re.to(),Z.to()),Je=re.empty()?Z.from()==Z.head:re.from()==re.head;B<=E&&--E,m.splice(--B,2,new mi(Je?We:xe,Je?xe:We))}}return new ji(m,E)}function La(c,m){return new ji([new mi(c,m||c)],0)}function Au(c){return c.text?it(c.from.line+c.text.length-1,vt(c.text).length+(c.text.length==1?c.from.ch:0)):c.to}function uh(c,m){if(Qt(c,m.from)<0)return c;if(Qt(c,m.to)<=0)return Au(m);var E=c.line+m.text.length-(m.to.line-m.from.line)-1,S=c.ch;return c.line==m.to.line&&(S+=Au(m).ch-m.to.ch),it(E,S)}function ch(c,m){for(var E=[],S=0;S<c.sel.ranges.length;S++){var C=c.sel.ranges[S];E.push(new mi(uh(C.anchor,m),uh(C.head,m)))}return Ka(c.cm,E,c.sel.primIndex)}function fh(c,m,E){return c.line==m.line?it(E.line,c.ch-m.ch+E.ch):it(E.line+(c.line-m.line),c.ch)}function d(c,m,E){for(var S=[],C=it(c.first,0),B=C,Z=0;Z<m.length;Z++){var re=m[Z],le=fh(re.from,C,B),xe=fh(Au(re),C,B);if(C=re.to,B=xe,E=="around"){var We=c.sel.ranges[Z],Je=Qt(We.head,We.anchor)<0;S[Z]=new mi(Je?xe:le,Je?le:xe)}else S[Z]=new mi(le,le)}return new ji(S,c.sel.primIndex)}function v(c){c.doc.mode=_e(c.options,c.doc.modeOption),g(c)}function g(c){c.doc.iter(function(m){m.stateAfter&&(m.stateAfter=null),m.styles&&(m.styles=null)}),c.doc.modeFrontier=c.doc.highlightFrontier=c.doc.first,va(c,100),c.state.modeGen++,c.curOp&&na(c)}function x(c,m){return m.from.ch==0&&m.to.ch==0&&vt(m.text)==""&&(!c.cm||c.cm.options.wholeLineUpdateBefore)}function O(c,m,E,S){function C(Fr){return E?E[Fr]:null}function B(Fr,kr,Hr){Dg(Fr,kr,Hr,S),zi(Fr,"change",Fr,m)}function Z(Fr,kr){for(var Hr=[],dn=Fr;dn<kr;++dn)Hr.push(new Ec(xe[dn],C(dn),S));return Hr}var re=m.from,le=m.to,xe=m.text,We=_t(c,re.line),Je=_t(c,le.line),Et=vt(xe),bt=C(xe.length-1),$t=le.line-re.line;if(m.full)c.insert(0,Z(0,xe.length)),c.remove(xe.length,c.size-xe.length);else if(x(c,m)){var rr=Z(0,xe.length-1);B(Je,Je.text,bt),$t&&c.remove(re.line,$t),rr.length&&c.insert(re.line,rr)}else if(We==Je)if(xe.length==1)B(We,We.text.slice(0,re.ch)+Et+We.text.slice(le.ch),bt);else{var gr=Z(1,xe.length-1);gr.push(new Ec(Et+We.text.slice(le.ch),bt,S)),B(We,We.text.slice(0,re.ch)+xe[0],C(0)),c.insert(re.line+1,gr)}else if(xe.length==1)B(We,We.text.slice(0,re.ch)+xe[0]+Je.text.slice(le.ch),C(0)),c.remove(re.line+1,$t);else{B(We,We.text.slice(0,re.ch)+xe[0],C(0)),B(Je,Et+Je.text.slice(le.ch),bt);var Tr=Z(1,xe.length-1);$t>1&&c.remove(re.line+1,$t-1),c.insert(re.line+1,Tr)}zi(c,"change",c,m)}function F(c,m,E){function S(C,B,Z){if(C.linked)for(var re=0;re<C.linked.length;++re){var le=C.linked[re];if(le.doc!=B){var xe=Z&&le.sharedHist;E&&!xe||(m(le.doc,xe),S(le.doc,C,xe))}}}S(c,null,!0)}function z(c,m){if(m.cm)throw new Error("This document is already in use.");c.doc=m,m.cm=c,xu(c),v(c),Y(c),c.options.direction=m.direction,c.options.lineWrapping||Vu(c),c.options.mode=m.modeOption,na(c)}function Y(c){(c.doc.direction=="rtl"?we:me)(c.display.lineDiv,"CodeMirror-rtl")}function ae(c){aa(c,function(){Y(c),na(c)})}function be(c){this.done=[],this.undone=[],this.undoDepth=c?c.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=c?c.maxGeneration:1}function De(c,m){var E={from:un(m.from),to:Au(m),text:_r(c,m.from,m.to)};return tt(c,E,m.from.line,m.to.line+1),F(c,function(S){return tt(S,E,m.from.line,m.to.line+1)},!0),E}function Me(c){for(;c.length;){var m=vt(c);if(m.ranges)c.pop();else break}}function Ne(c,m){if(m)return Me(c.done),vt(c.done);if(c.done.length&&!vt(c.done).ranges)return vt(c.done);if(c.done.length>1&&!c.done[c.done.length-2].ranges)return c.done.pop(),vt(c.done)}function Ye(c,m,E,S){var C=c.history;C.undone.length=0;var B=+new Date,Z,re;if((C.lastOp==S||C.lastOrigin==m.origin&&m.origin&&(m.origin.charAt(0)=="+"&&C.lastModTime>B-(c.cm?c.cm.options.historyEventDelay:500)||m.origin.charAt(0)=="*"))&&(Z=Ne(C,C.lastOp==S)))re=vt(Z.changes),Qt(m.from,m.to)==0&&Qt(m.from,re.to)==0?re.to=Au(m):Z.changes.push(De(c,m));else{var le=vt(C.done);for((!le||!le.ranges)&&Ve(c.sel,C.done),Z={changes:[De(c,m)],generation:C.generation},C.done.push(Z);C.done.length>C.undoDepth;)C.done.shift(),C.done[0].ranges||C.done.shift()}C.done.push(E),C.generation=++C.maxGeneration,C.lastModTime=C.lastSelTime=B,C.lastOp=C.lastSelOp=S,C.lastOrigin=C.lastSelOrigin=m.origin,re||tn(c,"historyAdded")}function Ze(c,m,E,S){var C=m.charAt(0);return C=="*"||C=="+"&&E.ranges.length==S.ranges.length&&E.somethingSelected()==S.somethingSelected()&&new Date-c.history.lastSelTime<=(c.cm?c.cm.options.historyEventDelay:500)}function et(c,m,E,S){var C=c.history,B=S&&S.origin;E==C.lastSelOp||B&&C.lastSelOrigin==B&&(C.lastModTime==C.lastSelTime&&C.lastOrigin==B||Ze(c,B,vt(C.done),m))?C.done[C.done.length-1]=m:Ve(m,C.done),C.lastSelTime=+new Date,C.lastSelOrigin=B,C.lastSelOp=E,S&&S.clearRedo!==!1&&Me(C.undone)}function Ve(c,m){var E=vt(m);E&&E.ranges&&E.equals(c)||m.push(c)}function tt(c,m,E,S){var C=m["spans_"+c.id],B=0;c.iter(Math.max(c.first,E),Math.min(c.first+c.size,S),function(Z){Z.markedSpans&&((C||(C=m["spans_"+c.id]={}))[B]=Z.markedSpans),++B})}function ft(c){if(!c)return null;for(var m,E=0;E<c.length;++E)c[E].marker.explicitlyCleared?m||(m=c.slice(0,E)):m&&m.push(c[E]);return m?m.length?m:null:c}function xt(c,m){var E=m["spans_"+c.id];if(!E)return null;for(var S=[],C=0;C<m.text.length;++C)S.push(ft(E[C]));return S}function Bt(c,m){var E=xt(c,m),S=am(c,m);if(!E)return S;if(!S)return E;for(var C=0;C<E.length;++C){var B=E[C],Z=S[C];if(B&&Z)e:for(var re=0;re<Z.length;++re){for(var le=Z[re],xe=0;xe<B.length;++xe)if(B[xe].marker==le.marker)continue e;B.push(le)}else Z&&(E[C]=Z)}return E}function Pt(c,m,E){for(var S=[],C=0;C<c.length;++C){var B=c[C];if(B.ranges){S.push(E?ji.prototype.deepCopy.call(B):B);continue}var Z=B.changes,re=[];S.push({changes:re});for(var le=0;le<Z.length;++le){var xe=Z[le],We=void 0;if(re.push({from:xe.from,to:xe.to,text:xe.text}),m)for(var Je in xe)(We=Je.match(/^spans_(\d+)$/))&&Ht(m,Number(We[1]))>-1&&(vt(re)[Je]=xe[Je],delete xe[Je])}}return S}function Dt(c,m,E,S){if(S){var C=c.anchor;if(E){var B=Qt(m,C)<0;B!=Qt(E,C)<0?(C=m,m=E):B!=Qt(m,E)<0&&(m=E)}return new mi(C,m)}else return new mi(E||m,m)}function Yt(c,m,E,S,C){C==null&&(C=c.cm&&(c.cm.display.shift||c.extend)),Mr(c,new ji([Dt(c.sel.primary(),m,E,C)],0),S)}function hr(c,m,E){for(var S=[],C=c.cm&&(c.cm.display.shift||c.extend),B=0;B<c.sel.ranges.length;B++)S[B]=Dt(c.sel.ranges[B],m[B],null,C);var Z=Ka(c.cm,S,c.sel.primIndex);Mr(c,Z,E)}function or(c,m,E,S){var C=c.sel.ranges.slice(0);C[m]=E,Mr(c,Ka(c.cm,C,c.sel.primIndex),S)}function Er(c,m,E,S){Mr(c,La(m,E),S)}function Wr(c,m,E){var S={ranges:m.ranges,update:function(C){this.ranges=[];for(var B=0;B<C.length;B++)this.ranges[B]=new mi(Nr(c,C[B].anchor),Nr(c,C[B].head))},origin:E&&E.origin};return tn(c,"beforeSelectionChange",c,S),c.cm&&tn(c.cm,"beforeSelectionChange",c.cm,S),S.ranges!=m.ranges?Ka(c.cm,S.ranges,S.ranges.length-1):m}function Vr(c,m,E){var S=c.history.done,C=vt(S);C&&C.ranges?(S[S.length-1]=m,vn(c,m,E)):Mr(c,m,E)}function Mr(c,m,E){vn(c,m,E),et(c,c.sel,c.cm?c.cm.curOp.id:NaN,E)}function vn(c,m,E){(Ei(c,"beforeSelectionChange")||c.cm&&Ei(c.cm,"beforeSelectionChange"))&&(m=Wr(c,m,E));var S=E&&E.bias||(Qt(m.primary().head,c.sel.primary().head)<0?-1:1);Cr(c,Dn(c,m,S,!0)),!(E&&E.scroll===!1)&&c.cm&&c.cm.getOption("readOnly")!="nocursor"&&nr(c.cm)}function Cr(c,m){m.equals(c.sel)||(c.sel=m,c.cm&&(c.cm.curOp.updateInput=1,c.cm.curOp.selectionChanged=!0,Si(c.cm)),zi(c,"cursorActivity",c))}function gn(c){Cr(c,Dn(c,c.sel,null,!1))}function Dn(c,m,E,S){for(var C,B=0;B<m.ranges.length;B++){var Z=m.ranges[B],re=m.ranges.length==c.sel.ranges.length&&c.sel.ranges[B],le=sn(c,Z.anchor,re&&re.anchor,E,S),xe=Z.head==Z.anchor?le:sn(c,Z.head,re&&re.head,E,S);(C||le!=Z.anchor||xe!=Z.head)&&(C||(C=m.ranges.slice(0,B)),C[B]=new mi(le,xe))}return C?Ka(c.cm,C,m.primIndex):m}function cn(c,m,E,S,C){var B=_t(c,m.line);if(B.markedSpans)for(var Z=0;Z<B.markedSpans.length;++Z){var re=B.markedSpans[Z],le=re.marker,xe="selectLeft"in le?!le.selectLeft:le.inclusiveLeft,We="selectRight"in le?!le.selectRight:le.inclusiveRight;if((re.from==null||(xe?re.from<=m.ch:re.from<m.ch))&&(re.to==null||(We?re.to>=m.ch:re.to>m.ch))){if(C&&(tn(le,"beforeCursorEnter"),le.explicitlyCleared))if(B.markedSpans){--Z;continue}else break;if(!le.atomic)continue;if(E){var Je=le.find(S<0?1:-1),Et=void 0;if((S<0?We:xe)&&(Je=An(c,Je,-S,Je&&Je.line==m.line?B:null)),Je&&Je.line==m.line&&(Et=Qt(Je,E))&&(S<0?Et<0:Et>0))return cn(c,Je,m,S,C)}var bt=le.find(S<0?-1:1);return(S<0?xe:We)&&(bt=An(c,bt,S,bt.line==m.line?B:null)),bt?cn(c,bt,m,S,C):null}}return m}function sn(c,m,E,S,C){var B=S||1,Z=cn(c,m,E,B,C)||!C&&cn(c,m,E,B,!0)||cn(c,m,E,-B,C)||!C&&cn(c,m,E,-B,!0);return Z||(c.cantEdit=!0,it(c.first,0))}function An(c,m,E,S){return E<0&&m.ch==0?m.line>c.first?Nr(c,it(m.line-1)):null:E>0&&m.ch==(S||_t(c,m.line)).text.length?m.line<c.first+c.size-1?it(m.line+1,0):null:new it(m.line,m.ch+E)}function nn(c){c.setSelection(it(c.firstLine(),0),it(c.lastLine()),Jt)}function ln(c,m,E){var S={canceled:!1,from:m.from,to:m.to,text:m.text,origin:m.origin,cancel:function(){return S.canceled=!0}};return E&&(S.update=function(C,B,Z,re){C&&(S.from=Nr(c,C)),B&&(S.to=Nr(c,B)),Z&&(S.text=Z),re!==void 0&&(S.origin=re)}),tn(c,"beforeChange",c,S),c.cm&&tn(c.cm,"beforeChange",c.cm,S),S.canceled?(c.cm&&(c.cm.curOp.updateInput=2),null):{from:S.from,to:S.to,text:S.text,origin:S.origin}}function xo(c,m,E){if(c.cm){if(!c.cm.curOp)return mr(c.cm,xo)(c,m,E);if(c.cm.state.suppressEdits)return}if(!((Ei(c,"beforeChange")||c.cm&&Ei(c.cm,"beforeChange"))&&(m=ln(c,m,!0),!m))){var S=Il&&!E&&sm(c,m.from,m.to);if(S)for(var C=S.length-1;C>=0;--C)wo(c,{from:S[C].from,to:S[C].to,text:C?[""]:m.text,origin:m.origin});else wo(c,m)}}function wo(c,m){if(!(m.text.length==1&&m.text[0]==""&&Qt(m.from,m.to)==0)){var E=ch(c,m);Ye(c,m,E,c.cm?c.cm.curOp.id:NaN),Ki(c,m,E,am(c,m));var S=[];F(c,function(C,B){!B&&Ht(S,C.history)==-1&&(As(C.history,m),S.push(C.history)),Ki(C,m,null,am(C,m))})}}function Io(c,m,E){var S=c.cm&&c.cm.state.suppressEdits;if(!(S&&!E)){for(var C=c.history,B,Z=c.sel,re=m=="undo"?C.done:C.undone,le=m=="undo"?C.undone:C.done,xe=0;xe<re.length&&(B=re[xe],!(E?B.ranges&&!B.equals(c.sel):!B.ranges));xe++);if(xe!=re.length){for(C.lastOrigin=C.lastSelOrigin=null;;)if(B=re.pop(),B.ranges){if(Ve(B,le),E&&!B.equals(c.sel)){Mr(c,B,{clearRedo:!1});return}Z=B}else if(S){re.push(B);return}else break;var We=[];Ve(Z,le),le.push({changes:We,generation:C.generation}),C.generation=B.generation||++C.maxGeneration;for(var Je=Ei(c,"beforeChange")||c.cm&&Ei(c.cm,"beforeChange"),Et=function(rr){var gr=B.changes[rr];if(gr.origin=m,Je&&!ln(c,gr,!1))return re.length=0,{};We.push(De(c,gr));var Tr=rr?ch(c,gr):vt(re);Ki(c,gr,Tr,Bt(c,gr)),!rr&&c.cm&&c.cm.scrollIntoView({from:gr.from,to:Au(gr)});var Fr=[];F(c,function(kr,Hr){!Hr&&Ht(Fr,kr.history)==-1&&(As(kr.history,gr),Fr.push(kr.history)),Ki(kr,gr,null,Bt(kr,gr))})},bt=B.changes.length-1;bt>=0;--bt){var $t=Et(bt);if($t)return $t.v}}}}function _a(c,m){if(m!=0&&(c.first+=m,c.sel=new ji(Kt(c.sel.ranges,function(C){return new mi(it(C.anchor.line+m,C.anchor.ch),it(C.head.line+m,C.head.ch))}),c.sel.primIndex),c.cm)){na(c.cm,c.first,c.first-m,m);for(var E=c.cm.display,S=E.viewFrom;S<E.viewTo;S++)qs(c.cm,S,"gutter")}}function Ki(c,m,E,S){if(c.cm&&!c.cm.curOp)return mr(c.cm,Ki)(c,m,E,S);if(m.to.line<c.first){_a(c,m.text.length-1-(m.to.line-m.from.line));return}if(!(m.from.line>c.lastLine())){if(m.from.line<c.first){var C=m.text.length-1-(c.first-m.from.line);_a(c,C),m={from:it(c.first,0),to:it(m.to.line+C,m.to.ch),text:[vt(m.text)],origin:m.origin}}var B=c.lastLine();m.to.line>B&&(m={from:m.from,to:it(B,_t(c,B).text.length),text:[m.text[0]],origin:m.origin}),m.removed=_r(c,m.from,m.to),E||(E=ch(c,m)),c.cm?So(c.cm,m,S):O(c,m,S),vn(c,E,Jt),c.cantEdit&&sn(c,it(c.firstLine(),0))&&(c.cantEdit=!1)}}function So(c,m,E){var S=c.doc,C=c.display,B=m.from,Z=m.to,re=!1,le=B.line;c.options.lineWrapping||(le=ce(ei(_t(S,B.line))),S.iter(le,Z.line+1,function(bt){if(bt==C.maxLine)return re=!0,!0})),S.sel.contains(m.from,m.to)>-1&&Si(c),O(S,m,E,pm(c)),c.options.lineWrapping||(S.iter(le,B.line+m.text.length,function(bt){var $t=ho(bt);$t>C.maxLineLength&&(C.maxLine=bt,C.maxLineLength=$t,C.maxLineChanged=!0,re=!1)}),re&&(c.curOp.updateMaxLine=!0)),oo(S,B.line),va(c,400);var xe=m.text.length-(Z.line-B.line)-1;m.full?na(c):B.line==Z.line&&m.text.length==1&&!x(c.doc,m)?qs(c,B.line,"text"):na(c,B.line,Z.line+1,xe);var We=Ei(c,"changes"),Je=Ei(c,"change");if(Je||We){var Et={from:B,to:Z,text:m.text,removed:m.removed,origin:m.origin};Je&&zi(c,"change",c,Et),We&&(c.curOp.changeObjs||(c.curOp.changeObjs=[])).push(Et)}c.display.selForContextMenu=null}function xa(c,m,E,S,C){var B;S||(S=E),Qt(S,E)<0&&(B=[S,E],E=B[0],S=B[1]),typeof m=="string"&&(m=c.splitLines(m)),xo(c,{from:E,to:S,text:m,origin:C})}function os(c,m,E,S){E<c.line?c.line+=S:m<c.line&&(c.line=m,c.ch=0)}function Zu(c,m,E,S){for(var C=0;C<c.length;++C){var B=c[C],Z=!0;if(B.ranges){B.copied||(B=c[C]=B.deepCopy(),B.copied=!0);for(var re=0;re<B.ranges.length;re++)os(B.ranges[re].anchor,m,E,S),os(B.ranges[re].head,m,E,S);continue}for(var le=0;le<B.changes.length;++le){var xe=B.changes[le];if(E<xe.from.line)xe.from=it(xe.from.line+S,xe.from.ch),xe.to=it(xe.to.line+S,xe.to.ch);else if(m<=xe.to.line){Z=!1;break}}Z||(c.splice(0,C+1),C=0)}}function As(c,m){var E=m.from.line,S=m.to.line,C=m.text.length-(S-E)-1;Zu(c.done,E,S,C),Zu(c.undone,E,S,C)}function ks(c,m,E,S){var C=m,B=m;return typeof m=="number"?B=_t(c,Va(c,m)):C=ce(m),C==null?null:(S(B,C)&&c.cm&&qs(c.cm,C,E),B)}function Za(c){this.lines=c,this.parent=null;for(var m=0,E=0;E<c.length;++E)c[E].parent=this,m+=c[E].height;this.height=m}Za.prototype={chunkSize:function(){return this.lines.length},removeInner:function(c,m){for(var E=c,S=c+m;E<S;++E){var C=this.lines[E];this.height-=C.height,sl(C),zi(C,"delete")}this.lines.splice(c,m)},collapse:function(c){c.push.apply(c,this.lines)},insertInner:function(c,m,E){this.height+=E,this.lines=this.lines.slice(0,c).concat(m).concat(this.lines.slice(c));for(var S=0;S<m.length;++S)m[S].parent=this},iterN:function(c,m,E){for(var S=c+m;c<S;++c)if(E(this.lines[c]))return!0}};function Yu(c){this.children=c;for(var m=0,E=0,S=0;S<c.length;++S){var C=c[S];m+=C.chunkSize(),E+=C.height,C.parent=this}this.size=m,this.height=E,this.parent=null}Yu.prototype={chunkSize:function(){return this.size},removeInner:function(c,m){this.size-=m;for(var E=0;E<this.children.length;++E){var S=this.children[E],C=S.chunkSize();if(c<C){var B=Math.min(m,C-c),Z=S.height;if(S.removeInner(c,B),this.height-=Z-S.height,C==B&&(this.children.splice(E--,1),S.parent=null),(m-=B)==0)break;c=0}else c-=C}if(this.size-m<25&&(this.children.length>1||!(this.children[0]instanceof Za))){var re=[];this.collapse(re),this.children=[new Za(re)],this.children[0].parent=this}},collapse:function(c){for(var m=0;m<this.children.length;++m)this.children[m].collapse(c)},insertInner:function(c,m,E){this.size+=m.length,this.height+=E;for(var S=0;S<this.children.length;++S){var C=this.children[S],B=C.chunkSize();if(c<=B){if(C.insertInner(c,m,E),C.lines&&C.lines.length>50){for(var Z=C.lines.length%25+25,re=Z;re<C.lines.length;){var le=new Za(C.lines.slice(re,re+=25));C.height-=le.height,this.children.splice(++S,0,le),le.parent=this}C.lines=C.lines.slice(0,Z),this.maybeSpill()}break}c-=B}},maybeSpill:function(){if(!(this.children.length<=10)){var c=this;do{var m=c.children.splice(c.children.length-5,5),E=new Yu(m);if(c.parent){c.size-=E.size,c.height-=E.height;var C=Ht(c.parent.children,c);c.parent.children.splice(C+1,0,E)}else{var S=new Yu(c.children);S.parent=c,c.children=[S,E],c=S}E.parent=c.parent}while(c.children.length>10);c.parent.maybeSpill()}},iterN:function(c,m,E){for(var S=0;S<this.children.length;++S){var C=this.children[S],B=C.chunkSize();if(c<B){var Z=Math.min(m,B-c);if(C.iterN(c,Z,E))return!0;if((m-=Z)==0)break;c=0}else c-=B}}};var ql=function(c,m,E){if(E)for(var S in E)E.hasOwnProperty(S)&&(this[S]=E[S]);this.doc=c,this.node=m};ql.prototype.clear=function(){var c=this.doc.cm,m=this.line.widgets,E=this.line,S=ce(E);if(!(S==null||!m)){for(var C=0;C<m.length;++C)m[C]==this&&m.splice(C--,1);m.length||(E.widgets=null);var B=Rs(this);Mt(E,Math.max(0,E.height-B)),c&&(aa(c,function(){ku(c,E,-B),qs(c,S,"widget")}),zi(c,"lineWidgetCleared",c,this,S))}},ql.prototype.changed=function(){var c=this,m=this.height,E=this.doc.cm,S=this.line;this.height=null;var C=Rs(this)-m;C&&(fo(this.doc,S)||Mt(S,S.height+C),E&&aa(E,function(){E.curOp.forceUpdate=!0,ku(E,S,C),zi(E,"lineWidgetChanged",E,c,ce(S))}))},qe(ql);function ku(c,m,E){Fo(m)<(c.curOp&&c.curOp.scrollTop||c.doc.scrollTop)&&sd(c,E)}function Sf(c,m,E,S){var C=new ql(c,E,S),B=c.cm;return B&&C.noHScroll&&(B.display.alignWidgets=!0),ks(c,m,"widget",function(Z){var re=Z.widgets||(Z.widgets=[]);if(C.insertAt==null?re.push(C):re.splice(Math.min(re.length,Math.max(0,C.insertAt)),0,C),C.line=Z,B&&!fo(c,Z)){var le=Fo(Z)<c.scrollTop;Mt(Z,Z.height+Rs(C)),le&&sd(B,C.height),B.curOp.forceUpdate=!0}return!0}),B&&zi(B,"lineWidgetAdded",B,C,typeof m=="number"?m:ce(m)),C}var Ef=0,wa=function(c,m){this.lines=[],this.type=m,this.doc=c,this.id=++Ef};wa.prototype.clear=function(){if(!this.explicitlyCleared){var c=this.doc.cm,m=c&&!c.curOp;if(m&&In(c),Ei(this,"clear")){var E=this.find();E&&zi(this,"clear",E.from,E.to)}for(var S=null,C=null,B=0;B<this.lines.length;++B){var Z=this.lines[B],re=al(Z.markedSpans,this);c&&!this.collapsed?qs(c,ce(Z),"text"):c&&(re.to!=null&&(C=ce(Z)),re.from!=null&&(S=ce(Z))),Z.markedSpans=Wa(Z.markedSpans,re),re.from==null&&this.collapsed&&!fo(this.doc,Z)&&c&&Mt(Z,dl(c.display))}if(c&&this.collapsed&&!c.options.lineWrapping)for(var le=0;le<this.lines.length;++le){var xe=ei(this.lines[le]),We=ho(xe);We>c.display.maxLineLength&&(c.display.maxLine=xe,c.display.maxLineLength=We,c.display.maxLineChanged=!0)}S!=null&&c&&this.collapsed&&na(c,S,C+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,c&&gn(c.doc)),c&&zi(c,"markerCleared",c,this,S,C),m&&Ts(c),this.parent&&this.parent.clear()}},wa.prototype.find=function(c,m){c==null&&this.type=="bookmark"&&(c=1);for(var E,S,C=0;C<this.lines.length;++C){var B=this.lines[C],Z=al(B.markedSpans,this);if(Z.from!=null&&(E=it(m?B:ce(B),Z.from),c==-1))return E;if(Z.to!=null&&(S=it(m?B:ce(B),Z.to),c==1))return S}return E&&{from:E,to:S}},wa.prototype.changed=function(){var c=this,m=this.find(-1,!0),E=this,S=this.doc.cm;!m||!S||aa(S,function(){var C=m.line,B=ce(m.line),Z=sp(S,B);if(Z&&(rh(Z),S.curOp.selectionChanged=S.curOp.forceUpdate=!0),S.curOp.updateMaxLine=!0,!fo(E.doc,C)&&E.height!=null){var re=E.height;E.height=null;var le=Rs(E)-re;le&&Mt(C,C.height+le)}zi(S,"markerChanged",S,c)})},wa.prototype.attachLine=function(c){if(!this.lines.length&&this.doc.cm){var m=this.doc.cm.curOp;(!m.maybeHiddenMarkers||Ht(m.maybeHiddenMarkers,this)==-1)&&(m.maybeUnhiddenMarkers||(m.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(c)},wa.prototype.detachLine=function(c){if(this.lines.splice(Ht(this.lines,c),1),!this.lines.length&&this.doc.cm){var m=this.doc.cm.curOp;(m.maybeHiddenMarkers||(m.maybeHiddenMarkers=[])).push(this)}},qe(wa);function Cu(c,m,E,S,C){if(S&&S.shared)return sa(c,m,E,S,C);if(c.cm&&!c.cm.curOp)return mr(c.cm,Cu)(c,m,E,S,C);var B=new wa(c,C),Z=Qt(m,E);if(S&&ut(S,B,!1),Z>0||Z==0&&B.clearWhenEmpty!==!1)return B;if(B.replacedWith&&(B.collapsed=!0,B.widgetNode=he("span",[B.replacedWith],"CodeMirror-widget"),S.handleMouseEvents||B.widgetNode.setAttribute("cm-ignore-events","true"),S.insertLeft&&(B.widgetNode.insertLeft=!0)),B.collapsed){if(td(c,m.line,m,E,B)||m.line!=E.line&&td(c,E.line,m,E,B))throw new Error("Inserting collapsed marker partially overlapping an existing one");Dl()}B.addToHistory&&Ye(c,{from:m,to:E,origin:"markText"},c.sel,NaN);var re=m.line,le=c.cm,xe;if(c.iter(re,E.line+1,function(Je){le&&B.collapsed&&!le.options.lineWrapping&&ei(Je)==le.display.maxLine&&(xe=!0),B.collapsed&&re!=m.line&&Mt(Je,0),Ol(Je,new Jd(B,re==m.line?m.ch:null,re==E.line?E.ch:null),c.cm&&c.cm.curOp),++re}),B.collapsed&&c.iter(m.line,E.line+1,function(Je){fo(c,Je)&&Mt(Je,0)}),B.clearOnEnter&&tr(B,"beforeCursorEnter",function(){return B.clear()}),B.readOnly&&(om(),(c.history.done.length||c.history.undone.length)&&c.clearHistory()),B.collapsed&&(B.id=++Ef,B.atomic=!0),le){if(xe&&(le.curOp.updateMaxLine=!0),B.collapsed)na(le,m.line,E.line+1);else if(B.className||B.startStyle||B.endStyle||B.css||B.attributes||B.title)for(var We=m.line;We<=E.line;We++)qs(le,We,"text");B.atomic&&gn(le.doc),zi(le,"markerAdded",le,B)}return B}var Bs=function(c,m){this.markers=c,this.primary=m;for(var E=0;E<c.length;++E)c[E].parent=this};Bs.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var c=0;c<this.markers.length;++c)this.markers[c].clear();zi(this,"clear")}},Bs.prototype.find=function(c,m){return this.primary.find(c,m)},qe(Bs);function sa(c,m,E,S,C){S=ut(S),S.shared=!1;var B=[Cu(c,m,E,S,C)],Z=B[0],re=S.widgetNode;return F(c,function(le){re&&(S.widgetNode=re.cloneNode(!0)),B.push(Cu(le,Nr(le,m),Nr(le,E),S,C));for(var xe=0;xe<le.linked.length;++xe)if(le.linked[xe].isParent)return;Z=vt(B)}),new Bs(B,Z)}function Iu(c){return c.findMarks(it(c.first,0),c.clipPos(it(c.lastLine())),function(m){return m.parent})}function Xu(c,m){for(var E=0;E<m.length;E++){var S=m[E],C=S.find(),B=c.clipPos(C.from),Z=c.clipPos(C.to);if(Qt(B,Z)){var re=Cu(c,B,Z,S.primary,S.primary.type);S.markers.push(re),re.parent=S}}}function Tf(c){for(var m=function(S){var C=c[S],B=[C.primary.doc];F(C.primary.doc,function(le){return B.push(le)});for(var Z=0;Z<C.markers.length;Z++){var re=C.markers[Z];Ht(B,re.doc)==-1&&(re.parent=null,C.markers.splice(Z--,1))}},E=0;E<c.length;E++)m(E)}var ri=0,to=function(c,m,E,S,C){if(!(this instanceof to))return new to(c,m,E,S,C);E==null&&(E=0),Yu.call(this,[new Za([new Ec("",null)])]),this.first=E,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=E;var B=it(E,0);this.sel=La(B),this.history=new be(null),this.id=++ri,this.modeOption=m,this.lineSep=S,this.direction=C=="rtl"?"rtl":"ltr",this.extend=!1,typeof c=="string"&&(c=this.splitLines(c)),O(this,{from:B,to:B,text:c}),Mr(this,La(B),Jt)};to.prototype=Tt(Yu.prototype,{constructor:to,iter:function(c,m,E){E?this.iterN(c-this.first,m-c,E):this.iterN(this.first,this.first+this.size,c)},insert:function(c,m){for(var E=0,S=0;S<m.length;++S)E+=m[S].height;this.insertInner(c-this.first,m,E)},remove:function(c,m){this.removeInner(c-this.first,m)},getValue:function(c){var m=dr(this,this.first,this.first+this.size);return c===!1?m:m.join(c||this.lineSeparator())},setValue:Zo(function(c){var m=it(this.first,0),E=this.first+this.size-1;xo(this,{from:m,to:it(E,_t(this,E).text.length),text:this.splitLines(c),origin:"setValue",full:!0},!0),this.cm&&Ko(this.cm,0,0),Mr(this,La(m),Jt)}),replaceRange:function(c,m,E,S){m=Nr(this,m),E=E?Nr(this,E):m,xa(this,c,m,E,S)},getRange:function(c,m,E){var S=_r(this,Nr(this,c),Nr(this,m));return E===!1?S:E===""?S.join(""):S.join(E||this.lineSeparator())},getLine:function(c){var m=this.getLineHandle(c);return m&&m.text},getLineHandle:function(c){if(ct(this,c))return _t(this,c)},getLineNumber:function(c){return ce(c)},getLineHandleVisualStart:function(c){return typeof c=="number"&&(c=_t(this,c)),ei(c)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(c){return Nr(this,c)},getCursor:function(c){var m=this.sel.primary(),E;return c==null||c=="head"?E=m.head:c=="anchor"?E=m.anchor:c=="end"||c=="to"||c===!1?E=m.to():E=m.from(),E},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Zo(function(c,m,E){Er(this,Nr(this,typeof c=="number"?it(c,m||0):c),null,E)}),setSelection:Zo(function(c,m,E){Er(this,Nr(this,c),Nr(this,m||c),E)}),extendSelection:Zo(function(c,m,E){Yt(this,Nr(this,c),m&&Nr(this,m),E)}),extendSelections:Zo(function(c,m){hr(this,yi(this,c),m)}),extendSelectionsBy:Zo(function(c,m){var E=Kt(this.sel.ranges,c);hr(this,yi(this,E),m)}),setSelections:Zo(function(c,m,E){if(c.length){for(var S=[],C=0;C<c.length;C++)S[C]=new mi(Nr(this,c[C].anchor),Nr(this,c[C].head||c[C].anchor));m==null&&(m=Math.min(c.length-1,this.sel.primIndex)),Mr(this,Ka(this.cm,S,m),E)}}),addSelection:Zo(function(c,m,E){var S=this.sel.ranges.slice(0);S.push(new mi(Nr(this,c),Nr(this,m||c))),Mr(this,Ka(this.cm,S,S.length-1),E)}),getSelection:function(c){for(var m=this.sel.ranges,E,S=0;S<m.length;S++){var C=_r(this,m[S].from(),m[S].to());E=E?E.concat(C):C}return c===!1?E:E.join(c||this.lineSeparator())},getSelections:function(c){for(var m=[],E=this.sel.ranges,S=0;S<E.length;S++){var C=_r(this,E[S].from(),E[S].to());c!==!1&&(C=C.join(c||this.lineSeparator())),m[S]=C}return m},replaceSelection:function(c,m,E){for(var S=[],C=0;C<this.sel.ranges.length;C++)S[C]=c;this.replaceSelections(S,m,E||"+input")},replaceSelections:Zo(function(c,m,E){for(var S=[],C=this.sel,B=0;B<C.ranges.length;B++){var Z=C.ranges[B];S[B]={from:Z.from(),to:Z.to(),text:this.splitLines(c[B]),origin:E}}for(var re=m&&m!="end"&&d(this,S,m),le=S.length-1;le>=0;le--)xo(this,S[le]);re?Vr(this,re):this.cm&&nr(this.cm)}),undo:Zo(function(){Io(this,"undo")}),redo:Zo(function(){Io(this,"redo")}),undoSelection:Zo(function(){Io(this,"undo",!0)}),redoSelection:Zo(function(){Io(this,"redo",!0)}),setExtending:function(c){this.extend=c},getExtending:function(){return this.extend},historySize:function(){for(var c=this.history,m=0,E=0,S=0;S<c.done.length;S++)c.done[S].ranges||++m;for(var C=0;C<c.undone.length;C++)c.undone[C].ranges||++E;return{undo:m,redo:E}},clearHistory:function(){var c=this;this.history=new be(this.history),F(this,function(m){return m.history=c.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(c){return c&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(c){return this.history.generation==(c||this.cleanGeneration)},getHistory:function(){return{done:Pt(this.history.done),undone:Pt(this.history.undone)}},setHistory:function(c){var m=this.history=new be(this.history);m.done=Pt(c.done.slice(0),null,!0),m.undone=Pt(c.undone.slice(0),null,!0)},setGutterMarker:Zo(function(c,m,E){return ks(this,c,"gutter",function(S){var C=S.gutterMarkers||(S.gutterMarkers={});return C[m]=E,!E&&sr(C)&&(S.gutterMarkers=null),!0})}),clearGutter:Zo(function(c){var m=this;this.iter(function(E){E.gutterMarkers&&E.gutterMarkers[c]&&ks(m,E,"gutter",function(){return E.gutterMarkers[c]=null,sr(E.gutterMarkers)&&(E.gutterMarkers=null),!0})})}),lineInfo:function(c){var m;if(typeof c=="number"){if(!ct(this,c)||(m=c,c=_t(this,c),!c))return null}else if(m=ce(c),m==null)return null;return{line:m,handle:c,text:c.text,gutterMarkers:c.gutterMarkers,textClass:c.textClass,bgClass:c.bgClass,wrapClass:c.wrapClass,widgets:c.widgets}},addLineClass:Zo(function(c,m,E){return ks(this,c,m=="gutter"?"gutter":"class",function(S){var C=m=="text"?"textClass":m=="background"?"bgClass":m=="gutter"?"gutterClass":"wrapClass";if(!S[C])S[C]=E;else{if(se(E).test(S[C]))return!1;S[C]+=" "+E}return!0})}),removeLineClass:Zo(function(c,m,E){return ks(this,c,m=="gutter"?"gutter":"class",function(S){var C=m=="text"?"textClass":m=="background"?"bgClass":m=="gutter"?"gutterClass":"wrapClass",B=S[C];if(B)if(E==null)S[C]=null;else{var Z=B.match(se(E));if(!Z)return!1;var re=Z.index+Z[0].length;S[C]=B.slice(0,Z.index)+(!Z.index||re==B.length?"":" ")+B.slice(re)||null}else return!1;return!0})}),addLineWidget:Zo(function(c,m,E){return Sf(this,c,m,E)}),removeLineWidget:function(c){c.clear()},markText:function(c,m,E){return Cu(this,Nr(this,c),Nr(this,m),E,E&&E.type||"range")},setBookmark:function(c,m){var E={replacedWith:m&&(m.nodeType==null?m.widget:m),insertLeft:m&&m.insertLeft,clearWhenEmpty:!1,shared:m&&m.shared,handleMouseEvents:m&&m.handleMouseEvents};return c=Nr(this,c),Cu(this,c,c,E,"bookmark")},findMarksAt:function(c){c=Nr(this,c);var m=[],E=_t(this,c.line).markedSpans;if(E)for(var S=0;S<E.length;++S){var C=E[S];(C.from==null||C.from<=c.ch)&&(C.to==null||C.to>=c.ch)&&m.push(C.marker.parent||C.marker)}return m},findMarks:function(c,m,E){c=Nr(this,c),m=Nr(this,m);var S=[],C=c.line;return this.iter(c.line,m.line+1,function(B){var Z=B.markedSpans;if(Z)for(var re=0;re<Z.length;re++){var le=Z[re];!(le.to!=null&&C==c.line&&c.ch>=le.to||le.from==null&&C!=c.line||le.from!=null&&C==m.line&&le.from>=m.ch)&&(!E||E(le.marker))&&S.push(le.marker.parent||le.marker)}++C}),S},getAllMarks:function(){var c=[];return this.iter(function(m){var E=m.markedSpans;if(E)for(var S=0;S<E.length;++S)E[S].from!=null&&c.push(E[S].marker)}),c},posFromIndex:function(c){var m,E=this.first,S=this.lineSeparator().length;return this.iter(function(C){var B=C.text.length+S;if(B>c)return m=c,!0;c-=B,++E}),Nr(this,it(E,m))},indexFromPos:function(c){c=Nr(this,c);var m=c.ch;if(c.line<this.first||c.ch<0)return 0;var E=this.lineSeparator().length;return this.iter(this.first,c.line,function(S){m+=S.text.length+E}),m},copy:function(c){var m=new to(dr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return m.scrollTop=this.scrollTop,m.scrollLeft=this.scrollLeft,m.sel=this.sel,m.extend=!1,c&&(m.history.undoDepth=this.history.undoDepth,m.setHistory(this.getHistory())),m},linkedDoc:function(c){c||(c={});var m=this.first,E=this.first+this.size;c.from!=null&&c.from>m&&(m=c.from),c.to!=null&&c.to<E&&(E=c.to);var S=new to(dr(this,m,E),c.mode||this.modeOption,m,this.lineSep,this.direction);return c.sharedHist&&(S.history=this.history),(this.linked||(this.linked=[])).push({doc:S,sharedHist:c.sharedHist}),S.linked=[{doc:this,isParent:!0,sharedHist:c.sharedHist}],Xu(S,Iu(this)),S},unlinkDoc:function(c){if(c instanceof Pi&&(c=c.doc),this.linked)for(var m=0;m<this.linked.length;++m){var E=this.linked[m];if(E.doc==c){this.linked.splice(m,1),c.unlinkDoc(this),Tf(Iu(this));break}}if(c.history==this.history){var S=[c.id];F(c,function(C){return S.push(C.id)},!0),c.history=new be(null),c.history.done=Pt(this.history.done,S),c.history.undone=Pt(this.history.undone,S)}},iterLinkedDocs:function(c){F(this,c)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(c){return this.lineSep?c.split(this.lineSep):ii(c)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Zo(function(c){c!="rtl"&&(c="ltr"),c!=this.direction&&(this.direction=c,this.iter(function(m){return m.order=null}),this.cm&&ae(this.cm))})}),to.prototype.eachLine=to.prototype.iter;var Ya=0;function Af(c){var m=this;if(Lg(m),!(Rn(m,c)||Zl(m.display,c))){ze(c),s&&(Ya=+new Date);var E=li(m,c,!0),S=c.dataTransfer.files;if(!(!E||m.isReadOnly()))if(S&&S.length&&window.FileReader&&window.File)for(var C=S.length,B=Array(C),Z=0,re=function(){++Z==C&&mr(m,function(){E=Nr(m.doc,E);var bt={from:E,to:E,text:m.doc.splitLines(B.filter(function($t){return $t!=null}).join(m.doc.lineSeparator())),origin:"paste"};xo(m.doc,bt),Vr(m.doc,La(Nr(m.doc,E),Nr(m.doc,Au(bt))))})()},le=function(bt,$t){if(m.options.allowDropFileTypes&&Ht(m.options.allowDropFileTypes,bt.type)==-1){re();return}var rr=new FileReader;rr.onerror=function(){return re()},rr.onload=function(){var gr=rr.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(gr)){re();return}B[$t]=gr,re()},rr.readAsText(bt)},xe=0;xe<S.length;xe++)le(S[xe],xe);else{if(m.state.draggingText&&m.doc.sel.contains(E)>-1){m.state.draggingText(c),setTimeout(function(){return m.display.input.focus()},20);return}try{var We=c.dataTransfer.getData("Text");if(We){var Je;if(m.state.draggingText&&!m.state.draggingText.copy&&(Je=m.listSelections()),vn(m.doc,La(E,E)),Je)for(var Et=0;Et<Je.length;++Et)xa(m.doc,"",Je[Et].anchor,Je[Et].head,"drag");m.replaceSelection(We,"around","paste"),m.display.input.focus()}}catch{}}}}function vm(c,m){if(s&&(!c.state.draggingText||+new Date-Ya<100)){fr(m);return}if(!(Rn(c,m)||Zl(c.display,m))&&(m.dataTransfer.setData("Text",c.getSelection()),m.dataTransfer.effectAllowed="copyMove",m.dataTransfer.setDragImage&&!P)){var E=$("img",null,null,"position: fixed; left: 0; top: 0;");E.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",I&&(E.width=E.height=1,c.display.wrapper.appendChild(E),E._top=E.offsetTop),m.dataTransfer.setDragImage(E,0,0),I&&E.parentNode.removeChild(E)}}function Kn(c,m){var E=li(c,m);if(E){var S=document.createDocumentFragment();up(c,E,S),c.display.dragCursor||(c.display.dragCursor=$("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),c.display.lineSpace.insertBefore(c.display.dragCursor,c.display.cursorDiv)),U(c.display.dragCursor,S)}}function Lg(c){c.display.dragCursor&&(c.display.lineSpace.removeChild(c.display.dragCursor),c.display.dragCursor=null)}function hh(c){if(document.getElementsByClassName){for(var m=document.getElementsByClassName("CodeMirror"),E=[],S=0;S<m.length;S++){var C=m[S].CodeMirror;C&&E.push(C)}E.length&&E[0].operation(function(){for(var B=0;B<E.length;B++)c(E[B])})}}var kf=!1;function Cf(){kf||(hp(),kf=!0)}function hp(){var c;tr(window,"resize",function(){c==null&&(c=setTimeout(function(){c=null,hh(yy)},100))}),tr(window,"blur",function(){return hh(yf)})}function yy(c){var m=c.display;m.cachedCharWidth=m.cachedTextHeight=m.cachedPaddingH=null,m.scrollbarsClipped=!1,c.setSize()}for(var No={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Xa=0;Xa<10;Xa++)No[Xa+48]=No[Xa+96]=String(Xa);for(var fd=65;fd<=90;fd++)No[fd]=String.fromCharCode(fd);for(var dh=1;dh<=12;dh++)No[dh+111]=No[dh+63235]="F"+dh;var Oc={};Oc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Oc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Oc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Oc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Oc.default=V?Oc.macDefault:Oc.pcDefault;function x0(c){var m=c.split(/-(?!$)/);c=m[m.length-1];for(var E,S,C,B,Z=0;Z<m.length-1;Z++){var re=m[Z];if(/^(cmd|meta|m)$/i.test(re))B=!0;else if(/^a(lt)?$/i.test(re))E=!0;else if(/^(c|ctrl|control)$/i.test(re))S=!0;else if(/^s(hift)?$/i.test(re))C=!0;else throw new Error("Unrecognized modifier name: "+re)}return E&&(c="Alt-"+c),S&&(c="Ctrl-"+c),B&&(c="Cmd-"+c),C&&(c="Shift-"+c),c}function nu(c){var m={};for(var E in c)if(c.hasOwnProperty(E)){var S=c[E];if(/^(name|fallthrough|(de|at)tach)$/.test(E))continue;if(S=="..."){delete c[E];continue}for(var C=Kt(E.split(" "),x0),B=0;B<C.length;B++){var Z=void 0,re=void 0;B==C.length-1?(re=C.join(" "),Z=S):(re=C.slice(0,B+1).join(" "),Z="...");var le=m[re];if(!le)m[re]=Z;else if(le!=Z)throw new Error("Inconsistent bindings for "+re)}delete c[E]}for(var xe in m)c[xe]=m[xe];return c}function iu(c,m,E,S){m=pp(m);var C=m.call?m.call(c,S):m[c];if(C===!1)return"nothing";if(C==="...")return"multi";if(C!=null&&E(C))return"handled";if(m.fallthrough){if(Object.prototype.toString.call(m.fallthrough)!="[object Array]")return iu(c,m.fallthrough,E,S);for(var B=0;B<m.fallthrough.length;B++){var Z=iu(c,m.fallthrough[B],E,S);if(Z)return Z}}}function dp(c){var m=typeof c=="string"?c:No[c.keyCode];return m=="Ctrl"||m=="Alt"||m=="Shift"||m=="Mod"}function by(c,m,E){var S=c;return m.altKey&&S!="Alt"&&(c="Alt-"+c),(Q?m.metaKey:m.ctrlKey)&&S!="Ctrl"&&(c="Ctrl-"+c),(Q?m.ctrlKey:m.metaKey)&&S!="Mod"&&(c="Cmd-"+c),!E&&m.shiftKey&&S!="Shift"&&(c="Shift-"+c),c}function ph(c,m){if(I&&c.keyCode==34&&c.char)return!1;var E=No[c.keyCode];return E==null||c.altGraphKey?!1:(c.keyCode==3&&c.code&&(E=c.code),by(E,c,m))}function pp(c){return typeof c=="string"?Oc[c]:c}function gl(c,m){for(var E=c.doc.sel.ranges,S=[],C=0;C<E.length;C++){for(var B=m(E[C]);S.length&&Qt(B.from,vt(S).to)<=0;){var Z=S.pop();if(Qt(Z.from,B.from)<0){B.from=Z.from;break}}S.push(B)}aa(c,function(){for(var re=S.length-1;re>=0;re--)xa(c.doc,"",S[re].from,S[re].to,"+delete");nr(c)})}function mh(c,m,E){var S=Rt(c.text,m+E,E);return S<0||S>c.text.length?null:S}function ym(c,m,E){var S=mh(c,m.ch,E);return S==null?null:new it(m.line,S,E<0?"after":"before")}function bm(c,m,E,S,C){if(c){m.doc.direction=="rtl"&&(C=-C);var B=Ot(E,m.doc.direction);if(B){var Z=C<0?vt(B):B[0],re=C<0==(Z.level==1),le=re?"after":"before",xe;if(Z.level>0||m.doc.direction=="rtl"){var We=$a(m,E);xe=C<0?E.text.length-1:0;var Je=Gs(m,We,xe).top;xe=xr(function(Et){return Gs(m,We,Et).top==Je},C<0==(Z.level==1)?Z.from:Z.to-1,xe),le=="before"&&(xe=mh(E,xe,1))}else xe=C<0?Z.to:Z.from;return new it(S,xe,le)}}return new it(S,C<0?E.text.length:0,C<0?"before":"after")}function gh(c,m,E,S){var C=Ot(m,c.doc.direction);if(!C)return ym(m,E,S);E.ch>=m.text.length?(E.ch=m.text.length,E.sticky="before"):E.ch<=0&&(E.ch=0,E.sticky="after");var B=Cn(C,E.ch,E.sticky),Z=C[B];if(c.doc.direction=="ltr"&&Z.level%2==0&&(S>0?Z.to>E.ch:Z.from<E.ch))return ym(m,E,S);var re=function(Tr,Fr){return mh(m,Tr instanceof it?Tr.ch:Tr,Fr)},le,xe=function(Tr){return c.options.lineWrapping?(le=le||$a(c,m),eo(c,m,le,Tr)):{begin:0,end:m.text.length}},We=xe(E.sticky=="before"?re(E,-1):E.ch);if(c.doc.direction=="rtl"||Z.level==1){var Je=Z.level==1==S<0,Et=re(E,Je?1:-1);if(Et!=null&&(Je?Et<=Z.to&&Et<=We.end:Et>=Z.from&&Et>=We.begin)){var bt=Je?"before":"after";return new it(E.line,Et,bt)}}var $t=function(Tr,Fr,kr){for(var Hr=function(Vi,Do){return Do?new it(E.line,re(Vi,1),"before"):new it(E.line,Vi,"after")};Tr>=0&&Tr<C.length;Tr+=Fr){var dn=C[Tr],fn=Fr>0==(dn.level!=1),Zn=fn?kr.begin:re(kr.end,-1);if(dn.from<=Zn&&Zn<dn.to||(Zn=fn?dn.from:re(dn.to,-1),kr.begin<=Zn&&Zn<kr.end))return Hr(Zn,fn)}},rr=$t(B+S,S,We);if(rr)return rr;var gr=S>0?We.end:re(We.begin,-1);return gr!=null&&!(S>0&&gr==m.text.length)&&(rr=$t(S>0?0:C.length-1,S,xe(gr)),rr)?rr:null}var _m={selectAll:nn,singleSelection:function(c){return c.setSelection(c.getCursor("anchor"),c.getCursor("head"),Jt)},killLine:function(c){return gl(c,function(m){if(m.empty()){var E=_t(c.doc,m.head.line).text.length;return m.head.ch==E&&m.head.line<c.lastLine()?{from:m.head,to:it(m.head.line+1,0)}:{from:m.head,to:it(m.head.line,E)}}else return{from:m.from(),to:m.to()}})},deleteLine:function(c){return gl(c,function(m){return{from:it(m.from().line,0),to:Nr(c.doc,it(m.to().line+1,0))}})},delLineLeft:function(c){return gl(c,function(m){return{from:it(m.from().line,0),to:m.from()}})},delWrappedLineLeft:function(c){return gl(c,function(m){var E=c.charCoords(m.head,"div").top+5,S=c.coordsChar({left:0,top:E},"div");return{from:S,to:m.from()}})},delWrappedLineRight:function(c){return gl(c,function(m){var E=c.charCoords(m.head,"div").top+5,S=c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:E},"div");return{from:m.from(),to:S}})},undo:function(c){return c.undo()},redo:function(c){return c.redo()},undoSelection:function(c){return c.undoSelection()},redoSelection:function(c){return c.redoSelection()},goDocStart:function(c){return c.extendSelection(it(c.firstLine(),0))},goDocEnd:function(c){return c.extendSelection(it(c.lastLine()))},goLineStart:function(c){return c.extendSelectionsBy(function(m){return If(c,m.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(c){return c.extendSelectionsBy(function(m){return _y(c,m.head)},{origin:"+move",bias:1})},goLineEnd:function(c){return c.extendSelectionsBy(function(m){return w0(c,m.head.line)},{origin:"+move",bias:-1})},goLineRight:function(c){return c.extendSelectionsBy(function(m){var E=c.cursorCoords(m.head,"div").top+5;return c.coordsChar({left:c.display.lineDiv.offsetWidth+100,top:E},"div")},Br)},goLineLeft:function(c){return c.extendSelectionsBy(function(m){var E=c.cursorCoords(m.head,"div").top+5;return c.coordsChar({left:0,top:E},"div")},Br)},goLineLeftSmart:function(c){return c.extendSelectionsBy(function(m){var E=c.cursorCoords(m.head,"div").top+5,S=c.coordsChar({left:0,top:E},"div");return S.ch<c.getLine(S.line).search(/\S/)?_y(c,m.head):S},Br)},goLineUp:function(c){return c.moveV(-1,"line")},goLineDown:function(c){return c.moveV(1,"line")},goPageUp:function(c){return c.moveV(-1,"page")},goPageDown:function(c){return c.moveV(1,"page")},goCharLeft:function(c){return c.moveH(-1,"char")},goCharRight:function(c){return c.moveH(1,"char")},goColumnLeft:function(c){return c.moveH(-1,"column")},goColumnRight:function(c){return c.moveH(1,"column")},goWordLeft:function(c){return c.moveH(-1,"word")},goGroupRight:function(c){return c.moveH(1,"group")},goGroupLeft:function(c){return c.moveH(-1,"group")},goWordRight:function(c){return c.moveH(1,"word")},delCharBefore:function(c){return c.deleteH(-1,"codepoint")},delCharAfter:function(c){return c.deleteH(1,"char")},delWordBefore:function(c){return c.deleteH(-1,"word")},delWordAfter:function(c){return c.deleteH(1,"word")},delGroupBefore:function(c){return c.deleteH(-1,"group")},delGroupAfter:function(c){return c.deleteH(1,"group")},indentAuto:function(c){return c.indentSelection("smart")},indentMore:function(c){return c.indentSelection("add")},indentLess:function(c){return c.indentSelection("subtract")},insertTab:function(c){return c.replaceSelection("	")},insertSoftTab:function(c){for(var m=[],E=c.listSelections(),S=c.options.tabSize,C=0;C<E.length;C++){var B=E[C].from(),Z=Ut(c.getLine(B.line),B.ch,S);m.push(Ge(S-Z%S))}c.replaceSelections(m)},defaultTab:function(c){c.somethingSelected()?c.indentSelection("add"):c.execCommand("insertTab")},transposeChars:function(c){return aa(c,function(){for(var m=c.listSelections(),E=[],S=0;S<m.length;S++)if(m[S].empty()){var C=m[S].head,B=_t(c.doc,C.line).text;if(B){if(C.ch==B.length&&(C=new it(C.line,C.ch-1)),C.ch>0)C=new it(C.line,C.ch+1),c.replaceRange(B.charAt(C.ch-1)+B.charAt(C.ch-2),it(C.line,C.ch-2),C,"+transpose");else if(C.line>c.doc.first){var Z=_t(c.doc,C.line-1).text;Z&&(C=new it(C.line,1),c.replaceRange(B.charAt(0)+c.doc.lineSeparator()+Z.charAt(Z.length-1),it(C.line-1,Z.length-1),C,"+transpose"))}}E.push(new mi(C,C))}c.setSelections(E)})},newlineAndIndent:function(c){return aa(c,function(){for(var m=c.listSelections(),E=m.length-1;E>=0;E--)c.replaceRange(c.doc.lineSeparator(),m[E].anchor,m[E].head,"+input");m=c.listSelections();for(var S=0;S<m.length;S++)c.indentLine(m[S].from().line,null,!0);nr(c)})},openLine:function(c){return c.replaceSelection(`
`,"start")},toggleOverwrite:function(c){return c.toggleOverwrite()}};function If(c,m){var E=_t(c.doc,m),S=ei(E);return S!=E&&(m=ce(S)),bm(!0,c,S,m,1)}function w0(c,m){var E=_t(c.doc,m),S=mu(E);return S!=E&&(m=ce(S)),bm(!0,c,E,m,-1)}function _y(c,m){var E=If(c,m.line),S=_t(c.doc,E.line),C=Ot(S,c.doc.direction);if(!C||C[0].level==0){var B=Math.max(E.ch,S.text.search(/\S/)),Z=m.line==E.line&&m.ch<=B&&m.ch;return it(E.line,Z?0:B,E.sticky)}return E}function vh(c,m,E){if(typeof m=="string"&&(m=_m[m],!m))return!1;c.display.input.ensurePolled();var S=c.display.shift,C=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),E&&(c.display.shift=!1),C=m(c)!=zr}finally{c.display.shift=S,c.state.suppressEdits=!1}return C}function q1(c,m,E){for(var S=0;S<c.state.keyMaps.length;S++){var C=iu(m,c.state.keyMaps[S],E,c);if(C)return C}return c.options.extraKeys&&iu(m,c.options.extraKeys,E,c)||iu(m,c.options.keyMap,E,c)}var mp=new Wt;function xm(c,m,E,S){var C=c.state.keySeq;if(C){if(dp(m))return"handled";if(/\'$/.test(m)?c.state.keySeq=null:mp.set(50,function(){c.state.keySeq==C&&(c.state.keySeq=null,c.display.input.reset())}),Bo(c,C+" "+m,E,S))return!0}return Bo(c,m,E,S)}function Bo(c,m,E,S){var C=q1(c,m,S);return C=="multi"&&(c.state.keySeq=m),C=="handled"&&zi(c,"keyHandled",c,m,E),(C=="handled"||C=="multi")&&(ze(E),Ql(c)),!!C}function gp(c,m){var E=ph(m,!0);return E?m.shiftKey&&!c.state.keySeq?xm(c,"Shift-"+E,m,function(S){return vh(c,S,!0)})||xm(c,E,m,function(S){if(typeof S=="string"?/^go[A-Z]/.test(S):S.motion)return vh(c,S)}):xm(c,E,m,function(S){return vh(c,S)}):!1}function S0(c,m,E){return xm(c,"'"+E+"'",m,function(S){return vh(c,S,!0)})}var hd=null;function vp(c){var m=this;if(!(c.target&&c.target!=m.display.input.getField())&&(m.curOp.focus=de(st(m)),!Rn(m,c))){s&&u<11&&c.keyCode==27&&(c.returnValue=!1);var E=c.keyCode;m.display.shift=E==16||c.shiftKey;var S=gp(m,c);I&&(hd=S?E:null,!S&&E==88&&!ha&&(V?c.metaKey:c.ctrlKey)&&m.replaceSelection("",null,"cut")),r&&!V&&!S&&E==46&&c.shiftKey&&!c.ctrlKey&&document.execCommand&&document.execCommand("cut"),E==18&&!/\bCodeMirror-crosshair\b/.test(m.display.lineDiv.className)&&Cs(m)}}function Cs(c){var m=c.display.lineDiv;we(m,"CodeMirror-crosshair");function E(S){(S.keyCode==18||!S.altKey)&&(me(m,"CodeMirror-crosshair"),pn(document,"keyup",E),pn(document,"mouseover",E))}tr(document,"keyup",E),tr(document,"mouseover",E)}function Du(c){c.keyCode==16&&(this.doc.sel.shift=!1),Rn(this,c)}function xy(c){var m=this;if(!(c.target&&c.target!=m.display.input.getField())&&!(Zl(m.display,c)||Rn(m,c)||c.ctrlKey&&!c.altKey||V&&c.metaKey)){var E=c.keyCode,S=c.charCode;if(I&&E==hd){hd=null,ze(c);return}if(!(I&&(!c.which||c.which<10)&&gp(m,c))){var C=String.fromCharCode(S??E);C!="\b"&&(S0(m,c,C)||m.display.input.onKeyPress(c))}}}var wm=400,yh=function(c,m,E){this.time=c,this.pos=m,this.button=E};yh.prototype.compare=function(c,m,E){return this.time+wm>c&&Qt(m,this.pos)==0&&E==this.button};var Ou,yp;function bp(c,m){var E=+new Date;return yp&&yp.compare(E,c,m)?(Ou=yp=null,"triple"):Ou&&Ou.compare(E,c,m)?(yp=new yh(E,c,m),Ou=null,"double"):(Ou=new yh(E,c,m),yp=null,"single")}function E0(c){var m=this,E=m.display;if(!(Rn(m,c)||E.activeTouch&&E.input.supportsTouch())){if(E.input.ensurePolled(),E.shift=c.shiftKey,Zl(E,c)){h||(E.scroller.draggable=!1,setTimeout(function(){return E.scroller.draggable=!0},100));return}if(!xp(m,c)){var S=li(m,c),C=an(c),B=S?bp(S,C):"single";lt(m).focus(),C==1&&m.state.selectingText&&m.state.selectingText(c),!(S&&Rg(m,C,S,B,c))&&(C==1?S?dd(m,S,B,c):yr(c)==E.scroller&&ze(c):C==2?(S&&Yt(m.doc,S),setTimeout(function(){return E.input.focus()},20)):C==3&&(ee?m.display.input.onContextMenu(c):po(m)))}}}function Rg(c,m,E,S,C){var B="Click";return S=="double"?B="Double"+B:S=="triple"&&(B="Triple"+B),B=(m==1?"Left":m==2?"Middle":"Right")+B,xm(c,by(B,C),C,function(Z){if(typeof Z=="string"&&(Z=_m[Z]),!Z)return!1;var re=!1;try{c.isReadOnly()&&(c.state.suppressEdits=!0),re=Z(c,E)!=zr}finally{c.state.suppressEdits=!1}return re})}function _p(c,m,E){var S=c.getOption("configureMouse"),C=S?S(c,m,E):{};if(C.unit==null){var B=p?E.shiftKey&&E.metaKey:E.altKey;C.unit=B?"rectangle":m=="single"?"char":m=="double"?"word":"line"}return(C.extend==null||c.doc.extend)&&(C.extend=c.doc.extend||E.shiftKey),C.addNew==null&&(C.addNew=V?E.metaKey:E.ctrlKey),C.moveOnDrag==null&&(C.moveOnDrag=!(V?E.altKey:E.ctrlKey)),C}function dd(c,m,E,S){s?setTimeout(kt(Ss,c),0):c.curOp.focus=de(st(c));var C=_p(c,E,S),B=c.doc.sel,Z;c.options.dragDrop&&Or&&!c.isReadOnly()&&E=="single"&&(Z=B.contains(m))>-1&&(Qt((Z=B.ranges[Z]).from(),m)<0||m.xRel>0)&&(Qt(Z.to(),m)>0||m.xRel<0)?wy(c,S,m,C):T0(c,S,m,C)}function wy(c,m,E,S){var C=c.display,B=!1,Z=mr(c,function(xe){h&&(C.scroller.draggable=!1),c.state.draggingText=!1,c.state.delayingBlurEvent&&(c.hasFocus()?c.state.delayingBlurEvent=!1:po(c)),pn(C.wrapper.ownerDocument,"mouseup",Z),pn(C.wrapper.ownerDocument,"mousemove",re),pn(C.scroller,"dragstart",le),pn(C.scroller,"drop",Z),B||(ze(xe),S.addNew||Yt(c.doc,E,null,null,S.extend),h&&!P||s&&u==9?setTimeout(function(){C.wrapper.ownerDocument.body.focus({preventScroll:!0}),C.input.focus()},20):C.input.focus())}),re=function(xe){B=B||Math.abs(m.clientX-xe.clientX)+Math.abs(m.clientY-xe.clientY)>=10},le=function(){return B=!0};h&&(C.scroller.draggable=!0),c.state.draggingText=Z,Z.copy=!S.moveOnDrag,tr(C.wrapper.ownerDocument,"mouseup",Z),tr(C.wrapper.ownerDocument,"mousemove",re),tr(C.scroller,"dragstart",le),tr(C.scroller,"drop",Z),c.state.delayingBlurEvent=!0,setTimeout(function(){return C.input.focus()},20),C.scroller.dragDrop&&C.scroller.dragDrop()}function ou(c,m,E){if(E=="char")return new mi(m,m);if(E=="word")return c.findWordAt(m);if(E=="line")return new mi(it(m.line,0),Nr(c.doc,it(m.line+1,0)));var S=E(c,m);return new mi(S.from,S.to)}function T0(c,m,E,S){s&&po(c);var C=c.display,B=c.doc;ze(m);var Z,re,le=B.sel,xe=le.ranges;if(S.addNew&&!S.extend?(re=B.sel.contains(E),re>-1?Z=xe[re]:Z=new mi(E,E)):(Z=B.sel.primary(),re=B.sel.primIndex),S.unit=="rectangle")S.addNew||(Z=new mi(E,E)),E=li(c,m,!0,!0),re=-1;else{var We=ou(c,E,S.unit);S.extend?Z=Dt(Z,We.anchor,We.head,S.extend):Z=We}S.addNew?re==-1?(re=xe.length,Mr(B,Ka(c,xe.concat([Z]),re),{scroll:!1,origin:"*mouse"})):xe.length>1&&xe[re].empty()&&S.unit=="char"&&!S.extend?(Mr(B,Ka(c,xe.slice(0,re).concat(xe.slice(re+1)),0),{scroll:!1,origin:"*mouse"}),le=B.sel):or(B,re,Z,Qr):(re=0,Mr(B,new ji([Z],0),Qr),le=B.sel);var Je=E;function Et(kr){if(Qt(Je,kr)!=0)if(Je=kr,S.unit=="rectangle"){for(var Hr=[],dn=c.options.tabSize,fn=Ut(_t(B,E.line).text,E.ch,dn),Zn=Ut(_t(B,kr.line).text,kr.ch,dn),Vi=Math.min(fn,Zn),Do=Math.max(fn,Zn),so=Math.min(E.line,kr.line),_i=Math.min(c.lastLine(),Math.max(E.line,kr.line));so<=_i;so++){var Oo=_t(B,so).text,ci=Rr(Oo,Vi,dn);Vi==Do?Hr.push(new mi(it(so,ci),it(so,ci))):Oo.length>ci&&Hr.push(new mi(it(so,ci),it(so,Rr(Oo,Do,dn))))}Hr.length||Hr.push(new mi(E,E)),Mr(B,Ka(c,le.ranges.slice(0,re).concat(Hr),re),{origin:"*mouse",scroll:!1}),c.scrollIntoView(kr)}else{var ss=Z,Fa=ou(c,kr,S.unit),Ti=ss.anchor,Ea;Qt(Fa.anchor,Ti)>0?(Ea=Fa.head,Ti=Mn(ss.from(),Fa.anchor)):(Ea=Fa.anchor,Ti=En(ss.to(),Fa.head));var Yo=le.ranges.slice(0);Yo[re]=Fg(c,new mi(Nr(B,Ti),Ea)),Mr(B,Ka(c,Yo,re),Qr)}}var bt=C.wrapper.getBoundingClientRect(),$t=0;function rr(kr){var Hr=++$t,dn=li(c,kr,!0,S.unit=="rectangle");if(dn)if(Qt(dn,Je)!=0){c.curOp.focus=de(st(c)),Et(dn);var fn=pa(C,B);(dn.line>=fn.to||dn.line<fn.from)&&setTimeout(mr(c,function(){$t==Hr&&rr(kr)}),150)}else{var Zn=kr.clientY<bt.top?-20:kr.clientY>bt.bottom?20:0;Zn&&setTimeout(mr(c,function(){$t==Hr&&(C.scroller.scrollTop+=Zn,rr(kr))}),50)}}function gr(kr){c.state.selectingText=!1,$t=1/0,kr&&(ze(kr),C.input.focus()),pn(C.wrapper.ownerDocument,"mousemove",Tr),pn(C.wrapper.ownerDocument,"mouseup",Fr),B.history.lastSelOrigin=null}var Tr=mr(c,function(kr){kr.buttons===0||!an(kr)?gr(kr):rr(kr)}),Fr=mr(c,gr);c.state.selectingText=Fr,tr(C.wrapper.ownerDocument,"mousemove",Tr),tr(C.wrapper.ownerDocument,"mouseup",Fr)}function Fg(c,m){var E=m.anchor,S=m.head,C=_t(c.doc,E.line);if(Qt(E,S)==0&&E.sticky==S.sticky)return m;var B=Ot(C);if(!B)return m;var Z=Cn(B,E.ch,E.sticky),re=B[Z];if(re.from!=E.ch&&re.to!=E.ch)return m;var le=Z+(re.from==E.ch==(re.level!=1)?0:1);if(le==0||le==B.length)return m;var xe;if(S.line!=E.line)xe=(S.line-E.line)*(c.doc.direction=="ltr"?1:-1)>0;else{var We=Cn(B,S.ch,S.sticky),Je=We-Z||(S.ch-E.ch)*(re.level==1?-1:1);We==le-1||We==le?xe=Je<0:xe=Je>0}var Et=B[le+(xe?-1:0)],bt=xe==(Et.level==1),$t=bt?Et.from:Et.to,rr=bt?"after":"before";return E.ch==$t&&E.sticky==rr?m:new mi(new it(E.line,$t,rr),S)}function Sy(c,m,E,S){var C,B;if(m.touches)C=m.touches[0].clientX,B=m.touches[0].clientY;else try{C=m.clientX,B=m.clientY}catch{return!1}if(C>=Math.floor(c.display.gutters.getBoundingClientRect().right))return!1;S&&ze(m);var Z=c.display,re=Z.lineDiv.getBoundingClientRect();if(B>re.bottom||!Ei(c,E))return Ft(m);B-=re.top-Z.viewOffset;for(var le=0;le<c.display.gutterSpecs.length;++le){var xe=Z.gutters.childNodes[le];if(xe&&xe.getBoundingClientRect().right>=C){var We=Re(c.doc,B),Je=c.display.gutterSpecs[le];return tn(c,E,c,We,Je.className,m),Ft(m)}}}function xp(c,m){return Sy(c,m,"gutterClick",!0)}function Sm(c,m){Zl(c.display,m)||Df(c,m)||Rn(c,m,"contextmenu")||ee||c.display.input.onContextMenu(m)}function Df(c,m){return Ei(c,"gutterContextMenu")?Sy(c,m,"gutterContextMenu",!1):!1}function A0(c){c.display.wrapper.className=c.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+c.options.theme.replace(/(^|\s)\s*/g," cm-s-"),bu(c)}var pd={toString:function(){return"CodeMirror.Init"}},wp={},Sp={};function Ey(c){var m=c.optionHandlers;function E(S,C,B,Z){c.defaults[S]=C,B&&(m[S]=Z?function(re,le,xe){xe!=pd&&B(re,le,xe)}:B)}c.defineOption=E,c.Init=pd,E("value","",function(S,C){return S.setValue(C)},!0),E("mode",null,function(S,C){S.doc.modeOption=C,v(S)},!0),E("indentUnit",2,v,!0),E("indentWithTabs",!1),E("smartIndent",!0),E("tabSize",4,function(S){g(S),bu(S),na(S)},!0),E("lineSeparator",null,function(S,C){if(S.doc.lineSep=C,!!C){var B=[],Z=S.doc.first;S.doc.iter(function(le){for(var xe=0;;){var We=le.text.indexOf(C,xe);if(We==-1)break;xe=We+C.length,B.push(it(Z,We))}Z++});for(var re=B.length-1;re>=0;re--)xa(S.doc,C,B[re],it(B[re].line,B[re].ch+C.length))}}),E("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(S,C,B){S.state.specialChars=new RegExp(C.source+(C.test("	")?"":"|	"),"g"),B!=pd&&S.refresh()}),E("specialCharPlaceholder",Hu,function(S){return S.refresh()},!0),E("electricChars",!0),E("inputStyle",q?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),E("spellcheck",!1,function(S,C){return S.getInputField().spellcheck=C},!0),E("autocorrect",!1,function(S,C){return S.getInputField().autocorrect=C},!0),E("autocapitalize",!1,function(S,C){return S.getInputField().autocapitalize=C},!0),E("rtlMoveVisually",!K),E("wholeLineUpdateBefore",!0),E("theme","default",function(S){A0(S),Tu(S)},!0),E("keyMap","default",function(S,C,B){var Z=pp(C),re=B!=pd&&pp(B);re&&re.detach&&re.detach(S,Z),Z.attach&&Z.attach(S,re||null)}),E("extraKeys",null),E("configureMouse",null),E("lineWrapping",!1,md,!0),E("gutters",[],function(S,C){S.display.gutterSpecs=ba(C,S.options.lineNumbers),Tu(S)},!0),E("fixedGutter",!0,function(S,C){S.display.gutters.style.left=C?pi(S.display)+"px":"0",S.refresh()},!0),E("coverGutterNextToScrollbar",!1,function(S){return Ys(S)},!0),E("scrollbarStyle","native",function(S){Ll(S),Ys(S),S.display.scrollbars.setScrollTop(S.doc.scrollTop),S.display.scrollbars.setScrollLeft(S.doc.scrollLeft)},!0),E("lineNumbers",!1,function(S,C){S.display.gutterSpecs=ba(S.options.gutters,C),Tu(S)},!0),E("firstLineNumber",1,Tu,!0),E("lineNumberFormatter",function(S){return S},Tu,!0),E("showCursorWhenSelecting",!1,pl,!0),E("resetSelectionOnContextMenu",!0),E("lineWiseCopyCut",!0),E("pasteLinesPerSelection",!0),E("selectionsMayTouch",!1),E("readOnly",!1,function(S,C){C=="nocursor"&&(yf(S),S.display.input.blur()),S.display.input.readOnlyChanged(C)}),E("screenReaderLabel",null,function(S,C){C=C===""?null:C,S.display.input.screenReaderLabelChanged(C)}),E("disableInput",!1,function(S,C){C||S.display.input.reset()},!0),E("dragDrop",!0,N1),E("allowDropFileTypes",null),E("cursorBlinkRate",530),E("cursorScrollMargin",0),E("cursorHeight",1,pl,!0),E("singleCursorHeightPerLine",!0,pl,!0),E("workTime",100),E("workDelay",100),E("flattenSpans",!0,g,!0),E("addModeClass",!1,g,!0),E("pollInterval",100),E("undoDepth",200,function(S,C){return S.doc.history.undoDepth=C}),E("historyEventDelay",1250),E("viewportMargin",10,function(S){return S.refresh()},!0),E("maxHighlightLength",1e4,g,!0),E("moveInputWithCursor",!0,function(S,C){C||S.display.input.resetPosition()}),E("tabindex",null,function(S,C){return S.display.input.getField().tabIndex=C||""}),E("autofocus",null),E("direction","ltr",function(S,C){return S.doc.setDirection(C)},!0),E("phrases",null)}function N1(c,m,E){var S=E&&E!=pd;if(!m!=!S){var C=c.display.dragFunctions,B=m?tr:pn;B(c.display.scroller,"dragstart",C.start),B(c.display.scroller,"dragenter",C.enter),B(c.display.scroller,"dragover",C.over),B(c.display.scroller,"dragleave",C.leave),B(c.display.scroller,"drop",C.drop)}}function md(c){c.options.lineWrapping?(we(c.display.wrapper,"CodeMirror-wrap"),c.display.sizer.style.minWidth="",c.display.sizerWidth=null):(me(c.display.wrapper,"CodeMirror-wrap"),Vu(c)),xu(c),na(c),bu(c),setTimeout(function(){return Ys(c)},100)}function Pi(c,m){var E=this;if(!(this instanceof Pi))return new Pi(c,m);this.options=m=m?ut(m):{},ut(wp,m,!1);var S=m.value;typeof S=="string"?S=new to(S,m.mode,null,m.lineSeparator,m.direction):m.mode&&(S.modeOption=m.mode),this.doc=S;var C=new Pi.inputStyles[m.inputStyle](this),B=this.display=new cd(c,S,C,m);B.wrapper.CodeMirror=this,A0(this),m.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Ll(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Wt,keySeq:null,specialChars:null},m.autofocus&&!q&&B.input.focus(),s&&u<11&&setTimeout(function(){return E.display.input.reset(!0)},20),qg(this),Cf(),In(this),this.curOp.forceUpdate=!0,z(this,S),m.autofocus&&!q||this.hasFocus()?setTimeout(function(){E.hasFocus()&&!E.state.focused&&vf(E)},20):yf(this);for(var Z in Sp)Sp.hasOwnProperty(Z)&&Sp[Z](this,m[Z],pd);wf(this),m.finishInit&&m.finishInit(this);for(var re=0;re<bh.length;++re)bh[re](this);Ts(this),h&&m.lineWrapping&&getComputedStyle(B.lineDiv).textRendering=="optimizelegibility"&&(B.lineDiv.style.textRendering="auto")}Pi.defaults=wp,Pi.optionHandlers=Sp;function qg(c){var m=c.display;tr(m.scroller,"mousedown",mr(c,E0)),s&&u<11?tr(m.scroller,"dblclick",mr(c,function(le){if(!Rn(c,le)){var xe=li(c,le);if(!(!xe||xp(c,le)||Zl(c.display,le))){ze(le);var We=c.findWordAt(xe);Yt(c.doc,We.anchor,We.head)}}})):tr(m.scroller,"dblclick",function(le){return Rn(c,le)||ze(le)}),tr(m.scroller,"contextmenu",function(le){return Sm(c,le)}),tr(m.input.getField(),"contextmenu",function(le){m.scroller.contains(le.target)||Sm(c,le)});var E,S={end:0};function C(){m.activeTouch&&(E=setTimeout(function(){return m.activeTouch=null},1e3),S=m.activeTouch,S.end=+new Date)}function B(le){if(le.touches.length!=1)return!1;var xe=le.touches[0];return xe.radiusX<=1&&xe.radiusY<=1}function Z(le,xe){if(xe.left==null)return!0;var We=xe.left-le.left,Je=xe.top-le.top;return We*We+Je*Je>20*20}tr(m.scroller,"touchstart",function(le){if(!Rn(c,le)&&!B(le)&&!xp(c,le)){m.input.ensurePolled(),clearTimeout(E);var xe=+new Date;m.activeTouch={start:xe,moved:!1,prev:xe-S.end<=300?S:null},le.touches.length==1&&(m.activeTouch.left=le.touches[0].pageX,m.activeTouch.top=le.touches[0].pageY)}}),tr(m.scroller,"touchmove",function(){m.activeTouch&&(m.activeTouch.moved=!0)}),tr(m.scroller,"touchend",function(le){var xe=m.activeTouch;if(xe&&!Zl(m,le)&&xe.left!=null&&!xe.moved&&new Date-xe.start<300){var We=c.coordsChar(m.activeTouch,"page"),Je;!xe.prev||Z(xe,xe.prev)?Je=new mi(We,We):!xe.prev.prev||Z(xe,xe.prev.prev)?Je=c.findWordAt(We):Je=new mi(it(We.line,0),Nr(c.doc,it(We.line+1,0))),c.setSelection(Je.anchor,Je.head),c.focus(),ze(le)}C()}),tr(m.scroller,"touchcancel",C),tr(m.scroller,"scroll",function(){m.scroller.clientHeight&&(Ga(c,m.scroller.scrollTop),Zs(c,m.scroller.scrollLeft,!0),tn(c,"scroll",c))}),tr(m.scroller,"mousewheel",function(le){return Ku(c,le)}),tr(m.scroller,"DOMMouseScroll",function(le){return Ku(c,le)}),tr(m.wrapper,"scroll",function(){return m.wrapper.scrollTop=m.wrapper.scrollLeft=0}),m.dragFunctions={enter:function(le){Rn(c,le)||fr(le)},over:function(le){Rn(c,le)||(Kn(c,le),fr(le))},start:function(le){return vm(c,le)},drop:mr(c,Af),leave:function(le){Rn(c,le)||Lg(c)}};var re=m.input.getField();tr(re,"keyup",function(le){return Du.call(c,le)}),tr(re,"keydown",mr(c,vp)),tr(re,"keypress",mr(c,xy)),tr(re,"focus",function(le){return vf(c,le)}),tr(re,"blur",function(le){return yf(c,le)})}var bh=[];Pi.defineInitHook=function(c){return bh.push(c)};function vl(c,m,E,S){var C=c.doc,B;E==null&&(E="add"),E=="smart"&&(C.mode.indent?B=bo(c,m).state:E="prev");var Z=c.options.tabSize,re=_t(C,m),le=Ut(re.text,null,Z);re.stateAfter&&(re.stateAfter=null);var xe=re.text.match(/^\s*/)[0],We;if(!S&&!/\S/.test(re.text))We=0,E="not";else if(E=="smart"&&(We=C.mode.indent(B,re.text.slice(xe.length),re.text),We==zr||We>150)){if(!S)return;E="prev"}E=="prev"?m>C.first?We=Ut(_t(C,m-1).text,null,Z):We=0:E=="add"?We=le+c.options.indentUnit:E=="subtract"?We=le-c.options.indentUnit:typeof E=="number"&&(We=le+E),We=Math.max(0,We);var Je="",Et=0;if(c.options.indentWithTabs)for(var bt=Math.floor(We/Z);bt;--bt)Et+=Z,Je+="	";if(Et<We&&(Je+=Ge(We-Et)),Je!=xe)return xa(C,Je,it(m,0),it(m,xe.length),"+input"),re.stateAfter=null,!0;for(var $t=0;$t<C.sel.ranges.length;$t++){var rr=C.sel.ranges[$t];if(rr.head.line==m&&rr.head.ch<xe.length){var gr=it(m,xe.length);or(C,$t,new mi(gr,gr));break}}}var Pu=null;function Ng(c){Pu=c}function Ty(c,m,E,S,C){var B=c.doc;c.display.shift=!1,S||(S=B.sel);var Z=+new Date-200,re=C=="paste"||c.state.pasteIncoming>Z,le=ii(m),xe=null;if(re&&S.ranges.length>1)if(Pu&&Pu.text.join(`
`)==m){if(S.ranges.length%Pu.text.length==0){xe=[];for(var We=0;We<Pu.text.length;We++)xe.push(B.splitLines(Pu.text[We]))}}else le.length==S.ranges.length&&c.options.pasteLinesPerSelection&&(xe=Kt(le,function(Tr){return[Tr]}));for(var Je=c.curOp.updateInput,Et=S.ranges.length-1;Et>=0;Et--){var bt=S.ranges[Et],$t=bt.from(),rr=bt.to();bt.empty()&&(E&&E>0?$t=it($t.line,$t.ch-E):c.state.overwrite&&!re?rr=it(rr.line,Math.min(_t(B,rr.line).text.length,rr.ch+vt(le).length)):re&&Pu&&Pu.lineWise&&Pu.text.join(`
`)==le.join(`
`)&&($t=rr=it($t.line,0)));var gr={from:$t,to:rr,text:xe?xe[Et%xe.length]:le,origin:C||(re?"paste":c.state.cutIncoming>Z?"cut":"+input")};xo(c.doc,gr),zi(c,"inputRead",c,gr)}m&&!re&&Em(c,m),nr(c),c.curOp.updateInput<2&&(c.curOp.updateInput=Je),c.curOp.typing=!0,c.state.pasteIncoming=c.state.cutIncoming=-1}function Nl(c,m){var E=c.clipboardData&&c.clipboardData.getData("Text");if(E)return c.preventDefault(),!m.isReadOnly()&&!m.options.disableInput&&m.hasFocus()&&aa(m,function(){return Ty(m,E,0,null,"paste")}),!0}function Em(c,m){if(!(!c.options.electricChars||!c.options.smartIndent))for(var E=c.doc.sel,S=E.ranges.length-1;S>=0;S--){var C=E.ranges[S];if(!(C.head.ch>100||S&&E.ranges[S-1].head.line==C.head.line)){var B=c.getModeAt(C.head),Z=!1;if(B.electricChars){for(var re=0;re<B.electricChars.length;re++)if(m.indexOf(B.electricChars.charAt(re))>-1){Z=vl(c,C.head.line,"smart");break}}else B.electricInput&&B.electricInput.test(_t(c.doc,C.head.line).text.slice(0,C.head.ch))&&(Z=vl(c,C.head.line,"smart"));Z&&zi(c,"electricInput",c,C.head.line)}}}function Bg(c){for(var m=[],E=[],S=0;S<c.doc.sel.ranges.length;S++){var C=c.doc.sel.ranges[S].head.line,B={anchor:it(C,0),head:it(C+1,0)};E.push(B),m.push(c.getRange(B.anchor,B.head))}return{text:m,ranges:E}}function Tm(c,m,E,S){c.setAttribute("autocorrect",E?"on":"off"),c.setAttribute("autocapitalize",S?"on":"off"),c.setAttribute("spellcheck",!!m)}function Am(){var c=$("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),m=$("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return h?c.style.width="1000px":c.setAttribute("wrap","off"),W&&(c.style.border="1px solid black"),m}function Ep(c){var m=c.optionHandlers,E=c.helpers={};c.prototype={constructor:c,focus:function(){lt(this).focus(),this.display.input.focus()},setOption:function(S,C){var B=this.options,Z=B[S];B[S]==C&&S!="mode"||(B[S]=C,m.hasOwnProperty(S)&&mr(this,m[S])(this,C,Z),tn(this,"optionChange",this,S))},getOption:function(S){return this.options[S]},getDoc:function(){return this.doc},addKeyMap:function(S,C){this.state.keyMaps[C?"push":"unshift"](pp(S))},removeKeyMap:function(S){for(var C=this.state.keyMaps,B=0;B<C.length;++B)if(C[B]==S||C[B].name==S)return C.splice(B,1),!0},addOverlay:Xt(function(S,C){var B=S.token?S:c.getMode(this.options,S);if(B.startState)throw new Error("Overlays may not be stateful.");rt(this.state.overlays,{mode:B,modeSpec:S,opaque:C&&C.opaque,priority:C&&C.priority||0},function(Z){return Z.priority}),this.state.modeGen++,na(this)}),removeOverlay:Xt(function(S){for(var C=this.state.overlays,B=0;B<C.length;++B){var Z=C[B].modeSpec;if(Z==S||typeof S=="string"&&Z.name==S){C.splice(B,1),this.state.modeGen++,na(this);return}}}),indentLine:Xt(function(S,C,B){typeof C!="string"&&typeof C!="number"&&(C==null?C=this.options.smartIndent?"smart":"prev":C=C?"add":"subtract"),ct(this.doc,S)&&vl(this,S,C,B)}),indentSelection:Xt(function(S){for(var C=this.doc.sel.ranges,B=-1,Z=0;Z<C.length;Z++){var re=C[Z];if(re.empty())re.head.line>B&&(vl(this,re.head.line,S,!0),B=re.head.line,Z==this.doc.sel.primIndex&&nr(this));else{var le=re.from(),xe=re.to(),We=Math.max(B,le.line);B=Math.min(this.lastLine(),xe.line-(xe.ch?0:1))+1;for(var Je=We;Je<B;++Je)vl(this,Je,S);var Et=this.doc.sel.ranges;le.ch==0&&C.length==Et.length&&Et[Z].from().ch>0&&or(this.doc,Z,new mi(le,Et[Z].to()),Jt)}}}),getTokenAt:function(S,C){return nf(this,S,C)},getLineTokens:function(S,C){return nf(this,it(S),C,!0)},getTokenTypeAt:function(S){S=Nr(this.doc,S);var C=xc(this,_t(this.doc,S.line)),B=0,Z=(C.length-1)/2,re=S.ch,le;if(re==0)le=C[2];else for(;;){var xe=B+Z>>1;if((xe?C[xe*2-1]:0)>=re)Z=xe;else if(C[xe*2+1]<re)B=xe+1;else{le=C[xe*2+2];break}}var We=le?le.indexOf("overlay "):-1;return We<0?le:We==0?null:le.slice(0,We-1)},getModeAt:function(S){var C=this.doc.mode;return C.innerMode?c.innerMode(C,this.getTokenAt(S).state).mode:C},getHelper:function(S,C){return this.getHelpers(S,C)[0]},getHelpers:function(S,C){var B=[];if(!E.hasOwnProperty(C))return B;var Z=E[C],re=this.getModeAt(S);if(typeof re[C]=="string")Z[re[C]]&&B.push(Z[re[C]]);else if(re[C])for(var le=0;le<re[C].length;le++){var xe=Z[re[C][le]];xe&&B.push(xe)}else re.helperType&&Z[re.helperType]?B.push(Z[re.helperType]):Z[re.name]&&B.push(Z[re.name]);for(var We=0;We<Z._global.length;We++){var Je=Z._global[We];Je.pred(re,this)&&Ht(B,Je.val)==-1&&B.push(Je.val)}return B},getStateAfter:function(S,C){var B=this.doc;return S=Va(B,S??B.first+B.size-1),bo(this,S+1,C).state},cursorCoords:function(S,C){var B,Z=this.doc.sel.primary();return S==null?B=Z.head:typeof S=="object"?B=Nr(this.doc,S):B=S?Z.from():Z.to(),qt(this,B,C||"page")},charCoords:function(S,C){return Zt(this,Nr(this.doc,S),C||"page")},coordsChar:function(S,C){return S=St(this,S,C||"page"),di(this,S.left,S.top)},lineAtHeight:function(S,C){return S=St(this,{top:S,left:0},C||"page").top,Re(this.doc,S+this.display.viewOffset)},heightAtLine:function(S,C,B){var Z=!1,re;if(typeof S=="number"){var le=this.doc.first+this.doc.size-1;S<this.doc.first?S=this.doc.first:S>le&&(S=le,Z=!0),re=_t(this.doc,S)}else re=S;return Pl(this,re,{top:0,left:0},C||"page",B||Z).top+(Z?this.doc.height-Fo(re):0)},defaultTextHeight:function(){return dl(this.display)},defaultCharWidth:function(){return Jl(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(S,C,B,Z,re){var le=this.display;S=qt(this,Nr(this.doc,S));var xe=S.bottom,We=S.left;if(C.style.position="absolute",C.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(C),le.sizer.appendChild(C),Z=="over")xe=S.top;else if(Z=="above"||Z=="near"){var Je=Math.max(le.wrapper.clientHeight,this.doc.height),Et=Math.max(le.sizer.clientWidth,le.lineSpace.clientWidth);(Z=="above"||S.bottom+C.offsetHeight>Je)&&S.top>C.offsetHeight?xe=S.top-C.offsetHeight:S.bottom+C.offsetHeight<=Je&&(xe=S.bottom),We+C.offsetWidth>Et&&(We=Et-C.offsetWidth)}C.style.top=xe+"px",C.style.left=C.style.right="",re=="right"?(We=le.sizer.clientWidth-C.offsetWidth,C.style.right="0px"):(re=="left"?We=0:re=="middle"&&(We=(le.sizer.clientWidth-C.offsetWidth)/2),C.style.left=We+"px"),B&&Ml(this,{left:We,top:xe,right:We+C.offsetWidth,bottom:xe+C.offsetHeight})},triggerOnKeyDown:Xt(vp),triggerOnKeyPress:Xt(xy),triggerOnKeyUp:Du,triggerOnMouseDown:Xt(E0),execCommand:function(S){if(_m.hasOwnProperty(S))return _m[S].call(null,this)},triggerElectric:Xt(function(S){Em(this,S)}),findPosH:function(S,C,B,Z){var re=1;C<0&&(re=-1,C=-C);for(var le=Nr(this.doc,S),xe=0;xe<C&&(le=wn(this.doc,le,re,B,Z),!le.hitSide);++xe);return le},moveH:Xt(function(S,C){var B=this;this.extendSelectionsBy(function(Z){return B.display.shift||B.doc.extend||Z.empty()?wn(B.doc,Z.head,S,C,B.options.rtlMoveVisually):S<0?Z.from():Z.to()},Br)}),deleteH:Xt(function(S,C){var B=this.doc.sel,Z=this.doc;B.somethingSelected()?Z.replaceSelection("",null,"+delete"):gl(this,function(re){var le=wn(Z,re.head,S,C,!1);return S<0?{from:le,to:re.head}:{from:re.head,to:le}})}),findPosV:function(S,C,B,Z){var re=1,le=Z;C<0&&(re=-1,C=-C);for(var xe=Nr(this.doc,S),We=0;We<C;++We){var Je=qt(this,xe,"div");if(le==null?le=Je.left:Je.left=le,xe=Ra(this,Je,re,B),xe.hitSide)break}return xe},moveV:Xt(function(S,C){var B=this,Z=this.doc,re=[],le=!this.display.shift&&!Z.extend&&Z.sel.somethingSelected();if(Z.extendSelectionsBy(function(We){if(le)return S<0?We.from():We.to();var Je=qt(B,We.head,"div");We.goalColumn!=null&&(Je.left=We.goalColumn),re.push(Je.left);var Et=Ra(B,Je,S,C);return C=="page"&&We==Z.sel.primary()&&sd(B,Zt(B,Et,"div").top-Je.top),Et},Br),re.length)for(var xe=0;xe<Z.sel.ranges.length;xe++)Z.sel.ranges[xe].goalColumn=re[xe]}),findWordAt:function(S){var C=this.doc,B=_t(C,S.line).text,Z=S.ch,re=S.ch;if(B){var le=this.getHelper(S,"wordChars");(S.sticky=="before"||re==B.length)&&Z?--Z:++re;for(var xe=B.charAt(Z),We=ir(xe,le)?function(Je){return ir(Je,le)}:/\s/.test(xe)?function(Je){return/\s/.test(Je)}:function(Je){return!/\s/.test(Je)&&!ir(Je)};Z>0&&We(B.charAt(Z-1));)--Z;for(;re<B.length&&We(B.charAt(re));)++re}return new mi(it(S.line,Z),it(S.line,re))},toggleOverwrite:function(S){S!=null&&S==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?we(this.display.cursorDiv,"CodeMirror-overwrite"):me(this.display.cursorDiv,"CodeMirror-overwrite"),tn(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==de(st(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Xt(function(S,C){Ko(this,S,C)}),getScrollInfo:function(){var S=this.display.scroller;return{left:S.scrollLeft,top:S.scrollTop,height:S.scrollHeight-Yl(this)-this.display.barHeight,width:S.scrollWidth-Yl(this)-this.display.barWidth,clientHeight:Wu(this),clientWidth:cl(this)}},scrollIntoView:Xt(function(S,C){S==null?(S={from:this.doc.sel.primary().head,to:null},C==null&&(C=this.options.cursorScrollMargin)):typeof S=="number"?S={from:it(S,0),to:null}:S.from==null&&(S={from:S,to:null}),S.to||(S.to=S.from),S.margin=C||0,S.from.line!=null?cp(this,S):Ks(this,S.from,S.to,S.margin)}),setSize:Xt(function(S,C){var B=this,Z=function(le){return typeof le=="number"||/^\d+$/.test(String(le))?le+"px":le};S!=null&&(this.display.wrapper.style.width=Z(S)),C!=null&&(this.display.wrapper.style.height=Z(C)),this.options.lineWrapping&&nh(this);var re=this.display.viewFrom;this.doc.iter(re,this.display.viewTo,function(le){if(le.widgets){for(var xe=0;xe<le.widgets.length;xe++)if(le.widgets[xe].noHScroll){qs(B,re,"widget");break}}++re}),this.curOp.forceUpdate=!0,tn(this,"refresh",this)}),operation:function(S){return aa(this,S)},startOperation:function(){return In(this)},endOperation:function(){return Ts(this)},refresh:Xt(function(){var S=this.display.cachedTextHeight;na(this),this.curOp.forceUpdate=!0,bu(this),Ko(this,this.doc.scrollLeft,this.doc.scrollTop),ld(this.display),(S==null||Math.abs(S-dl(this.display))>.5||this.options.lineWrapping)&&xu(this),tn(this,"refresh",this)}),swapDoc:Xt(function(S){var C=this.doc;return C.cm=null,this.state.selectingText&&this.state.selectingText(),z(this,S),bu(this),this.display.input.reset(),Ko(this,S.scrollLeft,S.scrollTop),this.curOp.forceScroll=!0,zi(this,"swapDoc",this,C),C}),phrase:function(S){var C=this.options.phrases;return C&&Object.prototype.hasOwnProperty.call(C,S)?C[S]:S},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},qe(c),c.registerHelper=function(S,C,B){E.hasOwnProperty(S)||(E[S]=c[S]={_global:[]}),E[S][C]=B},c.registerGlobalHelper=function(S,C,B,Z){c.registerHelper(S,C,Z),E[S]._global.push({pred:B,val:Z})}}function wn(c,m,E,S,C){var B=m,Z=E,re=_t(c,m.line),le=C&&c.direction=="rtl"?-E:E;function xe(){var Fr=m.line+le;return Fr<c.first||Fr>=c.first+c.size?!1:(m=new it(Fr,m.ch,m.sticky),re=_t(c,Fr))}function We(Fr){var kr;if(S=="codepoint"){var Hr=re.text.charCodeAt(m.ch+(E>0?0:-1));if(isNaN(Hr))kr=null;else{var dn=E>0?Hr>=55296&&Hr<56320:Hr>=56320&&Hr<57343;kr=new it(m.line,Math.max(0,Math.min(re.text.length,m.ch+E*(dn?2:1))),-E)}}else C?kr=gh(c.cm,re,m,E):kr=ym(re,m,E);if(kr==null)if(!Fr&&xe())m=bm(C,c.cm,re,m.line,le);else return!1;else m=kr;return!0}if(S=="char"||S=="codepoint")We();else if(S=="column")We(!0);else if(S=="word"||S=="group")for(var Je=null,Et=S=="group",bt=c.cm&&c.cm.getHelper(m,"wordChars"),$t=!0;!(E<0&&!We(!$t));$t=!1){var rr=re.text.charAt(m.ch)||`
`,gr=ir(rr,bt)?"w":Et&&rr==`
`?"n":!Et||/\s/.test(rr)?null:"p";if(Et&&!$t&&!gr&&(gr="s"),Je&&Je!=gr){E<0&&(E=1,We(),m.sticky="after");break}if(gr&&(Je=gr),E>0&&!We(!$t))break}var Tr=sn(c,m,B,Z,!0);return rn(B,Tr)&&(Tr.hitSide=!0),Tr}function Ra(c,m,E,S){var C=c.doc,B=m.left,Z;if(S=="page"){var re=Math.min(c.display.wrapper.clientHeight,lt(c).innerHeight||C(c).documentElement.clientHeight),le=Math.max(re-.5*dl(c.display),3);Z=(E>0?m.bottom:m.top)+E*le}else S=="line"&&(Z=E>0?m.bottom+3:m.top-3);for(var xe;xe=di(c,B,Z),!!xe.outside;){if(E<0?Z<=0:Z>=C.height){xe.hitSide=!0;break}Z+=E*5}return xe}var Ui=function(c){this.cm=c,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Wt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ui.prototype.init=function(c){var m=this,E=this,S=E.cm,C=E.div=c.lineDiv;C.contentEditable=!0,Tm(C,S.options.spellcheck,S.options.autocorrect,S.options.autocapitalize);function B(re){for(var le=re.target;le;le=le.parentNode){if(le==C)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(le.className))break}return!1}tr(C,"paste",function(re){!B(re)||Rn(S,re)||Nl(re,S)||u<=11&&setTimeout(mr(S,function(){return m.updateFromDOM()}),20)}),tr(C,"compositionstart",function(re){m.composing={data:re.data,done:!1}}),tr(C,"compositionupdate",function(re){m.composing||(m.composing={data:re.data,done:!1})}),tr(C,"compositionend",function(re){m.composing&&(re.data!=m.composing.data&&m.readFromDOMSoon(),m.composing.done=!0)}),tr(C,"touchstart",function(){return E.forceCompositionEnd()}),tr(C,"input",function(){m.composing||m.readFromDOMSoon()});function Z(re){if(!(!B(re)||Rn(S,re))){if(S.somethingSelected())Ng({lineWise:!1,text:S.getSelections()}),re.type=="cut"&&S.replaceSelection("",null,"cut");else if(S.options.lineWiseCopyCut){var le=Bg(S);Ng({lineWise:!0,text:le.text}),re.type=="cut"&&S.operation(function(){S.setSelections(le.ranges,0,Jt),S.replaceSelection("",null,"cut")})}else return;if(re.clipboardData){re.clipboardData.clearData();var xe=Pu.text.join(`
`);if(re.clipboardData.setData("Text",xe),re.clipboardData.getData("Text")==xe){re.preventDefault();return}}var We=Am(),Je=We.firstChild;Tm(Je),S.display.lineSpace.insertBefore(We,S.display.lineSpace.firstChild),Je.value=Pu.text.join(`
`);var Et=de(dt(C));ye(Je),setTimeout(function(){S.display.lineSpace.removeChild(We),Et.focus(),Et==C&&E.showPrimarySelection()},50)}}tr(C,"copy",Z),tr(C,"cut",Z)},Ui.prototype.screenReaderLabelChanged=function(c){c?this.div.setAttribute("aria-label",c):this.div.removeAttribute("aria-label")},Ui.prototype.prepareSelection=function(){var c=mf(this.cm,!1);return c.focus=de(dt(this.div))==this.div,c},Ui.prototype.showSelection=function(c,m){!c||!this.cm.display.view.length||((c.focus||m)&&this.showPrimarySelection(),this.showMultipleSelections(c))},Ui.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ui.prototype.showPrimarySelection=function(){var c=this.getSelection(),m=this.cm,E=m.doc.sel.primary(),S=E.from(),C=E.to();if(m.display.viewTo==m.display.viewFrom||S.line>=m.display.viewTo||C.line<m.display.viewFrom){c.removeAllRanges();return}var B=as(m,c.anchorNode,c.anchorOffset),Z=as(m,c.focusNode,c.focusOffset);if(!(B&&!B.bad&&Z&&!Z.bad&&Qt(Mn(B,Z),S)==0&&Qt(En(B,Z),C)==0)){var re=m.display.view,le=S.line>=m.display.viewFrom&&Of(m,S)||{node:re[0].measure.map[2],offset:0},xe=C.line<m.display.viewTo&&Of(m,C);if(!xe){var We=re[re.length-1].measure,Je=We.maps?We.maps[We.maps.length-1]:We.map;xe={node:Je[Je.length-1],offset:Je[Je.length-2]-Je[Je.length-3]}}if(!le||!xe){c.removeAllRanges();return}var Et=c.rangeCount&&c.getRangeAt(0),bt;try{bt=Ce(le.node,le.offset,xe.offset,xe.node)}catch{}bt&&(!r&&m.state.focused?(c.collapse(le.node,le.offset),bt.collapsed||(c.removeAllRanges(),c.addRange(bt))):(c.removeAllRanges(),c.addRange(bt)),Et&&c.anchorNode==null?c.addRange(Et):r&&this.startGracePeriod()),this.rememberSelection()}},Ui.prototype.startGracePeriod=function(){var c=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){c.gracePeriod=!1,c.selectionChanged()&&c.cm.operation(function(){return c.cm.curOp.selectionChanged=!0})},20)},Ui.prototype.showMultipleSelections=function(c){U(this.cm.display.cursorDiv,c.cursors),U(this.cm.display.selectionDiv,c.selection)},Ui.prototype.rememberSelection=function(){var c=this.getSelection();this.lastAnchorNode=c.anchorNode,this.lastAnchorOffset=c.anchorOffset,this.lastFocusNode=c.focusNode,this.lastFocusOffset=c.focusOffset},Ui.prototype.selectionInEditor=function(){var c=this.getSelection();if(!c.rangeCount)return!1;var m=c.getRangeAt(0).commonAncestorContainer;return Se(this.div,m)},Ui.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||de(dt(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ui.prototype.blur=function(){this.div.blur()},Ui.prototype.getField=function(){return this.div},Ui.prototype.supportsTouch=function(){return!0},Ui.prototype.receivedFocus=function(){var c=this,m=this;this.selectionInEditor()?setTimeout(function(){return c.pollSelection()},20):aa(this.cm,function(){return m.cm.curOp.selectionChanged=!0});function E(){m.cm.state.focused&&(m.pollSelection(),m.polling.set(m.cm.options.pollInterval,E))}this.polling.set(this.cm.options.pollInterval,E)},Ui.prototype.selectionChanged=function(){var c=this.getSelection();return c.anchorNode!=this.lastAnchorNode||c.anchorOffset!=this.lastAnchorOffset||c.focusNode!=this.lastFocusNode||c.focusOffset!=this.lastFocusOffset},Ui.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var c=this.getSelection(),m=this.cm;if(G&&w&&this.cm.display.gutterSpecs.length&&k0(c.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var E=as(m,c.anchorNode,c.anchorOffset),S=as(m,c.focusNode,c.focusOffset);E&&S&&aa(m,function(){Mr(m.doc,La(E,S),Jt),(E.bad||S.bad)&&(m.curOp.selectionChanged=!0)})}}},Ui.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var c=this.cm,m=c.display,E=c.doc.sel.primary(),S=E.from(),C=E.to();if(S.ch==0&&S.line>c.firstLine()&&(S=it(S.line-1,_t(c.doc,S.line-1).length)),C.ch==_t(c.doc,C.line).text.length&&C.line<c.lastLine()&&(C=it(C.line+1,0)),S.line<m.viewFrom||C.line>m.viewTo-1)return!1;var B,Z,re;S.line==m.viewFrom||(B=wu(c,S.line))==0?(Z=ce(m.view[0].line),re=m.view[0].node):(Z=ce(m.view[B].line),re=m.view[B-1].node.nextSibling);var le=wu(c,C.line),xe,We;if(le==m.view.length-1?(xe=m.viewTo-1,We=m.lineDiv.lastChild):(xe=ce(m.view[le+1].line)-1,We=m.view[le+1].node.previousSibling),!re)return!1;for(var Je=c.doc.splitLines(Ay(c,re,We,Z,xe)),Et=_r(c.doc,it(Z,0),it(xe,_t(c.doc,xe).text.length));Je.length>1&&Et.length>1;)if(vt(Je)==vt(Et))Je.pop(),Et.pop(),xe--;else if(Je[0]==Et[0])Je.shift(),Et.shift(),Z++;else break;for(var bt=0,$t=0,rr=Je[0],gr=Et[0],Tr=Math.min(rr.length,gr.length);bt<Tr&&rr.charCodeAt(bt)==gr.charCodeAt(bt);)++bt;for(var Fr=vt(Je),kr=vt(Et),Hr=Math.min(Fr.length-(Je.length==1?bt:0),kr.length-(Et.length==1?bt:0));$t<Hr&&Fr.charCodeAt(Fr.length-$t-1)==kr.charCodeAt(kr.length-$t-1);)++$t;if(Je.length==1&&Et.length==1&&Z==S.line)for(;bt&&bt>S.ch&&Fr.charCodeAt(Fr.length-$t-1)==kr.charCodeAt(kr.length-$t-1);)bt--,$t++;Je[Je.length-1]=Fr.slice(0,Fr.length-$t).replace(/^\u200b+/,""),Je[0]=Je[0].slice(bt).replace(/\u200b+$/,"");var dn=it(Z,bt),fn=it(xe,Et.length?vt(Et).length-$t:0);if(Je.length>1||Je[0]||Qt(dn,fn))return xa(c.doc,Je,dn,fn,"+input"),!0},Ui.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ui.prototype.reset=function(){this.forceCompositionEnd()},Ui.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ui.prototype.readFromDOMSoon=function(){var c=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(c.readDOMTimeout=null,c.composing)if(c.composing.done)c.composing=null;else return;c.updateFromDOM()},80))},Ui.prototype.updateFromDOM=function(){var c=this;(this.cm.isReadOnly()||!this.pollContent())&&aa(this.cm,function(){return na(c.cm)})},Ui.prototype.setUneditable=function(c){c.contentEditable="false"},Ui.prototype.onKeyPress=function(c){c.charCode==0||this.composing||(c.preventDefault(),this.cm.isReadOnly()||mr(this.cm,Ty)(this.cm,String.fromCharCode(c.charCode==null?c.keyCode:c.charCode),0))},Ui.prototype.readOnlyChanged=function(c){this.div.contentEditable=String(c!="nocursor")},Ui.prototype.onContextMenu=function(){},Ui.prototype.resetPosition=function(){},Ui.prototype.needsContentAttribute=!0;function Of(c,m){var E=sp(c,m.line);if(!E||E.hidden)return null;var S=_t(c.doc,m.line),C=th(E,S,m.line),B=Ot(S,c.doc.direction),Z="left";if(B){var re=Cn(B,m.ch);Z=re%2?"right":"left"}var le=fm(C.map,m.ch,Z);return le.offset=le.collapse=="right"?le.end:le.start,le}function k0(c){for(var m=c;m;m=m.parentNode)if(/CodeMirror-gutter-wrapper/.test(m.className))return!0;return!1}function _h(c,m){return m&&(c.bad=!0),c}function Ay(c,m,E,S,C){var B="",Z=!1,re=c.doc.lineSeparator(),le=!1;function xe(bt){return function($t){return $t.id==bt}}function We(){Z&&(B+=re,le&&(B+=re),Z=le=!1)}function Je(bt){bt&&(We(),B+=bt)}function Et(bt){if(bt.nodeType==1){var $t=bt.getAttribute("cm-text");if($t){Je($t);return}var rr=bt.getAttribute("cm-marker"),gr;if(rr){var Tr=c.findMarks(it(S,0),it(C+1,0),xe(+rr));Tr.length&&(gr=Tr[0].find(0))&&Je(_r(c.doc,gr.from,gr.to).join(re));return}if(bt.getAttribute("contenteditable")=="false")return;var Fr=/^(pre|div|p|li|table|br)$/i.test(bt.nodeName);if(!/^br$/i.test(bt.nodeName)&&bt.textContent.length==0)return;Fr&&We();for(var kr=0;kr<bt.childNodes.length;kr++)Et(bt.childNodes[kr]);/^(pre|p)$/i.test(bt.nodeName)&&(le=!0),Fr&&(Z=!0)}else bt.nodeType==3&&Je(bt.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;Et(m),m!=E;)m=m.nextSibling,le=!1;return B}function as(c,m,E){var S;if(m==c.display.lineDiv){if(S=c.display.lineDiv.childNodes[E],!S)return _h(c.clipPos(it(c.display.viewTo-1)),!0);m=null,E=0}else for(S=m;;S=S.parentNode){if(!S||S==c.display.lineDiv)return null;if(S.parentNode&&S.parentNode==c.display.lineDiv)break}for(var C=0;C<c.display.view.length;C++){var B=c.display.view[C];if(B.node==S)return B1(B,m,E)}}function B1(c,m,E){var S=c.text.firstChild,C=!1;if(!m||!Se(S,m))return _h(it(ce(c.line),0),!0);if(m==S&&(C=!0,m=S.childNodes[E],E=0,!m)){var B=c.rest?vt(c.rest):c.line;return _h(it(ce(B),B.text.length),C)}var Z=m.nodeType==3?m:null,re=m;for(!Z&&m.childNodes.length==1&&m.firstChild.nodeType==3&&(Z=m.firstChild,E&&(E=Z.nodeValue.length));re.parentNode!=S;)re=re.parentNode;var le=c.measure,xe=le.maps;function We(gr,Tr,Fr){for(var kr=-1;kr<(xe?xe.length:0);kr++)for(var Hr=kr<0?le.map:xe[kr],dn=0;dn<Hr.length;dn+=3){var fn=Hr[dn+2];if(fn==gr||fn==Tr){var Zn=ce(kr<0?c.line:c.rest[kr]),Vi=Hr[dn]+Fr;return(Fr<0||fn!=gr)&&(Vi=Hr[dn+(Fr?1:0)]),it(Zn,Vi)}}}var Je=We(Z,re,E);if(Je)return _h(Je,C);for(var Et=re.nextSibling,bt=Z?Z.nodeValue.length-E:0;Et;Et=Et.nextSibling){if(Je=We(Et,Et.firstChild,0),Je)return _h(it(Je.line,Je.ch-bt),C);bt+=Et.textContent.length}for(var $t=re.previousSibling,rr=E;$t;$t=$t.previousSibling){if(Je=We($t,$t.firstChild,-1),Je)return _h(it(Je.line,Je.ch+rr),C);rr+=$t.textContent.length}}var Sa=function(c){this.cm=c,this.prevInput="",this.pollingFast=!1,this.polling=new Wt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Sa.prototype.init=function(c){var m=this,E=this,S=this.cm;this.createField(c);var C=this.textarea;c.wrapper.insertBefore(this.wrapper,c.wrapper.firstChild),W&&(C.style.width="0px"),tr(C,"input",function(){s&&u>=9&&m.hasSelection&&(m.hasSelection=null),E.poll()}),tr(C,"paste",function(Z){Rn(S,Z)||Nl(Z,S)||(S.state.pasteIncoming=+new Date,E.fastPoll())});function B(Z){if(!Rn(S,Z)){if(S.somethingSelected())Ng({lineWise:!1,text:S.getSelections()});else if(S.options.lineWiseCopyCut){var re=Bg(S);Ng({lineWise:!0,text:re.text}),Z.type=="cut"?S.setSelections(re.ranges,null,Jt):(E.prevInput="",C.value=re.text.join(`
`),ye(C))}else return;Z.type=="cut"&&(S.state.cutIncoming=+new Date)}}tr(C,"cut",B),tr(C,"copy",B),tr(c.scroller,"paste",function(Z){if(!(Zl(c,Z)||Rn(S,Z))){if(!C.dispatchEvent){S.state.pasteIncoming=+new Date,E.focus();return}var re=new Event("paste");re.clipboardData=Z.clipboardData,C.dispatchEvent(re)}}),tr(c.lineSpace,"selectstart",function(Z){Zl(c,Z)||ze(Z)}),tr(C,"compositionstart",function(){var Z=S.getCursor("from");E.composing&&E.composing.range.clear(),E.composing={start:Z,range:S.markText(Z,S.getCursor("to"),{className:"CodeMirror-composing"})}}),tr(C,"compositionend",function(){E.composing&&(E.poll(),E.composing.range.clear(),E.composing=null)})},Sa.prototype.createField=function(c){this.wrapper=Am(),this.textarea=this.wrapper.firstChild;var m=this.cm.options;Tm(this.textarea,m.spellcheck,m.autocorrect,m.autocapitalize)},Sa.prototype.screenReaderLabelChanged=function(c){c?this.textarea.setAttribute("aria-label",c):this.textarea.removeAttribute("aria-label")},Sa.prototype.prepareSelection=function(){var c=this.cm,m=c.display,E=c.doc,S=mf(c);if(c.options.moveInputWithCursor){var C=qt(c,E.sel.primary().head,"div"),B=m.wrapper.getBoundingClientRect(),Z=m.lineDiv.getBoundingClientRect();S.teTop=Math.max(0,Math.min(m.wrapper.clientHeight-10,C.top+Z.top-B.top)),S.teLeft=Math.max(0,Math.min(m.wrapper.clientWidth-10,C.left+Z.left-B.left))}return S},Sa.prototype.showSelection=function(c){var m=this.cm,E=m.display;U(E.cursorDiv,c.cursors),U(E.selectionDiv,c.selection),c.teTop!=null&&(this.wrapper.style.top=c.teTop+"px",this.wrapper.style.left=c.teLeft+"px")},Sa.prototype.reset=function(c){if(!(this.contextMenuPending||this.composing&&c)){var m=this.cm;if(this.resetting=!0,m.somethingSelected()){this.prevInput="";var E=m.getSelection();this.textarea.value=E,m.state.focused&&ye(this.textarea),s&&u>=9&&(this.hasSelection=E)}else c||(this.prevInput=this.textarea.value="",s&&u>=9&&(this.hasSelection=null));this.resetting=!1}},Sa.prototype.getField=function(){return this.textarea},Sa.prototype.supportsTouch=function(){return!1},Sa.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!q||de(dt(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Sa.prototype.blur=function(){this.textarea.blur()},Sa.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Sa.prototype.receivedFocus=function(){this.slowPoll()},Sa.prototype.slowPoll=function(){var c=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){c.poll(),c.cm.state.focused&&c.slowPoll()})},Sa.prototype.fastPoll=function(){var c=!1,m=this;m.pollingFast=!0;function E(){var S=m.poll();!S&&!c?(c=!0,m.polling.set(60,E)):(m.pollingFast=!1,m.slowPoll())}m.polling.set(20,E)},Sa.prototype.poll=function(){var c=this,m=this.cm,E=this.textarea,S=this.prevInput;if(this.contextMenuPending||this.resetting||!m.state.focused||Xn(E)&&!S&&!this.composing||m.isReadOnly()||m.options.disableInput||m.state.keySeq)return!1;var C=E.value;if(C==S&&!m.somethingSelected())return!1;if(s&&u>=9&&this.hasSelection===C||V&&/[\uf700-\uf7ff]/.test(C))return m.display.input.reset(),!1;if(m.doc.sel==m.display.selForContextMenu){var B=C.charCodeAt(0);if(B==8203&&!S&&(S="\u200B"),B==8666)return this.reset(),this.cm.execCommand("undo")}for(var Z=0,re=Math.min(S.length,C.length);Z<re&&S.charCodeAt(Z)==C.charCodeAt(Z);)++Z;return aa(m,function(){Ty(m,C.slice(Z),S.length-Z,null,c.composing?"*compose":null),C.length>1e3||C.indexOf(`
`)>-1?E.value=c.prevInput="":c.prevInput=C,c.composing&&(c.composing.range.clear(),c.composing.range=m.markText(c.composing.start,m.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Sa.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Sa.prototype.onKeyPress=function(){s&&u>=9&&(this.hasSelection=null),this.fastPoll()},Sa.prototype.onContextMenu=function(c){var m=this,E=m.cm,S=E.display,C=m.textarea;m.contextMenuPending&&m.contextMenuPending();var B=li(E,c),Z=S.scroller.scrollTop;if(!B||I)return;var re=E.options.resetSelectionOnContextMenu;re&&E.doc.sel.contains(B)==-1&&mr(E,Mr)(E.doc,La(B),Jt);var le=C.style.cssText,xe=m.wrapper.style.cssText,We=m.wrapper.offsetParent.getBoundingClientRect();m.wrapper.style.cssText="position: static",C.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(c.clientY-We.top-5)+"px; left: "+(c.clientX-We.left-5)+`px;
      z-index: 1000; background: `+(s?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var Je;h&&(Je=C.ownerDocument.defaultView.scrollY),S.input.focus(),h&&C.ownerDocument.defaultView.scrollTo(null,Je),S.input.reset(),E.somethingSelected()||(C.value=m.prevInput=" "),m.contextMenuPending=bt,S.selForContextMenu=E.doc.sel,clearTimeout(S.detectingSelectAll);function Et(){if(C.selectionStart!=null){var rr=E.somethingSelected(),gr="\u200B"+(rr?C.value:"");C.value="\u21DA",C.value=gr,m.prevInput=rr?"":"\u200B",C.selectionStart=1,C.selectionEnd=gr.length,S.selForContextMenu=E.doc.sel}}function bt(){if(m.contextMenuPending==bt&&(m.contextMenuPending=!1,m.wrapper.style.cssText=xe,C.style.cssText=le,s&&u<9&&S.scrollbars.setScrollTop(S.scroller.scrollTop=Z),C.selectionStart!=null)){(!s||s&&u<9)&&Et();var rr=0,gr=function(){S.selForContextMenu==E.doc.sel&&C.selectionStart==0&&C.selectionEnd>0&&m.prevInput=="\u200B"?mr(E,nn)(E):rr++<10?S.detectingSelectAll=setTimeout(gr,500):(S.selForContextMenu=null,S.input.reset())};S.detectingSelectAll=setTimeout(gr,200)}}if(s&&u>=9&&Et(),ee){fr(c);var $t=function(){pn(window,"mouseup",$t),setTimeout(bt,20)};tr(window,"mouseup",$t)}else setTimeout(bt,50)},Sa.prototype.readOnlyChanged=function(c){c||this.reset(),this.textarea.disabled=c=="nocursor",this.textarea.readOnly=!!c},Sa.prototype.setUneditable=function(){},Sa.prototype.needsContentAttribute=!1;function ky(c,m){if(m=m?ut(m):{},m.value=c.value,!m.tabindex&&c.tabIndex&&(m.tabindex=c.tabIndex),!m.placeholder&&c.placeholder&&(m.placeholder=c.placeholder),m.autofocus==null){var E=de(dt(c));m.autofocus=E==c||c.getAttribute("autofocus")!=null&&E==document.body}function S(){c.value=re.getValue()}var C;if(c.form&&(tr(c.form,"submit",S),!m.leaveSubmitMethodAlone)){var B=c.form;C=B.submit;try{var Z=B.submit=function(){S(),B.submit=C,B.submit(),B.submit=Z}}catch{}}m.finishInit=function(le){le.save=S,le.getTextArea=function(){return c},le.toTextArea=function(){le.toTextArea=isNaN,S(),c.parentNode.removeChild(le.getWrapperElement()),c.style.display="",c.form&&(pn(c.form,"submit",S),!m.leaveSubmitMethodAlone&&typeof c.form.submit=="function"&&(c.form.submit=C))}},c.style.display="none";var re=Pi(function(le){return c.parentNode.insertBefore(le,c.nextSibling)},m);return re}function z1(c){c.off=pn,c.on=tr,c.wheelEventPixels=gm,c.Doc=to,c.splitLines=ii,c.countColumn=Ut,c.findColumn=Rr,c.isWordChar=er,c.Pass=zr,c.signal=tn,c.Line=Ec,c.changeEnd=Au,c.scrollbarModel=$u,c.Pos=it,c.cmpPos=Qt,c.modes=Ee,c.mimeModes=ke,c.resolveMode=Pe,c.getMode=_e,c.modeExtensions=fe,c.extendMode=Ie,c.copyState=nt,c.startState=Vt,c.innerMode=zt,c.commands=_m,c.keyMap=Oc,c.keyName=ph,c.isModifierKey=dp,c.lookupKey=iu,c.normalizeKeyMap=nu,c.StringStream=pt,c.SharedTextMarker=Bs,c.TextMarker=wa,c.LineWidget=ql,c.e_preventDefault=ze,c.e_stopPropagation=mt,c.e_stop=fr,c.addClass=we,c.contains=Se,c.rmClass=me,c.keyNames=No}Ey(Pi),Ep(Pi);var C0="iter insert remove copy getEditor constructor".split(" ");for(var xh in to.prototype)to.prototype.hasOwnProperty(xh)&&Ht(C0,xh)<0&&(Pi.prototype[xh]=function(c){return function(){return c.apply(this.doc,arguments)}}(to.prototype[xh]));return qe(to),Pi.inputStyles={textarea:Sa,contenteditable:Ui},Pi.defineMode=function(c){!Pi.defaults.mode&&c!="null"&&(Pi.defaults.mode=c),oe.apply(this,arguments)},Pi.defineMIME=Fe,Pi.defineMode("null",function(){return{token:function(c){return c.skipToEnd()}}}),Pi.defineMIME("text/plain","null"),Pi.defineExtension=function(c,m){Pi.prototype[c]=m},Pi.defineDocExtension=function(c,m){to.prototype[c]=m},Pi.fromTextArea=ky,z1(Pi),Pi.version="5.65.19",Pi})});var Nx=J((Rve,Fve)=>{(function(t){typeof Rve=="object"&&typeof Fve=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("css",function(ee,se){var me=se.inline;se.propertyKeywords||(se=t.resolveMode("text/css"));var ve=ee.indentUnit,U=se.tokenHooks,$=se.documentTypes||{},he=se.mediaTypes||{},Ce=se.mediaFeatures||{},Se=se.mediaValueKeywords||{},de=se.propertyKeywords||{},we=se.nonStandardPropertyKeywords||{},Ue=se.fontProperties||{},ye=se.counterDescriptors||{},ne=se.colorKeywords||{},st=se.valueKeywords||{},dt=se.allowNested,lt=se.lineComment,kt=se.supportsAtComponent===!0,ut=ee.highlightNonStandardPropertyKeywords!==!1,Ut,Wt;function Ht(rt,Ct){return Ut=Ct,rt}function pr(rt,Ct){var Tt=rt.next();if(U[Tt]){var ar=U[Tt](rt,Ct);if(ar!==!1)return ar}if(Tt=="@")return rt.eatWhile(/[\w\\\-]/),Ht("def",rt.current());if(Tt=="="||(Tt=="~"||Tt=="|")&&rt.eat("="))return Ht(null,"compare");if(Tt=='"'||Tt=="'")return Ct.tokenize=zr(Tt),Ct.tokenize(rt,Ct);if(Tt=="#")return rt.eatWhile(/[\w\\\-]/),Ht("atom","hash");if(Tt=="!")return rt.match(/^\s*\w*/),Ht("keyword","important");if(/\d/.test(Tt)||Tt=="."&&rt.eat(/\d/))return rt.eatWhile(/[\w.%]/),Ht("number","unit");if(Tt==="-"){if(/[\d.]/.test(rt.peek()))return rt.eatWhile(/[\w.%]/),Ht("number","unit");if(rt.match(/^-[\w\\\-]*/))return rt.eatWhile(/[\w\\\-]/),rt.match(/^\s*:/,!1)?Ht("variable-2","variable-definition"):Ht("variable-2","variable");if(rt.match(/^\w+-/))return Ht("meta","meta")}else return/[,+>*\/]/.test(Tt)?Ht(null,"select-op"):Tt=="."&&rt.match(/^-?[_a-z][_a-z0-9-]*/i)?Ht("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(Tt)?Ht(null,Tt):rt.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(rt.current())&&(Ct.tokenize=Jt),Ht("variable callee","variable")):/[\w\\\-]/.test(Tt)?(rt.eatWhile(/[\w\\\-]/),Ht("property","word")):Ht(null,null)}function zr(rt){return function(Ct,Tt){for(var ar=!1,er;(er=Ct.next())!=null;){if(er==rt&&!ar){rt==")"&&Ct.backUp(1);break}ar=!ar&&er=="\\"}return(er==rt||!ar&&rt!=")")&&(Tt.tokenize=null),Ht("string","string")}}function Jt(rt,Ct){return rt.next(),rt.match(/^\s*[\"\')]/,!1)?Ct.tokenize=null:Ct.tokenize=zr(")"),Ht(null,"(")}function Qr(rt,Ct,Tt){this.type=rt,this.indent=Ct,this.prev=Tt}function Br(rt,Ct,Tt,ar){return rt.context=new Qr(Tt,Ct.indentation()+(ar===!1?0:ve),rt.context),Tt}function Rr(rt){return rt.context.prev&&(rt.context=rt.context.prev),rt.context.type}function Be(rt,Ct,Tt){return Kt[Tt.context.type](rt,Ct,Tt)}function Ge(rt,Ct,Tt,ar){for(var er=ar||1;er>0;er--)Tt.context=Tt.context.prev;return Be(rt,Ct,Tt)}function vt(rt){var Ct=rt.current().toLowerCase();st.hasOwnProperty(Ct)?Wt="atom":ne.hasOwnProperty(Ct)?Wt="keyword":Wt="variable"}var Kt={};return Kt.top=function(rt,Ct,Tt){if(rt=="{")return Br(Tt,Ct,"block");if(rt=="}"&&Tt.context.prev)return Rr(Tt);if(kt&&/@component/i.test(rt))return Br(Tt,Ct,"atComponentBlock");if(/^@(-moz-)?document$/i.test(rt))return Br(Tt,Ct,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(rt))return Br(Tt,Ct,"atBlock");if(/^@(font-face|counter-style)/i.test(rt))return Tt.stateArg=rt,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(rt))return"keyframes";if(rt&&rt.charAt(0)=="@")return Br(Tt,Ct,"at");if(rt=="hash")Wt="builtin";else if(rt=="word")Wt="tag";else{if(rt=="variable-definition")return"maybeprop";if(rt=="interpolation")return Br(Tt,Ct,"interpolation");if(rt==":")return"pseudo";if(dt&&rt=="(")return Br(Tt,Ct,"parens")}return Tt.context.type},Kt.block=function(rt,Ct,Tt){if(rt=="word"){var ar=Ct.current().toLowerCase();return de.hasOwnProperty(ar)?(Wt="property","maybeprop"):we.hasOwnProperty(ar)?(Wt=ut?"string-2":"property","maybeprop"):dt?(Wt=Ct.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Wt+=" error","maybeprop")}else return rt=="meta"?"block":!dt&&(rt=="hash"||rt=="qualifier")?(Wt="error","block"):Kt.top(rt,Ct,Tt)},Kt.maybeprop=function(rt,Ct,Tt){return rt==":"?Br(Tt,Ct,"prop"):Be(rt,Ct,Tt)},Kt.prop=function(rt,Ct,Tt){if(rt==";")return Rr(Tt);if(rt=="{"&&dt)return Br(Tt,Ct,"propBlock");if(rt=="}"||rt=="{")return Ge(rt,Ct,Tt);if(rt=="(")return Br(Tt,Ct,"parens");if(rt=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(Ct.current()))Wt+=" error";else if(rt=="word")vt(Ct);else if(rt=="interpolation")return Br(Tt,Ct,"interpolation");return"prop"},Kt.propBlock=function(rt,Ct,Tt){return rt=="}"?Rr(Tt):rt=="word"?(Wt="property","maybeprop"):Tt.context.type},Kt.parens=function(rt,Ct,Tt){return rt=="{"||rt=="}"?Ge(rt,Ct,Tt):rt==")"?Rr(Tt):rt=="("?Br(Tt,Ct,"parens"):rt=="interpolation"?Br(Tt,Ct,"interpolation"):(rt=="word"&&vt(Ct),"parens")},Kt.pseudo=function(rt,Ct,Tt){return rt=="meta"?"pseudo":rt=="word"?(Wt="variable-3",Tt.context.type):Be(rt,Ct,Tt)},Kt.documentTypes=function(rt,Ct,Tt){return rt=="word"&&$.hasOwnProperty(Ct.current())?(Wt="tag",Tt.context.type):Kt.atBlock(rt,Ct,Tt)},Kt.atBlock=function(rt,Ct,Tt){if(rt=="(")return Br(Tt,Ct,"atBlock_parens");if(rt=="}"||rt==";")return Ge(rt,Ct,Tt);if(rt=="{")return Rr(Tt)&&Br(Tt,Ct,dt?"block":"top");if(rt=="interpolation")return Br(Tt,Ct,"interpolation");if(rt=="word"){var ar=Ct.current().toLowerCase();ar=="only"||ar=="not"||ar=="and"||ar=="or"?Wt="keyword":he.hasOwnProperty(ar)?Wt="attribute":Ce.hasOwnProperty(ar)?Wt="property":Se.hasOwnProperty(ar)?Wt="keyword":de.hasOwnProperty(ar)?Wt="property":we.hasOwnProperty(ar)?Wt=ut?"string-2":"property":st.hasOwnProperty(ar)?Wt="atom":ne.hasOwnProperty(ar)?Wt="keyword":Wt="error"}return Tt.context.type},Kt.atComponentBlock=function(rt,Ct,Tt){return rt=="}"?Ge(rt,Ct,Tt):rt=="{"?Rr(Tt)&&Br(Tt,Ct,dt?"block":"top",!1):(rt=="word"&&(Wt="error"),Tt.context.type)},Kt.atBlock_parens=function(rt,Ct,Tt){return rt==")"?Rr(Tt):rt=="{"||rt=="}"?Ge(rt,Ct,Tt,2):Kt.atBlock(rt,Ct,Tt)},Kt.restricted_atBlock_before=function(rt,Ct,Tt){return rt=="{"?Br(Tt,Ct,"restricted_atBlock"):rt=="word"&&Tt.stateArg=="@counter-style"?(Wt="variable","restricted_atBlock_before"):Be(rt,Ct,Tt)},Kt.restricted_atBlock=function(rt,Ct,Tt){return rt=="}"?(Tt.stateArg=null,Rr(Tt)):rt=="word"?(Tt.stateArg=="@font-face"&&!Ue.hasOwnProperty(Ct.current().toLowerCase())||Tt.stateArg=="@counter-style"&&!ye.hasOwnProperty(Ct.current().toLowerCase())?Wt="error":Wt="property","maybeprop"):"restricted_atBlock"},Kt.keyframes=function(rt,Ct,Tt){return rt=="word"?(Wt="variable","keyframes"):rt=="{"?Br(Tt,Ct,"top"):Be(rt,Ct,Tt)},Kt.at=function(rt,Ct,Tt){return rt==";"?Rr(Tt):rt=="{"||rt=="}"?Ge(rt,Ct,Tt):(rt=="word"?Wt="tag":rt=="hash"&&(Wt="builtin"),"at")},Kt.interpolation=function(rt,Ct,Tt){return rt=="}"?Rr(Tt):rt=="{"||rt==";"?Ge(rt,Ct,Tt):(rt=="word"?Wt="variable":rt!="variable"&&rt!="("&&rt!=")"&&(Wt="error"),"interpolation")},{startState:function(rt){return{tokenize:null,state:me?"block":"top",stateArg:null,context:new Qr(me?"block":"top",rt||0,null)}},token:function(rt,Ct){if(!Ct.tokenize&&rt.eatSpace())return null;var Tt=(Ct.tokenize||pr)(rt,Ct);return Tt&&typeof Tt=="object"&&(Ut=Tt[1],Tt=Tt[0]),Wt=Tt,Ut!="comment"&&(Ct.state=Kt[Ct.state](Ut,rt,Ct)),Wt},indent:function(rt,Ct){var Tt=rt.context,ar=Ct&&Ct.charAt(0),er=Tt.indent;return Tt.type=="prop"&&(ar=="}"||ar==")")&&(Tt=Tt.prev),Tt.prev&&(ar=="}"&&(Tt.type=="block"||Tt.type=="top"||Tt.type=="interpolation"||Tt.type=="restricted_atBlock")?(Tt=Tt.prev,er=Tt.indent):(ar==")"&&(Tt.type=="parens"||Tt.type=="atBlock_parens")||ar=="{"&&(Tt.type=="at"||Tt.type=="atBlock"))&&(er=Math.max(0,Tt.indent-ve))),er},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:lt,fold:"brace"}});function e(ee){for(var se={},me=0;me<ee.length;++me)se[ee[me].toLowerCase()]=!0;return se}var r=["domain","regexp","url","url-prefix"],n=e(r),i=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],o=e(i),s=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],u=e(s),h=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],y=e(h),w=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],T=e(w),I=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],P=e(I),L=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],R=e(L),W=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],G=e(W),q=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],V=e(q),p=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],K=e(p),j=r.concat(i).concat(s).concat(h).concat(w).concat(I).concat(q).concat(p);t.registerHelper("hintWords","css",j);function Q(ee,se){for(var me=!1,ve;(ve=ee.next())!=null;){if(me&&ve=="/"){se.tokenize=null;break}me=ve=="*"}return["comment","comment"]}t.defineMIME("text/css",{documentTypes:n,mediaTypes:o,mediaFeatures:u,mediaValueKeywords:y,propertyKeywords:T,nonStandardPropertyKeywords:P,fontProperties:R,counterDescriptors:G,colorKeywords:V,valueKeywords:K,tokenHooks:{"/":function(ee,se){return ee.eat("*")?(se.tokenize=Q,Q(ee,se)):!1}},name:"css"}),t.defineMIME("text/x-scss",{mediaTypes:o,mediaFeatures:u,mediaValueKeywords:y,propertyKeywords:T,nonStandardPropertyKeywords:P,colorKeywords:V,valueKeywords:K,fontProperties:R,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(ee,se){return ee.eat("/")?(ee.skipToEnd(),["comment","comment"]):ee.eat("*")?(se.tokenize=Q,Q(ee,se)):["operator","operator"]},":":function(ee){return ee.match(/^\s*\{/,!1)?[null,null]:!1},$:function(ee){return ee.match(/^[\w-]+/),ee.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(ee){return ee.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),t.defineMIME("text/x-less",{mediaTypes:o,mediaFeatures:u,mediaValueKeywords:y,propertyKeywords:T,nonStandardPropertyKeywords:P,colorKeywords:V,valueKeywords:K,fontProperties:R,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(ee,se){return ee.eat("/")?(ee.skipToEnd(),["comment","comment"]):ee.eat("*")?(se.tokenize=Q,Q(ee,se)):["operator","operator"]},"@":function(ee){return ee.eat("{")?[null,"interpolation"]:ee.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(ee.eatWhile(/[\w\\\-]/),ee.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),t.defineMIME("text/x-gss",{documentTypes:n,mediaTypes:o,mediaFeatures:u,propertyKeywords:T,nonStandardPropertyKeywords:P,fontProperties:R,counterDescriptors:G,colorKeywords:V,valueKeywords:K,supportsAtComponent:!0,tokenHooks:{"/":function(ee,se){return ee.eat("*")?(se.tokenize=Q,Q(ee,se)):!1}},name:"css",helperType:"gss"})})});var y6=J((qve,Nve)=>{(function(t){typeof qve=="object"&&typeof Nve=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineSimpleMode=function(w,T){t.defineMode(w,function(I){return t.simpleMode(I,T)})},t.simpleMode=function(w,T){e(T,"start");var I={},P=T.meta||{},L=!1;for(var R in T)if(R!=P&&T.hasOwnProperty(R))for(var W=I[R]=[],G=T[R],q=0;q<G.length;q++){var V=G[q];W.push(new i(V,T)),(V.indent||V.dedent)&&(L=!0)}var p={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:L?[]:null}},copyState:function(j){var Q={state:j.state,pending:j.pending,local:j.local,localState:null,indent:j.indent&&j.indent.slice(0)};j.localState&&(Q.localState=t.copyState(j.local.mode,j.localState)),j.stack&&(Q.stack=j.stack.slice(0));for(var ee=j.persistentStates;ee;ee=ee.next)Q.persistentStates={mode:ee.mode,spec:ee.spec,state:ee.state==j.localState?Q.localState:t.copyState(ee.mode,ee.state),next:Q.persistentStates};return Q},token:o(I,w),innerMode:function(j){return j.local&&{mode:j.local.mode,state:j.localState}},indent:y(I,P)};if(P)for(var K in P)P.hasOwnProperty(K)&&(p[K]=P[K]);return p};function e(w,T){if(!w.hasOwnProperty(T))throw new Error("Undefined state "+T+" in simple mode")}function r(w,T){if(!w)return/(?:)/;var I="";return w instanceof RegExp?(w.ignoreCase&&(I="i"),w.unicode&&(I+="u"),w=w.source):w=String(w),new RegExp((T===!1?"":"^")+"(?:"+w+")",I)}function n(w){if(!w)return null;if(w.apply)return w;if(typeof w=="string")return w.replace(/\./g," ");for(var T=[],I=0;I<w.length;I++)T.push(w[I]&&w[I].replace(/\./g," "));return T}function i(w,T){(w.next||w.push)&&e(T,w.next||w.push),this.regex=r(w.regex),this.token=n(w.token),this.data=w}function o(w,T){return function(I,P){if(P.pending){var L=P.pending.shift();return P.pending.length==0&&(P.pending=null),I.pos+=L.text.length,L.token}if(P.local)if(P.local.end&&I.match(P.local.end)){var R=P.local.endToken||null;return P.local=P.localState=null,R}else{var R=P.local.mode.token(I,P.localState),W;return P.local.endScan&&(W=P.local.endScan.exec(I.current()))&&(I.pos=I.start+W.index),R}for(var G=w[P.state],q=0;q<G.length;q++){var V=G[q],p=(!V.data.sol||I.sol())&&I.match(V.regex);if(p){V.data.next?P.state=V.data.next:V.data.push?((P.stack||(P.stack=[])).push(P.state),P.state=V.data.push):V.data.pop&&P.stack&&P.stack.length&&(P.state=P.stack.pop()),V.data.mode&&u(T,P,V.data.mode,V.token),V.data.indent&&P.indent.push(I.indentation()+T.indentUnit),V.data.dedent&&P.indent.pop();var K=V.token;if(K&&K.apply&&(K=K(p)),p.length>2&&V.token&&typeof V.token!="string"){for(var j=2;j<p.length;j++)p[j]&&(P.pending||(P.pending=[])).push({text:p[j],token:V.token[j-1]});return I.backUp(p[0].length-(p[1]?p[1].length:0)),K[0]}else return K&&K.join?K[0]:K}}return I.next(),null}}function s(w,T){if(w===T)return!0;if(!w||typeof w!="object"||!T||typeof T!="object")return!1;var I=0;for(var P in w)if(w.hasOwnProperty(P)){if(!T.hasOwnProperty(P)||!s(w[P],T[P]))return!1;I++}for(var P in T)T.hasOwnProperty(P)&&I--;return I==0}function u(w,T,I,P){var L;if(I.persistent)for(var R=T.persistentStates;R&&!L;R=R.next)(I.spec?s(I.spec,R.spec):I.mode==R.mode)&&(L=R);var W=L?L.mode:I.mode||t.getMode(w,I.spec),G=L?L.state:t.startState(W);I.persistent&&!L&&(T.persistentStates={mode:W,spec:I.spec,state:G,next:T.persistentStates}),T.localState=G,T.local={mode:W,end:I.end&&r(I.end),endScan:I.end&&I.forceEnd!==!1&&r(I.end,!1),endToken:P&&P.join?P[P.length-1]:P}}function h(w,T){for(var I=0;I<T.length;I++)if(T[I]===w)return!0}function y(w,T){return function(I,P,L){if(I.local&&I.local.mode.indent)return I.local.mode.indent(I.localState,P,L);if(I.indent==null||I.local||T.dontIndentStates&&h(I.state,T.dontIndentStates)>-1)return t.Pass;var R=I.indent.length-1,W=w[I.state];e:for(;;){for(var G=0;G<W.length;G++){var q=W[G];if(q.data.dedent&&q.data.dedentIfLineStart!==!1){var V=q.regex.exec(P);if(V&&V[0]){R--,(q.next||q.push)&&(W=w[q.next||q.push]),P=P.slice(V[0].length);continue e}}}break}return R<0?0:I.indent[R]}}})});var jve=J((Bve,zve)=>{(function(t){typeof Bve=="object"&&typeof zve=="object"?t(io(),y6()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../../addon/mode/simple"],t):t(CodeMirror)})(function(t){"use strict";var e="from",r=new RegExp("^(\\s*)\\b("+e+")\\b","i"),n=["run","cmd","entrypoint","shell"],i=new RegExp("^(\\s*)("+n.join("|")+")(\\s+\\[)","i"),o="expose",s=new RegExp("^(\\s*)("+o+")(\\s+)","i"),u=["arg","from","maintainer","label","env","add","copy","volume","user","workdir","onbuild","stopsignal","healthcheck","shell"],h=[e,o].concat(n).concat(u),y="("+h.join("|")+")",w=new RegExp("^(\\s*)"+y+"(\\s*)(#.*)?$","i"),T=new RegExp("^(\\s*)"+y+"(\\s+)","i");t.defineSimpleMode("dockerfile",{start:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:r,token:[null,"keyword"],sol:!0,next:"from"},{regex:w,token:[null,"keyword",null,"error"],sol:!0},{regex:i,token:[null,"keyword",null],sol:!0,next:"array"},{regex:s,token:[null,"keyword",null],sol:!0,next:"expose"},{regex:T,token:[null,"keyword",null],sol:!0,next:"arguments"},{regex:/./,token:null}],from:[{regex:/\s*$/,token:null,next:"start"},{regex:/(\s*)(#.*)$/,token:[null,"error"],next:"start"},{regex:/(\s*\S+\s+)(as)/i,token:[null,"keyword"],next:"start"},{token:null,next:"start"}],single:[{regex:/(?:[^\\']|\\.)/,token:"string"},{regex:/'/,token:"string",pop:!0}],double:[{regex:/(?:[^\\"]|\\.)/,token:"string"},{regex:/"/,token:"string",pop:!0}],array:[{regex:/\]/,token:null,next:"start"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"}],expose:[{regex:/\d+$/,token:"number",next:"start"},{regex:/[^\d]+$/,token:null,next:"start"},{regex:/\d+/,token:"number"},{regex:/[^\d]+/,token:null},{token:null,next:"start"}],arguments:[{regex:/^\s*#.*$/,sol:!0,token:"comment"},{regex:/"(?:[^\\"]|\\.)*"?$/,token:"string",next:"start"},{regex:/"/,token:"string",push:"double"},{regex:/'(?:[^\\']|\\.)*'?$/,token:"string",next:"start"},{regex:/'/,token:"string",push:"single"},{regex:/[^#"']+[\\`]$/,token:null},{regex:/[^#"']+$/,token:null,next:"start"},{regex:/[^#"']+/,token:null},{token:null,next:"start"}],meta:{lineComment:"#"}}),t.defineMIME("text/x-dockerfile","dockerfile")})});var Bx=J((Uve,Vve)=>{(function(t){typeof Uve=="object"&&typeof Vve=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";var e={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},r={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};t.defineMode("xml",function(n,i){var o=n.indentUnit,s={},u=i.htmlMode?e:r;for(var h in u)s[h]=u[h];for(var h in i)s[h]=i[h];var y,w;function T($,he){function Ce(we){return he.tokenize=we,we($,he)}var Se=$.next();if(Se=="<")return $.eat("!")?$.eat("[")?$.match("CDATA[")?Ce(L("atom","]]>")):null:$.match("--")?Ce(L("comment","-->")):$.match("DOCTYPE",!0,!0)?($.eatWhile(/[\w\._\-]/),Ce(R(1))):null:$.eat("?")?($.eatWhile(/[\w\._\-]/),he.tokenize=L("meta","?>"),"meta"):(y=$.eat("/")?"closeTag":"openTag",he.tokenize=I,"tag bracket");if(Se=="&"){var de;return $.eat("#")?$.eat("x")?de=$.eatWhile(/[a-fA-F\d]/)&&$.eat(";"):de=$.eatWhile(/[\d]/)&&$.eat(";"):de=$.eatWhile(/[\w\.\-:]/)&&$.eat(";"),de?"atom":"error"}else return $.eatWhile(/[^&<]/),null}T.isInText=!0;function I($,he){var Ce=$.next();if(Ce==">"||Ce=="/"&&$.eat(">"))return he.tokenize=T,y=Ce==">"?"endTag":"selfcloseTag","tag bracket";if(Ce=="=")return y="equals",null;if(Ce=="<"){he.tokenize=T,he.state=p,he.tagName=he.tagStart=null;var Se=he.tokenize($,he);return Se?Se+" tag error":"tag error"}else return/[\'\"]/.test(Ce)?(he.tokenize=P(Ce),he.stringStartCol=$.column(),he.tokenize($,he)):($.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function P($){var he=function(Ce,Se){for(;!Ce.eol();)if(Ce.next()==$){Se.tokenize=I;break}return"string"};return he.isInAttribute=!0,he}function L($,he){return function(Ce,Se){for(;!Ce.eol();){if(Ce.match(he)){Se.tokenize=T;break}Ce.next()}return $}}function R($){return function(he,Ce){for(var Se;(Se=he.next())!=null;){if(Se=="<")return Ce.tokenize=R($+1),Ce.tokenize(he,Ce);if(Se==">")if($==1){Ce.tokenize=T;break}else return Ce.tokenize=R($-1),Ce.tokenize(he,Ce)}return"meta"}}function W($){return $&&$.toLowerCase()}function G($,he,Ce){this.prev=$.context,this.tagName=he||"",this.indent=$.indented,this.startOfLine=Ce,(s.doNotIndent.hasOwnProperty(he)||$.context&&$.context.noIndent)&&(this.noIndent=!0)}function q($){$.context&&($.context=$.context.prev)}function V($,he){for(var Ce;;){if(!$.context||(Ce=$.context.tagName,!s.contextGrabbers.hasOwnProperty(W(Ce))||!s.contextGrabbers[W(Ce)].hasOwnProperty(W(he))))return;q($)}}function p($,he,Ce){return $=="openTag"?(Ce.tagStart=he.column(),K):$=="closeTag"?j:p}function K($,he,Ce){return $=="word"?(Ce.tagName=he.current(),w="tag",se):s.allowMissingTagName&&$=="endTag"?(w="tag bracket",se($,he,Ce)):(w="error",K)}function j($,he,Ce){if($=="word"){var Se=he.current();return Ce.context&&Ce.context.tagName!=Se&&s.implicitlyClosed.hasOwnProperty(W(Ce.context.tagName))&&q(Ce),Ce.context&&Ce.context.tagName==Se||s.matchClosing===!1?(w="tag",Q):(w="tag error",ee)}else return s.allowMissingTagName&&$=="endTag"?(w="tag bracket",Q($,he,Ce)):(w="error",ee)}function Q($,he,Ce){return $!="endTag"?(w="error",Q):(q(Ce),p)}function ee($,he,Ce){return w="error",Q($,he,Ce)}function se($,he,Ce){if($=="word")return w="attribute",me;if($=="endTag"||$=="selfcloseTag"){var Se=Ce.tagName,de=Ce.tagStart;return Ce.tagName=Ce.tagStart=null,$=="selfcloseTag"||s.autoSelfClosers.hasOwnProperty(W(Se))?V(Ce,Se):(V(Ce,Se),Ce.context=new G(Ce,Se,de==Ce.indented)),p}return w="error",se}function me($,he,Ce){return $=="equals"?ve:(s.allowMissing||(w="error"),se($,he,Ce))}function ve($,he,Ce){return $=="string"?U:$=="word"&&s.allowUnquoted?(w="string",se):(w="error",se($,he,Ce))}function U($,he,Ce){return $=="string"?U:se($,he,Ce)}return{startState:function($){var he={tokenize:T,state:p,indented:$||0,tagName:null,tagStart:null,context:null};return $!=null&&(he.baseIndent=$),he},token:function($,he){if(!he.tagName&&$.sol()&&(he.indented=$.indentation()),$.eatSpace())return null;y=null;var Ce=he.tokenize($,he);return(Ce||y)&&Ce!="comment"&&(w=null,he.state=he.state(y||Ce,$,he),w&&(Ce=w=="error"?Ce+" error":w)),Ce},indent:function($,he,Ce){var Se=$.context;if($.tokenize.isInAttribute)return $.tagStart==$.indented?$.stringStartCol+1:$.indented+o;if(Se&&Se.noIndent)return t.Pass;if($.tokenize!=I&&$.tokenize!=T)return Ce?Ce.match(/^(\s*)/)[0].length:0;if($.tagName)return s.multilineTagIndentPastTag!==!1?$.tagStart+$.tagName.length+2:$.tagStart+o*(s.multilineTagIndentFactor||1);if(s.alignCDATA&&/<!\[CDATA\[/.test(he))return 0;var de=he&&/^<(\/)?([\w_:\.-]*)/.exec(he);if(de&&de[1])for(;Se;)if(Se.tagName==de[2]){Se=Se.prev;break}else if(s.implicitlyClosed.hasOwnProperty(W(Se.tagName)))Se=Se.prev;else break;else if(de)for(;Se;){var we=s.contextGrabbers[W(Se.tagName)];if(we&&we.hasOwnProperty(W(de[2])))Se=Se.prev;else break}for(;Se&&Se.prev&&!Se.startOfLine;)Se=Se.prev;return Se?Se.indent+o:$.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:s.htmlMode?"html":"xml",helperType:s.htmlMode?"html":"xml",skipAttribute:function($){$.state==ve&&($.state=se)},xmlCurrentTag:function($){return $.tagName?{name:$.tagName,close:$.type=="closeTag"}:null},xmlCurrentContext:function($){for(var he=[],Ce=$.context;Ce;Ce=Ce.prev)he.push(Ce.tagName);return he.reverse()}}}),t.defineMIME("text/xml","xml"),t.defineMIME("application/xml","xml"),t.mimeModes.hasOwnProperty("text/html")||t.defineMIME("text/html",{name:"xml",htmlMode:!0})})});var ZE=J((Hve,Wve)=>{(function(t){typeof Hve=="object"&&typeof Wve=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("javascript",function(e,r){var n=e.indentUnit,i=r.statementIndent,o=r.jsonld,s=r.json||o,u=r.trackScope!==!1,h=r.typescript,y=r.wordCharacters||/[\w$\xa1-\uffff]/,w=function(){function ce(un){return{type:un,style:"keyword"}}var Re=ce("keyword a"),ct=ce("keyword b"),jt=ce("keyword c"),it=ce("keyword d"),Qt=ce("operator"),rn={type:"atom",style:"atom"};return{if:ce("if"),while:Re,with:Re,else:ct,do:ct,try:ct,finally:ct,return:it,break:it,continue:it,new:ce("new"),delete:jt,void:jt,throw:jt,debugger:ce("debugger"),var:ce("var"),const:ce("var"),let:ce("var"),function:ce("function"),catch:ce("catch"),for:ce("for"),switch:ce("switch"),case:ce("case"),default:ce("default"),in:Qt,typeof:Qt,instanceof:Qt,true:rn,false:rn,null:rn,undefined:rn,NaN:rn,Infinity:rn,this:ce("this"),class:ce("class"),super:ce("atom"),yield:jt,export:ce("export"),import:ce("import"),extends:jt,await:jt}}(),T=/[+\-*&%=<>!?|~^@]/,I=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function P(ce){for(var Re=!1,ct,jt=!1;(ct=ce.next())!=null;){if(!Re){if(ct=="/"&&!jt)return;ct=="["?jt=!0:jt&&ct=="]"&&(jt=!1)}Re=!Re&&ct=="\\"}}var L,R;function W(ce,Re,ct){return L=ce,R=ct,Re}function G(ce,Re){var ct=ce.next();if(ct=='"'||ct=="'")return Re.tokenize=q(ct),Re.tokenize(ce,Re);if(ct=="."&&ce.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return W("number","number");if(ct=="."&&ce.match(".."))return W("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ct))return W(ct);if(ct=="="&&ce.eat(">"))return W("=>","operator");if(ct=="0"&&ce.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return W("number","number");if(/\d/.test(ct))return ce.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),W("number","number");if(ct=="/")return ce.eat("*")?(Re.tokenize=V,V(ce,Re)):ce.eat("/")?(ce.skipToEnd(),W("comment","comment")):Mt(ce,Re,1)?(P(ce),ce.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),W("regexp","string-2")):(ce.eat("="),W("operator","operator",ce.current()));if(ct=="`")return Re.tokenize=p,p(ce,Re);if(ct=="#"&&ce.peek()=="!")return ce.skipToEnd(),W("meta","meta");if(ct=="#"&&ce.eatWhile(y))return W("variable","property");if(ct=="<"&&ce.match("!--")||ct=="-"&&ce.match("->")&&!/\S/.test(ce.string.slice(0,ce.start)))return ce.skipToEnd(),W("comment","comment");if(T.test(ct))return(ct!=">"||!Re.lexical||Re.lexical.type!=">")&&(ce.eat("=")?(ct=="!"||ct=="=")&&ce.eat("="):/[<>*+\-|&?]/.test(ct)&&(ce.eat(ct),ct==">"&&ce.eat(ct))),ct=="?"&&ce.eat(".")?W("."):W("operator","operator",ce.current());if(y.test(ct)){ce.eatWhile(y);var jt=ce.current();if(Re.lastType!="."){if(w.propertyIsEnumerable(jt)){var it=w[jt];return W(it.type,it.style,jt)}if(jt=="async"&&ce.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return W("async","keyword",jt)}return W("variable","variable",jt)}}function q(ce){return function(Re,ct){var jt=!1,it;if(o&&Re.peek()=="@"&&Re.match(I))return ct.tokenize=G,W("jsonld-keyword","meta");for(;(it=Re.next())!=null&&!(it==ce&&!jt);)jt=!jt&&it=="\\";return jt||(ct.tokenize=G),W("string","string")}}function V(ce,Re){for(var ct=!1,jt;jt=ce.next();){if(jt=="/"&&ct){Re.tokenize=G;break}ct=jt=="*"}return W("comment","comment")}function p(ce,Re){for(var ct=!1,jt;(jt=ce.next())!=null;){if(!ct&&(jt=="`"||jt=="$"&&ce.eat("{"))){Re.tokenize=G;break}ct=!ct&&jt=="\\"}return W("quasi","string-2",ce.current())}var K="([{}])";function j(ce,Re){Re.fatArrowAt&&(Re.fatArrowAt=null);var ct=ce.string.indexOf("=>",ce.start);if(!(ct<0)){if(h){var jt=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(ce.string.slice(ce.start,ct));jt&&(ct=jt.index)}for(var it=0,Qt=!1,rn=ct-1;rn>=0;--rn){var un=ce.string.charAt(rn),En=K.indexOf(un);if(En>=0&&En<3){if(!it){++rn;break}if(--it==0){un=="("&&(Qt=!0);break}}else if(En>=3&&En<6)++it;else if(y.test(un))Qt=!0;else if(/["'\/`]/.test(un))for(;;--rn){if(rn==0)return;var Mn=ce.string.charAt(rn-1);if(Mn==un&&ce.string.charAt(rn-2)!="\\"){rn--;break}}else if(Qt&&!it){++rn;break}}Qt&&!it&&(Re.fatArrowAt=rn)}}var Q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ee(ce,Re,ct,jt,it,Qt){this.indented=ce,this.column=Re,this.type=ct,this.prev=it,this.info=Qt,jt!=null&&(this.align=jt)}function se(ce,Re){if(!u)return!1;for(var ct=ce.localVars;ct;ct=ct.next)if(ct.name==Re)return!0;for(var jt=ce.context;jt;jt=jt.prev)for(var ct=jt.vars;ct;ct=ct.next)if(ct.name==Re)return!0}function me(ce,Re,ct,jt,it){var Qt=ce.cc;for(ve.state=ce,ve.stream=it,ve.marked=null,ve.cc=Qt,ve.style=Re,ce.lexical.hasOwnProperty("align")||(ce.lexical.align=!0);;){var rn=Qt.length?Qt.pop():s?Ht:Ut;if(rn(ct,jt)){for(;Qt.length&&Qt[Qt.length-1].lex;)Qt.pop()();return ve.marked?ve.marked:ct=="variable"&&se(ce,jt)?"variable-2":Re}}}var ve={state:null,column:null,marked:null,cc:null};function U(){for(var ce=arguments.length-1;ce>=0;ce--)ve.cc.push(arguments[ce])}function $(){return U.apply(null,arguments),!0}function he(ce,Re){for(var ct=Re;ct;ct=ct.next)if(ct.name==ce)return!0;return!1}function Ce(ce){var Re=ve.state;if(ve.marked="def",!!u){if(Re.context){if(Re.lexical.info=="var"&&Re.context&&Re.context.block){var ct=Se(ce,Re.context);if(ct!=null){Re.context=ct;return}}else if(!he(ce,Re.localVars)){Re.localVars=new Ue(ce,Re.localVars);return}}r.globalVars&&!he(ce,Re.globalVars)&&(Re.globalVars=new Ue(ce,Re.globalVars))}}function Se(ce,Re){if(Re)if(Re.block){var ct=Se(ce,Re.prev);return ct?ct==Re.prev?Re:new we(ct,Re.vars,!0):null}else return he(ce,Re.vars)?Re:new we(Re.prev,new Ue(ce,Re.vars),!1);else return null}function de(ce){return ce=="public"||ce=="private"||ce=="protected"||ce=="abstract"||ce=="readonly"}function we(ce,Re,ct){this.prev=ce,this.vars=Re,this.block=ct}function Ue(ce,Re){this.name=ce,this.next=Re}var ye=new Ue("this",new Ue("arguments",null));function ne(){ve.state.context=new we(ve.state.context,ve.state.localVars,!1),ve.state.localVars=ye}function st(){ve.state.context=new we(ve.state.context,ve.state.localVars,!0),ve.state.localVars=null}ne.lex=st.lex=!0;function dt(){ve.state.localVars=ve.state.context.vars,ve.state.context=ve.state.context.prev}dt.lex=!0;function lt(ce,Re){var ct=function(){var jt=ve.state,it=jt.indented;if(jt.lexical.type=="stat")it=jt.lexical.indented;else for(var Qt=jt.lexical;Qt&&Qt.type==")"&&Qt.align;Qt=Qt.prev)it=Qt.indented;jt.lexical=new ee(it,ve.stream.column(),ce,null,jt.lexical,Re)};return ct.lex=!0,ct}function kt(){var ce=ve.state;ce.lexical.prev&&(ce.lexical.type==")"&&(ce.indented=ce.lexical.indented),ce.lexical=ce.lexical.prev)}kt.lex=!0;function ut(ce){function Re(ct){return ct==ce?$():ce==";"||ct=="}"||ct==")"||ct=="]"?U():$(Re)}return Re}function Ut(ce,Re){return ce=="var"?$(lt("vardef",Re),mt,ut(";"),kt):ce=="keyword a"?$(lt("form"),zr,Ut,kt):ce=="keyword b"?$(lt("form"),Ut,kt):ce=="keyword d"?ve.stream.match(/^\s*$/,!1)?$():$(lt("stat"),Qr,ut(";"),kt):ce=="debugger"?$(ut(";")):ce=="{"?$(lt("}"),st,xr,kt,dt):ce==";"?$():ce=="if"?(ve.state.lexical.info=="else"&&ve.state.cc[ve.state.cc.length-1]==kt&&ve.state.cc.pop()(),$(lt("form"),zr,Ut,kt,bn)):ce=="function"?$(ii):ce=="for"?$(lt("form"),st,Pr,Ut,dt,kt):ce=="class"||h&&Re=="interface"?(ve.marked="keyword",$(lt("form",ce=="class"?ce:Re),Ee,kt)):ce=="variable"?h&&Re=="declare"?(ve.marked="keyword",$(Ut)):h&&(Re=="module"||Re=="enum"||Re=="type")&&ve.stream.match(/^\s*\w/,!1)?(ve.marked="keyword",Re=="enum"?$(_t):Re=="type"?$(ha,ut("operator"),Ot,ut(";")):$(lt("form"),Ft,ut("{"),lt("}"),xr,kt,kt)):h&&Re=="namespace"?(ve.marked="keyword",$(lt("form"),Ht,Ut,kt)):h&&Re=="abstract"?(ve.marked="keyword",$(Ut)):$(lt("stat"),ar):ce=="switch"?$(lt("form"),zr,ut("{"),lt("}","switch"),st,xr,kt,kt,dt):ce=="case"?$(Ht,ut(":")):ce=="default"?$(ut(":")):ce=="catch"?$(lt("form"),ne,Wt,Ut,kt,dt):ce=="export"?$(lt("stat"),Pe,kt):ce=="import"?$(lt("stat"),fe,kt):ce=="async"?$(Ut):Re=="@"?$(Ht,Ut):U(lt("stat"),Ht,ut(";"),kt)}function Wt(ce){if(ce=="(")return $(xn,ut(")"))}function Ht(ce,Re){return Jt(ce,Re,!1)}function pr(ce,Re){return Jt(ce,Re,!0)}function zr(ce){return ce!="("?U():$(lt(")"),Qr,ut(")"),kt)}function Jt(ce,Re,ct){if(ve.state.fatArrowAt==ve.stream.start){var jt=ct?Kt:vt;if(ce=="(")return $(ne,lt(")"),Xe(xn,")"),kt,ut("=>"),jt,dt);if(ce=="variable")return U(ne,Ft,ut("=>"),jt,dt)}var it=ct?Rr:Br;return Q.hasOwnProperty(ce)?$(it):ce=="function"?$(ii,it):ce=="class"||h&&Re=="interface"?(ve.marked="keyword",$(lt("form"),pe,kt)):ce=="keyword c"||ce=="async"?$(ct?pr:Ht):ce=="("?$(lt(")"),Qr,ut(")"),kt,it):ce=="operator"||ce=="spread"?$(ct?pr:Ht):ce=="["?$(lt("]"),pt,kt,it):ce=="{"?Rt(ir,"}",null,it):ce=="quasi"?U(Be,it):ce=="new"?$(rt(ct)):$()}function Qr(ce){return ce.match(/[;\}\)\],]/)?U():U(Ht)}function Br(ce,Re){return ce==","?$(Qr):Rr(ce,Re,!1)}function Rr(ce,Re,ct){var jt=ct==!1?Br:Rr,it=ct==!1?Ht:pr;if(ce=="=>")return $(ne,ct?Kt:vt,dt);if(ce=="operator")return/\+\+|--/.test(Re)||h&&Re=="!"?$(jt):h&&Re=="<"&&ve.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?$(lt(">"),Xe(Ot,">"),kt,jt):Re=="?"?$(Ht,ut(":"),it):$(it);if(ce=="quasi")return U(Be,jt);if(ce!=";"){if(ce=="(")return Rt(pr,")","call",jt);if(ce==".")return $(er,jt);if(ce=="[")return $(lt("]"),Qr,ut("]"),kt,jt);if(h&&Re=="as")return ve.marked="keyword",$(Ot,jt);if(ce=="regexp")return ve.state.lastType=ve.marked="operator",ve.stream.backUp(ve.stream.pos-ve.stream.start-1),$(it)}}function Be(ce,Re){return ce!="quasi"?U():Re.slice(Re.length-2)!="${"?$(Be):$(Qr,Ge)}function Ge(ce){if(ce=="}")return ve.marked="string-2",ve.state.tokenize=p,$(Be)}function vt(ce){return j(ve.stream,ve.state),U(ce=="{"?Ut:Ht)}function Kt(ce){return j(ve.stream,ve.state),U(ce=="{"?Ut:pr)}function rt(ce){return function(Re){return Re=="."?$(ce?Tt:Ct):Re=="variable"&&h?$(Ei,ce?Rr:Br):U(ce?pr:Ht)}}function Ct(ce,Re){if(Re=="target")return ve.marked="keyword",$(Br)}function Tt(ce,Re){if(Re=="target")return ve.marked="keyword",$(Rr)}function ar(ce){return ce==":"?$(kt,Ut):U(Br,ut(";"),kt)}function er(ce){if(ce=="variable")return ve.marked="property",$()}function ir(ce,Re){if(ce=="async")return ve.marked="property",$(ir);if(ce=="variable"||ve.style=="keyword"){if(ve.marked="property",Re=="get"||Re=="set")return $(sr);var ct;return h&&ve.state.fatArrowAt==ve.stream.start&&(ct=ve.stream.match(/^\s*:\s*/,!1))&&(ve.state.fatArrowAt=ve.stream.pos+ct[0].length),$(He)}else{if(ce=="number"||ce=="string")return ve.marked=o?"property":ve.style+" property",$(He);if(ce=="jsonld-keyword")return $(He);if(h&&de(Re))return ve.marked="keyword",$(ir);if(ce=="[")return $(Ht,Yn,ut("]"),He);if(ce=="spread")return $(pr,He);if(Re=="*")return ve.marked="keyword",$(ir);if(ce==":")return U(He)}}function sr(ce){return ce!="variable"?U(He):(ve.marked="property",$(ii))}function He(ce){if(ce==":")return $(pr);if(ce=="(")return U(ii)}function Xe(ce,Re,ct){function jt(it,Qt){if(ct?ct.indexOf(it)>-1:it==","){var rn=ve.state.lexical;return rn.info=="call"&&(rn.pos=(rn.pos||0)+1),$(function(un,En){return un==Re||En==Re?U():U(ce)},jt)}return it==Re||Qt==Re?$():ct&&ct.indexOf(";")>-1?U(ce):$(ut(Re))}return function(it,Qt){return it==Re||Qt==Re?$():U(ce,jt)}}function Rt(ce,Re,ct){for(var jt=3;jt<arguments.length;jt++)ve.cc.push(arguments[jt]);return $(lt(Re,ct),Xe(ce,Re),kt)}function xr(ce){return ce=="}"?$():U(Ut,xr)}function Yn(ce,Re){if(h){if(ce==":")return $(Ot);if(Re=="?")return $(Yn)}}function kn(ce,Re){if(h&&(ce==":"||Re=="in"))return $(Ot)}function Cn(ce){if(h&&ce==":")return ve.stream.match(/^\s*\w+\s+is\b/,!1)?$(Ht,wt,Ot):$(Ot)}function wt(ce,Re){if(Re=="is")return ve.marked="keyword",$()}function Ot(ce,Re){if(Re=="keyof"||Re=="typeof"||Re=="infer"||Re=="readonly")return ve.marked="keyword",$(Re=="typeof"?pr:Ot);if(ce=="variable"||Re=="void")return ve.marked="type",$(Si);if(Re=="|"||Re=="&")return $(Ot);if(ce=="string"||ce=="number"||ce=="atom")return $(Si);if(ce=="[")return $(lt("]"),Xe(Ot,"]",","),kt,Si);if(ce=="{")return $(lt("}"),tr,kt,Si);if(ce=="(")return $(Xe(Rn,")"),wr,Si);if(ce=="<")return $(Xe(Ot,">"),Ot);if(ce=="quasi")return U(pn,Si)}function wr(ce){if(ce=="=>")return $(Ot)}function tr(ce){return ce.match(/[\}\)\]]/)?$():ce==","||ce==";"?$(tr):U(on,tr)}function on(ce,Re){if(ce=="variable"||ve.style=="keyword")return ve.marked="property",$(on);if(Re=="?"||ce=="number"||ce=="string")return $(on);if(ce==":")return $(Ot);if(ce=="[")return $(ut("variable"),kn,ut("]"),on);if(ce=="(")return U(Xn,on);if(!ce.match(/[;\}\)\],]/))return $()}function pn(ce,Re){return ce!="quasi"?U():Re.slice(Re.length-2)!="${"?$(pn):$(Ot,tn)}function tn(ce){if(ce=="}")return ve.marked="string-2",ve.state.tokenize=p,$(pn)}function Rn(ce,Re){return ce=="variable"&&ve.stream.match(/^\s*[?:]/,!1)||Re=="?"?$(Rn):ce==":"?$(Ot):ce=="spread"?$(Rn):U(Ot)}function Si(ce,Re){if(Re=="<")return $(lt(">"),Xe(Ot,">"),kt,Si);if(Re=="|"||ce=="."||Re=="&")return $(Ot);if(ce=="[")return $(Ot,ut("]"),Si);if(Re=="extends"||Re=="implements")return ve.marked="keyword",$(Ot);if(Re=="?")return $(Ot,ut(":"),Ot)}function Ei(ce,Re){if(Re=="<")return $(lt(">"),Xe(Ot,">"),kt,Si)}function qe(){return U(Ot,ze)}function ze(ce,Re){if(Re=="=")return $(Ot)}function mt(ce,Re){return Re=="enum"?(ve.marked="keyword",$(_t)):U(Ft,Yn,an,Or)}function Ft(ce,Re){if(h&&de(Re))return ve.marked="keyword",$(Ft);if(ce=="variable")return Ce(Re),$();if(ce=="spread")return $(Ft);if(ce=="[")return Rt(yr,"]");if(ce=="{")return Rt(fr,"}")}function fr(ce,Re){return ce=="variable"&&!ve.stream.match(/^\s*:/,!1)?(Ce(Re),$(an)):(ce=="variable"&&(ve.marked="property"),ce=="spread"?$(Ft):ce=="}"?U():ce=="["?$(Ht,ut("]"),ut(":"),fr):$(ut(":"),Ft,an))}function yr(){return U(Ft,an)}function an(ce,Re){if(Re=="=")return $(pr)}function Or(ce){if(ce==",")return $(mt)}function bn(ce,Re){if(ce=="keyword b"&&Re=="else")return $(lt("form","else"),Ut,kt)}function Pr(ce,Re){if(Re=="await")return $(Pr);if(ce=="(")return $(lt(")"),Yr,kt)}function Yr(ce){return ce=="var"?$(mt,Sn):ce=="variable"?$(Sn):U(Sn)}function Sn(ce,Re){return ce==")"?$():ce==";"?$(Sn):Re=="in"||Re=="of"?(ve.marked="keyword",$(Ht,Sn)):U(Ht,Sn)}function ii(ce,Re){if(Re=="*")return ve.marked="keyword",$(ii);if(ce=="variable")return Ce(Re),$(ii);if(ce=="(")return $(ne,lt(")"),Xe(xn,")"),kt,Cn,Ut,dt);if(h&&Re=="<")return $(lt(">"),Xe(qe,">"),kt,ii)}function Xn(ce,Re){if(Re=="*")return ve.marked="keyword",$(Xn);if(ce=="variable")return Ce(Re),$(Xn);if(ce=="(")return $(ne,lt(")"),Xe(xn,")"),kt,Cn,dt);if(h&&Re=="<")return $(lt(">"),Xe(qe,">"),kt,Xn)}function ha(ce,Re){if(ce=="keyword"||ce=="variable")return ve.marked="type",$(ha);if(Re=="<")return $(lt(">"),Xe(qe,">"),kt)}function xn(ce,Re){return Re=="@"&&$(Ht,xn),ce=="spread"?$(xn):h&&de(Re)?(ve.marked="keyword",$(xn)):h&&ce=="this"?$(Yn,an):U(Ft,Yn,an)}function pe(ce,Re){return ce=="variable"?Ee(ce,Re):ke(ce,Re)}function Ee(ce,Re){if(ce=="variable")return Ce(Re),$(ke)}function ke(ce,Re){if(Re=="<")return $(lt(">"),Xe(qe,">"),kt,ke);if(Re=="extends"||Re=="implements"||h&&ce==",")return Re=="implements"&&(ve.marked="keyword"),$(h?Ot:Ht,ke);if(ce=="{")return $(lt("}"),oe,kt)}function oe(ce,Re){if(ce=="async"||ce=="variable"&&(Re=="static"||Re=="get"||Re=="set"||h&&de(Re))&&ve.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return ve.marked="keyword",$(oe);if(ce=="variable"||ve.style=="keyword")return ve.marked="property",$(Fe,oe);if(ce=="number"||ce=="string")return $(Fe,oe);if(ce=="[")return $(Ht,Yn,ut("]"),Fe,oe);if(Re=="*")return ve.marked="keyword",$(oe);if(h&&ce=="(")return U(Xn,oe);if(ce==";"||ce==",")return $(oe);if(ce=="}")return $();if(Re=="@")return $(Ht,oe)}function Fe(ce,Re){if(Re=="!"||Re=="?")return $(Fe);if(ce==":")return $(Ot,an);if(Re=="=")return $(pr);var ct=ve.state.lexical.prev,jt=ct&&ct.info=="interface";return U(jt?Xn:ii)}function Pe(ce,Re){return Re=="*"?(ve.marked="keyword",$(Vt,ut(";"))):Re=="default"?(ve.marked="keyword",$(Ht,ut(";"))):ce=="{"?$(Xe(_e,"}"),Vt,ut(";")):U(Ut)}function _e(ce,Re){if(Re=="as")return ve.marked="keyword",$(ut("variable"));if(ce=="variable")return U(pr,_e)}function fe(ce){return ce=="string"?$():ce=="("?U(Ht):ce=="."?U(Br):U(Ie,nt,Vt)}function Ie(ce,Re){return ce=="{"?Rt(Ie,"}"):(ce=="variable"&&Ce(Re),Re=="*"&&(ve.marked="keyword"),$(zt))}function nt(ce){if(ce==",")return $(Ie,nt)}function zt(ce,Re){if(Re=="as")return ve.marked="keyword",$(Ie)}function Vt(ce,Re){if(Re=="from")return ve.marked="keyword",$(Ht)}function pt(ce){return ce=="]"?$():U(Xe(pr,"]"))}function _t(){return U(lt("form"),Ft,ut("{"),lt("}"),Xe(_r,"}"),kt,kt)}function _r(){return U(Ft,an)}function dr(ce,Re){return ce.lastType=="operator"||ce.lastType==","||T.test(Re.charAt(0))||/[,.]/.test(Re.charAt(0))}function Mt(ce,Re,ct){return Re.tokenize==G&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(Re.lastType)||Re.lastType=="quasi"&&/\{\s*$/.test(ce.string.slice(0,ce.pos-(ct||0)))}return{startState:function(ce){var Re={tokenize:G,lastType:"sof",cc:[],lexical:new ee((ce||0)-n,0,"block",!1),localVars:r.localVars,context:r.localVars&&new we(null,null,!1),indented:ce||0};return r.globalVars&&typeof r.globalVars=="object"&&(Re.globalVars=r.globalVars),Re},token:function(ce,Re){if(ce.sol()&&(Re.lexical.hasOwnProperty("align")||(Re.lexical.align=!1),Re.indented=ce.indentation(),j(ce,Re)),Re.tokenize!=V&&ce.eatSpace())return null;var ct=Re.tokenize(ce,Re);return L=="comment"?ct:(Re.lastType=L=="operator"&&(R=="++"||R=="--")?"incdec":L,me(Re,ct,L,R,ce))},indent:function(ce,Re){if(ce.tokenize==V||ce.tokenize==p)return t.Pass;if(ce.tokenize!=G)return 0;var ct=Re&&Re.charAt(0),jt=ce.lexical,it;if(!/^\s*else\b/.test(Re))for(var Qt=ce.cc.length-1;Qt>=0;--Qt){var rn=ce.cc[Qt];if(rn==kt)jt=jt.prev;else if(rn!=bn&&rn!=dt)break}for(;(jt.type=="stat"||jt.type=="form")&&(ct=="}"||(it=ce.cc[ce.cc.length-1])&&(it==Br||it==Rr)&&!/^[,\.=+\-*:?[\(]/.test(Re));)jt=jt.prev;i&&jt.type==")"&&jt.prev.type=="stat"&&(jt=jt.prev);var un=jt.type,En=ct==un;return un=="vardef"?jt.indented+(ce.lastType=="operator"||ce.lastType==","?jt.info.length+1:0):un=="form"&&ct=="{"?jt.indented:un=="form"?jt.indented+n:un=="stat"?jt.indented+(dr(ce,Re)?i||n:0):jt.info=="switch"&&!En&&r.doubleIndentSwitch!=!1?jt.indented+(/^(?:case|default)\b/.test(Re)?n:2*n):jt.align?jt.column+(En?0:1):jt.indented+(En?0:n)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:s?null:"/*",blockCommentEnd:s?null:"*/",blockCommentContinue:s?null:" * ",lineComment:s?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:s?"json":"javascript",jsonldMode:o,jsonMode:s,expressionAllowed:Mt,skipExpression:function(ce){me(ce,"atom","atom","true",new t.StringStream("",2,null))}}}),t.registerHelper("wordChars","javascript",/[\w$]/),t.defineMIME("text/javascript","javascript"),t.defineMIME("text/ecmascript","javascript"),t.defineMIME("application/javascript","javascript"),t.defineMIME("application/x-javascript","javascript"),t.defineMIME("application/ecmascript","javascript"),t.defineMIME("application/json",{name:"javascript",json:!0}),t.defineMIME("application/x-json",{name:"javascript",json:!0}),t.defineMIME("application/manifest+json",{name:"javascript",json:!0}),t.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),t.defineMIME("text/typescript",{name:"javascript",typescript:!0}),t.defineMIME("application/typescript",{name:"javascript",typescript:!0})})});var nO=J(($ve,Gve)=>{(function(t){typeof $ve=="object"&&typeof Gve=="object"?t(io(),Bx(),ZE(),Nx()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],t):t(CodeMirror)})(function(t){"use strict";var e={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};function r(y,w,T){var I=y.current(),P=I.search(w);return P>-1?y.backUp(I.length-P):I.match(/<\/?$/)&&(y.backUp(I.length),y.match(w,!1)||y.match(I)),T}var n={};function i(y){var w=n[y];return w||(n[y]=new RegExp("\\s+"+y+`\\s*=\\s*('|")?([^'"]+)('|")?\\s*`))}function o(y,w){var T=y.match(i(w));return T?/^\s*(.*?)\s*$/.exec(T[2])[1]:""}function s(y,w){return new RegExp((w?"^":"")+"</\\s*"+y+"\\s*>","i")}function u(y,w){for(var T in y)for(var I=w[T]||(w[T]=[]),P=y[T],L=P.length-1;L>=0;L--)I.unshift(P[L])}function h(y,w){for(var T=0;T<y.length;T++){var I=y[T];if(!I[0]||I[1].test(o(w,I[0])))return I[2]}}t.defineMode("htmlmixed",function(y,w){var T=t.getMode(y,{name:"xml",htmlMode:!0,multilineTagIndentFactor:w.multilineTagIndentFactor,multilineTagIndentPastTag:w.multilineTagIndentPastTag,allowMissingTagName:w.allowMissingTagName}),I={},P=w&&w.tags,L=w&&w.scriptTypes;if(u(e,I),P&&u(P,I),L)for(var R=L.length-1;R>=0;R--)I.script.unshift(["type",L[R].matches,L[R].mode]);function W(G,q){var V=T.token(G,q.htmlState),p=/\btag\b/.test(V),K;if(p&&!/[<>\s\/]/.test(G.current())&&(K=q.htmlState.tagName&&q.htmlState.tagName.toLowerCase())&&I.hasOwnProperty(K))q.inTag=K+" ";else if(q.inTag&&p&&/>$/.test(G.current())){var j=/^([\S]+) (.*)/.exec(q.inTag);q.inTag=null;var Q=G.current()==">"&&h(I[j[1]],j[2]),ee=t.getMode(y,Q),se=s(j[1],!0),me=s(j[1],!1);q.token=function(ve,U){return ve.match(se,!1)?(U.token=W,U.localState=U.localMode=null,null):r(ve,me,U.localMode.token(ve,U.localState))},q.localMode=ee,q.localState=t.startState(ee,T.indent(q.htmlState,"",""))}else q.inTag&&(q.inTag+=G.current(),G.eol()&&(q.inTag+=" "));return V}return{startState:function(){var G=t.startState(T);return{token:W,inTag:null,localMode:null,localState:null,htmlState:G}},copyState:function(G){var q;return G.localState&&(q=t.copyState(G.localMode,G.localState)),{token:G.token,inTag:G.inTag,localMode:G.localMode,localState:q,htmlState:t.copyState(T,G.htmlState)}},token:function(G,q){return q.token(G,q)},indent:function(G,q,V){return!G.localMode||/^\s*<\//.test(q)?T.indent(G.htmlState,q,V):G.localMode.indent?G.localMode.indent(G.localState,q,V):t.Pass},innerMode:function(G){return{state:G.localState||G.htmlState,mode:G.localMode||T}}}},"xml","javascript","css"),t.defineMIME("text/html","htmlmixed")})});var Yve=J((Kve,Zve)=>{(function(t){typeof Kve=="object"&&typeof Zve=="object"?t(io()):typeof define=="function"&&define.amd?define(["../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var e=0;e<t.modeInfo.length;e++){var r=t.modeInfo[e];r.mimes&&(r.mime=r.mimes[0])}t.findModeByMIME=function(n){n=n.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var o=t.modeInfo[i];if(o.mime==n)return o;if(o.mimes){for(var s=0;s<o.mimes.length;s++)if(o.mimes[s]==n)return o}}if(/\+xml$/.test(n))return t.findModeByMIME("application/xml");if(/\+json$/.test(n))return t.findModeByMIME("application/json")},t.findModeByExtension=function(n){n=n.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var o=t.modeInfo[i];if(o.ext){for(var s=0;s<o.ext.length;s++)if(o.ext[s]==n)return o}}},t.findModeByFileName=function(n){for(var i=0;i<t.modeInfo.length;i++){var o=t.modeInfo[i];if(o.file&&o.file.test(n))return o}var s=n.lastIndexOf("."),u=s>-1&&n.substring(s+1,n.length);if(u)return t.findModeByExtension(u)},t.findModeByName=function(n){n=n.toLowerCase();for(var i=0;i<t.modeInfo.length;i++){var o=t.modeInfo[i];if(o.name.toLowerCase()==n)return o;if(o.alias){for(var s=0;s<o.alias.length;s++)if(o.alias[s].toLowerCase()==n)return o}}}})});var iO=J((Xve,Jve)=>{(function(t){typeof Xve=="object"&&typeof Jve=="object"?t(io(),Bx(),Yve()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("markdown",function(e,r){var n=t.getMode(e,"text/html"),i=n.name=="null";function o(ye){if(t.findModeByName){var ne=t.findModeByName(ye);ne&&(ye=ne.mime||ne.mimes[0])}var st=t.getMode(e,ye);return st.name=="null"?null:st}r.highlightFormatting===void 0&&(r.highlightFormatting=!1),r.maxBlockquoteDepth===void 0&&(r.maxBlockquoteDepth=0),r.taskLists===void 0&&(r.taskLists=!1),r.strikethrough===void 0&&(r.strikethrough=!1),r.emoji===void 0&&(r.emoji=!1),r.fencedCodeBlockHighlighting===void 0&&(r.fencedCodeBlockHighlighting=!0),r.fencedCodeBlockDefaultMode===void 0&&(r.fencedCodeBlockDefaultMode="text/plain"),r.xml===void 0&&(r.xml=!0),r.tokenTypeOverrides===void 0&&(r.tokenTypeOverrides={});var s={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var u in s)s.hasOwnProperty(u)&&r.tokenTypeOverrides[u]&&(s[u]=r.tokenTypeOverrides[u]);var h=/^([*\-_])(?:\s*\1){2,}\s*$/,y=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,w=/^\[(x| )\](?=\s)/i,T=r.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,I=/^ {0,3}(?:\={1,}|-{2,})\s*$/,P=/^[^#!\[\]*_\\<>` "'(~:]+/,L=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,R=/^\s*\[[^\]]+?\]:.*$/,W=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,G="    ";function q(ye,ne,st){return ne.f=ne.inline=st,st(ye,ne)}function V(ye,ne,st){return ne.f=ne.block=st,st(ye,ne)}function p(ye){return!ye||!/\S/.test(ye.string)}function K(ye){if(ye.linkTitle=!1,ye.linkHref=!1,ye.linkText=!1,ye.em=!1,ye.strong=!1,ye.strikethrough=!1,ye.quote=0,ye.indentedCode=!1,ye.f==Q){var ne=i;if(!ne){var st=t.innerMode(n,ye.htmlState);ne=st.mode.name=="xml"&&st.state.tagStart===null&&!st.state.context&&st.state.tokenize.isInText}ne&&(ye.f=ve,ye.block=j,ye.htmlState=null)}return ye.trailingSpace=0,ye.trailingSpaceNewLine=!1,ye.prevLine=ye.thisLine,ye.thisLine={stream:null},null}function j(ye,ne){var st=ye.column()===ne.indentation,dt=p(ne.prevLine.stream),lt=ne.indentedCode,kt=ne.prevLine.hr,ut=ne.list!==!1,Ut=(ne.listStack[ne.listStack.length-1]||0)+3;ne.indentedCode=!1;var Wt=ne.indentation;if(ne.indentationDiff===null&&(ne.indentationDiff=ne.indentation,ut)){for(ne.list=null;Wt<ne.listStack[ne.listStack.length-1];)ne.listStack.pop(),ne.listStack.length?ne.indentation=ne.listStack[ne.listStack.length-1]:ne.list=!1;ne.list!==!1&&(ne.indentationDiff=Wt-ne.listStack[ne.listStack.length-1])}var Ht=!dt&&!kt&&!ne.prevLine.header&&(!ut||!lt)&&!ne.prevLine.fencedCodeEnd,pr=(ne.list===!1||kt||dt)&&ne.indentation<=Ut&&ye.match(h),zr=null;if(ne.indentationDiff>=4&&(lt||ne.prevLine.fencedCodeEnd||ne.prevLine.header||dt))return ye.skipToEnd(),ne.indentedCode=!0,s.code;if(ye.eatSpace())return null;if(st&&ne.indentation<=Ut&&(zr=ye.match(T))&&zr[1].length<=6)return ne.quote=0,ne.header=zr[1].length,ne.thisLine.header=!0,r.highlightFormatting&&(ne.formatting="header"),ne.f=ne.inline,se(ne);if(ne.indentation<=Ut&&ye.eat(">"))return ne.quote=st?1:ne.quote+1,r.highlightFormatting&&(ne.formatting="quote"),ye.eatSpace(),se(ne);if(!pr&&!ne.setext&&st&&ne.indentation<=Ut&&(zr=ye.match(y))){var Jt=zr[1]?"ol":"ul";return ne.indentation=Wt+ye.current().length,ne.list=!0,ne.quote=0,ne.listStack.push(ne.indentation),ne.em=!1,ne.strong=!1,ne.code=!1,ne.strikethrough=!1,r.taskLists&&ye.match(w,!1)&&(ne.taskList=!0),ne.f=ne.inline,r.highlightFormatting&&(ne.formatting=["list","list-"+Jt]),se(ne)}else{if(st&&ne.indentation<=Ut&&(zr=ye.match(L,!0)))return ne.quote=0,ne.fencedEndRE=new RegExp(zr[1]+"+ *$"),ne.localMode=r.fencedCodeBlockHighlighting&&o(zr[2]||r.fencedCodeBlockDefaultMode),ne.localMode&&(ne.localState=t.startState(ne.localMode)),ne.f=ne.block=ee,r.highlightFormatting&&(ne.formatting="code-block"),ne.code=-1,se(ne);if(ne.setext||(!Ht||!ut)&&!ne.quote&&ne.list===!1&&!ne.code&&!pr&&!R.test(ye.string)&&(zr=ye.lookAhead(1))&&(zr=zr.match(I)))return ne.setext?(ne.header=ne.setext,ne.setext=0,ye.skipToEnd(),r.highlightFormatting&&(ne.formatting="header")):(ne.header=zr[0].charAt(0)=="="?1:2,ne.setext=ne.header),ne.thisLine.header=!0,ne.f=ne.inline,se(ne);if(pr)return ye.skipToEnd(),ne.hr=!0,ne.thisLine.hr=!0,s.hr;if(ye.peek()==="[")return q(ye,ne,Se)}return q(ye,ne,ne.inline)}function Q(ye,ne){var st=n.token(ye,ne.htmlState);if(!i){var dt=t.innerMode(n,ne.htmlState);(dt.mode.name=="xml"&&dt.state.tagStart===null&&!dt.state.context&&dt.state.tokenize.isInText||ne.md_inside&&ye.current().indexOf(">")>-1)&&(ne.f=ve,ne.block=j,ne.htmlState=null)}return st}function ee(ye,ne){var st=ne.listStack[ne.listStack.length-1]||0,dt=ne.indentation<st,lt=st+3;if(ne.fencedEndRE&&ne.indentation<=lt&&(dt||ye.match(ne.fencedEndRE))){r.highlightFormatting&&(ne.formatting="code-block");var kt;return dt||(kt=se(ne)),ne.localMode=ne.localState=null,ne.block=j,ne.f=ve,ne.fencedEndRE=null,ne.code=0,ne.thisLine.fencedCodeEnd=!0,dt?V(ye,ne,ne.block):kt}else return ne.localMode?ne.localMode.token(ye,ne.localState):(ye.skipToEnd(),s.code)}function se(ye){var ne=[];if(ye.formatting){ne.push(s.formatting),typeof ye.formatting=="string"&&(ye.formatting=[ye.formatting]);for(var st=0;st<ye.formatting.length;st++)ne.push(s.formatting+"-"+ye.formatting[st]),ye.formatting[st]==="header"&&ne.push(s.formatting+"-"+ye.formatting[st]+"-"+ye.header),ye.formatting[st]==="quote"&&(!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=ye.quote?ne.push(s.formatting+"-"+ye.formatting[st]+"-"+ye.quote):ne.push("error"))}if(ye.taskOpen)return ne.push("meta"),ne.length?ne.join(" "):null;if(ye.taskClosed)return ne.push("property"),ne.length?ne.join(" "):null;if(ye.linkHref?ne.push(s.linkHref,"url"):(ye.strong&&ne.push(s.strong),ye.em&&ne.push(s.em),ye.strikethrough&&ne.push(s.strikethrough),ye.emoji&&ne.push(s.emoji),ye.linkText&&ne.push(s.linkText),ye.code&&ne.push(s.code),ye.image&&ne.push(s.image),ye.imageAltText&&ne.push(s.imageAltText,"link"),ye.imageMarker&&ne.push(s.imageMarker)),ye.header&&ne.push(s.header,s.header+"-"+ye.header),ye.quote&&(ne.push(s.quote),!r.maxBlockquoteDepth||r.maxBlockquoteDepth>=ye.quote?ne.push(s.quote+"-"+ye.quote):ne.push(s.quote+"-"+r.maxBlockquoteDepth)),ye.list!==!1){var dt=(ye.listStack.length-1)%3;dt?dt===1?ne.push(s.list2):ne.push(s.list3):ne.push(s.list1)}return ye.trailingSpaceNewLine?ne.push("trailing-space-new-line"):ye.trailingSpace&&ne.push("trailing-space-"+(ye.trailingSpace%2?"a":"b")),ne.length?ne.join(" "):null}function me(ye,ne){if(ye.match(P,!0))return se(ne)}function ve(ye,ne){var st=ne.text(ye,ne);if(typeof st<"u")return st;if(ne.list)return ne.list=null,se(ne);if(ne.taskList){var dt=ye.match(w,!0)[1]===" ";return dt?ne.taskOpen=!0:ne.taskClosed=!0,r.highlightFormatting&&(ne.formatting="task"),ne.taskList=!1,se(ne)}if(ne.taskOpen=!1,ne.taskClosed=!1,ne.header&&ye.match(/^#+$/,!0))return r.highlightFormatting&&(ne.formatting="header"),se(ne);var lt=ye.next();if(ne.linkTitle){ne.linkTitle=!1;var kt=lt;lt==="("&&(kt=")"),kt=(kt+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var ut="^\\s*(?:[^"+kt+"\\\\]+|\\\\\\\\|\\\\.)"+kt;if(ye.match(new RegExp(ut),!0))return s.linkHref}if(lt==="`"){var Ut=ne.formatting;r.highlightFormatting&&(ne.formatting="code"),ye.eatWhile("`");var Wt=ye.current().length;if(ne.code==0&&(!ne.quote||Wt==1))return ne.code=Wt,se(ne);if(Wt==ne.code){var Ht=se(ne);return ne.code=0,Ht}else return ne.formatting=Ut,se(ne)}else if(ne.code)return se(ne);if(lt==="\\"&&(ye.next(),r.highlightFormatting)){var pr=se(ne),zr=s.formatting+"-escape";return pr?pr+" "+zr:zr}if(lt==="!"&&ye.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return ne.imageMarker=!0,ne.image=!0,r.highlightFormatting&&(ne.formatting="image"),se(ne);if(lt==="["&&ne.imageMarker&&ye.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return ne.imageMarker=!1,ne.imageAltText=!0,r.highlightFormatting&&(ne.formatting="image"),se(ne);if(lt==="]"&&ne.imageAltText){r.highlightFormatting&&(ne.formatting="image");var pr=se(ne);return ne.imageAltText=!1,ne.image=!1,ne.inline=ne.f=$,pr}if(lt==="["&&!ne.image)return ne.linkText&&ye.match(/^.*?\]/)||(ne.linkText=!0,r.highlightFormatting&&(ne.formatting="link")),se(ne);if(lt==="]"&&ne.linkText){r.highlightFormatting&&(ne.formatting="link");var pr=se(ne);return ne.linkText=!1,ne.inline=ne.f=ye.match(/\(.*?\)| ?\[.*?\]/,!1)?$:ve,pr}if(lt==="<"&&ye.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){ne.f=ne.inline=U,r.highlightFormatting&&(ne.formatting="link");var pr=se(ne);return pr?pr+=" ":pr="",pr+s.linkInline}if(lt==="<"&&ye.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){ne.f=ne.inline=U,r.highlightFormatting&&(ne.formatting="link");var pr=se(ne);return pr?pr+=" ":pr="",pr+s.linkEmail}if(r.xml&&lt==="<"&&ye.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Jt=ye.string.indexOf(">",ye.pos);if(Jt!=-1){var Qr=ye.string.substring(ye.start,Jt);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(Qr)&&(ne.md_inside=!0)}return ye.backUp(1),ne.htmlState=t.startState(n),V(ye,ne,Q)}if(r.xml&&lt==="<"&&ye.match(/^\/\w*?>/))return ne.md_inside=!1,"tag";if(lt==="*"||lt==="_"){for(var Br=1,Rr=ye.pos==1?" ":ye.string.charAt(ye.pos-2);Br<3&&ye.eat(lt);)Br++;var Be=ye.peek()||" ",Ge=!/\s/.test(Be)&&(!W.test(Be)||/\s/.test(Rr)||W.test(Rr)),vt=!/\s/.test(Rr)&&(!W.test(Rr)||/\s/.test(Be)||W.test(Be)),Kt=null,rt=null;if(Br%2&&(!ne.em&&Ge&&(lt==="*"||!vt||W.test(Rr))?Kt=!0:ne.em==lt&&vt&&(lt==="*"||!Ge||W.test(Be))&&(Kt=!1)),Br>1&&(!ne.strong&&Ge&&(lt==="*"||!vt||W.test(Rr))?rt=!0:ne.strong==lt&&vt&&(lt==="*"||!Ge||W.test(Be))&&(rt=!1)),rt!=null||Kt!=null){r.highlightFormatting&&(ne.formatting=Kt==null?"strong":rt==null?"em":"strong em"),Kt===!0&&(ne.em=lt),rt===!0&&(ne.strong=lt);var Ht=se(ne);return Kt===!1&&(ne.em=!1),rt===!1&&(ne.strong=!1),Ht}}else if(lt===" "&&(ye.eat("*")||ye.eat("_"))){if(ye.peek()===" ")return se(ne);ye.backUp(1)}if(r.strikethrough){if(lt==="~"&&ye.eatWhile(lt)){if(ne.strikethrough){r.highlightFormatting&&(ne.formatting="strikethrough");var Ht=se(ne);return ne.strikethrough=!1,Ht}else if(ye.match(/^[^\s]/,!1))return ne.strikethrough=!0,r.highlightFormatting&&(ne.formatting="strikethrough"),se(ne)}else if(lt===" "&&ye.match("~~",!0)){if(ye.peek()===" ")return se(ne);ye.backUp(2)}}if(r.emoji&&lt===":"&&ye.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){ne.emoji=!0,r.highlightFormatting&&(ne.formatting="emoji");var Ct=se(ne);return ne.emoji=!1,Ct}return lt===" "&&(ye.match(/^ +$/,!1)?ne.trailingSpace++:ne.trailingSpace&&(ne.trailingSpaceNewLine=!0)),se(ne)}function U(ye,ne){var st=ye.next();if(st===">"){ne.f=ne.inline=ve,r.highlightFormatting&&(ne.formatting="link");var dt=se(ne);return dt?dt+=" ":dt="",dt+s.linkInline}return ye.match(/^[^>]+/,!0),s.linkInline}function $(ye,ne){if(ye.eatSpace())return null;var st=ye.next();return st==="("||st==="["?(ne.f=ne.inline=Ce(st==="("?")":"]"),r.highlightFormatting&&(ne.formatting="link-string"),ne.linkHref=!0,se(ne)):"error"}var he={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function Ce(ye){return function(ne,st){var dt=ne.next();if(dt===ye){st.f=st.inline=ve,r.highlightFormatting&&(st.formatting="link-string");var lt=se(st);return st.linkHref=!1,lt}return ne.match(he[ye]),st.linkHref=!0,se(st)}}function Se(ye,ne){return ye.match(/^([^\]\\]|\\.)*\]:/,!1)?(ne.f=de,ye.next(),r.highlightFormatting&&(ne.formatting="link"),ne.linkText=!0,se(ne)):q(ye,ne,ve)}function de(ye,ne){if(ye.match("]:",!0)){ne.f=ne.inline=we,r.highlightFormatting&&(ne.formatting="link");var st=se(ne);return ne.linkText=!1,st}return ye.match(/^([^\]\\]|\\.)+/,!0),s.linkText}function we(ye,ne){return ye.eatSpace()?null:(ye.match(/^[^\s]+/,!0),ye.peek()===void 0?ne.linkTitle=!0:ye.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),ne.f=ne.inline=ve,s.linkHref+" url")}var Ue={startState:function(){return{f:j,prevLine:{stream:null},thisLine:{stream:null},block:j,htmlState:null,indentation:0,inline:ve,text:me,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(ye){return{f:ye.f,prevLine:ye.prevLine,thisLine:ye.thisLine,block:ye.block,htmlState:ye.htmlState&&t.copyState(n,ye.htmlState),indentation:ye.indentation,localMode:ye.localMode,localState:ye.localMode?t.copyState(ye.localMode,ye.localState):null,inline:ye.inline,text:ye.text,formatting:!1,linkText:ye.linkText,linkTitle:ye.linkTitle,linkHref:ye.linkHref,code:ye.code,em:ye.em,strong:ye.strong,strikethrough:ye.strikethrough,emoji:ye.emoji,header:ye.header,setext:ye.setext,hr:ye.hr,taskList:ye.taskList,list:ye.list,listStack:ye.listStack.slice(0),quote:ye.quote,indentedCode:ye.indentedCode,trailingSpace:ye.trailingSpace,trailingSpaceNewLine:ye.trailingSpaceNewLine,md_inside:ye.md_inside,fencedEndRE:ye.fencedEndRE}},token:function(ye,ne){if(ne.formatting=!1,ye!=ne.thisLine.stream){if(ne.header=0,ne.hr=!1,ye.match(/^\s*$/,!0))return K(ne),null;if(ne.prevLine=ne.thisLine,ne.thisLine={stream:ye},ne.taskList=!1,ne.trailingSpace=0,ne.trailingSpaceNewLine=!1,!ne.localState&&(ne.f=ne.block,ne.f!=Q)){var st=ye.match(/^\s*/,!0)[0].replace(/\t/g,G).length;if(ne.indentation=st,ne.indentationDiff=null,st>0)return null}}return ne.f(ye,ne)},innerMode:function(ye){return ye.block==Q?{state:ye.htmlState,mode:n}:ye.localState?{state:ye.localState,mode:ye.localMode}:{state:ye,mode:Ue}},indent:function(ye,ne,st){return ye.block==Q&&n.indent?n.indent(ye.htmlState,ne,st):ye.localState&&ye.localMode.indent?ye.localMode.indent(ye.localState,ne,st):t.Pass},blankLine:K,getType:se,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return Ue},"xml"),t.defineMIME("text/markdown","markdown"),t.defineMIME("text/x-markdown","markdown")})});var tye=J((Qve,eye)=>{(function(t){typeof Qve=="object"&&typeof eye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("nginx",function(e){function r(P){for(var L={},R=P.split(" "),W=0;W<R.length;++W)L[R[W]]=!0;return L}var n=r("break return rewrite set accept_mutex accept_mutex_delay access_log add_after_body add_before_body add_header addition_types aio alias allow ancient_browser ancient_browser_value auth_basic auth_basic_user_file auth_http auth_http_header auth_http_timeout autoindex autoindex_exact_size autoindex_localtime charset charset_types client_body_buffer_size client_body_in_file_only client_body_in_single_buffer client_body_temp_path client_body_timeout client_header_buffer_size client_header_timeout client_max_body_size connection_pool_size create_full_put_path daemon dav_access dav_methods debug_connection debug_points default_type degradation degrade deny devpoll_changes devpoll_events directio directio_alignment empty_gif env epoll_events error_log eventport_events expires fastcgi_bind fastcgi_buffer_size fastcgi_buffers fastcgi_busy_buffers_size fastcgi_cache fastcgi_cache_key fastcgi_cache_methods fastcgi_cache_min_uses fastcgi_cache_path fastcgi_cache_use_stale fastcgi_cache_valid fastcgi_catch_stderr fastcgi_connect_timeout fastcgi_hide_header fastcgi_ignore_client_abort fastcgi_ignore_headers fastcgi_index fastcgi_intercept_errors fastcgi_max_temp_file_size fastcgi_next_upstream fastcgi_param fastcgi_pass_header fastcgi_pass_request_body fastcgi_pass_request_headers fastcgi_read_timeout fastcgi_send_lowat fastcgi_send_timeout fastcgi_split_path_info fastcgi_store fastcgi_store_access fastcgi_temp_file_write_size fastcgi_temp_path fastcgi_upstream_fail_timeout fastcgi_upstream_max_fails flv geoip_city geoip_country google_perftools_profiles gzip gzip_buffers gzip_comp_level gzip_disable gzip_hash gzip_http_version gzip_min_length gzip_no_buffer gzip_proxied gzip_static gzip_types gzip_vary gzip_window if_modified_since ignore_invalid_headers image_filter image_filter_buffer image_filter_jpeg_quality image_filter_transparency imap_auth imap_capabilities imap_client_buffer index ip_hash keepalive_requests keepalive_timeout kqueue_changes kqueue_events large_client_header_buffers limit_conn limit_conn_log_level limit_rate limit_rate_after limit_req limit_req_log_level limit_req_zone limit_zone lingering_time lingering_timeout lock_file log_format log_not_found log_subrequest map_hash_bucket_size map_hash_max_size master_process memcached_bind memcached_buffer_size memcached_connect_timeout memcached_next_upstream memcached_read_timeout memcached_send_timeout memcached_upstream_fail_timeout memcached_upstream_max_fails merge_slashes min_delete_depth modern_browser modern_browser_value msie_padding msie_refresh multi_accept open_file_cache open_file_cache_errors open_file_cache_events open_file_cache_min_uses open_file_cache_valid open_log_file_cache output_buffers override_charset perl perl_modules perl_require perl_set pid pop3_auth pop3_capabilities port_in_redirect postpone_gzipping postpone_output protocol proxy proxy_bind proxy_buffer proxy_buffer_size proxy_buffering proxy_buffers proxy_busy_buffers_size proxy_cache proxy_cache_key proxy_cache_methods proxy_cache_min_uses proxy_cache_path proxy_cache_use_stale proxy_cache_valid proxy_connect_timeout proxy_headers_hash_bucket_size proxy_headers_hash_max_size proxy_hide_header proxy_ignore_client_abort proxy_ignore_headers proxy_intercept_errors proxy_max_temp_file_size proxy_method proxy_next_upstream proxy_pass_error_message proxy_pass_header proxy_pass_request_body proxy_pass_request_headers proxy_read_timeout proxy_redirect proxy_send_lowat proxy_send_timeout proxy_set_body proxy_set_header proxy_ssl_session_reuse proxy_store proxy_store_access proxy_temp_file_write_size proxy_temp_path proxy_timeout proxy_upstream_fail_timeout proxy_upstream_max_fails random_index read_ahead real_ip_header recursive_error_pages request_pool_size reset_timedout_connection resolver resolver_timeout rewrite_log rtsig_overflow_events rtsig_overflow_test rtsig_overflow_threshold rtsig_signo satisfy secure_link_secret send_lowat send_timeout sendfile sendfile_max_chunk server_name_in_redirect server_names_hash_bucket_size server_names_hash_max_size server_tokens set_real_ip_from smtp_auth smtp_capabilities smtp_client_buffer smtp_greeting_delay so_keepalive source_charset ssi ssi_ignore_recycled_buffers ssi_min_file_chunk ssi_silent_errors ssi_types ssi_value_length ssl ssl_certificate ssl_certificate_key ssl_ciphers ssl_client_certificate ssl_crl ssl_dhparam ssl_engine ssl_prefer_server_ciphers ssl_protocols ssl_session_cache ssl_session_timeout ssl_verify_client ssl_verify_depth starttls stub_status sub_filter sub_filter_once sub_filter_types tcp_nodelay tcp_nopush thread_stack_size timeout timer_resolution types_hash_bucket_size types_hash_max_size underscores_in_headers uninitialized_variable_warn use user userid userid_domain userid_expires userid_mark userid_name userid_p3p userid_path userid_service valid_referers variables_hash_bucket_size variables_hash_max_size worker_connections worker_cpu_affinity worker_priority worker_processes worker_rlimit_core worker_rlimit_nofile worker_rlimit_sigpending worker_threads working_directory xclient xml_entities xslt_stylesheet xslt_typesdrew@li229-23"),i=r("http mail events server types location upstream charset_map limit_except if geo map"),o=r("include root server server_name listen internal proxy_pass memcached_pass fastcgi_pass try_files"),s=e.indentUnit,u;function h(P,L){return u=L,P}function y(P,L){P.eatWhile(/[\w\$_]/);var R=P.current();if(n.propertyIsEnumerable(R))return"keyword";if(i.propertyIsEnumerable(R))return"variable-2";if(o.propertyIsEnumerable(R))return"string-2";var W=P.next();if(W=="@")return P.eatWhile(/[\w\\\-]/),h("meta",P.current());if(W=="/"&&P.eat("*"))return L.tokenize=w,w(P,L);if(W=="<"&&P.eat("!"))return L.tokenize=T,T(P,L);if(W=="=")h(null,"compare");else return(W=="~"||W=="|")&&P.eat("=")?h(null,"compare"):W=='"'||W=="'"?(L.tokenize=I(W),L.tokenize(P,L)):W=="#"?(P.skipToEnd(),h("comment","comment")):W=="!"?(P.match(/^\s*\w*/),h("keyword","important")):/\d/.test(W)?(P.eatWhile(/[\w.%]/),h("number","unit")):/[,.+>*\/]/.test(W)?h(null,"select-op"):/[;{}:\[\]]/.test(W)?h(null,W):(P.eatWhile(/[\w\\\-]/),h("variable","variable"))}function w(P,L){for(var R=!1,W;(W=P.next())!=null;){if(R&&W=="/"){L.tokenize=y;break}R=W=="*"}return h("comment","comment")}function T(P,L){for(var R=0,W;(W=P.next())!=null;){if(R>=2&&W==">"){L.tokenize=y;break}R=W=="-"?R+1:0}return h("comment","comment")}function I(P){return function(L,R){for(var W=!1,G;(G=L.next())!=null&&!(G==P&&!W);)W=!W&&G=="\\";return W||(R.tokenize=y),h("string","string")}}return{startState:function(P){return{tokenize:y,baseIndent:P||0,stack:[]}},token:function(P,L){if(P.eatSpace())return null;u=null;var R=L.tokenize(P,L),W=L.stack[L.stack.length-1];return u=="hash"&&W=="rule"?R="atom":R=="variable"&&(W=="rule"?R="number":(!W||W=="@media{")&&(R="tag")),W=="rule"&&/^[\{\};]$/.test(u)&&L.stack.pop(),u=="{"?W=="@media"?L.stack[L.stack.length-1]="@media{":L.stack.push("{"):u=="}"?L.stack.pop():u=="@media"?L.stack.push("@media"):W=="{"&&u!="comment"&&L.stack.push("rule"),R},indent:function(P,L){var R=P.stack.length;return/^\}/.test(L)&&(R-=P.stack[P.stack.length-1]=="rule"?2:1),P.baseIndent+R*s},electricChars:"}"}}),t.defineMIME("text/x-nginx-conf","nginx")})});var iye=J((rye,nye)=>{(function(t){typeof rye=="object"&&typeof nye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";function e(Se,de,we,Ue,ye,ne){this.indented=Se,this.column=de,this.type=we,this.info=Ue,this.align=ye,this.prev=ne}function r(Se,de,we,Ue){var ye=Se.indented;return Se.context&&Se.context.type=="statement"&&we!="statement"&&(ye=Se.context.indented),Se.context=new e(ye,de,we,Ue,null,Se.context)}function n(Se){var de=Se.context.type;return(de==")"||de=="]"||de=="}")&&(Se.indented=Se.context.indented),Se.context=Se.context.prev}function i(Se,de,we){if(de.prevToken=="variable"||de.prevToken=="type"||/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(Se.string.slice(0,we))||de.typeAtEndOfLine&&Se.column()==Se.indentation())return!0}function o(Se){for(;;){if(!Se||Se.type=="top")return!0;if(Se.type=="}"&&Se.prev.info!="namespace")return!1;Se=Se.prev}}t.defineMode("clike",function(Se,de){var we=Se.indentUnit,Ue=de.statementIndentUnit||we,ye=de.dontAlignCalls,ne=de.keywords||{},st=de.types||{},dt=de.builtin||{},lt=de.blockKeywords||{},kt=de.defKeywords||{},ut=de.atoms||{},Ut=de.hooks||{},Wt=de.multiLineStrings,Ht=de.indentStatements!==!1,pr=de.indentSwitch!==!1,zr=de.namespaceSeparator,Jt=de.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,Qr=de.numberStart||/[\d\.]/,Br=de.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,Rr=de.isOperatorChar||/[+\-*&%=<>!?|\/]/,Be=de.isIdentifierChar||/[\w\$_\xa1-\uffff]/,Ge=de.isReservedIdentifier||!1,vt,Kt;function rt(er,ir){var sr=er.next();if(Ut[sr]){var He=Ut[sr](er,ir);if(He!==!1)return He}if(sr=='"'||sr=="'")return ir.tokenize=Ct(sr),ir.tokenize(er,ir);if(Qr.test(sr)){if(er.backUp(1),er.match(Br))return"number";er.next()}if(Jt.test(sr))return vt=sr,null;if(sr=="/"){if(er.eat("*"))return ir.tokenize=Tt,Tt(er,ir);if(er.eat("/"))return er.skipToEnd(),"comment"}if(Rr.test(sr)){for(;!er.match(/^\/[\/*]/,!1)&&er.eat(Rr););return"operator"}if(er.eatWhile(Be),zr)for(;er.match(zr);)er.eatWhile(Be);var Xe=er.current();return u(ne,Xe)?(u(lt,Xe)&&(vt="newstatement"),u(kt,Xe)&&(Kt=!0),"keyword"):u(st,Xe)?"type":u(dt,Xe)||Ge&&Ge(Xe)?(u(lt,Xe)&&(vt="newstatement"),"builtin"):u(ut,Xe)?"atom":"variable"}function Ct(er){return function(ir,sr){for(var He=!1,Xe,Rt=!1;(Xe=ir.next())!=null;){if(Xe==er&&!He){Rt=!0;break}He=!He&&Xe=="\\"}return(Rt||!(He||Wt))&&(sr.tokenize=null),"string"}}function Tt(er,ir){for(var sr=!1,He;He=er.next();){if(He=="/"&&sr){ir.tokenize=null;break}sr=He=="*"}return"comment"}function ar(er,ir){de.typeFirstDefinitions&&er.eol()&&o(ir.context)&&(ir.typeAtEndOfLine=i(er,ir,er.pos))}return{startState:function(er){return{tokenize:null,context:new e((er||0)-we,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(er,ir){var sr=ir.context;if(er.sol()&&(sr.align==null&&(sr.align=!1),ir.indented=er.indentation(),ir.startOfLine=!0),er.eatSpace())return ar(er,ir),null;vt=Kt=null;var He=(ir.tokenize||rt)(er,ir);if(He=="comment"||He=="meta")return He;if(sr.align==null&&(sr.align=!0),vt==";"||vt==":"||vt==","&&er.match(/^\s*(?:\/\/.*)?$/,!1))for(;ir.context.type=="statement";)n(ir);else if(vt=="{")r(ir,er.column(),"}");else if(vt=="[")r(ir,er.column(),"]");else if(vt=="(")r(ir,er.column(),")");else if(vt=="}"){for(;sr.type=="statement";)sr=n(ir);for(sr.type=="}"&&(sr=n(ir));sr.type=="statement";)sr=n(ir)}else vt==sr.type?n(ir):Ht&&((sr.type=="}"||sr.type=="top")&&vt!=";"||sr.type=="statement"&&vt=="newstatement")&&r(ir,er.column(),"statement",er.current());if(He=="variable"&&(ir.prevToken=="def"||de.typeFirstDefinitions&&i(er,ir,er.start)&&o(ir.context)&&er.match(/^\s*\(/,!1))&&(He="def"),Ut.token){var Xe=Ut.token(er,ir,He);Xe!==void 0&&(He=Xe)}return He=="def"&&de.styleDefs===!1&&(He="variable"),ir.startOfLine=!1,ir.prevToken=Kt?"def":He||vt,ar(er,ir),He},indent:function(er,ir){if(er.tokenize!=rt&&er.tokenize!=null||er.typeAtEndOfLine&&o(er.context))return t.Pass;var sr=er.context,He=ir&&ir.charAt(0),Xe=He==sr.type;if(sr.type=="statement"&&He=="}"&&(sr=sr.prev),de.dontIndentStatements)for(;sr.type=="statement"&&de.dontIndentStatements.test(sr.info);)sr=sr.prev;if(Ut.indent){var Rt=Ut.indent(er,sr,ir,we);if(typeof Rt=="number")return Rt}var xr=sr.prev&&sr.prev.info=="switch";if(de.allmanIndentation&&/[{(]/.test(He)){for(;sr.type!="top"&&sr.type!="}";)sr=sr.prev;return sr.indented}return sr.type=="statement"?sr.indented+(He=="{"?0:Ue):sr.align&&(!ye||sr.type!=")")?sr.column+(Xe?0:1):sr.type==")"&&!Xe?sr.indented+Ue:sr.indented+(Xe?0:we)+(!Xe&&xr&&!/^(?:case|default)\b/.test(ir)?we:0)},electricInput:pr?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"brace"}});function s(Se){for(var de={},we=Se.split(" "),Ue=0;Ue<we.length;++Ue)de[we[Ue]]=!0;return de}function u(Se,de){return typeof Se=="function"?Se(de):Se.propertyIsEnumerable(de)}var h="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile inline restrict asm fortran",y="alignas alignof and and_eq audit axiom bitand bitor catch class compl concept constexpr const_cast decltype delete dynamic_cast explicit export final friend import module mutable namespace new noexcept not not_eq operator or or_eq override private protected public reinterpret_cast requires static_assert static_cast template this thread_local throw try typeid typename using virtual xor xor_eq",w="bycopy byref in inout oneway out self super atomic nonatomic retain copy readwrite readonly strong weak assign typeof nullable nonnull null_resettable _cmd @interface @implementation @end @protocol @encode @property @synthesize @dynamic @class @public @package @private @protected @required @optional @try @catch @finally @import @selector @encode @defs @synchronized @autoreleasepool @compatibility_alias @available",T="FOUNDATION_EXPORT FOUNDATION_EXTERN NS_INLINE NS_FORMAT_FUNCTION  NS_RETURNS_RETAINEDNS_ERROR_ENUM NS_RETURNS_NOT_RETAINED NS_RETURNS_INNER_POINTER NS_DESIGNATED_INITIALIZER NS_ENUM NS_OPTIONS NS_REQUIRES_NIL_TERMINATION NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_END NS_SWIFT_NAME NS_REFINED_FOR_SWIFT",I=s("int long char short double float unsigned signed void bool"),P=s("SEL instancetype id Class Protocol BOOL");function L(Se){return u(I,Se)||/.+_t$/.test(Se)}function R(Se){return L(Se)||u(P,Se)}var W="case do else for if switch while struct enum union",G="struct enum union";function q(Se,de){if(!de.startOfLine)return!1;for(var we,Ue=null;we=Se.peek();){if(we=="\\"&&Se.match(/^.$/)){Ue=q;break}else if(we=="/"&&Se.match(/^\/[\/\*]/,!1))break;Se.next()}return de.tokenize=Ue,"meta"}function V(Se,de){return de.prevToken=="type"?"type":!1}function p(Se){return!Se||Se.length<2||Se[0]!="_"?!1:Se[1]=="_"||Se[1]!==Se[1].toLowerCase()}function K(Se){return Se.eatWhile(/[\w\.']/),"number"}function j(Se,de){if(Se.backUp(1),Se.match(/^(?:R|u8R|uR|UR|LR)/)){var we=Se.match(/^"([^\s\\()]{0,16})\(/);return we?(de.cpp11RawStringDelim=we[1],de.tokenize=se,se(Se,de)):!1}return Se.match(/^(?:u8|u|U|L)/)?Se.match(/^["']/,!1)?"string":!1:(Se.next(),!1)}function Q(Se){var de=/(\w+)::~?(\w+)$/.exec(Se);return de&&de[1]==de[2]}function ee(Se,de){for(var we;(we=Se.next())!=null;)if(we=='"'&&!Se.eat('"')){de.tokenize=null;break}return"string"}function se(Se,de){var we=de.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&"),Ue=Se.match(new RegExp(".*?\\)"+we+'"'));return Ue?de.tokenize=null:Se.skipToEnd(),"string"}function me(Se,de){typeof Se=="string"&&(Se=[Se]);var we=[];function Ue(ne){if(ne)for(var st in ne)ne.hasOwnProperty(st)&&we.push(st)}Ue(de.keywords),Ue(de.types),Ue(de.builtin),Ue(de.atoms),we.length&&(de.helperType=Se[0],t.registerHelper("hintWords",Se[0],we));for(var ye=0;ye<Se.length;++ye)t.defineMIME(Se[ye],de)}me(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:s(h),types:L,blockKeywords:s(W),defKeywords:s(G),typeFirstDefinitions:!0,atoms:s("NULL true false"),isReservedIdentifier:p,hooks:{"#":q,"*":V},modeProps:{fold:["brace","include"]}}),me(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:s(h+" "+y),types:L,blockKeywords:s(W+" class try catch"),defKeywords:s(G+" class namespace"),typeFirstDefinitions:!0,atoms:s("true false NULL nullptr"),dontIndentStatements:/^template$/,isIdentifierChar:/[\w\$_~\xa1-\uffff]/,isReservedIdentifier:p,hooks:{"#":q,"*":V,u:j,U:j,L:j,R:j,0:K,1:K,2:K,3:K,4:K,5:K,6:K,7:K,8:K,9:K,token:function(Se,de,we){if(we=="variable"&&Se.peek()=="("&&(de.prevToken==";"||de.prevToken==null||de.prevToken=="}")&&Q(Se.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),me("text/x-java",{name:"clike",keywords:s("abstract assert break case catch class const continue default do else enum extends final finally for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while @interface"),types:s("var byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:s("catch class do else finally for if switch try while"),defKeywords:s("class interface enum @interface"),typeFirstDefinitions:!0,atoms:s("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(Se){return Se.match("interface",!1)?!1:(Se.eatWhile(/[\w\$_]/),"meta")},'"':function(Se,de){return Se.match(/""$/)?(de.tokenize=ve,de.tokenize(Se,de)):!1}},modeProps:{fold:["brace","import"]}}),me("text/x-csharp",{name:"clike",keywords:s("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in init interface internal is lock namespace new operator out override params private protected public readonly record ref required return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:s("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:s("catch class do else finally for foreach if struct switch try while"),defKeywords:s("class interface namespace record struct var"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"@":function(Se,de){return Se.eat('"')?(de.tokenize=ee,ee(Se,de)):(Se.eatWhile(/[\w\$_]/),"meta")}}});function ve(Se,de){for(var we=!1;!Se.eol();){if(!we&&Se.match('"""')){de.tokenize=null;break}we=Se.next()=="\\"&&!we}return"string"}function U(Se){return function(de,we){for(var Ue;Ue=de.next();)if(Ue=="*"&&de.eat("/"))if(Se==1){we.tokenize=null;break}else return we.tokenize=U(Se-1),we.tokenize(de,we);else if(Ue=="/"&&de.eat("*"))return we.tokenize=U(Se+1),we.tokenize(de,we);return"comment"}}me("text/x-scala",{name:"clike",keywords:s("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble"),types:s("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:s("catch class enum do else finally for forSome if match switch try while"),defKeywords:s("class enum def object package trait type val var"),atoms:s("true false null"),indentStatements:!1,indentSwitch:!1,isOperatorChar:/[+\-*&%=<>!?|\/#:@]/,hooks:{"@":function(Se){return Se.eatWhile(/[\w\$_]/),"meta"},'"':function(Se,de){return Se.match('""')?(de.tokenize=ve,de.tokenize(Se,de)):!1},"'":function(Se){return Se.match(/^(\\[^'\s]+|[^\\'])'/)?"string-2":(Se.eatWhile(/[\w\$_\xa1-\uffff]/),"atom")},"=":function(Se,de){var we=de.context;return we.type=="}"&&we.align&&Se.eat(">")?(de.context=new e(we.indented,we.column,we.type,we.info,null,we.prev),"operator"):!1},"/":function(Se,de){return Se.eat("*")?(de.tokenize=U(1),de.tokenize(Se,de)):!1}},modeProps:{closeBrackets:{pairs:'()[]{}""',triples:'"'}}});function $(Se){return function(de,we){for(var Ue=!1,ye,ne=!1;!de.eol();){if(!Se&&!Ue&&de.match('"')){ne=!0;break}if(Se&&de.match('"""')){ne=!0;break}ye=de.next(),!Ue&&ye=="$"&&de.match("{")&&de.skipTo("}"),Ue=!Ue&&ye=="\\"&&!Se}return(ne||!Se)&&(we.tokenize=null),"string"}}me("text/x-kotlin",{name:"clike",keywords:s("package as typealias class interface this super val operator var fun for is in This throw return annotation break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix suspend actual expect setparam value"),types:s("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void Annotation Any BooleanArray ByteArray Char CharArray DeprecationLevel DoubleArray Enum FloatArray Function Int IntArray Lazy LazyThreadSafetyMode LongArray Nothing ShortArray Unit"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+(\.\d+)?|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,blockKeywords:s("catch class do else finally for if where try while enum"),defKeywords:s("class val var object interface fun"),atoms:s("true false null this"),hooks:{"@":function(Se){return Se.eatWhile(/[\w\$_]/),"meta"},"*":function(Se,de){return de.prevToken=="."?"variable":"operator"},'"':function(Se,de){return de.tokenize=$(Se.match('""')),de.tokenize(Se,de)},"/":function(Se,de){return Se.eat("*")?(de.tokenize=U(1),de.tokenize(Se,de)):!1},indent:function(Se,de,we,Ue){var ye=we&&we.charAt(0);if((Se.prevToken=="}"||Se.prevToken==")")&&we=="")return Se.indented;if(Se.prevToken=="operator"&&we!="}"&&Se.context.type!="}"||Se.prevToken=="variable"&&ye=="."||(Se.prevToken=="}"||Se.prevToken==")")&&ye==".")return Ue*2+de.indented;if(de.align&&de.type=="}")return de.indented+(Se.context.type==(we||"").charAt(0)?0:Ue)}},modeProps:{closeBrackets:{triples:'"'}}}),me(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:s("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:s("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:s("for while do if else struct"),builtin:s("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:s("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TextureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":q},modeProps:{fold:["brace","include"]}}),me("text/x-nesc",{name:"clike",keywords:s(h+" as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:L,blockKeywords:s(W),atoms:s("null true false"),hooks:{"#":q},modeProps:{fold:["brace","include"]}}),me("text/x-objectivec",{name:"clike",keywords:s(h+" "+w),types:R,builtin:s(T),blockKeywords:s(W+" @synthesize @try @catch @finally @autoreleasepool @synchronized"),defKeywords:s(G+" @interface @implementation @protocol @class"),dontIndentStatements:/^@.*$/,typeFirstDefinitions:!0,atoms:s("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:p,hooks:{"#":q,"*":V},modeProps:{fold:["brace","include"]}}),me("text/x-objectivec++",{name:"clike",keywords:s(h+" "+w+" "+y),types:R,builtin:s(T),blockKeywords:s(W+" @synthesize @try @catch @finally @autoreleasepool @synchronized class try catch"),defKeywords:s(G+" @interface @implementation @protocol @class class namespace"),dontIndentStatements:/^@.*$|^template$/,typeFirstDefinitions:!0,atoms:s("YES NO NULL Nil nil true false nullptr"),isReservedIdentifier:p,hooks:{"#":q,"*":V,u:j,U:j,L:j,R:j,0:K,1:K,2:K,3:K,4:K,5:K,6:K,7:K,8:K,9:K,token:function(Se,de,we){if(we=="variable"&&Se.peek()=="("&&(de.prevToken==";"||de.prevToken==null||de.prevToken=="}")&&Q(Se.current()))return"def"}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),me("text/x-squirrel",{name:"clike",keywords:s("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:L,blockKeywords:s("case catch class else for foreach if switch try while"),defKeywords:s("function local class"),typeFirstDefinitions:!0,atoms:s("true false null"),hooks:{"#":q},modeProps:{fold:["brace","include"]}});var he=null;function Ce(Se){return function(de,we){for(var Ue=!1,ye,ne=!1;!de.eol();){if(!Ue&&de.match('"')&&(Se=="single"||de.match('""'))){ne=!0;break}if(!Ue&&de.match("``")){he=Ce(Se),ne=!0;break}ye=de.next(),Ue=Se=="single"&&!Ue&&ye=="\\"}return ne&&(we.tokenize=null),"string"}}me("text/x-ceylon",{name:"clike",keywords:s("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(Se){var de=Se.charAt(0);return de===de.toUpperCase()&&de!==de.toLowerCase()},blockKeywords:s("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:s("class dynamic function interface module object package value"),builtin:s("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:s("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(Se){return Se.eatWhile(/[\w\$_]/),"meta"},'"':function(Se,de){return de.tokenize=Ce(Se.match('""')?"triple":"single"),de.tokenize(Se,de)},"`":function(Se,de){return!he||!Se.match("`")?!1:(de.tokenize=he,he=null,de.tokenize(Se,de))},"'":function(Se){return Se.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(Se,de,we){if((we=="variable"||we=="type")&&de.prevToken==".")return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})})});var sye=J((oye,aye)=>{(function(t){typeof oye=="object"&&typeof aye=="object"?t(io(),nO(),iye()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],t):t(CodeMirror)})(function(t){"use strict";function e(y){for(var w={},T=y.split(" "),I=0;I<T.length;++I)w[T[I]]=!0;return w}function r(y,w,T){return y.length==0?n(w):function(I,P){for(var L=y[0],R=0;R<L.length;R++)if(I.match(L[R][0]))return P.tokenize=r(y.slice(1),w),L[R][1];return P.tokenize=n(w,T),"string"}}function n(y,w){return function(T,I){return i(T,I,y,w)}}function i(y,w,T,I){if(I!==!1&&y.match("${",!1)||y.match("{$",!1))return w.tokenize=null,"string";if(I!==!1&&y.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return y.match("[",!1)&&(w.tokenize=r([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],T,I)),y.match(/^->\w/,!1)&&(w.tokenize=r([[["->",null]],[[/[\w]+/,"variable"]]],T,I)),"variable-2";for(var P=!1;!y.eol()&&(P||I===!1||!y.match("{$",!1)&&!y.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!P&&y.match(T)){w.tokenize=null,w.tokStack.pop(),w.tokStack.pop();break}P=y.next()=="\\"&&!P}return"string"}var o="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile enum extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally readonly match",s="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",u="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage memory_get_peak_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists array_intersect_key array_combine array_column pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";t.registerHelper("hintWords","php",[o,s,u].join(" ").split(" ")),t.registerHelper("wordChars","php",/[\w$]/);var h={name:"clike",helperType:"php",keywords:e(o),blockKeywords:e("catch do else elseif for foreach if switch try while finally"),defKeywords:e("class enum function interface namespace trait"),atoms:e(s),builtin:e(u),multiLineStrings:!0,hooks:{$:function(y){return y.eatWhile(/[\w\$_]/),"variable-2"},"<":function(y,w){var T;if(T=y.match(/^<<\s*/)){var I=y.eat(/['"]/);y.eatWhile(/[\w\.]/);var P=y.current().slice(T[0].length+(I?2:1));if(I&&y.eat(I),P)return(w.tokStack||(w.tokStack=[])).push(P,0),w.tokenize=n(P,I!="'"),"string"}return!1},"#":function(y){for(;!y.eol()&&!y.match("?>",!1);)y.next();return"comment"},"/":function(y){if(y.eat("/")){for(;!y.eol()&&!y.match("?>",!1);)y.next();return"comment"}return!1},'"':function(y,w){return(w.tokStack||(w.tokStack=[])).push('"',0),w.tokenize=n('"'),"string"},"{":function(y,w){return w.tokStack&&w.tokStack.length&&w.tokStack[w.tokStack.length-1]++,!1},"}":function(y,w){return w.tokStack&&w.tokStack.length>0&&!--w.tokStack[w.tokStack.length-1]&&(w.tokenize=n(w.tokStack[w.tokStack.length-2])),!1}}};t.defineMode("php",function(y,w){var T=t.getMode(y,w&&w.htmlMode||"text/html"),I=t.getMode(y,h);function P(L,R){var W=R.curMode==I;if(L.sol()&&R.pending&&R.pending!='"'&&R.pending!="'"&&(R.pending=null),W)return W&&R.php.tokenize==null&&L.match("?>")?(R.curMode=T,R.curState=R.html,R.php.context.prev||(R.php=null),"meta"):I.token(L,R.curState);if(L.match(/^<\?\w*/))return R.curMode=I,R.php||(R.php=t.startState(I,T.indent(R.html,"",""))),R.curState=R.php,"meta";if(R.pending=='"'||R.pending=="'"){for(;!L.eol()&&L.next()!=R.pending;);var G="string"}else if(R.pending&&L.pos<R.pending.end){L.pos=R.pending.end;var G=R.pending.style}else var G=T.token(L,R.curState);R.pending&&(R.pending=null);var q=L.current(),V=q.search(/<\?/),p;return V!=-1&&(G=="string"&&(p=q.match(/[\'\"]$/))&&!/\?>/.test(q)?R.pending=p[0]:R.pending={end:L.pos,style:G},L.backUp(q.length-V)),G}return{startState:function(){var L=t.startState(T),R=w.startOpen?t.startState(I):null;return{html:L,php:R,curMode:w.startOpen?I:T,curState:w.startOpen?R:L,pending:null}},copyState:function(L){var R=L.html,W=t.copyState(T,R),G=L.php,q=G&&t.copyState(I,G),V;return L.curMode==T?V=W:V=q,{html:W,php:q,curMode:L.curMode,curState:V,pending:L.pending}},token:P,indent:function(L,R,W){return L.curMode!=I&&/^\s*<\//.test(R)||L.curMode==I&&/^\?>/.test(R)?T.indent(L.html,R,W):L.curMode.indent(L.curState,R,W)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(L){return{state:L.curState,mode:L.curMode}}}},"htmlmixed","clike"),t.defineMIME("application/x-httpd-php","php"),t.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),t.defineMIME("text/x-php",h)})});var cye=J((lye,uye)=>{(function(t){typeof lye=="object"&&typeof uye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";function e(h){for(var y={},w=0,T=h.length;w<T;++w)y[h[w]]=!0;return y}var r=["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"],n=e(r),i=e(["def","class","case","for","while","until","module","catch","loop","proc","begin"]),o=e(["end","until"]),s={"[":"]","{":"}","(":")"},u={"]":"[","}":"{",")":"("};t.defineMode("ruby",function(h){var y;function w(q,V,p){return p.tokenize.push(q),q(V,p)}function T(q,V){if(q.sol()&&q.match("=begin")&&q.eol())return V.tokenize.push(G),"comment";if(q.eatSpace())return null;var p=q.next(),K;if(p=="`"||p=="'"||p=='"')return w(R(p,"string",p=='"'||p=="`"),q,V);if(p=="/")return I(q)?w(R(p,"string-2",!0),q,V):"operator";if(p=="%"){var j="string",Q=!0;q.eat("s")?j="atom":q.eat(/[WQ]/)?j="string":q.eat(/[r]/)?j="string-2":q.eat(/[wxq]/)&&(j="string",Q=!1);var ee=q.eat(/[^\w\s=]/);return ee?(s.propertyIsEnumerable(ee)&&(ee=s[ee]),w(R(ee,j,Q,!0),q,V)):"operator"}else{if(p=="#")return q.skipToEnd(),"comment";if(p=="<"&&(K=q.match(/^<([-~])[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return w(W(K[2],K[1]),q,V);if(p=="0")return q.eat("x")?q.eatWhile(/[\da-fA-F]/):q.eat("b")?q.eatWhile(/[01]/):q.eatWhile(/[0-7]/),"number";if(/\d/.test(p))return q.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(p=="?"){for(;q.match(/^\\[CM]-/););return q.eat("\\")?q.eatWhile(/\w/):q.next(),"string"}else{if(p==":")return q.eat("'")?w(R("'","atom",!1),q,V):q.eat('"')?w(R('"',"atom",!0),q,V):q.eat(/[\<\>]/)?(q.eat(/[\<\>]/),"atom"):q.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":q.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(q.eatWhile(/[\w$\xa1-\uffff]/),q.eat(/[\?\!\=]/),"atom"):"operator";if(p=="@"&&q.match(/^@?[a-zA-Z_\xa1-\uffff]/))return q.eat("@"),q.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if(p=="$")return q.eat(/[a-zA-Z_]/)?q.eatWhile(/[\w]/):q.eat(/\d/)?q.eat(/\d/):q.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(p))return q.eatWhile(/[\w\xa1-\uffff]/),q.eat(/[\?\!]/),q.eat(":")?"atom":"ident";if(p=="|"&&(V.varList||V.lastTok=="{"||V.lastTok=="do"))return y="|",null;if(/[\(\)\[\]{}\\;]/.test(p))return y=p,null;if(p=="-"&&q.eat(">"))return"arrow";if(/[=+\-\/*:\.^%<>~|]/.test(p)){var se=q.eatWhile(/[=+\-\/*:\.^%<>~|]/);return p=="."&&!se&&(y="."),"operator"}else return null}}}function I(q){for(var V=q.pos,p=0,K,j=!1,Q=!1;(K=q.next())!=null;)if(Q)Q=!1;else{if("[{(".indexOf(K)>-1)p++;else if("]})".indexOf(K)>-1){if(p--,p<0)break}else if(K=="/"&&p==0){j=!0;break}Q=K=="\\"}return q.backUp(q.pos-V),j}function P(q){return q||(q=1),function(V,p){if(V.peek()=="}"){if(q==1)return p.tokenize.pop(),p.tokenize[p.tokenize.length-1](V,p);p.tokenize[p.tokenize.length-1]=P(q-1)}else V.peek()=="{"&&(p.tokenize[p.tokenize.length-1]=P(q+1));return T(V,p)}}function L(){var q=!1;return function(V,p){return q?(p.tokenize.pop(),p.tokenize[p.tokenize.length-1](V,p)):(q=!0,T(V,p))}}function R(q,V,p,K){return function(j,Q){var ee=!1,se;for(Q.context.type==="read-quoted-paused"&&(Q.context=Q.context.prev,j.eat("}"));(se=j.next())!=null;){if(se==q&&(K||!ee)){Q.tokenize.pop();break}if(p&&se=="#"&&!ee){if(j.eat("{")){q=="}"&&(Q.context={prev:Q.context,type:"read-quoted-paused"}),Q.tokenize.push(P());break}else if(/[@\$]/.test(j.peek())){Q.tokenize.push(L());break}}ee=!ee&&se=="\\"}return V}}function W(q,V){return function(p,K){return V&&p.eatSpace(),p.match(q)?K.tokenize.pop():p.skipToEnd(),"string"}}function G(q,V){return q.sol()&&q.match("=end")&&q.eol()&&V.tokenize.pop(),q.skipToEnd(),"comment"}return{startState:function(){return{tokenize:[T],indented:0,context:{type:"top",indented:-h.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(q,V){y=null,q.sol()&&(V.indented=q.indentation());var p=V.tokenize[V.tokenize.length-1](q,V),K,j=y;if(p=="ident"){var Q=q.current();p=V.lastTok=="."?"property":n.propertyIsEnumerable(q.current())?"keyword":/^[A-Z]/.test(Q)?"tag":V.lastTok=="def"||V.lastTok=="class"||V.varList?"def":"variable",p=="keyword"&&(j=Q,i.propertyIsEnumerable(Q)?K="indent":o.propertyIsEnumerable(Q)?K="dedent":((Q=="if"||Q=="unless")&&q.column()==q.indentation()||Q=="do"&&V.context.indented<V.indented)&&(K="indent"))}return(y||p&&p!="comment")&&(V.lastTok=j),y=="|"&&(V.varList=!V.varList),K=="indent"||/[\(\[\{]/.test(y)?V.context={prev:V.context,type:y||p,indented:V.indented}:(K=="dedent"||/[\)\]\}]/.test(y))&&V.context.prev&&(V.context=V.context.prev),q.eol()&&(V.continuedLine=y=="\\"||p=="operator"),p},indent:function(q,V){if(q.tokenize[q.tokenize.length-1]!=T)return t.Pass;var p=V&&V.charAt(0),K=q.context,j=K.type==u[p]||K.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(V);return K.indented+(j?0:h.indentUnit)+(q.continuedLine?h.indentUnit:0)},electricInput:/^\s*(?:end|rescue|elsif|else|\})$/,lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-ruby","ruby"),t.registerHelper("hintWords","ruby",r)})});var b6=J((fye,hye)=>{(function(t){typeof fye=="object"&&typeof hye=="object"?t(io(),Nx()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../css/css"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("sass",function(e){var r=t.mimeModes["text/css"],n=r.propertyKeywords||{},i=r.colorKeywords||{},o=r.valueKeywords||{},s=r.fontProperties||{};function u(Q){return new RegExp("^"+Q.join("|"))}var h=["true","false","null","auto"],y=new RegExp("^"+h.join("|")),w=["\\(","\\)","=",">","<","==",">=","<=","\\+","-","\\!=","/","\\*","%","and","or","not",";","\\{","\\}",":"],T=u(w),I=/^::?[a-zA-Z_][\w\-]*/,P;function L(Q){return!Q.peek()||Q.match(/\s+$/,!1)}function R(Q,ee){var se=Q.peek();return se===")"?(Q.next(),ee.tokenizer=K,"operator"):se==="("?(Q.next(),Q.eatSpace(),"operator"):se==="'"||se==='"'?(ee.tokenizer=G(Q.next()),"string"):(ee.tokenizer=G(")",!1),"string")}function W(Q,ee){return function(se,me){return se.sol()&&se.indentation()<=Q?(me.tokenizer=K,K(se,me)):(ee&&se.skipTo("*/")?(se.next(),se.next(),me.tokenizer=K):se.skipToEnd(),"comment")}}function G(Q,ee){ee==null&&(ee=!0);function se(me,ve){var U=me.next(),$=me.peek(),he=me.string.charAt(me.pos-2),Ce=U!=="\\"&&$===Q||U===Q&&he!=="\\";return Ce?(U!==Q&&ee&&me.next(),L(me)&&(ve.cursorHalf=0),ve.tokenizer=K,"string"):U==="#"&&$==="{"?(ve.tokenizer=q(se),me.next(),"operator"):"string"}return se}function q(Q){return function(ee,se){return ee.peek()==="}"?(ee.next(),se.tokenizer=Q,"operator"):K(ee,se)}}function V(Q){if(Q.indentCount==0){Q.indentCount++;var ee=Q.scopes[0].offset,se=ee+e.indentUnit;Q.scopes.unshift({offset:se})}}function p(Q){Q.scopes.length!=1&&Q.scopes.shift()}function K(Q,ee){var se=Q.peek();if(Q.match("/*"))return ee.tokenizer=W(Q.indentation(),!0),ee.tokenizer(Q,ee);if(Q.match("//"))return ee.tokenizer=W(Q.indentation(),!1),ee.tokenizer(Q,ee);if(Q.match("#{"))return ee.tokenizer=q(K),"operator";if(se==='"'||se==="'")return Q.next(),ee.tokenizer=G(se),"string";if(ee.cursorHalf){if(se==="#"&&(Q.next(),Q.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))||Q.match(/^-?[0-9\.]+/))return L(Q)&&(ee.cursorHalf=0),"number";if(Q.match(/^(px|em|in)\b/))return L(Q)&&(ee.cursorHalf=0),"unit";if(Q.match(y))return L(Q)&&(ee.cursorHalf=0),"keyword";if(Q.match(/^url/)&&Q.peek()==="(")return ee.tokenizer=R,L(Q)&&(ee.cursorHalf=0),"atom";if(se==="$")return Q.next(),Q.eatWhile(/[\w-]/),L(Q)&&(ee.cursorHalf=0),"variable-2";if(se==="!")return Q.next(),ee.cursorHalf=0,Q.match(/^[\w]+/)?"keyword":"operator";if(Q.match(T))return L(Q)&&(ee.cursorHalf=0),"operator";if(Q.eatWhile(/[\w-]/))return L(Q)&&(ee.cursorHalf=0),P=Q.current().toLowerCase(),o.hasOwnProperty(P)?"atom":i.hasOwnProperty(P)?"keyword":n.hasOwnProperty(P)?(ee.prevProp=Q.current().toLowerCase(),"property"):"tag";if(L(Q))return ee.cursorHalf=0,null}else{if(se==="-"&&Q.match(/^-\w+-/))return"meta";if(se==="."){if(Q.next(),Q.match(/^[\w-]+/))return V(ee),"qualifier";if(Q.peek()==="#")return V(ee),"tag"}if(se==="#"){if(Q.next(),Q.match(/^[\w-]+/))return V(ee),"builtin";if(Q.peek()==="#")return V(ee),"tag"}if(se==="$")return Q.next(),Q.eatWhile(/[\w-]/),"variable-2";if(Q.match(/^-?[0-9\.]+/))return"number";if(Q.match(/^(px|em|in)\b/))return"unit";if(Q.match(y))return"keyword";if(Q.match(/^url/)&&Q.peek()==="(")return ee.tokenizer=R,"atom";if(se==="="&&Q.match(/^=[\w-]+/))return V(ee),"meta";if(se==="+"&&Q.match(/^\+[\w-]+/))return"variable-3";if(se==="@"&&Q.match("@extend")&&(Q.match(/\s*[\w]/)||p(ee)),Q.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return V(ee),"def";if(se==="@")return Q.next(),Q.eatWhile(/[\w-]/),"def";if(Q.eatWhile(/[\w-]/))if(Q.match(/ *: *[\w-\+\$#!\("']/,!1)){P=Q.current().toLowerCase();var me=ee.prevProp+"-"+P;return n.hasOwnProperty(me)?"property":n.hasOwnProperty(P)?(ee.prevProp=P,"property"):s.hasOwnProperty(P)?"property":"tag"}else return Q.match(/ *:/,!1)?(V(ee),ee.cursorHalf=1,ee.prevProp=Q.current().toLowerCase(),"property"):(Q.match(/ *,/,!1)||V(ee),"tag");if(se===":")return Q.match(I)?"variable-3":(Q.next(),ee.cursorHalf=1,"operator")}return Q.match(T)?"operator":(Q.next(),null)}function j(Q,ee){Q.sol()&&(ee.indentCount=0);var se=ee.tokenizer(Q,ee),me=Q.current();if((me==="@return"||me==="}")&&p(ee),se!==null){for(var ve=Q.pos-me.length,U=ve+e.indentUnit*ee.indentCount,$=[],he=0;he<ee.scopes.length;he++){var Ce=ee.scopes[he];Ce.offset<=U&&$.push(Ce)}ee.scopes=$}return se}return{startState:function(){return{tokenizer:K,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(Q,ee){var se=j(Q,ee);return ee.lastToken={style:se,content:Q.current()},se},indent:function(Q){return Q.scopes[0].offset},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"indent"}},"css"),t.defineMIME("text/x-sass","sass")})});var mye=J((dye,pye)=>{(function(t){typeof dye=="object"&&typeof pye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("shell",function(){var e={};function r(I,P){for(var L=0;L<P.length;L++)e[P[L]]=I}var n=["true","false"],i=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function"],o=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];t.registerHelper("hintWords","shell",n.concat(i,o)),r("atom",n),r("keyword",i),r("builtin",o);function s(I,P){if(I.eatSpace())return null;var L=I.sol(),R=I.next();if(R==="\\")return I.next(),null;if(R==="'"||R==='"'||R==="`")return P.tokens.unshift(u(R,R==="`"?"quote":"string")),T(I,P);if(R==="#")return L&&I.eat("!")?(I.skipToEnd(),"meta"):(I.skipToEnd(),"comment");if(R==="$")return P.tokens.unshift(y),T(I,P);if(R==="+"||R==="=")return"operator";if(R==="-")return I.eat("-"),I.eatWhile(/\w/),"attribute";if(R=="<"){if(I.match("<<"))return"operator";var W=I.match(/^<-?\s*['"]?([^'"]*)['"]?/);if(W)return P.tokens.unshift(w(W[1])),"string-2"}if(/\d/.test(R)&&(I.eatWhile(/\d/),I.eol()||!/\w/.test(I.peek())))return"number";I.eatWhile(/[\w-]/);var G=I.current();return I.peek()==="="&&/\w+/.test(G)?"def":e.hasOwnProperty(G)?e[G]:null}function u(I,P){var L=I=="("?")":I=="{"?"}":I;return function(R,W){for(var G,q=!1;(G=R.next())!=null;){if(G===L&&!q){W.tokens.shift();break}else if(G==="$"&&!q&&I!=="'"&&R.peek()!=L){q=!0,R.backUp(1),W.tokens.unshift(y);break}else{if(!q&&I!==L&&G===I)return W.tokens.unshift(u(I,P)),T(R,W);if(!q&&/['"]/.test(G)&&!/['"]/.test(I)){W.tokens.unshift(h(G,"string")),R.backUp(1);break}}q=!q&&G==="\\"}return P}}function h(I,P){return function(L,R){return R.tokens[0]=u(I,P),L.next(),T(L,R)}}var y=function(I,P){P.tokens.length>1&&I.eat("$");var L=I.next();return/['"({]/.test(L)?(P.tokens[0]=u(L,L=="("?"quote":L=="{"?"def":"string"),T(I,P)):(/\d/.test(L)||I.eatWhile(/\w/),P.tokens.shift(),"def")};function w(I){return function(P,L){return P.sol()&&P.string==I&&L.tokens.shift(),P.skipToEnd(),"string-2"}}function T(I,P){return(P.tokens[0]||s)(I,P)}return{startState:function(){return{tokens:[]}},token:function(I,P){return T(I,P)},closeBrackets:"()[]{}''\"\"``",lineComment:"#",fold:"brace"}}),t.defineMIME("text/x-sh","shell"),t.defineMIME("application/x-sh","shell")})});var yye=J((gye,vye)=>{(function(t){typeof gye=="object"&&typeof vye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("sql",function(h,y){var w=y.client||{},T=y.atoms||{false:!0,true:!0,null:!0},I=y.builtin||s(u),P=y.keywords||s(o),L=y.operatorChars||/^[*+\-%<>!=&|~^\/]/,R=y.support||{},W=y.hooks||{},G=y.dateSQL||{date:!0,time:!0,timestamp:!0},q=y.backslashStringEscapes!==!1,V=y.brackets||/^[\{}\(\)\[\]]/,p=y.punctuation||/^[;.,:]/;function K(me,ve){var U=me.next();if(W[U]){var $=W[U](me,ve);if($!==!1)return $}if(R.hexNumber&&(U=="0"&&me.match(/^[xX][0-9a-fA-F]+/)||(U=="x"||U=="X")&&me.match(/^'[0-9a-fA-F]*'/)))return"number";if(R.binaryNumber&&((U=="b"||U=="B")&&me.match(/^'[01]*'/)||U=="0"&&me.match(/^b[01]+/)))return"number";if(U.charCodeAt(0)>47&&U.charCodeAt(0)<58)return me.match(/^[0-9]*(\.[0-9]+)?([eE][-+]?[0-9]+)?/),R.decimallessFloat&&me.match(/^\.(?!\.)/),"number";if(U=="?"&&(me.eatSpace()||me.eol()||me.eat(";")))return"variable-3";if(U=="'"||U=='"'&&R.doubleQuote)return ve.tokenize=j(U),ve.tokenize(me,ve);if((R.nCharCast&&(U=="n"||U=="N")||R.charsetCast&&U=="_"&&me.match(/[a-z][a-z0-9]*/i))&&(me.peek()=="'"||me.peek()=='"'))return"keyword";if(R.escapeConstant&&(U=="e"||U=="E")&&(me.peek()=="'"||me.peek()=='"'&&R.doubleQuote))return ve.tokenize=function(Ce,Se){return(Se.tokenize=j(Ce.next(),!0))(Ce,Se)},"keyword";if(R.commentSlashSlash&&U=="/"&&me.eat("/"))return me.skipToEnd(),"comment";if(R.commentHash&&U=="#"||U=="-"&&me.eat("-")&&(!R.commentSpaceRequired||me.eat(" ")))return me.skipToEnd(),"comment";if(U=="/"&&me.eat("*"))return ve.tokenize=Q(1),ve.tokenize(me,ve);if(U=="."){if(R.zerolessFloat&&me.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(me.match(/^\.+/))return null;if(me.match(/^[\w\d_$#]+/))return"variable-2"}else{if(L.test(U))return me.eatWhile(L),"operator";if(V.test(U))return"bracket";if(p.test(U))return me.eatWhile(p),"punctuation";if(U=="{"&&(me.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||me.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";me.eatWhile(/^[_\w\d]/);var he=me.current().toLowerCase();return G.hasOwnProperty(he)&&(me.match(/^( )+'[^']*'/)||me.match(/^( )+"[^"]*"/))?"number":T.hasOwnProperty(he)?"atom":I.hasOwnProperty(he)?"type":P.hasOwnProperty(he)?"keyword":w.hasOwnProperty(he)?"builtin":null}}function j(me,ve){return function(U,$){for(var he=!1,Ce;(Ce=U.next())!=null;){if(Ce==me&&!he){$.tokenize=K;break}he=(q||ve)&&!he&&Ce=="\\"}return"string"}}function Q(me){return function(ve,U){var $=ve.match(/^.*?(\/\*|\*\/)/);return $?$[1]=="/*"?U.tokenize=Q(me+1):me>1?U.tokenize=Q(me-1):U.tokenize=K:ve.skipToEnd(),"comment"}}function ee(me,ve,U){ve.context={prev:ve.context,indent:me.indentation(),col:me.column(),type:U}}function se(me){me.indent=me.context.indent,me.context=me.context.prev}return{startState:function(){return{tokenize:K,context:null}},token:function(me,ve){if(me.sol()&&ve.context&&ve.context.align==null&&(ve.context.align=!1),ve.tokenize==K&&me.eatSpace())return null;var U=ve.tokenize(me,ve);if(U=="comment")return U;ve.context&&ve.context.align==null&&(ve.context.align=!0);var $=me.current();return $=="("?ee(me,ve,")"):$=="["?ee(me,ve,"]"):ve.context&&ve.context.type==$&&se(ve),U},indent:function(me,ve){var U=me.context;if(!U)return t.Pass;var $=ve.charAt(0)==U.type;return U.align?U.col+($?0:1):U.indent+($?0:h.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:R.commentSlashSlash?"//":R.commentHash?"#":"--",closeBrackets:"()[]{}''\"\"``",config:y}});function e(h){for(var y;(y=h.next())!=null;)if(y=="`"&&!h.eat("`"))return"variable-2";return h.backUp(h.current().length-1),h.eatWhile(/\w/)?"variable-2":null}function r(h){for(var y;(y=h.next())!=null;)if(y=='"'&&!h.eat('"'))return"variable-2";return h.backUp(h.current().length-1),h.eatWhile(/\w/)?"variable-2":null}function n(h){return h.eat("@")&&(h.match("session."),h.match("local."),h.match("global.")),h.eat("'")?(h.match(/^.*'/),"variable-2"):h.eat('"')?(h.match(/^.*"/),"variable-2"):h.eat("`")?(h.match(/^.*`/),"variable-2"):h.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function i(h){return h.eat("N")?"atom":h.match(/^[a-zA-Z.#!?]/)?"variable-2":null}var o="alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit ";function s(h){for(var y={},w=h.split(" "),T=0;T<w.length;++T)y[w[T]]=!0;return y}var u="bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric";t.defineMIME("text/x-sql",{name:"sql",keywords:s(o+"begin"),builtin:s(u),atoms:s("false true null unknown"),dateSQL:s("date time timestamp"),support:s("doubleQuote binaryNumber hexNumber")}),t.defineMIME("text/x-mssql",{name:"sql",client:s("$partition binary_checksum checksum connectionproperty context_info current_request_id error_line error_message error_number error_procedure error_severity error_state formatmessage get_filestream_transaction_context getansinull host_id host_name isnull isnumeric min_active_rowversion newid newsequentialid rowcount_big xact_state object_id"),keywords:s(o+"begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare exec go if use index holdlock nolock nowait paglock readcommitted readcommittedlock readpast readuncommitted repeatableread rowlock serializable snapshot tablock tablockx updlock with"),builtin:s("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:s("is not null like and or in left right between inner outer join all any some cross unpivot pivot exists"),operatorChars:/^[*+\-%<>!=^\&|\/]/,brackets:/^[\{}\(\)]/,punctuation:/^[;.,:/]/,backslashStringEscapes:!1,dateSQL:s("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":n}}),t.defineMIME("text/x-mysql",{name:"sql",client:s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:s(o+"accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:s("date time timestamp"),support:s("decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":e,"\\":i}}),t.defineMIME("text/x-mariadb",{name:"sql",client:s("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:s(o+"accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group group_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),builtin:s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:s("date time timestamp"),support:s("decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),hooks:{"@":n,"`":e,"\\":i}}),t.defineMIME("text/x-sqlite",{name:"sql",client:s("auth backup bail binary changes check clone databases dbinfo dump echo eqp exit explain fullschema headers help import imposter indexes iotrace limit lint load log mode nullvalue once open output print prompt quit read restore save scanstats schema separator session shell show stats system tables testcase timeout timer trace vfsinfo vfslist vfsname width"),keywords:s(o+"abort action add after all analyze attach autoincrement before begin cascade case cast check collate column commit conflict constraint cross current_date current_time current_timestamp database default deferrable deferred detach each else end escape except exclusive exists explain fail for foreign full glob if ignore immediate index indexed initially inner instead intersect isnull key left limit match natural no notnull null of offset outer plan pragma primary query raise recursive references regexp reindex release rename replace restrict right rollback row savepoint temp temporary then to transaction trigger unique using vacuum view virtual when with without"),builtin:s("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text clob bigint int int2 int8 integer float double char varchar date datetime year unsigned signed numeric real"),atoms:s("null current_date current_time current_timestamp"),operatorChars:/^[*+\-%<>!=&|/~]/,dateSQL:s("date time timestamp datetime"),support:s("decimallessFloat zerolessFloat"),identifierQuote:'"',hooks:{"@":n,":":n,"?":n,$:n,'"':r,"`":e}}),t.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:s("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),builtin:s("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:s("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:s("commentSlashSlash decimallessFloat"),hooks:{}}),t.defineMIME("text/x-plsql",{name:"sql",client:s("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),keywords:s("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),builtin:s("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least length lengthb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),operatorChars:/^[*\/+\-%<>!=~]/,dateSQL:s("date time timestamp"),support:s("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")}),t.defineMIME("text/x-hive",{name:"sql",keywords:s("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with admin authorization char compact compactions conf cube current current_date current_timestamp day decimal defined dependency directories elem_type exchange file following for grouping hour ignore inner interval jar less logical macro minute month more none noscan over owner partialscan preceding pretty principals protection reload rewrite role roles rollup rows second server sets skewed transactions truncate unbounded unset uri user values window year"),builtin:s("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype key_type utctimestamp value_type varchar"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:s("date timestamp"),support:s("doubleQuote binaryNumber hexNumber")}),t.defineMIME("text/x-pgsql",{name:"sql",client:s("source"),keywords:s(o+"a abort abs absent absolute access according action ada add admin after aggregate alias all allocate also alter always analyse analyze and any are array array_agg array_max_cardinality as asc asensitive assert assertion assignment asymmetric at atomic attach attribute attributes authorization avg backward base64 before begin begin_frame begin_partition bernoulli between bigint binary bit bit_length blob blocked bom boolean both breadth by c cache call called cardinality cascade cascaded case cast catalog catalog_name ceil ceiling chain char char_length character character_length character_set_catalog character_set_name character_set_schema characteristics characters check checkpoint class class_origin clob close cluster coalesce cobol collate collation collation_catalog collation_name collation_schema collect column column_name columns command_function command_function_code comment comments commit committed concurrently condition condition_number configuration conflict connect connection connection_name constant constraint constraint_catalog constraint_name constraint_schema constraints constructor contains content continue control conversion convert copy corr corresponding cost count covar_pop covar_samp create cross csv cube cume_dist current current_catalog current_date current_default_transform_group current_path current_role current_row current_schema current_time current_timestamp current_transform_group_for_type current_user cursor cursor_name cycle data database datalink datatype date datetime_interval_code datetime_interval_precision day db deallocate debug dec decimal declare default defaults deferrable deferred defined definer degree delete delimiter delimiters dense_rank depends depth deref derived desc describe descriptor detach detail deterministic diagnostics dictionary disable discard disconnect dispatch distinct dlnewcopy dlpreviouscopy dlurlcomplete dlurlcompleteonly dlurlcompletewrite dlurlpath dlurlpathonly dlurlpathwrite dlurlscheme dlurlserver dlvalue do document domain double drop dump dynamic dynamic_function dynamic_function_code each element else elseif elsif empty enable encoding encrypted end end_frame end_partition endexec enforced enum equals errcode error escape event every except exception exclude excluding exclusive exec execute exists exit exp explain expression extension external extract false family fetch file filter final first first_value flag float floor following for force foreach foreign fortran forward found frame_row free freeze from fs full function functions fusion g general generated get global go goto grant granted greatest group grouping groups handler having header hex hierarchy hint hold hour id identity if ignore ilike immediate immediately immutable implementation implicit import in include including increment indent index indexes indicator info inherit inherits initially inline inner inout input insensitive insert instance instantiable instead int integer integrity intersect intersection interval into invoker is isnull isolation join k key key_member key_type label lag language large last last_value lateral lead leading leakproof least left length level library like like_regex limit link listen ln load local localtime localtimestamp location locator lock locked log logged loop lower m map mapping match matched materialized max max_cardinality maxvalue member merge message message_length message_octet_length message_text method min minute minvalue mod mode modifies module month more move multiset mumps name names namespace national natural nchar nclob nesting new next nfc nfd nfkc nfkd nil no none normalize normalized not nothing notice notify notnull nowait nth_value ntile null nullable nullif nulls number numeric object occurrences_regex octet_length octets of off offset oids old on only open operator option options or order ordering ordinality others out outer output over overlaps overlay overriding owned owner p pad parallel parameter parameter_mode parameter_name parameter_ordinal_position parameter_specific_catalog parameter_specific_name parameter_specific_schema parser partial partition pascal passing passthrough password path percent percent_rank percentile_cont percentile_disc perform period permission pg_context pg_datatype_name pg_exception_context pg_exception_detail pg_exception_hint placing plans pli policy portion position position_regex power precedes preceding precision prepare prepared preserve primary print_strict_params prior privileges procedural procedure procedures program public publication query quote raise range rank read reads real reassign recheck recovery recursive ref references referencing refresh regr_avgx regr_avgy regr_count regr_intercept regr_r2 regr_slope regr_sxx regr_sxy regr_syy reindex relative release rename repeatable replace replica requiring reset respect restart restore restrict result result_oid return returned_cardinality returned_length returned_octet_length returned_sqlstate returning returns reverse revoke right role rollback rollup routine routine_catalog routine_name routine_schema routines row row_count row_number rows rowtype rule savepoint scale schema schema_name schemas scope scope_catalog scope_name scope_schema scroll search second section security select selective self sensitive sequence sequences serializable server server_name session session_user set setof sets share show similar simple size skip slice smallint snapshot some source space specific specific_name specifictype sql sqlcode sqlerror sqlexception sqlstate sqlwarning sqrt stable stacked standalone start state statement static statistics stddev_pop stddev_samp stdin stdout storage strict strip structure style subclass_origin submultiset subscription substring substring_regex succeeds sum symmetric sysid system system_time system_user t table table_name tables tablesample tablespace temp template temporary text then ties time timestamp timezone_hour timezone_minute to token top_level_count trailing transaction transaction_active transactions_committed transactions_rolled_back transform transforms translate translate_regex translation treat trigger trigger_catalog trigger_name trigger_schema trim trim_array true truncate trusted type types uescape unbounded uncommitted under unencrypted union unique unknown unlink unlisten unlogged unnamed unnest until untyped update upper uri usage use_column use_variable user user_defined_type_catalog user_defined_type_code user_defined_type_name user_defined_type_schema using vacuum valid validate validator value value_of values var_pop var_samp varbinary varchar variable_conflict variadic varying verbose version versioning view views volatile warning when whenever where while whitespace width_bucket window with within without work wrapper write xml xmlagg xmlattributes xmlbinary xmlcast xmlcomment xmlconcat xmldeclaration xmldocument xmlelement xmlexists xmlforest xmliterate xmlnamespaces xmlparse xmlpi xmlquery xmlroot xmlschema xmlserialize xmltable xmltext xmlvalidate year yes zone"),builtin:s("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time zone timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:s("false true null unknown"),operatorChars:/^[*\/+\-%<>!=&|^\/#@?~]/,backslashStringEscapes:!1,identifierQuote:'"',hooks:{'"':r},dateSQL:s("date time timestamp"),support:s("decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast escapeConstant")}),t.defineMIME("text/x-gql",{name:"sql",keywords:s("ancestor and asc by contains desc descendant distinct from group has in is limit offset on order select superset where"),atoms:s("false true"),builtin:s("blob datetime first key __key__ string integer double boolean null"),operatorChars:/^[*+\-%<>!=]/}),t.defineMIME("text/x-gpsql",{name:"sql",client:s("source"),keywords:s("abort absolute access action active add admin after aggregate all also alter always analyse analyze and any array as asc assertion assignment asymmetric at authorization backward before begin between bigint binary bit boolean both by cache called cascade cascaded case cast chain char character characteristics check checkpoint class close cluster coalesce codegen collate column comment commit committed concurrency concurrently configuration connection constraint constraints contains content continue conversion copy cost cpu_rate_limit create createdb createexttable createrole createuser cross csv cube current current_catalog current_date current_role current_schema current_time current_timestamp current_user cursor cycle data database day deallocate dec decimal declare decode default defaults deferrable deferred definer delete delimiter delimiters deny desc dictionary disable discard distinct distributed do document domain double drop dxl each else enable encoding encrypted end enum errors escape every except exchange exclude excluding exclusive execute exists explain extension external extract false family fetch fields filespace fill filter first float following for force foreign format forward freeze from full function global grant granted greatest group group_id grouping handler hash having header hold host hour identity if ignore ilike immediate immutable implicit in including inclusive increment index indexes inherit inherits initially inline inner inout input insensitive insert instead int integer intersect interval into invoker is isnull isolation join key language large last leading least left level like limit list listen load local localtime localtimestamp location lock log login mapping master match maxvalue median merge minute minvalue missing mode modifies modify month move name names national natural nchar new newline next no nocreatedb nocreateexttable nocreaterole nocreateuser noinherit nologin none noovercommit nosuperuser not nothing notify notnull nowait null nullif nulls numeric object of off offset oids old on only operator option options or order ordered others out outer over overcommit overlaps overlay owned owner parser partial partition partitions passing password percent percentile_cont percentile_disc placing plans position preceding precision prepare prepared preserve primary prior privileges procedural procedure protocol queue quote randomly range read readable reads real reassign recheck recursive ref references reindex reject relative release rename repeatable replace replica reset resource restart restrict returning returns revoke right role rollback rollup rootpartition row rows rule savepoint scatter schema scroll search second security segment select sequence serializable session session_user set setof sets share show similar simple smallint some split sql stable standalone start statement statistics stdin stdout storage strict strip subpartition subpartitions substring superuser symmetric sysid system table tablespace temp template temporary text then threshold ties time timestamp to trailing transaction treat trigger trim true truncate trusted type unbounded uncommitted unencrypted union unique unknown unlisten until update user using vacuum valid validation validator value values varchar variadic varying verbose version view volatile web when where whitespace window with within without work writable write xml xmlattributes xmlconcat xmlelement xmlexists xmlforest xmlparse xmlpi xmlroot xmlserialize year yes zone"),builtin:s("bigint int8 bigserial serial8 bit varying varbit boolean bool box bytea character char varchar cidr circle date double precision float float8 inet integer int int4 interval json jsonb line lseg macaddr macaddr8 money numeric decimal path pg_lsn point polygon real float4 smallint int2 smallserial serial2 serial serial4 text time without zone with timetz timestamp timestamptz tsquery tsvector txid_snapshot uuid xml"),atoms:s("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:s("date time timestamp"),support:s("decimallessFloat zerolessFloat binaryNumber hexNumber nCharCast charsetCast")}),t.defineMIME("text/x-sparksql",{name:"sql",keywords:s("add after all alter analyze and anti archive array as asc at between bucket buckets by cache cascade case cast change clear cluster clustered codegen collection column columns comment commit compact compactions compute concatenate cost create cross cube current current_date current_timestamp database databases data dbproperties defined delete delimited deny desc describe dfs directories distinct distribute drop else end escaped except exchange exists explain export extended external false fields fileformat first following for format formatted from full function functions global grant group grouping having if ignore import in index indexes inner inpath inputformat insert intersect interval into is items join keys last lateral lazy left like limit lines list load local location lock locks logical macro map minus msck natural no not null nulls of on optimize option options or order out outer outputformat over overwrite partition partitioned partitions percent preceding principals purge range recordreader recordwriter recover reduce refresh regexp rename repair replace reset restrict revoke right rlike role roles rollback rollup row rows schema schemas select semi separated serde serdeproperties set sets show skewed sort sorted start statistics stored stratify struct table tables tablesample tblproperties temp temporary terminated then to touch transaction transactions transform true truncate unarchive unbounded uncache union unlock unset use using values view when where window with"),builtin:s("abs acos acosh add_months aggregate and any approx_count_distinct approx_percentile array array_contains array_distinct array_except array_intersect array_join array_max array_min array_position array_remove array_repeat array_sort array_union arrays_overlap arrays_zip ascii asin asinh assert_true atan atan2 atanh avg base64 between bigint bin binary bit_and bit_count bit_get bit_length bit_or bit_xor bool_and bool_or boolean bround btrim cardinality case cast cbrt ceil ceiling char char_length character_length chr coalesce collect_list collect_set concat concat_ws conv corr cos cosh cot count count_if count_min_sketch covar_pop covar_samp crc32 cume_dist current_catalog current_database current_date current_timestamp current_timezone current_user date date_add date_format date_from_unix_date date_part date_sub date_trunc datediff day dayofmonth dayofweek dayofyear decimal decode degrees delimited dense_rank div double e element_at elt encode every exists exp explode explode_outer expm1 extract factorial filter find_in_set first first_value flatten float floor forall format_number format_string from_csv from_json from_unixtime from_utc_timestamp get_json_object getbit greatest grouping grouping_id hash hex hour hypot if ifnull in initcap inline inline_outer input_file_block_length input_file_block_start input_file_name inputformat instr int isnan isnotnull isnull java_method json_array_length json_object_keys json_tuple kurtosis lag last last_day last_value lcase lead least left length levenshtein like ln locate log log10 log1p log2 lower lpad ltrim make_date make_dt_interval make_interval make_timestamp make_ym_interval map map_concat map_entries map_filter map_from_arrays map_from_entries map_keys map_values map_zip_with max max_by md5 mean min min_by minute mod monotonically_increasing_id month months_between named_struct nanvl negative next_day not now nth_value ntile nullif nvl nvl2 octet_length or outputformat overlay parse_url percent_rank percentile percentile_approx pi pmod posexplode posexplode_outer position positive pow power printf quarter radians raise_error rand randn random rank rcfile reflect regexp regexp_extract regexp_extract_all regexp_like regexp_replace repeat replace reverse right rint rlike round row_number rpad rtrim schema_of_csv schema_of_json second sentences sequence sequencefile serde session_window sha sha1 sha2 shiftleft shiftright shiftrightunsigned shuffle sign signum sin sinh size skewness slice smallint some sort_array soundex space spark_partition_id split sqrt stack std stddev stddev_pop stddev_samp str_to_map string struct substr substring substring_index sum tan tanh textfile timestamp timestamp_micros timestamp_millis timestamp_seconds tinyint to_csv to_date to_json to_timestamp to_unix_timestamp to_utc_timestamp transform transform_keys transform_values translate trim trunc try_add try_divide typeof ucase unbase64 unhex uniontype unix_date unix_micros unix_millis unix_seconds unix_timestamp upper uuid var_pop var_samp variance version weekday weekofyear when width_bucket window xpath xpath_boolean xpath_double xpath_float xpath_int xpath_long xpath_number xpath_short xpath_string xxhash64 year zip_with"),atoms:s("false true null"),operatorChars:/^[*\/+\-%<>!=~&|^]/,dateSQL:s("date time timestamp"),support:s("doubleQuote zerolessFloat")}),t.defineMIME("text/x-esper",{name:"sql",client:s("source"),keywords:s("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where limit after all and as at asc avedev avg between by case cast coalesce count create current_timestamp day days delete define desc distinct else end escape events every exists false first from full group having hour hours in inner insert instanceof into irstream is istream join last lastweekday left limit like max match_recognize matches median measures metadatasql min minute minutes msec millisecond milliseconds not null offset on or order outer output partition pattern prev prior regexp retain-union retain-intersection right rstream sec second seconds select set some snapshot sql stddev sum then true unidirectional until update variable weekday when where window"),builtin:{},atoms:s("false true null"),operatorChars:/^[*+\-%<>!=&|^\/#@?~]/,dateSQL:s("time"),support:s("decimallessFloat zerolessFloat binaryNumber hexNumber")}),t.defineMIME("text/x-trino",{name:"sql",keywords:s("abs absent acos add admin after all all_match alter analyze and any any_match approx_distinct approx_most_frequent approx_percentile approx_set arbitrary array_agg array_distinct array_except array_intersect array_join array_max array_min array_position array_remove array_sort array_union arrays_overlap as asc asin at at_timezone atan atan2 authorization avg bar bernoulli beta_cdf between bing_tile bing_tile_at bing_tile_coordinates bing_tile_polygon bing_tile_quadkey bing_tile_zoom_level bing_tiles_around bit_count bitwise_and bitwise_and_agg bitwise_left_shift bitwise_not bitwise_or bitwise_or_agg bitwise_right_shift bitwise_right_shift_arithmetic bitwise_xor bool_and bool_or both by call cardinality cascade case cast catalogs cbrt ceil ceiling char2hexint checksum chr classify coalesce codepoint column columns combinations comment commit committed concat concat_ws conditional constraint contains contains_sequence convex_hull_agg copartition corr cos cosh cosine_similarity count count_if covar_pop covar_samp crc32 create cross cube cume_dist current current_catalog current_date current_groups current_path current_role current_schema current_time current_timestamp current_timezone current_user data date_add date_diff date_format date_parse date_trunc day day_of_month day_of_week day_of_year deallocate default define definer degrees delete dense_rank deny desc describe descriptor distinct distributed dow doy drop e element_at else empty empty_approx_set encoding end error escape evaluate_classifier_predictions every except excluding execute exists exp explain extract false features fetch filter final first first_value flatten floor following for format format_datetime format_number from from_base from_base32 from_base64 from_base64url from_big_endian_32 from_big_endian_64 from_encoded_polyline from_geojson_geometry from_hex from_ieee754_32 from_ieee754_64 from_iso8601_date from_iso8601_timestamp from_iso8601_timestamp_nanos from_unixtime from_unixtime_nanos from_utf8 full functions geometric_mean geometry_from_hadoop_shape geometry_invalid_reason geometry_nearest_points geometry_to_bing_tiles geometry_union geometry_union_agg grant granted grants graphviz great_circle_distance greatest group grouping groups hamming_distance hash_counts having histogram hmac_md5 hmac_sha1 hmac_sha256 hmac_sha512 hour human_readable_seconds if ignore in including index infinity initial inner input insert intersect intersection_cardinality into inverse_beta_cdf inverse_normal_cdf invoker io is is_finite is_infinite is_json_scalar is_nan isolation jaccard_index join json_array json_array_contains json_array_get json_array_length json_exists json_extract json_extract_scalar json_format json_object json_parse json_query json_size json_value keep key keys kurtosis lag last last_day_of_month last_value lateral lead leading learn_classifier learn_libsvm_classifier learn_libsvm_regressor learn_regressor least left length level levenshtein_distance like limit line_interpolate_point line_interpolate_points line_locate_point listagg ln local localtime localtimestamp log log10 log2 logical lower lpad ltrim luhn_check make_set_digest map_agg map_concat map_entries map_filter map_from_entries map_keys map_union map_values map_zip_with match match_recognize matched matches materialized max max_by md5 measures merge merge_set_digest millisecond min min_by minute mod month multimap_agg multimap_from_entries murmur3 nan natural next nfc nfd nfkc nfkd ngrams no none none_match normal_cdf normalize not now nth_value ntile null nullif nulls numeric_histogram object objectid_timestamp of offset omit on one only option or order ordinality outer output over overflow parse_data_size parse_datetime parse_duration partition partitions passing past path pattern per percent_rank permute pi position pow power preceding prepare privileges properties prune qdigest_agg quarter quotes radians rand random range rank read recursive reduce reduce_agg refresh regexp_count regexp_extract regexp_extract_all regexp_like regexp_position regexp_replace regexp_split regr_intercept regr_slope regress rename render repeat repeatable replace reset respect restrict returning reverse revoke rgb right role roles rollback rollup round row_number rows rpad rtrim running scalar schema schemas second security seek select sequence serializable session set sets sha1 sha256 sha512 show shuffle sign simplify_geometry sin skewness skip slice some soundex spatial_partitioning spatial_partitions split split_part split_to_map split_to_multimap spooky_hash_v2_32 spooky_hash_v2_64 sqrt st_area st_asbinary st_astext st_boundary st_buffer st_centroid st_contains st_convexhull st_coorddim st_crosses st_difference st_dimension st_disjoint st_distance st_endpoint st_envelope st_envelopeaspts st_equals st_exteriorring st_geometries st_geometryfromtext st_geometryn st_geometrytype st_geomfrombinary st_interiorringn st_interiorrings st_intersection st_intersects st_isclosed st_isempty st_isring st_issimple st_isvalid st_length st_linefromtext st_linestring st_multipoint st_numgeometries st_numinteriorring st_numpoints st_overlaps st_point st_pointn st_points st_polygon st_relate st_startpoint st_symdifference st_touches st_union st_within st_x st_xmax st_xmin st_y st_ymax st_ymin start starts_with stats stddev stddev_pop stddev_samp string strpos subset substr substring sum system table tables tablesample tan tanh tdigest_agg text then ties timestamp_objectid timezone_hour timezone_minute to to_base to_base32 to_base64 to_base64url to_big_endian_32 to_big_endian_64 to_char to_date to_encoded_polyline to_geojson_geometry to_geometry to_hex to_ieee754_32 to_ieee754_64 to_iso8601 to_milliseconds to_spherical_geography to_timestamp to_unixtime to_utf8 trailing transaction transform transform_keys transform_values translate trim trim_array true truncate try try_cast type typeof uescape unbounded uncommitted unconditional union unique unknown unmatched unnest update upper url_decode url_encode url_extract_fragment url_extract_host url_extract_parameter url_extract_path url_extract_port url_extract_protocol url_extract_query use user using utf16 utf32 utf8 validate value value_at_quantile values values_at_quantiles var_pop var_samp variance verbose version view week week_of_year when where width_bucket wilson_interval_lower wilson_interval_upper window with with_timezone within without word_stem work wrapper write xxhash64 year year_of_week yow zip zip_with"),builtin:s("array bigint bingtile boolean char codepoints color date decimal double function geometry hyperloglog int integer interval ipaddress joniregexp json json2016 jsonpath kdbtree likepattern map model objectid p4hyperloglog precision qdigest re2jregexp real regressor row setdigest smallint sphericalgeography tdigest time timestamp tinyint uuid varbinary varchar zone"),atoms:s("false true null unknown"),operatorChars:/^[[\]|<>=!\-+*/%]/,dateSQL:s("date time timestamp zone"),support:s("decimallessFloat zerolessFloat hexNumber")})})});var oO=J((bye,_ye)=>{(function(t){typeof bye=="object"&&typeof _ye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.overlayMode=function(e,r,n){return{startState:function(){return{base:t.startState(e),overlay:t.startState(r),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(i){return{base:t.copyState(e,i.base),overlay:t.copyState(r,i.overlay),basePos:i.basePos,baseCur:null,overlayPos:i.overlayPos,overlayCur:null}},token:function(i,o){return(i!=o.streamSeen||Math.min(o.basePos,o.overlayPos)<i.start)&&(o.streamSeen=i,o.basePos=o.overlayPos=i.start),i.start==o.basePos&&(o.baseCur=e.token(i,o.base),o.basePos=i.pos),i.start==o.overlayPos&&(i.pos=i.start,o.overlayCur=r.token(i,o.overlay),o.overlayPos=i.pos),i.pos=Math.min(o.basePos,o.overlayPos),o.overlayCur==null?o.baseCur:o.baseCur!=null&&o.overlay.combineTokens||n&&o.overlay.combineTokens==null?o.baseCur+" "+o.overlayCur:o.overlayCur},indent:e.indent&&function(i,o,s){return e.indent(i.base,o,s)},electricChars:e.electricChars,innerMode:function(i){return{state:i.base,mode:e}},blankLine:function(i){var o,s;return e.blankLine&&(o=e.blankLine(i.base)),r.blankLine&&(s=r.blankLine(i.overlay)),s==null?o:n&&o!=null?o+" "+s:s}}}})});var Sye=J((xye,wye)=>{(function(t){typeof xye=="object"&&typeof wye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("coffeescript",function(e,r){var n="error";function i(ee){return new RegExp("^(("+ee.join(")|(")+"))\\b")}var o=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?|(or|and|\|\||&&|\?)=)/,s=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,u=/^[_A-Za-z$][_A-Za-z$0-9]*/,h=/^@[_A-Za-z$][_A-Za-z$0-9]*/,y=i(["and","or","not","is","isnt","in","instanceof","typeof"]),w=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],T=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","@","throw","when","until","extends"],I=i(w.concat(T));w=i(w);var P=/^('{3}|\"{3}|['\"])/,L=/^(\/{3}|\/)/,R=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],W=i(R);function G(ee,se){if(ee.sol()){se.scope.align===null&&(se.scope.align=!1);var me=se.scope.offset;if(ee.eatSpace()){var ve=ee.indentation();return ve>me&&se.scope.type=="coffee"?"indent":ve<me?"dedent":null}else me>0&&K(ee,se)}if(ee.eatSpace())return null;var U=ee.peek();if(ee.match("####"))return ee.skipToEnd(),"comment";if(ee.match("###"))return se.tokenize=V,se.tokenize(ee,se);if(U==="#")return ee.skipToEnd(),"comment";if(ee.match(/^-?[0-9\.]/,!1)){var $=!1;if(ee.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&($=!0),ee.match(/^-?\d+\.\d*/)&&($=!0),ee.match(/^-?\.\d+/)&&($=!0),$)return ee.peek()=="."&&ee.backUp(1),"number";var he=!1;if(ee.match(/^-?0x[0-9a-f]+/i)&&(he=!0),ee.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(he=!0),ee.match(/^-?0(?![\dx])/i)&&(he=!0),he)return"number"}if(ee.match(P))return se.tokenize=q(ee.current(),!1,"string"),se.tokenize(ee,se);if(ee.match(L)){if(ee.current()!="/"||ee.match(/^.*\//,!1))return se.tokenize=q(ee.current(),!0,"string-2"),se.tokenize(ee,se);ee.backUp(1)}return ee.match(o)||ee.match(y)?"operator":ee.match(s)?"punctuation":ee.match(W)?"atom":ee.match(h)||se.prop&&ee.match(u)?"property":ee.match(I)?"keyword":ee.match(u)?"variable":(ee.next(),n)}function q(ee,se,me){return function(ve,U){for(;!ve.eol();)if(ve.eatWhile(/[^'"\/\\]/),ve.eat("\\")){if(ve.next(),se&&ve.eol())return me}else{if(ve.match(ee))return U.tokenize=G,me;ve.eat(/['"\/]/)}return se&&(r.singleLineStringErrors?me=n:U.tokenize=G),me}}function V(ee,se){for(;!ee.eol();){if(ee.eatWhile(/[^#]/),ee.match("###")){se.tokenize=G;break}ee.eatWhile("#")}return"comment"}function p(ee,se,me){me=me||"coffee";for(var ve=0,U=!1,$=null,he=se.scope;he;he=he.prev)if(he.type==="coffee"||he.type=="}"){ve=he.offset+e.indentUnit;break}me!=="coffee"?(U=null,$=ee.column()+ee.current().length):se.scope.align&&(se.scope.align=!1),se.scope={offset:ve,type:me,prev:se.scope,align:U,alignOffset:$}}function K(ee,se){if(se.scope.prev)if(se.scope.type==="coffee"){for(var me=ee.indentation(),ve=!1,U=se.scope;U;U=U.prev)if(me===U.offset){ve=!0;break}if(!ve)return!0;for(;se.scope.prev&&se.scope.offset!==me;)se.scope=se.scope.prev;return!1}else return se.scope=se.scope.prev,!1}function j(ee,se){var me=se.tokenize(ee,se),ve=ee.current();ve==="return"&&(se.dedent=!0),((ve==="->"||ve==="=>")&&ee.eol()||me==="indent")&&p(ee,se);var U="[({".indexOf(ve);if(U!==-1&&p(ee,se,"])}".slice(U,U+1)),w.exec(ve)&&p(ee,se),ve=="then"&&K(ee,se),me==="dedent"&&K(ee,se))return n;if(U="])}".indexOf(ve),U!==-1){for(;se.scope.type=="coffee"&&se.scope.prev;)se.scope=se.scope.prev;se.scope.type==ve&&(se.scope=se.scope.prev)}return se.dedent&&ee.eol()&&(se.scope.type=="coffee"&&se.scope.prev&&(se.scope=se.scope.prev),se.dedent=!1),me}var Q={startState:function(ee){return{tokenize:G,scope:{offset:ee||0,type:"coffee",prev:null,align:!1},prop:!1,dedent:0}},token:function(ee,se){var me=se.scope.align===null&&se.scope;me&&ee.sol()&&(me.align=!1);var ve=j(ee,se);return ve&&ve!="comment"&&(me&&(me.align=!0),se.prop=ve=="punctuation"&&ee.current()=="."),ve},indent:function(ee,se){if(ee.tokenize!=G)return 0;var me=ee.scope,ve=se&&"])}".indexOf(se.charAt(0))>-1;if(ve)for(;me.type=="coffee"&&me.prev;)me=me.prev;var U=ve&&me.type===se.charAt(0);return me.align?me.alignOffset-(U?1:0):(U?me.prev:me).offset},lineComment:"#",fold:"indent"};return Q}),t.defineMIME("application/vnd.coffeescript","coffeescript"),t.defineMIME("text/x-coffeescript","coffeescript"),t.defineMIME("text/coffeescript","coffeescript")})});var Aye=J((Eye,Tye)=>{(function(t){typeof Eye=="object"&&typeof Tye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("stylus",function(q){for(var V=q.indentUnit,p="",K=W(e),j=/^(a|b|i|s|col|em)$/i,Q=W(o),ee=W(s),se=W(y),me=W(h),ve=W(r),U=R(r),$=W(i),he=W(n),Ce=W(u),Se=/^\s*([.]{2,3}|&&|\|\||\*\*|[?!=:]?=|[-+*\/%<>]=?|\?:|\~)/,de=R(w),we=W(T),Ue=new RegExp(/^\-(moz|ms|o|webkit)-/i),ye=W(I),ne="",st={},dt,lt,kt,ut;p.length<V;)p+=" ";function Ut(He,Xe){if(ne=He.string.match(/(^[\w-]+\s*=\s*$)|(^\s*[\w-]+\s*=\s*[\w-])|(^\s*(\.|#|@|\$|\&|\[|\d|\+|::?|\{|\>|~|\/)?\s*[\w-]*([a-z0-9-]|\*|\/\*)(\(|,)?)/),Xe.context.line.firstWord=ne?ne[0].replace(/^\s*/,""):"",Xe.context.line.indent=He.indentation(),dt=He.peek(),He.match("//"))return He.skipToEnd(),["comment","comment"];if(He.match("/*"))return Xe.tokenize=Wt,Wt(He,Xe);if(dt=='"'||dt=="'")return He.next(),Xe.tokenize=Ht(dt),Xe.tokenize(He,Xe);if(dt=="@")return He.next(),He.eatWhile(/[\w\\-]/),["def",He.current()];if(dt=="#"){if(He.next(),He.match(/^[0-9a-f]{3}([0-9a-f]([0-9a-f]{2}){0,2})?\b(?!-)/i))return["atom","atom"];if(He.match(/^[a-z][\w-]*/i))return["builtin","hash"]}return He.match(Ue)?["meta","vendor-prefixes"]:He.match(/^-?[0-9]?\.?[0-9]/)?(He.eatWhile(/[a-z%]/i),["number","unit"]):dt=="!"?(He.next(),[He.match(/^(important|optional)/i)?"keyword":"operator","important"]):dt=="."&&He.match(/^\.[a-z][\w-]*/i)?["qualifier","qualifier"]:He.match(U)?(He.peek()=="("&&(Xe.tokenize=pr),["property","word"]):He.match(/^[a-z][\w-]*\(/i)?(He.backUp(1),["keyword","mixin"]):He.match(/^(\+|-)[a-z][\w-]*\(/i)?(He.backUp(1),["keyword","block-mixin"]):He.string.match(/^\s*&/)&&He.match(/^[-_]+[a-z][\w-]*/)?["qualifier","qualifier"]:He.match(/^(\/|&)(-|_|:|\.|#|[a-z])/)?(He.backUp(1),["variable-3","reference"]):He.match(/^&{1}\s*$/)?["variable-3","reference"]:He.match(de)?["operator","operator"]:He.match(/^\$?[-_]*[a-z0-9]+[\w-]*/i)?He.match(/^(\.|\[)[\w-\'\"\]]+/i,!1)&&!Be(He.current())?(He.match("."),["variable-2","variable-name"]):["variable-2","word"]:He.match(Se)?["operator",He.current()]:/[:;,{}\[\]\(\)]/.test(dt)?(He.next(),[null,dt]):(He.next(),[null,null])}function Wt(He,Xe){for(var Rt=!1,xr;(xr=He.next())!=null;){if(Rt&&xr=="/"){Xe.tokenize=null;break}Rt=xr=="*"}return["comment","comment"]}function Ht(He){return function(Xe,Rt){for(var xr=!1,Yn;(Yn=Xe.next())!=null;){if(Yn==He&&!xr){He==")"&&Xe.backUp(1);break}xr=!xr&&Yn=="\\"}return(Yn==He||!xr&&He!=")")&&(Rt.tokenize=null),["string","string"]}}function pr(He,Xe){return He.next(),He.match(/\s*[\"\')]/,!1)?Xe.tokenize=null:Xe.tokenize=Ht(")"),[null,"("]}function zr(He,Xe,Rt,xr){this.type=He,this.indent=Xe,this.prev=Rt,this.line=xr||{firstWord:"",indent:0}}function Jt(He,Xe,Rt,xr){return xr=xr>=0?xr:V,He.context=new zr(Rt,Xe.indentation()+xr,He.context),Rt}function Qr(He,Xe){var Rt=He.context.indent-V;return Xe=Xe||!1,He.context=He.context.prev,Xe&&(He.context.indent=Rt),He.context.type}function Br(He,Xe,Rt){return st[Rt.context.type](He,Xe,Rt)}function Rr(He,Xe,Rt,xr){for(var Yn=xr||1;Yn>0;Yn--)Rt.context=Rt.context.prev;return Br(He,Xe,Rt)}function Be(He){return He.toLowerCase()in K}function Ge(He){return He=He.toLowerCase(),He in Q||He in Ce}function vt(He){return He.toLowerCase()in we}function Kt(He){return He.toLowerCase().match(Ue)}function rt(He){var Xe=He.toLowerCase(),Rt="variable-2";return Be(He)?Rt="tag":vt(He)?Rt="block-keyword":Ge(He)?Rt="property":Xe in se||Xe in ye?Rt="atom":Xe=="return"||Xe in me?Rt="keyword":He.match(/^[A-Z]/)&&(Rt="string"),Rt}function Ct(He,Xe){return ir(Xe)&&(He=="{"||He=="]"||He=="hash"||He=="qualifier")||He=="block-mixin"}function Tt(He,Xe){return He=="{"&&Xe.match(/^\s*\$?[\w-]+/i,!1)}function ar(He,Xe){return He==":"&&Xe.match(/^[a-z-]+/,!1)}function er(He){return He.sol()||He.string.match(new RegExp("^\\s*"+G(He.current())))}function ir(He){return He.eol()||He.match(/^\s*$/,!1)}function sr(He){var Xe=/^\s*[-_]*[a-z0-9]+[\w-]*/i,Rt=typeof He=="string"?He.match(Xe):He.string.match(Xe);return Rt?Rt[0].replace(/^\s*/,""):""}return st.block=function(He,Xe,Rt){if(He=="comment"&&er(Xe)||He==","&&ir(Xe)||He=="mixin")return Jt(Rt,Xe,"block",0);if(Tt(He,Xe))return Jt(Rt,Xe,"interpolation");if(ir(Xe)&&He=="]"&&!/^\s*(\.|#|:|\[|\*|&)/.test(Xe.string)&&!Be(sr(Xe)))return Jt(Rt,Xe,"block",0);if(Ct(He,Xe))return Jt(Rt,Xe,"block");if(He=="}"&&ir(Xe))return Jt(Rt,Xe,"block",0);if(He=="variable-name")return Xe.string.match(/^\s?\$[\w-\.\[\]\'\"]+$/)||vt(sr(Xe))?Jt(Rt,Xe,"variableName"):Jt(Rt,Xe,"variableName",0);if(He=="=")return!ir(Xe)&&!vt(sr(Xe))?Jt(Rt,Xe,"block",0):Jt(Rt,Xe,"block");if(He=="*"&&(ir(Xe)||Xe.match(/\s*(,|\.|#|\[|:|{)/,!1)))return ut="tag",Jt(Rt,Xe,"block");if(ar(He,Xe))return Jt(Rt,Xe,"pseudo");if(/@(font-face|media|supports|(-moz-)?document)/.test(He))return Jt(Rt,Xe,ir(Xe)?"block":"atBlock");if(/@(-(moz|ms|o|webkit)-)?keyframes$/.test(He))return Jt(Rt,Xe,"keyframes");if(/@extends?/.test(He))return Jt(Rt,Xe,"extend",0);if(He&&He.charAt(0)=="@")return Xe.indentation()>0&&Ge(Xe.current().slice(1))?(ut="variable-2","block"):/(@import|@require|@charset)/.test(He)?Jt(Rt,Xe,"block",0):Jt(Rt,Xe,"block");if(He=="reference"&&ir(Xe))return Jt(Rt,Xe,"block");if(He=="(")return Jt(Rt,Xe,"parens");if(He=="vendor-prefixes")return Jt(Rt,Xe,"vendorPrefixes");if(He=="word"){var xr=Xe.current();if(ut=rt(xr),ut=="property")return er(Xe)?Jt(Rt,Xe,"block",0):(ut="atom","block");if(ut=="tag"){if(/embed|menu|pre|progress|sub|table/.test(xr)&&Ge(sr(Xe))||Xe.string.match(new RegExp("\\[\\s*"+xr+"|"+xr+"\\s*\\]")))return ut="atom","block";if(j.test(xr)&&(er(Xe)&&Xe.string.match(/=/)||!er(Xe)&&!Xe.string.match(/^(\s*\.|#|\&|\[|\/|>|\*)/)&&!Be(sr(Xe))))return ut="variable-2",vt(sr(Xe))?"block":Jt(Rt,Xe,"block",0);if(ir(Xe))return Jt(Rt,Xe,"block")}if(ut=="block-keyword")return ut="keyword",Xe.current(/(if|unless)/)&&!er(Xe)?"block":Jt(Rt,Xe,"block");if(xr=="return")return Jt(Rt,Xe,"block",0);if(ut=="variable-2"&&Xe.string.match(/^\s?\$[\w-\.\[\]\'\"]+$/))return Jt(Rt,Xe,"block")}return Rt.context.type},st.parens=function(He,Xe,Rt){if(He=="(")return Jt(Rt,Xe,"parens");if(He==")")return Rt.context.prev.type=="parens"?Qr(Rt):Xe.string.match(/^[a-z][\w-]*\(/i)&&ir(Xe)||vt(sr(Xe))||/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(sr(Xe))||!Xe.string.match(/^-?[a-z][\w-\.\[\]\'\"]*\s*=/)&&Be(sr(Xe))?Jt(Rt,Xe,"block"):Xe.string.match(/^[\$-]?[a-z][\w-\.\[\]\'\"]*\s*=/)||Xe.string.match(/^\s*(\(|\)|[0-9])/)||Xe.string.match(/^\s+[a-z][\w-]*\(/i)||Xe.string.match(/^\s+[\$-]?[a-z]/i)?Jt(Rt,Xe,"block",0):ir(Xe)?Jt(Rt,Xe,"block"):Jt(Rt,Xe,"block",0);if(He&&He.charAt(0)=="@"&&Ge(Xe.current().slice(1))&&(ut="variable-2"),He=="word"){var xr=Xe.current();ut=rt(xr),ut=="tag"&&j.test(xr)&&(ut="variable-2"),(ut=="property"||xr=="to")&&(ut="atom")}return He=="variable-name"?Jt(Rt,Xe,"variableName"):ar(He,Xe)?Jt(Rt,Xe,"pseudo"):Rt.context.type},st.vendorPrefixes=function(He,Xe,Rt){return He=="word"?(ut="property",Jt(Rt,Xe,"block",0)):Qr(Rt)},st.pseudo=function(He,Xe,Rt){return Ge(sr(Xe.string))?Rr(He,Xe,Rt):(Xe.match(/^[a-z-]+/),ut="variable-3",ir(Xe)?Jt(Rt,Xe,"block"):Qr(Rt))},st.atBlock=function(He,Xe,Rt){if(He=="(")return Jt(Rt,Xe,"atBlock_parens");if(Ct(He,Xe))return Jt(Rt,Xe,"block");if(Tt(He,Xe))return Jt(Rt,Xe,"interpolation");if(He=="word"){var xr=Xe.current().toLowerCase();if(/^(only|not|and|or)$/.test(xr)?ut="keyword":ve.hasOwnProperty(xr)?ut="tag":he.hasOwnProperty(xr)?ut="attribute":$.hasOwnProperty(xr)?ut="property":ee.hasOwnProperty(xr)?ut="string-2":ut=rt(Xe.current()),ut=="tag"&&ir(Xe))return Jt(Rt,Xe,"block")}return He=="operator"&&/^(not|and|or)$/.test(Xe.current())&&(ut="keyword"),Rt.context.type},st.atBlock_parens=function(He,Xe,Rt){if(He=="{"||He=="}")return Rt.context.type;if(He==")")return ir(Xe)?Jt(Rt,Xe,"block"):Jt(Rt,Xe,"atBlock");if(He=="word"){var xr=Xe.current().toLowerCase();return ut=rt(xr),/^(max|min)/.test(xr)&&(ut="property"),ut=="tag"&&(j.test(xr)?ut="variable-2":ut="atom"),Rt.context.type}return st.atBlock(He,Xe,Rt)},st.keyframes=function(He,Xe,Rt){return Xe.indentation()=="0"&&(He=="}"&&er(Xe)||He=="]"||He=="hash"||He=="qualifier"||Be(Xe.current()))?Rr(He,Xe,Rt):He=="{"?Jt(Rt,Xe,"keyframes"):He=="}"?er(Xe)?Qr(Rt,!0):Jt(Rt,Xe,"keyframes"):He=="unit"&&/^[0-9]+\%$/.test(Xe.current())?Jt(Rt,Xe,"keyframes"):He=="word"&&(ut=rt(Xe.current()),ut=="block-keyword")?(ut="keyword",Jt(Rt,Xe,"keyframes")):/@(font-face|media|supports|(-moz-)?document)/.test(He)?Jt(Rt,Xe,ir(Xe)?"block":"atBlock"):He=="mixin"?Jt(Rt,Xe,"block",0):Rt.context.type},st.interpolation=function(He,Xe,Rt){return He=="{"&&Qr(Rt)&&Jt(Rt,Xe,"block"),He=="}"?Xe.string.match(/^\s*(\.|#|:|\[|\*|&|>|~|\+|\/)/i)||Xe.string.match(/^\s*[a-z]/i)&&Be(sr(Xe))?Jt(Rt,Xe,"block"):!Xe.string.match(/^(\{|\s*\&)/)||Xe.match(/\s*[\w-]/,!1)?Jt(Rt,Xe,"block",0):Jt(Rt,Xe,"block"):He=="variable-name"?Jt(Rt,Xe,"variableName",0):(He=="word"&&(ut=rt(Xe.current()),ut=="tag"&&(ut="atom")),Rt.context.type)},st.extend=function(He,Xe,Rt){return He=="["||He=="="?"extend":He=="]"?Qr(Rt):He=="word"?(ut=rt(Xe.current()),"extend"):Qr(Rt)},st.variableName=function(He,Xe,Rt){return He=="string"||He=="["||He=="]"||Xe.current().match(/^(\.|\$)/)?(Xe.current().match(/^\.[\w-]+/i)&&(ut="variable-2"),"variableName"):Rr(He,Xe,Rt)},{startState:function(He){return{tokenize:null,state:"block",context:new zr("block",He||0,null)}},token:function(He,Xe){return!Xe.tokenize&&He.eatSpace()?null:(lt=(Xe.tokenize||Ut)(He,Xe),lt&&typeof lt=="object"&&(kt=lt[1],lt=lt[0]),ut=lt,Xe.state=st[Xe.state](kt,He,Xe),ut)},indent:function(He,Xe,Rt){var xr=He.context,Yn=Xe&&Xe.charAt(0),kn=xr.indent,Cn=sr(Xe),wt=Rt.match(/^\s*/)[0].replace(/\t/g,p).length,Ot=He.context.prev?He.context.prev.line.firstWord:"",wr=He.context.prev?He.context.prev.line.indent:wt;return xr.prev&&(Yn=="}"&&(xr.type=="block"||xr.type=="atBlock"||xr.type=="keyframes")||Yn==")"&&(xr.type=="parens"||xr.type=="atBlock_parens")||Yn=="{"&&xr.type=="at")?kn=xr.indent-V:/(\})/.test(Yn)||(/@|\$|\d/.test(Yn)||/^\{/.test(Xe)||/^\s*\/(\/|\*)/.test(Xe)||/^\s*\/\*/.test(Ot)||/^\s*[\w-\.\[\]\'\"]+\s*(\?|:|\+)?=/i.test(Xe)||/^(\+|-)?[a-z][\w-]*\(/i.test(Xe)||/^return/.test(Xe)||vt(Cn)?kn=wt:/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(Yn)||Be(Cn)?/\,\s*$/.test(Ot)?kn=wr:/^\s+/.test(Rt)&&(/(\.|#|:|\[|\*|&|>|~|\+|\/)/.test(Ot)||Be(Ot))?kn=wt<=wr?wr:wr+V:kn=wt:!/,\s*$/.test(Rt)&&(Kt(Cn)||Ge(Cn))&&(vt(Ot)?kn=wt<=wr?wr:wr+V:/^\{/.test(Ot)?kn=wt<=wr?wt:wr+V:Kt(Ot)||Ge(Ot)?kn=wt>=wr?wr:wt:/^(\.|#|:|\[|\*|&|@|\+|\-|>|~|\/)/.test(Ot)||/=\s*$/.test(Ot)||Be(Ot)||/^\$[\w-\.\[\]\'\"]/.test(Ot)?kn=wr+V:kn=wt)),kn},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:"//",fold:"indent"}});var e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","bgsound","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","nobr","noframes","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","var","video"],r=["domain","regexp","url-prefix","url"],n=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],i=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","dynamic-range","video-dynamic-range"],o=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode","font-smoothing","osx-font-smoothing"],s=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],u=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],h=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],y=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","high","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row-resize","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","spell-out","square","square-button","standard","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","x-large","x-small","xor","xx-large","xx-small","bicubic","optimizespeed","grayscale","row","row-reverse","wrap","wrap-reverse","column-reverse","flex-start","flex-end","space-between","space-around","unset"],w=["in","and","or","not","is not","is a","is","isnt","defined","if unless"],T=["for","if","else","unless","from","to"],I=["null","true","false","href","title","type","not-allowed","readonly","disabled"],P=["@font-face","@keyframes","@media","@viewport","@page","@host","@supports","@block","@css"],L=e.concat(r,n,i,o,s,h,y,u,w,T,I,P);function R(q){return q=q.sort(function(V,p){return p>V}),new RegExp("^(("+q.join(")|(")+"))\\b")}function W(q){for(var V={},p=0;p<q.length;++p)V[q[p]]=!0;return V}function G(q){return q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}t.registerHelper("hintWords","stylus",L),t.defineMIME("text/x-styl","stylus")})});var Iye=J((kye,Cye)=>{(function(t){typeof kye=="object"&&typeof Cye=="object"?t(io(),ZE(),Nx(),nO()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../javascript/javascript","../css/css","../htmlmixed/htmlmixed"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("pug",function(e){var r="keyword",n="meta",i="builtin",o="qualifier",s={"{":"}","(":")","[":"]"},u=t.getMode(e,"javascript");function h(){this.javaScriptLine=!1,this.javaScriptLineExcludesColon=!1,this.javaScriptArguments=!1,this.javaScriptArgumentsDepth=0,this.isInterpolating=!1,this.interpolationNesting=0,this.jsState=t.startState(u),this.restOfLine="",this.isIncludeFiltered=!1,this.isEach=!1,this.lastTag="",this.scriptType="",this.isAttrs=!1,this.attrsNest=[],this.inAttributeName=!0,this.attributeIsType=!1,this.attrValue="",this.indentOf=1/0,this.indentToken="",this.innerMode=null,this.innerState=null,this.innerModeForLine=!1}h.prototype.copy=function(){var Be=new h;return Be.javaScriptLine=this.javaScriptLine,Be.javaScriptLineExcludesColon=this.javaScriptLineExcludesColon,Be.javaScriptArguments=this.javaScriptArguments,Be.javaScriptArgumentsDepth=this.javaScriptArgumentsDepth,Be.isInterpolating=this.isInterpolating,Be.interpolationNesting=this.interpolationNesting,Be.jsState=t.copyState(u,this.jsState),Be.innerMode=this.innerMode,this.innerMode&&this.innerState&&(Be.innerState=t.copyState(this.innerMode,this.innerState)),Be.restOfLine=this.restOfLine,Be.isIncludeFiltered=this.isIncludeFiltered,Be.isEach=this.isEach,Be.lastTag=this.lastTag,Be.scriptType=this.scriptType,Be.isAttrs=this.isAttrs,Be.attrsNest=this.attrsNest.slice(),Be.inAttributeName=this.inAttributeName,Be.attributeIsType=this.attributeIsType,Be.attrValue=this.attrValue,Be.indentOf=this.indentOf,Be.indentToken=this.indentToken,Be.innerModeForLine=this.innerModeForLine,Be};function y(Be,Ge){if(Be.sol()&&(Ge.javaScriptLine=!1,Ge.javaScriptLineExcludesColon=!1),Ge.javaScriptLine){if(Ge.javaScriptLineExcludesColon&&Be.peek()===":"){Ge.javaScriptLine=!1,Ge.javaScriptLineExcludesColon=!1;return}var vt=u.token(Be,Ge.jsState);return Be.eol()&&(Ge.javaScriptLine=!1),vt||!0}}function w(Be,Ge){if(Ge.javaScriptArguments){if(Ge.javaScriptArgumentsDepth===0&&Be.peek()!=="("){Ge.javaScriptArguments=!1;return}if(Be.peek()==="("?Ge.javaScriptArgumentsDepth++:Be.peek()===")"&&Ge.javaScriptArgumentsDepth--,Ge.javaScriptArgumentsDepth===0){Ge.javaScriptArguments=!1;return}var vt=u.token(Be,Ge.jsState);return vt||!0}}function T(Be){if(Be.match(/^yield\b/))return"keyword"}function I(Be){if(Be.match(/^(?:doctype) *([^\n]+)?/))return n}function P(Be,Ge){if(Be.match("#{"))return Ge.isInterpolating=!0,Ge.interpolationNesting=0,"punctuation"}function L(Be,Ge){if(Ge.isInterpolating){if(Be.peek()==="}"){if(Ge.interpolationNesting--,Ge.interpolationNesting<0)return Be.next(),Ge.isInterpolating=!1,"punctuation"}else Be.peek()==="{"&&Ge.interpolationNesting++;return u.token(Be,Ge.jsState)||!0}}function R(Be,Ge){if(Be.match(/^case\b/))return Ge.javaScriptLine=!0,r}function W(Be,Ge){if(Be.match(/^when\b/))return Ge.javaScriptLine=!0,Ge.javaScriptLineExcludesColon=!0,r}function G(Be){if(Be.match(/^default\b/))return r}function q(Be,Ge){if(Be.match(/^extends?\b/))return Ge.restOfLine="string",r}function V(Be,Ge){if(Be.match(/^append\b/))return Ge.restOfLine="variable",r}function p(Be,Ge){if(Be.match(/^prepend\b/))return Ge.restOfLine="variable",r}function K(Be,Ge){if(Be.match(/^block\b *(?:(prepend|append)\b)?/))return Ge.restOfLine="variable",r}function j(Be,Ge){if(Be.match(/^include\b/))return Ge.restOfLine="string",r}function Q(Be,Ge){if(Be.match(/^include:([a-zA-Z0-9\-]+)/,!1)&&Be.match("include"))return Ge.isIncludeFiltered=!0,r}function ee(Be,Ge){if(Ge.isIncludeFiltered){var vt=de(Be,Ge);return Ge.isIncludeFiltered=!1,Ge.restOfLine="string",vt}}function se(Be,Ge){if(Be.match(/^mixin\b/))return Ge.javaScriptLine=!0,r}function me(Be,Ge){if(Be.match(/^\+([-\w]+)/))return Be.match(/^\( *[-\w]+ *=/,!1)||(Ge.javaScriptArguments=!0,Ge.javaScriptArgumentsDepth=0),"variable";if(Be.match("+#{",!1))return Be.next(),Ge.mixinCallAfter=!0,P(Be,Ge)}function ve(Be,Ge){if(Ge.mixinCallAfter)return Ge.mixinCallAfter=!1,Be.match(/^\( *[-\w]+ *=/,!1)||(Ge.javaScriptArguments=!0,Ge.javaScriptArgumentsDepth=0),!0}function U(Be,Ge){if(Be.match(/^(if|unless|else if|else)\b/))return Ge.javaScriptLine=!0,r}function $(Be,Ge){if(Be.match(/^(- *)?(each|for)\b/))return Ge.isEach=!0,r}function he(Be,Ge){if(Ge.isEach){if(Be.match(/^ in\b/))return Ge.javaScriptLine=!0,Ge.isEach=!1,r;if(Be.sol()||Be.eol())Ge.isEach=!1;else if(Be.next()){for(;!Be.match(/^ in\b/,!1)&&Be.next(););return"variable"}}}function Ce(Be,Ge){if(Be.match(/^while\b/))return Ge.javaScriptLine=!0,r}function Se(Be,Ge){var vt;if(vt=Be.match(/^(\w(?:[-:\w]*\w)?)\/?/))return Ge.lastTag=vt[1].toLowerCase(),Ge.lastTag==="script"&&(Ge.scriptType="application/javascript"),"tag"}function de(Be,Ge){if(Be.match(/^:([\w\-]+)/)){var vt;return e&&e.innerModes&&(vt=e.innerModes(Be.current().substring(1))),vt||(vt=Be.current().substring(1)),typeof vt=="string"&&(vt=t.getMode(e,vt)),pr(Be,Ge,vt),"atom"}}function we(Be,Ge){if(Be.match(/^(!?=|-)/))return Ge.javaScriptLine=!0,"punctuation"}function Ue(Be){if(Be.match(/^#([\w-]+)/))return i}function ye(Be){if(Be.match(/^\.([\w-]+)/))return o}function ne(Be,Ge){if(Be.peek()=="(")return Be.next(),Ge.isAttrs=!0,Ge.attrsNest=[],Ge.inAttributeName=!0,Ge.attrValue="",Ge.attributeIsType=!1,"punctuation"}function st(Be,Ge){if(Ge.isAttrs){if(s[Be.peek()]&&Ge.attrsNest.push(s[Be.peek()]),Ge.attrsNest[Ge.attrsNest.length-1]===Be.peek())Ge.attrsNest.pop();else if(Be.eat(")"))return Ge.isAttrs=!1,"punctuation";if(Ge.inAttributeName&&Be.match(/^[^=,\)!]+/))return(Be.peek()==="="||Be.peek()==="!")&&(Ge.inAttributeName=!1,Ge.jsState=t.startState(u),Ge.lastTag==="script"&&Be.current().trim().toLowerCase()==="type"?Ge.attributeIsType=!0:Ge.attributeIsType=!1),"attribute";var vt=u.token(Be,Ge.jsState);if(Ge.attributeIsType&&vt==="string"&&(Ge.scriptType=Be.current().toString()),Ge.attrsNest.length===0&&(vt==="string"||vt==="variable"||vt==="keyword"))try{return Function("","var x "+Ge.attrValue.replace(/,\s*$/,"").replace(/^!/,"")),Ge.inAttributeName=!0,Ge.attrValue="",Be.backUp(Be.current().length),st(Be,Ge)}catch{}return Ge.attrValue+=Be.current(),vt||!0}}function dt(Be,Ge){if(Be.match(/^&attributes\b/))return Ge.javaScriptArguments=!0,Ge.javaScriptArgumentsDepth=0,"keyword"}function lt(Be){if(Be.sol()&&Be.eatSpace())return"indent"}function kt(Be,Ge){if(Be.match(/^ *\/\/(-)?([^\n]*)/))return Ge.indentOf=Be.indentation(),Ge.indentToken="comment","comment"}function ut(Be){if(Be.match(/^: */))return"colon"}function Ut(Be,Ge){if(Be.match(/^(?:\| ?| )([^\n]+)/))return"string";if(Be.match(/^(<[^\n]*)/,!1))return pr(Be,Ge,"htmlmixed"),Ge.innerModeForLine=!0,zr(Be,Ge,!0)}function Wt(Be,Ge){if(Be.eat(".")){var vt=null;return Ge.lastTag==="script"&&Ge.scriptType.toLowerCase().indexOf("javascript")!=-1?vt=Ge.scriptType.toLowerCase().replace(/"|'/g,""):Ge.lastTag==="style"&&(vt="css"),pr(Be,Ge,vt),"dot"}}function Ht(Be){return Be.next(),null}function pr(Be,Ge,vt){vt=t.mimeModes[vt]||vt,vt=e.innerModes&&e.innerModes(vt)||vt,vt=t.mimeModes[vt]||vt,vt=t.getMode(e,vt),Ge.indentOf=Be.indentation(),vt&&vt.name!=="null"?Ge.innerMode=vt:Ge.indentToken="string"}function zr(Be,Ge,vt){if(Be.indentation()>Ge.indentOf||Ge.innerModeForLine&&!Be.sol()||vt)return Ge.innerMode?(Ge.innerState||(Ge.innerState=Ge.innerMode.startState?t.startState(Ge.innerMode,Be.indentation()):{}),Be.hideFirstChars(Ge.indentOf+2,function(){return Ge.innerMode.token(Be,Ge.innerState)||!0})):(Be.skipToEnd(),Ge.indentToken);Be.sol()&&(Ge.indentOf=1/0,Ge.indentToken=null,Ge.innerMode=null,Ge.innerState=null)}function Jt(Be,Ge){if(Be.sol()&&(Ge.restOfLine=""),Ge.restOfLine){Be.skipToEnd();var vt=Ge.restOfLine;return Ge.restOfLine="",vt}}function Qr(){return new h}function Br(Be){return Be.copy()}function Rr(Be,Ge){var vt=zr(Be,Ge)||Jt(Be,Ge)||L(Be,Ge)||ee(Be,Ge)||he(Be,Ge)||st(Be,Ge)||y(Be,Ge)||w(Be,Ge)||ve(Be,Ge)||T(Be)||I(Be)||P(Be,Ge)||R(Be,Ge)||W(Be,Ge)||G(Be)||q(Be,Ge)||V(Be,Ge)||p(Be,Ge)||K(Be,Ge)||j(Be,Ge)||Q(Be,Ge)||se(Be,Ge)||me(Be,Ge)||U(Be,Ge)||$(Be,Ge)||Ce(Be,Ge)||Se(Be,Ge)||de(Be,Ge)||we(Be,Ge)||Ue(Be)||ye(Be)||ne(Be,Ge)||dt(Be,Ge)||lt(Be)||Ut(Be,Ge)||kt(Be,Ge)||ut(Be)||Wt(Be,Ge)||Ht(Be);return vt===!0?null:vt}return{startState:Qr,copyState:Br,token:Rr}},"javascript","css","htmlmixed"),t.defineMIME("text/x-pug","pug"),t.defineMIME("text/x-jade","pug")})});var Pye=J((Dye,Oye)=>{(function(t){typeof Dye=="object"&&typeof Oye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.multiplexingMode=function(e){var r=Array.prototype.slice.call(arguments,1);function n(i,o,s,u){if(typeof o=="string"){var h=i.indexOf(o,s);return u&&h>-1?h+o.length:h}var y=o.exec(s?i.slice(s):i);return y?y.index+s+(u?y[0].length:0):-1}return{startState:function(){return{outer:t.startState(e),innerActive:null,inner:null,startingInner:!1}},copyState:function(i){return{outer:t.copyState(e,i.outer),innerActive:i.innerActive,inner:i.innerActive&&t.copyState(i.innerActive.mode,i.inner),startingInner:i.startingInner}},token:function(i,o){if(o.innerActive){var L=o.innerActive,u=i.string;if(!L.close&&i.sol())return o.innerActive=o.inner=null,this.token(i,o);var w=L.close&&!o.startingInner?n(u,L.close,i.pos,L.parseDelimiters):-1;if(w==i.pos&&!L.parseDelimiters)return i.match(L.close),o.innerActive=o.inner=null,L.delimStyle&&L.delimStyle+" "+L.delimStyle+"-close";w>-1&&(i.string=u.slice(0,w));var R=L.mode.token(i,o.inner);return w>-1?i.string=u:i.pos>i.start&&(o.startingInner=!1),w==i.pos&&L.parseDelimiters&&(o.innerActive=o.inner=null),L.innerStyle&&(R?R=R+" "+L.innerStyle:R=L.innerStyle),R}else{for(var s=1/0,u=i.string,h=0;h<r.length;++h){var y=r[h],w=n(u,y.open,i.pos);if(w==i.pos){y.parseDelimiters||i.match(y.open),o.startingInner=!!y.parseDelimiters,o.innerActive=y;var T=0;if(e.indent){var I=e.indent(o.outer,"","");I!==t.Pass&&(T=I)}return o.inner=t.startState(y.mode,T),y.delimStyle&&y.delimStyle+" "+y.delimStyle+"-open"}else w!=-1&&w<s&&(s=w)}s!=1/0&&(i.string=u.slice(0,s));var P=e.token(i,o.outer);return s!=1/0&&(i.string=u),P}},indent:function(i,o,s){var u=i.innerActive?i.innerActive.mode:e;return u.indent?u.indent(i.innerActive?i.inner:i.outer,o,s):t.Pass},blankLine:function(i){var o=i.innerActive?i.innerActive.mode:e;if(o.blankLine&&o.blankLine(i.innerActive?i.inner:i.outer),i.innerActive)i.innerActive.close===`
`&&(i.innerActive=i.inner=null);else for(var s=0;s<r.length;++s){var u=r[s];u.open===`
`&&(i.innerActive=u,i.inner=t.startState(u.mode,o.indent?o.indent(i.outer,"",""):0))}},electricChars:e.electricChars,innerMode:function(i){return i.inner?{state:i.inner,mode:i.innerActive.mode}:{state:i.outer,mode:e}}}}})});var Rye=J((Mye,Lye)=>{(function(t){typeof Mye=="object"&&typeof Lye=="object"?t(io(),y6(),Pye()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../../addon/mode/simple","../../addon/mode/multiplex"],t):t(CodeMirror)})(function(t){"use strict";t.defineSimpleMode("handlebars-tags",{start:[{regex:/\{\{\{/,push:"handlebars_raw",token:"tag"},{regex:/\{\{!--/,push:"dash_comment",token:"comment"},{regex:/\{\{!/,push:"comment",token:"comment"},{regex:/\{\{/,push:"handlebars",token:"tag"}],handlebars_raw:[{regex:/\}\}\}/,pop:!0,token:"tag"}],handlebars:[{regex:/\}\}/,pop:!0,token:"tag"},{regex:/"(?:[^\\"]|\\.)*"?/,token:"string"},{regex:/'(?:[^\\']|\\.)*'?/,token:"string"},{regex:/>|[#\/]([A-Za-z_]\w*)/,token:"keyword"},{regex:/(?:else|this)\b/,token:"keyword"},{regex:/\d+/i,token:"number"},{regex:/=|~|@|true|false/,token:"atom"},{regex:/(?:\.\.\/)*(?:[A-Za-z_][\w\.]*)+/,token:"variable-2"}],dash_comment:[{regex:/--\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],comment:[{regex:/\}\}/,pop:!0,token:"comment"},{regex:/./,token:"comment"}],meta:{blockCommentStart:"{{--",blockCommentEnd:"--}}"}}),t.defineMode("handlebars",function(e,r){var n=t.getMode(e,"handlebars-tags");return!r||!r.base?n:t.multiplexingMode(t.getMode(e,r.base),{open:"{{",close:/\}\}\}?/,mode:n,parseDelimiters:!0})}),t.defineMIME("text/x-handlebars-template","handlebars")})});var Nye=J((Fye,qye)=>{(function(t){"use strict";typeof Fye=="object"&&typeof qye=="object"?t(io(),oO(),Bx(),ZE(),Sye(),Nx(),b6(),Aye(),Iye(),Rye()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../../addon/mode/overlay","../xml/xml","../javascript/javascript","../coffeescript/coffeescript","../css/css","../sass/sass","../stylus/stylus","../pug/pug","../handlebars/handlebars"],t):t(CodeMirror)})(function(t){var e={script:[["lang",/coffee(script)?/,"coffeescript"],["type",/^(?:text|application)\/(?:x-)?coffee(?:script)?$/,"coffeescript"],["lang",/^babel$/,"javascript"],["type",/^text\/babel$/,"javascript"],["type",/^text\/ecmascript-\d+$/,"javascript"]],style:[["lang",/^stylus$/i,"stylus"],["lang",/^sass$/i,"sass"],["lang",/^less$/i,"text/x-less"],["lang",/^scss$/i,"text/x-scss"],["type",/^(text\/)?(x-)?styl(us)?$/i,"stylus"],["type",/^text\/sass/i,"sass"],["type",/^(text\/)?(x-)?scss$/i,"text/x-scss"],["type",/^(text\/)?(x-)?less$/i,"text/x-less"]],template:[["lang",/^vue-template$/i,"vue"],["lang",/^pug$/i,"pug"],["lang",/^handlebars$/i,"handlebars"],["type",/^(text\/)?(x-)?pug$/i,"pug"],["type",/^text\/x-handlebars-template$/i,"handlebars"],[null,null,"vue-template"]]};t.defineMode("vue-template",function(r,n){var i={token:function(o){if(o.match(/^\{\{.*?\}\}/))return"meta mustache";for(;o.next()&&!o.match("{{",!1););return null}};return t.overlayMode(t.getMode(r,n.backdrop||"text/html"),i)}),t.defineMode("vue",function(r){return t.getMode(r,{name:"htmlmixed",tags:e})},"htmlmixed","xml","javascript","coffeescript","css","sass","stylus","pug","handlebars"),t.defineMIME("script/x-vue","vue"),t.defineMIME("text/x-vue","vue")})});var jye=J((Bye,zye)=>{(function(t){typeof Bye=="object"&&typeof zye=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineMode("yaml",function(){var e=["true","false","on","off","yes","no"],r=new RegExp("\\b(("+e.join(")|(")+"))$","i");return{token:function(n,i){var o=n.peek(),s=i.escaped;if(i.escaped=!1,o=="#"&&(n.pos==0||/\s/.test(n.string.charAt(n.pos-1))))return n.skipToEnd(),"comment";if(n.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(i.literal&&n.indentation()>i.keyCol)return n.skipToEnd(),"string";if(i.literal&&(i.literal=!1),n.sol()){if(i.keyCol=0,i.pair=!1,i.pairStart=!1,n.match("---")||n.match("..."))return"def";if(n.match(/\s*-\s+/))return"meta"}if(n.match(/^(\{|\}|\[|\])/))return o=="{"?i.inlinePairs++:o=="}"?i.inlinePairs--:o=="["?i.inlineList++:i.inlineList--,"meta";if(i.inlineList>0&&!s&&o==",")return n.next(),"meta";if(i.inlinePairs>0&&!s&&o==",")return i.keyCol=0,i.pair=!1,i.pairStart=!1,n.next(),"meta";if(i.pairStart){if(n.match(/^\s*(\||\>)\s*/))return i.literal=!0,"meta";if(n.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(i.inlinePairs==0&&n.match(/^\s*-?[0-9\.\,]+\s?$/)||i.inlinePairs>0&&n.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(n.match(r))return"keyword"}return!i.pair&&n.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^\s,\[\]{}#&*!|>'"%@`])[^#:]*(?=:($|\s))/)?(i.pair=!0,i.keyCol=n.indentation(),"atom"):i.pair&&n.match(/^:\s*/)?(i.pairStart=!0,"meta"):(i.pairStart=!1,i.escaped=o=="\\",n.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},lineComment:"#",fold:"indent"}}),t.defineMIME("text/x-yaml","yaml"),t.defineMIME("text/yaml","yaml")})});var f0e=J((u0e,c0e)=>{(function(t){typeof u0e=="object"&&typeof c0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";var e=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,r=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,n=/[*+-]\s/;t.commands.newlineAndIndentContinueMarkdownList=function(o){if(o.getOption("disableInput"))return t.Pass;for(var s=o.listSelections(),u=[],h=0;h<s.length;h++){var y=s[h].head,w=o.getStateAfter(y.line),T=t.innerMode(o.getMode(),w);if(T.mode.name!=="markdown"&&T.mode.helperType!=="markdown"){o.execCommand("newlineAndIndent");return}else w=T.state;var I=w.list!==!1,P=w.quote!==0,L=o.getLine(y.line),R=e.exec(L),W=/^\s*$/.test(L.slice(0,y.ch));if(!s[h].empty()||!I&&!P||!R||W){o.execCommand("newlineAndIndent");return}if(r.test(L)){var G=P&&/>\s*$/.test(L),q=!/>\s*$/.test(L);(G||q)&&o.replaceRange("",{line:y.line,ch:0},{line:y.line,ch:y.ch+1}),u[h]=`
`}else{var V=R[1],p=R[5],K=!(n.test(R[2])||R[2].indexOf(">")>=0),j=K?parseInt(R[3],10)+1+R[4]:R[2].replace("x"," ");u[h]=`
`+V+j+p,K&&i(o,y)}}o.replaceSelections(u)};function i(o,s){var u=s.line,h=0,y=0,w=e.exec(o.getLine(u)),T=w[1];do{h+=1;var I=u+h,P=o.getLine(I),L=e.exec(P);if(L){var R=L[1],W=parseInt(w[3],10)+h-y,G=parseInt(L[3],10),q=G;if(T===R&&!isNaN(G))W===G&&(q=G+1),W>G&&(q=W+1),o.replaceRange(P.replace(e,R+q+L[4]+L[5]),{line:I,ch:0},{line:I,ch:P.length});else{if(T.length>R.length||T.length<R.length&&h===1)return;y+=1}}}while(L)}})});var d0e=J(()=>{var h0e=io();h0e.commands.tabAndIndentMarkdownList=function(t){var e=t.listSelections(),r=e[0].head,n=t.getStateAfter(r.line),i=n.list!==!1;if(i){t.execCommand("indentMore");return}if(t.options.indentWithTabs)t.execCommand("insertTab");else{var o=Array(t.options.tabSize+1).join(" ");t.replaceSelection(o)}};h0e.commands.shiftTabAndUnindentMarkdownList=function(t){var e=t.listSelections(),r=e[0].head,n=t.getStateAfter(r.line),i=n.list!==!1;if(i){t.execCommand("indentLess");return}if(t.options.indentWithTabs)t.execCommand("insertTab");else{var o=Array(t.options.tabSize+1).join(" ");t.replaceSelection(o)}}});var g0e=J((p0e,m0e)=>{(function(t){typeof p0e=="object"&&typeof m0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineOption("fullScreen",!1,function(n,i,o){o==t.Init&&(o=!1),!o!=!i&&(i?e(n):r(n))});function e(n){var i=n.getWrapperElement();n.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:i.style.width,height:i.style.height},i.style.width="",i.style.height="auto",i.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",n.refresh()}function r(n){var i=n.getWrapperElement();i.className=i.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var o=n.state.fullScreenRestore;i.style.width=o.width,i.style.height=o.height,window.scrollTo(o.scrollLeft,o.scrollTop),n.refresh()}})});var b0e=J((v0e,y0e)=>{(function(t){typeof v0e=="object"&&typeof y0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){t.defineOption("placeholder","",function(u,h,y){var w=y&&y!=t.Init;if(h&&!w)u.on("blur",i),u.on("change",o),u.on("swapDoc",o),t.on(u.getInputField(),"compositionupdate",u.state.placeholderCompose=function(){n(u)}),o(u);else if(!h&&w){u.off("blur",i),u.off("change",o),u.off("swapDoc",o),t.off(u.getInputField(),"compositionupdate",u.state.placeholderCompose),e(u);var T=u.getWrapperElement();T.className=T.className.replace(" CodeMirror-empty","")}h&&!u.hasFocus()&&i(u)});function e(u){u.state.placeholder&&(u.state.placeholder.parentNode.removeChild(u.state.placeholder),u.state.placeholder=null)}function r(u){e(u);var h=u.state.placeholder=document.createElement("pre");h.style.cssText="height: 0; overflow: visible",h.style.direction=u.getOption("direction"),h.className="CodeMirror-placeholder CodeMirror-line-like";var y=u.getOption("placeholder");typeof y=="string"&&(y=document.createTextNode(y)),h.appendChild(y),u.display.lineSpace.insertBefore(h,u.display.lineSpace.firstChild)}function n(u){setTimeout(function(){var h=!1;if(u.lineCount()==1){var y=u.getInputField();h=y.nodeName=="TEXTAREA"?!u.getLine(0).length:!/[^\u200b]/.test(y.querySelector(".CodeMirror-line").textContent)}h?r(u):e(u)},20)}function i(u){s(u)&&r(u)}function o(u){var h=u.getWrapperElement(),y=s(u);h.className=h.className.replace(" CodeMirror-empty","")+(y?" CodeMirror-empty":""),y?r(u):e(u)}function s(u){return u.lineCount()===1&&u.getLine(0)===""}})});var w0e=J((_0e,x0e)=>{(function(t){typeof _0e=="object"&&typeof x0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineOption("autoRefresh",!1,function(n,i){n.state.autoRefresh&&(r(n,n.state.autoRefresh),n.state.autoRefresh=null),i&&n.display.wrapper.offsetHeight==0&&e(n,n.state.autoRefresh={delay:i.delay||250})});function e(n,i){function o(){n.display.wrapper.offsetHeight?(r(n,i),n.display.lastWrapHeight!=n.display.wrapper.clientHeight&&n.refresh()):i.timeout=setTimeout(o,i.delay)}i.timeout=setTimeout(o,i.delay),i.hurry=function(){clearTimeout(i.timeout),i.timeout=setTimeout(o,50)},t.on(window,"mouseup",i.hurry),t.on(window,"keyup",i.hurry)}function r(n,i){clearTimeout(i.timeout),t.off(window,"mouseup",i.hurry),t.off(window,"keyup",i.hurry)}})});var T0e=J((S0e,E0e)=>{(function(t){typeof S0e=="object"&&typeof E0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";t.defineOption("styleSelectedText",!1,function(w,T,I){var P=I&&I!=t.Init;T&&!P?(w.state.markedSelection=[],w.state.markedSelectionStyle=typeof T=="string"?T:"CodeMirror-selectedtext",h(w),w.on("cursorActivity",e),w.on("change",r)):!T&&P&&(w.off("cursorActivity",e),w.off("change",r),u(w),w.state.markedSelection=w.state.markedSelectionStyle=null)});function e(w){w.state.markedSelection&&w.operation(function(){y(w)})}function r(w){w.state.markedSelection&&w.state.markedSelection.length&&w.operation(function(){u(w)})}var n=8,i=t.Pos,o=t.cmpPos;function s(w,T,I,P){if(o(T,I)!=0)for(var L=w.state.markedSelection,R=w.state.markedSelectionStyle,W=T.line;;){var G=W==T.line?T:i(W,0),q=W+n,V=q>=I.line,p=V?I:i(q,0),K=w.markText(G,p,{className:R});if(P==null?L.push(K):L.splice(P++,0,K),V)break;W=q}}function u(w){for(var T=w.state.markedSelection,I=0;I<T.length;++I)T[I].clear();T.length=0}function h(w){u(w);for(var T=w.listSelections(),I=0;I<T.length;I++)s(w,T[I].from(),T[I].to())}function y(w){if(!w.somethingSelected())return u(w);if(w.listSelections().length>1)return h(w);var T=w.getCursor("start"),I=w.getCursor("end"),P=w.state.markedSelection;if(!P.length)return s(w,T,I);var L=P[0].find(),R=P[P.length-1].find();if(!L||!R||I.line-T.line<=n||o(T,R.to)>=0||o(I,L.from)<=0)return h(w);for(;o(T,L.from)>0;)P.shift().clear(),L=P[0].find();for(o(T,L.from)<0&&(L.to.line-T.line<n?(P.shift().clear(),s(w,T,L.to,0)):s(w,T,L.from,0));o(I,R.to)<0;)P.pop().clear(),R=P[P.length-1].find();o(I,R.to)>0&&(I.line-R.from.line<n?(P.pop().clear(),s(w,R.from,I)):s(w,R.to,I))}})});var C0e=J((A0e,k0e)=>{(function(t){typeof A0e=="object"&&typeof k0e=="object"?t(io()):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],t):t(CodeMirror)})(function(t){"use strict";var e=t.Pos;function r(W){var G=W.flags;return G??(W.ignoreCase?"i":"")+(W.global?"g":"")+(W.multiline?"m":"")}function n(W,G){for(var q=r(W),V=q,p=0;p<G.length;p++)V.indexOf(G.charAt(p))==-1&&(V+=G.charAt(p));return q==V?W:new RegExp(W.source,V)}function i(W){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(W.source)}function o(W,G,q){G=n(G,"g");for(var V=q.line,p=q.ch,K=W.lastLine();V<=K;V++,p=0){G.lastIndex=p;var j=W.getLine(V),Q=G.exec(j);if(Q)return{from:e(V,Q.index),to:e(V,Q.index+Q[0].length),match:Q}}}function s(W,G,q){if(!i(G))return o(W,G,q);G=n(G,"gm");for(var V,p=1,K=q.line,j=W.lastLine();K<=j;){for(var Q=0;Q<p&&!(K>j);Q++){var ee=W.getLine(K++);V=V==null?ee:V+`
`+ee}p=p*2,G.lastIndex=q.ch;var se=G.exec(V);if(se){var me=V.slice(0,se.index).split(`
`),ve=se[0].split(`
`),U=q.line+me.length-1,$=me[me.length-1].length;return{from:e(U,$),to:e(U+ve.length-1,ve.length==1?$+ve[0].length:ve[ve.length-1].length),match:se}}}}function u(W,G,q){for(var V,p=0;p<=W.length;){G.lastIndex=p;var K=G.exec(W);if(!K)break;var j=K.index+K[0].length;if(j>W.length-q)break;(!V||j>V.index+V[0].length)&&(V=K),p=K.index+1}return V}function h(W,G,q){G=n(G,"g");for(var V=q.line,p=q.ch,K=W.firstLine();V>=K;V--,p=-1){var j=W.getLine(V),Q=u(j,G,p<0?0:j.length-p);if(Q)return{from:e(V,Q.index),to:e(V,Q.index+Q[0].length),match:Q}}}function y(W,G,q){if(!i(G))return h(W,G,q);G=n(G,"gm");for(var V,p=1,K=W.getLine(q.line).length-q.ch,j=q.line,Q=W.firstLine();j>=Q;){for(var ee=0;ee<p&&j>=Q;ee++){var se=W.getLine(j--);V=V==null?se:se+`
`+V}p*=2;var me=u(V,G,K);if(me){var ve=V.slice(0,me.index).split(`
`),U=me[0].split(`
`),$=j+ve.length,he=ve[ve.length-1].length;return{from:e($,he),to:e($+U.length-1,U.length==1?he+U[0].length:U[U.length-1].length),match:me}}}}var w,T;String.prototype.normalize?(w=function(W){return W.normalize("NFD").toLowerCase()},T=function(W){return W.normalize("NFD")}):(w=function(W){return W.toLowerCase()},T=function(W){return W});function I(W,G,q,V){if(W.length==G.length)return q;for(var p=0,K=q+Math.max(0,W.length-G.length);;){if(p==K)return p;var j=p+K>>1,Q=V(W.slice(0,j)).length;if(Q==q)return j;Q>q?K=j:p=j+1}}function P(W,G,q,V){if(!G.length)return null;var p=V?w:T,K=p(G).split(/\r|\n\r?/);e:for(var j=q.line,Q=q.ch,ee=W.lastLine()+1-K.length;j<=ee;j++,Q=0){var se=W.getLine(j).slice(Q),me=p(se);if(K.length==1){var ve=me.indexOf(K[0]);if(ve==-1)continue e;var q=I(se,me,ve,p)+Q;return{from:e(j,I(se,me,ve,p)+Q),to:e(j,I(se,me,ve+K[0].length,p)+Q)}}else{var U=me.length-K[0].length;if(me.slice(U)!=K[0])continue e;for(var $=1;$<K.length-1;$++)if(p(W.getLine(j+$))!=K[$])continue e;var he=W.getLine(j+K.length-1),Ce=p(he),Se=K[K.length-1];if(Ce.slice(0,Se.length)!=Se)continue e;return{from:e(j,I(se,me,U,p)+Q),to:e(j+K.length-1,I(he,Ce,Se.length,p))}}}}function L(W,G,q,V){if(!G.length)return null;var p=V?w:T,K=p(G).split(/\r|\n\r?/);e:for(var j=q.line,Q=q.ch,ee=W.firstLine()-1+K.length;j>=ee;j--,Q=-1){var se=W.getLine(j);Q>-1&&(se=se.slice(0,Q));var me=p(se);if(K.length==1){var ve=me.lastIndexOf(K[0]);if(ve==-1)continue e;return{from:e(j,I(se,me,ve,p)),to:e(j,I(se,me,ve+K[0].length,p))}}else{var U=K[K.length-1];if(me.slice(0,U.length)!=U)continue e;for(var $=1,q=j-K.length+1;$<K.length-1;$++)if(p(W.getLine(q+$))!=K[$])continue e;var he=W.getLine(j+1-K.length),Ce=p(he);if(Ce.slice(Ce.length-K[0].length)!=K[0])continue e;return{from:e(j+1-K.length,I(he,Ce,he.length-K[0].length,p)),to:e(j,I(se,me,U.length,p))}}}}function R(W,G,q,V){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=W,q=q?W.clipPos(q):e(0,0),this.pos={from:q,to:q};var p;typeof V=="object"?p=V.caseFold:(p=V,V=null),typeof G=="string"?(p==null&&(p=!1),this.matches=function(K,j){return(K?L:P)(W,G,j,p)}):(G=n(G,"gm"),!V||V.multiline!==!1?this.matches=function(K,j){return(K?y:s)(W,G,j)}:this.matches=function(K,j){return(K?h:o)(W,G,j)})}R.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(W){var G=this.doc.clipPos(W?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(G=e(G.line,G.ch),W?(G.ch--,G.ch<0&&(G.line--,G.ch=(this.doc.getLine(G.line)||"").length)):(G.ch++,G.ch>(this.doc.getLine(G.line)||"").length&&(G.ch=0,G.line++)),t.cmpPos(G,this.doc.clipPos(G))!=0))return this.atOccurrence=!1;var q=this.matches(W,G);if(this.afterEmptyMatch=q&&t.cmpPos(q.from,q.to)==0,q)return this.pos=q,this.atOccurrence=!0,this.pos.match||!0;var V=e(W?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:V,to:V},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(W,G){if(this.atOccurrence){var q=t.splitLines(W);this.doc.replaceRange(q,this.pos.from,this.pos.to,G),this.pos.to=e(this.pos.from.line+q.length-1,q[q.length-1].length+(q.length==1?this.pos.from.ch:0))}}},t.defineExtension("getSearchCursor",function(W,G,q){return new R(this.doc,W,G,q)}),t.defineDocExtension("getSearchCursor",function(W,G,q){return new R(this,W,G,q)}),t.defineExtension("selectMatches",function(W,G){for(var q=[],V=this.getSearchCursor(W,this.getCursor("from"),G);V.findNext()&&!(t.cmpPos(V.to(),this.getCursor("to"))>0);)q.push({anchor:V.from(),head:V.to()});q.length&&this.setSelections(q,0)})})});var O0e=J((I0e,D0e)=>{(function(t){typeof I0e=="object"&&typeof D0e=="object"?t(io(),iO(),oO()):typeof define=="function"&&define.amd?define(["../../lib/codemirror","../markdown/markdown","../../addon/mode/overlay"],t):t(CodeMirror)})(function(t){"use strict";var e=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?«»“”‘’]))/i;t.defineMode("gfm",function(r,n){var i=0;function o(y){return y.code=!1,null}var s={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(y){return{code:y.code,codeBlock:y.codeBlock,ateSpace:y.ateSpace}},token:function(y,w){if(w.combineTokens=null,w.codeBlock)return y.match(/^```+/)?(w.codeBlock=!1,null):(y.skipToEnd(),null);if(y.sol()&&(w.code=!1),y.sol()&&y.match(/^```+/))return y.skipToEnd(),w.codeBlock=!0,null;if(y.peek()==="`"){y.next();var T=y.pos;y.eatWhile("`");var I=1+y.pos-T;return w.code?I===i&&(w.code=!1):(i=I,w.code=!0),null}else if(w.code)return y.next(),null;if(y.eatSpace())return w.ateSpace=!0,null;if((y.sol()||w.ateSpace)&&(w.ateSpace=!1,n.gitHubSpice!==!1)){if(y.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/))return w.combineTokens=!0,"link";if(y.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))return w.combineTokens=!0,"link"}return y.match(e)&&y.string.slice(y.start-2,y.start)!="]("&&(y.start==0||/\W/.test(y.string.charAt(y.start-1)))?(w.combineTokens=!0,"link"):(y.next(),null)},blankLine:o},u={taskLists:!0,strikethrough:!0,emoji:!0};for(var h in n)u[h]=n[h];return u.name="markdown",t.overlayMode(t.getMode(r,u),s)},"markdown"),t.defineMIME("text/x-gfm","gfm")})});var P0e=J(()=>{});var M0e=J((EHt,uU)=>{var lU;(function(){"use strict";lU=function(t,e,r,n){n=n||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=n.flags||{},this.memoized={},this.loaded=!1;var i=this,o,s,u,h,y;t&&(i.dictionary=t,e&&r?P():typeof window<"u"&&"chrome"in window&&"extension"in window.chrome&&"getURL"in window.chrome.extension?(n.dictionaryPath?o=n.dictionaryPath:o="typo/dictionaries",e||w(chrome.extension.getURL(o+"/"+t+"/"+t+".aff"),T),r||w(chrome.extension.getURL(o+"/"+t+"/"+t+".dic"),I)):(n.dictionaryPath?o=n.dictionaryPath:typeof __dirname<"u"?o=__dirname+"/dictionaries":o="./dictionaries",e||w(o+"/"+t+"/"+t+".aff",T),r||w(o+"/"+t+"/"+t+".dic",I)));function w(L,R){var W=i._readFile(L,null,n.asyncLoad);n.asyncLoad?W.then(function(G){R(G)}):R(W)}function T(L){e=L,r&&P()}function I(L){r=L,e&&P()}function P(){for(i.rules=i._parseAFF(e),i.compoundRuleCodes={},s=0,h=i.compoundRules.length;s<h;s++){var L=i.compoundRules[s];for(u=0,y=L.length;u<y;u++)i.compoundRuleCodes[L[u]]=[]}"ONLYINCOMPOUND"in i.flags&&(i.compoundRuleCodes[i.flags.ONLYINCOMPOUND]=[]),i.dictionaryTable=i._parseDIC(r);for(s in i.compoundRuleCodes)i.compoundRuleCodes[s].length===0&&delete i.compoundRuleCodes[s];for(s=0,h=i.compoundRules.length;s<h;s++){var R=i.compoundRules[s],W="";for(u=0,y=R.length;u<y;u++){var G=R[u];G in i.compoundRuleCodes?W+="("+i.compoundRuleCodes[G].join("|")+")":W+=G}i.compoundRules[s]=new RegExp(W,"i")}i.loaded=!0,n.asyncLoad&&n.loadedCallback&&n.loadedCallback(i)}return this},lU.prototype={load:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);return this},_readFile:function(t,e,r){if(e=e||"utf8",typeof XMLHttpRequest<"u"){var n,i=new XMLHttpRequest;return i.open("GET",t,r),r&&(n=new Promise(function(s,u){i.onload=function(){i.status===200?s(i.responseText):u(i.statusText)},i.onerror=function(){u(i.statusText)}})),i.overrideMimeType&&i.overrideMimeType("text/plain; charset="+e),i.send(null),r?n:i.responseText}else if(typeof A8<"u"){var o=P0e();try{if(o.existsSync(t))return o.readFileSync(t,e);console.log("Path "+t+" does not exist.")}catch(s){return console.log(s),""}}},_parseAFF:function(t){var e={},r,n,i,o,s,u,h,y,w=t.split(/\r?\n/);for(s=0,h=w.length;s<h;s++)if(r=this._removeAffixComments(w[s]),r=r.trim(),!!r){var T=r.split(/\s+/),I=T[0];if(I=="PFX"||I=="SFX"){var P=T[1],L=T[2];i=parseInt(T[3],10);var R=[];for(u=s+1,y=s+1+i;u<y;u++){n=w[u],o=n.split(/\s+/);var W=o[2],G=o[3].split("/"),q=G[0];q==="0"&&(q="");var V=this.parseRuleCodes(G[1]),p=o[4],K={};K.add=q,V.length>0&&(K.continuationClasses=V),p!=="."&&(I==="SFX"?K.match=new RegExp(p+"$"):K.match=new RegExp("^"+p)),W!="0"&&(I==="SFX"?K.remove=new RegExp(W+"$"):K.remove=W),R.push(K)}e[P]={type:I,combineable:L=="Y",entries:R},s+=i}else if(I==="COMPOUNDRULE"){for(i=parseInt(T[1],10),u=s+1,y=s+1+i;u<y;u++)r=w[u],o=r.split(/\s+/),this.compoundRules.push(o[1]);s+=i}else I==="REP"?(o=r.split(/\s+/),o.length===3&&this.replacementTable.push([o[1],o[2]])):this.flags[I]=T[1]}return e},_removeAffixComments:function(t){return t.match(/^\s*#/,"")?"":t},_parseDIC:function(t){t=this._removeDicComments(t);var e=t.split(/\r?\n/),r={};function n(se,me){r.hasOwnProperty(se)||(r[se]=null),me.length>0&&(r[se]===null&&(r[se]=[]),r[se].push(me))}for(var i=1,o=e.length;i<o;i++){var s=e[i];if(s){var u=s.split("/",2),h=u[0];if(u.length>1){var y=this.parseRuleCodes(u[1]);(!("NEEDAFFIX"in this.flags)||y.indexOf(this.flags.NEEDAFFIX)==-1)&&n(h,y);for(var w=0,T=y.length;w<T;w++){var I=y[w],P=this.rules[I];if(P)for(var L=this._applyRule(h,P),R=0,W=L.length;R<W;R++){var G=L[R];if(n(G,[]),P.combineable)for(var q=w+1;q<T;q++){var V=y[q],p=this.rules[V];if(p&&p.combineable&&P.type!=p.type)for(var K=this._applyRule(G,p),j=0,Q=K.length;j<Q;j++){var ee=K[j];n(ee,[])}}}I in this.compoundRuleCodes&&this.compoundRuleCodes[I].push(h)}}else n(h.trim(),[])}}return r},_removeDicComments:function(t){return t=t.replace(/^\t.*$/mg,""),t},parseRuleCodes:function(t){if(t)if("FLAG"in this.flags)if(this.flags.FLAG==="long"){for(var e=[],r=0,n=t.length;r<n;r+=2)e.push(t.substr(r,2));return e}else return this.flags.FLAG==="num"?t.split(","):this.flags.FLAG==="UTF-8"?Array.from(t):t.split("");else return t.split("");else return[]},_applyRule:function(t,e){for(var r=e.entries,n=[],i=0,o=r.length;i<o;i++){var s=r[i];if(!s.match||t.match(s.match)){var u=t;if(s.remove&&(u=u.replace(s.remove,"")),e.type==="SFX"?u=u+s.add:u=s.add+u,n.push(u),"continuationClasses"in s)for(var h=0,y=s.continuationClasses.length;h<y;h++){var w=this.rules[s.continuationClasses[h]];w&&(n=n.concat(this._applyRule(u,w)))}}}return n},check:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e=t.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(e))return!0;if(e.toUpperCase()===e){var r=e[0]+e.substring(1).toLowerCase();if(this.hasFlag(r,"KEEPCASE"))return!1;if(this.checkExact(r)||this.checkExact(e.toLowerCase()))return!0}var n=e[0].toLowerCase()+e.substring(1);if(n!==e){if(this.hasFlag(n,"KEEPCASE"))return!1;if(this.checkExact(n))return!0}return!1},checkExact:function(t){if(!this.loaded)throw"Dictionary not loaded.";var e=this.dictionaryTable[t],r,n;if(typeof e>"u"){if("COMPOUNDMIN"in this.flags&&t.length>=this.flags.COMPOUNDMIN){for(r=0,n=this.compoundRules.length;r<n;r++)if(t.match(this.compoundRules[r]))return!0}}else{if(e===null)return!0;if(typeof e=="object"){for(r=0,n=e.length;r<n;r++)if(!this.hasFlag(t,"ONLYINCOMPOUND",e[r]))return!0}}return!1},hasFlag:function(t,e,r){if(!this.loaded)throw"Dictionary not loaded.";return!!(e in this.flags&&(typeof r>"u"&&(r=Array.prototype.concat.apply([],this.dictionaryTable[t])),r&&r.indexOf(this.flags[e])!==-1))},alphabet:"",suggest:function(t,e){if(!this.loaded)throw"Dictionary not loaded.";if(e=e||5,this.memoized.hasOwnProperty(t)){var r=this.memoized[t].limit;if(e<=r||this.memoized[t].suggestions.length<r)return this.memoized[t].suggestions.slice(0,e)}if(this.check(t))return[];for(var n=0,i=this.replacementTable.length;n<i;n++){var o=this.replacementTable[n];if(t.indexOf(o[0])!==-1){var s=t.replace(o[0],o[1]);if(this.check(s))return[s]}}var u=this;u.alphabet="abcdefghijklmnopqrstuvwxyz";function h(w,T){var I={},P,L,R,W,G,q,V=u.alphabet.length;if(typeof w=="string"){var p=w;w={},w[p]=!0}for(var p in w)for(P=0,W=p.length+1;P<W;P++){var K=[p.substring(0,P),p.substring(P)];if(K[1]&&(q=K[0]+K[1].substring(1),(!T||u.check(q))&&(q in I?I[q]+=1:I[q]=1)),K[1].length>1&&K[1][1]!==K[1][0]&&(q=K[0]+K[1][1]+K[1][0]+K[1].substring(2),(!T||u.check(q))&&(q in I?I[q]+=1:I[q]=1)),K[1]){var j=K[1].substring(0,1).toUpperCase()===K[1].substring(0,1)?"uppercase":"lowercase";for(L=0;L<V;L++){var Q=u.alphabet[L];j==="uppercase"&&(Q=Q.toUpperCase()),Q!=K[1].substring(0,1)&&(q=K[0]+Q+K[1].substring(1),(!T||u.check(q))&&(q in I?I[q]+=1:I[q]=1))}}if(K[1])for(L=0;L<V;L++){var j=K[0].substring(-1).toUpperCase()===K[0].substring(-1)&&K[1].substring(0,1).toUpperCase()===K[1].substring(0,1)?"uppercase":"lowercase",Q=u.alphabet[L];j==="uppercase"&&(Q=Q.toUpperCase()),q=K[0]+Q+K[1],(!T||u.check(q))&&(q in I?I[q]+=1:I[q]=1)}}return I}function y(w){var T=h(w),I=h(T,!0),P=I;for(var L in T)u.check(L)&&(L in P?P[L]+=T[L]:P[L]=T[L]);var R,W,G=[];for(R in P)P.hasOwnProperty(R)&&G.push([R,P[R]]);function q(j,Q){var ee=j[1],se=Q[1];return ee<se?-1:ee>se?1:Q[0].localeCompare(j[0])}G.sort(q).reverse();var V=[],p="lowercase";w.toUpperCase()===w?p="uppercase":w.substr(0,1).toUpperCase()+w.substr(1).toLowerCase()===w&&(p="capitalized");var K=e;for(R=0;R<Math.min(K,G.length);R++)p==="uppercase"?G[R][0]=G[R][0].toUpperCase():p==="capitalized"&&(G[R][0]=G[R][0].substr(0,1).toUpperCase()+G[R][0].substr(1)),!u.hasFlag(G[R][0],"NOSUGGEST")&&V.indexOf(G[R][0])==-1?V.push(G[R][0]):K++;return V}return this.memoized[t]={suggestions:y(t),limit:e},this.memoized[t].suggestions}}})();typeof uU<"u"&&(uU.exports=lU)});var F0e=J((AHt,R0e)=>{"use strict";var L0e=M0e();function ja(t){if(t=t||{},typeof t.codeMirrorInstance!="function"||typeof t.codeMirrorInstance.defineMode!="function"){console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`");return}String.prototype.includes||(String.prototype.includes=function(){"use strict";return String.prototype.indexOf.apply(this,arguments)!==-1}),t.codeMirrorInstance.defineMode("spell-checker",function(e){if(!ja.aff_loading){ja.aff_loading=!0;var r=new XMLHttpRequest;r.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),r.onload=function(){r.readyState===4&&r.status===200&&(ja.aff_data=r.responseText,ja.num_loaded++,ja.num_loaded==2&&(ja.typo=new L0e("en_US",ja.aff_data,ja.dic_data,{platform:"any"})))},r.send(null)}if(!ja.dic_loading){ja.dic_loading=!0;var n=new XMLHttpRequest;n.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),n.onload=function(){n.readyState===4&&n.status===200&&(ja.dic_data=n.responseText,ja.num_loaded++,ja.num_loaded==2&&(ja.typo=new L0e("en_US",ja.aff_data,ja.dic_data,{platform:"any"})))},n.send(null)}var i='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',o={token:function(u){var h=u.peek(),y="";if(i.includes(h))return u.next(),null;for(;(h=u.peek())!=null&&!i.includes(h);)y+=h,u.next();return ja.typo&&!ja.typo.check(y)?"spell-error":null}},s=t.codeMirrorInstance.getMode(e,e.backdrop||"text/plain");return t.codeMirrorInstance.overlayMode(s,o,!0)})}ja.num_loaded=0;ja.aff_loading=!1;ja.dic_loading=!1;ja.aff_data="";ja.dic_data="";ja.typo;R0e.exports=ja});var Z0e=J(Da=>{"use strict";function q0e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,abt(n.key),n)}}function nbt(t,e,r){return e&&q0e(t.prototype,e),r&&q0e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yf(){return Yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Yf.apply(this,arguments)}function ibt(t,e){if(t){if(typeof t=="string")return N0e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N0e(t,e)}}function N0e(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function FO(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=ibt(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function obt(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function abt(t){var e=obt(t,"string");return typeof e=="symbol"?e:String(e)}function cU(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Da.defaults=cU();function sbt(t){Da.defaults=t}var W0e=/[&<>"']/,lbt=new RegExp(W0e.source,"g"),$0e=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ubt=new RegExp($0e.source,"g"),cbt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},B0e=function(e){return cbt[e]};function ju(t,e){if(e){if(W0e.test(t))return t.replace(lbt,B0e)}else if($0e.test(t))return t.replace(ubt,B0e);return t}var fbt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function G0e(t){return t.replace(fbt,function(e,r){return r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""})}var hbt=/(^|[^\[])\^/g;function fa(t,e){t=typeof t=="string"?t:t.source,e=e||"";var r={replace:function(i,o){return o=o.source||o,o=o.replace(hbt,"$1"),t=t.replace(i,o),r},getRegex:function(){return new RegExp(t,e)}};return r}var dbt=/[^\w:]/g,pbt=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function z0e(t,e,r){if(t){var n;try{n=decodeURIComponent(G0e(r)).replace(dbt,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!pbt.test(r)&&(r=ybt(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}var qO={},mbt=/^[^:]+:\/*[^/]*$/,gbt=/^([^:]+:)[\s\S]*$/,vbt=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ybt(t,e){qO[" "+t]||(mbt.test(t)?qO[" "+t]=t+"/":qO[" "+t]=NO(t,"/",!0)),t=qO[" "+t];var r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(gbt,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(vbt,"$1")+e:t+e}var BO={exec:function(){}};function j0e(t,e){var r=t.replace(/\|/g,function(o,s,u){for(var h=!1,y=s;--y>=0&&u[y]==="\\";)h=!h;return h?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function NO(t,e,r){var n=t.length;if(n===0)return"";for(var i=0;i<n;){var o=t.charAt(n-i-1);if(o===e&&!r)i++;else if(o!==e&&r)i++;else break}return t.slice(0,n-i)}function bbt(t,e){if(t.indexOf(e[1])===-1)return-1;for(var r=t.length,n=0,i=0;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function _bt(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function U0e(t,e){if(e<1)return"";for(var r="";e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function V0e(t,e,r,n){var i=e.href,o=e.title?ju(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;var u={type:"link",raw:r,href:i,title:o,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,u}return{type:"image",raw:r,href:i,title:o,text:ju(s)}}function xbt(t,e){var r=t.match(/^(\s+)(?:```)/);if(r===null)return e;var n=r[1];return e.split(`
`).map(function(i){var o=i.match(/^\s+/);if(o===null)return i;var s=o[0];return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var zO=function(){function t(r){this.options=r||Da.defaults}var e=t.prototype;return e.space=function(n){var i=this.rules.block.newline.exec(n);if(i&&i[0].length>0)return{type:"space",raw:i[0]}},e.code=function(n){var i=this.rules.block.code.exec(n);if(i){var o=i[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:i[0],codeBlockStyle:"indented",text:this.options.pedantic?o:NO(o,`
`)}}},e.fences=function(n){var i=this.rules.block.fences.exec(n);if(i){var o=i[0],s=xbt(o,i[3]||"");return{type:"code",raw:o,lang:i[2]?i[2].trim().replace(this.rules.inline._escapes,"$1"):i[2],text:s}}},e.heading=function(n){var i=this.rules.block.heading.exec(n);if(i){var o=i[2].trim();if(/#$/.test(o)){var s=NO(o,"#");(this.options.pedantic||!s||/ $/.test(s))&&(o=s.trim())}return{type:"heading",raw:i[0],depth:i[1].length,text:o,tokens:this.lexer.inline(o)}}},e.hr=function(n){var i=this.rules.block.hr.exec(n);if(i)return{type:"hr",raw:i[0]}},e.blockquote=function(n){var i=this.rules.block.blockquote.exec(n);if(i){var o=i[0].replace(/^ *>[ \t]?/gm,""),s=this.lexer.state.top;this.lexer.state.top=!0;var u=this.lexer.blockTokens(o);return this.lexer.state.top=s,{type:"blockquote",raw:i[0],tokens:u,text:o}}},e.list=function(n){var i=this.rules.block.list.exec(n);if(i){var o,s,u,h,y,w,T,I,P,L,R,W,G=i[1].trim(),q=G.length>1,V={type:"list",raw:"",ordered:q,start:q?+G.slice(0,-1):"",loose:!1,items:[]};G=q?"\\d{1,9}\\"+G.slice(-1):"\\"+G,this.options.pedantic&&(G=q?G:"[*+-]");for(var p=new RegExp("^( {0,3}"+G+")((?:[	 ][^\\n]*)?(?:\\n|$))");n&&(W=!1,!(!(i=p.exec(n))||this.rules.block.hr.test(n)));){if(o=i[0],n=n.substring(o.length),I=i[2].split(`
`,1)[0].replace(/^\t+/,function(U){return" ".repeat(3*U.length)}),P=n.split(`
`,1)[0],this.options.pedantic?(h=2,R=I.trimLeft()):(h=i[2].search(/[^ ]/),h=h>4?1:h,R=I.slice(h),h+=i[1].length),w=!1,!I&&/^ *$/.test(P)&&(o+=P+`
`,n=n.substring(P.length+1),W=!0),!W)for(var K=new RegExp("^ {0,"+Math.min(3,h-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))"),j=new RegExp("^ {0,"+Math.min(3,h-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),Q=new RegExp("^ {0,"+Math.min(3,h-1)+"}(?:```|~~~)"),ee=new RegExp("^ {0,"+Math.min(3,h-1)+"}#");n&&(L=n.split(`
`,1)[0],P=L,this.options.pedantic&&(P=P.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Q.test(P)||ee.test(P)||K.test(P)||j.test(n)));){if(P.search(/[^ ]/)>=h||!P.trim())R+=`
`+P.slice(h);else{if(w||I.search(/[^ ]/)>=4||Q.test(I)||ee.test(I)||j.test(I))break;R+=`
`+P}!w&&!P.trim()&&(w=!0),o+=L+`
`,n=n.substring(L.length+1),I=P.slice(h)}V.loose||(T?V.loose=!0:/\n *\n *$/.test(o)&&(T=!0)),this.options.gfm&&(s=/^\[[ xX]\] /.exec(R),s&&(u=s[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:o,task:!!s,checked:u,loose:!1,text:R}),V.raw+=o}V.items[V.items.length-1].raw=o.trimRight(),V.items[V.items.length-1].text=R.trimRight(),V.raw=V.raw.trimRight();var se=V.items.length;for(y=0;y<se;y++)if(this.lexer.state.top=!1,V.items[y].tokens=this.lexer.blockTokens(V.items[y].text,[]),!V.loose){var me=V.items[y].tokens.filter(function(U){return U.type==="space"}),ve=me.length>0&&me.some(function(U){return/\n.*\n/.test(U.raw)});V.loose=ve}if(V.loose)for(y=0;y<se;y++)V.items[y].loose=!0;return V}},e.html=function(n){var i=this.rules.block.html.exec(n);if(i){var o={type:"html",raw:i[0],pre:!this.options.sanitizer&&(i[1]==="pre"||i[1]==="script"||i[1]==="style"),text:i[0]};if(this.options.sanitize){var s=this.options.sanitizer?this.options.sanitizer(i[0]):ju(i[0]);o.type="paragraph",o.text=s,o.tokens=this.lexer.inline(s)}return o}},e.def=function(n){var i=this.rules.block.def.exec(n);if(i){var o=i[1].toLowerCase().replace(/\s+/g," "),s=i[2]?i[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",u=i[3]?i[3].substring(1,i[3].length-1).replace(this.rules.inline._escapes,"$1"):i[3];return{type:"def",tag:o,raw:i[0],href:s,title:u}}},e.table=function(n){var i=this.rules.block.table.exec(n);if(i){var o={type:"table",header:j0e(i[1]).map(function(T){return{text:T}}),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:i[3]&&i[3].trim()?i[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(o.header.length===o.align.length){o.raw=i[0];var s=o.align.length,u,h,y,w;for(u=0;u<s;u++)/^ *-+: *$/.test(o.align[u])?o.align[u]="right":/^ *:-+: *$/.test(o.align[u])?o.align[u]="center":/^ *:-+ *$/.test(o.align[u])?o.align[u]="left":o.align[u]=null;for(s=o.rows.length,u=0;u<s;u++)o.rows[u]=j0e(o.rows[u],o.header.length).map(function(T){return{text:T}});for(s=o.header.length,h=0;h<s;h++)o.header[h].tokens=this.lexer.inline(o.header[h].text);for(s=o.rows.length,h=0;h<s;h++)for(w=o.rows[h],y=0;y<w.length;y++)w[y].tokens=this.lexer.inline(w[y].text);return o}}},e.lheading=function(n){var i=this.rules.block.lheading.exec(n);if(i)return{type:"heading",raw:i[0],depth:i[2].charAt(0)==="="?1:2,text:i[1],tokens:this.lexer.inline(i[1])}},e.paragraph=function(n){var i=this.rules.block.paragraph.exec(n);if(i){var o=i[1].charAt(i[1].length-1)===`
`?i[1].slice(0,-1):i[1];return{type:"paragraph",raw:i[0],text:o,tokens:this.lexer.inline(o)}}},e.text=function(n){var i=this.rules.block.text.exec(n);if(i)return{type:"text",raw:i[0],text:i[0],tokens:this.lexer.inline(i[0])}},e.escape=function(n){var i=this.rules.inline.escape.exec(n);if(i)return{type:"escape",raw:i[0],text:ju(i[1])}},e.tag=function(n){var i=this.rules.inline.tag.exec(n);if(i)return!this.lexer.state.inLink&&/^<a /i.test(i[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(i[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):ju(i[0]):i[0]}},e.link=function(n){var i=this.rules.inline.link.exec(n);if(i){var o=i[2].trim();if(!this.options.pedantic&&/^</.test(o)){if(!/>$/.test(o))return;var s=NO(o.slice(0,-1),"\\");if((o.length-s.length)%2===0)return}else{var u=bbt(i[2],"()");if(u>-1){var h=i[0].indexOf("!")===0?5:4,y=h+i[1].length+u;i[2]=i[2].substring(0,u),i[0]=i[0].substring(0,y).trim(),i[3]=""}}var w=i[2],T="";if(this.options.pedantic){var I=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(w);I&&(w=I[1],T=I[3])}else T=i[3]?i[3].slice(1,-1):"";return w=w.trim(),/^</.test(w)&&(this.options.pedantic&&!/>$/.test(o)?w=w.slice(1):w=w.slice(1,-1)),V0e(i,{href:w&&w.replace(this.rules.inline._escapes,"$1"),title:T&&T.replace(this.rules.inline._escapes,"$1")},i[0],this.lexer)}},e.reflink=function(n,i){var o;if((o=this.rules.inline.reflink.exec(n))||(o=this.rules.inline.nolink.exec(n))){var s=(o[2]||o[1]).replace(/\s+/g," ");if(s=i[s.toLowerCase()],!s){var u=o[0].charAt(0);return{type:"text",raw:u,text:u}}return V0e(o,s,o[0],this.lexer)}},e.emStrong=function(n,i,o){o===void 0&&(o="");var s=this.rules.inline.emStrong.lDelim.exec(n);if(s&&!(s[3]&&o.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var u=s[1]||s[2]||"";if(!u||u&&(o===""||this.rules.inline.punctuation.exec(o))){var h=s[0].length-1,y,w,T=h,I=0,P=s[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(P.lastIndex=0,i=i.slice(-1*n.length+h);(s=P.exec(i))!=null;)if(y=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!!y){if(w=y.length,s[3]||s[4]){T+=w;continue}else if((s[5]||s[6])&&h%3&&!((h+w)%3)){I+=w;continue}if(T-=w,!(T>0)){w=Math.min(w,w+T+I);var L=n.slice(0,h+s.index+(s[0].length-y.length)+w);if(Math.min(h,w)%2){var R=L.slice(1,-1);return{type:"em",raw:L,text:R,tokens:this.lexer.inlineTokens(R)}}var W=L.slice(2,-2);return{type:"strong",raw:L,text:W,tokens:this.lexer.inlineTokens(W)}}}}}},e.codespan=function(n){var i=this.rules.inline.code.exec(n);if(i){var o=i[2].replace(/\n/g," "),s=/[^ ]/.test(o),u=/^ /.test(o)&&/ $/.test(o);return s&&u&&(o=o.substring(1,o.length-1)),o=ju(o,!0),{type:"codespan",raw:i[0],text:o}}},e.br=function(n){var i=this.rules.inline.br.exec(n);if(i)return{type:"br",raw:i[0]}},e.del=function(n){var i=this.rules.inline.del.exec(n);if(i)return{type:"del",raw:i[0],text:i[2],tokens:this.lexer.inlineTokens(i[2])}},e.autolink=function(n,i){var o=this.rules.inline.autolink.exec(n);if(o){var s,u;return o[2]==="@"?(s=ju(this.options.mangle?i(o[1]):o[1]),u="mailto:"+s):(s=ju(o[1]),u=s),{type:"link",raw:o[0],text:s,href:u,tokens:[{type:"text",raw:s,text:s}]}}},e.url=function(n,i){var o;if(o=this.rules.inline.url.exec(n)){var s,u;if(o[2]==="@")s=ju(this.options.mangle?i(o[0]):o[0]),u="mailto:"+s;else{var h;do h=o[0],o[0]=this.rules.inline._backpedal.exec(o[0])[0];while(h!==o[0]);s=ju(o[0]),o[1]==="www."?u="http://"+o[0]:u=o[0]}return{type:"link",raw:o[0],text:s,href:u,tokens:[{type:"text",raw:s,text:s}]}}},e.inlineText=function(n,i){var o=this.rules.inline.text.exec(n);if(o){var s;return this.lexer.state.inRawBlock?s=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(o[0]):ju(o[0]):o[0]:s=ju(this.options.smartypants?i(o[0]):o[0]),{type:"text",raw:o[0],text:s}}},t}(),Un={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:BO,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Un._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Un._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Un.def=fa(Un.def).replace("label",Un._label).replace("title",Un._title).getRegex();Un.bullet=/(?:[*+-]|\d{1,9}[.)])/;Un.listItemStart=fa(/^( *)(bull) */).replace("bull",Un.bullet).getRegex();Un.list=fa(Un.list).replace(/bull/g,Un.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Un.def.source+")").getRegex();Un._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Un._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Un.html=fa(Un.html,"i").replace("comment",Un._comment).replace("tag",Un._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Un.paragraph=fa(Un._paragraph).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex();Un.blockquote=fa(Un.blockquote).replace("paragraph",Un.paragraph).getRegex();Un.normal=Yf({},Un);Un.gfm=Yf({},Un.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Un.gfm.table=fa(Un.gfm.table).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex();Un.gfm.paragraph=fa(Un._paragraph).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Un.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex();Un.pedantic=Yf({},Un.normal,{html:fa(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Un._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:BO,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fa(Un.normal._paragraph).replace("hr",Un.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Un.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var hn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:BO,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:BO,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};hn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";hn.punctuation=fa(hn.punctuation).replace(/punctuation/g,hn._punctuation).getRegex();hn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;hn.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;hn._comment=fa(Un._comment).replace("(?:-->|$)","-->").getRegex();hn.emStrong.lDelim=fa(hn.emStrong.lDelim).replace(/punct/g,hn._punctuation).getRegex();hn.emStrong.rDelimAst=fa(hn.emStrong.rDelimAst,"g").replace(/punct/g,hn._punctuation).getRegex();hn.emStrong.rDelimUnd=fa(hn.emStrong.rDelimUnd,"g").replace(/punct/g,hn._punctuation).getRegex();hn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;hn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;hn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;hn.autolink=fa(hn.autolink).replace("scheme",hn._scheme).replace("email",hn._email).getRegex();hn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;hn.tag=fa(hn.tag).replace("comment",hn._comment).replace("attribute",hn._attribute).getRegex();hn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;hn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;hn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;hn.link=fa(hn.link).replace("label",hn._label).replace("href",hn._href).replace("title",hn._title).getRegex();hn.reflink=fa(hn.reflink).replace("label",hn._label).replace("ref",Un._label).getRegex();hn.nolink=fa(hn.nolink).replace("ref",Un._label).getRegex();hn.reflinkSearch=fa(hn.reflinkSearch,"g").replace("reflink",hn.reflink).replace("nolink",hn.nolink).getRegex();hn.normal=Yf({},hn);hn.pedantic=Yf({},hn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:fa(/^!?\[(label)\]\((.*?)\)/).replace("label",hn._label).getRegex(),reflink:fa(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hn._label).getRegex()});hn.gfm=Yf({},hn.normal,{escape:fa(hn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});hn.gfm.url=fa(hn.gfm.url,"i").replace("email",hn.gfm._extended_email).getRegex();hn.breaks=Yf({},hn.gfm,{br:fa(hn.br).replace("{2,}","*").getRegex(),text:fa(hn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function wbt(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function H0e(t){var e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var i1=function(){function t(r){this.tokens=[],this.tokens.links=Object.create(null),this.options=r||Da.defaults,this.options.tokenizer=this.options.tokenizer||new zO,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var n={block:Un.normal,inline:hn.normal};this.options.pedantic?(n.block=Un.pedantic,n.inline=hn.pedantic):this.options.gfm&&(n.block=Un.gfm,this.options.breaks?n.inline=hn.breaks:n.inline=hn.gfm),this.tokenizer.rules=n}t.lex=function(n,i){var o=new t(i);return o.lex(n)},t.lexInline=function(n,i){var o=new t(i);return o.inlineTokens(n)};var e=t.prototype;return e.lex=function(n){n=n.replace(/\r\n|\r/g,`
`),this.blockTokens(n,this.tokens);for(var i;i=this.inlineQueue.shift();)this.inlineTokens(i.src,i.tokens);return this.tokens},e.blockTokens=function(n,i){var o=this;i===void 0&&(i=[]),this.options.pedantic?n=n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n=n.replace(/^( *)(\t+)/gm,function(T,I,P){return I+"    ".repeat(P.length)});for(var s,u,h,y;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(T){return(s=T.call({lexer:o},n,i))?(n=n.substring(s.raw.length),i.push(s),!0):!1}))){if(s=this.tokenizer.space(n)){n=n.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(n)){n=n.substring(s.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+s.raw,u.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(s);continue}if(s=this.tokenizer.fences(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(n)){n=n.substring(s.raw.length),u=i[i.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+s.raw,u.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(n)){n=n.substring(s.raw.length),i.push(s);continue}if(h=n,this.options.extensions&&this.options.extensions.startBlock&&function(){var T=1/0,I=n.slice(1),P=void 0;o.options.extensions.startBlock.forEach(function(L){P=L.call({lexer:this},I),typeof P=="number"&&P>=0&&(T=Math.min(T,P))}),T<1/0&&T>=0&&(h=n.substring(0,T+1))}(),this.state.top&&(s=this.tokenizer.paragraph(h))){u=i[i.length-1],y&&u.type==="paragraph"?(u.raw+=`
`+s.raw,u.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(s),y=h.length!==n.length,n=n.substring(s.raw.length);continue}if(s=this.tokenizer.text(n)){n=n.substring(s.raw.length),u=i[i.length-1],u&&u.type==="text"?(u.raw+=`
`+s.raw,u.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):i.push(s);continue}if(n){var w="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(w);break}else throw new Error(w)}}return this.state.top=!0,i},e.inline=function(n,i){return i===void 0&&(i=[]),this.inlineQueue.push({src:n,tokens:i}),i},e.inlineTokens=function(n,i){var o=this;i===void 0&&(i=[]);var s,u,h,y=n,w,T,I;if(this.tokens.links){var P=Object.keys(this.tokens.links);if(P.length>0)for(;(w=this.tokenizer.rules.inline.reflinkSearch.exec(y))!=null;)P.includes(w[0].slice(w[0].lastIndexOf("[")+1,-1))&&(y=y.slice(0,w.index)+"["+U0e("a",w[0].length-2)+"]"+y.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(w=this.tokenizer.rules.inline.blockSkip.exec(y))!=null;)y=y.slice(0,w.index)+"["+U0e("a",w[0].length-2)+"]"+y.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(w=this.tokenizer.rules.inline.escapedEmSt.exec(y))!=null;)y=y.slice(0,w.index+w[0].length-2)+"++"+y.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;n;)if(T||(I=""),T=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(R){return(s=R.call({lexer:o},n,i))?(n=n.substring(s.raw.length),i.push(s),!0):!1}))){if(s=this.tokenizer.escape(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.tag(n)){n=n.substring(s.raw.length),u=i[i.length-1],u&&s.type==="text"&&u.type==="text"?(u.raw+=s.raw,u.text+=s.text):i.push(s);continue}if(s=this.tokenizer.link(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(s.raw.length),u=i[i.length-1],u&&s.type==="text"&&u.type==="text"?(u.raw+=s.raw,u.text+=s.text):i.push(s);continue}if(s=this.tokenizer.emStrong(n,y,I)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.codespan(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.br(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.del(n)){n=n.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.autolink(n,H0e)){n=n.substring(s.raw.length),i.push(s);continue}if(!this.state.inLink&&(s=this.tokenizer.url(n,H0e))){n=n.substring(s.raw.length),i.push(s);continue}if(h=n,this.options.extensions&&this.options.extensions.startInline&&function(){var R=1/0,W=n.slice(1),G=void 0;o.options.extensions.startInline.forEach(function(q){G=q.call({lexer:this},W),typeof G=="number"&&G>=0&&(R=Math.min(R,G))}),R<1/0&&R>=0&&(h=n.substring(0,R+1))}(),s=this.tokenizer.inlineText(h,wbt)){n=n.substring(s.raw.length),s.raw.slice(-1)!=="_"&&(I=s.raw.slice(-1)),T=!0,u=i[i.length-1],u&&u.type==="text"?(u.raw+=s.raw,u.text+=s.text):i.push(s);continue}if(n){var L="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(L);break}else throw new Error(L)}}return i},nbt(t,null,[{key:"rules",get:function(){return{block:Un,inline:hn}}}]),t}(),jO=function(){function t(r){this.options=r||Da.defaults}var e=t.prototype;return e.code=function(n,i,o){var s=(i||"").match(/\S*/)[0];if(this.options.highlight){var u=this.options.highlight(n,s);u!=null&&u!==n&&(o=!0,n=u)}return n=n.replace(/\n$/,"")+`
`,s?'<pre><code class="'+this.options.langPrefix+ju(s)+'">'+(o?n:ju(n,!0))+`</code></pre>
`:"<pre><code>"+(o?n:ju(n,!0))+`</code></pre>
`},e.blockquote=function(n){return`<blockquote>
`+n+`</blockquote>
`},e.html=function(n){return n},e.heading=function(n,i,o,s){if(this.options.headerIds){var u=this.options.headerPrefix+s.slug(o);return"<h"+i+' id="'+u+'">'+n+"</h"+i+`>
`}return"<h"+i+">"+n+"</h"+i+`>
`},e.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},e.list=function(n,i,o){var s=i?"ol":"ul",u=i&&o!==1?' start="'+o+'"':"";return"<"+s+u+`>
`+n+"</"+s+`>
`},e.listitem=function(n){return"<li>"+n+`</li>
`},e.checkbox=function(n){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(n){return"<p>"+n+`</p>
`},e.table=function(n,i){return i&&(i="<tbody>"+i+"</tbody>"),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`},e.tablerow=function(n){return`<tr>
`+n+`</tr>
`},e.tablecell=function(n,i){var o=i.header?"th":"td",s=i.align?"<"+o+' align="'+i.align+'">':"<"+o+">";return s+n+("</"+o+`>
`)},e.strong=function(n){return"<strong>"+n+"</strong>"},e.em=function(n){return"<em>"+n+"</em>"},e.codespan=function(n){return"<code>"+n+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(n){return"<del>"+n+"</del>"},e.link=function(n,i,o){if(n=z0e(this.options.sanitize,this.options.baseUrl,n),n===null)return o;var s='<a href="'+n+'"';return i&&(s+=' title="'+i+'"'),s+=">"+o+"</a>",s},e.image=function(n,i,o){if(n=z0e(this.options.sanitize,this.options.baseUrl,n),n===null)return o;var s='<img src="'+n+'" alt="'+o+'"';return i&&(s+=' title="'+i+'"'),s+=this.options.xhtml?"/>":">",s},e.text=function(n){return n},t}(),fU=function(){function t(){}var e=t.prototype;return e.strong=function(n){return n},e.em=function(n){return n},e.codespan=function(n){return n},e.del=function(n){return n},e.html=function(n){return n},e.text=function(n){return n},e.link=function(n,i,o){return""+o},e.image=function(n,i,o){return""+o},e.br=function(){return""},t}(),hU=function(){function t(){this.seen={}}var e=t.prototype;return e.serialize=function(n){return n.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(n,i){var o=n,s=0;if(this.seen.hasOwnProperty(o)){s=this.seen[n];do s++,o=n+"-"+s;while(this.seen.hasOwnProperty(o))}return i||(this.seen[n]=s,this.seen[o]=0),o},e.slug=function(n,i){i===void 0&&(i={});var o=this.serialize(n);return this.getNextSafeSlug(o,i.dryrun)},t}(),o1=function(){function t(r){this.options=r||Da.defaults,this.options.renderer=this.options.renderer||new jO,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new fU,this.slugger=new hU}t.parse=function(n,i){var o=new t(i);return o.parse(n)},t.parseInline=function(n,i){var o=new t(i);return o.parseInline(n)};var e=t.prototype;return e.parse=function(n,i){i===void 0&&(i=!0);var o="",s,u,h,y,w,T,I,P,L,R,W,G,q,V,p,K,j,Q,ee,se=n.length;for(s=0;s<se;s++){if(R=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[R.type]&&(ee=this.options.extensions.renderers[R.type].call({parser:this},R),ee!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(R.type))){o+=ee||"";continue}switch(R.type){case"space":continue;case"hr":{o+=this.renderer.hr();continue}case"heading":{o+=this.renderer.heading(this.parseInline(R.tokens),R.depth,G0e(this.parseInline(R.tokens,this.textRenderer)),this.slugger);continue}case"code":{o+=this.renderer.code(R.text,R.lang,R.escaped);continue}case"table":{for(P="",I="",y=R.header.length,u=0;u<y;u++)I+=this.renderer.tablecell(this.parseInline(R.header[u].tokens),{header:!0,align:R.align[u]});for(P+=this.renderer.tablerow(I),L="",y=R.rows.length,u=0;u<y;u++){for(T=R.rows[u],I="",w=T.length,h=0;h<w;h++)I+=this.renderer.tablecell(this.parseInline(T[h].tokens),{header:!1,align:R.align[h]});L+=this.renderer.tablerow(I)}o+=this.renderer.table(P,L);continue}case"blockquote":{L=this.parse(R.tokens),o+=this.renderer.blockquote(L);continue}case"list":{for(W=R.ordered,G=R.start,q=R.loose,y=R.items.length,L="",u=0;u<y;u++)p=R.items[u],K=p.checked,j=p.task,V="",p.task&&(Q=this.renderer.checkbox(K),q?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=Q+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=Q+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:Q}):V+=Q),V+=this.parse(p.tokens,q),L+=this.renderer.listitem(V,j,K);o+=this.renderer.list(L,W,G);continue}case"html":{o+=this.renderer.html(R.text);continue}case"paragraph":{o+=this.renderer.paragraph(this.parseInline(R.tokens));continue}case"text":{for(L=R.tokens?this.parseInline(R.tokens):R.text;s+1<se&&n[s+1].type==="text";)R=n[++s],L+=`
`+(R.tokens?this.parseInline(R.tokens):R.text);o+=i?this.renderer.paragraph(L):L;continue}default:{var me='Token with "'+R.type+'" type was not found.';if(this.options.silent){console.error(me);return}else throw new Error(me)}}}return o},e.parseInline=function(n,i){i=i||this.renderer;var o="",s,u,h,y=n.length;for(s=0;s<y;s++){if(u=n[s],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(h=this.options.extensions.renderers[u.type].call({parser:this},u),h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type))){o+=h||"";continue}switch(u.type){case"escape":{o+=i.text(u.text);break}case"html":{o+=i.html(u.text);break}case"link":{o+=i.link(u.href,u.title,this.parseInline(u.tokens,i));break}case"image":{o+=i.image(u.href,u.title,u.text);break}case"strong":{o+=i.strong(this.parseInline(u.tokens,i));break}case"em":{o+=i.em(this.parseInline(u.tokens,i));break}case"codespan":{o+=i.codespan(u.text);break}case"br":{o+=i.br();break}case"del":{o+=i.del(this.parseInline(u.tokens,i));break}case"text":{o+=i.text(u.text);break}default:{var w='Token with "'+u.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return o},t}(),DT=function(){function t(r){this.options=r||Da.defaults}var e=t.prototype;return e.preprocess=function(n){return n},e.postprocess=function(n){return n},t}();DT.passThroughHooks=new Set(["preprocess","postprocess"]);function Sbt(t,e,r){return function(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){var i="<p>An error occurred:</p><pre>"+ju(n.message+"",!0)+"</pre>";if(e)return Promise.resolve(i);if(r){r(null,i);return}return i}if(e)return Promise.reject(n);if(r){r(n);return}throw n}}function K0e(t,e){return function(r,n,i){typeof n=="function"&&(i=n,n=null);var o=Yf({},n);n=Yf({},jn.defaults,o);var s=Sbt(n.silent,n.async,i);if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(_bt(n),n.hooks&&(n.hooks.options=n),i){var u=n.highlight,h;try{n.hooks&&(r=n.hooks.preprocess(r)),h=t(r,n)}catch(P){return s(P)}var y=function(L){var R;if(!L)try{n.walkTokens&&jn.walkTokens(h,n.walkTokens),R=e(h,n),n.hooks&&(R=n.hooks.postprocess(R))}catch(W){L=W}return n.highlight=u,L?s(L):i(null,R)};if(!u||u.length<3||(delete n.highlight,!h.length))return y();var w=0;jn.walkTokens(h,function(P){P.type==="code"&&(w++,setTimeout(function(){u(P.text,P.lang,function(L,R){if(L)return y(L);R!=null&&R!==P.text&&(P.text=R,P.escaped=!0),w--,w===0&&y()})},0))}),w===0&&y();return}if(n.async)return Promise.resolve(n.hooks?n.hooks.preprocess(r):r).then(function(P){return t(P,n)}).then(function(P){return n.walkTokens?Promise.all(jn.walkTokens(P,n.walkTokens)).then(function(){return P}):P}).then(function(P){return e(P,n)}).then(function(P){return n.hooks?n.hooks.postprocess(P):P}).catch(s);try{n.hooks&&(r=n.hooks.preprocess(r));var T=t(r,n);n.walkTokens&&jn.walkTokens(T,n.walkTokens);var I=e(T,n);return n.hooks&&(I=n.hooks.postprocess(I)),I}catch(P){return s(P)}}}function jn(t,e,r){return K0e(i1.lex,o1.parse)(t,e,r)}jn.options=jn.setOptions=function(t){return jn.defaults=Yf({},jn.defaults,t),sbt(jn.defaults),jn};jn.getDefaults=cU;jn.defaults=Da.defaults;jn.use=function(){for(var t=jn.defaults.extensions||{renderers:{},childTokens:{}},e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];r.forEach(function(i){var o=Yf({},i);if(o.async=jn.defaults.async||o.async||!1,i.extensions&&(i.extensions.forEach(function(u){if(!u.name)throw new Error("extension name required");if(u.renderer){var h=t.renderers[u.name];h?t.renderers[u.name]=function(){for(var y=arguments.length,w=new Array(y),T=0;T<y;T++)w[T]=arguments[T];var I=u.renderer.apply(this,w);return I===!1&&(I=h.apply(this,w)),I}:t.renderers[u.name]=u.renderer}if(u.tokenizer){if(!u.level||u.level!=="block"&&u.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[u.level]?t[u.level].unshift(u.tokenizer):t[u.level]=[u.tokenizer],u.start&&(u.level==="block"?t.startBlock?t.startBlock.push(u.start):t.startBlock=[u.start]:u.level==="inline"&&(t.startInline?t.startInline.push(u.start):t.startInline=[u.start]))}u.childTokens&&(t.childTokens[u.name]=u.childTokens)}),o.extensions=t),i.renderer&&function(){var u=jn.defaults.renderer||new jO,h=function(T){var I=u[T];u[T]=function(){for(var P=arguments.length,L=new Array(P),R=0;R<P;R++)L[R]=arguments[R];var W=i.renderer[T].apply(u,L);return W===!1&&(W=I.apply(u,L)),W}};for(var y in i.renderer)h(y);o.renderer=u}(),i.tokenizer&&function(){var u=jn.defaults.tokenizer||new zO,h=function(T){var I=u[T];u[T]=function(){for(var P=arguments.length,L=new Array(P),R=0;R<P;R++)L[R]=arguments[R];var W=i.tokenizer[T].apply(u,L);return W===!1&&(W=I.apply(u,L)),W}};for(var y in i.tokenizer)h(y);o.tokenizer=u}(),i.hooks&&function(){var u=jn.defaults.hooks||new DT,h=function(T){var I=u[T];DT.passThroughHooks.has(T)?u[T]=function(P){if(jn.defaults.async)return Promise.resolve(i.hooks[T].call(u,P)).then(function(R){return I.call(u,R)});var L=i.hooks[T].call(u,P);return I.call(u,L)}:u[T]=function(){for(var P=arguments.length,L=new Array(P),R=0;R<P;R++)L[R]=arguments[R];var W=i.hooks[T].apply(u,L);return W===!1&&(W=I.apply(u,L)),W}};for(var y in i.hooks)h(y);o.hooks=u}(),i.walkTokens){var s=jn.defaults.walkTokens;o.walkTokens=function(u){var h=[];return h.push(i.walkTokens.call(this,u)),s&&(h=h.concat(s.call(this,u))),h}}jn.setOptions(o)})};jn.walkTokens=function(t,e){for(var r=[],n=function(){var u=o.value;switch(r=r.concat(e.call(jn,u)),u.type){case"table":{for(var h=FO(u.header),y;!(y=h()).done;){var w=y.value;r=r.concat(jn.walkTokens(w.tokens,e))}for(var T=FO(u.rows),I;!(I=T()).done;)for(var P=I.value,L=FO(P),R;!(R=L()).done;){var W=R.value;r=r.concat(jn.walkTokens(W.tokens,e))}break}case"list":{r=r.concat(jn.walkTokens(u.items,e));break}default:jn.defaults.extensions&&jn.defaults.extensions.childTokens&&jn.defaults.extensions.childTokens[u.type]?jn.defaults.extensions.childTokens[u.type].forEach(function(G){r=r.concat(jn.walkTokens(u[G],e))}):u.tokens&&(r=r.concat(jn.walkTokens(u.tokens,e)))}},i=FO(t),o;!(o=i()).done;)n();return r};jn.parseInline=K0e(i1.lexInline,o1.parseInline);jn.Parser=o1;jn.parser=o1.parse;jn.Renderer=jO;jn.TextRenderer=fU;jn.Lexer=i1;jn.lexer=i1.lex;jn.Tokenizer=zO;jn.Slugger=hU;jn.Hooks=DT;jn.parse=jn;var Ebt=jn.options,Tbt=jn.setOptions,Abt=jn.use,kbt=jn.walkTokens,Cbt=jn.parseInline,Ibt=jn,Dbt=o1.parse,Obt=i1.lex;Da.Hooks=DT;Da.Lexer=i1;Da.Parser=o1;Da.Renderer=jO;Da.Slugger=hU;Da.TextRenderer=fU;Da.Tokenizer=zO;Da.getDefaults=cU;Da.lexer=Obt;Da.marked=jn;Da.options=Ebt;Da.parse=Ibt;Da.parseInline=Cbt;Da.parser=Dbt;Da.setOptions=Tbt;Da.use=Abt;Da.walkTokens=kbt});var a_e=J((CHt,o_e)=>{"use strict";var a1=io();f0e();d0e();g0e();iO();oO();b0e();w0e();T0e();C0e();O0e();Bx();var Pbt=F0e(),dU=Z0e().marked,J0e=/Mac/.test(navigator.platform),Mbt=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),OT={toggleBold:HO,toggleItalic:WO,drawLink:rP,toggleHeadingSmaller:PT,toggleHeadingBigger:ZO,drawImage:nP,toggleBlockquote:KO,toggleOrderedList:eP,toggleUnorderedList:QO,toggleCodeBlock:GO,togglePreview:lP,toggleStrikethrough:$O,toggleHeading1:YO,toggleHeading2:XO,toggleHeading3:JO,toggleHeading4:mU,toggleHeading5:gU,toggleHeading6:vU,cleanBlock:tP,drawTable:iP,drawHorizontalRule:oP,undo:aP,redo:sP,toggleSideBySide:s1,toggleFullScreen:Zb},Lbt={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},Rbt=function(t){for(var e in OT)if(OT[e]===t)return e;return null},pU=function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t};function Fbt(t){for(var e;(e=Mbt.exec(t))!==null;){var r=e[0];if(r.indexOf("target=")===-1){var n=r.replace(/>$/,' target="_blank">');t=t.replace(r,n)}}return t}function qbt(t){for(var e=new DOMParser,r=e.parseFromString(t,"text/html"),n=r.getElementsByTagName("li"),i=0;i<n.length;i++)for(var o=n[i],s=0;s<o.children.length;s++){var u=o.children[s];u instanceof HTMLInputElement&&u.type==="checkbox"&&(o.style.marginLeft="-1.5em",o.style.listStyleType="none")}return r.documentElement.innerHTML}function Q0e(t){return J0e?t=t.replace("Ctrl","Cmd"):t=t.replace("Cmd","Ctrl"),t}function Nbt(t,e,r,n){var i=UO(t,!1,e,r,"button",n);i.classList.add("easymde-dropdown"),i.onclick=function(){i.focus()};var o=document.createElement("div");o.className="easymde-dropdown-content";for(var s=0;s<t.children.length;s++){var u=t.children[s],h;typeof u=="string"&&u in Kb?h=UO(Kb[u],!0,e,r,"button",n):h=UO(u,!0,e,r,"button",n),h.addEventListener("click",function(y){y.stopPropagation()},!1),o.appendChild(h)}return i.appendChild(o),i}function UO(t,e,r,n,i,o){t=t||{};var s=document.createElement(i);if(t.attributes)for(var u in t.attributes)Object.prototype.hasOwnProperty.call(t.attributes,u)&&s.setAttribute(u,t.attributes[u]);var h=o.options.toolbarButtonClassPrefix?o.options.toolbarButtonClassPrefix+"-":"";s.className=h+t.name,s.setAttribute("type",i),r=r??!0,t.text&&(s.innerText=t.text),t.name&&t.name in n&&(OT[t.name]=t.action),t.title&&r&&(s.title=zbt(t.title,t.action,n),J0e&&(s.title=s.title.replace("Ctrl","\u2318"),s.title=s.title.replace("Alt","\u2325"))),t.title&&s.setAttribute("aria-label",t.title),t.noDisable&&s.classList.add("no-disable"),t.noMobile&&s.classList.add("no-mobile");var y=[];typeof t.className<"u"&&(y=t.className.split(" "));for(var w=[],T=0;T<y.length;T++){var I=y[T];I.match(/^fa([srlb]|(-[\w-]*)|$)/)?w.push(I):s.classList.add(I)}if(s.tabIndex=-1,w.length>0){for(var P=document.createElement("i"),L=0;L<w.length;L++){var R=w[L];P.classList.add(R)}s.appendChild(P)}return typeof t.icon<"u"&&(s.innerHTML=t.icon),t.action&&e&&(typeof t.action=="function"?s.onclick=function(W){W.preventDefault(),t.action(o)}:typeof t.action=="string"&&(s.onclick=function(W){W.preventDefault(),window.open(t.action,"_blank")})),s}function Bbt(){var t=document.createElement("i");return t.className="separator",t.innerHTML="|",t}function zbt(t,e,r){var n,i=t;return e&&(n=Rbt(e),r[n]&&(i+=" ("+Q0e(r[n])+")")),i}function ay(t,e){e=e||t.getCursor("start");var r=t.getTokenAt(e);if(!r.type)return{};for(var n=r.type.split(" "),i={},o,s,u=0;u<n.length;u++)o=n[u],o==="strong"?i.bold=!0:o==="variable-2"?(s=t.getLine(e.line),/^\s*\d+\.\s/.test(s)?i["ordered-list"]=!0:i["unordered-list"]=!0):o==="atom"?i.quote=!0:o==="em"?i.italic=!0:o==="quote"?i.quote=!0:o==="strikethrough"?i.strikethrough=!0:o==="comment"?i.code=!0:o==="link"&&!i.image?i.link=!0:o==="image"?i.image=!0:o.match(/^header(-[1-6])?$/)&&(i[o.replace("header","heading")]=!0);return i}var Y0e="";function Zb(t){var e=t.codemirror;e.setOption("fullScreen",!e.getOption("fullScreen")),e.getOption("fullScreen")?(Y0e=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=Y0e;var r=e.getWrapperElement(),n=r.nextSibling;if(n.classList.contains("editor-preview-active-side"))if(t.options.sideBySideFullscreen===!1){var i=r.parentNode;e.getOption("fullScreen")?i.classList.remove("sided--no-fullscreen"):i.classList.add("sided--no-fullscreen")}else s1(t);if(t.options.onToggleFullScreen&&t.options.onToggleFullScreen(e.getOption("fullScreen")||!1),typeof t.options.maxHeight<"u"&&(e.getOption("fullScreen")?(e.getScrollerElement().style.removeProperty("height"),n.style.removeProperty("height")):(e.getScrollerElement().style.height=t.options.maxHeight,t.setPreviewMaxHeight())),t.toolbar_div.classList.toggle("fullscreen"),t.toolbarElements&&t.toolbarElements.fullscreen){var o=t.toolbarElements.fullscreen;o.classList.toggle("active")}}function HO(t){_U(t,"bold",t.options.blockStyles.bold)}function WO(t){_U(t,"italic",t.options.blockStyles.italic)}function $O(t){_U(t,"strikethrough","~~")}function GO(t){var e=t.options.blockStyles.code;function r(he){if(typeof he!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof he+": "+he;return he.styles&&he.styles[2]&&he.styles[2].indexOf("formatting-code-block")!==-1}function n(he){return he.state.base.base||he.state.base}function i(he,Ce,Se,de,we){Se=Se||he.getLineHandle(Ce),de=de||he.getTokenAt({line:Ce,ch:1}),we=we||!!Se.text&&he.getTokenAt({line:Ce,ch:Se.text.length-1});var Ue=de.type?de.type.split(" "):[];return we&&n(we).indentedCode?"indented":Ue.indexOf("comment")===-1?!1:n(de).fencedChars||n(we).fencedChars||r(Se)?"fenced":"single"}function o(he,Ce,Se,de){var we=Ce.line+1,Ue=Se.line+1,ye=Ce.line!==Se.line,ne=de+`
`,st=`
`+de;ye&&Ue++,ye&&Se.ch===0&&(st=de+`
`,Ue--),Yb(he,!1,[ne,st]),he.setSelection({line:we,ch:0},{line:Ue,ch:0})}var s=t.codemirror,u=s.getCursor("start"),h=s.getCursor("end"),y=s.getTokenAt({line:u.line,ch:u.ch||1}),w=s.getLineHandle(u.line),T=i(s,u.line,w,y),I,P,L;if(T==="single"){var R=w.text.slice(0,u.ch).replace("`",""),W=w.text.slice(u.ch).replace("`","");s.replaceRange(R+W,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),u.ch--,u!==h&&h.ch--,s.setSelection(u,h),s.focus()}else if(T==="fenced")if(u.line!==h.line||u.ch!==h.ch){for(I=u.line;I>=0&&(w=s.getLineHandle(I),!r(w));I--);var G=s.getTokenAt({line:I,ch:1}),q=n(G).fencedChars,V,p,K,j;r(s.getLineHandle(u.line))?(V="",p=u.line):r(s.getLineHandle(u.line-1))?(V="",p=u.line-1):(V=q+`
`,p=u.line),r(s.getLineHandle(h.line))?(K="",j=h.line,h.ch===0&&(j+=1)):h.ch!==0&&r(s.getLineHandle(h.line+1))?(K="",j=h.line+1):(K=q+`
`,j=h.line+1),h.ch===0&&(j-=1),s.operation(function(){s.replaceRange(K,{line:j,ch:0},{line:j+(K?0:1),ch:0}),s.replaceRange(V,{line:p,ch:0},{line:p+(V?0:1),ch:0})}),s.setSelection({line:p+(V?1:0),ch:0},{line:j+(V?1:-1),ch:0}),s.focus()}else{var Q=u.line;if(r(s.getLineHandle(u.line))&&(i(s,u.line+1)==="fenced"?(I=u.line,Q=u.line+1):(P=u.line,Q=u.line-1)),I===void 0)for(I=Q;I>=0&&(w=s.getLineHandle(I),!r(w));I--);if(P===void 0)for(L=s.lineCount(),P=Q;P<L&&(w=s.getLineHandle(P),!r(w));P++);s.operation(function(){s.replaceRange("",{line:I,ch:0},{line:I+1,ch:0}),s.replaceRange("",{line:P-1,ch:0},{line:P,ch:0})}),s.focus()}else if(T==="indented"){if(u.line!==h.line||u.ch!==h.ch)I=u.line,P=h.line,h.ch===0&&P--;else{for(I=u.line;I>=0;I--)if(w=s.getLineHandle(I),!w.text.match(/^\s*$/)&&i(s,I,w)!=="indented"){I+=1;break}for(L=s.lineCount(),P=u.line;P<L;P++)if(w=s.getLineHandle(P),!w.text.match(/^\s*$/)&&i(s,P,w)!=="indented"){P-=1;break}}var ee=s.getLineHandle(P+1),se=ee&&s.getTokenAt({line:P+1,ch:ee.text.length-1}),me=se&&n(se).indentedCode;me&&s.replaceRange(`
`,{line:P+1,ch:0});for(var ve=I;ve<=P;ve++)s.indentLine(ve,"subtract");s.focus()}else{var U=u.line===h.line&&u.ch===h.ch&&u.ch===0,$=u.line!==h.line;U||$?o(s,u,h,e):Yb(s,!1,["`","`"])}}function KO(t){bU(t.codemirror,"quote")}function PT(t){sy(t.codemirror,"smaller")}function ZO(t){sy(t.codemirror,"bigger")}function YO(t){sy(t.codemirror,void 0,1)}function XO(t){sy(t.codemirror,void 0,2)}function JO(t){sy(t.codemirror,void 0,3)}function mU(t){sy(t.codemirror,void 0,4)}function gU(t){sy(t.codemirror,void 0,5)}function vU(t){sy(t.codemirror,void 0,6)}function QO(t){var e=t.codemirror,r="*";["-","+","*"].includes(t.options.unorderedListStyle)&&(r=t.options.unorderedListStyle),bU(e,"unordered-list",r)}function eP(t){bU(t.codemirror,"ordered-list")}function tP(t){jbt(t.codemirror)}function rP(t){var e=t.options,r="https://";if(e.promptURLs){var n=prompt(e.promptTexts.link,r);if(!n)return!1;r=e_e(n)}r_e(t,"link",e.insertTexts.link,r)}function nP(t){var e=t.options,r="https://";if(e.promptURLs){var n=prompt(e.promptTexts.image,r);if(!n)return!1;r=e_e(n)}r_e(t,"image",e.insertTexts.image,r)}function e_e(t){return encodeURI(t).replace(/([\\()])/g,"\\$1")}function yU(t){t.openBrowseFileWindow()}function t_e(t,e){var r=t.codemirror,n=ay(r),i=t.options,o=e.substr(e.lastIndexOf("/")+1),s=o.substring(o.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(s))Yb(r,n.image,i.insertTexts.uploadedImage,e);else{var u=i.insertTexts.link;u[0]="["+o,Yb(r,n.link,u,e)}t.updateStatusBar("upload-image",t.options.imageTexts.sbOnUploaded.replace("#image_name#",o)),setTimeout(function(){t.updateStatusBar("upload-image",t.options.imageTexts.sbInit)},1e3)}function iP(t){var e=t.codemirror,r=ay(e),n=t.options;Yb(e,r.table,n.insertTexts.table)}function oP(t){var e=t.codemirror,r=ay(e),n=t.options;Yb(e,r.image,n.insertTexts.horizontalRule)}function aP(t){var e=t.codemirror;e.undo(),e.focus()}function sP(t){var e=t.codemirror;e.redo(),e.focus()}function s1(t){var e=t.codemirror,r=e.getWrapperElement(),n=r.nextSibling,i=t.toolbarElements&&t.toolbarElements["side-by-side"],o=!1,s=r.parentNode;n.classList.contains("editor-preview-active-side")?(t.options.sideBySideFullscreen===!1&&s.classList.remove("sided--no-fullscreen"),n.classList.remove("editor-preview-active-side"),i&&i.classList.remove("active"),r.classList.remove("CodeMirror-sided")):(setTimeout(function(){e.getOption("fullScreen")||(t.options.sideBySideFullscreen===!1?s.classList.add("sided--no-fullscreen"):Zb(t)),n.classList.add("editor-preview-active-side")},1),i&&i.classList.add("active"),r.classList.add("CodeMirror-sided"),o=!0);var u=r.lastChild;if(u.classList.contains("editor-preview-active")){u.classList.remove("editor-preview-active");var h=t.toolbarElements.preview,y=t.toolbar_div;h.classList.remove("active"),y.classList.remove("disabled-for-preview")}var w=function(){var I=t.options.previewRender(t.value(),n);I!=null&&(n.innerHTML=I)};if(e.sideBySideRenderingFunction||(e.sideBySideRenderingFunction=w),o){var T=t.options.previewRender(t.value(),n);T!=null&&(n.innerHTML=T),e.on("update",e.sideBySideRenderingFunction)}else e.off("update",e.sideBySideRenderingFunction);e.refresh()}function lP(t){var e=t.codemirror,r=e.getWrapperElement(),n=t.toolbar_div,i=t.options.toolbar?t.toolbarElements.preview:!1,o=r.lastChild,s=e.getWrapperElement().nextSibling;if(s.classList.contains("editor-preview-active-side")&&s1(t),!o||!o.classList.contains("editor-preview-full")){if(o=document.createElement("div"),o.className="editor-preview-full",t.options.previewClass)if(Array.isArray(t.options.previewClass))for(var u=0;u<t.options.previewClass.length;u++)o.classList.add(t.options.previewClass[u]);else typeof t.options.previewClass=="string"&&o.classList.add(t.options.previewClass);r.appendChild(o)}o.classList.contains("editor-preview-active")?(o.classList.remove("editor-preview-active"),i&&(i.classList.remove("active"),n.classList.remove("disabled-for-preview"))):(setTimeout(function(){o.classList.add("editor-preview-active")},1),i&&(i.classList.add("active"),n.classList.add("disabled-for-preview")));var h=t.options.previewRender(t.value(),o);h!==null&&(o.innerHTML=h)}function Yb(t,e,r,n){if(!t.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var i,o=r[0],s=r[1],u={},h={};Object.assign(u,t.getCursor("start")),Object.assign(h,t.getCursor("end")),n&&(o=o.replace("#url#",n),s=s.replace("#url#",n)),e?(i=t.getLine(u.line),o=i.slice(0,u.ch),s=i.slice(u.ch),t.replaceRange(o+s,{line:u.line,ch:0})):(i=t.getSelection(),t.replaceSelection(o+i+s),u.ch+=o.length,u!==h&&(h.ch+=o.length)),t.setSelection(u,h),t.focus()}}function sy(t,e,r){if(!t.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var n=t.getCursor("start"),i=t.getCursor("end"),o=n.line;o<=i.line;o++)(function(s){var u=t.getLine(s),h=u.search(/[^#]/);e!==void 0?h<=0?e=="bigger"?u="###### "+u:u="# "+u:h==6&&e=="smaller"?u=u.substr(7):h==1&&e=="bigger"?u=u.substr(2):e=="bigger"?u=u.substr(1):u="#"+u:h<=0?u="#".repeat(r)+" "+u:h==r?u=u.substr(h+1):u="#".repeat(r)+" "+u.substr(h+1),t.replaceRange(u,{line:s,ch:0},{line:s,ch:99999999999999})})(o);t.focus()}}function bU(t,e,r){if(!t.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var n=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,i=/^\s*/,o=ay(t),s=t.getCursor("start"),u=t.getCursor("end"),h={quote:/^(\s*)>\s+/,"unordered-list":n,"ordered-list":n},y=function(L,R){var W={quote:">","unordered-list":r,"ordered-list":"%%i."};return W[L].replace("%%i",R)},w=function(L,R){var W={quote:">","unordered-list":"\\"+r,"ordered-list":"\\d+."},G=new RegExp(W[L]);return R&&G.test(R)},T=function(L,R,W){var G=n.exec(R),q=y(L,I);return G!==null?(w(L,G[2])&&(q=""),R=G[1]+q+G[3]+R.replace(i,"").replace(h[L],"$1")):W==!1&&(R=q+" "+R),R},I=1,P=s.line;P<=u.line;P++)(function(L){var R=t.getLine(L);o[e]?R=R.replace(h[e],"$1"):(e=="unordered-list"&&(R=T("ordered-list",R,!0)),R=T(e,R,!1),I+=1),t.replaceRange(R,{line:L,ch:0},{line:L,ch:99999999999999})})(P);t.focus()}}function r_e(t,e,r,n){if(!(!t.codemirror||t.isPreviewActive())){var i=t.codemirror,o=ay(i),s=o[e];if(!s){Yb(i,s,r,n);return}var u=i.getCursor("start"),h=i.getCursor("end"),y=i.getLine(u.line),w=y.slice(0,u.ch),T=y.slice(u.ch);e=="link"?w=w.replace(/(.*)[^!]\[/,"$1"):e=="image"&&(w=w.replace(/(.*)!\[$/,"$1")),T=T.replace(/]\(.*?\)/,""),i.replaceRange(w+T,{line:u.line,ch:0},{line:u.line,ch:99999999999999}),u.ch-=r[0].length,u!==h&&(h.ch-=r[0].length),i.setSelection(u,h),i.focus()}}function _U(t,e,r,n){if(!(!t.codemirror||t.isPreviewActive())){n=typeof n>"u"?r:n;var i=t.codemirror,o=ay(i),s,u=r,h=n,y=i.getCursor("start"),w=i.getCursor("end");o[e]?(s=i.getLine(y.line),u=s.slice(0,y.ch),h=s.slice(y.ch),e=="bold"?(u=u.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),h=h.replace(/(\*\*|__)/,"")):e=="italic"?(u=u.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),h=h.replace(/(\*|_)/,"")):e=="strikethrough"&&(u=u.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),h=h.replace(/(\*\*|~~)/,"")),i.replaceRange(u+h,{line:y.line,ch:0},{line:y.line,ch:99999999999999}),e=="bold"||e=="strikethrough"?(y.ch-=2,y!==w&&(w.ch-=2)):e=="italic"&&(y.ch-=1,y!==w&&(w.ch-=1))):(s=i.getSelection(),e=="bold"?(s=s.split("**").join(""),s=s.split("__").join("")):e=="italic"?(s=s.split("*").join(""),s=s.split("_").join("")):e=="strikethrough"&&(s=s.split("~~").join("")),i.replaceSelection(u+s+h),y.ch+=r.length,w.ch=y.ch+s.length),i.setSelection(y,w),i.focus()}}function jbt(t){if(!t.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var e=t.getCursor("start"),r=t.getCursor("end"),n,i=e.line;i<=r.line;i++)n=t.getLine(i),n=n.replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),t.replaceRange(n,{line:i,ch:0},{line:i,ch:99999999999999})}function VO(t,e){if(Math.abs(t)<1024)return""+t+e[0];var r=0;do t/=1024,++r;while(Math.abs(t)>=1024&&r<e.length);return""+t.toFixed(1)+e[r]}function n_e(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]instanceof Array?t[r]=e[r].concat(t[r]instanceof Array?t[r]:[]):e[r]!==null&&typeof e[r]=="object"&&e[r].constructor===Object?t[r]=n_e(t[r]||{},e[r]):t[r]=e[r]);return t}function bg(t){for(var e=1;e<arguments.length;e++)t=n_e(t,arguments[e]);return t}function X0e(t){var e=/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,r=t.match(e),n=0;if(r===null)return n;for(var i=0;i<r.length;i++)r[i].charCodeAt(0)>=19968?n+=r[i].length:n+=1;return n}var Oa={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},Kb={bold:{name:"bold",action:HO,className:Oa.bold,title:"Bold",default:!0},italic:{name:"italic",action:WO,className:Oa.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:$O,className:Oa.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:PT,className:Oa.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:PT,className:Oa["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:ZO,className:Oa["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:YO,className:Oa["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:XO,className:Oa["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:JO,className:Oa["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:GO,className:Oa.code,title:"Code"},quote:{name:"quote",action:KO,className:Oa.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:QO,className:Oa["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:eP,className:Oa["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:tP,className:Oa["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:rP,className:Oa.link,title:"Create Link",default:!0},image:{name:"image",action:nP,className:Oa.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:yU,className:Oa["upload-image"],title:"Import an image"},table:{name:"table",action:iP,className:Oa.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:oP,className:Oa["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:lP,className:Oa.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:s1,className:Oa["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:Zb,className:Oa.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:Oa.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:aP,className:Oa.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:sP,className:Oa.redo,noDisable:!0,title:"Redo"}},Ubt={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},Vbt={link:"URL for the link:",image:"URL of the image:"},Hbt={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},Wbt={bold:"**",code:"```",italic:"*"},$bt={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},Gbt={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function Zr(t){t=t||{},t.parent=this;var e=!0;if(t.autoDownloadFontAwesome===!1&&(e=!1),t.autoDownloadFontAwesome!==!0)for(var r=document.styleSheets,n=0;n<r.length;n++)r[n].href&&r[n].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(e=!1);if(e){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(t.element)this.element=t.element;else if(t.element===null){console.log("EasyMDE: Error. No element was found.");return}if(t.toolbar===void 0){t.toolbar=[];for(var o in Kb)Object.prototype.hasOwnProperty.call(Kb,o)&&(o.indexOf("separator-")!=-1&&t.toolbar.push("|"),(Kb[o].default===!0||t.showIcons&&t.showIcons.constructor===Array&&t.showIcons.indexOf(o)!=-1)&&t.toolbar.push(o))}if(Object.prototype.hasOwnProperty.call(t,"previewClass")||(t.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(t,"status")||(t.status=["autosave","lines","words","cursor"],t.uploadImage&&t.status.unshift("upload-image")),t.previewRender||(t.previewRender=function(u){return this.parent.markdown(u)}),t.parsingConfig=bg({highlightFormatting:!0},t.parsingConfig||{}),t.insertTexts=bg({},Ubt,t.insertTexts||{}),t.promptTexts=bg({},Vbt,t.promptTexts||{}),t.blockStyles=bg({},Wbt,t.blockStyles||{}),t.autosave!=null&&(t.autosave.timeFormat=bg({},Hbt,t.autosave.timeFormat||{})),t.iconClassMap=bg({},Oa,t.iconClassMap||{}),t.shortcuts=bg({},Lbt,t.shortcuts||{}),t.maxHeight=t.maxHeight||void 0,t.direction=t.direction||"ltr",typeof t.maxHeight<"u"?t.minHeight=t.maxHeight:t.minHeight=t.minHeight||"300px",t.errorCallback=t.errorCallback||function(u){alert(u)},t.uploadImage=t.uploadImage||!1,t.imageMaxSize=t.imageMaxSize||2097152,t.imageAccept=t.imageAccept||"image/png, image/jpeg, image/gif, image/avif",t.imageTexts=bg({},$bt,t.imageTexts||{}),t.errorMessages=bg({},Gbt,t.errorMessages||{}),t.imagePathAbsolute=t.imagePathAbsolute||!1,t.imageCSRFName=t.imageCSRFName||"csrfmiddlewaretoken",t.imageCSRFHeader=t.imageCSRFHeader||!1,t.imageInputName=t.imageInputName||"image",t.autosave!=null&&t.autosave.unique_id!=null&&t.autosave.unique_id!=""&&(t.autosave.uniqueId=t.autosave.unique_id),t.overlayMode&&t.overlayMode.combine===void 0&&(t.overlayMode.combine=!0),this.options=t,this.render(),t.initialValue&&(!this.options.autosave||this.options.autosave.foundSavedValue!==!0)&&this.value(t.initialValue),t.uploadImage){var s=this;this.codemirror.on("dragenter",function(u,h){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),h.stopPropagation(),h.preventDefault()}),this.codemirror.on("dragend",function(u,h){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),h.stopPropagation(),h.preventDefault()}),this.codemirror.on("dragleave",function(u,h){s.updateStatusBar("upload-image",s.options.imageTexts.sbInit),h.stopPropagation(),h.preventDefault()}),this.codemirror.on("dragover",function(u,h){s.updateStatusBar("upload-image",s.options.imageTexts.sbOnDragEnter),h.stopPropagation(),h.preventDefault()}),this.codemirror.on("drop",function(u,h){h.stopPropagation(),h.preventDefault(),t.imageUploadFunction?s.uploadImagesUsingCustomFunction(t.imageUploadFunction,h.dataTransfer.files):s.uploadImages(h.dataTransfer.files)}),this.codemirror.on("paste",function(u,h){t.imageUploadFunction?s.uploadImagesUsingCustomFunction(t.imageUploadFunction,h.clipboardData.files):s.uploadImages(h.clipboardData.files)})}}Zr.prototype.uploadImages=function(t,e,r){if(t.length!==0){for(var n=[],i=0;i<t.length;i++)n.push(t[i].name),this.uploadImage(t[i],e,r);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",n.join(", ")))}};Zr.prototype.uploadImagesUsingCustomFunction=function(t,e){if(e.length!==0){for(var r=[],n=0;n<e.length;n++)r.push(e[n].name),this.uploadImageUsingCustomFunction(t,e[n]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",r.join(", ")))}};Zr.prototype.updateStatusBar=function(t,e){if(this.gui.statusbar){var r=this.gui.statusbar.getElementsByClassName(t);r.length===1?this.gui.statusbar.getElementsByClassName(t)[0].textContent=e:r.length===0?console.log("EasyMDE: status bar item "+t+" was not found."):console.log("EasyMDE: Several status bar items named "+t+" was found.")}};Zr.prototype.markdown=function(t){if(dU){var e;if(this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?e=this.options.renderingConfig.markedOptions:e={},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?e.breaks=!1:e.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var r=this.options.renderingConfig.hljs||window.hljs;r&&(e.highlight=function(i,o){return o&&r.getLanguage(o)?r.highlight(o,i).value:r.highlightAuto(i).value})}dU.use(e);var n=dU.parse(t);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(n=this.options.renderingConfig.sanitizerFunction.call(this,n)),n=Fbt(n),n=qbt(n),n}};Zr.prototype.render=function(t){if(t||(t=this.element||document.getElementsByTagName("textarea")[0]),this._rendered&&this._rendered===t)return;this.element=t;var e=this.options,r=this,n={};for(var i in e.shortcuts)e.shortcuts[i]!==null&&OT[i]!==null&&function(W){n[Q0e(e.shortcuts[W])]=function(){var G=OT[W];typeof G=="function"?G(r):typeof G=="string"&&window.open(G,"_blank")}}(i);n.Enter="newlineAndIndentContinueMarkdownList",n.Tab="tabAndIndentMarkdownList",n["Shift-Tab"]="shiftTabAndUnindentMarkdownList",n.Esc=function(W){W.getOption("fullScreen")&&Zb(r)},this.documentOnKeyDown=function(W){W=W||window.event,W.keyCode==27&&r.codemirror.getOption("fullScreen")&&Zb(r)},document.addEventListener("keydown",this.documentOnKeyDown,!1);var o,s;e.overlayMode?(a1.defineMode("overlay-mode",function(W){return a1.overlayMode(a1.getMode(W,e.spellChecker!==!1?"spell-checker":"gfm"),e.overlayMode.mode,e.overlayMode.combine)}),o="overlay-mode",s=e.parsingConfig,s.gitHubSpice=!1):(o=e.parsingConfig,o.name="gfm",o.gitHubSpice=!1),e.spellChecker!==!1&&(o="spell-checker",s=e.parsingConfig,s.name="gfm",s.gitHubSpice=!1,typeof e.spellChecker=="function"?e.spellChecker({codeMirrorInstance:a1}):Pbt({codeMirrorInstance:a1}));function u(W,G,q){return{addNew:!1}}if(this.codemirror=a1.fromTextArea(t,{mode:o,backdrop:s,theme:e.theme!=null?e.theme:"easymde",tabSize:e.tabSize!=null?e.tabSize:2,indentUnit:e.tabSize!=null?e.tabSize:2,indentWithTabs:e.indentWithTabs!==!1,lineNumbers:e.lineNumbers===!0,autofocus:e.autofocus===!0,extraKeys:n,direction:e.direction,lineWrapping:e.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:e.placeholder||t.getAttribute("placeholder")||"",styleSelectedText:e.styleSelectedText!=null?e.styleSelectedText:!pU(),scrollbarStyle:e.scrollbarStyle!=null?e.scrollbarStyle:"native",configureMouse:u,inputStyle:e.inputStyle!=null?e.inputStyle:pU()?"contenteditable":"textarea",spellcheck:e.nativeSpellcheck!=null?e.nativeSpellcheck:!0,autoRefresh:e.autoRefresh!=null?e.autoRefresh:!1}),this.codemirror.getScrollerElement().style.minHeight=e.minHeight,typeof e.maxHeight<"u"&&(this.codemirror.getScrollerElement().style.height=e.maxHeight),e.forceSync===!0){var h=this.codemirror;h.on("change",function(){h.save()})}this.gui={};var y=document.createElement("div");y.classList.add("EasyMDEContainer"),y.setAttribute("role","application");var w=this.codemirror.getWrapperElement();w.parentNode.insertBefore(y,w),y.appendChild(w),e.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),e.status!==!1&&(this.gui.statusbar=this.createStatusbar()),e.autosave!=null&&e.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(r._autosave_timeout),r._autosave_timeout=setTimeout(function(){r.autosave()},r.options.autosave.submit_delay||r.options.autosave.delay||1e3)}));function T(W,G){var q,V=window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","");return W<V?q=G+"px":q=G/W*100+"%",q}var I=this;function P(W,G){var q=new URL(G.url,document.baseURI).href;W.setAttribute("data-img-src",q),W.setAttribute("style","--bg-image:url("+q+");--width:"+G.naturalWidth+"px;--height:"+T(G.naturalWidth,G.naturalHeight)),I.codemirror.setSize()}function L(){e.previewImagesInEditor&&y.querySelectorAll(".cm-image-marker").forEach(function(W){var G=W.parentElement;if(G.innerText.match(/^!\[.*?\]\(.*\)/g)&&!G.hasAttribute("data-img-src")){var q=G.innerText.match(/!\[.*?\]\((.*?)\)/);if(window.EMDEimagesCache||(window.EMDEimagesCache={}),q&&q.length>=2){var V=q[1];if(e.imagesPreviewHandler){var p=e.imagesPreviewHandler(q[1]);typeof p=="string"&&(V=p)}if(window.EMDEimagesCache[V])P(G,window.EMDEimagesCache[V]);else{window.EMDEimagesCache[V]={};var K=document.createElement("img");K.onload=function(){window.EMDEimagesCache[V]={naturalWidth:K.naturalWidth,naturalHeight:K.naturalHeight,url:V},P(G,window.EMDEimagesCache[V])},K.src=V}}}})}this.codemirror.on("update",function(){L()}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(e.autofocus===!0||t.autofocus)&&this.codemirror.focus();var R=this.codemirror;setTimeout(function(){R.refresh()}.bind(R),0)};Zr.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)};function i_e(){if(typeof localStorage=="object")try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}else return!1;return!0}Zr.prototype.autosave=function(){if(i_e()){var t=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to use the autosave feature");return}this.options.autosave.binded!==!0&&(t.element.form!=null&&t.element.form!=null&&t.element.form.addEventListener("submit",function(){clearTimeout(t.autosaveTimeoutId),t.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+t.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var e=t.value();e!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,e):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var r=document.getElementById("autosaved");if(r!=null&&r!=null&&r!=""){var n=new Date,i=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(n),o=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;r.innerHTML=o+i}}else console.log("EasyMDE: localStorage not available, cannot autosave")};Zr.prototype.clearAutosavedValue=function(){if(i_e()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to clear the autosave value");return}localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")};Zr.prototype.openBrowseFileWindow=function(t,e){var r=this,n=this.gui.toolbar.getElementsByClassName("imageInput")[0];n.click();function i(o){r.options.imageUploadFunction?r.uploadImagesUsingCustomFunction(r.options.imageUploadFunction,o.target.files):r.uploadImages(o.target.files,t,e),n.removeEventListener("change",i)}n.addEventListener("change",i)};Zr.prototype.uploadImage=function(t,e,r){var n=this;e=e||function(y){t_e(n,y)};function i(h){n.updateStatusBar("upload-image",h),setTimeout(function(){n.updateStatusBar("upload-image",n.options.imageTexts.sbInit)},1e4),r&&typeof r=="function"&&r(h),n.options.errorCallback(h)}function o(h){var y=n.options.imageTexts.sizeUnits.split(",");return h.replace("#image_name#",t.name).replace("#image_size#",VO(t.size,y)).replace("#image_max_size#",VO(n.options.imageMaxSize,y))}if(t.size>this.options.imageMaxSize){i(o(this.options.errorMessages.fileTooLarge));return}var s=new FormData;s.append("image",t),n.options.imageCSRFToken&&!n.options.imageCSRFHeader&&s.append(n.options.imageCSRFName,n.options.imageCSRFToken);var u=new XMLHttpRequest;u.upload.onprogress=function(h){if(h.lengthComputable){var y=""+Math.round(h.loaded*100/h.total);n.updateStatusBar("upload-image",n.options.imageTexts.sbProgress.replace("#file_name#",t.name).replace("#progress#",y))}},u.open("POST",this.options.imageUploadEndpoint),n.options.imageCSRFToken&&n.options.imageCSRFHeader&&u.setRequestHeader(n.options.imageCSRFName,n.options.imageCSRFToken),u.onload=function(){try{var h=JSON.parse(this.responseText)}catch{console.error("EasyMDE: The server did not return a valid json."),i(o(n.options.errorMessages.importError));return}this.status===200&&h&&!h.error&&h.data&&h.data.filePath?e((n.options.imagePathAbsolute?"":window.location.origin+"/")+h.data.filePath):h.error&&h.error in n.options.errorMessages?i(o(n.options.errorMessages[h.error])):h.error?i(o(h.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),i(o(n.options.errorMessages.importError)))},u.onerror=function(h){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+h.target.status+" ("+h.target.statusText+")"),i(n.options.errorMessages.importError)},u.send(s)};Zr.prototype.uploadImageUsingCustomFunction=function(t,e){var r=this;function n(s){t_e(r,s)}function i(s){var u=o(s);r.updateStatusBar("upload-image",u),setTimeout(function(){r.updateStatusBar("upload-image",r.options.imageTexts.sbInit)},1e4),r.options.errorCallback(u)}function o(s){var u=r.options.imageTexts.sizeUnits.split(",");return s.replace("#image_name#",e.name).replace("#image_size#",VO(e.size,u)).replace("#image_max_size#",VO(r.options.imageMaxSize,u))}t.apply(this,[e,n,i])};Zr.prototype.setPreviewMaxHeight=function(){var t=this.codemirror,e=t.getWrapperElement(),r=e.nextSibling,n=parseInt(window.getComputedStyle(e).paddingTop),i=parseInt(window.getComputedStyle(e).borderTopWidth),o=parseInt(this.options.maxHeight),s=o+n*2+i*2,u=s.toString()+"px";r.style.height=u};Zr.prototype.createSideBySide=function(){var t=this.codemirror,e=t.getWrapperElement(),r=e.nextSibling;if(!r||!r.classList.contains("editor-preview-side")){if(r=document.createElement("div"),r.className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var n=0;n<this.options.previewClass.length;n++)r.classList.add(this.options.previewClass[n]);else typeof this.options.previewClass=="string"&&r.classList.add(this.options.previewClass);e.parentNode.insertBefore(r,e.nextSibling)}if(typeof this.options.maxHeight<"u"&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return r;var i=!1,o=!1;return t.on("scroll",function(s){if(i){i=!1;return}o=!0;var u=s.getScrollInfo().height-s.getScrollInfo().clientHeight,h=parseFloat(s.getScrollInfo().top)/u,y=(r.scrollHeight-r.clientHeight)*h;r.scrollTop=y}),r.onscroll=function(){if(o){o=!1;return}i=!0;var s=r.scrollHeight-r.clientHeight,u=parseFloat(r.scrollTop)/s,h=(t.getScrollInfo().height-t.getScrollInfo().clientHeight)*u;t.scrollTo(0,h)},r};Zr.prototype.createToolbar=function(t){if(t=t||this.options.toolbar,!(!t||t.length===0)){var e;for(e=0;e<t.length;e++)Kb[t[e]]!=null&&(t[e]=Kb[t[e]]);var r=document.createElement("div");r.className="editor-toolbar",r.setAttribute("role","toolbar");var n=this,i={};for(n.toolbar=t,e=0;e<t.length;e++)if(!(t[e].name=="guide"&&n.options.toolbarGuideIcon===!1)&&!(n.options.hideIcons&&n.options.hideIcons.indexOf(t[e].name)!=-1)&&!((t[e].name=="fullscreen"||t[e].name=="side-by-side")&&pU())){if(t[e]==="|"){for(var o=!1,s=e+1;s<t.length;s++)t[s]!=="|"&&(!n.options.hideIcons||n.options.hideIcons.indexOf(t[s].name)==-1)&&(o=!0);if(!o)continue}(function(y){var w;if(y==="|"?w=Bbt():y.children?w=Nbt(y,n.options.toolbarTips,n.options.shortcuts,n):w=UO(y,!0,n.options.toolbarTips,n.options.shortcuts,"button",n),i[y.name||y]=w,r.appendChild(w),y.name==="upload-image"){var T=document.createElement("input");T.className="imageInput",T.type="file",T.multiple=!0,T.name=n.options.imageInputName,T.accept=n.options.imageAccept,T.style.display="none",T.style.opacity=0,r.appendChild(T)}})(t[e])}n.toolbar_div=r,n.toolbarElements=i;var u=this.codemirror;u.on("cursorActivity",function(){var y=ay(u);for(var w in i)(function(T){var I=i[T];y[T]?I.classList.add("active"):T!="fullscreen"&&T!="side-by-side"&&I.classList.remove("active")})(w)});var h=u.getWrapperElement();return h.parentNode.insertBefore(r,h),r}};Zr.prototype.createStatusbar=function(t){t=t||this.options.status;var e=this.options,r=this.codemirror;if(!(!t||t.length===0)){var n=[],i,o,s,u;for(i=0;i<t.length;i++)if(o=void 0,s=void 0,u=void 0,typeof t[i]=="object")n.push({className:t[i].className,defaultValue:t[i].defaultValue,onUpdate:t[i].onUpdate,onActivity:t[i].onActivity});else{var h=t[i];h==="words"?(u=function(P){P.innerHTML=X0e(r.getValue())},o=function(P){P.innerHTML=X0e(r.getValue())}):h==="lines"?(u=function(P){P.innerHTML=r.lineCount()},o=function(P){P.innerHTML=r.lineCount()}):h==="cursor"?(u=function(P){P.innerHTML="1:1"},s=function(P){var L=r.getCursor(),R=L.line+1,W=L.ch+1;P.innerHTML=R+":"+W}):h==="autosave"?u=function(P){e.autosave!=null&&e.autosave.enabled===!0&&P.setAttribute("id","autosaved")}:h==="upload-image"&&(u=function(P){P.innerHTML=e.imageTexts.sbInit}),n.push({className:h,defaultValue:u,onUpdate:o,onActivity:s})}var y=document.createElement("div");for(y.className="editor-statusbar",i=0;i<n.length;i++){var w=n[i],T=document.createElement("span");T.className=w.className,typeof w.defaultValue=="function"&&w.defaultValue(T),typeof w.onUpdate=="function"&&this.codemirror.on("update",function(P,L){return function(){L.onUpdate(P)}}(T,w)),typeof w.onActivity=="function"&&this.codemirror.on("cursorActivity",function(P,L){return function(){L.onActivity(P)}}(T,w)),y.appendChild(T)}var I=this.codemirror.getWrapperElement();return I.parentNode.insertBefore(y,I.nextSibling),y}};Zr.prototype.value=function(t){var e=this.codemirror;if(t===void 0)return e.getValue();if(e.getDoc().setValue(t),this.isPreviewActive()){var r=e.getWrapperElement(),n=r.lastChild,i=this.options.previewRender(t,n);i!==null&&(n.innerHTML=i)}return this};Zr.toggleBold=HO;Zr.toggleItalic=WO;Zr.toggleStrikethrough=$O;Zr.toggleBlockquote=KO;Zr.toggleHeadingSmaller=PT;Zr.toggleHeadingBigger=ZO;Zr.toggleHeading1=YO;Zr.toggleHeading2=XO;Zr.toggleHeading3=JO;Zr.toggleHeading4=mU;Zr.toggleHeading5=gU;Zr.toggleHeading6=vU;Zr.toggleCodeBlock=GO;Zr.toggleUnorderedList=QO;Zr.toggleOrderedList=eP;Zr.cleanBlock=tP;Zr.drawLink=rP;Zr.drawImage=nP;Zr.drawUploadedImage=yU;Zr.drawTable=iP;Zr.drawHorizontalRule=oP;Zr.undo=aP;Zr.redo=sP;Zr.togglePreview=lP;Zr.toggleSideBySide=s1;Zr.toggleFullScreen=Zb;Zr.prototype.toggleBold=function(){HO(this)};Zr.prototype.toggleItalic=function(){WO(this)};Zr.prototype.toggleStrikethrough=function(){$O(this)};Zr.prototype.toggleBlockquote=function(){KO(this)};Zr.prototype.toggleHeadingSmaller=function(){PT(this)};Zr.prototype.toggleHeadingBigger=function(){ZO(this)};Zr.prototype.toggleHeading1=function(){YO(this)};Zr.prototype.toggleHeading2=function(){XO(this)};Zr.prototype.toggleHeading3=function(){JO(this)};Zr.prototype.toggleHeading4=function(){mU(this)};Zr.prototype.toggleHeading5=function(){gU(this)};Zr.prototype.toggleHeading6=function(){vU(this)};Zr.prototype.toggleCodeBlock=function(){GO(this)};Zr.prototype.toggleUnorderedList=function(){QO(this)};Zr.prototype.toggleOrderedList=function(){eP(this)};Zr.prototype.cleanBlock=function(){tP(this)};Zr.prototype.drawLink=function(){rP(this)};Zr.prototype.drawImage=function(){nP(this)};Zr.prototype.drawUploadedImage=function(){yU(this)};Zr.prototype.drawTable=function(){iP(this)};Zr.prototype.drawHorizontalRule=function(){oP(this)};Zr.prototype.undo=function(){aP(this)};Zr.prototype.redo=function(){sP(this)};Zr.prototype.togglePreview=function(){lP(this)};Zr.prototype.toggleSideBySide=function(){s1(this)};Zr.prototype.toggleFullScreen=function(){Zb(this)};Zr.prototype.isPreviewActive=function(){var t=this.codemirror,e=t.getWrapperElement(),r=e.lastChild;return r.classList.contains("editor-preview-active")};Zr.prototype.isSideBySideActive=function(){var t=this.codemirror,e=t.getWrapperElement(),r=e.nextSibling;return r.classList.contains("editor-preview-active-side")};Zr.prototype.isFullscreenActive=function(){var t=this.codemirror;return t.getOption("fullScreen")};Zr.prototype.getState=function(){var t=this.codemirror;return ay(t)};Zr.prototype.toTextArea=function(){var t=this.codemirror,e=t.getWrapperElement(),r=e.parentNode;r&&(this.gui.toolbar&&r.removeChild(this.gui.toolbar),this.gui.statusbar&&r.removeChild(this.gui.statusbar),this.gui.sideBySide&&r.removeChild(this.gui.sideBySide)),r.parentNode.insertBefore(e,r),r.remove(),t.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())};o_e.exports=Zr});var S_e=J((pWt,w_e)=>{var m0t=typeof global=="object"&&global&&global.Object===Object&&global;w_e.exports=m0t});var T_e=J((mWt,E_e)=>{var g0t=S_e(),v0t=typeof self=="object"&&self&&self.Object===Object&&self,y0t=g0t||v0t||Function("return this")();E_e.exports=y0t});var EP=J((gWt,A_e)=>{var b0t=T_e(),_0t=b0t.Symbol;A_e.exports=_0t});var C_e=J((vWt,k_e)=>{function x0t(t,e){for(var r=-1,n=t==null?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}k_e.exports=x0t});var D_e=J((yWt,I_e)=>{var w0t=Array.isArray;I_e.exports=w0t});var L_e=J((bWt,M_e)=>{var O_e=EP(),P_e=Object.prototype,S0t=P_e.hasOwnProperty,E0t=P_e.toString,NT=O_e?O_e.toStringTag:void 0;function T0t(t){var e=S0t.call(t,NT),r=t[NT];try{t[NT]=void 0;var n=!0}catch{}var i=E0t.call(t);return n&&(e?t[NT]=r:delete t[NT]),i}M_e.exports=T0t});var F_e=J((_Wt,R_e)=>{var A0t=Object.prototype,k0t=A0t.toString;function C0t(t){return k0t.call(t)}R_e.exports=C0t});var z_e=J((xWt,B_e)=>{var q_e=EP(),I0t=L_e(),D0t=F_e(),O0t="[object Null]",P0t="[object Undefined]",N_e=q_e?q_e.toStringTag:void 0;function M0t(t){return t==null?t===void 0?P0t:O0t:N_e&&N_e in Object(t)?I0t(t):D0t(t)}B_e.exports=M0t});var U_e=J((wWt,j_e)=>{function L0t(t){return t!=null&&typeof t=="object"}j_e.exports=L0t});var H_e=J((SWt,V_e)=>{var R0t=z_e(),F0t=U_e(),q0t="[object Symbol]";function N0t(t){return typeof t=="symbol"||F0t(t)&&R0t(t)==q0t}V_e.exports=N0t});var Y_e=J((EWt,Z_e)=>{var W_e=EP(),B0t=C_e(),z0t=D_e(),j0t=H_e(),U0t=1/0,$_e=W_e?W_e.prototype:void 0,G_e=$_e?$_e.toString:void 0;function K_e(t){if(typeof t=="string")return t;if(z0t(t))return B0t(t,K_e)+"";if(j0t(t))return G_e?G_e.call(t):"";var e=t+"";return e=="0"&&1/t==-U0t?"-0":e}Z_e.exports=K_e});var BT=J((TWt,X_e)=>{var V0t=Y_e();function H0t(t){return t==null?"":V0t(t)}X_e.exports=H0t});var Q_e=J((AWt,J_e)=>{function W0t(t,e,r){var n=-1,i=t.length;e<0&&(e=-e>i?0:i+e),r=r>i?i:r,r<0&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(i);++n<i;)o[n]=t[n+e];return o}J_e.exports=W0t});var txe=J((kWt,exe)=>{var $0t=Q_e();function G0t(t,e,r){var n=t.length;return r=r===void 0?n:r,!e&&r>=n?t:$0t(t,e,r)}exe.exports=G0t});var IU=J((CWt,rxe)=>{var K0t="\\ud800-\\udfff",Z0t="\\u0300-\\u036f",Y0t="\\ufe20-\\ufe2f",X0t="\\u20d0-\\u20ff",J0t=Z0t+Y0t+X0t,Q0t="\\ufe0e\\ufe0f",e_t="\\u200d",t_t=RegExp("["+e_t+K0t+J0t+Q0t+"]");function r_t(t){return t_t.test(t)}rxe.exports=r_t});var ixe=J((IWt,nxe)=>{function n_t(t){return t.split("")}nxe.exports=n_t});var hxe=J((DWt,fxe)=>{var oxe="\\ud800-\\udfff",i_t="\\u0300-\\u036f",o_t="\\ufe20-\\ufe2f",a_t="\\u20d0-\\u20ff",s_t=i_t+o_t+a_t,l_t="\\ufe0e\\ufe0f",u_t="["+oxe+"]",DU="["+s_t+"]",OU="\\ud83c[\\udffb-\\udfff]",c_t="(?:"+DU+"|"+OU+")",axe="[^"+oxe+"]",sxe="(?:\\ud83c[\\udde6-\\uddff]){2}",lxe="[\\ud800-\\udbff][\\udc00-\\udfff]",f_t="\\u200d",uxe=c_t+"?",cxe="["+l_t+"]?",h_t="(?:"+f_t+"(?:"+[axe,sxe,lxe].join("|")+")"+cxe+uxe+")*",d_t=cxe+uxe+h_t,p_t="(?:"+[axe+DU+"?",DU,sxe,lxe,u_t].join("|")+")",m_t=RegExp(OU+"(?="+OU+")|"+p_t+d_t,"g");function g_t(t){return t.match(m_t)||[]}fxe.exports=g_t});var pxe=J((OWt,dxe)=>{var v_t=ixe(),y_t=IU(),b_t=hxe();function __t(t){return y_t(t)?b_t(t):v_t(t)}dxe.exports=__t});var gxe=J((PWt,mxe)=>{var x_t=txe(),w_t=IU(),S_t=pxe(),E_t=BT();function T_t(t){return function(e){e=E_t(e);var r=w_t(e)?S_t(e):void 0,n=r?r[0]:e.charAt(0),i=r?x_t(r,1).join(""):e.slice(1);return n[t]()+i}}mxe.exports=T_t});var yxe=J((MWt,vxe)=>{var A_t=gxe(),k_t=A_t("toUpperCase");vxe.exports=k_t});var _xe=J((LWt,bxe)=>{var C_t=BT(),I_t=yxe();function D_t(t){return I_t(C_t(t).toLowerCase())}bxe.exports=D_t});var wxe=J((RWt,xxe)=>{function O_t(t,e,r,n){var i=-1,o=t==null?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}xxe.exports=O_t});var Exe=J((FWt,Sxe)=>{function P_t(t){return function(e){return t?.[e]}}Sxe.exports=P_t});var Axe=J((qWt,Txe)=>{var M_t=Exe(),L_t={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},R_t=M_t(L_t);Txe.exports=R_t});var Cxe=J((NWt,kxe)=>{var F_t=Axe(),q_t=BT(),N_t=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,B_t="\\u0300-\\u036f",z_t="\\ufe20-\\ufe2f",j_t="\\u20d0-\\u20ff",U_t=B_t+z_t+j_t,V_t="["+U_t+"]",H_t=RegExp(V_t,"g");function W_t(t){return t=q_t(t),t&&t.replace(N_t,F_t).replace(H_t,"")}kxe.exports=W_t});var Dxe=J((BWt,Ixe)=>{var $_t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function G_t(t){return t.match($_t)||[]}Ixe.exports=G_t});var Pxe=J((zWt,Oxe)=>{var K_t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Z_t(t){return K_t.test(t)}Oxe.exports=Z_t});var Xxe=J((jWt,Yxe)=>{var qxe="\\ud800-\\udfff",Y_t="\\u0300-\\u036f",X_t="\\ufe20-\\ufe2f",J_t="\\u20d0-\\u20ff",Q_t=Y_t+X_t+J_t,Nxe="\\u2700-\\u27bf",Bxe="a-z\\xdf-\\xf6\\xf8-\\xff",ext="\\xac\\xb1\\xd7\\xf7",txt="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rxt="\\u2000-\\u206f",nxt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zxe="A-Z\\xc0-\\xd6\\xd8-\\xde",ixt="\\ufe0e\\ufe0f",jxe=ext+txt+rxt+nxt,Uxe="['\u2019]",Mxe="["+jxe+"]",oxt="["+Q_t+"]",Vxe="\\d+",axt="["+Nxe+"]",Hxe="["+Bxe+"]",Wxe="[^"+qxe+jxe+Vxe+Nxe+Bxe+zxe+"]",sxt="\\ud83c[\\udffb-\\udfff]",lxt="(?:"+oxt+"|"+sxt+")",uxt="[^"+qxe+"]",$xe="(?:\\ud83c[\\udde6-\\uddff]){2}",Gxe="[\\ud800-\\udbff][\\udc00-\\udfff]",l1="["+zxe+"]",cxt="\\u200d",Lxe="(?:"+Hxe+"|"+Wxe+")",fxt="(?:"+l1+"|"+Wxe+")",Rxe="(?:"+Uxe+"(?:d|ll|m|re|s|t|ve))?",Fxe="(?:"+Uxe+"(?:D|LL|M|RE|S|T|VE))?",Kxe=lxt+"?",Zxe="["+ixt+"]?",hxt="(?:"+cxt+"(?:"+[uxt,$xe,Gxe].join("|")+")"+Zxe+Kxe+")*",dxt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pxt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mxt=Zxe+Kxe+hxt,gxt="(?:"+[axt,$xe,Gxe].join("|")+")"+mxt,vxt=RegExp([l1+"?"+Hxe+"+"+Rxe+"(?="+[Mxe,l1,"$"].join("|")+")",fxt+"+"+Fxe+"(?="+[Mxe,l1+Lxe,"$"].join("|")+")",l1+"?"+Lxe+"+"+Rxe,l1+"+"+Fxe,pxt,dxt,Vxe,gxt].join("|"),"g");function yxt(t){return t.match(vxt)||[]}Yxe.exports=yxt});var Qxe=J((UWt,Jxe)=>{var bxt=Dxe(),_xt=Pxe(),xxt=BT(),wxt=Xxe();function Sxt(t,e,r){return t=xxt(t),e=r?void 0:e,e===void 0?_xt(t)?wxt(t):bxt(t):t.match(e)||[]}Jxe.exports=Sxt});var t1e=J((VWt,e1e)=>{var Ext=wxe(),Txt=Cxe(),Axt=Qxe(),kxt="['\u2019]",Cxt=RegExp(kxt,"g");function Ixt(t){return function(e){return Ext(Axt(Txt(e).replace(Cxt,"")),t,"")}}e1e.exports=Ixt});var n1e=J((HWt,r1e)=>{var Dxt=_xe(),Oxt=t1e(),Pxt=Oxt(function(t,e,r){return e=e.toLowerCase(),t+(r?Dxt(e):e)});r1e.exports=Pxt});var cSe=J((S1,cA)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",u=500,h="__lodash_placeholder__",y=1,w=2,T=4,I=1,P=2,L=1,R=2,W=4,G=8,q=16,V=32,p=64,K=128,j=256,Q=512,ee=30,se="...",me=800,ve=16,U=1,$=2,he=3,Ce=1/0,Se=9007199254740991,de=17976931348623157e292,we=NaN,Ue=4294967295,ye=Ue-1,ne=Ue>>>1,st=[["ary",K],["bind",L],["bindKey",R],["curry",G],["curryRight",q],["flip",Q],["partial",V],["partialRight",p],["rearg",j]],dt="[object Arguments]",lt="[object Array]",kt="[object AsyncFunction]",ut="[object Boolean]",Ut="[object Date]",Wt="[object DOMException]",Ht="[object Error]",pr="[object Function]",zr="[object GeneratorFunction]",Jt="[object Map]",Qr="[object Number]",Br="[object Null]",Rr="[object Object]",Be="[object Promise]",Ge="[object Proxy]",vt="[object RegExp]",Kt="[object Set]",rt="[object String]",Ct="[object Symbol]",Tt="[object Undefined]",ar="[object WeakMap]",er="[object WeakSet]",ir="[object ArrayBuffer]",sr="[object DataView]",He="[object Float32Array]",Xe="[object Float64Array]",Rt="[object Int8Array]",xr="[object Int16Array]",Yn="[object Int32Array]",kn="[object Uint8Array]",Cn="[object Uint8ClampedArray]",wt="[object Uint16Array]",Ot="[object Uint32Array]",wr=/\b__p \+= '';/g,tr=/\b(__p \+=) '' \+/g,on=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pn=/&(?:amp|lt|gt|quot|#39);/g,tn=/[&<>"']/g,Rn=RegExp(pn.source),Si=RegExp(tn.source),Ei=/<%-([\s\S]+?)%>/g,qe=/<%([\s\S]+?)%>/g,ze=/<%=([\s\S]+?)%>/g,mt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft=/^\w*$/,fr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yr=/[\\^$.*+?()[\]{}|]/g,an=RegExp(yr.source),Or=/^\s+/,bn=/\s/,Pr=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yr=/\{\n\/\* \[wrapped with (.+)\] \*/,Sn=/,? & /,ii=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Xn=/[()=,{}\[\]\/\s]/,ha=/\\(\\)?/g,xn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,Ee=/^[-+]0x[0-9a-f]+$/i,ke=/^0b[01]+$/i,oe=/^\[object .+?Constructor\]$/,Fe=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fe=/($^)/,Ie=/['\n\r\u2028\u2029\\]/g,nt="\\ud800-\\udfff",zt="\\u0300-\\u036f",Vt="\\ufe20-\\ufe2f",pt="\\u20d0-\\u20ff",_t=zt+Vt+pt,_r="\\u2700-\\u27bf",dr="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="\\xac\\xb1\\xd7\\xf7",ce="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Re="\\u2000-\\u206f",ct=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jt="A-Z\\xc0-\\xd6\\xd8-\\xde",it="\\ufe0e\\ufe0f",Qt=Mt+ce+Re+ct,rn="['\u2019]",un="["+nt+"]",En="["+Qt+"]",Mn="["+_t+"]",Va="\\d+",Nr="["+_r+"]",ko="["+dr+"]",yi="[^"+nt+Qt+Va+_r+dr+jt+"]",Fn="\\ud83c[\\udffb-\\udfff]",Vn="(?:"+Mn+"|"+Fn+")",is="[^"+nt+"]",xc="(?:\\ud83c[\\udde6-\\uddff]){2}",bo="[\\ud800-\\udbff][\\udc00-\\udfff]",Go="["+jt+"]",Qh="\\u200d",wc="(?:"+ko+"|"+yi+")",Co="(?:"+Go+"|"+yi+")",nf="(?:"+rn+"(?:d|ll|m|re|s|t|ve))?",Ha="(?:"+rn+"(?:D|LL|M|RE|S|T|VE))?",ta=Vn+"?",ol="["+it+"]?",oo="(?:"+Qh+"(?:"+[is,xc,bo].join("|")+")"+ol+ta+")*",Il="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ra="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",om=ol+ta+oo,Dl="(?:"+[Nr,xc,bo].join("|")+")"+om,Jd="(?:"+[is+Mn+"?",Mn,xc,bo,un].join("|")+")",al=RegExp(rn,"g"),Wa=RegExp(Mn,"g"),Ol=RegExp(Fn+"(?="+Fn+")|"+Jd+om,"g"),xs=RegExp([Go+"?"+ko+"+"+nf+"(?="+[En,Go,"$"].join("|")+")",Co+"+"+Ha+"(?="+[En,Go+wc,"$"].join("|")+")",Go+"?"+wc+"+"+nf,Go+"+"+Ha,ra,Il,Va,Dl].join("|"),"g"),of=RegExp("["+Qh+nt+_t+it+"]"),am=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ig=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],sm=-1,co={};co[He]=co[Xe]=co[Rt]=co[xr]=co[Yn]=co[kn]=co[Cn]=co[wt]=co[Ot]=!0,co[dt]=co[lt]=co[ir]=co[ut]=co[sr]=co[Ut]=co[Ht]=co[pr]=co[Jt]=co[Qr]=co[Rr]=co[vt]=co[Kt]=co[rt]=co[ar]=!1;var Ji={};Ji[dt]=Ji[lt]=Ji[ir]=Ji[sr]=Ji[ut]=Ji[Ut]=Ji[He]=Ji[Xe]=Ji[Rt]=Ji[xr]=Ji[Yn]=Ji[Jt]=Ji[Qr]=Ji[Rr]=Ji[vt]=Ji[Kt]=Ji[rt]=Ji[Ct]=Ji[kn]=Ji[Cn]=Ji[wt]=Ji[Ot]=!0,Ji[Ht]=Ji[pr]=Ji[ar]=!1;var Qd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ed={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ep={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},af={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tp=parseFloat,Sc=parseInt,lm=typeof global=="object"&&global&&global.Object===Object&&global,td=typeof self=="object"&&self&&self.Object===Object&&self,ei=lm||td||Function("return this")(),mu=typeof S1=="object"&&S1&&!S1.nodeType&&S1,Ws=mu&&typeof cA=="object"&&cA&&!cA.nodeType&&cA,gu=Ws&&Ws.exports===mu,Kl=gu&&lm.process,fo=function(){try{var St=Ws&&Ws.require&&Ws.require("util").types;return St||Kl&&Kl.binding&&Kl.binding("util")}catch{}}(),sf=fo&&fo.isArrayBuffer,Fo=fo&&fo.isDate,ho=fo&&fo.isMap,Vu=fo&&fo.isRegExp,Ec=fo&&fo.isSet,Dg=fo&&fo.isTypedArray;function sl(St,Zt,qt){switch(qt.length){case 0:return St.call(Zt);case 1:return St.call(Zt,qt[0]);case 2:return St.call(Zt,qt[0],qt[1]);case 3:return St.call(Zt,qt[0],qt[1],qt[2])}return St.apply(Zt,qt)}function um(St,Zt,qt,Ur){for(var On=-1,di=St==null?0:St.length;++On<di;){var qo=St[On];Zt(Ur,qo,qt(qo),St)}return Ur}function $s(St,Zt){for(var qt=-1,Ur=St==null?0:St.length;++qt<Ur&&Zt(St[qt],qt,St)!==!1;);return St}function rp(St,Zt){for(var qt=St==null?0:St.length;qt--&&Zt(St[qt],qt,St)!==!1;);return St}function rd(St,Zt){for(var qt=-1,Ur=St==null?0:St.length;++qt<Ur;)if(!Zt(St[qt],qt,St))return!1;return!0}function Hu(St,Zt){for(var qt=-1,Ur=St==null?0:St.length,On=0,di=[];++qt<Ur;){var qo=St[qt];Zt(qo,qt,St)&&(di[On++]=qo)}return di}function nd(St,Zt){var qt=St==null?0:St.length;return!!qt&&zi(St,Zt,0)>-1}function cm(St,Zt,qt){for(var Ur=-1,On=St==null?0:St.length;++Ur<On;)if(qt(Zt,St[Ur]))return!0;return!1}function Qi(St,Zt){for(var qt=-1,Ur=St==null?0:St.length,On=Array(Ur);++qt<Ur;)On[qt]=Zt(St[qt],qt,St);return On}function ll(St,Zt){for(var qt=-1,Ur=Zt.length,On=St.length;++qt<Ur;)St[On+qt]=Zt[qt];return St}function np(St,Zt,qt,Ur){var On=-1,di=St==null?0:St.length;for(Ur&&di&&(qt=St[++On]);++On<di;)qt=Zt(qt,St[On],On,St);return qt}function Ma(St,Zt,qt,Ur){var On=St==null?0:St.length;for(Ur&&On&&(qt=St[--On]);On--;)qt=Zt(qt,St[On],On,St);return qt}function Tc(St,Zt){for(var qt=-1,Ur=St==null?0:St.length;++qt<Ur;)if(Zt(St[qt],qt,St))return!0;return!1}var ul=ip("length");function Ac(St){return St.split("")}function lf(St){return St.match(ii)||[]}function kc(St,Zt,qt){var Ur;return qt(St,function(On,di,qo){if(Zt(On,di,qo))return Ur=di,!1}),Ur}function Ls(St,Zt,qt,Ur){for(var On=St.length,di=qt+(Ur?1:-1);Ur?di--:++di<On;)if(Zt(St[di],di,St))return di;return-1}function zi(St,Zt,qt){return Zt===Zt?fm(St,Zt,qt):Ls(St,vu,qt)}function uf(St,Zt,qt,Ur){for(var On=qt-1,di=St.length;++On<di;)if(Ur(St[On],Zt))return On;return-1}function vu(St){return St!==St}function cf(St,Zt){var qt=St==null?0:St.length;return qt?id(St,Zt)/qt:we}function ip(St){return function(Zt){return Zt==null?t:Zt[St]}}function bi(St){return function(Zt){return St==null?t:St[Zt]}}function Og(St,Zt,qt,Ur,On){return On(St,function(di,qo,eo){qt=Ur?(Ur=!1,di):Zt(qt,di,qo,eo)}),qt}function Qf(St,Zt){var qt=St.length;for(St.sort(Zt);qt--;)St[qt]=St[qt].value;return St}function id(St,Zt){for(var qt,Ur=-1,On=St.length;++Ur<On;){var di=Zt(St[Ur]);di!==t&&(qt=qt===t?di:qt+di)}return qt}function op(St,Zt){for(var qt=-1,Ur=Array(St);++qt<St;)Ur[qt]=Zt(qt);return Ur}function Pg(St,Zt){return Qi(Zt,function(qt){return[qt,St[qt]]})}function ap(St){return St&&St.slice(0,rh(St)+1).replace(Or,"")}function da(St){return function(Zt){return St(Zt)}}function yu(St,Zt){return Qi(Zt,function(qt){return St[qt]})}function Rs(St,Zt){return St.has(Zt)}function Zl(St,Zt){for(var qt=-1,Ur=St.length;++qt<Ur&&zi(Zt,St[qt],0)>-1;);return qt}function eh(St,Zt){for(var qt=St.length;qt--&&zi(Zt,St[qt],0)>-1;);return qt}function od(St,Zt){for(var qt=St.length,Ur=0;qt--;)St[qt]===Zt&&++Ur;return Ur}var Cc=bi(Qd),Yl=bi(ed);function cl(St){return"\\"+af[St]}function Wu(St,Zt){return St==null?t:St[Zt]}function ff(St){return of.test(St)}function th(St){return am.test(St)}function Gi(St){for(var Zt,qt=[];!(Zt=St.next()).done;)qt.push(Zt.value);return qt}function hf(St){var Zt=-1,qt=Array(St.size);return St.forEach(function(Ur,On){qt[++Zt]=[On,Ur]}),qt}function sp(St,Zt){return function(qt){return St(Zt(qt))}}function $a(St,Zt){for(var qt=-1,Ur=St.length,On=0,di=[];++qt<Ur;){var qo=St[qt];(qo===Zt||qo===h)&&(St[qt]=h,di[On++]=qt)}return di}function Gs(St){var Zt=-1,qt=Array(St.size);return St.forEach(function(Ur){qt[++Zt]=Ur}),qt}function Mg(St){var Zt=-1,qt=Array(St.size);return St.forEach(function(Ur){qt[++Zt]=[Ur,Ur]}),qt}function fm(St,Zt,qt){for(var Ur=qt-1,On=St.length;++Ur<On;)if(St[Ur]===Zt)return Ur;return-1}function lp(St,Zt,qt){for(var Ur=qt+1;Ur--;)if(St[Ur]===Zt)return Ur;return Ur}function Xl(St){return ff(St)?bu(St):ul(St)}function Fs(St){return ff(St)?hm(St):Ac(St)}function rh(St){for(var Zt=St.length;Zt--&&bn.test(St.charAt(Zt)););return Zt}var nh=bi(ep);function bu(St){for(var Zt=Ol.lastIndex=0;Ol.test(St);)++Zt;return Zt}function hm(St){return St.match(Ol)||[]}function df(St){return St.match(xs)||[]}var fl=function St(Zt){Zt=Zt==null?ei:Pl.defaults(ei.Object(),Zt,Pl.pick(ei,Ig));var qt=Zt.Array,Ur=Zt.Date,On=Zt.Error,di=Zt.Function,qo=Zt.Math,eo=Zt.Object,Ic=Zt.RegExp,dm=Zt.String,hl=Zt.TypeError,ad=qt.prototype,_u=di.prototype,dl=eo.prototype,Jl=Zt["__core-js_shared__"],Dc=_u.toString,pi=dl.hasOwnProperty,pm=0,xu=function(){var b=/[^.]+$/.exec(Jl&&Jl.keys&&Jl.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}(),li=dl.toString,wu=Dc.call(eo),na=ei._,qs=Ic("^"+Dc.call(pi).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Tn=gu?Zt.Buffer:t,ti=Zt.Symbol,ws=Zt.Uint8Array,pf=Tn?Tn.allocUnsafe:t,pl=sp(eo.getPrototypeOf,eo),mf=eo.create,up=dl.propertyIsEnumerable,gf=ad.splice,ih=ti?ti.isConcatSpreadable:t,Ql=ti?ti.iterator:t,Ss=ti?ti.toStringTag:t,po=function(){try{var b=Of(eo,"defineProperty");return b({},"",{}),b}catch{}}(),vf=Zt.clearTimeout!==ei.clearTimeout&&Zt.clearTimeout,yf=Ur&&Ur.now!==ei.Date.now&&Ur.now,_o=Zt.setTimeout!==ei.setTimeout&&Zt.setTimeout,Ir=qo.ceil,pa=qo.floor,oh=eo.getOwnPropertySymbols,ah=Tn?Tn.isBuffer:t,Ml=Zt.isFinite,Es=ad.join,sd=sp(eo.keys,eo),nr=qo.max,Ko=qo.min,cp=Ur.now,sh=Zt.parseInt,Ks=qo.random,Ga=ad.reverse,bf=Of(Zt,"DataView"),Zs=Of(Zt,"Map"),ma=Of(Zt,"Promise"),ga=Of(Zt,"Set"),Su=Of(Zt,"WeakMap"),Ys=Of(eo,"create"),_f=Su&&new Su,$u={},Ll=Oo(bf),ml=Oo(Zs),In=Oo(ma),Ts=Oo(ga),Rl=Oo(Su),ia=ti?ti.prototype:t,eu=ia?ia.valueOf:t,Gu=ia?ia.toString:t;function Le(b){if(uo(b)&&!yn(b)&&!(b instanceof Xt)){if(b instanceof mr)return b;if(pi.call(b,"__wrapped__"))return ss(b)}return new mr(b)}var oa=function(){function b(){}return function(A){if(!Ai(A))return{};if(mf)return mf(A);b.prototype=A;var N=new b;return b.prototype=t,N}}();function aa(){}function mr(b,A){this.__wrapped__=b,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=t}Le.templateSettings={escape:Ei,evaluate:qe,interpolate:ze,variable:"",imports:{_:Le}},Le.prototype=aa.prototype,Le.prototype.constructor=Le,mr.prototype=oa(aa.prototype),mr.prototype.constructor=mr;function Xt(b){this.__wrapped__=b,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}function Zo(){var b=new Xt(this.__wrapped__);return b.__actions__=Cs(this.__actions__),b.__dir__=this.__dir__,b.__filtered__=this.__filtered__,b.__iteratees__=Cs(this.__iteratees__),b.__takeCount__=this.__takeCount__,b.__views__=Cs(this.__views__),b}function va(){if(this.__filtered__){var b=new Xt(this);b.__dir__=-1,b.__filtered__=!0}else b=this.clone(),b.__dir__*=-1;return b}function tu(){var b=this.__wrapped__.value(),A=this.__dir__,N=yn(b),te=A<0,Te=N?b.length:0,je=B1(0,Te,this.__views__),at=je.start,gt=je.end,It=gt-at,ur=te?gt:at-1,cr=this.__iteratees__,vr=cr.length,Gr=0,_n=Ko(It,this.__takeCount__);if(!N||!te&&Te==It&&_n==It)return pp(b,this.__actions__);var Hn=[];e:for(;It--&&Gr<_n;){ur+=A;for(var xi=-1,Wn=b[ur];++xi<vr;){var Ri=cr[xi],Yi=Ri.iteratee,Nf=Ri.type,tc=Yi(Wn);if(Nf==$)Wn=tc;else if(!tc){if(Nf==U)continue e;break e}}Hn[Gr++]=Wn}return Hn}Xt.prototype=oa(aa.prototype),Xt.prototype.constructor=Xt;function ao(b){var A=-1,N=b==null?0:b.length;for(this.clear();++A<N;){var te=b[A];this.set(te[0],te[1])}}function Eu(){this.__data__=Ys?Ys(null):{},this.size=0}function mm(b){var A=this.has(b)&&delete this.__data__[b];return this.size-=A?1:0,A}function fp(b){var A=this.__data__;if(Ys){var N=A[b];return N===s?t:N}return pi.call(A,b)?A[b]:t}function ui(b){var A=this.__data__;return Ys?A[b]!==t:pi.call(A,b)}function ya(b,A){var N=this.__data__;return this.size+=this.has(b)?0:1,N[b]=Ys&&A===t?s:A,this}ao.prototype.clear=Eu,ao.prototype.delete=mm,ao.prototype.get=fp,ao.prototype.has=ui,ao.prototype.set=ya;function Fl(b){var A=-1,N=b==null?0:b.length;for(this.clear();++A<N;){var te=b[A];this.set(te[0],te[1])}}function xf(){this.__data__=[],this.size=0}function ld(b){var A=this.__data__,N=O(A,b);if(N<0)return!1;var te=A.length-1;return N==te?A.pop():gf.call(A,N,1),--this.size,!0}function ru(b){var A=this.__data__,N=O(A,b);return N<0?t:A[N][1]}function Ns(b){return O(this.__data__,b)>-1}function wf(b,A){var N=this.__data__,te=O(N,b);return te<0?(++this.size,N.push([b,A])):N[te][1]=A,this}Fl.prototype.clear=xf,Fl.prototype.delete=ld,Fl.prototype.get=ru,Fl.prototype.has=Ns,Fl.prototype.set=wf;function ba(b){var A=-1,N=b==null?0:b.length;for(this.clear();++A<N;){var te=b[A];this.set(te[0],te[1])}}function ud(){this.size=0,this.__data__={hash:new ao,map:new(Zs||Fl),string:new ao}}function Tu(b){var A=Ra(this,b).delete(b);return this.size-=A?1:0,A}function cd(b){return Ra(this,b).get(b)}function lh(b){return Ra(this,b).has(b)}function Xs(b,A){var N=Ra(this,b),te=N.size;return N.set(b,A),this.size+=N.size==te?0:1,this}ba.prototype.clear=ud,ba.prototype.delete=Tu,ba.prototype.get=cd,ba.prototype.has=lh,ba.prototype.set=Xs;function Js(b){var A=-1,N=b==null?0:b.length;for(this.__data__=new ba;++A<N;)this.add(b[A])}function gm(b){return this.__data__.set(b,s),this}function Ku(b){return this.__data__.has(b)}Js.prototype.add=Js.prototype.push=gm,Js.prototype.has=Ku;function ji(b){var A=this.__data__=new Fl(b);this.size=A.size}function mi(){this.__data__=new Fl,this.size=0}function Ka(b){var A=this.__data__,N=A.delete(b);return this.size=A.size,N}function La(b){return this.__data__.get(b)}function Au(b){return this.__data__.has(b)}function uh(b,A){var N=this.__data__;if(N instanceof Fl){var te=N.__data__;if(!Zs||te.length<r-1)return te.push([b,A]),this.size=++N.size,this;N=this.__data__=new ba(te)}return N.set(b,A),this.size=N.size,this}ji.prototype.clear=mi,ji.prototype.delete=Ka,ji.prototype.get=La,ji.prototype.has=Au,ji.prototype.set=uh;function ch(b,A){var N=yn(b),te=!N&&Po(b),Te=!N&&!te&&Ln(b),je=!N&&!te&&!Te&&Th(b),at=N||te||Te||je,gt=at?op(b.length,dm):[],It=gt.length;for(var ur in b)(A||pi.call(b,ur))&&!(at&&(ur=="length"||Te&&(ur=="offset"||ur=="parent")||je&&(ur=="buffer"||ur=="byteLength"||ur=="byteOffset")||E(ur,It)))&&gt.push(ur);return gt}function fh(b){var A=b.length;return A?b[Ya(0,A-1)]:t}function d(b,A){return Do(Cs(b),De(A,0,b.length))}function v(b){return Do(Cs(b))}function g(b,A,N){(N!==t&&!vi(b[A],N)||N===t&&!(A in b))&&ae(b,A,N)}function x(b,A,N){var te=b[A];(!(pi.call(b,A)&&vi(te,N))||N===t&&!(A in b))&&ae(b,A,N)}function O(b,A){for(var N=b.length;N--;)if(vi(b[N][0],A))return N;return-1}function F(b,A,N,te){return Ve(b,function(Te,je,at){A(te,Te,N(Te),at)}),te}function z(b,A){return b&&Du(A,es(A),b)}function Y(b,A){return b&&Du(A,_l(A),b)}function ae(b,A,N){A=="__proto__"&&po?po(b,A,{configurable:!0,enumerable:!0,value:N,writable:!0}):b[A]=N}function be(b,A){for(var N=-1,te=A.length,Te=qt(te),je=b==null;++N<te;)Te[N]=je?t:Ah(b,A[N]);return Te}function De(b,A,N){return b===b&&(N!==t&&(b=b<=N?b:N),A!==t&&(b=b>=A?b:A)),b}function Me(b,A,N,te,Te,je){var at,gt=A&y,It=A&w,ur=A&T;if(N&&(at=Te?N(b,te,Te,je):N(b)),at!==t)return at;if(!Ai(b))return b;var cr=yn(b);if(cr){if(at=z1(b),!gt)return Cs(b,at)}else{var vr=as(b),Gr=vr==pr||vr==zr;if(Ln(b))return _y(b,gt);if(vr==Rr||vr==dt||Gr&&!Te){if(at=It||Gr?{}:C0(b),!gt)return It?wm(b,Y(at,b)):xy(b,z(at,b))}else{if(!Ji[vr])return Te?b:{};at=xh(b,vr,gt)}}je||(je=new ji);var _n=je.get(b);if(_n)return _n;je.set(b,at),Py(b)?b.forEach(function(Wn){at.add(Me(Wn,A,N,Wn,b,je))}):ea(b)&&b.forEach(function(Wn,Ri){at.set(Ri,Me(Wn,A,N,Ri,b,je))});var Hn=ur?It?Bg:Em:It?_l:es,xi=cr?t:Hn(b);return $s(xi||b,function(Wn,Ri){xi&&(Ri=Wn,Wn=b[Ri]),x(at,Ri,Me(Wn,A,N,Ri,b,je))}),at}function Ne(b){var A=es(b);return function(N){return Ye(N,b,A)}}function Ye(b,A,N){var te=N.length;if(b==null)return!te;for(b=eo(b);te--;){var Te=N[te],je=A[Te],at=b[Te];if(at===t&&!(Te in b)||!je(at))return!1}return!0}function Ze(b,A,N){if(typeof b!="function")throw new hl(i);return dn(function(){b.apply(t,N)},A)}function et(b,A,N,te){var Te=-1,je=nd,at=!0,gt=b.length,It=[],ur=A.length;if(!gt)return It;N&&(A=Qi(A,da(N))),te?(je=cm,at=!1):A.length>=r&&(je=Rs,at=!1,A=new Js(A));e:for(;++Te<gt;){var cr=b[Te],vr=N==null?cr:N(cr);if(cr=te||cr!==0?cr:0,at&&vr===vr){for(var Gr=ur;Gr--;)if(A[Gr]===vr)continue e;It.push(cr)}else je(A,vr,te)||It.push(cr)}return It}var Ve=yp(or),tt=yp(Er,!0);function ft(b,A){var N=!0;return Ve(b,function(te,Te,je){return N=!!A(te,Te,je),N}),N}function xt(b,A,N){for(var te=-1,Te=b.length;++te<Te;){var je=b[te],at=A(je);if(at!=null&&(gt===t?at===at&&!hs(at):N(at,gt)))var gt=at,It=je}return It}function Bt(b,A,N,te){var Te=b.length;for(N=Qn(N),N<0&&(N=-N>Te?0:Te+N),te=te===t||te>Te?Te:Qn(te),te<0&&(te+=Te),te=N>te?0:Zg(te);N<te;)b[N++]=A;return b}function Pt(b,A){var N=[];return Ve(b,function(te,Te,je){A(te,Te,je)&&N.push(te)}),N}function Dt(b,A,N,te,Te){var je=-1,at=b.length;for(N||(N=m),Te||(Te=[]);++je<at;){var gt=b[je];A>0&&N(gt)?A>1?Dt(gt,A-1,N,te,Te):ll(Te,gt):te||(Te[Te.length]=gt)}return Te}var Yt=bp(),hr=bp(!0);function or(b,A){return b&&Yt(b,A,es)}function Er(b,A){return b&&hr(b,A,es)}function Wr(b,A){return Hu(A,function(N){return jo(b[N])})}function Vr(b,A){A=gh(A,b);for(var N=0,te=A.length;b!=null&&N<te;)b=b[_i(A[N++])];return N&&N==te?b:t}function Mr(b,A,N){var te=A(b);return yn(b)?te:ll(te,N(b))}function vn(b){return b==null?b===t?Tt:Br:Ss&&Ss in eo(b)?k0(b):rr(b)}function Cr(b,A){return b>A}function gn(b,A){return b!=null&&pi.call(b,A)}function Dn(b,A){return b!=null&&A in eo(b)}function cn(b,A,N){return b>=Ko(A,N)&&b<nr(A,N)}function sn(b,A,N){for(var te=N?cm:nd,Te=b[0].length,je=b.length,at=je,gt=qt(je),It=1/0,ur=[];at--;){var cr=b[at];at&&A&&(cr=Qi(cr,da(A))),It=Ko(cr.length,It),gt[at]=!N&&(A||Te>=120&&cr.length>=120)?new Js(at&&cr):t}cr=b[0];var vr=-1,Gr=gt[0];e:for(;++vr<Te&&ur.length<It;){var _n=cr[vr],Hn=A?A(_n):_n;if(_n=N||_n!==0?_n:0,!(Gr?Rs(Gr,Hn):te(ur,Hn,N))){for(at=je;--at;){var xi=gt[at];if(!(xi?Rs(xi,Hn):te(b[at],Hn,N)))continue e}Gr&&Gr.push(Hn),ur.push(_n)}}return ur}function An(b,A,N,te){return or(b,function(Te,je,at){A(te,N(Te),je,at)}),te}function nn(b,A,N){A=gh(A,b),b=Tr(b,A);var te=b==null?b:b[_i(Ju(A))];return te==null?t:sl(te,b,N)}function ln(b){return uo(b)&&vn(b)==dt}function xo(b){return uo(b)&&vn(b)==ir}function wo(b){return uo(b)&&vn(b)==Ut}function Io(b,A,N,te,Te){return b===A?!0:b==null||A==null||!uo(b)&&!uo(A)?b!==b&&A!==A:_a(b,A,N,te,Io,Te)}function _a(b,A,N,te,Te,je){var at=yn(b),gt=yn(A),It=at?lt:as(b),ur=gt?lt:as(A);It=It==dt?Rr:It,ur=ur==dt?Rr:ur;var cr=It==Rr,vr=ur==Rr,Gr=It==ur;if(Gr&&Ln(b)){if(!Ln(A))return!1;at=!0,cr=!1}if(Gr&&!cr)return je||(je=new ji),at||Th(b)?Pu(b,A,N,te,Te,je):Ng(b,A,It,N,te,Te,je);if(!(N&I)){var _n=cr&&pi.call(b,"__wrapped__"),Hn=vr&&pi.call(A,"__wrapped__");if(_n||Hn){var xi=_n?b.value():b,Wn=Hn?A.value():A;return je||(je=new ji),Te(xi,Wn,N,te,je)}}return Gr?(je||(je=new ji),Ty(b,A,N,te,Te,je)):!1}function Ki(b){return uo(b)&&as(b)==Jt}function So(b,A,N,te){var Te=N.length,je=Te,at=!te;if(b==null)return!je;for(b=eo(b);Te--;){var gt=N[Te];if(at&&gt[2]?gt[1]!==b[gt[0]]:!(gt[0]in b))return!1}for(;++Te<je;){gt=N[Te];var It=gt[0],ur=b[It],cr=gt[1];if(at&&gt[2]){if(ur===t&&!(It in b))return!1}else{var vr=new ji;if(te)var Gr=te(ur,cr,It,b,A,vr);if(!(Gr===t?Io(cr,ur,I|P,te,vr):Gr))return!1}}return!0}function xa(b){if(!Ai(b)||re(b))return!1;var A=jo(b)?qs:oe;return A.test(Oo(b))}function os(b){return uo(b)&&vn(b)==vt}function Zu(b){return uo(b)&&as(b)==Kt}function As(b){return uo(b)&&Qu(b.length)&&!!co[vn(b)]}function ks(b){return typeof b=="function"?b:b==null?Rc:typeof b=="object"?yn(b)?Ef(b[0],b[1]):Sf(b):E8(b)}function Za(b){if(!xe(b))return sd(b);var A=[];for(var N in eo(b))pi.call(b,N)&&N!="constructor"&&A.push(N);return A}function Yu(b){if(!Ai(b))return $t(b);var A=xe(b),N=[];for(var te in b)te=="constructor"&&(A||!pi.call(b,te))||N.push(te);return N}function ql(b,A){return b<A}function ku(b,A){var N=-1,te=lo(b)?qt(b.length):[];return Ve(b,function(Te,je,at){te[++N]=A(Te,je,at)}),te}function Sf(b){var A=Ui(b);return A.length==1&&A[0][2]?Je(A[0][0],A[0][1]):function(N){return N===b||So(N,b,A)}}function Ef(b,A){return C(b)&&We(A)?Je(_i(b),A):function(N){var te=Ah(N,b);return te===t&&te===A?j0(N,b):Io(A,te,I|P)}}function wa(b,A,N,te,Te){b!==A&&Yt(A,function(je,at){if(Te||(Te=new ji),Ai(je))Cu(b,A,at,N,wa,te,Te);else{var gt=te?te(kr(b,at),je,at+"",b,A,Te):t;gt===t&&(gt=je),g(b,at,gt)}},_l)}function Cu(b,A,N,te,Te,je,at){var gt=kr(b,N),It=kr(A,N),ur=at.get(It);if(ur){g(b,N,ur);return}var cr=je?je(gt,It,N+"",b,A,at):t,vr=cr===t;if(vr){var Gr=yn(It),_n=!Gr&&Ln(It),Hn=!Gr&&!_n&&Th(It);cr=It,Gr||_n||Hn?yn(gt)?cr=gt:Jn(gt)?cr=Cs(gt):_n?(vr=!1,cr=_y(It,!0)):Hn?(vr=!1,cr=Bo(It,!0)):cr=[]:Tp(It)||Po(It)?(cr=gt,Po(gt)?cr=Yg(gt):(!Ai(gt)||jo(gt))&&(cr=C0(It))):vr=!1}vr&&(at.set(It,cr),Te(cr,It,te,je,at),at.delete(It)),g(b,N,cr)}function Bs(b,A){var N=b.length;if(N)return A+=A<0?N:0,E(A,N)?b[A]:t}function sa(b,A,N){A.length?A=Qi(A,function(je){return yn(je)?function(at){return Vr(at,je.length===1?je[0]:je)}:je}):A=[Rc];var te=-1;A=Qi(A,da(wn()));var Te=ku(b,function(je,at,gt){var It=Qi(A,function(ur){return ur(je)});return{criteria:It,index:++te,value:je}});return Qf(Te,function(je,at){return S0(je,at,N)})}function Iu(b,A){return Xu(b,A,function(N,te){return j0(b,te)})}function Xu(b,A,N){for(var te=-1,Te=A.length,je={};++te<Te;){var at=A[te],gt=Vr(b,at);N(gt,at)&&kf(je,gh(at,b),gt)}return je}function Tf(b){return function(A){return Vr(A,b)}}function ri(b,A,N,te){var Te=te?uf:zi,je=-1,at=A.length,gt=b;for(b===A&&(A=Cs(A)),N&&(gt=Qi(b,da(N)));++je<at;)for(var It=0,ur=A[je],cr=N?N(ur):ur;(It=Te(gt,cr,It,te))>-1;)gt!==b&&gf.call(gt,It,1),gf.call(b,It,1);return b}function to(b,A){for(var N=b?A.length:0,te=N-1;N--;){var Te=A[N];if(N==te||Te!==je){var je=Te;E(Te)?gf.call(b,Te,1):dp(b,Te)}}return b}function Ya(b,A){return b+pa(Ks()*(A-b+1))}function Af(b,A,N,te){for(var Te=-1,je=nr(Ir((A-b)/(N||1)),0),at=qt(je);je--;)at[te?je:++Te]=b,b+=N;return at}function vm(b,A){var N="";if(!b||A<1||A>Se)return N;do A%2&&(N+=b),A=pa(A/2),A&&(b+=b);while(A);return N}function Kn(b,A){return fn(gr(b,A,Rc),b+"")}function Lg(b){return fh(qf(b))}function hh(b,A){var N=qf(b);return Do(N,De(A,0,N.length))}function kf(b,A,N,te){if(!Ai(b))return b;A=gh(A,b);for(var Te=-1,je=A.length,at=je-1,gt=b;gt!=null&&++Te<je;){var It=_i(A[Te]),ur=N;if(It==="__proto__"||It==="constructor"||It==="prototype")return b;if(Te!=at){var cr=gt[It];ur=te?te(cr,It,gt):t,ur===t&&(ur=Ai(cr)?cr:E(A[Te+1])?[]:{})}x(gt,It,ur),gt=gt[It]}return b}var Cf=_f?function(b,A){return _f.set(b,A),b}:Rc,hp=po?function(b,A){return po(b,"toString",{configurable:!0,enumerable:!1,value:bL(A),writable:!0})}:Rc;function yy(b){return Do(qf(b))}function No(b,A,N){var te=-1,Te=b.length;A<0&&(A=-A>Te?0:Te+A),N=N>Te?Te:N,N<0&&(N+=Te),Te=A>N?0:N-A>>>0,A>>>=0;for(var je=qt(Te);++te<Te;)je[te]=b[te+A];return je}function Xa(b,A){var N;return Ve(b,function(te,Te,je){return N=A(te,Te,je),!N}),!!N}function fd(b,A,N){var te=0,Te=b==null?te:b.length;if(typeof A=="number"&&A===A&&Te<=ne){for(;te<Te;){var je=te+Te>>>1,at=b[je];at!==null&&!hs(at)&&(N?at<=A:at<A)?te=je+1:Te=je}return Te}return dh(b,A,Rc,N)}function dh(b,A,N,te){var Te=0,je=b==null?0:b.length;if(je===0)return 0;A=N(A);for(var at=A!==A,gt=A===null,It=hs(A),ur=A===t;Te<je;){var cr=pa((Te+je)/2),vr=N(b[cr]),Gr=vr!==t,_n=vr===null,Hn=vr===vr,xi=hs(vr);if(at)var Wn=te||Hn;else ur?Wn=Hn&&(te||Gr):gt?Wn=Hn&&Gr&&(te||!_n):It?Wn=Hn&&Gr&&!_n&&(te||!xi):_n||xi?Wn=!1:Wn=te?vr<=A:vr<A;Wn?Te=cr+1:je=cr}return Ko(je,ye)}function Oc(b,A){for(var N=-1,te=b.length,Te=0,je=[];++N<te;){var at=b[N],gt=A?A(at):at;if(!N||!vi(gt,It)){var It=gt;je[Te++]=at===0?0:at}}return je}function x0(b){return typeof b=="number"?b:hs(b)?we:+b}function nu(b){if(typeof b=="string")return b;if(yn(b))return Qi(b,nu)+"";if(hs(b))return Gu?Gu.call(b):"";var A=b+"";return A=="0"&&1/b==-Ce?"-0":A}function iu(b,A,N){var te=-1,Te=nd,je=b.length,at=!0,gt=[],It=gt;if(N)at=!1,Te=cm;else if(je>=r){var ur=A?null:N1(b);if(ur)return Gs(ur);at=!1,Te=Rs,It=new Js}else It=A?[]:gt;e:for(;++te<je;){var cr=b[te],vr=A?A(cr):cr;if(cr=N||cr!==0?cr:0,at&&vr===vr){for(var Gr=It.length;Gr--;)if(It[Gr]===vr)continue e;A&&It.push(vr),gt.push(cr)}else Te(It,vr,N)||(It!==gt&&It.push(vr),gt.push(cr))}return gt}function dp(b,A){return A=gh(A,b),b=Tr(b,A),b==null||delete b[_i(Ju(A))]}function by(b,A,N,te){return kf(b,A,N(Vr(b,A)),te)}function ph(b,A,N,te){for(var Te=b.length,je=te?Te:-1;(te?je--:++je<Te)&&A(b[je],je,b););return N?No(b,te?0:je,te?je+1:Te):No(b,te?je+1:0,te?Te:je)}function pp(b,A){var N=b;return N instanceof Xt&&(N=N.value()),np(A,function(te,Te){return Te.func.apply(Te.thisArg,ll([te],Te.args))},N)}function gl(b,A,N){var te=b.length;if(te<2)return te?iu(b[0]):[];for(var Te=-1,je=qt(te);++Te<te;)for(var at=b[Te],gt=-1;++gt<te;)gt!=Te&&(je[Te]=et(je[Te]||at,b[gt],A,N));return iu(Dt(je,1),A,N)}function mh(b,A,N){for(var te=-1,Te=b.length,je=A.length,at={};++te<Te;){var gt=te<je?A[te]:t;N(at,b[te],gt)}return at}function ym(b){return Jn(b)?b:[]}function bm(b){return typeof b=="function"?b:Rc}function gh(b,A){return yn(b)?b:C(b,A)?[b]:so(Li(b))}var _m=Kn;function If(b,A,N){var te=b.length;return N=N===t?te:N,!A&&N>=te?b:No(b,A,N)}var w0=vf||function(b){return ei.clearTimeout(b)};function _y(b,A){if(A)return b.slice();var N=b.length,te=pf?pf(N):new b.constructor(N);return b.copy(te),te}function vh(b){var A=new b.constructor(b.byteLength);return new ws(A).set(new ws(b)),A}function q1(b,A){var N=A?vh(b.buffer):b.buffer;return new b.constructor(N,b.byteOffset,b.byteLength)}function mp(b){var A=new b.constructor(b.source,pe.exec(b));return A.lastIndex=b.lastIndex,A}function xm(b){return eu?eo(eu.call(b)):{}}function Bo(b,A){var N=A?vh(b.buffer):b.buffer;return new b.constructor(N,b.byteOffset,b.length)}function gp(b,A){if(b!==A){var N=b!==t,te=b===null,Te=b===b,je=hs(b),at=A!==t,gt=A===null,It=A===A,ur=hs(A);if(!gt&&!ur&&!je&&b>A||je&&at&&It&&!gt&&!ur||te&&at&&It||!N&&It||!Te)return 1;if(!te&&!je&&!ur&&b<A||ur&&N&&Te&&!te&&!je||gt&&N&&Te||!at&&Te||!It)return-1}return 0}function S0(b,A,N){for(var te=-1,Te=b.criteria,je=A.criteria,at=Te.length,gt=N.length;++te<at;){var It=gp(Te[te],je[te]);if(It){if(te>=gt)return It;var ur=N[te];return It*(ur=="desc"?-1:1)}}return b.index-A.index}function hd(b,A,N,te){for(var Te=-1,je=b.length,at=N.length,gt=-1,It=A.length,ur=nr(je-at,0),cr=qt(It+ur),vr=!te;++gt<It;)cr[gt]=A[gt];for(;++Te<at;)(vr||Te<je)&&(cr[N[Te]]=b[Te]);for(;ur--;)cr[gt++]=b[Te++];return cr}function vp(b,A,N,te){for(var Te=-1,je=b.length,at=-1,gt=N.length,It=-1,ur=A.length,cr=nr(je-gt,0),vr=qt(cr+ur),Gr=!te;++Te<cr;)vr[Te]=b[Te];for(var _n=Te;++It<ur;)vr[_n+It]=A[It];for(;++at<gt;)(Gr||Te<je)&&(vr[_n+N[at]]=b[Te++]);return vr}function Cs(b,A){var N=-1,te=b.length;for(A||(A=qt(te));++N<te;)A[N]=b[N];return A}function Du(b,A,N,te){var Te=!N;N||(N={});for(var je=-1,at=A.length;++je<at;){var gt=A[je],It=te?te(N[gt],b[gt],gt,N,b):t;It===t&&(It=b[gt]),Te?ae(N,gt,It):x(N,gt,It)}return N}function xy(b,A){return Du(b,_h(b),A)}function wm(b,A){return Du(b,Ay(b),A)}function yh(b,A){return function(N,te){var Te=yn(N)?um:F,je=A?A():{};return Te(N,b,wn(te,2),je)}}function Ou(b){return Kn(function(A,N){var te=-1,Te=N.length,je=Te>1?N[Te-1]:t,at=Te>2?N[2]:t;for(je=b.length>3&&typeof je=="function"?(Te--,je):t,at&&S(N[0],N[1],at)&&(je=Te<3?t:je,Te=1),A=eo(A);++te<Te;){var gt=N[te];gt&&b(A,gt,te,je)}return A})}function yp(b,A){return function(N,te){if(N==null)return N;if(!lo(N))return b(N,te);for(var Te=N.length,je=A?Te:-1,at=eo(N);(A?je--:++je<Te)&&te(at[je],je,at)!==!1;);return N}}function bp(b){return function(A,N,te){for(var Te=-1,je=eo(A),at=te(A),gt=at.length;gt--;){var It=at[b?gt:++Te];if(N(je[It],It,je)===!1)break}return A}}function E0(b,A,N){var te=A&L,Te=dd(b);function je(){var at=this&&this!==ei&&this instanceof je?Te:b;return at.apply(te?N:this,arguments)}return je}function Rg(b){return function(A){A=Li(A);var N=ff(A)?Fs(A):t,te=N?N[0]:A.charAt(0),Te=N?If(N,1).join(""):A.slice(1);return te[b]()+Te}}function _p(b){return function(A){return np(lw($0(A).replace(al,"")),b,"")}}function dd(b){return function(){var A=arguments;switch(A.length){case 0:return new b;case 1:return new b(A[0]);case 2:return new b(A[0],A[1]);case 3:return new b(A[0],A[1],A[2]);case 4:return new b(A[0],A[1],A[2],A[3]);case 5:return new b(A[0],A[1],A[2],A[3],A[4]);case 6:return new b(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new b(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var N=oa(b.prototype),te=b.apply(N,A);return Ai(te)?te:N}}function wy(b,A,N){var te=dd(b);function Te(){for(var je=arguments.length,at=qt(je),gt=je,It=Ep(Te);gt--;)at[gt]=arguments[gt];var ur=je<3&&at[0]!==It&&at[je-1]!==It?[]:$a(at,It);if(je-=ur.length,je<N)return Sp(b,A,Fg,Te.placeholder,t,at,ur,t,t,N-je);var cr=this&&this!==ei&&this instanceof Te?te:b;return sl(cr,this,at)}return Te}function ou(b){return function(A,N,te){var Te=eo(A);if(!lo(A)){var je=wn(N,3);A=es(A),N=function(gt){return je(Te[gt],gt,Te)}}var at=b(A,N,te);return at>-1?Te[je?A[at]:at]:t}}function T0(b){return Nl(function(A){var N=A.length,te=N,Te=mr.prototype.thru;for(b&&A.reverse();te--;){var je=A[te];if(typeof je!="function")throw new hl(i);if(Te&&!at&&Am(je)=="wrapper")var at=new mr([],!0)}for(te=at?te:N;++te<N;){je=A[te];var gt=Am(je),It=gt=="wrapper"?Tm(je):t;It&&Z(It[0])&&It[1]==(K|G|V|j)&&!It[4].length&&It[9]==1?at=at[Am(It[0])].apply(at,It[3]):at=je.length==1&&Z(je)?at[gt]():at.thru(je)}return function(){var ur=arguments,cr=ur[0];if(at&&ur.length==1&&yn(cr))return at.plant(cr).value();for(var vr=0,Gr=N?A[vr].apply(this,ur):cr;++vr<N;)Gr=A[vr].call(this,Gr);return Gr}})}function Fg(b,A,N,te,Te,je,at,gt,It,ur){var cr=A&K,vr=A&L,Gr=A&R,_n=A&(G|q),Hn=A&Q,xi=Gr?t:dd(b);function Wn(){for(var Ri=arguments.length,Yi=qt(Ri),Nf=Ri;Nf--;)Yi[Nf]=arguments[Nf];if(_n)var tc=Ep(Wn),Bf=od(Yi,tc);if(te&&(Yi=hd(Yi,te,Te,_n)),je&&(Yi=vp(Yi,je,at,_n)),Ri-=Bf,_n&&Ri<ur){var js=$a(Yi,tc);return Sp(b,A,Fg,Wn.placeholder,N,Yi,js,gt,It,ur-Ri)}var xd=vr?N:this,Bm=Gr?xd[b]:b;return Ri=Yi.length,gt?Yi=Fr(Yi,gt):Hn&&Ri>1&&Yi.reverse(),cr&&It<Ri&&(Yi.length=It),this&&this!==ei&&this instanceof Wn&&(Bm=xi||dd(Bm)),Bm.apply(xd,Yi)}return Wn}function Sy(b,A){return function(N,te){return An(N,b,A(te),{})}}function xp(b,A){return function(N,te){var Te;if(N===t&&te===t)return A;if(N!==t&&(Te=N),te!==t){if(Te===t)return te;typeof N=="string"||typeof te=="string"?(N=nu(N),te=nu(te)):(N=x0(N),te=x0(te)),Te=b(N,te)}return Te}}function Sm(b){return Nl(function(A){return A=Qi(A,da(wn())),Kn(function(N){var te=this;return b(A,function(Te){return sl(Te,te,N)})})})}function Df(b,A){A=A===t?" ":nu(A);var N=A.length;if(N<2)return N?vm(A,b):A;var te=vm(A,Ir(b/Xl(A)));return ff(A)?If(Fs(te),0,b).join(""):te.slice(0,b)}function A0(b,A,N,te){var Te=A&L,je=dd(b);function at(){for(var gt=-1,It=arguments.length,ur=-1,cr=te.length,vr=qt(cr+It),Gr=this&&this!==ei&&this instanceof at?je:b;++ur<cr;)vr[ur]=te[ur];for(;It--;)vr[ur++]=arguments[++gt];return sl(Gr,Te?N:this,vr)}return at}function pd(b){return function(A,N,te){return te&&typeof te!="number"&&S(A,N,te)&&(N=te=t),A=ec(A),N===t?(N=A,A=0):N=ec(N),te=te===t?A<N?1:-1:ec(te),Af(A,N,te,b)}}function wp(b){return function(A,N){return typeof A=="string"&&typeof N=="string"||(A=Bl(A),N=Bl(N)),b(A,N)}}function Sp(b,A,N,te,Te,je,at,gt,It,ur){var cr=A&G,vr=cr?at:t,Gr=cr?t:at,_n=cr?je:t,Hn=cr?t:je;A|=cr?V:p,A&=~(cr?p:V),A&W||(A&=~(L|R));var xi=[b,A,Te,_n,vr,Hn,Gr,gt,It,ur],Wn=N.apply(t,xi);return Z(b)&&Hr(Wn,xi),Wn.placeholder=te,Zn(Wn,b,A)}function Ey(b){var A=qo[b];return function(N,te){if(N=Bl(N),te=te==null?0:Ko(Qn(te),292),te&&Ml(N)){var Te=(Li(N)+"e").split("e"),je=A(Te[0]+"e"+(+Te[1]+te));return Te=(Li(je)+"e").split("e"),+(Te[0]+"e"+(+Te[1]-te))}return A(N)}}var N1=ga&&1/Gs(new ga([,-0]))[1]==Ce?function(b){return new ga(b)}:wL;function md(b){return function(A){var N=as(A);return N==Jt?hf(A):N==Kt?Mg(A):Pg(A,b(A))}}function Pi(b,A,N,te,Te,je,at,gt){var It=A&R;if(!It&&typeof b!="function")throw new hl(i);var ur=te?te.length:0;if(ur||(A&=~(V|p),te=Te=t),at=at===t?at:nr(Qn(at),0),gt=gt===t?gt:Qn(gt),ur-=Te?Te.length:0,A&p){var cr=te,vr=Te;te=Te=t}var Gr=It?t:Tm(b),_n=[b,A,N,te,Te,cr,vr,je,at,gt];if(Gr&&bt(_n,Gr),b=_n[0],A=_n[1],N=_n[2],te=_n[3],Te=_n[4],gt=_n[9]=_n[9]===t?It?0:b.length:nr(_n[9]-ur,0),!gt&&A&(G|q)&&(A&=~(G|q)),!A||A==L)var Hn=E0(b,A,N);else A==G||A==q?Hn=wy(b,A,gt):(A==V||A==(L|V))&&!Te.length?Hn=A0(b,A,N,te):Hn=Fg.apply(t,_n);var xi=Gr?Cf:Hr;return Zn(xi(Hn,_n),b,A)}function qg(b,A,N,te){return b===t||vi(b,dl[N])&&!pi.call(te,N)?A:b}function bh(b,A,N,te,Te,je){return Ai(b)&&Ai(A)&&(je.set(A,b),wa(b,A,t,bh,je),je.delete(A)),b}function vl(b){return Tp(b)?t:b}function Pu(b,A,N,te,Te,je){var at=N&I,gt=b.length,It=A.length;if(gt!=It&&!(at&&It>gt))return!1;var ur=je.get(b),cr=je.get(A);if(ur&&cr)return ur==A&&cr==b;var vr=-1,Gr=!0,_n=N&P?new Js:t;for(je.set(b,A),je.set(A,b);++vr<gt;){var Hn=b[vr],xi=A[vr];if(te)var Wn=at?te(xi,Hn,vr,A,b,je):te(Hn,xi,vr,b,A,je);if(Wn!==t){if(Wn)continue;Gr=!1;break}if(_n){if(!Tc(A,function(Ri,Yi){if(!Rs(_n,Yi)&&(Hn===Ri||Te(Hn,Ri,N,te,je)))return _n.push(Yi)})){Gr=!1;break}}else if(!(Hn===xi||Te(Hn,xi,N,te,je))){Gr=!1;break}}return je.delete(b),je.delete(A),Gr}function Ng(b,A,N,te,Te,je,at){switch(N){case sr:if(b.byteLength!=A.byteLength||b.byteOffset!=A.byteOffset)return!1;b=b.buffer,A=A.buffer;case ir:return!(b.byteLength!=A.byteLength||!je(new ws(b),new ws(A)));case ut:case Ut:case Qr:return vi(+b,+A);case Ht:return b.name==A.name&&b.message==A.message;case vt:case rt:return b==A+"";case Jt:var gt=hf;case Kt:var It=te&I;if(gt||(gt=Gs),b.size!=A.size&&!It)return!1;var ur=at.get(b);if(ur)return ur==A;te|=P,at.set(b,A);var cr=Pu(gt(b),gt(A),te,Te,je,at);return at.delete(b),cr;case Ct:if(eu)return eu.call(b)==eu.call(A)}return!1}function Ty(b,A,N,te,Te,je){var at=N&I,gt=Em(b),It=gt.length,ur=Em(A),cr=ur.length;if(It!=cr&&!at)return!1;for(var vr=It;vr--;){var Gr=gt[vr];if(!(at?Gr in A:pi.call(A,Gr)))return!1}var _n=je.get(b),Hn=je.get(A);if(_n&&Hn)return _n==A&&Hn==b;var xi=!0;je.set(b,A),je.set(A,b);for(var Wn=at;++vr<It;){Gr=gt[vr];var Ri=b[Gr],Yi=A[Gr];if(te)var Nf=at?te(Yi,Ri,Gr,A,b,je):te(Ri,Yi,Gr,b,A,je);if(!(Nf===t?Ri===Yi||Te(Ri,Yi,N,te,je):Nf)){xi=!1;break}Wn||(Wn=Gr=="constructor")}if(xi&&!Wn){var tc=b.constructor,Bf=A.constructor;tc!=Bf&&"constructor"in b&&"constructor"in A&&!(typeof tc=="function"&&tc instanceof tc&&typeof Bf=="function"&&Bf instanceof Bf)&&(xi=!1)}return je.delete(b),je.delete(A),xi}function Nl(b){return fn(gr(b,t,Mf),b+"")}function Em(b){return Mr(b,es,_h)}function Bg(b){return Mr(b,_l,Ay)}var Tm=_f?function(b){return _f.get(b)}:wL;function Am(b){for(var A=b.name+"",N=$u[A],te=pi.call($u,A)?N.length:0;te--;){var Te=N[te],je=Te.func;if(je==null||je==b)return Te.name}return A}function Ep(b){var A=pi.call(Le,"placeholder")?Le:b;return A.placeholder}function wn(){var b=Le.iteratee||_L;return b=b===_L?ks:b,arguments.length?b(arguments[0],arguments[1]):b}function Ra(b,A){var N=b.__data__;return B(A)?N[typeof A=="string"?"string":"hash"]:N.map}function Ui(b){for(var A=es(b),N=A.length;N--;){var te=A[N],Te=b[te];A[N]=[te,Te,We(Te)]}return A}function Of(b,A){var N=Wu(b,A);return xa(N)?N:t}function k0(b){var A=pi.call(b,Ss),N=b[Ss];try{b[Ss]=t;var te=!0}catch{}var Te=li.call(b);return te&&(A?b[Ss]=N:delete b[Ss]),Te}var _h=oh?function(b){return b==null?[]:(b=eo(b),Hu(oh(b),function(A){return up.call(b,A)}))}:SL,Ay=oh?function(b){for(var A=[];b;)ll(A,_h(b)),b=pl(b);return A}:SL,as=vn;(bf&&as(new bf(new ArrayBuffer(1)))!=sr||Zs&&as(new Zs)!=Jt||ma&&as(ma.resolve())!=Be||ga&&as(new ga)!=Kt||Su&&as(new Su)!=ar)&&(as=function(b){var A=vn(b),N=A==Rr?b.constructor:t,te=N?Oo(N):"";if(te)switch(te){case Ll:return sr;case ml:return Jt;case In:return Be;case Ts:return Kt;case Rl:return ar}return A});function B1(b,A,N){for(var te=-1,Te=N.length;++te<Te;){var je=N[te],at=je.size;switch(je.type){case"drop":b+=at;break;case"dropRight":A-=at;break;case"take":A=Ko(A,b+at);break;case"takeRight":b=nr(b,A-at);break}}return{start:b,end:A}}function Sa(b){var A=b.match(Yr);return A?A[1].split(Sn):[]}function ky(b,A,N){A=gh(A,b);for(var te=-1,Te=A.length,je=!1;++te<Te;){var at=_i(A[te]);if(!(je=b!=null&&N(b,at)))break;b=b[at]}return je||++te!=Te?je:(Te=b==null?0:b.length,!!Te&&Qu(Te)&&E(at,Te)&&(yn(b)||Po(b)))}function z1(b){var A=b.length,N=new b.constructor(A);return A&&typeof b[0]=="string"&&pi.call(b,"index")&&(N.index=b.index,N.input=b.input),N}function C0(b){return typeof b.constructor=="function"&&!xe(b)?oa(pl(b)):{}}function xh(b,A,N){var te=b.constructor;switch(A){case ir:return vh(b);case ut:case Ut:return new te(+b);case sr:return q1(b,N);case He:case Xe:case Rt:case xr:case Yn:case kn:case Cn:case wt:case Ot:return Bo(b,N);case Jt:return new te;case Qr:case rt:return new te(b);case vt:return mp(b);case Kt:return new te;case Ct:return xm(b)}}function c(b,A){var N=A.length;if(!N)return b;var te=N-1;return A[te]=(N>1?"& ":"")+A[te],A=A.join(N>2?", ":" "),b.replace(Pr,`{
/* [wrapped with `+A+`] */
`)}function m(b){return yn(b)||Po(b)||!!(ih&&b&&b[ih])}function E(b,A){var N=typeof b;return A=A??Se,!!A&&(N=="number"||N!="symbol"&&Pe.test(b))&&b>-1&&b%1==0&&b<A}function S(b,A,N){if(!Ai(N))return!1;var te=typeof A;return(te=="number"?lo(N)&&E(A,N.length):te=="string"&&A in N)?vi(N[A],b):!1}function C(b,A){if(yn(b))return!1;var N=typeof b;return N=="number"||N=="symbol"||N=="boolean"||b==null||hs(b)?!0:Ft.test(b)||!mt.test(b)||A!=null&&b in eo(A)}function B(b){var A=typeof b;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?b!=="__proto__":b===null}function Z(b){var A=Am(b),N=Le[A];if(typeof N!="function"||!(A in Xt.prototype))return!1;if(b===N)return!0;var te=Tm(N);return!!te&&b===te[0]}function re(b){return!!xu&&xu in b}var le=Jl?jo:EL;function xe(b){var A=b&&b.constructor,N=typeof A=="function"&&A.prototype||dl;return b===N}function We(b){return b===b&&!Ai(b)}function Je(b,A){return function(N){return N==null?!1:N[b]===A&&(A!==t||b in eo(N))}}function Et(b){var A=Gt(b,function(te){return N.size===u&&N.clear(),te}),N=A.cache;return A}function bt(b,A){var N=b[1],te=A[1],Te=N|te,je=Te<(L|R|K),at=te==K&&N==G||te==K&&N==j&&b[7].length<=A[8]||te==(K|j)&&A[7].length<=A[8]&&N==G;if(!(je||at))return b;te&L&&(b[2]=A[2],Te|=N&L?0:W);var gt=A[3];if(gt){var It=b[3];b[3]=It?hd(It,gt,A[4]):gt,b[4]=It?$a(b[3],h):A[4]}return gt=A[5],gt&&(It=b[5],b[5]=It?vp(It,gt,A[6]):gt,b[6]=It?$a(b[5],h):A[6]),gt=A[7],gt&&(b[7]=gt),te&K&&(b[8]=b[8]==null?A[8]:Ko(b[8],A[8])),b[9]==null&&(b[9]=A[9]),b[0]=A[0],b[1]=Te,b}function $t(b){var A=[];if(b!=null)for(var N in eo(b))A.push(N);return A}function rr(b){return li.call(b)}function gr(b,A,N){return A=nr(A===t?b.length-1:A,0),function(){for(var te=arguments,Te=-1,je=nr(te.length-A,0),at=qt(je);++Te<je;)at[Te]=te[A+Te];Te=-1;for(var gt=qt(A+1);++Te<A;)gt[Te]=te[Te];return gt[A]=N(at),sl(b,this,gt)}}function Tr(b,A){return A.length<2?b:Vr(b,No(A,0,-1))}function Fr(b,A){for(var N=b.length,te=Ko(A.length,N),Te=Cs(b);te--;){var je=A[te];b[te]=E(je,N)?Te[je]:t}return b}function kr(b,A){if(!(A==="constructor"&&typeof b[A]=="function")&&A!="__proto__")return b[A]}var Hr=Vi(Cf),dn=_o||function(b,A){return ei.setTimeout(b,A)},fn=Vi(hp);function Zn(b,A,N){var te=A+"";return fn(b,c(te,ci(Sa(te),N)))}function Vi(b){var A=0,N=0;return function(){var te=cp(),Te=ve-(te-N);if(N=te,Te>0){if(++A>=me)return arguments[0]}else A=0;return b.apply(t,arguments)}}function Do(b,A){var N=-1,te=b.length,Te=te-1;for(A=A===t?te:A;++N<A;){var je=Ya(N,Te),at=b[je];b[je]=b[N],b[N]=at}return b.length=A,b}var so=Et(function(b){var A=[];return b.charCodeAt(0)===46&&A.push(""),b.replace(fr,function(N,te,Te,je){A.push(Te?je.replace(ha,"$1"):te||N)}),A});function _i(b){if(typeof b=="string"||hs(b))return b;var A=b+"";return A=="0"&&1/b==-Ce?"-0":A}function Oo(b){if(b!=null){try{return Dc.call(b)}catch{}try{return b+""}catch{}}return""}function ci(b,A){return $s(st,function(N){var te="_."+N[0];A&N[1]&&!nd(b,te)&&b.push(te)}),b.sort()}function ss(b){if(b instanceof Xt)return b.clone();var A=new mr(b.__wrapped__,b.__chain__);return A.__actions__=Cs(b.__actions__),A.__index__=b.__index__,A.__values__=b.__values__,A}function Fa(b,A,N){(N?S(b,A,N):A===t)?A=1:A=nr(Qn(A),0);var te=b==null?0:b.length;if(!te||A<1)return[];for(var Te=0,je=0,at=qt(Ir(te/A));Te<te;)at[je++]=No(b,Te,Te+=A);return at}function Ti(b){for(var A=-1,N=b==null?0:b.length,te=0,Te=[];++A<N;){var je=b[A];je&&(Te[te++]=je)}return Te}function Ea(){var b=arguments.length;if(!b)return[];for(var A=qt(b-1),N=arguments[0],te=b;te--;)A[te-1]=arguments[te];return ll(yn(N)?Cs(N):[N],Dt(A,1))}var Yo=Kn(function(b,A){return Jn(b)?et(b,Dt(A,1,Jn,!0)):[]}),yl=Kn(function(b,A){var N=Ju(A);return Jn(N)&&(N=t),Jn(b)?et(b,Dt(A,1,Jn,!0),wn(N,2)):[]}),gd=Kn(function(b,A){var N=Ju(A);return Jn(N)&&(N=t),Jn(b)?et(b,Dt(A,1,Jn,!0),t,N):[]});function Pc(b,A,N){var te=b==null?0:b.length;return te?(A=N||A===t?1:Qn(A),No(b,A<0?0:A,te)):[]}function ls(b,A,N){var te=b==null?0:b.length;return te?(A=N||A===t?1:Qn(A),A=te-A,No(b,0,A<0?0:A)):[]}function Mc(b,A){return b&&b.length?ph(b,wn(A,3),!0,!0):[]}function Ja(b,A){return b&&b.length?ph(b,wn(A,3),!0):[]}function wh(b,A,N,te){var Te=b==null?0:b.length;return Te?(N&&typeof N!="number"&&S(b,A,N)&&(N=0,te=Te),Bt(b,A,N,te)):[]}function Mu(b,A,N){var te=b==null?0:b.length;if(!te)return-1;var Te=N==null?0:Qn(N);return Te<0&&(Te=nr(te+Te,0)),Ls(b,wn(A,3),Te)}function Pf(b,A,N){var te=b==null?0:b.length;if(!te)return-1;var Te=te-1;return N!==t&&(Te=Qn(N),Te=N<0?nr(te+Te,0):Ko(Te,te-1)),Ls(b,wn(A,3),Te,!0)}function Mf(b){var A=b==null?0:b.length;return A?Dt(b,1):[]}function Qs(b){var A=b==null?0:b.length;return A?Dt(b,Ce):[]}function vd(b,A){var N=b==null?0:b.length;return N?(A=A===t?1:Qn(A),Dt(b,A)):[]}function zg(b){for(var A=-1,N=b==null?0:b.length,te={};++A<N;){var Te=b[A];te[Te[0]]=Te[1]}return te}function j1(b){return b&&b.length?b[0]:t}function MA(b,A,N){var te=b==null?0:b.length;if(!te)return-1;var Te=N==null?0:Qn(N);return Te<0&&(Te=nr(te+Te,0)),zi(b,A,Te)}function WM(b){var A=b==null?0:b.length;return A?No(b,0,-1):[]}var $M=Kn(function(b){var A=Qi(b,ym);return A.length&&A[0]===b[0]?sn(A):[]}),LA=Kn(function(b){var A=Ju(b),N=Qi(b,ym);return A===Ju(N)?A=t:N.pop(),N.length&&N[0]===b[0]?sn(N,wn(A,2)):[]}),RA=Kn(function(b){var A=Ju(b),N=Qi(b,ym);return A=typeof A=="function"?A:t,A&&N.pop(),N.length&&N[0]===b[0]?sn(N,t,A):[]});function I0(b,A){return b==null?"":Es.call(b,A)}function Ju(b){var A=b==null?0:b.length;return A?b[A-1]:t}function D0(b,A,N){var te=b==null?0:b.length;if(!te)return-1;var Te=te;return N!==t&&(Te=Qn(N),Te=Te<0?nr(te+Te,0):Ko(Te,te-1)),A===A?lp(b,A,Te):Ls(b,vu,Te,!0)}function O0(b,A){return b&&b.length?Bs(b,Qn(A)):t}var P0=Kn(km);function km(b,A){return b&&b.length&&A&&A.length?ri(b,A):b}function GM(b,A,N){return b&&b.length&&A&&A.length?ri(b,A,wn(N,2)):b}function KM(b,A,N){return b&&b.length&&A&&A.length?ri(b,A,t,N):b}var ZM=Nl(function(b,A){var N=b==null?0:b.length,te=be(b,A);return to(b,Qi(A,function(Te){return E(Te,N)?+Te:Te}).sort(gp)),te});function jg(b,A){var N=[];if(!(b&&b.length))return N;var te=-1,Te=[],je=b.length;for(A=wn(A,3);++te<je;){var at=b[te];A(at,te,b)&&(N.push(at),Te.push(te))}return to(b,Te),N}function Cy(b){return b==null?b:Ga.call(b)}function FA(b,A,N){var te=b==null?0:b.length;return te?(N&&typeof N!="number"&&S(b,A,N)?(A=0,N=te):(A=A==null?0:Qn(A),N=N===t?te:Qn(N)),No(b,A,N)):[]}function U1(b,A){return fd(b,A)}function qA(b,A,N){return dh(b,A,wn(N,2))}function NA(b,A){var N=b==null?0:b.length;if(N){var te=fd(b,A);if(te<N&&vi(b[te],A))return te}return-1}function YM(b,A){return fd(b,A,!0)}function XM(b,A,N){return dh(b,A,wn(N,2),!0)}function JM(b,A){var N=b==null?0:b.length;if(N){var te=fd(b,A,!0)-1;if(vi(b[te],A))return te}return-1}function M0(b){return b&&b.length?Oc(b):[]}function V1(b,A){return b&&b.length?Oc(b,wn(A,2)):[]}function QM(b){var A=b==null?0:b.length;return A?No(b,1,A):[]}function Ug(b,A,N){return b&&b.length?(A=N||A===t?1:Qn(A),No(b,0,A<0?0:A)):[]}function Iy(b,A,N){var te=b==null?0:b.length;return te?(A=N||A===t?1:Qn(A),A=te-A,No(b,A<0?0:A,te)):[]}function Hi(b,A){return b&&b.length?ph(b,wn(A,3),!1,!0):[]}function eL(b,A){return b&&b.length?ph(b,wn(A,3)):[]}var H1=Kn(function(b){return iu(Dt(b,1,Jn,!0))}),Vg=Kn(function(b){var A=Ju(b);return Jn(A)&&(A=t),iu(Dt(b,1,Jn,!0),wn(A,2))}),tL=Kn(function(b){var A=Ju(b);return A=typeof A=="function"?A:t,iu(Dt(b,1,Jn,!0),t,A)});function rL(b){return b&&b.length?iu(b):[]}function nL(b,A){return b&&b.length?iu(b,wn(A,2)):[]}function iL(b,A){return A=typeof A=="function"?A:t,b&&b.length?iu(b,t,A):[]}function W1(b){if(!(b&&b.length))return[];var A=0;return b=Hu(b,function(N){if(Jn(N))return A=nr(N.length,A),!0}),op(A,function(N){return Qi(b,ip(N))})}function BA(b,A){if(!(b&&b.length))return[];var N=W1(b);return A==null?N:Qi(N,function(te){return sl(A,t,te)})}var oL=Kn(function(b,A){return Jn(b)?et(b,A):[]}),zA=Kn(function(b){return gl(Hu(b,Jn))}),jA=Kn(function(b){var A=Ju(b);return Jn(A)&&(A=t),gl(Hu(b,Jn),wn(A,2))}),UA=Kn(function(b){var A=Ju(b);return A=typeof A=="function"?A:t,gl(Hu(b,Jn),t,A)}),VA=Kn(W1);function L0(b,A){return mh(b||[],A||[],x)}function Cm(b,A){return mh(b||[],A||[],kf)}var $1=Kn(function(b){var A=b.length,N=A>1?b[A-1]:t;return N=typeof N=="function"?(b.pop(),N):t,BA(b,N)});function Im(b){var A=Le(b);return A.__chain__=!0,A}function HA(b,A){return A(b),b}function Xo(b,A){return A(b)}var Eo=Nl(function(b){var A=b.length,N=A?b[0]:0,te=this.__wrapped__,Te=function(je){return be(je,b)};return A>1||this.__actions__.length||!(te instanceof Xt)||!E(N)?this.thru(Te):(te=te.slice(N,+N+(A?1:0)),te.__actions__.push({func:Xo,args:[Te],thisArg:t}),new mr(te,this.__chain__).thru(function(je){return A&&!je.length&&je.push(t),je}))});function WA(){return Im(this)}function $A(){return new mr(this.value(),this.__chain__)}function GA(){this.__values__===t&&(this.__values__=Kg(this.value()));var b=this.__index__>=this.__values__.length,A=b?t:this.__values__[this.__index__++];return{done:b,value:A}}function KA(){return this}function ZA(b){for(var A,N=this;N instanceof aa;){var te=ss(N);te.__index__=0,te.__values__=t,A?Te.__wrapped__=te:A=te;var Te=te;N=N.__wrapped__}return Te.__wrapped__=b,A}function G1(){var b=this.__wrapped__;if(b instanceof Xt){var A=b;return this.__actions__.length&&(A=new Xt(this)),A=A.reverse(),A.__actions__.push({func:Xo,args:[Cy],thisArg:t}),new mr(A,this.__chain__)}return this.thru(Cy)}function Dm(){return pp(this.__wrapped__,this.__actions__)}var Om=yh(function(b,A,N){pi.call(b,N)?++b[N]:ae(b,N,1)});function YA(b,A,N){var te=yn(b)?rd:ft;return N&&S(b,A,N)&&(A=t),te(b,wn(A,3))}function qa(b,A){var N=yn(b)?Hu:Pt;return N(b,wn(A,3))}var Dy=ou(Mu),yd=ou(Pf);function R0(b,A){return Dt(Lf(b,A),1)}function F0(b,A){return Dt(Lf(b,A),Ce)}function K1(b,A,N){return N=N===t?1:Qn(N),Dt(Lf(b,A),N)}function Pm(b,A){var N=yn(b)?$s:Ve;return N(b,wn(A,3))}function Sh(b,A){var N=yn(b)?rp:tt;return N(b,wn(A,3))}var XA=yh(function(b,A,N){pi.call(b,N)?b[N].push(A):ae(b,N,[A])});function JA(b,A,N,te){b=lo(b)?b:qf(b),N=N&&!te?Qn(N):0;var Te=b.length;return N<0&&(N=nr(Te+N,0)),Rm(b)?N<=Te&&b.indexOf(A,N)>-1:!!Te&&zi(b,A,N)>-1}var aL=Kn(function(b,A,N){var te=-1,Te=typeof A=="function",je=lo(b)?qt(b.length):[];return Ve(b,function(at){je[++te]=Te?sl(A,at,N):nn(at,A,N)}),je}),us=yh(function(b,A,N){ae(b,N,A)});function Lf(b,A){var N=yn(b)?Qi:ku;return N(b,wn(A,3))}function QA(b,A,N,te){return b==null?[]:(yn(A)||(A=A==null?[]:[A]),N=te?t:N,yn(N)||(N=N==null?[]:[N]),sa(b,A,N))}var a=yh(function(b,A,N){b[N?0:1].push(A)},function(){return[[],[]]});function l(b,A,N){var te=yn(b)?np:Og,Te=arguments.length<3;return te(b,wn(A,4),N,Te,Ve)}function f(b,A,N){var te=yn(b)?Ma:Og,Te=arguments.length<3;return te(b,wn(A,4),N,Te,tt)}function _(b,A){var N=yn(b)?Hu:Pt;return N(b,lr(wn(A,3)))}function k(b){var A=yn(b)?fh:Lg;return A(b)}function D(b,A,N){(N?S(b,A,N):A===t)?A=1:A=Qn(A);var te=yn(b)?d:hh;return te(b,A)}function M(b){var A=yn(b)?v:yy;return A(b)}function H(b){if(b==null)return 0;if(lo(b))return Rm(b)?Xl(b):b.length;var A=as(b);return A==Jt||A==Kt?b.size:Za(b).length}function X(b,A,N){var te=yn(b)?Tc:Xa;return N&&S(b,A,N)&&(A=t),te(b,wn(A,3))}var ie=Kn(function(b,A){if(b==null)return[];var N=A.length;return N>1&&S(b,A[0],A[1])?A=[]:N>2&&S(A[0],A[1],A[2])&&(A=[A[0]]),sa(b,Dt(A,1),[])}),ue=yf||function(){return ei.Date.now()};function ge(b,A){if(typeof A!="function")throw new hl(i);return b=Qn(b),function(){if(--b<1)return A.apply(this,arguments)}}function Ae(b,A,N){return A=N?t:A,A=b&&A==null?b.length:A,Pi(b,K,t,t,t,t,A)}function Oe(b,A){var N;if(typeof A!="function")throw new hl(i);return b=Qn(b),function(){return--b>0&&(N=A.apply(this,arguments)),b<=1&&(A=t),N}}var $e=Kn(function(b,A,N){var te=L;if(N.length){var Te=$a(N,Ep($e));te|=V}return Pi(b,te,A,N,Te)}),Ke=Kn(function(b,A,N){var te=L|R;if(N.length){var Te=$a(N,Ep(Ke));te|=V}return Pi(A,te,b,N,Te)});function ot(b,A,N){A=N?t:A;var te=Pi(b,G,t,t,t,t,t,A);return te.placeholder=ot.placeholder,te}function Qe(b,A,N){A=N?t:A;var te=Pi(b,q,t,t,t,t,t,A);return te.placeholder=Qe.placeholder,te}function yt(b,A,N){var te,Te,je,at,gt,It,ur=0,cr=!1,vr=!1,Gr=!0;if(typeof b!="function")throw new hl(i);A=Bl(A)||0,Ai(N)&&(cr=!!N.leading,vr="maxWait"in N,je=vr?nr(Bl(N.maxWait)||0,A):je,Gr="trailing"in N?!!N.trailing:Gr);function _n(js){var xd=te,Bm=Te;return te=Te=t,ur=js,at=b.apply(Bm,xd),at}function Hn(js){return ur=js,gt=dn(Ri,A),cr?_n(js):at}function xi(js){var xd=js-It,Bm=js-ur,T8=A-xd;return vr?Ko(T8,je-Bm):T8}function Wn(js){var xd=js-It,Bm=js-ur;return It===t||xd>=A||xd<0||vr&&Bm>=je}function Ri(){var js=ue();if(Wn(js))return Yi(js);gt=dn(Ri,xi(js))}function Yi(js){return gt=t,Gr&&te?_n(js):(te=Te=t,at)}function Nf(){gt!==t&&w0(gt),ur=0,te=It=Te=gt=t}function tc(){return gt===t?at:Yi(ue())}function Bf(){var js=ue(),xd=Wn(js);if(te=arguments,Te=this,It=js,xd){if(gt===t)return Hn(It);if(vr)return w0(gt),gt=dn(Ri,A),_n(It)}return gt===t&&(gt=dn(Ri,A)),at}return Bf.cancel=Nf,Bf.flush=tc,Bf}var At=Kn(function(b,A){return Ze(b,1,A)}),Lt=Kn(function(b,A,N){return Ze(b,Bl(A)||0,N)});function Nt(b){return Pi(b,Q)}function Gt(b,A){if(typeof b!="function"||A!=null&&typeof A!="function")throw new hl(i);var N=function(){var te=arguments,Te=A?A.apply(this,te):te[0],je=N.cache;if(je.has(Te))return je.get(Te);var at=b.apply(this,te);return N.cache=je.set(Te,at)||je,at};return N.cache=new(Gt.Cache||ba),N}Gt.Cache=ba;function lr(b){if(typeof b!="function")throw new hl(i);return function(){var A=arguments;switch(A.length){case 0:return!b.call(this);case 1:return!b.call(this,A[0]);case 2:return!b.call(this,A[0],A[1]);case 3:return!b.call(this,A[0],A[1],A[2])}return!b.apply(this,A)}}function br(b){return Oe(2,b)}var $r=_m(function(b,A){A=A.length==1&&yn(A[0])?Qi(A[0],da(wn())):Qi(Dt(A,1),da(wn()));var N=A.length;return Kn(function(te){for(var Te=-1,je=Ko(te.length,N);++Te<je;)te[Te]=A[Te].call(this,te[Te]);return sl(b,this,te)})}),Ar=Kn(function(b,A){var N=$a(A,Ep(Ar));return Pi(b,V,t,A,N)}),Xr=Kn(function(b,A){var N=$a(A,Ep(Xr));return Pi(b,p,t,A,N)}),Dr=Nl(function(b,A){return Pi(b,j,t,t,t,A)});function Bn(b,A){if(typeof b!="function")throw new hl(i);return A=A===t?A:Qn(A),Kn(b,A)}function mn(b,A){if(typeof b!="function")throw new hl(i);return A=A==null?0:nr(Qn(A),0),Kn(function(N){var te=N[A],Te=If(N,0,A);return te&&ll(Te,te),sl(b,this,Te)})}function jr(b,A,N){var te=!0,Te=!0;if(typeof b!="function")throw new hl(i);return Ai(N)&&(te="leading"in N?!!N.leading:te,Te="trailing"in N?!!N.trailing:Te),yt(b,A,{leading:te,maxWait:A,trailing:Te})}function Gn(b){return Ae(b,1)}function Pn(b,A){return Ar(bm(A),b)}function ni(){if(!arguments.length)return[];var b=arguments[0];return yn(b)?b:[b]}function en(b){return Me(b,T)}function gi(b,A){return A=typeof A=="function"?A:t,Me(b,T,A)}function To(b){return Me(b,y|T)}function Jo(b,A){return A=typeof A=="function"?A:t,Me(b,y|T,A)}function zo(b,A){return A==null||Ye(b,A,es(A))}function vi(b,A){return b===A||b!==b&&A!==A}var Qo=wp(Cr),Qa=wp(function(b,A){return b>=A}),Po=ln(function(){return arguments}())?ln:function(b){return uo(b)&&pi.call(b,"callee")&&!up.call(b,"callee")},yn=qt.isArray,cs=sf?da(sf):xo;function lo(b){return b!=null&&Qu(b.length)&&!jo(b)}function Jn(b){return uo(b)&&lo(b)}function fs(b){return b===!0||b===!1||uo(b)&&vn(b)==ut}var Ln=ah||EL,Zi=Fo?da(Fo):wo;function Mi(b){return uo(b)&&b.nodeType===1&&!Tp(b)}function oi(b){if(b==null)return!0;if(lo(b)&&(yn(b)||typeof b=="string"||typeof b.splice=="function"||Ln(b)||Th(b)||Po(b)))return!b.length;var A=as(b);if(A==Jt||A==Kt)return!b.size;if(xe(b))return!Za(b).length;for(var N in b)if(pi.call(b,N))return!1;return!0}function bl(b,A){return Io(b,A)}function zs(b,A,N){N=typeof N=="function"?N:t;var te=N?N(b,A):t;return te===t?Io(b,A,t,N):!!te}function ro(b){if(!uo(b))return!1;var A=vn(b);return A==Ht||A==Wt||typeof b.message=="string"&&typeof b.name=="string"&&!Tp(b)}function Ta(b){return typeof b=="number"&&Ml(b)}function jo(b){if(!Ai(b))return!1;var A=vn(b);return A==pr||A==zr||A==kt||A==Ge}function fi(b){return typeof b=="number"&&b==Qn(b)}function Qu(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=Se}function Ai(b){var A=typeof b;return b!=null&&(A=="object"||A=="function")}function uo(b){return b!=null&&typeof b=="object"}var ea=ho?da(ho):Ki;function Eh(b,A){return b===A||So(b,A,Ui(A))}function Lc(b,A,N){return N=typeof N=="function"?N:t,So(b,A,Ui(A),N)}function Hg(b){return Lm(b)&&b!=+b}function Mm(b){if(le(b))throw new On(n);return xa(b)}function Wg(b){return b===null}function bd(b){return b==null}function Lm(b){return typeof b=="number"||uo(b)&&vn(b)==Qr}function Tp(b){if(!uo(b)||vn(b)!=Rr)return!1;var A=pl(b);if(A===null)return!0;var N=pi.call(A,"constructor")&&A.constructor;return typeof N=="function"&&N instanceof N&&Dc.call(N)==wu}var Ap=Vu?da(Vu):os;function Oy(b){return fi(b)&&b>=-Se&&b<=Se}var Py=Ec?da(Ec):Zu;function Rm(b){return typeof b=="string"||!yn(b)&&uo(b)&&vn(b)==rt}function hs(b){return typeof b=="symbol"||uo(b)&&vn(b)==Ct}var Th=Dg?da(Dg):As;function $g(b){return b===t}function kp(b){return uo(b)&&as(b)==ar}function Gg(b){return uo(b)&&vn(b)==er}var q0=wp(ql),N0=wp(function(b,A){return b<=A});function Kg(b){if(!b)return[];if(lo(b))return Rm(b)?Fs(b):Cs(b);if(Ql&&b[Ql])return Gi(b[Ql]());var A=as(b),N=A==Jt?hf:A==Kt?Gs:qf;return N(b)}function ec(b){if(!b)return b===0?b:0;if(b=Bl(b),b===Ce||b===-Ce){var A=b<0?-1:1;return A*de}return b===b?b:0}function Qn(b){var A=ec(b),N=A%1;return A===A?N?A-N:A:0}function Zg(b){return b?De(Qn(b),0,Ue):0}function Bl(b){if(typeof b=="number")return b;if(hs(b))return we;if(Ai(b)){var A=typeof b.valueOf=="function"?b.valueOf():b;b=Ai(A)?A+"":A}if(typeof b!="string")return b===0?b:+b;b=ap(b);var N=ke.test(b);return N||Fe.test(b)?Sc(b.slice(2),N?2:8):Ee.test(b)?we:+b}function Yg(b){return Du(b,_l(b))}function B0(b){return b?De(Qn(b),-Se,Se):b===0?b:0}function Li(b){return b==null?"":nu(b)}var z0=Ou(function(b,A){if(xe(A)||lo(A)){Du(A,es(A),b);return}for(var N in A)pi.call(A,N)&&x(b,N,A[N])}),Fm=Ou(function(b,A){Du(A,_l(A),b)}),Cp=Ou(function(b,A,N,te){Du(A,_l(A),b,te)}),qm=Ou(function(b,A,N,te){Du(A,es(A),b,te)}),My=Nl(be);function Xg(b,A){var N=oa(b);return A==null?N:z(N,A)}var Z1=Kn(function(b,A){b=eo(b);var N=-1,te=A.length,Te=te>2?A[2]:t;for(Te&&S(A[0],A[1],Te)&&(te=1);++N<te;)for(var je=A[N],at=_l(je),gt=-1,It=at.length;++gt<It;){var ur=at[gt],cr=b[ur];(cr===t||vi(cr,dl[ur])&&!pi.call(b,ur))&&(b[ur]=je[ur])}return b}),ek=Kn(function(b){return b.push(t,bh),sl(Jg,t,b)});function Y1(b,A){return kc(b,wn(A,3),or)}function tk(b,A){return kc(b,wn(A,3),Er)}function X1(b,A){return b==null?b:Yt(b,wn(A,3),_l)}function sL(b,A){return b==null?b:hr(b,wn(A,3),_l)}function Ly(b,A){return b&&or(b,wn(A,3))}function la(b,A){return b&&Er(b,wn(A,3))}function Rf(b){return b==null?[]:Wr(b,es(b))}function lL(b){return b==null?[]:Wr(b,_l(b))}function Ah(b,A,N){var te=b==null?t:Vr(b,A);return te===t?N:te}function J1(b,A){return b!=null&&ky(b,A,gn)}function j0(b,A){return b!=null&&ky(b,A,Dn)}var U0=Sy(function(b,A,N){A!=null&&typeof A.toString!="function"&&(A=li.call(A)),b[A]=N},bL(Rc)),kh=Sy(function(b,A,N){A!=null&&typeof A.toString!="function"&&(A=li.call(A)),pi.call(b,A)?b[A].push(N):b[A]=[N]},wn),V0=Kn(nn);function es(b){return lo(b)?ch(b):Za(b)}function _l(b){return lo(b)?ch(b,!0):Yu(b)}function H0(b,A){var N={};return A=wn(A,3),or(b,function(te,Te,je){ae(N,A(te,Te,je),te)}),N}function Q1(b,A){var N={};return A=wn(A,3),or(b,function(te,Te,je){ae(N,Te,A(te,Te,je))}),N}var rk=Ou(function(b,A,N){wa(b,A,N)}),Jg=Ou(function(b,A,N,te){wa(b,A,N,te)}),nk=Nl(function(b,A){var N={};if(b==null)return N;var te=!1;A=Qi(A,function(je){return je=gh(je,b),te||(te=je.length>1),je}),Du(b,Bg(b),N),te&&(N=Me(N,y|w|T,vl));for(var Te=A.length;Te--;)dp(N,A[Te]);return N});function ik(b,A){return ew(b,lr(wn(A)))}var ok=Nl(function(b,A){return b==null?{}:Iu(b,A)});function ew(b,A){if(b==null)return{};var N=Qi(Bg(b),function(te){return[te]});return A=wn(A),Xu(b,N,function(te,Te){return A(te,Te[0])})}function ak(b,A,N){A=gh(A,b);var te=-1,Te=A.length;for(Te||(Te=1,b=t);++te<Te;){var je=b==null?t:b[_i(A[te])];je===t&&(te=Te,je=N),b=jo(je)?je.call(b):je}return b}function Lu(b,A,N){return b==null?b:kf(b,A,N)}function W0(b,A,N,te){return te=typeof te=="function"?te:t,b==null?b:kf(b,A,N,te)}var tw=md(es),Ff=md(_l);function uL(b,A,N){var te=yn(b),Te=te||Ln(b)||Th(b);if(A=wn(A,4),N==null){var je=b&&b.constructor;Te?N=te?new je:[]:Ai(b)?N=jo(je)?oa(pl(b)):{}:N={}}return(Te?$s:or)(b,function(at,gt,It){return A(N,at,gt,It)}),N}function sk(b,A){return b==null?!0:dp(b,A)}function Nm(b,A,N){return b==null?b:by(b,A,bm(N))}function Qg(b,A,N,te){return te=typeof te=="function"?te:t,b==null?b:by(b,A,bm(N),te)}function qf(b){return b==null?[]:yu(b,es(b))}function ev(b){return b==null?[]:yu(b,_l(b))}function tv(b,A,N){return N===t&&(N=A,A=t),N!==t&&(N=Bl(N),N=N===N?N:0),A!==t&&(A=Bl(A),A=A===A?A:0),De(Bl(b),A,N)}function lk(b,A,N){return A=ec(A),N===t?(N=A,A=0):N=ec(N),b=Bl(b),cn(b,A,N)}function uk(b,A,N){if(N&&typeof N!="boolean"&&S(b,A,N)&&(A=N=t),N===t&&(typeof A=="boolean"?(N=A,A=t):typeof b=="boolean"&&(N=b,b=t)),b===t&&A===t?(b=0,A=1):(b=ec(b),A===t?(A=b,b=0):A=ec(A)),b>A){var te=b;b=A,A=te}if(N||b%1||A%1){var Te=Ks();return Ko(b+Te*(A-b+tp("1e-"+((Te+"").length-1))),A)}return Ya(b,A)}var ck=_p(function(b,A,N){return A=A.toLowerCase(),b+(N?rw(A):A)});function rw(b){return rv(Li(b).toLowerCase())}function $0(b){return b=Li(b),b&&b.replace(_e,Cc).replace(Wa,"")}function nw(b,A,N){b=Li(b),A=nu(A);var te=b.length;N=N===t?te:De(Qn(N),0,te);var Te=N;return N-=A.length,N>=0&&b.slice(N,Te)==A}function _d(b){return b=Li(b),b&&Si.test(b)?b.replace(tn,Yl):b}function fk(b){return b=Li(b),b&&an.test(b)?b.replace(yr,"\\$&"):b}var iw=_p(function(b,A,N){return b+(N?"-":"")+A.toLowerCase()}),ow=_p(function(b,A,N){return b+(N?" ":"")+A.toLowerCase()}),hk=Rg("toLowerCase");function aw(b,A,N){b=Li(b),A=Qn(A);var te=A?Xl(b):0;if(!A||te>=A)return b;var Te=(A-te)/2;return Df(pa(Te),N)+b+Df(Ir(Te),N)}function dk(b,A,N){b=Li(b),A=Qn(A);var te=A?Xl(b):0;return A&&te<A?b+Df(A-te,N):b}function pk(b,A,N){b=Li(b),A=Qn(A);var te=A?Xl(b):0;return A&&te<A?Df(A-te,N)+b:b}function sw(b,A,N){return N||A==null?A=0:A&&(A=+A),sh(Li(b).replace(Or,""),A||0)}function mk(b,A,N){return(N?S(b,A,N):A===t)?A=1:A=Qn(A),vm(Li(b),A)}function Ry(){var b=arguments,A=Li(b[0]);return b.length<3?A:A.replace(b[1],b[2])}var gk=_p(function(b,A,N){return b+(N?"_":"")+A.toLowerCase()});function G0(b,A,N){return N&&typeof N!="number"&&S(b,A,N)&&(A=N=t),N=N===t?Ue:N>>>0,N?(b=Li(b),b&&(typeof A=="string"||A!=null&&!Ap(A))&&(A=nu(A),!A&&ff(b))?If(Fs(b),0,N):b.split(A,N)):[]}var cL=_p(function(b,A,N){return b+(N?" ":"")+rv(A)});function vk(b,A,N){return b=Li(b),N=N==null?0:De(Qn(N),0,b.length),A=nu(A),b.slice(N,N+A.length)==A}function fL(b,A,N){var te=Le.templateSettings;N&&S(b,A,N)&&(A=t),b=Li(b),A=Cp({},A,te,qg);var Te=Cp({},A.imports,te.imports,qg),je=es(Te),at=yu(Te,je),gt,It,ur=0,cr=A.interpolate||fe,vr="__p += '",Gr=Ic((A.escape||fe).source+"|"+cr.source+"|"+(cr===ze?xn:fe).source+"|"+(A.evaluate||fe).source+"|$","g"),_n="//# sourceURL="+(pi.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++sm+"]")+`
`;b.replace(Gr,function(Wn,Ri,Yi,Nf,tc,Bf){return Yi||(Yi=Nf),vr+=b.slice(ur,Bf).replace(Ie,cl),Ri&&(gt=!0,vr+=`' +
__e(`+Ri+`) +
'`),tc&&(It=!0,vr+=`';
`+tc+`;
__p += '`),Yi&&(vr+=`' +
((__t = (`+Yi+`)) == null ? '' : __t) +
'`),ur=Bf+Wn.length,Wn}),vr+=`';
`;var Hn=pi.call(A,"variable")&&A.variable;if(!Hn)vr=`with (obj) {
`+vr+`
}
`;else if(Xn.test(Hn))throw new On(o);vr=(It?vr.replace(wr,""):vr).replace(tr,"$1").replace(on,"$1;"),vr="function("+(Hn||"obj")+`) {
`+(Hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(gt?", __e = _.escape":"")+(It?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+vr+`return __p
}`;var xi=nv(function(){return di(je,_n+"return "+vr).apply(t,at)});if(xi.source=vr,ro(xi))throw xi;return xi}function hL(b){return Li(b).toLowerCase()}function dL(b){return Li(b).toUpperCase()}function pL(b,A,N){if(b=Li(b),b&&(N||A===t))return ap(b);if(!b||!(A=nu(A)))return b;var te=Fs(b),Te=Fs(A),je=Zl(te,Te),at=eh(te,Te)+1;return If(te,je,at).join("")}function mL(b,A,N){if(b=Li(b),b&&(N||A===t))return b.slice(0,rh(b)+1);if(!b||!(A=nu(A)))return b;var te=Fs(b),Te=eh(te,Fs(A))+1;return If(te,0,Te).join("")}function gL(b,A,N){if(b=Li(b),b&&(N||A===t))return b.replace(Or,"");if(!b||!(A=nu(A)))return b;var te=Fs(b),Te=Zl(te,Fs(A));return If(te,Te).join("")}function vL(b,A){var N=ee,te=se;if(Ai(A)){var Te="separator"in A?A.separator:Te;N="length"in A?Qn(A.length):N,te="omission"in A?nu(A.omission):te}b=Li(b);var je=b.length;if(ff(b)){var at=Fs(b);je=at.length}if(N>=je)return b;var gt=N-Xl(te);if(gt<1)return te;var It=at?If(at,0,gt).join(""):b.slice(0,gt);if(Te===t)return It+te;if(at&&(gt+=It.length-gt),Ap(Te)){if(b.slice(gt).search(Te)){var ur,cr=It;for(Te.global||(Te=Ic(Te.source,Li(pe.exec(Te))+"g")),Te.lastIndex=0;ur=Te.exec(cr);)var vr=ur.index;It=It.slice(0,vr===t?gt:vr)}}else if(b.indexOf(nu(Te),gt)!=gt){var Gr=It.lastIndexOf(Te);Gr>-1&&(It=It.slice(0,Gr))}return It+te}function yL(b){return b=Li(b),b&&Rn.test(b)?b.replace(pn,nh):b}var Ch=_p(function(b,A,N){return b+(N?" ":"")+A.toUpperCase()}),rv=Rg("toUpperCase");function lw(b,A,N){return b=Li(b),A=N?t:A,A===t?th(b)?df(b):lf(b):b.match(A)||[]}var nv=Kn(function(b,A){try{return sl(b,t,A)}catch(N){return ro(N)?N:new On(N)}}),yk=Nl(function(b,A){return $s(A,function(N){N=_i(N),ae(b,N,$e(b[N],b))}),b});function BEe(b){var A=b==null?0:b.length,N=wn();return b=A?Qi(b,function(te){if(typeof te[1]!="function")throw new hl(i);return[N(te[0]),te[1]]}):[],Kn(function(te){for(var Te=-1;++Te<A;){var je=b[Te];if(sl(je[0],this,te))return sl(je[1],this,te)}})}function zEe(b){return Ne(Me(b,y))}function bL(b){return function(){return b}}function jEe(b,A){return b==null||b!==b?A:b}var UEe=T0(),VEe=T0(!0);function Rc(b){return b}function _L(b){return ks(typeof b=="function"?b:Me(b,y))}function HEe(b){return Sf(Me(b,y))}function WEe(b,A){return Ef(b,Me(A,y))}var $Ee=Kn(function(b,A){return function(N){return nn(N,b,A)}}),GEe=Kn(function(b,A){return function(N){return nn(b,N,A)}});function xL(b,A,N){var te=es(A),Te=Wr(A,te);N==null&&!(Ai(A)&&(Te.length||!te.length))&&(N=A,A=b,b=this,Te=Wr(A,es(A)));var je=!(Ai(N)&&"chain"in N)||!!N.chain,at=jo(b);return $s(Te,function(gt){var It=A[gt];b[gt]=It,at&&(b.prototype[gt]=function(){var ur=this.__chain__;if(je||ur){var cr=b(this.__wrapped__),vr=cr.__actions__=Cs(this.__actions__);return vr.push({func:It,args:arguments,thisArg:b}),cr.__chain__=ur,cr}return It.apply(b,ll([this.value()],arguments))})}),b}function KEe(){return ei._===this&&(ei._=na),this}function wL(){}function ZEe(b){return b=Qn(b),Kn(function(A){return Bs(A,b)})}var YEe=Sm(Qi),XEe=Sm(rd),JEe=Sm(Tc);function E8(b){return C(b)?ip(_i(b)):Tf(b)}function QEe(b){return function(A){return b==null?t:Vr(b,A)}}var eTe=pd(),tTe=pd(!0);function SL(){return[]}function EL(){return!1}function rTe(){return{}}function nTe(){return""}function iTe(){return!0}function oTe(b,A){if(b=Qn(b),b<1||b>Se)return[];var N=Ue,te=Ko(b,Ue);A=wn(A),b-=Ue;for(var Te=op(te,A);++N<b;)A(N);return Te}function aTe(b){return yn(b)?Qi(b,_i):hs(b)?[b]:Cs(so(Li(b)))}function sTe(b){var A=++pm;return Li(b)+A}var lTe=xp(function(b,A){return b+A},0),uTe=Ey("ceil"),cTe=xp(function(b,A){return b/A},1),fTe=Ey("floor");function hTe(b){return b&&b.length?xt(b,Rc,Cr):t}function dTe(b,A){return b&&b.length?xt(b,wn(A,2),Cr):t}function pTe(b){return cf(b,Rc)}function mTe(b,A){return cf(b,wn(A,2))}function gTe(b){return b&&b.length?xt(b,Rc,ql):t}function vTe(b,A){return b&&b.length?xt(b,wn(A,2),ql):t}var yTe=xp(function(b,A){return b*A},1),bTe=Ey("round"),_Te=xp(function(b,A){return b-A},0);function xTe(b){return b&&b.length?id(b,Rc):0}function wTe(b,A){return b&&b.length?id(b,wn(A,2)):0}return Le.after=ge,Le.ary=Ae,Le.assign=z0,Le.assignIn=Fm,Le.assignInWith=Cp,Le.assignWith=qm,Le.at=My,Le.before=Oe,Le.bind=$e,Le.bindAll=yk,Le.bindKey=Ke,Le.castArray=ni,Le.chain=Im,Le.chunk=Fa,Le.compact=Ti,Le.concat=Ea,Le.cond=BEe,Le.conforms=zEe,Le.constant=bL,Le.countBy=Om,Le.create=Xg,Le.curry=ot,Le.curryRight=Qe,Le.debounce=yt,Le.defaults=Z1,Le.defaultsDeep=ek,Le.defer=At,Le.delay=Lt,Le.difference=Yo,Le.differenceBy=yl,Le.differenceWith=gd,Le.drop=Pc,Le.dropRight=ls,Le.dropRightWhile=Mc,Le.dropWhile=Ja,Le.fill=wh,Le.filter=qa,Le.flatMap=R0,Le.flatMapDeep=F0,Le.flatMapDepth=K1,Le.flatten=Mf,Le.flattenDeep=Qs,Le.flattenDepth=vd,Le.flip=Nt,Le.flow=UEe,Le.flowRight=VEe,Le.fromPairs=zg,Le.functions=Rf,Le.functionsIn=lL,Le.groupBy=XA,Le.initial=WM,Le.intersection=$M,Le.intersectionBy=LA,Le.intersectionWith=RA,Le.invert=U0,Le.invertBy=kh,Le.invokeMap=aL,Le.iteratee=_L,Le.keyBy=us,Le.keys=es,Le.keysIn=_l,Le.map=Lf,Le.mapKeys=H0,Le.mapValues=Q1,Le.matches=HEe,Le.matchesProperty=WEe,Le.memoize=Gt,Le.merge=rk,Le.mergeWith=Jg,Le.method=$Ee,Le.methodOf=GEe,Le.mixin=xL,Le.negate=lr,Le.nthArg=ZEe,Le.omit=nk,Le.omitBy=ik,Le.once=br,Le.orderBy=QA,Le.over=YEe,Le.overArgs=$r,Le.overEvery=XEe,Le.overSome=JEe,Le.partial=Ar,Le.partialRight=Xr,Le.partition=a,Le.pick=ok,Le.pickBy=ew,Le.property=E8,Le.propertyOf=QEe,Le.pull=P0,Le.pullAll=km,Le.pullAllBy=GM,Le.pullAllWith=KM,Le.pullAt=ZM,Le.range=eTe,Le.rangeRight=tTe,Le.rearg=Dr,Le.reject=_,Le.remove=jg,Le.rest=Bn,Le.reverse=Cy,Le.sampleSize=D,Le.set=Lu,Le.setWith=W0,Le.shuffle=M,Le.slice=FA,Le.sortBy=ie,Le.sortedUniq=M0,Le.sortedUniqBy=V1,Le.split=G0,Le.spread=mn,Le.tail=QM,Le.take=Ug,Le.takeRight=Iy,Le.takeRightWhile=Hi,Le.takeWhile=eL,Le.tap=HA,Le.throttle=jr,Le.thru=Xo,Le.toArray=Kg,Le.toPairs=tw,Le.toPairsIn=Ff,Le.toPath=aTe,Le.toPlainObject=Yg,Le.transform=uL,Le.unary=Gn,Le.union=H1,Le.unionBy=Vg,Le.unionWith=tL,Le.uniq=rL,Le.uniqBy=nL,Le.uniqWith=iL,Le.unset=sk,Le.unzip=W1,Le.unzipWith=BA,Le.update=Nm,Le.updateWith=Qg,Le.values=qf,Le.valuesIn=ev,Le.without=oL,Le.words=lw,Le.wrap=Pn,Le.xor=zA,Le.xorBy=jA,Le.xorWith=UA,Le.zip=VA,Le.zipObject=L0,Le.zipObjectDeep=Cm,Le.zipWith=$1,Le.entries=tw,Le.entriesIn=Ff,Le.extend=Fm,Le.extendWith=Cp,xL(Le,Le),Le.add=lTe,Le.attempt=nv,Le.camelCase=ck,Le.capitalize=rw,Le.ceil=uTe,Le.clamp=tv,Le.clone=en,Le.cloneDeep=To,Le.cloneDeepWith=Jo,Le.cloneWith=gi,Le.conformsTo=zo,Le.deburr=$0,Le.defaultTo=jEe,Le.divide=cTe,Le.endsWith=nw,Le.eq=vi,Le.escape=_d,Le.escapeRegExp=fk,Le.every=YA,Le.find=Dy,Le.findIndex=Mu,Le.findKey=Y1,Le.findLast=yd,Le.findLastIndex=Pf,Le.findLastKey=tk,Le.floor=fTe,Le.forEach=Pm,Le.forEachRight=Sh,Le.forIn=X1,Le.forInRight=sL,Le.forOwn=Ly,Le.forOwnRight=la,Le.get=Ah,Le.gt=Qo,Le.gte=Qa,Le.has=J1,Le.hasIn=j0,Le.head=j1,Le.identity=Rc,Le.includes=JA,Le.indexOf=MA,Le.inRange=lk,Le.invoke=V0,Le.isArguments=Po,Le.isArray=yn,Le.isArrayBuffer=cs,Le.isArrayLike=lo,Le.isArrayLikeObject=Jn,Le.isBoolean=fs,Le.isBuffer=Ln,Le.isDate=Zi,Le.isElement=Mi,Le.isEmpty=oi,Le.isEqual=bl,Le.isEqualWith=zs,Le.isError=ro,Le.isFinite=Ta,Le.isFunction=jo,Le.isInteger=fi,Le.isLength=Qu,Le.isMap=ea,Le.isMatch=Eh,Le.isMatchWith=Lc,Le.isNaN=Hg,Le.isNative=Mm,Le.isNil=bd,Le.isNull=Wg,Le.isNumber=Lm,Le.isObject=Ai,Le.isObjectLike=uo,Le.isPlainObject=Tp,Le.isRegExp=Ap,Le.isSafeInteger=Oy,Le.isSet=Py,Le.isString=Rm,Le.isSymbol=hs,Le.isTypedArray=Th,Le.isUndefined=$g,Le.isWeakMap=kp,Le.isWeakSet=Gg,Le.join=I0,Le.kebabCase=iw,Le.last=Ju,Le.lastIndexOf=D0,Le.lowerCase=ow,Le.lowerFirst=hk,Le.lt=q0,Le.lte=N0,Le.max=hTe,Le.maxBy=dTe,Le.mean=pTe,Le.meanBy=mTe,Le.min=gTe,Le.minBy=vTe,Le.stubArray=SL,Le.stubFalse=EL,Le.stubObject=rTe,Le.stubString=nTe,Le.stubTrue=iTe,Le.multiply=yTe,Le.nth=O0,Le.noConflict=KEe,Le.noop=wL,Le.now=ue,Le.pad=aw,Le.padEnd=dk,Le.padStart=pk,Le.parseInt=sw,Le.random=uk,Le.reduce=l,Le.reduceRight=f,Le.repeat=mk,Le.replace=Ry,Le.result=ak,Le.round=bTe,Le.runInContext=St,Le.sample=k,Le.size=H,Le.snakeCase=gk,Le.some=X,Le.sortedIndex=U1,Le.sortedIndexBy=qA,Le.sortedIndexOf=NA,Le.sortedLastIndex=YM,Le.sortedLastIndexBy=XM,Le.sortedLastIndexOf=JM,Le.startCase=cL,Le.startsWith=vk,Le.subtract=_Te,Le.sum=xTe,Le.sumBy=wTe,Le.template=fL,Le.times=oTe,Le.toFinite=ec,Le.toInteger=Qn,Le.toLength=Zg,Le.toLower=hL,Le.toNumber=Bl,Le.toSafeInteger=B0,Le.toString=Li,Le.toUpper=dL,Le.trim=pL,Le.trimEnd=mL,Le.trimStart=gL,Le.truncate=vL,Le.unescape=yL,Le.uniqueId=sTe,Le.upperCase=Ch,Le.upperFirst=rv,Le.each=Pm,Le.eachRight=Sh,Le.first=j1,xL(Le,function(){var b={};return or(Le,function(A,N){pi.call(Le.prototype,N)||(b[N]=A)}),b}(),{chain:!1}),Le.VERSION=e,$s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(b){Le[b].placeholder=Le}),$s(["drop","take"],function(b,A){Xt.prototype[b]=function(N){N=N===t?1:nr(Qn(N),0);var te=this.__filtered__&&!A?new Xt(this):this.clone();return te.__filtered__?te.__takeCount__=Ko(N,te.__takeCount__):te.__views__.push({size:Ko(N,Ue),type:b+(te.__dir__<0?"Right":"")}),te},Xt.prototype[b+"Right"]=function(N){return this.reverse()[b](N).reverse()}}),$s(["filter","map","takeWhile"],function(b,A){var N=A+1,te=N==U||N==he;Xt.prototype[b]=function(Te){var je=this.clone();return je.__iteratees__.push({iteratee:wn(Te,3),type:N}),je.__filtered__=je.__filtered__||te,je}}),$s(["head","last"],function(b,A){var N="take"+(A?"Right":"");Xt.prototype[b]=function(){return this[N](1).value()[0]}}),$s(["initial","tail"],function(b,A){var N="drop"+(A?"":"Right");Xt.prototype[b]=function(){return this.__filtered__?new Xt(this):this[N](1)}}),Xt.prototype.compact=function(){return this.filter(Rc)},Xt.prototype.find=function(b){return this.filter(b).head()},Xt.prototype.findLast=function(b){return this.reverse().find(b)},Xt.prototype.invokeMap=Kn(function(b,A){return typeof b=="function"?new Xt(this):this.map(function(N){return nn(N,b,A)})}),Xt.prototype.reject=function(b){return this.filter(lr(wn(b)))},Xt.prototype.slice=function(b,A){b=Qn(b);var N=this;return N.__filtered__&&(b>0||A<0)?new Xt(N):(b<0?N=N.takeRight(-b):b&&(N=N.drop(b)),A!==t&&(A=Qn(A),N=A<0?N.dropRight(-A):N.take(A-b)),N)},Xt.prototype.takeRightWhile=function(b){return this.reverse().takeWhile(b).reverse()},Xt.prototype.toArray=function(){return this.take(Ue)},or(Xt.prototype,function(b,A){var N=/^(?:filter|find|map|reject)|While$/.test(A),te=/^(?:head|last)$/.test(A),Te=Le[te?"take"+(A=="last"?"Right":""):A],je=te||/^find/.test(A);Te&&(Le.prototype[A]=function(){var at=this.__wrapped__,gt=te?[1]:arguments,It=at instanceof Xt,ur=gt[0],cr=It||yn(at),vr=function(Ri){var Yi=Te.apply(Le,ll([Ri],gt));return te&&Gr?Yi[0]:Yi};cr&&N&&typeof ur=="function"&&ur.length!=1&&(It=cr=!1);var Gr=this.__chain__,_n=!!this.__actions__.length,Hn=je&&!Gr,xi=It&&!_n;if(!je&&cr){at=xi?at:new Xt(this);var Wn=b.apply(at,gt);return Wn.__actions__.push({func:Xo,args:[vr],thisArg:t}),new mr(Wn,Gr)}return Hn&&xi?b.apply(this,gt):(Wn=this.thru(vr),Hn?te?Wn.value()[0]:Wn.value():Wn)})}),$s(["pop","push","shift","sort","splice","unshift"],function(b){var A=ad[b],N=/^(?:push|sort|unshift)$/.test(b)?"tap":"thru",te=/^(?:pop|shift)$/.test(b);Le.prototype[b]=function(){var Te=arguments;if(te&&!this.__chain__){var je=this.value();return A.apply(yn(je)?je:[],Te)}return this[N](function(at){return A.apply(yn(at)?at:[],Te)})}}),or(Xt.prototype,function(b,A){var N=Le[A];if(N){var te=N.name+"";pi.call($u,te)||($u[te]=[]),$u[te].push({name:A,func:N})}}),$u[Fg(t,R).name]=[{name:"wrapper",func:t}],Xt.prototype.clone=Zo,Xt.prototype.reverse=va,Xt.prototype.value=tu,Le.prototype.at=Eo,Le.prototype.chain=WA,Le.prototype.commit=$A,Le.prototype.next=GA,Le.prototype.plant=ZA,Le.prototype.reverse=G1,Le.prototype.toJSON=Le.prototype.valueOf=Le.prototype.value=Dm,Le.prototype.first=Le.prototype.head,Ql&&(Le.prototype[Ql]=KA),Le},Pl=fl();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ei._=Pl,define(function(){return Pl})):Ws?((Ws.exports=Pl)._=Pl,mu._=Pl):ei._=Pl}).call(S1)});var EZt=ua(Tfe()),TZt=ua(Afe());var Ife={exports:{}};(function(t,e){(function(r){t.exports=r()})(function(r){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(G,q){var V=G[0],p=G[1],K=G[2],j=G[3];V+=(p&K|~p&j)+q[0]-680876936|0,V=(V<<7|V>>>25)+p|0,j+=(V&p|~V&K)+q[1]-389564586|0,j=(j<<12|j>>>20)+V|0,K+=(j&V|~j&p)+q[2]+606105819|0,K=(K<<17|K>>>15)+j|0,p+=(K&j|~K&V)+q[3]-1044525330|0,p=(p<<22|p>>>10)+K|0,V+=(p&K|~p&j)+q[4]-176418897|0,V=(V<<7|V>>>25)+p|0,j+=(V&p|~V&K)+q[5]+1200080426|0,j=(j<<12|j>>>20)+V|0,K+=(j&V|~j&p)+q[6]-1473231341|0,K=(K<<17|K>>>15)+j|0,p+=(K&j|~K&V)+q[7]-45705983|0,p=(p<<22|p>>>10)+K|0,V+=(p&K|~p&j)+q[8]+1770035416|0,V=(V<<7|V>>>25)+p|0,j+=(V&p|~V&K)+q[9]-1958414417|0,j=(j<<12|j>>>20)+V|0,K+=(j&V|~j&p)+q[10]-42063|0,K=(K<<17|K>>>15)+j|0,p+=(K&j|~K&V)+q[11]-1990404162|0,p=(p<<22|p>>>10)+K|0,V+=(p&K|~p&j)+q[12]+1804603682|0,V=(V<<7|V>>>25)+p|0,j+=(V&p|~V&K)+q[13]-40341101|0,j=(j<<12|j>>>20)+V|0,K+=(j&V|~j&p)+q[14]-1502002290|0,K=(K<<17|K>>>15)+j|0,p+=(K&j|~K&V)+q[15]+1236535329|0,p=(p<<22|p>>>10)+K|0,V+=(p&j|K&~j)+q[1]-165796510|0,V=(V<<5|V>>>27)+p|0,j+=(V&K|p&~K)+q[6]-1069501632|0,j=(j<<9|j>>>23)+V|0,K+=(j&p|V&~p)+q[11]+643717713|0,K=(K<<14|K>>>18)+j|0,p+=(K&V|j&~V)+q[0]-373897302|0,p=(p<<20|p>>>12)+K|0,V+=(p&j|K&~j)+q[5]-701558691|0,V=(V<<5|V>>>27)+p|0,j+=(V&K|p&~K)+q[10]+38016083|0,j=(j<<9|j>>>23)+V|0,K+=(j&p|V&~p)+q[15]-660478335|0,K=(K<<14|K>>>18)+j|0,p+=(K&V|j&~V)+q[4]-405537848|0,p=(p<<20|p>>>12)+K|0,V+=(p&j|K&~j)+q[9]+568446438|0,V=(V<<5|V>>>27)+p|0,j+=(V&K|p&~K)+q[14]-1019803690|0,j=(j<<9|j>>>23)+V|0,K+=(j&p|V&~p)+q[3]-187363961|0,K=(K<<14|K>>>18)+j|0,p+=(K&V|j&~V)+q[8]+1163531501|0,p=(p<<20|p>>>12)+K|0,V+=(p&j|K&~j)+q[13]-1444681467|0,V=(V<<5|V>>>27)+p|0,j+=(V&K|p&~K)+q[2]-51403784|0,j=(j<<9|j>>>23)+V|0,K+=(j&p|V&~p)+q[7]+1735328473|0,K=(K<<14|K>>>18)+j|0,p+=(K&V|j&~V)+q[12]-1926607734|0,p=(p<<20|p>>>12)+K|0,V+=(p^K^j)+q[5]-378558|0,V=(V<<4|V>>>28)+p|0,j+=(V^p^K)+q[8]-2022574463|0,j=(j<<11|j>>>21)+V|0,K+=(j^V^p)+q[11]+1839030562|0,K=(K<<16|K>>>16)+j|0,p+=(K^j^V)+q[14]-35309556|0,p=(p<<23|p>>>9)+K|0,V+=(p^K^j)+q[1]-1530992060|0,V=(V<<4|V>>>28)+p|0,j+=(V^p^K)+q[4]+1272893353|0,j=(j<<11|j>>>21)+V|0,K+=(j^V^p)+q[7]-155497632|0,K=(K<<16|K>>>16)+j|0,p+=(K^j^V)+q[10]-1094730640|0,p=(p<<23|p>>>9)+K|0,V+=(p^K^j)+q[13]+681279174|0,V=(V<<4|V>>>28)+p|0,j+=(V^p^K)+q[0]-358537222|0,j=(j<<11|j>>>21)+V|0,K+=(j^V^p)+q[3]-722521979|0,K=(K<<16|K>>>16)+j|0,p+=(K^j^V)+q[6]+76029189|0,p=(p<<23|p>>>9)+K|0,V+=(p^K^j)+q[9]-640364487|0,V=(V<<4|V>>>28)+p|0,j+=(V^p^K)+q[12]-421815835|0,j=(j<<11|j>>>21)+V|0,K+=(j^V^p)+q[15]+530742520|0,K=(K<<16|K>>>16)+j|0,p+=(K^j^V)+q[2]-995338651|0,p=(p<<23|p>>>9)+K|0,V+=(K^(p|~j))+q[0]-198630844|0,V=(V<<6|V>>>26)+p|0,j+=(p^(V|~K))+q[7]+1126891415|0,j=(j<<10|j>>>22)+V|0,K+=(V^(j|~p))+q[14]-1416354905|0,K=(K<<15|K>>>17)+j|0,p+=(j^(K|~V))+q[5]-57434055|0,p=(p<<21|p>>>11)+K|0,V+=(K^(p|~j))+q[12]+1700485571|0,V=(V<<6|V>>>26)+p|0,j+=(p^(V|~K))+q[3]-1894986606|0,j=(j<<10|j>>>22)+V|0,K+=(V^(j|~p))+q[10]-1051523|0,K=(K<<15|K>>>17)+j|0,p+=(j^(K|~V))+q[1]-2054922799|0,p=(p<<21|p>>>11)+K|0,V+=(K^(p|~j))+q[8]+1873313359|0,V=(V<<6|V>>>26)+p|0,j+=(p^(V|~K))+q[15]-30611744|0,j=(j<<10|j>>>22)+V|0,K+=(V^(j|~p))+q[6]-1560198380|0,K=(K<<15|K>>>17)+j|0,p+=(j^(K|~V))+q[13]+1309151649|0,p=(p<<21|p>>>11)+K|0,V+=(K^(p|~j))+q[4]-145523070|0,V=(V<<6|V>>>26)+p|0,j+=(p^(V|~K))+q[11]-1120210379|0,j=(j<<10|j>>>22)+V|0,K+=(V^(j|~p))+q[2]+718787259|0,K=(K<<15|K>>>17)+j|0,p+=(j^(K|~V))+q[9]-343485551|0,p=(p<<21|p>>>11)+K|0,G[0]=V+G[0]|0,G[1]=p+G[1]|0,G[2]=K+G[2]|0,G[3]=j+G[3]|0}function o(G){var q=[],V;for(V=0;V<64;V+=4)q[V>>2]=G.charCodeAt(V)+(G.charCodeAt(V+1)<<8)+(G.charCodeAt(V+2)<<16)+(G.charCodeAt(V+3)<<24);return q}function s(G){var q=[],V;for(V=0;V<64;V+=4)q[V>>2]=G[V]+(G[V+1]<<8)+(G[V+2]<<16)+(G[V+3]<<24);return q}function u(G){var q=G.length,V=[1732584193,-271733879,-1732584194,271733878],p,K,j,Q,ee,se;for(p=64;p<=q;p+=64)i(V,o(G.substring(p-64,p)));for(G=G.substring(p-64),K=G.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0;p<K;p+=1)j[p>>2]|=G.charCodeAt(p)<<(p%4<<3);if(j[p>>2]|=128<<(p%4<<3),p>55)for(i(V,j),p=0;p<16;p+=1)j[p]=0;return Q=q*8,Q=Q.toString(16).match(/(.*?)(.{0,8})$/),ee=parseInt(Q[2],16),se=parseInt(Q[1],16)||0,j[14]=ee,j[15]=se,i(V,j),V}function h(G){var q=G.length,V=[1732584193,-271733879,-1732584194,271733878],p,K,j,Q,ee,se;for(p=64;p<=q;p+=64)i(V,s(G.subarray(p-64,p)));for(G=p-64<q?G.subarray(p-64):new Uint8Array(0),K=G.length,j=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p=0;p<K;p+=1)j[p>>2]|=G[p]<<(p%4<<3);if(j[p>>2]|=128<<(p%4<<3),p>55)for(i(V,j),p=0;p<16;p+=1)j[p]=0;return Q=q*8,Q=Q.toString(16).match(/(.*?)(.{0,8})$/),ee=parseInt(Q[2],16),se=parseInt(Q[1],16)||0,j[14]=ee,j[15]=se,i(V,j),V}function y(G){var q="",V;for(V=0;V<4;V+=1)q+=n[G>>V*8+4&15]+n[G>>V*8&15];return q}function w(G){var q;for(q=0;q<G.length;q+=1)G[q]=y(G[q]);return G.join("")}w(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function G(q,V){return q=q|0||0,q<0?Math.max(q+V,0):Math.min(q,V)}ArrayBuffer.prototype.slice=function(q,V){var p=this.byteLength,K=G(q,p),j=p,Q,ee,se,me;return V!==r&&(j=G(V,p)),K>j?new ArrayBuffer(0):(Q=j-K,ee=new ArrayBuffer(Q),se=new Uint8Array(ee),me=new Uint8Array(this,K,Q),se.set(me),ee)}}();function T(G){return/[\u0080-\uFFFF]/.test(G)&&(G=unescape(encodeURIComponent(G))),G}function I(G,q){var V=G.length,p=new ArrayBuffer(V),K=new Uint8Array(p),j;for(j=0;j<V;j+=1)K[j]=G.charCodeAt(j);return q?K:p}function P(G){return String.fromCharCode.apply(null,new Uint8Array(G))}function L(G,q,V){var p=new Uint8Array(G.byteLength+q.byteLength);return p.set(new Uint8Array(G)),p.set(new Uint8Array(q),G.byteLength),V?p:p.buffer}function R(G){var q=[],V=G.length,p;for(p=0;p<V-1;p+=2)q.push(parseInt(G.substr(p,2),16));return String.fromCharCode.apply(String,q)}function W(){this.reset()}return W.prototype.append=function(G){return this.appendBinary(T(G)),this},W.prototype.appendBinary=function(G){this._buff+=G,this._length+=G.length;var q=this._buff.length,V;for(V=64;V<=q;V+=64)i(this._hash,o(this._buff.substring(V-64,V)));return this._buff=this._buff.substring(V-64),this},W.prototype.end=function(G){var q=this._buff,V=q.length,p,K=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],j;for(p=0;p<V;p+=1)K[p>>2]|=q.charCodeAt(p)<<(p%4<<3);return this._finish(K,V),j=w(this._hash),G&&(j=R(j)),this.reset(),j},W.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},W.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},W.prototype.setState=function(G){return this._buff=G.buff,this._length=G.length,this._hash=G.hash,this},W.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},W.prototype._finish=function(G,q){var V=q,p,K,j;if(G[V>>2]|=128<<(V%4<<3),V>55)for(i(this._hash,G),V=0;V<16;V+=1)G[V]=0;p=this._length*8,p=p.toString(16).match(/(.*?)(.{0,8})$/),K=parseInt(p[2],16),j=parseInt(p[1],16)||0,G[14]=K,G[15]=j,i(this._hash,G)},W.hash=function(G,q){return W.hashBinary(T(G),q)},W.hashBinary=function(G,q){var V=u(G),p=w(V);return q?R(p):p},W.ArrayBuffer=function(){this.reset()},W.ArrayBuffer.prototype.append=function(G){var q=L(this._buff.buffer,G,!0),V=q.length,p;for(this._length+=G.byteLength,p=64;p<=V;p+=64)i(this._hash,s(q.subarray(p-64,p)));return this._buff=p-64<V?new Uint8Array(q.buffer.slice(p-64)):new Uint8Array(0),this},W.ArrayBuffer.prototype.end=function(G){var q=this._buff,V=q.length,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],K,j;for(K=0;K<V;K+=1)p[K>>2]|=q[K]<<(K%4<<3);return this._finish(p,V),j=w(this._hash),G&&(j=R(j)),this.reset(),j},W.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},W.ArrayBuffer.prototype.getState=function(){var G=W.prototype.getState.call(this);return G.buff=P(G.buff),G},W.ArrayBuffer.prototype.setState=function(G){return G.buff=I(G.buff,!0),W.prototype.setState.call(this,G)},W.ArrayBuffer.prototype.destroy=W.prototype.destroy,W.ArrayBuffer.prototype._finish=W.prototype._finish,W.ArrayBuffer.hash=function(G,q){var V=h(new Uint8Array(G)),p=w(V);return q?R(p):p},W})})(Ife);var zst=Ife.exports,jst=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,xz=class t{static create(e,r){new t(e).create(r)}constructor(e){this.file=e,this.chunkSize=2097152,this.chunkCount=Math.ceil(this.file.size/this.chunkSize),this.chunkIndex=0}create(e){this.callback=e,this.md5Buffer=new zst.ArrayBuffer,this.fileReader=new FileReader,this.fileReader.addEventListener("load",r=>this.fileReaderDidLoad(r)),this.fileReader.addEventListener("error",r=>this.fileReaderDidError(r)),this.readNextChunk()}fileReaderDidLoad(e){if(this.md5Buffer.append(e.target.result),!this.readNextChunk()){let r=this.md5Buffer.end(!0),n=btoa(r);this.callback(null,n)}}fileReaderDidError(e){this.callback(`Error reading ${this.file.name}`)}readNextChunk(){if(this.chunkIndex<this.chunkCount||this.chunkIndex==0&&this.chunkCount==0){let e=this.chunkIndex*this.chunkSize,r=Math.min(e+this.chunkSize,this.file.size),n=jst.call(this.file,e,r);return this.fileReader.readAsArrayBuffer(n),this.chunkIndex++,!0}else return!1}};function Ust(t){let e=Dfe(document.head,`meta[name="${t}"]`);if(e)return e.getAttribute("content")}function Vst(t,e){typeof t=="string"&&(e=t,t=document);let r=t.querySelectorAll(e);return Pfe(r)}function Dfe(t,e){return typeof t=="string"&&(e=t,t=document),t.querySelector(e)}function Ofe(t,e,r={}){let{disabled:n}=t,{bubbles:i,cancelable:o,detail:s}=r,u=document.createEvent("Event");u.initEvent(e,i||!0,o||!0),u.detail=s||{};try{t.disabled=!1,t.dispatchEvent(u)}finally{t.disabled=n}return u}function Pfe(t){return Array.isArray(t)?t:Array.from?Array.from(t):[].slice.call(t)}var wz=class{constructor(e,r,n,i={}){this.file=e,this.attributes={filename:e.name,content_type:e.type||"application/octet-stream",byte_size:e.size,checksum:r},this.xhr=new XMLHttpRequest,this.xhr.open("POST",n,!0),this.xhr.responseType="json",this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("Accept","application/json"),this.xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(i).forEach(s=>{this.xhr.setRequestHeader(s,i[s])});let o=Ust("csrf-token");o!=null&&this.xhr.setRequestHeader("X-CSRF-Token",o),this.xhr.addEventListener("load",s=>this.requestDidLoad(s)),this.xhr.addEventListener("error",s=>this.requestDidError(s))}get status(){return this.xhr.status}get response(){let{responseType:e,response:r}=this.xhr;return e=="json"?r:JSON.parse(r)}create(e){this.callback=e,this.xhr.send(JSON.stringify({blob:this.attributes}))}requestDidLoad(e){if(this.status>=200&&this.status<300){let{response:r}=this,{direct_upload:n}=r;delete r.direct_upload,this.attributes=r,this.directUploadData=n,this.callback(null,this.toJSON())}else this.requestDidError(e)}requestDidError(e){this.callback(`Error creating Blob for "${this.file.name}". Status: ${this.status}`)}toJSON(){let e={};for(let r in this.attributes)e[r]=this.attributes[r];return e}},Sz=class{constructor(e){this.blob=e,this.file=e.file;let{url:r,headers:n}=e.directUploadData;this.xhr=new XMLHttpRequest,this.xhr.open("PUT",r,!0),this.xhr.responseType="text";for(let i in n)this.xhr.setRequestHeader(i,n[i]);this.xhr.addEventListener("load",i=>this.requestDidLoad(i)),this.xhr.addEventListener("error",i=>this.requestDidError(i))}create(e){this.callback=e,this.xhr.send(this.file.slice())}requestDidLoad(e){let{status:r,response:n}=this.xhr;r>=200&&r<300?this.callback(null,n):this.requestDidError(e)}requestDidError(e){this.callback(`Error storing "${this.file.name}". Status: ${this.xhr.status}`)}},Hst=0,Ez=class{constructor(e,r,n,i={}){this.id=++Hst,this.file=e,this.url=r,this.delegate=n,this.customHeaders=i}create(e){xz.create(this.file,(r,n)=>{if(r){e(r);return}let i=new wz(this.file,n,this.url,this.customHeaders);kfe(this.delegate,"directUploadWillCreateBlobWithXHR",i.xhr),i.create(o=>{if(o)e(o);else{let s=new Sz(i);kfe(this.delegate,"directUploadWillStoreFileWithXHR",s.xhr),s.create(u=>{u?e(u):e(null,i.toJSON())})}})})}};function kfe(t,e,...r){if(t&&typeof t[e]=="function")return t[e](...r)}var Tz=class{constructor(e,r){this.input=e,this.file=r,this.directUpload=new Ez(this.file,this.url,this),this.dispatch("initialize")}start(e){let r=document.createElement("input");r.type="hidden",r.name=this.input.name,this.input.insertAdjacentElement("beforebegin",r),this.dispatch("start"),this.directUpload.create((n,i)=>{n?(r.parentNode.removeChild(r),this.dispatchError(n)):r.value=i.signed_id,this.dispatch("end"),e(n)})}uploadRequestDidProgress(e){let r=e.loaded/e.total*100;r&&this.dispatch("progress",{progress:r})}get url(){return this.input.getAttribute("data-direct-upload-url")}dispatch(e,r={}){return r.file=this.file,r.id=this.directUpload.id,Ofe(this.input,`direct-upload:${e}`,{detail:r})}dispatchError(e){this.dispatch("error",{error:e}).defaultPrevented||alert(e)}directUploadWillCreateBlobWithXHR(e){this.dispatch("before-blob-request",{xhr:e})}directUploadWillStoreFileWithXHR(e){this.dispatch("before-storage-request",{xhr:e}),e.upload.addEventListener("progress",r=>this.uploadRequestDidProgress(r))}},Wst="input[type=file][data-direct-upload-url]:not([disabled])",Az=class{constructor(e){this.form=e,this.inputs=Vst(e,Wst).filter(r=>r.files.length)}start(e){let r=this.createDirectUploadControllers(),n=()=>{let i=r.shift();i?i.start(o=>{o?(e(o),this.dispatch("end")):n()}):(e(),this.dispatch("end"))};this.dispatch("start"),n()}createDirectUploadControllers(){let e=[];return this.inputs.forEach(r=>{Pfe(r.files).forEach(n=>{let i=new Tz(r,n);e.push(i)})}),e}dispatch(e,r={}){return Ofe(this.form,`direct-uploads:${e}`,{detail:r})}},_z="data-direct-uploads-processing",kz=new WeakMap,Cfe=!1;function Cz(){Cfe||(Cfe=!0,document.addEventListener("click",$st,!0),document.addEventListener("submit",Gst,!0),document.addEventListener("ajax:before",Kst))}function $st(t){let e=t.target.closest("button, input");e&&e.type==="submit"&&e.form&&kz.set(e.form,e)}function Gst(t){Mfe(t)}function Kst(t){t.target.tagName=="FORM"&&Mfe(t)}function Mfe(t){let e=t.target;if(e.hasAttribute(_z)){t.preventDefault();return}let r=new Az(e),{inputs:n}=r;n.length&&(t.preventDefault(),e.setAttribute(_z,""),n.forEach(Yst),r.start(i=>{e.removeAttribute(_z),i?n.forEach(Xst):Zst(e)}))}function Zst(t){let e=kz.get(t)||Dfe(t,"input[type=submit], button[type=submit]");if(e){let{disabled:r}=e;e.disabled=!1,e.focus(),e.click(),e.disabled=r}else e=document.createElement("input"),e.type="submit",e.style.display="none",t.appendChild(e),e.click(),t.removeChild(e);kz.delete(t)}function Yst(t){t.disabled=!0}function Xst(t){t.disabled=!1}function Jst(){window.ActiveStorage&&Cz()}setTimeout(Jst,1);var NEe=ua(Iz());var Rv={};k8(Rv,{FetchEnctype:()=>Ov,FetchMethod:()=>$f,FetchRequest:()=>Mv,FetchResponse:()=>rx,FrameElement:()=>jh,FrameLoadingStyle:()=>vb,FrameRenderer:()=>ix,PageRenderer:()=>ox,PageSnapshot:()=>zh,StreamActions:()=>d5,StreamElement:()=>wI,StreamSourceElement:()=>SI,cache:()=>ihe,clearCache:()=>uhe,config:()=>Sl,connectStreamSource:()=>ZS,disconnectStreamSource:()=>YS,fetch:()=>c5,fetchEnctypeFromString:()=>Qfe,fetchMethodFromString:()=>EI,isSafe:()=>TI,navigator:()=>ohe,registerAdapter:()=>ahe,renderStreamMessage:()=>lhe,session:()=>Is,setConfirmMethod:()=>fhe,setFormMode:()=>hhe,setProgressBarDelay:()=>che,start:()=>h5,visit:()=>she});(function(t){if(typeof t.requestSubmit=="function")return;t.requestSubmit=function(n){n?(e(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function e(n,i){n instanceof HTMLElement||r(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||r(TypeError,"The specified element is not a submit button"),n.form==i||r(DOMException,"The specified element is not owned by this form element","NotFoundError")}function r(n,i,o){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+i+".",o)}})(HTMLFormElement.prototype);var jfe=new WeakMap;function elt(t){let e=t instanceof Element?t:t instanceof Node?t.parentElement:null,r=e?e.closest("input, button"):null;return r?.type=="submit"?r:null}function tlt(t){let e=elt(t.target);e&&e.form&&jfe.set(e.form,e)}(function(){if("submitter"in Event.prototype)return;let t=window.Event.prototype;if("SubmitEvent"in window){let e=window.SubmitEvent.prototype;if(/Apple Computer/.test(navigator.vendor)&&!("submitter"in e))t=e;else return}addEventListener("click",tlt,!0),Object.defineProperty(t,"submitter",{get(){if(this.type=="submit"&&this.target instanceof HTMLFormElement)return jfe.get(this.target)}})})();var vb={eager:"eager",lazy:"lazy"},jh=class t extends HTMLElement{static delegateConstructor=void 0;loaded=Promise.resolve();static get observedAttributes(){return["disabled","loading","src"]}constructor(){super(),this.delegate=new t.delegateConstructor(this)}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(e){e=="loading"?this.delegate.loadingStyleChanged():e=="src"?this.delegate.sourceURLChanged():e=="disabled"&&this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(e){e?this.setAttribute("src",e):this.removeAttribute("src")}get refresh(){return this.getAttribute("refresh")}set refresh(e){e?this.setAttribute("refresh",e):this.removeAttribute("refresh")}get shouldReloadWithMorph(){return this.src&&this.refresh==="morph"}get loading(){return rlt(this.getAttribute("loading")||"")}set loading(e){e?this.setAttribute("loading",e):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(e){e?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){return this.ownerDocument?.documentElement?.hasAttribute("data-turbo-preview")}};function rlt(t){switch(t.toLowerCase()){case"lazy":return vb.lazy;default:return vb.eager}}var nlt={enabled:!0,progressBarDelay:500,unvisitableExtensions:new Set([".7z",".aac",".apk",".avi",".bmp",".bz2",".css",".csv",".deb",".dmg",".doc",".docx",".exe",".gif",".gz",".heic",".heif",".ico",".iso",".jpeg",".jpg",".js",".json",".m4a",".mkv",".mov",".mp3",".mp4",".mpeg",".mpg",".msi",".ogg",".ogv",".pdf",".pkg",".png",".ppt",".pptx",".rar",".rtf",".svg",".tar",".tif",".tiff",".txt",".wav",".webm",".webp",".wma",".wmv",".xls",".xlsx",".xml",".zip"])};function $S(t){if(t.getAttribute("data-turbo-eval")=="false")return t;{let e=document.createElement("script"),r=Gfe();return r&&(e.nonce=r),e.textContent=t.textContent,e.async=!1,ilt(e,t),e}}function ilt(t,e){for(let{name:r,value:n}of e.attributes)t.setAttribute(r,n)}function olt(t){let e=document.createElement("template");return e.innerHTML=t,e.content}function ps(t,{target:e,cancelable:r,detail:n}={}){let i=new CustomEvent(t,{cancelable:r,bubbles:!0,composed:!0,detail:n});return e&&e.isConnected?e.dispatchEvent(i):document.documentElement.dispatchEvent(i),i}function Lfe(t){t.preventDefault(),t.stopImmediatePropagation()}function WS(){return document.visibilityState==="hidden"?Vfe():Ufe()}function Ufe(){return new Promise(t=>requestAnimationFrame(()=>t()))}function Vfe(){return new Promise(t=>setTimeout(()=>t(),0))}function alt(){return Promise.resolve()}function Hfe(t=""){return new DOMParser().parseFromString(t,"text/html")}function Wfe(t,...e){let r=slt(t,e).replace(/^\n/,"").split(`
`),n=r[0].match(/^\s+/),i=n?n[0].length:0;return r.map(o=>o.slice(i)).join(`
`)}function slt(t,e){return t.reduce((r,n,i)=>{let o=e[i]==null?"":e[i];return r+n+o},"")}function Pv(){return Array.from({length:36}).map((t,e)=>e==8||e==13||e==18||e==23?"-":e==14?"4":e==19?(Math.floor(Math.random()*4)+8).toString(16):Math.floor(Math.random()*15).toString(16)).join("")}function hI(t,...e){for(let r of e.map(n=>n?.getAttribute(t)))if(typeof r=="string")return r;return null}function llt(t,...e){return e.some(r=>r&&r.hasAttribute(t))}function dI(...t){for(let e of t)e.localName=="turbo-frame"&&e.setAttribute("busy",""),e.setAttribute("aria-busy","true")}function pI(...t){for(let e of t)e.localName=="turbo-frame"&&e.removeAttribute("busy"),e.removeAttribute("aria-busy")}function ult(t,e=2e3){return new Promise(r=>{let n=()=>{t.removeEventListener("error",n),t.removeEventListener("load",n),r()};t.addEventListener("load",n,{once:!0}),t.addEventListener("error",n,{once:!0}),setTimeout(r,e)})}function $fe(t){switch(t){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function clt(t){return t=="advance"||t=="replace"||t=="restore"}function yb(...t){let e=hI("data-turbo-action",...t);return clt(e)?e:null}function s5(t){return document.querySelector(`meta[name="${t}"]`)}function mI(t){let e=s5(t);return e&&e.content}function Gfe(){let t=s5("csp-nonce");if(t){let{nonce:e,content:r}=t;return e==""?r:e}}function flt(t,e){let r=s5(t);return r||(r=document.createElement("meta"),r.setAttribute("name",t),document.head.appendChild(r)),r.setAttribute("content",e),r}function ex(t,e){if(t instanceof Element)return t.closest(e)||ex(t.assignedSlot||t.getRootNode()?.host,e)}function l5(t){return!!t&&t.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])")==null&&typeof t.focus=="function"}function Kfe(t){return Array.from(t.querySelectorAll("[autofocus]")).find(l5)}async function hlt(t,e){let r=e();t(),await Ufe();let n=e();return[r,n]}function Zfe(t){if(t==="_blank")return!1;if(t){for(let e of document.getElementsByName(t))if(e instanceof HTMLIFrameElement)return!1;return!0}else return!0}function Yfe(t){return ex(t,"a[href]:not([target^=_]):not([download])")}function Xfe(t){return Ul(t.getAttribute("href")||"")}function dlt(t,e){let r=null;return(...n)=>{let i=()=>t.apply(this,n);clearTimeout(r),r=setTimeout(i,e)}}var plt={"aria-disabled":{beforeSubmit:t=>{t.setAttribute("aria-disabled","true"),t.addEventListener("click",Lfe)},afterSubmit:t=>{t.removeAttribute("aria-disabled"),t.removeEventListener("click",Lfe)}},disabled:{beforeSubmit:t=>t.disabled=!0,afterSubmit:t=>t.disabled=!1}},Dz=class{#e=null;constructor(e){Object.assign(this,e)}get submitter(){return this.#e}set submitter(e){this.#e=plt[e]||e}},mlt=new Dz({mode:"on",submitter:"disabled"}),Sl={drive:nlt,forms:mlt};function Ul(t){return new URL(t.toString(),document.baseURI)}function bb(t){let e;if(t.hash)return t.hash.slice(1);if(e=t.href.match(/#(.*)$/))return e[1]}function u5(t,e){let r=e?.getAttribute("formaction")||t.getAttribute("action")||t.action;return Ul(r)}function glt(t){return(_lt(t).match(/\.[^.]*$/)||[])[0]||""}function vlt(t,e){let r=xlt(e);return t.href===Ul(r).href||t.href.startsWith(r)}function Dv(t,e){return vlt(t,e)&&!Sl.drive.unvisitableExtensions.has(glt(t))}function Oz(t){let e=bb(t);return e!=null?t.href.slice(0,-(e.length+1)):t.href}function cI(t){return Oz(t)}function ylt(t,e){return Ul(t).href==Ul(e).href}function blt(t){return t.pathname.split("/").slice(1)}function _lt(t){return blt(t).slice(-1)[0]}function xlt(t){return wlt(t.origin+t.pathname)}function wlt(t){return t.endsWith("/")?t:t+"/"}var rx=class{constructor(e){this.response=e}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return Ul(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(e){return this.response.headers.get(e)}},Pz=class extends Set{constructor(e){super(),this.maxSize=e}add(e){if(this.size>=this.maxSize){let n=this.values().next().value;this.delete(n)}super.add(e)}},Jfe=new Pz(20),Slt=window.fetch;function c5(t,e={}){let r=new Headers(e.headers||{}),n=Pv();return Jfe.add(n),r.append("X-Turbo-Request-Id",n),Slt(t,{...e,headers:r})}function EI(t){switch(t.toLowerCase()){case"get":return $f.get;case"post":return $f.post;case"put":return $f.put;case"patch":return $f.patch;case"delete":return $f.delete}}var $f={get:"get",post:"post",put:"put",patch:"patch",delete:"delete"};function Qfe(t){switch(t.toLowerCase()){case Ov.multipart:return Ov.multipart;case Ov.plain:return Ov.plain;default:return Ov.urlEncoded}}var Ov={urlEncoded:"application/x-www-form-urlencoded",multipart:"multipart/form-data",plain:"text/plain"},Mv=class{abortController=new AbortController;#e=e=>{};constructor(e,r,n,i=new URLSearchParams,o=null,s=Ov.urlEncoded){let[u,h]=Rfe(Ul(n),r,i,s);this.delegate=e,this.url=u,this.target=o,this.fetchOptions={credentials:"same-origin",redirect:"follow",method:r.toUpperCase(),headers:{...this.defaultHeaders},body:h,signal:this.abortSignal,referrer:this.delegate.referrer?.href},this.enctype=s}get method(){return this.fetchOptions.method}set method(e){let r=this.isSafe?this.url.searchParams:this.fetchOptions.body||new FormData,n=EI(e)||$f.get;this.url.search="";let[i,o]=Rfe(this.url,n,r,this.enctype);this.url=i,this.fetchOptions.body=o,this.fetchOptions.method=n.toUpperCase()}get headers(){return this.fetchOptions.headers}set headers(e){this.fetchOptions.headers=e}get body(){return this.isSafe?this.url.searchParams:this.fetchOptions.body}set body(e){this.fetchOptions.body=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){let{fetchOptions:e}=this;this.delegate.prepareRequest(this);let r=await this.#t(e);try{this.delegate.requestStarted(this),r.detail.fetchRequest?this.response=r.detail.fetchRequest.response:this.response=c5(this.url.href,e);let n=await this.response;return await this.receive(n)}catch(n){if(n.name!=="AbortError")throw this.#r(n)&&this.delegate.requestErrored(this,n),n}finally{this.delegate.requestFinished(this)}}async receive(e){let r=new rx(e);return ps("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:r},target:this.target}).defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,r):r.succeeded?this.delegate.requestSucceededWithResponse(this,r):this.delegate.requestFailedWithResponse(this,r),r}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isSafe(){return TI(this.method)}get abortSignal(){return this.abortController.signal}acceptResponseType(e){this.headers.Accept=[e,this.headers.Accept].join(", ")}async#t(e){let r=new Promise(i=>this.#e=i),n=ps("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:e,url:this.url,resume:this.#e},target:this.target});return this.url=n.detail.url,n.defaultPrevented&&await r,n}#r(e){return!ps("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:e}}).defaultPrevented}};function TI(t){return EI(t)==$f.get}function Rfe(t,e,r,n){let i=Array.from(r).length>0?new URLSearchParams(ehe(r)):t.searchParams;return TI(e)?[Elt(t,i),null]:n==Ov.urlEncoded?[t,i]:[t,r]}function ehe(t){let e=[];for(let[r,n]of t)n instanceof File||e.push([r,n]);return e}function Elt(t,e){let r=new URLSearchParams(ehe(e));return t.search=r.toString(),t}var Mz=class{started=!1;constructor(e,r){this.delegate=e,this.element=r,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}intersect=e=>{e.slice(-1)[0]?.isIntersecting&&this.delegate.elementAppearedInViewport(this.element)}},Lv=class{static contentType="text/vnd.turbo-stream.html";static wrap(e){return typeof e=="string"?new this(olt(e)):e}constructor(e){this.fragment=Tlt(e)}};function Tlt(t){for(let e of t.querySelectorAll("turbo-stream")){let r=document.importNode(e,!0);for(let n of r.templateElement.content.querySelectorAll("script"))n.replaceWith($S(n));e.replaceWith(r)}return t}var Alt=100,Lz=class{#e=null;#t=null;get(e){if(this.#t&&this.#t.url===e&&this.#t.expire>Date.now())return this.#t.request}setLater(e,r,n){this.clear(),this.#e=setTimeout(()=>{r.perform(),this.set(e,r,n),this.#e=null},Alt)}set(e,r,n){this.#t={url:e,request:r,expire:new Date(new Date().getTime()+n)}}clear(){this.#e&&clearTimeout(this.#e),this.#t=null}},klt=10*1e3,Q_=new Lz,J_={initialized:"initialized",requesting:"requesting",waiting:"waiting",receiving:"receiving",stopping:"stopping",stopped:"stopped"},gI=class t{state=J_.initialized;static confirmMethod(e){return Promise.resolve(confirm(e))}constructor(e,r,n,i=!1){let o=Mlt(r,n),s=Plt(Olt(r,n),o),u=Clt(r,n),h=Llt(r,n);this.delegate=e,this.formElement=r,this.submitter=n,this.fetchRequest=new Mv(this,o,s,u,r,h),this.mustRedirect=i}get method(){return this.fetchRequest.method}set method(e){this.fetchRequest.method=e}get action(){return this.fetchRequest.url.toString()}set action(e){this.fetchRequest.url=Ul(e)}get body(){return this.fetchRequest.body}get enctype(){return this.fetchRequest.enctype}get isSafe(){return this.fetchRequest.isSafe}get location(){return this.fetchRequest.url}async start(){let{initialized:e,requesting:r}=J_,n=hI("data-turbo-confirm",this.submitter,this.formElement);if(!(typeof n=="string"&&!await(typeof Sl.forms.confirm=="function"?Sl.forms.confirm:t.confirmMethod)(n,this.formElement,this.submitter))&&this.state==e)return this.state=r,this.fetchRequest.perform()}stop(){let{stopping:e,stopped:r}=J_;if(this.state!=e&&this.state!=r)return this.state=e,this.fetchRequest.cancel(),!0}prepareRequest(e){if(!e.isSafe){let r=Ilt(mI("csrf-param"))||mI("csrf-token");r&&(e.headers["X-CSRF-Token"]=r)}this.requestAcceptsTurboStreamResponse(e)&&e.acceptResponseType(Lv.contentType)}requestStarted(e){this.state=J_.waiting,this.submitter&&Sl.forms.submitter.beforeSubmit(this.submitter),this.setSubmitsWith(),dI(this.formElement),ps("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(e,r){Q_.clear(),this.result={success:r.succeeded,fetchResponse:r}}requestSucceededWithResponse(e,r){if(r.clientError||r.serverError){this.delegate.formSubmissionFailedWithResponse(this,r);return}if(Q_.clear(),this.requestMustRedirect(e)&&Dlt(r)){let n=new Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,n)}else this.state=J_.receiving,this.result={success:!0,fetchResponse:r},this.delegate.formSubmissionSucceededWithResponse(this,r)}requestFailedWithResponse(e,r){this.result={success:!1,fetchResponse:r},this.delegate.formSubmissionFailedWithResponse(this,r)}requestErrored(e,r){this.result={success:!1,error:r},this.delegate.formSubmissionErrored(this,r)}requestFinished(e){this.state=J_.stopped,this.submitter&&Sl.forms.submitter.afterSubmit(this.submitter),this.resetSubmitterText(),pI(this.formElement),ps("turbo:submit-end",{target:this.formElement,detail:{formSubmission:this,...this.result}}),this.delegate.formSubmissionFinished(this)}setSubmitsWith(){if(!(!this.submitter||!this.submitsWith)){if(this.submitter.matches("button"))this.originalSubmitText=this.submitter.innerHTML,this.submitter.innerHTML=this.submitsWith;else if(this.submitter.matches("input")){let e=this.submitter;this.originalSubmitText=e.value,e.value=this.submitsWith}}}resetSubmitterText(){if(!(!this.submitter||!this.originalSubmitText)){if(this.submitter.matches("button"))this.submitter.innerHTML=this.originalSubmitText;else if(this.submitter.matches("input")){let e=this.submitter;e.value=this.originalSubmitText}}}requestMustRedirect(e){return!e.isSafe&&this.mustRedirect}requestAcceptsTurboStreamResponse(e){return!e.isSafe||llt("data-turbo-stream",this.submitter,this.formElement)}get submitsWith(){return this.submitter?.getAttribute("data-turbo-submits-with")}};function Clt(t,e){let r=new FormData(t),n=e?.getAttribute("name"),i=e?.getAttribute("value");return n&&r.append(n,i||""),r}function Ilt(t){if(t!=null){let r=(document.cookie?document.cookie.split("; "):[]).find(n=>n.startsWith(t));if(r){let n=r.split("=").slice(1).join("=");return n?decodeURIComponent(n):void 0}}}function Dlt(t){return t.statusCode==200&&!t.redirected}function Olt(t,e){let r=typeof t.action=="string"?t.action:null;return e?.hasAttribute("formaction")?e.getAttribute("formaction")||"":t.getAttribute("action")||r||""}function Plt(t,e){let r=Ul(t);return TI(e)&&(r.search=""),r}function Mlt(t,e){let r=e?.getAttribute("formmethod")||t.getAttribute("method")||"";return EI(r.toLowerCase())||$f.get}function Llt(t,e){return Qfe(e?.getAttribute("formenctype")||t.enctype)}var nx=class{constructor(e){this.element=e}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(e){return this.getElementForAnchor(e)!=null}getElementForAnchor(e){return e?this.element.querySelector(`[id='${e}'], a[name='${e}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){return Kfe(this.element)}get permanentElements(){return rhe(this.element)}getPermanentElementById(e){return the(this.element,e)}getPermanentElementMapForSnapshot(e){let r={};for(let n of this.permanentElements){let{id:i}=n,o=e.getPermanentElementById(i);o&&(r[i]=[n,o])}return r}};function the(t,e){return t.querySelector(`#${e}[data-turbo-permanent]`)}function rhe(t){return t.querySelectorAll("[id][data-turbo-permanent]")}var GS=class{started=!1;constructor(e,r){this.delegate=e,this.eventTarget=r}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)};submitBubbled=e=>{if(!e.defaultPrevented){let r=e.target instanceof HTMLFormElement?e.target:void 0,n=e.submitter||void 0;r&&Rlt(r,n)&&Flt(r,n)&&this.delegate.willSubmitForm(r,n)&&(e.preventDefault(),e.stopImmediatePropagation(),this.delegate.formSubmitted(r,n))}}};function Rlt(t,e){return(e?.getAttribute("formmethod")||t.getAttribute("method"))!="dialog"}function Flt(t,e){let r=e?.getAttribute("formtarget")||t.getAttribute("target");return Zfe(r)}var vI=class{#e=e=>{};#t=e=>{};constructor(e,r){this.delegate=e,this.element=r}scrollToAnchor(e){let r=this.snapshot.getElementForAnchor(e);r?(this.scrollToElement(r),this.focusElement(r)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(e){this.scrollToAnchor(bb(e))}scrollToElement(e){e.scrollIntoView()}focusElement(e){e instanceof HTMLElement&&(e.hasAttribute("tabindex")?e.focus():(e.setAttribute("tabindex","-1"),e.focus(),e.removeAttribute("tabindex")))}scrollToPosition({x:e,y:r}){this.scrollRoot.scrollTo(e,r)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(e){let{isPreview:r,shouldRender:n,willRender:i,newSnapshot:o}=e,s=i;if(n)try{this.renderPromise=new Promise(w=>this.#e=w),this.renderer=e,await this.prepareToRenderSnapshot(e);let u=new Promise(w=>this.#t=w),h={resume:this.#t,render:this.renderer.renderElement,renderMethod:this.renderer.renderMethod};this.delegate.allowsImmediateRender(o,h)||await u,await this.renderSnapshot(e),this.delegate.viewRenderedSnapshot(o,r,this.renderer.renderMethod),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(e)}finally{delete this.renderer,this.#e(void 0),delete this.renderPromise}else s&&this.invalidate(e.reloadReason)}invalidate(e){this.delegate.viewInvalidated(e)}async prepareToRenderSnapshot(e){this.markAsPreview(e.isPreview),await e.prepareToRender()}markAsPreview(e){e?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}markVisitDirection(e){this.element.setAttribute("data-turbo-visit-direction",e)}unmarkVisitDirection(){this.element.removeAttribute("data-turbo-visit-direction")}async renderSnapshot(e){await e.render()}finishRenderingSnapshot(e){e.finishRendering()}},Rz=class extends vI{missing(){this.element.innerHTML='<strong class="turbo-frame-error">Content missing</strong>'}get snapshot(){return new nx(this.element)}},yI=class{constructor(e,r){this.delegate=e,this.element=r}start(){this.element.addEventListener("click",this.clickBubbled),document.addEventListener("turbo:click",this.linkClicked),document.addEventListener("turbo:before-visit",this.willVisit)}stop(){this.element.removeEventListener("click",this.clickBubbled),document.removeEventListener("turbo:click",this.linkClicked),document.removeEventListener("turbo:before-visit",this.willVisit)}clickBubbled=e=>{this.clickEventIsSignificant(e)?this.clickEvent=e:delete this.clickEvent};linkClicked=e=>{this.clickEvent&&this.clickEventIsSignificant(e)&&this.delegate.shouldInterceptLinkClick(e.target,e.detail.url,e.detail.originalEvent)&&(this.clickEvent.preventDefault(),e.preventDefault(),this.delegate.linkClickIntercepted(e.target,e.detail.url,e.detail.originalEvent)),delete this.clickEvent};willVisit=e=>{delete this.clickEvent};clickEventIsSignificant(e){let r=e.composed?e.target?.parentElement:e.target,n=Yfe(r)||r;return n instanceof Element&&n.closest("turbo-frame, html")==this.element}},bI=class{started=!1;constructor(e,r){this.delegate=e,this.eventTarget=r}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)};clickBubbled=e=>{if(e instanceof MouseEvent&&this.clickEventIsSignificant(e)){let r=e.composedPath&&e.composedPath()[0]||e.target,n=Yfe(r);if(n&&Zfe(n.target)){let i=Xfe(n);this.delegate.willFollowLinkToLocation(n,i,e)&&(e.preventDefault(),this.delegate.followedLinkToLocation(n,i))}}};clickEventIsSignificant(e){return!(e.target&&e.target.isContentEditable||e.defaultPrevented||e.which>1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)}},_I=class{constructor(e,r){this.delegate=e,this.linkInterceptor=new bI(this,r)}start(){this.linkInterceptor.start()}stop(){this.linkInterceptor.stop()}canPrefetchRequestToLocation(e,r){return!1}prefetchAndCacheRequestToLocation(e,r){}willFollowLinkToLocation(e,r,n){return this.delegate.willSubmitFormLinkToLocation(e,r,n)&&(e.hasAttribute("data-turbo-method")||e.hasAttribute("data-turbo-stream"))}followedLinkToLocation(e,r){let n=document.createElement("form"),i="hidden";for(let[T,I]of r.searchParams)n.append(Object.assign(document.createElement("input"),{type:i,name:T,value:I}));let o=Object.assign(r,{search:""});n.setAttribute("data-turbo","true"),n.setAttribute("action",o.href),n.setAttribute("hidden","");let s=e.getAttribute("data-turbo-method");s&&n.setAttribute("method",s);let u=e.getAttribute("data-turbo-frame");u&&n.setAttribute("data-turbo-frame",u);let h=yb(e);h&&n.setAttribute("data-turbo-action",h);let y=e.getAttribute("data-turbo-confirm");y&&n.setAttribute("data-turbo-confirm",y),e.hasAttribute("data-turbo-stream")&&n.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(e,r,n),document.body.appendChild(n),n.addEventListener("turbo:submit-end",()=>n.remove(),{once:!0}),requestAnimationFrame(()=>n.requestSubmit())}},xI=class{static async preservingPermanentElements(e,r,n){let i=new this(e,r);i.enter(),await n(),i.leave()}constructor(e,r){this.delegate=e,this.permanentElementMap=r}enter(){for(let e in this.permanentElementMap){let[r,n]=this.permanentElementMap[e];this.delegate.enteringBardo(r,n),this.replaceNewPermanentElementWithPlaceholder(n)}}leave(){for(let e in this.permanentElementMap){let[r]=this.permanentElementMap[e];this.replaceCurrentPermanentElementWithClone(r),this.replacePlaceholderWithPermanentElement(r),this.delegate.leavingBardo(r)}}replaceNewPermanentElementWithPlaceholder(e){let r=qlt(e);e.replaceWith(r)}replaceCurrentPermanentElementWithClone(e){let r=e.cloneNode(!0);e.replaceWith(r)}replacePlaceholderWithPermanentElement(e){this.getPlaceholderById(e.id)?.replaceWith(e)}getPlaceholderById(e){return this.placeholders.find(r=>r.content==e)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}};function qlt(t){let e=document.createElement("meta");return e.setAttribute("name","turbo-permanent-placeholder"),e.setAttribute("content",t.id),e}var KS=class{#e=null;static renderElement(e,r){}constructor(e,r,n,i=!0){this.currentSnapshot=e,this.newSnapshot=r,this.isPreview=n,this.willRender=i,this.renderElement=this.constructor.renderElement,this.promise=new Promise((o,s)=>this.resolvingFunctions={resolve:o,reject:s})}get shouldRender(){return!0}get shouldAutofocus(){return!0}get reloadReason(){}prepareToRender(){}render(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}async preservingPermanentElements(e){await xI.preservingPermanentElements(this,this.permanentElementMap,e)}focusFirstAutofocusableElement(){if(this.shouldAutofocus){let e=this.connectedSnapshot.firstAutofocusableElement;e&&e.focus()}}enteringBardo(e){this.#e||e.contains(this.currentSnapshot.activeElement)&&(this.#e=this.currentSnapshot.activeElement)}leavingBardo(e){e.contains(this.#e)&&this.#e instanceof HTMLElement&&(this.#e.focus(),this.#e=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}get renderMethod(){return"replace"}},ix=class extends KS{static renderElement(e,r){let n=document.createRange();n.selectNodeContents(e),n.deleteContents();let i=r,o=i.ownerDocument?.createRange();o&&(o.selectNodeContents(i),e.appendChild(o.extractContents()))}constructor(e,r,n,i,o,s=!0){super(r,n,i,o,s),this.delegate=e}get shouldRender(){return!0}async render(){await WS(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await WS(),this.focusFirstAutofocusableElement(),await WS(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let e=this.currentElement.firstElementChild,r=Nlt(this.currentElement.getAttribute("data-autoscroll-block"),"end"),n=Blt(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(e)return e.scrollIntoView({block:r,behavior:n}),!0}return!1}activateScriptElements(){for(let e of this.newScriptElements){let r=$S(e);e.replaceWith(r)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}};function Nlt(t,e){return t=="end"||t=="start"||t=="center"||t=="nearest"?t:e}function Blt(t,e){return t=="auto"||t=="smooth"?t:e}var zlt=function(){let t=()=>{},e={morphStyle:"outerHTML",callbacks:{beforeNodeAdded:t,afterNodeAdded:t,beforeNodeMorphed:t,afterNodeMorphed:t,beforeNodeRemoved:t,afterNodeRemoved:t,beforeAttributeUpdated:t},head:{style:"merge",shouldPreserve:I=>I.getAttribute("im-preserve")==="true",shouldReAppend:I=>I.getAttribute("im-re-append")==="true",shouldRemove:t,afterHeadMorphed:t},restoreFocus:!0};function r(I,P,L={}){I=w(I);let R=T(P),W=y(I,R,L),G=i(W,()=>u(W,I,R,q=>q.morphStyle==="innerHTML"?(o(q,I,R),Array.from(I.childNodes)):n(q,I,R)));return W.pantry.remove(),G}function n(I,P,L){let R=T(P),W=Array.from(R.childNodes),G=W.indexOf(P),q=W.length-(G+1);return o(I,R,L,P,P.nextSibling),W=Array.from(R.childNodes),W.slice(G,W.length-q)}function i(I,P){if(!I.config.restoreFocus)return P();let L=document.activeElement;if(!(L instanceof HTMLInputElement||L instanceof HTMLTextAreaElement))return P();let{id:R,selectionStart:W,selectionEnd:G}=L,q=P();return R&&R!==document.activeElement?.id&&(L=I.target.querySelector(`#${R}`),L?.focus()),L&&!L.selectionEnd&&G&&L.setSelectionRange(W,G),q}let o=function(){function I(p,K,j,Q=null,ee=null){K instanceof HTMLTemplateElement&&j instanceof HTMLTemplateElement&&(K=K.content,j=j.content),Q||=K.firstChild;for(let se of j.childNodes){if(Q&&Q!=ee){let ve=L(p,se,Q,ee);if(ve){ve!==Q&&W(p,Q,ve),s(ve,se,p),Q=ve.nextSibling;continue}}if(se instanceof Element&&p.persistentIds.has(se.id)){let ve=G(K,se.id,Q,p);s(ve,se,p),Q=ve.nextSibling;continue}let me=P(K,se,Q,p);me&&(Q=me.nextSibling)}for(;Q&&Q!=ee;){let se=Q;Q=Q.nextSibling,R(p,se)}}function P(p,K,j,Q){if(Q.callbacks.beforeNodeAdded(K)===!1)return null;if(Q.idMap.has(K)){let ee=document.createElement(K.tagName);return p.insertBefore(ee,j),s(ee,K,Q),Q.callbacks.afterNodeAdded(ee),ee}else{let ee=document.importNode(K,!0);return p.insertBefore(ee,j),Q.callbacks.afterNodeAdded(ee),ee}}let L=function(){function p(Q,ee,se,me){let ve=null,U=ee.nextSibling,$=0,he=se;for(;he&&he!=me;){if(j(he,ee)){if(K(Q,he,ee))return he;ve===null&&(Q.idMap.has(he)||(ve=he))}if(ve===null&&U&&j(he,U)&&($++,U=U.nextSibling,$>=2&&(ve=void 0)),he.contains(document.activeElement))break;he=he.nextSibling}return ve||null}function K(Q,ee,se){let me=Q.idMap.get(ee),ve=Q.idMap.get(se);if(!ve||!me)return!1;for(let U of me)if(ve.has(U))return!0;return!1}function j(Q,ee){let se=Q,me=ee;return se.nodeType===me.nodeType&&se.tagName===me.tagName&&(!se.id||se.id===me.id)}return p}();function R(p,K){if(p.idMap.has(K))V(p.pantry,K,null);else{if(p.callbacks.beforeNodeRemoved(K)===!1)return;K.parentNode?.removeChild(K),p.callbacks.afterNodeRemoved(K)}}function W(p,K,j){let Q=K;for(;Q&&Q!==j;){let ee=Q;Q=Q.nextSibling,R(p,ee)}return Q}function G(p,K,j,Q){let ee=Q.target.querySelector(`#${K}`)||Q.pantry.querySelector(`#${K}`);return q(ee,Q),V(p,ee,j),ee}function q(p,K){let j=p.id;for(;p=p.parentNode;){let Q=K.idMap.get(p);Q&&(Q.delete(j),Q.size||K.idMap.delete(p))}}function V(p,K,j){if(p.moveBefore)try{p.moveBefore(K,j)}catch{p.insertBefore(K,j)}else p.insertBefore(K,j)}return I}(),s=function(){function I(q,V,p){return p.ignoreActive&&q===document.activeElement?null:(p.callbacks.beforeNodeMorphed(q,V)===!1||(q instanceof HTMLHeadElement&&p.head.ignore||(q instanceof HTMLHeadElement&&p.head.style!=="morph"?h(q,V,p):(P(q,V,p),G(q,p)||o(p,q,V))),p.callbacks.afterNodeMorphed(q,V)),q)}function P(q,V,p){let K=V.nodeType;if(K===1){let j=q,Q=V,ee=j.attributes,se=Q.attributes;for(let me of se)W(me.name,j,"update",p)||j.getAttribute(me.name)!==me.value&&j.setAttribute(me.name,me.value);for(let me=ee.length-1;0<=me;me--){let ve=ee[me];if(ve&&!Q.hasAttribute(ve.name)){if(W(ve.name,j,"remove",p))continue;j.removeAttribute(ve.name)}}G(j,p)||L(j,Q,p)}(K===8||K===3)&&q.nodeValue!==V.nodeValue&&(q.nodeValue=V.nodeValue)}function L(q,V,p){if(q instanceof HTMLInputElement&&V instanceof HTMLInputElement&&V.type!=="file"){let K=V.value,j=q.value;R(q,V,"checked",p),R(q,V,"disabled",p),V.hasAttribute("value")?j!==K&&(W("value",q,"update",p)||(q.setAttribute("value",K),q.value=K)):W("value",q,"remove",p)||(q.value="",q.removeAttribute("value"))}else if(q instanceof HTMLOptionElement&&V instanceof HTMLOptionElement)R(q,V,"selected",p);else if(q instanceof HTMLTextAreaElement&&V instanceof HTMLTextAreaElement){let K=V.value,j=q.value;if(W("value",q,"update",p))return;K!==j&&(q.value=K),q.firstChild&&q.firstChild.nodeValue!==K&&(q.firstChild.nodeValue=K)}}function R(q,V,p,K){let j=V[p],Q=q[p];if(j!==Q){let ee=W(p,q,"update",K);ee||(q[p]=V[p]),j?ee||q.setAttribute(p,""):W(p,q,"remove",K)||q.removeAttribute(p)}}function W(q,V,p,K){return q==="value"&&K.ignoreActiveValue&&V===document.activeElement?!0:K.callbacks.beforeAttributeUpdated(q,V,p)===!1}function G(q,V){return!!V.ignoreActiveValue&&q===document.activeElement&&q!==document.body}return I}();function u(I,P,L,R){if(I.head.block){let W=P.querySelector("head"),G=L.querySelector("head");if(W&&G){let q=h(W,G,I);return Promise.all(q).then(()=>{let V=Object.assign(I,{head:{block:!1,ignore:!0}});return R(V)})}}return R(I)}function h(I,P,L){let R=[],W=[],G=[],q=[],V=new Map;for(let K of P.children)V.set(K.outerHTML,K);for(let K of I.children){let j=V.has(K.outerHTML),Q=L.head.shouldReAppend(K),ee=L.head.shouldPreserve(K);j||ee?Q?W.push(K):(V.delete(K.outerHTML),G.push(K)):L.head.style==="append"?Q&&(W.push(K),q.push(K)):L.head.shouldRemove(K)!==!1&&W.push(K)}q.push(...V.values());let p=[];for(let K of q){let j=document.createRange().createContextualFragment(K.outerHTML).firstChild;if(L.callbacks.beforeNodeAdded(j)!==!1){if("href"in j&&j.href||"src"in j&&j.src){let Q,ee=new Promise(function(se){Q=se});j.addEventListener("load",function(){Q()}),p.push(ee)}I.appendChild(j),L.callbacks.afterNodeAdded(j),R.push(j)}}for(let K of W)L.callbacks.beforeNodeRemoved(K)!==!1&&(I.removeChild(K),L.callbacks.afterNodeRemoved(K));return L.head.afterHeadMorphed(I,{added:R,kept:G,removed:W}),p}let y=function(){function I(V,p,K){let{persistentIds:j,idMap:Q}=G(V,p),ee=P(K),se=ee.morphStyle||"outerHTML";if(!["innerHTML","outerHTML"].includes(se))throw`Do not understand how to morph style ${se}`;return{target:V,newContent:p,config:ee,morphStyle:se,ignoreActive:ee.ignoreActive,ignoreActiveValue:ee.ignoreActiveValue,restoreFocus:ee.restoreFocus,idMap:Q,persistentIds:j,pantry:L(),callbacks:ee.callbacks,head:ee.head}}function P(V){let p=Object.assign({},e);return Object.assign(p,V),p.callbacks=Object.assign({},e.callbacks,V.callbacks),p.head=Object.assign({},e.head,V.head),p}function L(){let V=document.createElement("div");return V.hidden=!0,document.body.insertAdjacentElement("afterend",V),V}function R(V){let p=Array.from(V.querySelectorAll("[id]"));return V.id&&p.push(V),p}function W(V,p,K,j){for(let Q of j)if(p.has(Q.id)){let ee=Q;for(;ee;){let se=V.get(ee);if(se==null&&(se=new Set,V.set(ee,se)),se.add(Q.id),ee===K)break;ee=ee.parentElement}}}function G(V,p){let K=R(V),j=R(p),Q=q(K,j),ee=new Map;W(ee,Q,V,K);let se=p.__idiomorphRoot||p;return W(ee,Q,se,j),{persistentIds:Q,idMap:ee}}function q(V,p){let K=new Set,j=new Map;for(let{id:ee,tagName:se}of V)j.has(ee)?K.add(ee):j.set(ee,se);let Q=new Set;for(let{id:ee,tagName:se}of p)Q.has(ee)?K.add(ee):j.get(ee)===se&&Q.add(ee);for(let ee of K)Q.delete(ee);return Q}return I}(),{normalizeElement:w,normalizeParent:T}=function(){let I=new WeakSet;function P(G){return G instanceof Document?G.documentElement:G}function L(G){if(G==null)return document.createElement("div");if(typeof G=="string")return L(W(G));if(I.has(G))return G;if(G instanceof Node){if(G.parentNode)return R(G);{let q=document.createElement("div");return q.append(G),q}}else{let q=document.createElement("div");for(let V of[...G])q.append(V);return q}}function R(G){return{childNodes:[G],querySelectorAll:q=>{let V=G.querySelectorAll(q);return G.matches(q)?[G,...V]:V},insertBefore:(q,V)=>G.parentNode.insertBefore(q,V),moveBefore:(q,V)=>G.parentNode.moveBefore(q,V),get __idiomorphRoot(){return G}}}function W(G){let q=new DOMParser,V=G.replace(/<svg(\s[^>]*>|>)([\s\S]*?)<\/svg>/gim,"");if(V.match(/<\/html>/)||V.match(/<\/head>/)||V.match(/<\/body>/)){let p=q.parseFromString(G,"text/html");if(V.match(/<\/html>/))return I.add(p),p;{let K=p.firstChild;return K&&I.add(K),K}}else{let K=q.parseFromString("<body><template>"+G+"</template></body>","text/html").body.querySelector("template").content;return I.add(K),K}}return{normalizeElement:P,normalizeParent:L}}();return{morph:r,defaults:e}}();function f5(t,e,{callbacks:r,...n}={}){zlt.morph(t,e,{...n,callbacks:new Fz(r)})}function nhe(t,e){f5(t,e.childNodes,{morphStyle:"innerHTML"})}var Fz=class{#e;constructor({beforeNodeMorphed:e}={}){this.#e=e||(()=>!0)}beforeNodeAdded=e=>!(e.id&&e.hasAttribute("data-turbo-permanent")&&document.getElementById(e.id));beforeNodeMorphed=(e,r)=>{if(e instanceof Element)return!e.hasAttribute("data-turbo-permanent")&&this.#e(e,r)?!ps("turbo:before-morph-element",{cancelable:!0,target:e,detail:{currentElement:e,newElement:r}}).defaultPrevented:!1};beforeAttributeUpdated=(e,r,n)=>!ps("turbo:before-morph-attribute",{cancelable:!0,target:r,detail:{attributeName:e,mutationType:n}}).defaultPrevented;beforeNodeRemoved=e=>this.beforeNodeMorphed(e);afterNodeMorphed=(e,r)=>{e instanceof Element&&ps("turbo:morph-element",{target:e,detail:{currentElement:e,newElement:r}})}},qz=class extends ix{static renderElement(e,r){ps("turbo:before-frame-morph",{target:e,detail:{currentElement:e,newElement:r}}),nhe(e,r)}async preservingPermanentElements(e){return await e()}},Nz=class t{static animationDuration=300;static get defaultCSS(){return Wfe`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${t.animationDuration}ms ease-out,
          opacity ${t.animationDuration/2}ms ${t.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}hiding=!1;value=0;visible=!1;constructor(){this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(e){this.value=e,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(e){this.progressElement.style.opacity="0",setTimeout(e,t.animationDuration*1.5)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,t.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}trickle=()=>{this.setValue(this.value+Math.random()/100)};refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+this.value*90}%`})}createStylesheetElement(){let e=document.createElement("style");e.type="text/css",e.textContent=t.defaultCSS;let r=Gfe();return r&&(e.nonce=r),e}createProgressElement(){let e=document.createElement("div");return e.className="turbo-progress-bar",e}},Bz=class extends nx{detailsByOuterHTML=this.children.filter(e=>!Hlt(e)).map(e=>Glt(e)).reduce((e,r)=>{let{outerHTML:n}=r,i=n in e?e[n]:{type:jlt(r),tracked:Ult(r),elements:[]};return{...e,[n]:{...i,elements:[...i.elements,r]}}},{});get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(e=>this.detailsByOuterHTML[e].tracked).join("")}getScriptElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("script",e)}getStylesheetElementsNotInSnapshot(e){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",e)}getElementsMatchingTypeNotInSnapshot(e,r){return Object.keys(this.detailsByOuterHTML).filter(n=>!(n in r.detailsByOuterHTML)).map(n=>this.detailsByOuterHTML[n]).filter(({type:n})=>n==e).map(({elements:[n]})=>n)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((e,r)=>{let{type:n,tracked:i,elements:o}=this.detailsByOuterHTML[r];return n==null&&!i?[...e,...o]:o.length>1?[...e,...o.slice(1)]:e},[])}getMetaValue(e){let r=this.findMetaElementByName(e);return r?r.getAttribute("content"):null}findMetaElementByName(e){return Object.keys(this.detailsByOuterHTML).reduce((r,n)=>{let{elements:[i]}=this.detailsByOuterHTML[n];return $lt(i,e)?i:r},void 0|void 0)}};function jlt(t){if(Vlt(t))return"script";if(Wlt(t))return"stylesheet"}function Ult(t){return t.getAttribute("data-turbo-track")=="reload"}function Vlt(t){return t.localName=="script"}function Hlt(t){return t.localName=="noscript"}function Wlt(t){let e=t.localName;return e=="style"||e=="link"&&t.getAttribute("rel")=="stylesheet"}function $lt(t,e){return t.localName=="meta"&&t.getAttribute("name")==e}function Glt(t){return t.hasAttribute("nonce")&&t.setAttribute("nonce",""),t}var zh=class t extends nx{static fromHTMLString(e=""){return this.fromDocument(Hfe(e))}static fromElement(e){return this.fromDocument(e.ownerDocument)}static fromDocument({documentElement:e,body:r,head:n}){return new this(e,r,new Bz(n))}constructor(e,r,n){super(r),this.documentElement=e,this.headSnapshot=n}clone(){let e=this.element.cloneNode(!0),r=this.element.querySelectorAll("select"),n=e.querySelectorAll("select");for(let[i,o]of r.entries()){let s=n[i];for(let u of s.selectedOptions)u.selected=!1;for(let u of o.selectedOptions)s.options[u.index].selected=!0}for(let i of e.querySelectorAll('input[type="password"]'))i.value="";return new t(this.documentElement,e,this.headSnapshot)}get lang(){return this.documentElement.getAttribute("lang")}get headElement(){return this.headSnapshot.element}get rootLocation(){let e=this.getSetting("root")??"/";return Ul(e)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return this.cacheControlValue!="no-preview"}get isCacheable(){return this.cacheControlValue!="no-cache"}get isVisitable(){return this.getSetting("visit-control")!="reload"}get prefersViewTransitions(){return this.headSnapshot.getMetaValue("view-transition")==="same-origin"}get shouldMorphPage(){return this.getSetting("refresh-method")==="morph"}get shouldPreserveScrollPosition(){return this.getSetting("refresh-scroll")==="preserve"}getSetting(e){return this.headSnapshot.getMetaValue(`turbo-${e}`)}},zz=class{#e=!1;#t=Promise.resolve();renderChange(e,r){return e&&this.viewTransitionsAvailable&&!this.#e?(this.#e=!0,this.#t=this.#t.then(async()=>{await document.startViewTransition(r).finished})):this.#t=this.#t.then(r),this.#t}get viewTransitionsAvailable(){return document.startViewTransition}},Klt={action:"advance",historyChanged:!1,visitCachedSnapshot:()=>{},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1},fI={visitStart:"visitStart",requestStart:"requestStart",requestEnd:"requestEnd",visitEnd:"visitEnd"},eg={initialized:"initialized",started:"started",canceled:"canceled",failed:"failed",completed:"completed"},tx={networkFailure:0,timeoutFailure:-1,contentTypeMismatch:-2},Zlt={advance:"forward",restore:"back",replace:"none"},jz=class{identifier=Pv();timingMetrics={};followedRedirect=!1;historyChanged=!1;scrolled=!1;shouldCacheSnapshot=!0;acceptsStreamResponse=!1;snapshotCached=!1;state=eg.initialized;viewTransitioner=new zz;constructor(e,r,n,i={}){this.delegate=e,this.location=r,this.restorationIdentifier=n||Pv();let{action:o,historyChanged:s,referrer:u,snapshot:h,snapshotHTML:y,response:w,visitCachedSnapshot:T,willRender:I,updateHistory:P,shouldCacheSnapshot:L,acceptsStreamResponse:R,direction:W}={...Klt,...i};this.action=o,this.historyChanged=s,this.referrer=u,this.snapshot=h,this.snapshotHTML=y,this.response=w,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.isPageRefresh=this.view.isPageRefresh(this),this.visitCachedSnapshot=T,this.willRender=I,this.updateHistory=P,this.scrolled=!I,this.shouldCacheSnapshot=L,this.acceptsStreamResponse=R,this.direction=W||Zlt[o]}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==eg.initialized&&(this.recordTimingMetric(fI.visitStart),this.state=eg.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==eg.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=eg.canceled)}complete(){this.state==eg.started&&(this.recordTimingMetric(fI.visitEnd),this.adapter.visitCompleted(this),this.state=eg.completed,this.followRedirect(),this.followedRedirect||this.delegate.visitCompleted(this))}fail(){this.state==eg.started&&(this.state=eg.failed,this.adapter.visitFailed(this),this.delegate.visitCompleted(this))}changeHistory(){if(!this.historyChanged&&this.updateHistory){let e=this.location.href===this.referrer?.href?"replace":this.action,r=$fe(e);this.history.update(r,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new Mv(this,$f.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(fI.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(e=this.response){if(this.response=e,e){let{statusCode:r}=e;Ffe(r)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,r)}}finishRequest(){this.recordTimingMetric(fI.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:e,responseHTML:r}=this.response;this.render(async()=>{if(this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,Ffe(e)&&r!=null){let n=zh.fromHTMLString(r);await this.renderPageSnapshot(n,!1),this.adapter.visitRendered(this),this.complete()}else await this.view.renderError(zh.fromHTMLString(r),this),this.adapter.visitRendered(this),this.fail()})}}getCachedSnapshot(){let e=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(e&&(!bb(this.location)||e.hasAnchor(bb(this.location)))&&(this.action=="restore"||e.isPreviewable))return e}getPreloadedSnapshot(){if(this.snapshotHTML)return zh.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return this.getCachedSnapshot()!=null}loadCachedSnapshot(){let e=this.getCachedSnapshot();if(e){let r=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage||this.isPageRefresh?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.renderPageSnapshot(e,r),this.adapter.visitRendered(this),r||this.complete())})}}followRedirect(){this.redirectedToLocation&&!this.followedRedirect&&this.response?.redirected&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response,shouldCacheSnapshot:!1,willRender:!1}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.changeHistory(),this.adapter.visitRendered(this)})}prepareRequest(e){this.acceptsStreamResponse&&e.acceptResponseType(Lv.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(e,r){}async requestSucceededWithResponse(e,r){let n=await r.responseHTML,{redirected:i,statusCode:o}=r;n==null?this.recordResponse({statusCode:tx.contentTypeMismatch,redirected:i}):(this.redirectedToLocation=r.redirected?r.location:void 0,this.recordResponse({statusCode:o,responseHTML:n,redirected:i}))}async requestFailedWithResponse(e,r){let n=await r.responseHTML,{redirected:i,statusCode:o}=r;n==null?this.recordResponse({statusCode:tx.contentTypeMismatch,redirected:i}):this.recordResponse({statusCode:o,responseHTML:n,redirected:i})}requestErrored(e,r){this.recordResponse({statusCode:tx.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){!this.scrolled&&!this.view.forceReloaded&&!this.view.shouldPreserveScrollPosition(this)&&(this.action=="restore"?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:e}=this.restorationData;if(e)return this.view.scrollToPosition(e),!0}scrollToAnchor(){let e=bb(this.location);if(e!=null)return this.view.scrollToAnchor(e),!0}recordTimingMetric(e){this.timingMetrics[e]=new Date().getTime()}getTimingMetrics(){return{...this.timingMetrics}}hasPreloadedResponse(){return typeof this.response=="object"}shouldIssueRequest(){return this.isSamePage?!1:this.action=="restore"?!this.hasCachedSnapshot():this.willRender}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(e=>e&&this.visitCachedSnapshot(e)),this.snapshotCached=!0)}async render(e){this.cancelRender(),await new Promise(r=>{this.frame=document.visibilityState==="hidden"?setTimeout(()=>r(),0):requestAnimationFrame(()=>r())}),await e(),delete this.frame}async renderPageSnapshot(e,r){await this.viewTransitioner.renderChange(this.view.shouldTransitionTo(e),async()=>{await this.view.renderPage(e,r,this.willRender,this),this.performScroll()})}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}};function Ffe(t){return t>=200&&t<300}var Uz=class{progressBar=new Nz;constructor(e){this.session=e}visitProposedToLocation(e,r){Dv(e,this.navigator.rootLocation)?this.navigator.startVisit(e,r?.restorationIdentifier||Pv(),r):window.location.href=e.toString()}visitStarted(e){this.location=e.location,e.loadCachedSnapshot(),e.issueRequest(),e.goToSamePageAnchor()}visitRequestStarted(e){this.progressBar.setValue(0),e.hasCachedSnapshot()||e.action!="restore"?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(e){e.loadResponse()}visitRequestFailedWithStatusCode(e,r){switch(r){case tx.networkFailure:case tx.timeoutFailure:case tx.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:r}});default:return e.loadResponse()}}visitRequestFinished(e){}visitCompleted(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}pageInvalidated(e){this.reload(e)}visitFailed(e){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitRendered(e){}linkPrefetchingIsEnabledForLocation(e){return!0}formSubmissionStarted(e){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(e){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),this.visitProgressBarTimeout!=null&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){this.formProgressBarTimeout==null&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),this.formProgressBarTimeout!=null&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}showProgressBar=()=>{this.progressBar.show()};reload(e){ps("turbo:reload",{detail:e}),window.location.href=this.location?.toString()||window.location.href}get navigator(){return this.session.navigator}},Vz=class{selector="[data-turbo-temporary]";deprecatedSelector="[data-turbo-cache=false]";started=!1;start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeTemporaryElements,!1))}removeTemporaryElements=e=>{for(let r of this.temporaryElements)r.remove()};get temporaryElements(){return[...document.querySelectorAll(this.selector),...this.temporaryElementsWithDeprecation]}get temporaryElementsWithDeprecation(){let e=document.querySelectorAll(this.deprecatedSelector);return e.length&&console.warn(`The ${this.deprecatedSelector} selector is deprecated and will be removed in a future version. Use ${this.selector} instead.`),[...e]}},Hz=class{constructor(e,r){this.session=e,this.element=r,this.linkInterceptor=new yI(this,r),this.formSubmitObserver=new GS(this,r)}start(){this.linkInterceptor.start(),this.formSubmitObserver.start()}stop(){this.linkInterceptor.stop(),this.formSubmitObserver.stop()}shouldInterceptLinkClick(e,r,n){return this.#t(e)}linkClickIntercepted(e,r,n){let i=this.#r(e);i&&i.delegate.linkClickIntercepted(e,r,n)}willSubmitForm(e,r){return e.closest("turbo-frame")==null&&this.#e(e,r)&&this.#t(e,r)}formSubmitted(e,r){let n=this.#r(e,r);n&&n.delegate.formSubmitted(e,r)}#e(e,r){let n=u5(e,r),i=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),o=Ul(i?.content??"/");return this.#t(e,r)&&Dv(n,o)}#t(e,r){if(e instanceof HTMLFormElement?this.session.submissionIsNavigatable(e,r):this.session.elementIsNavigatable(e)){let i=this.#r(e,r);return i?i!=e.closest("turbo-frame"):!1}else return!1}#r(e,r){let n=r?.getAttribute("data-turbo-frame")||e.getAttribute("data-turbo-frame");if(n&&n!="_top"){let i=this.element.querySelector(`#${n}:not([disabled])`);if(i instanceof jh)return i}}},Wz=class{location;restorationIdentifier=Pv();restorationData={};started=!1;pageLoaded=!1;currentIndex=0;constructor(e){this.delegate=e}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.currentIndex=history.state?.turbo?.restorationIndex||0,this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(e,r){this.update(history.pushState,e,r)}replace(e,r){this.update(history.replaceState,e,r)}update(e,r,n=Pv()){e===history.pushState&&++this.currentIndex;let i={turbo:{restorationIdentifier:n,restorationIndex:this.currentIndex}};e.call(history,i,"",r.href),this.location=r,this.restorationIdentifier=n}getRestorationDataForIdentifier(e){return this.restorationData[e]||{}}updateRestorationData(e){let{restorationIdentifier:r}=this,n=this.restorationData[r];this.restorationData[r]={...n,...e}}assumeControlOfScrollRestoration(){this.previousScrollRestoration||(this.previousScrollRestoration=history.scrollRestoration??"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}onPopState=e=>{if(this.shouldHandlePopState()){let{turbo:r}=e.state||{};if(r){this.location=new URL(window.location.href);let{restorationIdentifier:n,restorationIndex:i}=r;this.restorationIdentifier=n;let o=i>this.currentIndex?"forward":"back";this.delegate.historyPoppedToLocationWithRestorationIdentifierAndDirection(this.location,n,o),this.currentIndex=i}}};onPageLoad=async e=>{await alt(),this.pageLoaded=!0};shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||document.readyState=="complete"}},$z=class{started=!1;#e=null;constructor(e,r){this.delegate=e,this.eventTarget=r}start(){this.started||(this.eventTarget.readyState==="loading"?this.eventTarget.addEventListener("DOMContentLoaded",this.#t,{once:!0}):this.#t())}stop(){this.started&&(this.eventTarget.removeEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("mouseleave",this.#o,{capture:!0,passive:!0}),this.eventTarget.removeEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!1)}#t=()=>{this.eventTarget.addEventListener("mouseenter",this.#r,{capture:!0,passive:!0}),this.eventTarget.addEventListener("mouseleave",this.#o,{capture:!0,passive:!0}),this.eventTarget.addEventListener("turbo:before-fetch-request",this.#i,!0),this.started=!0};#r=e=>{if(mI("turbo-prefetch")==="false")return;let r=e.target;if(r.matches&&r.matches("a[href]:not([target^=_]):not([download])")&&this.#l(r)){let i=r,o=Xfe(i);if(this.delegate.canPrefetchRequestToLocation(i,o)){this.#e=i;let s=new Mv(this,$f.get,o,new URLSearchParams,r);Q_.setLater(o.toString(),s,this.#n)}}};#o=e=>{e.target===this.#e&&this.#a()};#a=()=>{Q_.clear(),this.#e=null};#i=e=>{if(e.target.tagName!=="FORM"&&e.detail.fetchOptions.method==="GET"){let r=Q_.get(e.detail.url.toString());r&&(e.detail.fetchRequest=r),Q_.clear()}};prepareRequest(e){let r=e.target;e.headers["X-Sec-Purpose"]="prefetch";let n=r.closest("turbo-frame"),i=r.getAttribute("data-turbo-frame")||n?.getAttribute("target")||n?.id;i&&i!=="_top"&&(e.headers["Turbo-Frame"]=i)}requestSucceededWithResponse(){}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,r){}requestFailedWithResponse(e,r){}get#n(){return Number(mI("turbo-prefetch-cache-time"))||klt}#l(e){return!(!e.getAttribute("href")||Ylt(e)||Xlt(e)||Jlt(e)||Qlt(e)||tut(e))}},Ylt=t=>t.origin!==document.location.origin||!["http:","https:"].includes(t.protocol)||t.hasAttribute("target"),Xlt=t=>t.pathname+t.search===document.location.pathname+document.location.search||t.href.startsWith("#"),Jlt=t=>{if(t.getAttribute("data-turbo-prefetch")==="false"||t.getAttribute("data-turbo")==="false")return!0;let e=ex(t,"[data-turbo-prefetch]");return!!(e&&e.getAttribute("data-turbo-prefetch")==="false")},Qlt=t=>{let e=t.getAttribute("data-turbo-method");return!!(e&&e.toLowerCase()!=="get"||eut(t)||t.hasAttribute("data-turbo-confirm")||t.hasAttribute("data-turbo-stream"))},eut=t=>t.hasAttribute("data-remote")||t.hasAttribute("data-behavior")||t.hasAttribute("data-confirm")||t.hasAttribute("data-method"),tut=t=>ps("turbo:before-prefetch",{target:t,cancelable:!0}).defaultPrevented,Gz=class{constructor(e){this.delegate=e}proposeVisit(e,r={}){this.delegate.allowsVisitingLocationWithAction(e,r.action)&&this.delegate.visitProposedToLocation(e,r)}startVisit(e,r,n={}){this.stop(),this.currentVisit=new jz(this,Ul(e),r,{referrer:this.location,...n}),this.currentVisit.start()}submitForm(e,r){this.stop(),this.formSubmission=new gI(this,e,r,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get rootLocation(){return this.view.snapshot.rootLocation}get history(){return this.delegate.history}formSubmissionStarted(e){typeof this.adapter.formSubmissionStarted=="function"&&this.adapter.formSubmissionStarted(e)}async formSubmissionSucceededWithResponse(e,r){if(e==this.formSubmission){let n=await r.responseHTML;if(n){let i=e.isSafe;i||this.view.clearSnapshotCache();let{statusCode:o,redirected:s}=r,h={action:this.#e(e,r),shouldCacheSnapshot:i,response:{statusCode:o,responseHTML:n,redirected:s}};this.proposeVisit(r.location,h)}}}async formSubmissionFailedWithResponse(e,r){let n=await r.responseHTML;if(n){let i=zh.fromHTMLString(n);r.serverError?await this.view.renderError(i,this.currentVisit):await this.view.renderPage(i,!1,!0,this.currentVisit),i.shouldPreserveScrollPosition||this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(e,r){console.error(r)}formSubmissionFinished(e){typeof this.adapter.formSubmissionFinished=="function"&&this.adapter.formSubmissionFinished(e)}linkPrefetchingIsEnabledForLocation(e){return typeof this.adapter.linkPrefetchingIsEnabledForLocation=="function"?this.adapter.linkPrefetchingIsEnabledForLocation(e):!0}visitStarted(e){this.delegate.visitStarted(e)}visitCompleted(e){this.delegate.visitCompleted(e),delete this.currentVisit}locationWithActionIsSamePage(e,r){let n=bb(e),i=bb(this.view.lastRenderedLocation),o=r==="restore"&&typeof n>"u";return r!=="replace"&&Oz(e)===Oz(this.view.lastRenderedLocation)&&(o||n!=null&&n!==i)}visitScrolledToSamePageLocation(e,r){this.delegate.visitScrolledToSamePageLocation(e,r)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}#e(e,r){let{submitter:n,formElement:i}=e;return yb(n,i)||this.#t(r)}#t(e){return e.redirected&&e.location.href===this.location?.href?"replace":"advance"}},gb={initial:0,loading:1,interactive:2,complete:3},Kz=class{stage=gb.initial;started=!1;constructor(e){this.delegate=e}start(){this.started||(this.stage==gb.initial&&(this.stage=gb.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}interpretReadyState=()=>{let{readyState:e}=this;e=="interactive"?this.pageIsInteractive():e=="complete"&&this.pageIsComplete()};pageIsInteractive(){this.stage==gb.loading&&(this.stage=gb.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==gb.interactive&&(this.stage=gb.complete,this.delegate.pageLoaded())}pageWillUnload=()=>{this.delegate.pageWillUnload()};get readyState(){return document.readyState}},Zz=class{started=!1;constructor(e){this.delegate=e}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})};updatePosition(e){this.delegate.scrollPositionChanged(e)}},Yz=class{render({fragment:e}){xI.preservingPermanentElements(this,rut(e),()=>{nut(e,()=>{iut(()=>{document.documentElement.appendChild(e)})})})}enteringBardo(e,r){r.replaceWith(e.cloneNode(!0))}leavingBardo(){}};function rut(t){let e=rhe(document.documentElement),r={};for(let n of e){let{id:i}=n;for(let o of t.querySelectorAll("turbo-stream")){let s=the(o.templateElement.content,i);s&&(r[i]=[n,s])}}return r}async function nut(t,e){let r=`turbo-stream-autofocus-${Pv()}`,n=t.querySelectorAll("turbo-stream"),i=out(n),o=null;if(i&&(i.id?o=i.id:o=r,i.id=o),e(),await WS(),(document.activeElement==null||document.activeElement==document.body)&&o){let u=document.getElementById(o);l5(u)&&u.focus(),u&&u.id==r&&u.removeAttribute("id")}}async function iut(t){let[e,r]=await hlt(t,()=>document.activeElement),n=e&&e.id;if(n){let i=document.getElementById(n);l5(i)&&i!=r&&i.focus()}}function out(t){for(let e of t){let r=Kfe(e.templateElement.content);if(r)return r}return null}var Xz=class{sources=new Set;#e=!1;constructor(e){this.delegate=e}start(){this.#e||(this.#e=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.#e&&(this.#e=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(e){this.streamSourceIsConnected(e)||(this.sources.add(e),e.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(e){this.streamSourceIsConnected(e)&&(this.sources.delete(e),e.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(e){return this.sources.has(e)}inspectFetchResponse=e=>{let r=aut(e);r&&sut(r)&&(e.preventDefault(),this.receiveMessageResponse(r))};receiveMessageEvent=e=>{this.#e&&typeof e.data=="string"&&this.receiveMessageHTML(e.data)};async receiveMessageResponse(e){let r=await e.responseHTML;r&&this.receiveMessageHTML(r)}receiveMessageHTML(e){this.delegate.receivedMessageFromStream(Lv.wrap(e))}};function aut(t){let e=t.detail?.fetchResponse;if(e instanceof rx)return e}function sut(t){return(t.contentType??"").startsWith(Lv.contentType)}var Jz=class extends KS{static renderElement(e,r){let{documentElement:n,body:i}=document;n.replaceChild(r,i)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:e,head:r}=document;e.replaceChild(this.newHead,r),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let e of this.scriptElements){let r=e.parentNode;if(r){let n=$S(e);r.replaceChild(n,e)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}},ox=class extends KS{static renderElement(e,r){document.body&&r instanceof HTMLBodyElement?document.body.replaceWith(r):document.documentElement.appendChild(r)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){if(!this.newSnapshot.isVisitable)return{reason:"turbo_visit_control_is_reload"};if(!this.trackedElementsAreIdentical)return{reason:"tracked_element_mismatch"}}async prepareToRender(){this.#e(),await this.mergeHead()}async render(){this.willRender&&await this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}#e(){let{documentElement:e}=this.currentSnapshot,{lang:r}=this.newSnapshot;r?e.setAttribute("lang",r):e.removeAttribute("lang")}async mergeHead(){let e=this.mergeProvisionalElements(),r=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),await e,await r,this.willRender&&this.removeUnusedDynamicStylesheetElements()}async replaceBody(){await this.preservingPermanentElements(async()=>{this.activateNewBody(),await this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let e=[];for(let r of this.newHeadStylesheetElements)e.push(ult(r)),document.head.appendChild(r);await Promise.all(e)}copyNewHeadScriptElements(){for(let e of this.newHeadScriptElements)document.head.appendChild($S(e))}removeUnusedDynamicStylesheetElements(){for(let e of this.unusedDynamicStylesheetElements)document.head.removeChild(e)}async mergeProvisionalElements(){let e=[...this.newHeadProvisionalElements];for(let r of this.currentHeadProvisionalElements)this.isCurrentElementInElementList(r,e)||document.head.removeChild(r);for(let r of e)document.head.appendChild(r)}isCurrentElementInElementList(e,r){for(let[n,i]of r.entries()){if(e.tagName=="TITLE"){if(i.tagName!="TITLE")continue;if(e.innerHTML==i.innerHTML)return r.splice(n,1),!0}if(i.isEqualNode(e))return r.splice(n,1),!0}return!1}removeCurrentHeadProvisionalElements(){for(let e of this.currentHeadProvisionalElements)document.head.removeChild(e)}copyNewHeadProvisionalElements(){for(let e of this.newHeadProvisionalElements)document.head.appendChild(e)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let e of this.newBodyScriptElements){let r=$S(e);e.replaceWith(r)}}async assignNewBody(){await this.renderElement(this.currentElement,this.newElement)}get unusedDynamicStylesheetElements(){return this.oldHeadStylesheetElements.filter(e=>e.getAttribute("data-turbo-track")==="dynamic")}get oldHeadStylesheetElements(){return this.currentHeadSnapshot.getStylesheetElementsNotInSnapshot(this.newHeadSnapshot)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}},Qz=class extends ox{static renderElement(e,r){f5(e,r,{callbacks:{beforeNodeMorphed:n=>!qfe(n)}});for(let n of e.querySelectorAll("turbo-frame"))qfe(n)&&n.reload();ps("turbo:morph",{detail:{currentElement:e,newElement:r}})}async preservingPermanentElements(e){return await e()}get renderMethod(){return"morph"}get shouldAutofocus(){return!1}};function qfe(t){return t instanceof jh&&t.src&&t.refresh==="morph"&&!t.closest("[data-turbo-permanent]")}var e5=class{keys=[];snapshots={};constructor(e){this.size=e}has(e){return cI(e)in this.snapshots}get(e){if(this.has(e)){let r=this.read(e);return this.touch(e),r}}put(e,r){return this.write(e,r),this.touch(e),r}clear(){this.snapshots={}}read(e){return this.snapshots[cI(e)]}write(e,r){this.snapshots[cI(e)]=r}touch(e){let r=cI(e),n=this.keys.indexOf(r);n>-1&&this.keys.splice(n,1),this.keys.unshift(r),this.trim()}trim(){for(let e of this.keys.splice(this.size))delete this.snapshots[e]}},t5=class extends vI{snapshotCache=new e5(10);lastRenderedLocation=new URL(location.href);forceReloaded=!1;shouldTransitionTo(e){return this.snapshot.prefersViewTransitions&&e.prefersViewTransitions}renderPage(e,r=!1,n=!0,i){let s=this.isPageRefresh(i)&&this.snapshot.shouldMorphPage?Qz:ox,u=new s(this.snapshot,e,r,n);return u.shouldRender?i?.changeHistory():this.forceReloaded=!0,this.render(u)}renderError(e,r){r?.changeHistory();let n=new Jz(this.snapshot,e,!1);return this.render(n)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(e=this.snapshot){if(e.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:r}=this;await Vfe();let n=e.clone();return this.snapshotCache.put(r,n),n}}getCachedSnapshotForLocation(e){return this.snapshotCache.get(e)}isPageRefresh(e){return!e||this.lastRenderedLocation.pathname===e.location.pathname&&e.action==="replace"}shouldPreserveScrollPosition(e){return this.isPageRefresh(e)&&this.snapshot.shouldPreserveScrollPosition}get snapshot(){return zh.fromElement(this.element)}},r5=class{selector="a[data-turbo-preload]";constructor(e,r){this.delegate=e,this.snapshotCache=r}start(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this.#e):this.preloadOnLoadLinksForView(document.body)}stop(){document.removeEventListener("DOMContentLoaded",this.#e)}preloadOnLoadLinksForView(e){for(let r of e.querySelectorAll(this.selector))this.delegate.shouldPreloadLink(r)&&this.preloadURL(r)}async preloadURL(e){let r=new URL(e.href);if(this.snapshotCache.has(r))return;await new Mv(this,$f.get,r,new URLSearchParams,e).perform()}prepareRequest(e){e.headers["X-Sec-Purpose"]="prefetch"}async requestSucceededWithResponse(e,r){try{let n=await r.responseHTML,i=zh.fromHTMLString(n);this.snapshotCache.put(e.url,i)}catch{}}requestStarted(e){}requestErrored(e){}requestFinished(e){}requestPreventedHandlingResponse(e,r){}requestFailedWithResponse(e,r){}#e=()=>{this.preloadOnLoadLinksForView(document.body)}},n5=class{constructor(e){this.session=e}clear(){this.session.clearCache()}resetCacheControl(){this.#e("")}exemptPageFromCache(){this.#e("no-cache")}exemptPageFromPreview(){this.#e("no-preview")}#e(e){flt("turbo-cache-control",e)}},i5=class{navigator=new Gz(this);history=new Wz(this);view=new t5(this,document.documentElement);adapter=new Uz(this);pageObserver=new Kz(this);cacheObserver=new Vz;linkPrefetchObserver=new $z(this,document);linkClickObserver=new bI(this,window);formSubmitObserver=new GS(this,document);scrollObserver=new Zz(this);streamObserver=new Xz(this);formLinkClickObserver=new _I(this,document.documentElement);frameRedirector=new Hz(this,document.documentElement);streamMessageRenderer=new Yz;cache=new n5(this);enabled=!0;started=!1;#e=150;constructor(e){this.recentRequests=e,this.preloader=new r5(this,this.view.snapshotCache),this.debouncedRefresh=this.refresh,this.pageRefreshDebouncePeriod=this.pageRefreshDebouncePeriod}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.linkPrefetchObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.linkPrefetchObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.preloader.stop(),this.started=!1)}registerAdapter(e){this.adapter=e}visit(e,r={}){let n=r.frame?document.getElementById(r.frame):null;if(n instanceof jh){let i=r.action||yb(n);n.delegate.proposeVisitIfNavigatedWithAction(n,i),n.src=e.toString()}else this.navigator.proposeVisit(Ul(e),r)}refresh(e,r){let n=r&&this.recentRequests.has(r),i=e===document.baseURI;!n&&!this.navigator.currentVisit&&i&&this.visit(e,{action:"replace",shouldCacheSnapshot:!1})}connectStreamSource(e){this.streamObserver.connectStreamSource(e)}disconnectStreamSource(e){this.streamObserver.disconnectStreamSource(e)}renderStreamMessage(e){this.streamMessageRenderer.render(Lv.wrap(e))}clearCache(){this.view.clearSnapshotCache()}setProgressBarDelay(e){console.warn("Please replace `session.setProgressBarDelay(delay)` with `session.progressBarDelay = delay`. The function is deprecated and will be removed in a future version of Turbo.`"),this.progressBarDelay=e}set progressBarDelay(e){Sl.drive.progressBarDelay=e}get progressBarDelay(){return Sl.drive.progressBarDelay}set drive(e){Sl.drive.enabled=e}get drive(){return Sl.drive.enabled}set formMode(e){Sl.forms.mode=e}get formMode(){return Sl.forms.mode}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}get pageRefreshDebouncePeriod(){return this.#e}set pageRefreshDebouncePeriod(e){this.refresh=dlt(this.debouncedRefresh.bind(this),e),this.#e=e}shouldPreloadLink(e){let r=e.hasAttribute("data-turbo-method"),n=e.hasAttribute("data-turbo-stream"),i=e.getAttribute("data-turbo-frame"),o=i=="_top"?null:document.getElementById(i)||ex(e,"turbo-frame:not([disabled])");if(r||n||o instanceof jh)return!1;{let s=new URL(e.href);return this.elementIsNavigatable(e)&&Dv(s,this.snapshot.rootLocation)}}historyPoppedToLocationWithRestorationIdentifierAndDirection(e,r,n){this.enabled?this.navigator.startVisit(e,r,{action:"restore",historyChanged:!0,direction:n}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(e){this.history.updateRestorationData({scrollPosition:e})}willSubmitFormLinkToLocation(e,r){return this.elementIsNavigatable(e)&&Dv(r,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}canPrefetchRequestToLocation(e,r){return this.elementIsNavigatable(e)&&Dv(r,this.snapshot.rootLocation)&&this.navigator.linkPrefetchingIsEnabledForLocation(r)}willFollowLinkToLocation(e,r,n){return this.elementIsNavigatable(e)&&Dv(r,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(e,r,n)}followedLinkToLocation(e,r){let n=this.getActionForLink(e),i=e.hasAttribute("data-turbo-stream");this.visit(r.href,{action:n,acceptsStreamResponse:i})}allowsVisitingLocationWithAction(e,r){return this.locationWithActionIsSamePage(e,r)||this.applicationAllowsVisitingLocation(e)}visitProposedToLocation(e,r){Nfe(e),this.adapter.visitProposedToLocation(e,r)}visitStarted(e){e.acceptsStreamResponse||(dI(document.documentElement),this.view.markVisitDirection(e.direction)),Nfe(e.location),e.silent||this.notifyApplicationAfterVisitingLocation(e.location,e.action)}visitCompleted(e){this.view.unmarkVisitDirection(),pI(document.documentElement),this.notifyApplicationAfterPageLoad(e.getTimingMetrics())}locationWithActionIsSamePage(e,r){return this.navigator.locationWithActionIsSamePage(e,r)}visitScrolledToSamePageLocation(e,r){this.notifyApplicationAfterVisitingSamePageLocation(e,r)}willSubmitForm(e,r){let n=u5(e,r);return this.submissionIsNavigatable(e,r)&&Dv(Ul(n),this.snapshot.rootLocation)}formSubmitted(e,r){this.navigator.submitForm(e,r)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(e){this.renderStreamMessage(e)}viewWillCacheSnapshot(){this.navigator.currentVisit?.silent||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:e},r){let n=this.notifyApplicationBeforeRender(e,r),{defaultPrevented:i,detail:{render:o}}=n;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(e,r,n){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender(n)}preloadOnLoadLinksForView(e){this.preloader.preloadOnLoadLinksForView(e)}viewInvalidated(e){this.adapter.pageInvalidated(e)}frameLoaded(e){this.notifyApplicationAfterFrameLoad(e)}frameRendered(e,r){this.notifyApplicationAfterFrameRender(e,r)}applicationAllowsFollowingLinkToLocation(e,r,n){return!this.notifyApplicationAfterClickingLinkToLocation(e,r,n).defaultPrevented}applicationAllowsVisitingLocation(e){return!this.notifyApplicationBeforeVisitingLocation(e).defaultPrevented}notifyApplicationAfterClickingLinkToLocation(e,r,n){return ps("turbo:click",{target:e,detail:{url:r.href,originalEvent:n},cancelable:!0})}notifyApplicationBeforeVisitingLocation(e){return ps("turbo:before-visit",{detail:{url:e.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(e,r){return ps("turbo:visit",{detail:{url:e.href,action:r}})}notifyApplicationBeforeCachingSnapshot(){return ps("turbo:before-cache")}notifyApplicationBeforeRender(e,r){return ps("turbo:before-render",{detail:{newBody:e,...r},cancelable:!0})}notifyApplicationAfterRender(e){return ps("turbo:render",{detail:{renderMethod:e}})}notifyApplicationAfterPageLoad(e={}){return ps("turbo:load",{detail:{url:this.location.href,timing:e}})}notifyApplicationAfterVisitingSamePageLocation(e,r){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:e.toString(),newURL:r.toString()}))}notifyApplicationAfterFrameLoad(e){return ps("turbo:frame-load",{target:e})}notifyApplicationAfterFrameRender(e,r){return ps("turbo:frame-render",{detail:{fetchResponse:e},target:r,cancelable:!0})}submissionIsNavigatable(e,r){if(Sl.forms.mode=="off")return!1;{let n=r?this.elementIsNavigatable(r):!0;return Sl.forms.mode=="optin"?n&&e.closest('[data-turbo="true"]')!=null:n&&this.elementIsNavigatable(e)}}elementIsNavigatable(e){let r=ex(e,"[data-turbo]"),n=ex(e,"turbo-frame");return Sl.drive.enabled||n?r?r.getAttribute("data-turbo")!="false":!0:r?r.getAttribute("data-turbo")=="true":!1}getActionForLink(e){return yb(e)||"advance"}get snapshot(){return this.view.snapshot}};function Nfe(t){Object.defineProperties(t,lut)}var lut={absoluteURL:{get(){return this.toString()}}},Is=new i5(Jfe),{cache:ihe,navigator:ohe}=Is;function h5(){Is.start()}function ahe(t){Is.registerAdapter(t)}function she(t,e){Is.visit(t,e)}function ZS(t){Is.connectStreamSource(t)}function YS(t){Is.disconnectStreamSource(t)}function lhe(t){Is.renderStreamMessage(t)}function uhe(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Is.clearCache()}function che(t){console.warn("Please replace `Turbo.setProgressBarDelay(delay)` with `Turbo.config.drive.progressBarDelay = delay`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Sl.drive.progressBarDelay=t}function fhe(t){console.warn("Please replace `Turbo.setConfirmMethod(confirmMethod)` with `Turbo.config.forms.confirm = confirmMethod`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Sl.forms.confirm=t}function hhe(t){console.warn("Please replace `Turbo.setFormMode(mode)` with `Turbo.config.forms.mode = mode`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Sl.forms.mode=t}var uut=Object.freeze({__proto__:null,navigator:ohe,session:Is,cache:ihe,PageRenderer:ox,PageSnapshot:zh,FrameRenderer:ix,fetch:c5,config:Sl,start:h5,registerAdapter:ahe,visit:she,connectStreamSource:ZS,disconnectStreamSource:YS,renderStreamMessage:lhe,clearCache:uhe,setProgressBarDelay:che,setConfirmMethod:fhe,setFormMode:hhe}),o5=class extends Error{},a5=class{fetchResponseLoaded=e=>Promise.resolve();#e=null;#t=()=>{};#r=!1;#o=!1;#a=new Set;#i=!1;action=null;constructor(e){this.element=e,this.view=new Rz(this,this.element),this.appearanceObserver=new Mz(this,this.element),this.formLinkClickObserver=new _I(this,this.element),this.linkInterceptor=new yI(this,this.element),this.restorationIdentifier=Pv(),this.formSubmitObserver=new GS(this,this.element)}connect(){this.#r||(this.#r=!0,this.loadingStyle==vb.lazy?this.appearanceObserver.start():this.#n(),this.formLinkClickObserver.start(),this.linkInterceptor.start(),this.formSubmitObserver.start())}disconnect(){this.#r&&(this.#r=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkInterceptor.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==vb.eager&&this.#n()}sourceURLChanged(){this.#y("src")||(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==vb.eager||this.#o)&&this.#n())}sourceURLReloaded(){let{refresh:e,src:r}=this.element;return this.#i=r&&e==="morph",this.element.removeAttribute("complete"),this.element.src=null,this.element.src=r,this.element.loaded}loadingStyleChanged(){this.loadingStyle==vb.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.#n())}async#n(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.#f(Ul(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.#o=!0)}async loadResponse(e){(e.redirected||e.succeeded&&e.isHTML)&&(this.sourceURL=e.response.url);try{let r=await e.responseHTML;if(r){let n=Hfe(r);zh.fromDocument(n).isVisitable?await this.#l(e,n):await this.#d(e)}}finally{this.#i=!1,this.fetchResponseLoaded=()=>Promise.resolve()}}elementAppearedInViewport(e){this.proposeVisitIfNavigatedWithAction(e,yb(e)),this.#n()}willSubmitFormLinkToLocation(e){return this.#u(e)}submittedFormLinkToLocation(e,r,n){let i=this.#s(e);i&&n.setAttribute("data-turbo-frame",i.id)}shouldInterceptLinkClick(e,r,n){return this.#u(e)}linkClickIntercepted(e,r){this.#h(e,r)}willSubmitForm(e,r){return e.closest("turbo-frame")==this.element&&this.#u(e,r)}formSubmitted(e,r){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new gI(this,e,r);let{fetchRequest:n}=this.formSubmission;this.prepareRequest(n),this.formSubmission.start()}prepareRequest(e){e.headers["Turbo-Frame"]=this.id,this.currentNavigationElement?.hasAttribute("data-turbo-stream")&&e.acceptResponseType(Lv.contentType)}requestStarted(e){dI(this.element)}requestPreventedHandlingResponse(e,r){this.#t()}async requestSucceededWithResponse(e,r){await this.loadResponse(r),this.#t()}async requestFailedWithResponse(e,r){await this.loadResponse(r),this.#t()}requestErrored(e,r){console.error(r),this.#t()}requestFinished(e){pI(this.element)}formSubmissionStarted({formElement:e}){dI(e,this.#s(e))}formSubmissionSucceededWithResponse(e,r){let n=this.#s(e.formElement,e.submitter);n.delegate.proposeVisitIfNavigatedWithAction(n,yb(e.submitter,e.formElement,n)),n.delegate.loadResponse(r),e.isSafe||Is.clearCache()}formSubmissionFailedWithResponse(e,r){this.element.delegate.loadResponse(r),Is.clearCache()}formSubmissionErrored(e,r){console.error(r)}formSubmissionFinished({formElement:e}){pI(e,this.#s(e))}allowsImmediateRender({element:e},r){let n=ps("turbo:before-frame-render",{target:this.element,detail:{newFrame:e,...r},cancelable:!0}),{defaultPrevented:i,detail:{render:o}}=n;return this.view.renderer&&o&&(this.view.renderer.renderElement=o),!i}viewRenderedSnapshot(e,r,n){}preloadOnLoadLinksForView(e){Is.preloadOnLoadLinksForView(e)}viewInvalidated(){}willRenderFrame(e,r){this.previousFrameElement=e.cloneNode(!0)}visitCachedSnapshot=({element:e})=>{let r=e.querySelector("#"+this.element.id);r&&this.previousFrameElement&&r.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement};async#l(e,r){let n=await this.extractForeignFrameElement(r.body),i=this.#i?qz:ix;if(n){let o=new nx(n),s=new i(this,this.view.snapshot,o,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(s),this.complete=!0,Is.frameRendered(e,this.element),Is.frameLoaded(this.element),await this.fetchResponseLoaded(e)}else this.#p(e)&&this.#m(e)}async#f(e){let r=new Mv(this,$f.get,e,new URLSearchParams,this.element);return this.#e?.cancel(),this.#e=r,new Promise(n=>{this.#t=()=>{this.#t=()=>{},this.#e=null,n()},r.perform()})}#h(e,r,n){let i=this.#s(e,n);i.delegate.proposeVisitIfNavigatedWithAction(i,yb(n,e,i)),this.#_(e,()=>{i.src=r})}proposeVisitIfNavigatedWithAction(e,r=null){if(this.action=r,this.action){let n=zh.fromElement(e).clone(),{visitCachedSnapshot:i}=e.delegate;e.delegate.fetchResponseLoaded=async o=>{if(e.src){let{statusCode:s,redirected:u}=o,h=await o.responseHTML,w={response:{statusCode:s,redirected:u,responseHTML:h},visitCachedSnapshot:i,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:n};this.action&&(w.action=this.action),Is.visit(e.src,w)}}}}changeHistory(){if(this.action){let e=$fe(this.action);Is.history.update(e,Ul(this.element.src||""),this.restorationIdentifier)}}async#d(e){console.warn(`The response (${e.statusCode}) from <turbo-frame id="${this.element.id}"> is performing a full page visit due to turbo-visit-control.`),await this.#c(e.response)}#p(e){this.element.setAttribute("complete","");let r=e.response,n=async(o,s)=>{o instanceof Response?this.#c(o):Is.visit(o,s)};return!ps("turbo:frame-missing",{target:this.element,detail:{response:r,visit:n},cancelable:!0}).defaultPrevented}#m(e){this.view.missing(),this.#g(e)}#g(e){let r=`The response (${e.statusCode}) did not contain the expected <turbo-frame id="${this.element.id}"> and will be ignored. To perform a full page visit instead, set turbo-visit-control to reload.`;throw new o5(r)}async#c(e){let r=new rx(e),n=await r.responseHTML,{location:i,redirected:o,statusCode:s}=r;return Is.visit(i,{response:{redirected:o,statusCode:s,responseHTML:n}})}#s(e,r){let n=hI("data-turbo-frame",r,e)||this.element.getAttribute("target");return Bfe(n)??this.element}async extractForeignFrameElement(e){let r,n=CSS.escape(this.id);try{if(r=zfe(e.querySelector(`turbo-frame#${n}`),this.sourceURL),r)return r;if(r=zfe(e.querySelector(`turbo-frame[src][recurse~=${n}]`),this.sourceURL),r)return await r.loaded,await this.extractForeignFrameElement(r)}catch(i){return console.error(i),new jh}return null}#v(e,r){let n=u5(e,r);return Dv(Ul(n),this.rootLocation)}#u(e,r){let n=hI("data-turbo-frame",r,e)||this.element.getAttribute("target");if(e instanceof HTMLFormElement&&!this.#v(e,r)||!this.enabled||n=="_top")return!1;if(n){let i=Bfe(n);if(i)return!i.disabled}return!(!Is.elementIsNavigatable(e)||r&&!Is.elementIsNavigatable(r))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(e){this.#b("src",()=>{this.element.src=e??null})}get loadingStyle(){return this.element.loading}get isLoading(){return this.formSubmission!==void 0||this.#t()!==void 0}get complete(){return this.element.hasAttribute("complete")}set complete(e){e?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")}get isActive(){return this.element.isActive&&this.#r}get rootLocation(){let r=this.element.ownerDocument.querySelector('meta[name="turbo-root"]')?.content??"/";return Ul(r)}#y(e){return this.#a.has(e)}#b(e,r){this.#a.add(e),r(),this.#a.delete(e)}#_(e,r){this.currentNavigationElement=e,r(),delete this.currentNavigationElement}};function Bfe(t){if(t!=null){let e=document.getElementById(t);if(e instanceof jh)return e}}function zfe(t,e){if(t){let r=t.getAttribute("src");if(r!=null&&e!=null&&ylt(r,e))throw new Error(`Matching <turbo-frame id="${t.id}"> element has a source URL which references itself`);if(t.ownerDocument!==document&&(t=document.importNode(t,!0)),t instanceof jh)return t.connectedCallback(),t.disconnectedCallback(),t}}var d5={after(){this.targetElements.forEach(t=>t.parentElement?.insertBefore(this.templateContent,t.nextSibling))},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.append(this.templateContent))},before(){this.targetElements.forEach(t=>t.parentElement?.insertBefore(this.templateContent,t))},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(t=>t.prepend(this.templateContent))},remove(){this.targetElements.forEach(t=>t.remove())},replace(){let t=this.getAttribute("method");this.targetElements.forEach(e=>{t==="morph"?f5(e,this.templateContent):e.replaceWith(this.templateContent)})},update(){let t=this.getAttribute("method");this.targetElements.forEach(e=>{t==="morph"?nhe(e,this.templateContent):(e.innerHTML="",e.append(this.templateContent))})},refresh(){Is.refresh(this.baseURI,this.requestId)}},wI=class t extends HTMLElement{static async renderElement(e){await e.performAction()}async connectedCallback(){try{await this.render()}catch(e){console.error(e)}finally{this.disconnect()}}async render(){return this.renderPromise??=(async()=>{let e=this.beforeRenderEvent;this.dispatchEvent(e)&&(await WS(),await e.detail.render(this))})()}disconnect(){try{this.remove()}catch{}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(e=>e.remove())}get duplicateChildren(){let e=this.targetElements.flatMap(n=>[...n.children]).filter(n=>!!n.getAttribute("id")),r=[...this.templateContent?.children||[]].filter(n=>!!n.getAttribute("id")).map(n=>n.getAttribute("id"));return e.filter(n=>r.includes(n.getAttribute("id")))}get performAction(){if(this.action){let e=d5[this.action];if(e)return e;this.#e("unknown action")}this.#e("action attribute is missing")}get targetElements(){if(this.target)return this.targetElementsById;if(this.targets)return this.targetElementsByQuery;this.#e("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(this.firstElementChild===null){let e=this.ownerDocument.createElement("template");return this.appendChild(e),e}else if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.#e("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}get requestId(){return this.getAttribute("request-id")}#e(e){throw new Error(`${this.description}: ${e}`)}get description(){return(this.outerHTML.match(/<[^>]+>/)??[])[0]??"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:t.renderElement}})}get targetElementsById(){let e=this.ownerDocument?.getElementById(this.target);return e!==null?[e]:[]}get targetElementsByQuery(){let e=this.ownerDocument?.querySelectorAll(this.targets);return e.length!==0?Array.prototype.slice.call(e):[]}},SI=class extends HTMLElement{streamSource=null;connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ZS(this.streamSource)}disconnectedCallback(){this.streamSource&&(this.streamSource.close(),YS(this.streamSource))}get src(){return this.getAttribute("src")||""}};jh.delegateConstructor=a5;customElements.get("turbo-frame")===void 0&&customElements.define("turbo-frame",jh);customElements.get("turbo-stream")===void 0&&customElements.define("turbo-stream",wI);customElements.get("turbo-stream-source")===void 0&&customElements.define("turbo-stream-source",SI);(()=>{let t=document.currentScript;if(t&&!t.hasAttribute("data-turbo-suppress-warning"))for(t=t.parentElement;t;){if(t==document.body)return console.warn(Wfe`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your application’s JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        ——
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,t.outerHTML);t=t.parentElement}})();window.Turbo={...uut,StreamActions:d5};h5();var bhe;async function dut(){return bhe||yhe(put().then(yhe))}function yhe(t){return bhe=t}async function put(){let{createConsumer:t}=await Promise.resolve().then(()=>(vhe(),ghe));return t()}async function _he(t,e){let{subscriptions:r}=await dut();return r.create(t,e)}function rE(t){return!t||typeof t!="object"||t instanceof Date||t instanceof RegExp?t:Array.isArray(t)?t.map(rE):Object.keys(t).reduce(function(e,r){var n=r[0].toLowerCase()+r.slice(1).replace(/([A-Z]+)/g,function(i,o){return"_"+o.toLowerCase()});return e[n]=rE(t[r]),e},{})}var w5=class extends HTMLElement{static observedAttributes=["channel","signed-stream-name"];async connectedCallback(){ZS(this),this.subscription=await _he(this.channel,{received:this.dispatchMessageEvent.bind(this),connected:this.subscriptionConnected.bind(this),disconnected:this.subscriptionDisconnected.bind(this)})}disconnectedCallback(){YS(this),this.subscription&&this.subscription.unsubscribe(),this.subscriptionDisconnected()}attributeChangedCallback(){this.subscription&&(this.disconnectedCallback(),this.connectedCallback())}dispatchMessageEvent(e){let r=new MessageEvent("message",{data:e});return this.dispatchEvent(r)}subscriptionConnected(){this.setAttribute("connected","")}subscriptionDisconnected(){this.removeAttribute("connected")}get channel(){let e=this.getAttribute("channel"),r=this.getAttribute("signed-stream-name");return{channel:e,signed_stream_name:r,...rE({...this.dataset})}}};customElements.get("turbo-cable-stream-source")===void 0&&customElements.define("turbo-cable-stream-source",w5);function xhe(t){if(t.target instanceof HTMLFormElement){let{target:e,detail:{fetchOptions:r}}=t;e.addEventListener("turbo:submit-start",({detail:{formSubmission:{submitter:n}}})=>{let i=yut(r.body)?r.body:new URLSearchParams,o=gut(n,i,e);/get/i.test(o)||(/post/i.test(o)?i.delete("_method"):i.set("_method",o),r.method="post")},{once:!0})}}function gut(t,e,r){let n=vut(t),i=e.get("_method"),o=r.getAttribute("method")||"get";return typeof n=="string"?n:typeof i=="string"?i:o}function vut(t){return t instanceof HTMLButtonElement||t instanceof HTMLInputElement?t.name==="_method"?t.value:t.hasAttribute("formmethod")?t.formMethod:null:null}function yut(t){return t instanceof FormData||t instanceof URLSearchParams}window.Turbo=Rv;addEventListener("turbo:before-fetch-request",xhe);var wb="a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]",Sb={selector:"button[data-remote]:not([form]), button[data-confirm]:not([form])",exclude:"form button"},aE="select[data-remote], input[data-remote], textarea[data-remote]",Up="form:not([data-turbo=true])",nE="form:not([data-turbo=true]) input[type=submit], form:not([data-turbo=true]) input[type=image], form:not([data-turbo=true]) button[type=submit], form:not([data-turbo=true]) button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",T5="input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",RI="input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",but="input[name][type=file]:not([disabled])",fx="a[data-disable-with], a[data-disable]",lE="button[data-remote][data-disable-with], button[data-remote][data-disable]",Ehe=null,A5=()=>{let t=document.querySelector("meta[name=csp-nonce]");return Ehe=t&&t.content},The=()=>Ehe||A5(),S5=Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector,tl=function(t,e){return e.exclude?S5.call(t,e.selector)&&!S5.call(t,e.exclude):S5.call(t,e)},sE="_ujsData",Vp=(t,e)=>t[sE]?t[sE][e]:void 0,cu=function(t,e,r){return t[sE]||(t[sE]={}),t[sE][e]=r},MI=t=>Array.prototype.slice.call(document.querySelectorAll(t)),FI=function(t){var e=!1;do{if(t.isContentEditable){e=!0;break}t=t.parentElement}while(t);return e},qI=()=>{let t=document.querySelector("meta[name=csrf-token]");return t&&t.content},k5=()=>{let t=document.querySelector("meta[name=csrf-param]");return t&&t.content},C5=t=>{let e=qI();if(e)return t.setRequestHeader("X-CSRF-Token",e)},Ahe=()=>{let t=qI(),e=k5();if(t&&e)return MI('form input[name="'+e+'"]').forEach(r=>r.value=t)},whe={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},khe=t=>{t=_ut(t);var e=xut(t,function(){let r=wut(e.response!=null?e.response:e.responseText,e.getResponseHeader("Content-Type"));return Math.floor(e.status/100)===2?typeof t.success=="function"&&t.success(r,e.statusText,e):typeof t.error=="function"&&t.error(r,e.statusText,e),typeof t.complete=="function"?t.complete(e,e.statusText):void 0});if(t.beforeSend&&!t.beforeSend(e,t))return!1;if(e.readyState===XMLHttpRequest.OPENED)return e.send(t.data)},_ut=function(t){return t.url=t.url||location.href,t.type=t.type.toUpperCase(),t.type==="GET"&&t.data&&(t.url.indexOf("?")<0?t.url+="?"+t.data:t.url+="&"+t.data),t.dataType in whe||(t.dataType="*"),t.accept=whe[t.dataType],t.dataType!=="*"&&(t.accept+=", */*; q=0.01"),t},xut=function(t,e){let r=new XMLHttpRequest;return r.open(t.type,t.url,!0),r.setRequestHeader("Accept",t.accept),typeof t.data=="string"&&r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.crossDomain||(r.setRequestHeader("X-Requested-With","XMLHttpRequest"),C5(r)),r.withCredentials=!!t.withCredentials,r.onreadystatechange=function(){if(r.readyState===XMLHttpRequest.DONE)return e(r)},r},wut=function(t,e){if(typeof t=="string"&&typeof e=="string"){if(e.match(/\bjson\b/))try{t=JSON.parse(t)}catch{}else if(e.match(/\b(?:java|ecma)script\b/)){let r=document.createElement("script");r.setAttribute("nonce",The()),r.text=t,document.head.appendChild(r).parentNode.removeChild(r)}else if(e.match(/\b(xml|html|svg)\b/)){let r=new DOMParser;e=e.replace(/;.+/,"");try{t=r.parseFromString(t,e)}catch{}}}return t},Sut=t=>t.href,I5=function(t){let e=document.createElement("a");e.href=location.href;let r=document.createElement("a");try{return r.href=t,!((!r.protocol||r.protocol===":")&&!r.host||e.protocol+"//"+e.host==r.protocol+"//"+r.host)}catch{return!0}},She,{CustomEvent:lx}=window;typeof lx!="function"&&(lx=function(t,e){let r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),r},lx.prototype=window.Event.prototype,{preventDefault:She}=lx.prototype,lx.prototype.preventDefault=function(){let t=She.call(this);return this.cancelable&&!this.defaultPrevented&&Object.defineProperty(this,"defaultPrevented",{get(){return!0}}),t});var Gf=(t,e,r)=>{let n=new lx(e,{bubbles:!0,cancelable:!0,detail:r});return t.dispatchEvent(n),!n.defaultPrevented},Eb=t=>{Gf(t.target,"ujs:everythingStopped"),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()},Wo=(t,e,r,n)=>t.addEventListener(r,function(i){let{target:o}=i;for(;o instanceof Element&&!tl(o,e);)o=o.parentNode;o instanceof Element&&n.call(o,i)===!1&&(i.preventDefault(),i.stopPropagation())}),LI=t=>Array.prototype.slice.call(t),E5=(t,e)=>{let r=[t];tl(t,"form")&&(r=LI(t.elements));let n=[];return r.forEach(function(i){!i.name||i.disabled||tl(i,"fieldset[disabled] *")||(tl(i,"select")?LI(i.options).forEach(function(o){o.selected&&n.push({name:i.name,value:o.value})}):(i.checked||["radio","checkbox","submit"].indexOf(i.type)===-1)&&n.push({name:i.name,value:i.value}))}),e&&n.push(e),n.map(function(i){return i.name?`${encodeURIComponent(i.name)}=${encodeURIComponent(i.value)}`:i}).join("&")},D5=(t,e)=>tl(t,"form")?LI(t.elements).filter(r=>tl(r,e)):LI(t.querySelectorAll(e)),Eut=t=>function(e){Aut(this,t)||Eb(e)},Tut=(t,e)=>window.confirm(t),Aut=function(t,e){let r,n=t.getAttribute("data-confirm");if(!n)return!0;let i=!1;if(Gf(t,"confirm")){try{i=e.confirm(n,t)}catch{}r=Gf(t,"confirm:complete",[i])}return i&&r},ux=function(t){this.disabled&&Eb(t)},qv=t=>{let e;if(t instanceof Event){if(Out(t))return;e=t.target}else e=t;if(!FI(e)){if(tl(e,fx))return Cut(e);if(tl(e,lE)||tl(e,RI))return Ihe(e);if(tl(e,Up))return Dut(e)}},iE=t=>{let e=t instanceof Event?t.target:t;if(!FI(e)){if(tl(e,fx))return kut(e);if(tl(e,lE)||tl(e,T5))return Che(e);if(tl(e,Up))return Iut(e)}},kut=function(t){if(Vp(t,"ujs:disabled"))return;let e=t.getAttribute("data-disable-with");return e!=null&&(cu(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e),t.addEventListener("click",Eb),cu(t,"ujs:disabled",!0)},Cut=function(t){let e=Vp(t,"ujs:enable-with");return e!=null&&(t.innerHTML=e,cu(t,"ujs:enable-with",null)),t.removeEventListener("click",Eb),cu(t,"ujs:disabled",null)},Iut=t=>D5(t,T5).forEach(Che),Che=function(t){if(Vp(t,"ujs:disabled"))return;let e=t.getAttribute("data-disable-with");return e!=null&&(tl(t,"button")?(cu(t,"ujs:enable-with",t.innerHTML),t.innerHTML=e):(cu(t,"ujs:enable-with",t.value),t.value=e)),t.disabled=!0,cu(t,"ujs:disabled",!0)},Dut=t=>D5(t,RI).forEach(e=>Ihe(e)),Ihe=function(t){let e=Vp(t,"ujs:enable-with");return e!=null&&(tl(t,"button")?t.innerHTML=e:t.value=e,cu(t,"ujs:enable-with",null)),t.disabled=!1,cu(t,"ujs:disabled",null)},Out=function(t){let e=t.detail?t.detail[0]:void 0;return e&&e.getResponseHeader("X-Xhr-Redirect")},Put=t=>function(e){let r=this,n=r.getAttribute("data-method");if(!n||FI(this))return;let i=t.href(r),o=qI(),s=k5(),u=document.createElement("form"),h=`<input name='_method' value='${n}' type='hidden' />`;s&&o&&!I5(i)&&(h+=`<input name='${s}' value='${o}' type='hidden' />`),h+='<input type="submit" />',u.method="post",u.action=i,u.target=r.target,u.innerHTML=h,u.style.display="none",document.body.appendChild(u),u.querySelector('[type="submit"]').click(),Eb(e)},Mut=function(t){let e=t.getAttribute("data-remote");return e!=null&&e!=="false"},Lut=t=>function(e){let r,n,i,o=this;if(!Mut(o))return!0;if(!Gf(o,"ajax:before")||FI(o))return Gf(o,"ajax:stopped"),!1;let s=o.getAttribute("data-with-credentials"),u=o.getAttribute("data-type")||"script";if(tl(o,Up)){let h=Vp(o,"ujs:submit-button");n=Vp(o,"ujs:submit-button-formmethod")||o.getAttribute("method")||"get",i=Vp(o,"ujs:submit-button-formaction")||o.getAttribute("action")||location.href,n.toUpperCase()==="GET"&&(i=i.replace(/\?.*$/,"")),o.enctype==="multipart/form-data"?(r=new FormData(o),h!=null&&r.append(h.name,h.value)):r=E5(o,h),cu(o,"ujs:submit-button",null),cu(o,"ujs:submit-button-formmethod",null),cu(o,"ujs:submit-button-formaction",null)}else tl(o,Sb)||tl(o,aE)?(n=o.getAttribute("data-method"),i=o.getAttribute("data-url"),r=E5(o,o.getAttribute("data-params"))):(n=o.getAttribute("data-method"),i=t.href(o),r=o.getAttribute("data-params"));khe({type:n||"GET",url:i,data:r,dataType:u,beforeSend(h,y){return Gf(o,"ajax:beforeSend",[h,y])?Gf(o,"ajax:send",[h]):(Gf(o,"ajax:stopped"),!1)},success(...h){return Gf(o,"ajax:success",h)},error(...h){return Gf(o,"ajax:error",h)},complete(...h){return Gf(o,"ajax:complete",h)},crossDomain:I5(i),withCredentials:s!=null&&s!=="false"}),Eb(e)},Dhe=function(t){let e=this,{form:r}=e;if(r)return e.name&&cu(r,"ujs:submit-button",{name:e.name,value:e.value}),cu(r,"ujs:formnovalidate-button",e.formNoValidate),cu(r,"ujs:submit-button-formaction",e.getAttribute("formaction")),cu(r,"ujs:submit-button-formmethod",e.getAttribute("formmethod"))},PI=function(t){let e=this,r=(e.getAttribute("data-method")||"GET").toUpperCase(),n=e.getAttribute("data-params"),o=(t.metaKey||t.ctrlKey)&&r==="GET"&&!n;(t.button!=null&&t.button!==0||o)&&t.stopImmediatePropagation()},Hp={$:MI,ajax:khe,buttonClickSelector:Sb,buttonDisableSelector:lE,confirm:Tut,cspNonce:The,csrfToken:qI,csrfParam:k5,CSRFProtection:C5,delegate:Wo,disableElement:iE,enableElement:qv,fileInputSelector:but,fire:Gf,formElements:D5,formEnableSelector:RI,formDisableSelector:T5,formInputClickSelector:nE,formSubmitButtonClick:Dhe,formSubmitSelector:Up,getData:Vp,handleDisabledElement:ux,href:Sut,inputChangeSelector:aE,isCrossDomain:I5,linkClickSelector:wb,linkDisableSelector:fx,loadCSPNonce:A5,matches:tl,preventInsignificantClick:PI,refreshCSRFTokens:Ahe,serializeElement:E5,setData:cu,stopEverything:Eb},cx=Eut(Hp);Hp.handleConfirm=cx;var Ohe=Put(Hp);Hp.handleMethod=Ohe;var oE=Lut(Hp);Hp.handleRemote=oE;var Rut=function(){if(window._rails_loaded)throw new Error("rails-ujs has already been loaded!");return window.addEventListener("pageshow",function(){MI(RI).forEach(function(t){Vp(t,"ujs:disabled")&&qv(t)}),MI(fx).forEach(function(t){Vp(t,"ujs:disabled")&&qv(t)})}),Wo(document,fx,"ajax:complete",qv),Wo(document,fx,"ajax:stopped",qv),Wo(document,lE,"ajax:complete",qv),Wo(document,lE,"ajax:stopped",qv),Wo(document,wb,"click",PI),Wo(document,wb,"click",ux),Wo(document,wb,"click",cx),Wo(document,wb,"click",iE),Wo(document,wb,"click",oE),Wo(document,wb,"click",Ohe),Wo(document,Sb,"click",PI),Wo(document,Sb,"click",ux),Wo(document,Sb,"click",cx),Wo(document,Sb,"click",iE),Wo(document,Sb,"click",oE),Wo(document,aE,"change",ux),Wo(document,aE,"change",cx),Wo(document,aE,"change",oE),Wo(document,Up,"submit",ux),Wo(document,Up,"submit",cx),Wo(document,Up,"submit",oE),Wo(document,Up,"submit",t=>setTimeout(()=>iE(t),13)),Wo(document,Up,"ajax:send",iE),Wo(document,Up,"ajax:complete",qv),Wo(document,nE,"click",PI),Wo(document,nE,"click",ux),Wo(document,nE,"click",cx),Wo(document,nE,"click",Dhe),document.addEventListener("DOMContentLoaded",Ahe),document.addEventListener("DOMContentLoaded",A5),window._rails_loaded=!0};Hp.start=Rut;if(typeof jQuery<"u"&&jQuery&&jQuery.ajax){if(jQuery.rails)throw new Error("If you load both jquery_ujs and rails-ujs, use rails-ujs only.");jQuery.rails=Hp,jQuery.ajaxPrefilter(function(t,e,r){if(!t.crossDomain)return C5(r)})}var Ds="top",El="bottom",rl="right",Vs="left",NI="auto",Nv=[Ds,El,rl,Vs],tg="start",Tb="end",Phe="clippingParents",BI="viewport",hx="popper",Mhe="reference",O5=Nv.reduce(function(t,e){return t.concat([e+"-"+tg,e+"-"+Tb])},[]),zI=[].concat(Nv,[NI]).reduce(function(t,e){return t.concat([e,e+"-"+tg,e+"-"+Tb])},[]),Fut="beforeRead",qut="read",Nut="afterRead",But="beforeMain",zut="main",jut="afterMain",Uut="beforeWrite",Vut="write",Hut="afterWrite",Lhe=[Fut,qut,Nut,But,zut,jut,Uut,Vut,Hut];function Vl(t){return t?(t.nodeName||"").toLowerCase():null}function rs(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Uh(t){var e=rs(t).Element;return t instanceof e||t instanceof Element}function Tl(t){var e=rs(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function dx(t){if(typeof ShadowRoot>"u")return!1;var e=rs(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Wut(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},o=e.elements[r];!Tl(o)||!Vl(o)||(Object.assign(o.style,n),Object.keys(i).forEach(function(s){var u=i[s];u===!1?o.removeAttribute(s):o.setAttribute(s,u===!0?"":u)}))})}function $ut(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],o=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),u=s.reduce(function(h,y){return h[y]="",h},{});!Tl(i)||!Vl(i)||(Object.assign(i.style,u),Object.keys(o).forEach(function(h){i.removeAttribute(h)}))})}}var uE={name:"applyStyles",enabled:!0,phase:"write",fn:Wut,effect:$ut,requires:["computeStyles"]};function Hl(t){return t.split("-")[0]}var Pd=Math.max,Ab=Math.min,rg=Math.round;function px(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function cE(){return!/^((?!chrome|android).)*safari/i.test(px())}function Vh(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,o=1;e&&Tl(t)&&(i=t.offsetWidth>0&&rg(n.width)/t.offsetWidth||1,o=t.offsetHeight>0&&rg(n.height)/t.offsetHeight||1);var s=Uh(t)?rs(t):window,u=s.visualViewport,h=!cE()&&r,y=(n.left+(h&&u?u.offsetLeft:0))/i,w=(n.top+(h&&u?u.offsetTop:0))/o,T=n.width/i,I=n.height/o;return{width:T,height:I,top:w,right:y+T,bottom:w+I,left:y,x:y,y:w}}function kb(t){var e=Vh(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function fE(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&dx(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function fc(t){return rs(t).getComputedStyle(t)}function P5(t){return["table","td","th"].indexOf(Vl(t))>=0}function fu(t){return((Uh(t)?t.ownerDocument:t.document)||window.document).documentElement}function ng(t){return Vl(t)==="html"?t:t.assignedSlot||t.parentNode||(dx(t)?t.host:null)||fu(t)}function Rhe(t){return!Tl(t)||fc(t).position==="fixed"?null:t.offsetParent}function Gut(t){var e=/firefox/i.test(px()),r=/Trident/i.test(px());if(r&&Tl(t)){var n=fc(t);if(n.position==="fixed")return null}var i=ng(t);for(dx(i)&&(i=i.host);Tl(i)&&["html","body"].indexOf(Vl(i))<0;){var o=fc(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||e&&o.willChange==="filter"||e&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function Md(t){for(var e=rs(t),r=Rhe(t);r&&P5(r)&&fc(r).position==="static";)r=Rhe(r);return r&&(Vl(r)==="html"||Vl(r)==="body"&&fc(r).position==="static")?e:r||Gut(t)||e}function Cb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ib(t,e,r){return Pd(t,Ab(e,r))}function Fhe(t,e,r){var n=Ib(t,e,r);return n>r?r:n}function hE(){return{top:0,right:0,bottom:0,left:0}}function dE(t){return Object.assign({},hE(),t)}function pE(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var Kut=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,dE(typeof e!="number"?e:pE(e,Nv))};function Zut(t){var e,r=t.state,n=t.name,i=t.options,o=r.elements.arrow,s=r.modifiersData.popperOffsets,u=Hl(r.placement),h=Cb(u),y=[Vs,rl].indexOf(u)>=0,w=y?"height":"width";if(!(!o||!s)){var T=Kut(i.padding,r),I=kb(o),P=h==="y"?Ds:Vs,L=h==="y"?El:rl,R=r.rects.reference[w]+r.rects.reference[h]-s[h]-r.rects.popper[w],W=s[h]-r.rects.reference[h],G=Md(o),q=G?h==="y"?G.clientHeight||0:G.clientWidth||0:0,V=R/2-W/2,p=T[P],K=q-I[w]-T[L],j=q/2-I[w]/2+V,Q=Ib(p,j,K),ee=h;r.modifiersData[n]=(e={},e[ee]=Q,e.centerOffset=Q-j,e)}}function Yut(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||fE(e.elements.popper,i)&&(e.elements.arrow=i))}var qhe={name:"arrow",enabled:!0,phase:"main",fn:Zut,effect:Yut,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hh(t){return t.split("-")[1]}var Xut={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Jut(t,e){var r=t.x,n=t.y,i=e.devicePixelRatio||1;return{x:rg(r*i)/i||0,y:rg(n*i)/i||0}}function Nhe(t){var e,r=t.popper,n=t.popperRect,i=t.placement,o=t.variation,s=t.offsets,u=t.position,h=t.gpuAcceleration,y=t.adaptive,w=t.roundOffsets,T=t.isFixed,I=s.x,P=I===void 0?0:I,L=s.y,R=L===void 0?0:L,W=typeof w=="function"?w({x:P,y:R}):{x:P,y:R};P=W.x,R=W.y;var G=s.hasOwnProperty("x"),q=s.hasOwnProperty("y"),V=Vs,p=Ds,K=window;if(y){var j=Md(r),Q="clientHeight",ee="clientWidth";if(j===rs(r)&&(j=fu(r),fc(j).position!=="static"&&u==="absolute"&&(Q="scrollHeight",ee="scrollWidth")),j=j,i===Ds||(i===Vs||i===rl)&&o===Tb){p=El;var se=T&&j===K&&K.visualViewport?K.visualViewport.height:j[Q];R-=se-n.height,R*=h?1:-1}if(i===Vs||(i===Ds||i===El)&&o===Tb){V=rl;var me=T&&j===K&&K.visualViewport?K.visualViewport.width:j[ee];P-=me-n.width,P*=h?1:-1}}var ve=Object.assign({position:u},y&&Xut),U=w===!0?Jut({x:P,y:R},rs(r)):{x:P,y:R};if(P=U.x,R=U.y,h){var $;return Object.assign({},ve,($={},$[p]=q?"0":"",$[V]=G?"0":"",$.transform=(K.devicePixelRatio||1)<=1?"translate("+P+"px, "+R+"px)":"translate3d("+P+"px, "+R+"px, 0)",$))}return Object.assign({},ve,(e={},e[p]=q?R+"px":"",e[V]=G?P+"px":"",e.transform="",e))}function Qut(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,o=r.adaptive,s=o===void 0?!0:o,u=r.roundOffsets,h=u===void 0?!0:u,y={placement:Hl(e.placement),variation:Hh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Nhe(Object.assign({},y,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:h})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Nhe(Object.assign({},y,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:h})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Bhe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Qut,data:{}};var jI={passive:!0};function ect(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,o=i===void 0?!0:i,s=n.resize,u=s===void 0?!0:s,h=rs(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&y.forEach(function(w){w.addEventListener("scroll",r.update,jI)}),u&&h.addEventListener("resize",r.update,jI),function(){o&&y.forEach(function(w){w.removeEventListener("scroll",r.update,jI)}),u&&h.removeEventListener("resize",r.update,jI)}}var zhe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ect,data:{}};var tct={left:"right",right:"left",bottom:"top",top:"bottom"};function mx(t){return t.replace(/left|right|bottom|top/g,function(e){return tct[e]})}var rct={start:"end",end:"start"};function UI(t){return t.replace(/start|end/g,function(e){return rct[e]})}function Db(t){var e=rs(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function Ob(t){return Vh(fu(t)).left+Db(t).scrollLeft}function M5(t,e){var r=rs(t),n=fu(t),i=r.visualViewport,o=n.clientWidth,s=n.clientHeight,u=0,h=0;if(i){o=i.width,s=i.height;var y=cE();(y||!y&&e==="fixed")&&(u=i.offsetLeft,h=i.offsetTop)}return{width:o,height:s,x:u+Ob(t),y:h}}function L5(t){var e,r=fu(t),n=Db(t),i=(e=t.ownerDocument)==null?void 0:e.body,o=Pd(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Pd(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),u=-n.scrollLeft+Ob(t),h=-n.scrollTop;return fc(i||r).direction==="rtl"&&(u+=Pd(r.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:u,y:h}}function Pb(t){var e=fc(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function VI(t){return["html","body","#document"].indexOf(Vl(t))>=0?t.ownerDocument.body:Tl(t)&&Pb(t)?t:VI(ng(t))}function Bv(t,e){var r;e===void 0&&(e=[]);var n=VI(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),o=rs(n),s=i?[o].concat(o.visualViewport||[],Pb(n)?n:[]):n,u=e.concat(s);return i?u:u.concat(Bv(ng(s)))}function gx(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function nct(t,e){var r=Vh(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function jhe(t,e,r){return e===BI?gx(M5(t,r)):Uh(e)?nct(e,r):gx(L5(fu(t)))}function ict(t){var e=Bv(ng(t)),r=["absolute","fixed"].indexOf(fc(t).position)>=0,n=r&&Tl(t)?Md(t):t;return Uh(n)?e.filter(function(i){return Uh(i)&&fE(i,n)&&Vl(i)!=="body"}):[]}function R5(t,e,r,n){var i=e==="clippingParents"?ict(t):[].concat(e),o=[].concat(i,[r]),s=o[0],u=o.reduce(function(h,y){var w=jhe(t,y,n);return h.top=Pd(w.top,h.top),h.right=Ab(w.right,h.right),h.bottom=Ab(w.bottom,h.bottom),h.left=Pd(w.left,h.left),h},jhe(t,s,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function mE(t){var e=t.reference,r=t.element,n=t.placement,i=n?Hl(n):null,o=n?Hh(n):null,s=e.x+e.width/2-r.width/2,u=e.y+e.height/2-r.height/2,h;switch(i){case Ds:h={x:s,y:e.y-r.height};break;case El:h={x:s,y:e.y+e.height};break;case rl:h={x:e.x+e.width,y:u};break;case Vs:h={x:e.x-r.width,y:u};break;default:h={x:e.x,y:e.y}}var y=i?Cb(i):null;if(y!=null){var w=y==="y"?"height":"width";switch(o){case tg:h[y]=h[y]-(e[w]/2-r[w]/2);break;case Tb:h[y]=h[y]+(e[w]/2-r[w]/2);break;default:}}return h}function Ld(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,o=r.strategy,s=o===void 0?t.strategy:o,u=r.boundary,h=u===void 0?Phe:u,y=r.rootBoundary,w=y===void 0?BI:y,T=r.elementContext,I=T===void 0?hx:T,P=r.altBoundary,L=P===void 0?!1:P,R=r.padding,W=R===void 0?0:R,G=dE(typeof W!="number"?W:pE(W,Nv)),q=I===hx?Mhe:hx,V=t.rects.popper,p=t.elements[L?q:I],K=R5(Uh(p)?p:p.contextElement||fu(t.elements.popper),h,w,s),j=Vh(t.elements.reference),Q=mE({reference:j,element:V,strategy:"absolute",placement:i}),ee=gx(Object.assign({},V,Q)),se=I===hx?ee:j,me={top:K.top-se.top+G.top,bottom:se.bottom-K.bottom+G.bottom,left:K.left-se.left+G.left,right:se.right-K.right+G.right},ve=t.modifiersData.offset;if(I===hx&&ve){var U=ve[i];Object.keys(me).forEach(function($){var he=[rl,El].indexOf($)>=0?1:-1,Ce=[Ds,El].indexOf($)>=0?"y":"x";me[$]+=U[Ce]*he})}return me}function F5(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,o=r.rootBoundary,s=r.padding,u=r.flipVariations,h=r.allowedAutoPlacements,y=h===void 0?zI:h,w=Hh(n),T=w?u?O5:O5.filter(function(L){return Hh(L)===w}):Nv,I=T.filter(function(L){return y.indexOf(L)>=0});I.length===0&&(I=T);var P=I.reduce(function(L,R){return L[R]=Ld(t,{placement:R,boundary:i,rootBoundary:o,padding:s})[Hl(R)],L},{});return Object.keys(P).sort(function(L,R){return P[L]-P[R]})}function oct(t){if(Hl(t)===NI)return[];var e=mx(t);return[UI(t),e,UI(e)]}function act(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,u=s===void 0?!0:s,h=r.fallbackPlacements,y=r.padding,w=r.boundary,T=r.rootBoundary,I=r.altBoundary,P=r.flipVariations,L=P===void 0?!0:P,R=r.allowedAutoPlacements,W=e.options.placement,G=Hl(W),q=G===W,V=h||(q||!L?[mx(W)]:oct(W)),p=[W].concat(V).reduce(function(lt,kt){return lt.concat(Hl(kt)===NI?F5(e,{placement:kt,boundary:w,rootBoundary:T,padding:y,flipVariations:L,allowedAutoPlacements:R}):kt)},[]),K=e.rects.reference,j=e.rects.popper,Q=new Map,ee=!0,se=p[0],me=0;me<p.length;me++){var ve=p[me],U=Hl(ve),$=Hh(ve)===tg,he=[Ds,El].indexOf(U)>=0,Ce=he?"width":"height",Se=Ld(e,{placement:ve,boundary:w,rootBoundary:T,altBoundary:I,padding:y}),de=he?$?rl:Vs:$?El:Ds;K[Ce]>j[Ce]&&(de=mx(de));var we=mx(de),Ue=[];if(o&&Ue.push(Se[U]<=0),u&&Ue.push(Se[de]<=0,Se[we]<=0),Ue.every(function(lt){return lt})){se=ve,ee=!1;break}Q.set(ve,Ue)}if(ee)for(var ye=L?3:1,ne=function(kt){var ut=p.find(function(Ut){var Wt=Q.get(Ut);if(Wt)return Wt.slice(0,kt).every(function(Ht){return Ht})});if(ut)return se=ut,"break"},st=ye;st>0;st--){var dt=ne(st);if(dt==="break")break}e.placement!==se&&(e.modifiersData[n]._skip=!0,e.placement=se,e.reset=!0)}}var Uhe={name:"flip",enabled:!0,phase:"main",fn:act,requiresIfExists:["offset"],data:{_skip:!1}};function Vhe(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Hhe(t){return[Ds,rl,El,Vs].some(function(e){return t[e]>=0})}function sct(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,o=e.modifiersData.preventOverflow,s=Ld(e,{elementContext:"reference"}),u=Ld(e,{altBoundary:!0}),h=Vhe(s,n),y=Vhe(u,i,o),w=Hhe(h),T=Hhe(y);e.modifiersData[r]={referenceClippingOffsets:h,popperEscapeOffsets:y,isReferenceHidden:w,hasPopperEscaped:T},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":w,"data-popper-escaped":T})}var Whe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sct};function lct(t,e,r){var n=Hl(t),i=[Vs,Ds].indexOf(n)>=0?-1:1,o=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=o[0],u=o[1];return s=s||0,u=(u||0)*i,[Vs,rl].indexOf(n)>=0?{x:u,y:s}:{x:s,y:u}}function uct(t){var e=t.state,r=t.options,n=t.name,i=r.offset,o=i===void 0?[0,0]:i,s=zI.reduce(function(w,T){return w[T]=lct(T,e.rects,o),w},{}),u=s[e.placement],h=u.x,y=u.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=h,e.modifiersData.popperOffsets.y+=y),e.modifiersData[n]=s}var $he={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uct};function cct(t){var e=t.state,r=t.name;e.modifiersData[r]=mE({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Ghe={name:"popperOffsets",enabled:!0,phase:"read",fn:cct,data:{}};function q5(t){return t==="x"?"y":"x"}function fct(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,o=i===void 0?!0:i,s=r.altAxis,u=s===void 0?!1:s,h=r.boundary,y=r.rootBoundary,w=r.altBoundary,T=r.padding,I=r.tether,P=I===void 0?!0:I,L=r.tetherOffset,R=L===void 0?0:L,W=Ld(e,{boundary:h,rootBoundary:y,padding:T,altBoundary:w}),G=Hl(e.placement),q=Hh(e.placement),V=!q,p=Cb(G),K=q5(p),j=e.modifiersData.popperOffsets,Q=e.rects.reference,ee=e.rects.popper,se=typeof R=="function"?R(Object.assign({},e.rects,{placement:e.placement})):R,me=typeof se=="number"?{mainAxis:se,altAxis:se}:Object.assign({mainAxis:0,altAxis:0},se),ve=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(j){if(o){var $,he=p==="y"?Ds:Vs,Ce=p==="y"?El:rl,Se=p==="y"?"height":"width",de=j[p],we=de+W[he],Ue=de-W[Ce],ye=P?-ee[Se]/2:0,ne=q===tg?Q[Se]:ee[Se],st=q===tg?-ee[Se]:-Q[Se],dt=e.elements.arrow,lt=P&&dt?kb(dt):{width:0,height:0},kt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:hE(),ut=kt[he],Ut=kt[Ce],Wt=Ib(0,Q[Se],lt[Se]),Ht=V?Q[Se]/2-ye-Wt-ut-me.mainAxis:ne-Wt-ut-me.mainAxis,pr=V?-Q[Se]/2+ye+Wt+Ut+me.mainAxis:st+Wt+Ut+me.mainAxis,zr=e.elements.arrow&&Md(e.elements.arrow),Jt=zr?p==="y"?zr.clientTop||0:zr.clientLeft||0:0,Qr=($=ve?.[p])!=null?$:0,Br=de+Ht-Qr-Jt,Rr=de+pr-Qr,Be=Ib(P?Ab(we,Br):we,de,P?Pd(Ue,Rr):Ue);j[p]=Be,U[p]=Be-de}if(u){var Ge,vt=p==="x"?Ds:Vs,Kt=p==="x"?El:rl,rt=j[K],Ct=K==="y"?"height":"width",Tt=rt+W[vt],ar=rt-W[Kt],er=[Ds,Vs].indexOf(G)!==-1,ir=(Ge=ve?.[K])!=null?Ge:0,sr=er?Tt:rt-Q[Ct]-ee[Ct]-ir+me.altAxis,He=er?rt+Q[Ct]+ee[Ct]-ir-me.altAxis:ar,Xe=P&&er?Fhe(sr,rt,He):Ib(P?sr:Tt,rt,P?He:ar);j[K]=Xe,U[K]=Xe-rt}e.modifiersData[n]=U}}var Khe={name:"preventOverflow",enabled:!0,phase:"main",fn:fct,requiresIfExists:["offset"]};function N5(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function B5(t){return t===rs(t)||!Tl(t)?Db(t):N5(t)}function hct(t){var e=t.getBoundingClientRect(),r=rg(e.width)/t.offsetWidth||1,n=rg(e.height)/t.offsetHeight||1;return r!==1||n!==1}function z5(t,e,r){r===void 0&&(r=!1);var n=Tl(e),i=Tl(e)&&hct(e),o=fu(e),s=Vh(t,i,r),u={scrollLeft:0,scrollTop:0},h={x:0,y:0};return(n||!n&&!r)&&((Vl(e)!=="body"||Pb(o))&&(u=B5(e)),Tl(e)?(h=Vh(e,!0),h.x+=e.clientLeft,h.y+=e.clientTop):o&&(h.x=Ob(o))),{x:s.left+u.scrollLeft-h.x,y:s.top+u.scrollTop-h.y,width:s.width,height:s.height}}function dct(t){var e=new Map,r=new Set,n=[];t.forEach(function(o){e.set(o.name,o)});function i(o){r.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(u){if(!r.has(u)){var h=e.get(u);h&&i(h)}}),n.push(o)}return t.forEach(function(o){r.has(o.name)||i(o)}),n}function j5(t){var e=dct(t);return Lhe.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function U5(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function V5(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var Zhe={placement:"bottom",modifiers:[],strategy:"absolute"};function Yhe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Xhe(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,o=i===void 0?Zhe:i;return function(u,h,y){y===void 0&&(y=o);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zhe,o),modifiersData:{},elements:{reference:u,popper:h},attributes:{},styles:{}},T=[],I=!1,P={state:w,setOptions:function(G){var q=typeof G=="function"?G(w.options):G;R(),w.options=Object.assign({},o,w.options,q),w.scrollParents={reference:Uh(u)?Bv(u):u.contextElement?Bv(u.contextElement):[],popper:Bv(h)};var V=j5(V5([].concat(n,w.options.modifiers)));return w.orderedModifiers=V.filter(function(p){return p.enabled}),L(),P.update()},forceUpdate:function(){if(!I){var G=w.elements,q=G.reference,V=G.popper;if(Yhe(q,V)){w.rects={reference:z5(q,Md(V),w.options.strategy==="fixed"),popper:kb(V)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(me){return w.modifiersData[me.name]=Object.assign({},me.data)});for(var p=0;p<w.orderedModifiers.length;p++){if(w.reset===!0){w.reset=!1,p=-1;continue}var K=w.orderedModifiers[p],j=K.fn,Q=K.options,ee=Q===void 0?{}:Q,se=K.name;typeof j=="function"&&(w=j({state:w,options:ee,name:se,instance:P})||w)}}}},update:U5(function(){return new Promise(function(W){P.forceUpdate(),W(w)})}),destroy:function(){R(),I=!0}};if(!Yhe(u,h))return P;P.setOptions(y).then(function(W){!I&&y.onFirstUpdate&&y.onFirstUpdate(W)});function L(){w.orderedModifiers.forEach(function(W){var G=W.name,q=W.options,V=q===void 0?{}:q,p=W.effect;if(typeof p=="function"){var K=p({state:w,name:G,instance:P,options:V}),j=function(){};T.push(K||j)}})}function R(){T.forEach(function(W){return W()}),T=[]}return P}}var pct=[zhe,Ghe,Bhe,uE,$he,Uhe,Khe,qhe,Whe],H5=Xhe({defaultModifiers:pct});var mct="tippy-box",sde="tippy-content",gct="tippy-backdrop",lde="tippy-arrow",ude="tippy-svg-arrow",Mb={passive:!0,capture:!0},cde=function(){return document.body};function W5(t,e,r){if(Array.isArray(t)){var n=t[e];return n??(Array.isArray(r)?r[e]:r)}return t}function X5(t,e){var r={}.toString.call(t);return r.indexOf("[object")===0&&r.indexOf(e+"]")>-1}function fde(t,e){return typeof t=="function"?t.apply(void 0,e):t}function Jhe(t,e){if(e===0)return t;var r;return function(n){clearTimeout(r),r=setTimeout(function(){t(n)},e)}}function vct(t){return t.split(/\s+/).filter(Boolean)}function vx(t){return[].concat(t)}function Qhe(t,e){t.indexOf(e)===-1&&t.push(e)}function yct(t){return t.filter(function(e,r){return t.indexOf(e)===r})}function bct(t){return t.split("-")[0]}function WI(t){return[].slice.call(t)}function ede(t){return Object.keys(t).reduce(function(e,r){return t[r]!==void 0&&(e[r]=t[r]),e},{})}function gE(){return document.createElement("div")}function $I(t){return["Element","Fragment"].some(function(e){return X5(t,e)})}function _ct(t){return X5(t,"NodeList")}function xct(t){return X5(t,"MouseEvent")}function wct(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function Sct(t){return $I(t)?[t]:_ct(t)?WI(t):Array.isArray(t)?t:WI(document.querySelectorAll(t))}function $5(t,e){t.forEach(function(r){r&&(r.style.transitionDuration=e+"ms")})}function tde(t,e){t.forEach(function(r){r&&r.setAttribute("data-state",e)})}function Ect(t){var e,r=vx(t),n=r[0];return n!=null&&(e=n.ownerDocument)!=null&&e.body?n.ownerDocument:document}function Tct(t,e){var r=e.clientX,n=e.clientY;return t.every(function(i){var o=i.popperRect,s=i.popperState,u=i.props,h=u.interactiveBorder,y=bct(s.placement),w=s.modifiersData.offset;if(!w)return!0;var T=y==="bottom"?w.top.y:0,I=y==="top"?w.bottom.y:0,P=y==="right"?w.left.x:0,L=y==="left"?w.right.x:0,R=o.top-n+T>h,W=n-o.bottom-I>h,G=o.left-r+P>h,q=r-o.right-L>h;return R||W||G||q})}function G5(t,e,r){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[n](i,r)})}function rde(t,e){for(var r=e;r;){var n;if(t.contains(r))return!0;r=r.getRootNode==null||(n=r.getRootNode())==null?void 0:n.host}return!1}var Wp={isTouch:!1},nde=0;function Act(){Wp.isTouch||(Wp.isTouch=!0,window.performance&&document.addEventListener("mousemove",hde))}function hde(){var t=performance.now();t-nde<20&&(Wp.isTouch=!1,document.removeEventListener("mousemove",hde)),nde=t}function kct(){var t=document.activeElement;if(wct(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Cct(){document.addEventListener("touchstart",Act,Mb),window.addEventListener("blur",kct)}var Ict=typeof window<"u"&&typeof document<"u",Dct=Ict?!!window.msCrypto:!1;var Oct={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Pct={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Rd=Object.assign({appendTo:cde,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Oct,Pct),Mct=Object.keys(Rd),Lct=function(e){var r=Object.keys(e);r.forEach(function(n){Rd[n]=e[n]})};function dde(t){var e=t.plugins||[],r=e.reduce(function(n,i){var o=i.name,s=i.defaultValue;if(o){var u;n[o]=t[o]!==void 0?t[o]:(u=Rd[o])!=null?u:s}return n},{});return Object.assign({},t,r)}function Rct(t,e){var r=e?Object.keys(dde(Object.assign({},Rd,{plugins:e}))):Mct,n=r.reduce(function(i,o){var s=(t.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch{i[o]=s}return i},{});return n}function ide(t,e){var r=Object.assign({},e,{content:fde(e.content,[t])},e.ignoreAttributes?{}:Rct(t,e.plugins));return r.aria=Object.assign({},Rd.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?e.interactive:r.aria.expanded,content:r.aria.content==="auto"?e.interactive?null:"describedby":r.aria.content},r}var Fct=function(){return"innerHTML"};function Z5(t,e){t[Fct()]=e}function ode(t){var e=gE();return t===!0?e.className=lde:(e.className=ude,$I(t)?e.appendChild(t):Z5(e,t)),e}function ade(t,e){$I(e.content)?(Z5(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Z5(t,e.content):t.textContent=e.content)}function Y5(t){var e=t.firstElementChild,r=WI(e.children);return{box:e,content:r.find(function(n){return n.classList.contains(sde)}),arrow:r.find(function(n){return n.classList.contains(lde)||n.classList.contains(ude)}),backdrop:r.find(function(n){return n.classList.contains(gct)})}}function pde(t){var e=gE(),r=gE();r.className=mct,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var n=gE();n.className=sde,n.setAttribute("data-state","hidden"),ade(n,t.props),e.appendChild(r),r.appendChild(n),i(t.props,t.props);function i(o,s){var u=Y5(e),h=u.box,y=u.content,w=u.arrow;s.theme?h.setAttribute("data-theme",s.theme):h.removeAttribute("data-theme"),typeof s.animation=="string"?h.setAttribute("data-animation",s.animation):h.removeAttribute("data-animation"),s.inertia?h.setAttribute("data-inertia",""):h.removeAttribute("data-inertia"),h.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?h.setAttribute("role",s.role):h.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&ade(y,t.props),s.arrow?w?o.arrow!==s.arrow&&(h.removeChild(w),h.appendChild(ode(s.arrow))):h.appendChild(ode(s.arrow)):w&&h.removeChild(w)}return{popper:e,onUpdate:i}}pde.$$tippy=!0;var qct=1,HI=[],K5=[];function Nct(t,e){var r=ide(t,Object.assign({},Rd,dde(ede(e)))),n,i,o,s=!1,u=!1,h=!1,y=!1,w,T,I,P=[],L=Jhe(Br,r.interactiveDebounce),R,W=qct++,G=null,q=yct(r.plugins),V={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:W,reference:t,popper:gE(),popperInstance:G,props:r,state:V,plugins:q,clearDelayTimeouts:sr,setProps:He,setContent:Xe,show:Rt,hide:xr,hideWithInteractivity:Yn,enable:er,disable:ir,unmount:kn,destroy:Cn};if(!r.render)return p;var K=r.render(p),j=K.popper,Q=K.onUpdate;j.setAttribute("data-tippy-root",""),j.id="tippy-"+p.id,p.popper=j,t._tippy=p,j._tippy=p;var ee=q.map(function(wt){return wt.fn(p)}),se=t.hasAttribute("aria-expanded");return zr(),ye(),de(),we("onCreate",[p]),r.showOnCreate&&Tt(),j.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),j.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&he().addEventListener("mousemove",L)}),p;function me(){var wt=p.props.touch;return Array.isArray(wt)?wt:[wt,0]}function ve(){return me()[0]==="hold"}function U(){var wt;return!!((wt=p.props.render)!=null&&wt.$$tippy)}function $(){return R||t}function he(){var wt=$().parentNode;return wt?Ect(wt):document}function Ce(){return Y5(j)}function Se(wt){return p.state.isMounted&&!p.state.isVisible||Wp.isTouch||w&&w.type==="focus"?0:W5(p.props.delay,wt?0:1,Rd.delay)}function de(wt){wt===void 0&&(wt=!1),j.style.pointerEvents=p.props.interactive&&!wt?"":"none",j.style.zIndex=""+p.props.zIndex}function we(wt,Ot,wr){if(wr===void 0&&(wr=!0),ee.forEach(function(on){on[wt]&&on[wt].apply(on,Ot)}),wr){var tr;(tr=p.props)[wt].apply(tr,Ot)}}function Ue(){var wt=p.props.aria;if(wt.content){var Ot="aria-"+wt.content,wr=j.id,tr=vx(p.props.triggerTarget||t);tr.forEach(function(on){var pn=on.getAttribute(Ot);if(p.state.isVisible)on.setAttribute(Ot,pn?pn+" "+wr:wr);else{var tn=pn&&pn.replace(wr,"").trim();tn?on.setAttribute(Ot,tn):on.removeAttribute(Ot)}})}}function ye(){if(!(se||!p.props.aria.expanded)){var wt=vx(p.props.triggerTarget||t);wt.forEach(function(Ot){p.props.interactive?Ot.setAttribute("aria-expanded",p.state.isVisible&&Ot===$()?"true":"false"):Ot.removeAttribute("aria-expanded")})}}function ne(){he().removeEventListener("mousemove",L),HI=HI.filter(function(wt){return wt!==L})}function st(wt){if(!(Wp.isTouch&&(h||wt.type==="mousedown"))){var Ot=wt.composedPath&&wt.composedPath()[0]||wt.target;if(!(p.props.interactive&&rde(j,Ot))){if(vx(p.props.triggerTarget||t).some(function(wr){return rde(wr,Ot)})){if(Wp.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else we("onClickOutside",[p,wt]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),u=!0,setTimeout(function(){u=!1}),p.state.isMounted||ut())}}}function dt(){h=!0}function lt(){h=!1}function kt(){var wt=he();wt.addEventListener("mousedown",st,!0),wt.addEventListener("touchend",st,Mb),wt.addEventListener("touchstart",lt,Mb),wt.addEventListener("touchmove",dt,Mb)}function ut(){var wt=he();wt.removeEventListener("mousedown",st,!0),wt.removeEventListener("touchend",st,Mb),wt.removeEventListener("touchstart",lt,Mb),wt.removeEventListener("touchmove",dt,Mb)}function Ut(wt,Ot){Ht(wt,function(){!p.state.isVisible&&j.parentNode&&j.parentNode.contains(j)&&Ot()})}function Wt(wt,Ot){Ht(wt,Ot)}function Ht(wt,Ot){var wr=Ce().box;function tr(on){on.target===wr&&(G5(wr,"remove",tr),Ot())}if(wt===0)return Ot();G5(wr,"remove",T),G5(wr,"add",tr),T=tr}function pr(wt,Ot,wr){wr===void 0&&(wr=!1);var tr=vx(p.props.triggerTarget||t);tr.forEach(function(on){on.addEventListener(wt,Ot,wr),P.push({node:on,eventType:wt,handler:Ot,options:wr})})}function zr(){ve()&&(pr("touchstart",Qr,{passive:!0}),pr("touchend",Rr,{passive:!0})),vct(p.props.trigger).forEach(function(wt){if(wt!=="manual")switch(pr(wt,Qr),wt){case"mouseenter":pr("mouseleave",Rr);break;case"focus":pr(Dct?"focusout":"blur",Be);break;case"focusin":pr("focusout",Be);break}})}function Jt(){P.forEach(function(wt){var Ot=wt.node,wr=wt.eventType,tr=wt.handler,on=wt.options;Ot.removeEventListener(wr,tr,on)}),P=[]}function Qr(wt){var Ot,wr=!1;if(!(!p.state.isEnabled||Ge(wt)||u)){var tr=((Ot=w)==null?void 0:Ot.type)==="focus";w=wt,R=wt.currentTarget,ye(),!p.state.isVisible&&xct(wt)&&HI.forEach(function(on){return on(wt)}),wt.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||s)&&p.props.hideOnClick!==!1&&p.state.isVisible?wr=!0:Tt(wt),wt.type==="click"&&(s=!wr),wr&&!tr&&ar(wt)}}function Br(wt){var Ot=wt.target,wr=$().contains(Ot)||j.contains(Ot);if(!(wt.type==="mousemove"&&wr)){var tr=Ct().concat(j).map(function(on){var pn,tn=on._tippy,Rn=(pn=tn.popperInstance)==null?void 0:pn.state;return Rn?{popperRect:on.getBoundingClientRect(),popperState:Rn,props:r}:null}).filter(Boolean);Tct(tr,wt)&&(ne(),ar(wt))}}function Rr(wt){var Ot=Ge(wt)||p.props.trigger.indexOf("click")>=0&&s;if(!Ot){if(p.props.interactive){p.hideWithInteractivity(wt);return}ar(wt)}}function Be(wt){p.props.trigger.indexOf("focusin")<0&&wt.target!==$()||p.props.interactive&&wt.relatedTarget&&j.contains(wt.relatedTarget)||ar(wt)}function Ge(wt){return Wp.isTouch?ve()!==wt.type.indexOf("touch")>=0:!1}function vt(){Kt();var wt=p.props,Ot=wt.popperOptions,wr=wt.placement,tr=wt.offset,on=wt.getReferenceClientRect,pn=wt.moveTransition,tn=U()?Y5(j).arrow:null,Rn=on?{getBoundingClientRect:on,contextElement:on.contextElement||$()}:t,Si={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(ze){var mt=ze.state;if(U()){var Ft=Ce(),fr=Ft.box;["placement","reference-hidden","escaped"].forEach(function(yr){yr==="placement"?fr.setAttribute("data-placement",mt.placement):mt.attributes.popper["data-popper-"+yr]?fr.setAttribute("data-"+yr,""):fr.removeAttribute("data-"+yr)}),mt.attributes.popper={}}}},Ei=[{name:"offset",options:{offset:tr}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!pn}},Si];U()&&tn&&Ei.push({name:"arrow",options:{element:tn,padding:3}}),Ei.push.apply(Ei,Ot?.modifiers||[]),p.popperInstance=H5(Rn,j,Object.assign({},Ot,{placement:wr,onFirstUpdate:I,modifiers:Ei}))}function Kt(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function rt(){var wt=p.props.appendTo,Ot,wr=$();p.props.interactive&&wt===cde||wt==="parent"?Ot=wr.parentNode:Ot=fde(wt,[wr]),Ot.contains(j)||Ot.appendChild(j),p.state.isMounted=!0,vt()}function Ct(){return WI(j.querySelectorAll("[data-tippy-root]"))}function Tt(wt){p.clearDelayTimeouts(),wt&&we("onTrigger",[p,wt]),kt();var Ot=Se(!0),wr=me(),tr=wr[0],on=wr[1];Wp.isTouch&&tr==="hold"&&on&&(Ot=on),Ot?n=setTimeout(function(){p.show()},Ot):p.show()}function ar(wt){if(p.clearDelayTimeouts(),we("onUntrigger",[p,wt]),!p.state.isVisible){ut();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(wt.type)>=0&&s)){var Ot=Se(!1);Ot?i=setTimeout(function(){p.state.isVisible&&p.hide()},Ot):o=requestAnimationFrame(function(){p.hide()})}}function er(){p.state.isEnabled=!0}function ir(){p.hide(),p.state.isEnabled=!1}function sr(){clearTimeout(n),clearTimeout(i),cancelAnimationFrame(o)}function He(wt){if(!p.state.isDestroyed){we("onBeforeUpdate",[p,wt]),Jt();var Ot=p.props,wr=ide(t,Object.assign({},Ot,ede(wt),{ignoreAttributes:!0}));p.props=wr,zr(),Ot.interactiveDebounce!==wr.interactiveDebounce&&(ne(),L=Jhe(Br,wr.interactiveDebounce)),Ot.triggerTarget&&!wr.triggerTarget?vx(Ot.triggerTarget).forEach(function(tr){tr.removeAttribute("aria-expanded")}):wr.triggerTarget&&t.removeAttribute("aria-expanded"),ye(),de(),Q&&Q(Ot,wr),p.popperInstance&&(vt(),Ct().forEach(function(tr){requestAnimationFrame(tr._tippy.popperInstance.forceUpdate)})),we("onAfterUpdate",[p,wt])}}function Xe(wt){p.setProps({content:wt})}function Rt(){var wt=p.state.isVisible,Ot=p.state.isDestroyed,wr=!p.state.isEnabled,tr=Wp.isTouch&&!p.props.touch,on=W5(p.props.duration,0,Rd.duration);if(!(wt||Ot||wr||tr)&&!$().hasAttribute("disabled")&&(we("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,U()&&(j.style.visibility="visible"),de(),kt(),p.state.isMounted||(j.style.transition="none"),U()){var pn=Ce(),tn=pn.box,Rn=pn.content;$5([tn,Rn],0)}I=function(){var Ei;if(!(!p.state.isVisible||y)){if(y=!0,j.offsetHeight,j.style.transition=p.props.moveTransition,U()&&p.props.animation){var qe=Ce(),ze=qe.box,mt=qe.content;$5([ze,mt],on),tde([ze,mt],"visible")}Ue(),ye(),Qhe(K5,p),(Ei=p.popperInstance)==null||Ei.forceUpdate(),we("onMount",[p]),p.props.animation&&U()&&Wt(on,function(){p.state.isShown=!0,we("onShown",[p])})}},rt()}}function xr(){var wt=!p.state.isVisible,Ot=p.state.isDestroyed,wr=!p.state.isEnabled,tr=W5(p.props.duration,1,Rd.duration);if(!(wt||Ot||wr)&&(we("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,y=!1,s=!1,U()&&(j.style.visibility="hidden"),ne(),ut(),de(!0),U()){var on=Ce(),pn=on.box,tn=on.content;p.props.animation&&($5([pn,tn],tr),tde([pn,tn],"hidden"))}Ue(),ye(),p.props.animation?U()&&Ut(tr,p.unmount):p.unmount()}}function Yn(wt){he().addEventListener("mousemove",L),Qhe(HI,L),L(wt)}function kn(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Kt(),Ct().forEach(function(wt){wt._tippy.unmount()}),j.parentNode&&j.parentNode.removeChild(j),K5=K5.filter(function(wt){return wt!==p}),p.state.isMounted=!1,we("onHidden",[p]))}function Cn(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),Jt(),delete t._tippy,p.state.isDestroyed=!0,we("onDestroy",[p]))}}function vE(t,e){e===void 0&&(e={});var r=Rd.plugins.concat(e.plugins||[]);Cct();var n=Object.assign({},e,{plugins:r}),i=Sct(t);if(0)var o,s;var u=i.reduce(function(h,y){var w=y&&Nct(y,n);return w&&h.push(w),h},[]);return $I(t)?u[0]:u}vE.defaultProps=Rd;vE.setDefaultProps=Lct;vE.currentInput=Wp;var bUt=Object.assign({},uE,{effect:function(e){var r=e.state,n={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,n.popper),r.styles=n,r.elements.arrow&&Object.assign(r.elements.arrow.style,n.arrow)}});vE.setDefaultProps({render:pde});var GI=vE;function jv(t){return Object.prototype.toString.call(t)==="[object Array]"}function r4(t){return t instanceof Function}function KI(t){return Object.prototype.toString.call(t)==="[object Object]"&&!r4(t)&&t instanceof Object}function e4(t,e){for(var r in e)r!=="__proto__"&&(KI(e[r])||jv(e[r])?(KI(e[r])&&!KI(t[r])&&(t[r]={}),jv(e[r])&&!jv(t[r])&&(t[r]=[]),e4(t[r],e[r])):e[r]!==void 0&&(t[r]=e[r]))}function ms(t,e){var r={};return e4(r,t),e4(r,e),r}var Bct=/^(\d\d\d\d)(?:-)?(\d\d)(?:-)?(\d\d)$/i;function zct(t){for(var e=0;e<t.length;e++)for(var r=t[e].data,n=0;n<r.length;n++)if(r[n][1]<0)return!0;return!1}function ig(t){return""+t}function Gp(t){return parseFloat(t)}function $p(t){if(t instanceof Date)return t;if(typeof t=="number")return new Date(t*1e3);var e=ig(t),r=e.match(Bct);if(r){var n=parseInt(r[1],10),i=parseInt(r[2],10)-1,o=parseInt(r[3],10);return new Date(n,i,o)}else{var s=e.replace(/ /,"T").replace(" ","").replace("UTC","Z");return new Date(Date.parse(s)||e)}}function n4(t){if(jv(t))return t;var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push([r,t[r]]);return e}function _E(t,e,r,n,i,o,s,u){return function(h,y,w){var T=h.data,I=ms({},t);return I=ms(I,w||{}),(h.singleSeriesFormat||"legend"in y)&&e(I,y.legend,h.singleSeriesFormat),y.title&&r(I,y.title),"min"in y?n(I,y.min):zct(T)||n(I,0),y.max&&i(I,y.max),"stacked"in y&&o(I,y.stacked),y.colors&&(I.colors=y.colors),y.xtitle&&s(I,y.xtitle),y.ytitle&&u(I,y.ytitle),I=ms(I,y.library||{}),I}}function jct(t,e){return t[0].getTime()-e[0].getTime()}function i4(t,e){return t[0]-e[0]}function _de(t,e){return t-e}function yx(t,e){for(var r=0;r<t.length;r++)if(!e(t[r]))return!1;return!0}function Uct(t){return t==="day"||t==="week"||t==="month"||t==="year"}function xde(t,e){if(e===void 0&&(e=!1),t.length===0)return null;var r=yx(t,function(y){return y.getMilliseconds()===0&&y.getSeconds()===0});if(!r)return null;var n=yx(t,function(y){return y.getMinutes()===0});if(!n)return"minute";var i=yx(t,function(y){return y.getHours()===0});if(!i)return"hour";if(e)return"day";var o=yx(t,function(y){return y.getDate()===1});if(!o){var s=t[0].getDay(),u=yx(t,function(y){return y.getDay()===s});return u?"week":"day"}var h=yx(t,function(y){return y.getMonth()===0});return h?"year":"month"}function J5(t){return!isNaN($p(t))&&ig(t).length>=6}function Vct(t){return typeof t=="number"}var mde=["bytes","KB","MB","GB","TB","PB","EB"];function Fd(t,e,r,n){t=t||"",r.prefix&&(e<0&&(e=e*-1,t+="-"),t+=r.prefix);var i=r.suffix||"",o=r.precision,s=r.round;if(r.byteScale){var u=e>=0;u||(e*=-1);var h=n?r.byteScale:e,y;h>=1152921504606847e3?(e/=1152921504606847e3,y=6):h>=0x4000000000000?(e/=0x4000000000000,y=5):h>=1099511627776?(e/=1099511627776,y=4):h>=1073741824?(e/=1073741824,y=3):h>=1048576?(e/=1048576,y=2):h>=1024?(e/=1024,y=1):y=0,o===void 0&&s===void 0&&(e>=1023.5&&y<mde.length-1&&(e=1,y+=1),o=e>=1e3?4:3),i=" "+mde[y],u||(e*=-1)}if(o!==void 0&&s!==void 0)throw Error("Use either round or precision, not both");if(!n&&(o!==void 0&&(e=e.toPrecision(o),r.zeros||(e=parseFloat(e))),s!==void 0))if(s<0){var w=Math.pow(10,-1*s);e=parseInt((1*e/w).toFixed(0))*w}else e=e.toFixed(s),r.zeros||(e=parseFloat(e));if(r.thousands||r.decimal){e=ig(e);var T=e.split(".");e=T[0],r.thousands&&(e=e.replace(/\B(?=(\d{3})+(?!\d))/g,r.thousands)),T.length>1&&(e+=(r.decimal||".")+T[1])}return t+e+i}function gde(t,e,r){return r in e?e[r]:r in t.options?t.options[r]:null}var o4={maintainAspectRatio:!1,animation:!1,plugins:{legend:{},tooltip:{displayColors:!1,callbacks:{}},title:{font:{size:20},color:"#333"}},interaction:{}},wde={scales:{y:{ticks:{maxTicksLimit:4},title:{font:{size:16},color:"#333"},grid:{}},x:{grid:{drawOnChartArea:!1},title:{font:{size:16},color:"#333"},time:{},ticks:{}}}},Sde=["#3366CC","#DC3912","#FF9900","#109618","#990099","#3B3EAC","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#329262","#5574A6","#651067"];function a4(t,e,r){e!==void 0?(t.plugins.legend.display=!!e,e&&e!==!0&&(t.plugins.legend.position=e)):r&&(t.plugins.legend.display=!1)}function s4(t,e){t.plugins.title.display=!0,t.plugins.title.text=e}function Hct(t,e){e!==null&&(t.scales.y.min=Gp(e))}function Wct(t,e){t.scales.y.max=Gp(e)}function $ct(t,e){e!==null&&(t.scales.x.min=Gp(e))}function Gct(t,e){t.scales.x.max=Gp(e)}function Ede(t,e){t.scales.x.stacked=!!e,t.scales.y.stacked=!!e}function Tde(t,e){t.scales.x.title.display=!0,t.scales.x.title.text=e}function Ade(t,e){t.scales.y.title.display=!0,t.scales.y.title.text=e}function vde(t,e){var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?"rgba("+parseInt(r[1],16)+", "+parseInt(r[2],16)+", "+parseInt(r[3],16)+", "+e+")":t}function zv(t){return t!=null}function Kct(t,e,r){var n=Math.ceil(t.element.offsetWidth/4/e.labels.length);n>25?n=25:n<10&&(n=10),r.scales.x.ticks.callback||(r.scales.x.ticks.callback=function(i){return i=ig(this.getLabelForValue(i)),i.length>n?i.substring(0,n-2)+"...":i})}function Zct(t){for(var e=1,r=Yct(t);r>=1024;)e*=1024,r/=1024;return e}function XI(t,e,r){var n={thousands:t.options.thousands,decimal:t.options.decimal},i=ms({prefix:t.options.prefix,suffix:t.options.suffix,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros},n);if(t.options.bytes){var o=t.data;r==="pie"&&(o=[{data:o}]),i.byteScale=Zct(o)}if(r!=="pie"){var s=e.scales.y;r==="bar"&&(s=e.scales.x),i.byteScale&&(s.ticks.stepSize||(s.ticks.stepSize=i.byteScale/2),s.ticks.maxTicksLimit||(s.ticks.maxTicksLimit=4)),s.ticks.callback||(s.ticks.callback=function(h){return Fd("",h,i,!0)}),(r==="scatter"||r==="bubble")&&!e.scales.x.ticks.callback&&(e.scales.x.ticks.callback=function(h){return Fd("",h,n,!0)})}if(!e.plugins.tooltip.callbacks.label)if(r==="scatter")e.plugins.tooltip.callbacks.label=function(h){var y=h.dataset.label||"";y&&(y+=": ");var w=h.parsed;return y+"("+Fd("",w.x,n)+", "+Fd("",w.y,i)+")"};else if(r==="bubble")e.plugins.tooltip.callbacks.label=function(h){var y=h.dataset.label||"";y&&(y+=": ");var w=h.raw;return y+"("+Fd("",w.x,n)+", "+Fd("",w.y,i)+", "+Fd("",w.v,n)+")"};else if(r==="pie")e.plugins.tooltip.callbacks.label=function(h){return Fd("",h.parsed,i)};else{var u=r==="bar"?"x":"y";e.plugins.tooltip.callbacks.label=function(h){if(h.parsed[u]!==null){var y=h.dataset.label||"";return y&&(y+=": "),Fd(y,h.parsed[u],i)}}}(r==="line"||r==="area")&&t.xtype==="number"&&(e.scales.x.ticks.callback||(e.scales.x.ticks.callback=function(h){return ig(h)}),e.plugins.tooltip.callbacks.title||(e.plugins.tooltip.callbacks.title=function(h){return ig(h[0].parsed.x)}))}function Yct(t){for(var e=0,r=0;r<t.length;r++)for(var n=t[r].data,i=0;i<n.length;i++){var o=Math.abs(n[i][1]);o>e&&(e=o)}return e}function Xct(t){for(var e=0,r=0;r<t.length;r++)for(var n=t[r].data,i=0;i<n.length;i++){var o=n[i][2];o>e&&(e=o)}return e}var l4=_E(ms(o4,wde),a4,s4,Hct,Wct,Ede,Tde,Ade);function Jct(t){for(var e=t.data,r={},n=[],i=[],o=[],s=0;s<e.length;s++)for(var u=e[s].data,h=0;h<u.length;h++){var y=u[h],w=t.xtype==="datetime"?y[0].getTime():y[0];r[w]||(r[w]=new Array(e.length),n.push(w)),r[w][s]=y[1]}(t.xtype==="datetime"||t.xtype==="number")&&n.sort(_de);for(var T=0;T<e.length;T++)o.push([]);for(var I=0;I<n.length;I++){var P=n[I],L=t.xtype==="datetime"?new Date(P):P;i.push(L);for(var R=r[P],W=0;W<e.length;W++){var G=R[W];o[W].push(G===void 0?null:G)}}return{labels:i,values:o}}function Qct(t){for(var e=t.data,r=[],n=Xct(e),i=0;i<e.length;i++){for(var o=e[i].data,s=[],u=0;u<o.length;u++){var h=o[u];s.push({x:h[0],y:h[1],r:h[2]*20/n,v:h[2]})}r.push(s)}return{labels:[],values:r}}function eft(t){for(var e=t.data,r=[],n=0;n<e.length;n++){var i=e[n].data;i.sort(i4);for(var o=[],s=0;s<i.length;s++){var u=i[s];o.push({x:u[0],y:u[1]})}r.push(o)}return{labels:[],values:r}}function tft(t,e){return e==="bubble"?Qct(t):t.xtype==="number"&&e!=="bar"&&e!=="column"?eft(t):Jct(t)}function u4(t,e,r){for(var n=tft(t,r),i=n.labels,o=n.values,s=t.data,u=[],h=t.options.colors||Sde,y=0;y<s.length;y++){var w=s[y],T=void 0,I=void 0;if(t.options.colors&&t.singleSeriesFormat&&(r==="bar"||r==="column")&&!w.color&&jv(t.options.colors)&&!jv(t.options.colors[0])){T=h,I=[];for(var P=0;P<h.length;P++)I[P]=vde(T[P],.5)}else T=w.color||h[y],I=r!=="line"?vde(T,.5):T;var L={label:w.name||"",data:o[y],fill:r==="area",borderColor:T,backgroundColor:I,borderWidth:2},R=r==="line"||r==="area"||r==="scatter"||r==="bubble";R&&(L.pointBackgroundColor=T,L.pointHoverBackgroundColor=T,L.pointHitRadius=50),r==="bubble"&&(L.pointBackgroundColor=I,L.pointHoverBackgroundColor=I,L.pointHoverBorderWidth=2),w.stack&&(L.stack=w.stack);var W=gde(t,w,"curve");W===!1?L.tension=0:R&&(L.tension=.4);var G=gde(t,w,"points");G===!1&&(L.pointRadius=0,L.pointHoverRadius=0),L=ms(L,t.options.dataset||{}),L=ms(L,w.library||{}),L=ms(L,w.dataset||{}),u.push(L)}var q=t.options.xmin,V=t.options.xmax;if(t.xtype==="datetime"?(zv(q)&&(e.scales.x.min=$p(q).getTime()),zv(V)&&(e.scales.x.max=$p(V).getTime())):t.xtype==="number"&&(zv(q)&&(e.scales.x.min=q),zv(V)&&(e.scales.x.max=V)),t.xtype==="datetime"){var p=xde(i);if(i.length===0&&(zv(q)&&i.push($p(q)),zv(V)&&i.push($p(V))),i.length>0){for(var K=(zv(q)?$p(q):i[0]).getTime(),j=(zv(V)?$p(V):i[0]).getTime(),Q=1;Q<i.length;Q++){var ee=i[Q].getTime();ee<K&&(K=ee),ee>j&&(j=ee)}var se=(j-K)/(86400*1e3);if(!e.scales.x.time.unit){var me;if(p==="year"||se>365*10?(e.scales.x.time.unit="year",me=365):p==="month"||se>30*10?(e.scales.x.time.unit="month",me=30):p==="week"||p==="day"||se>10?(e.scales.x.time.unit="day",me=1):p==="hour"||se>.5?(e.scales.x.time.displayFormats={hour:"MMM d, h a"},e.scales.x.time.unit="hour",me=1/24):p==="minute"&&(e.scales.x.time.displayFormats={minute:"h:mm a"},e.scales.x.time.unit="minute",me=1/24/60),me&&se>0){var ve=t.element.offsetWidth;if(ve>0){var U=Math.ceil(se/me/(ve/100));p==="week"&&me===1&&(U=Math.ceil(U/7)*7),e.scales.x.ticks.stepSize=U}}}e.scales.x.time.tooltipFormat||(p==="year"?e.scales.x.time.tooltipFormat="yyyy":p==="month"?e.scales.x.time.tooltipFormat="MMM yyyy":p==="week"||p==="day"?e.scales.x.time.tooltipFormat="PP":p==="hour"?e.scales.x.time.tooltipFormat="MMM d, h a":p==="minute"&&(e.scales.x.time.tooltipFormat="h:mm a"))}}return{labels:i,datasets:u}}var Kp=function(e){this.name="chartjs",this.library=e};Kp.prototype.renderLineChart=function(e,r){r||(r="line");var n={},i=l4(e,ms(n,e.options));XI(e,i,r);var o=u4(e,i,r);e.xtype==="number"?(i.scales.x.type=i.scales.x.type||"linear",i.scales.x.position=i.scales.x.position||"bottom"):i.scales.x.type=e.xtype==="string"?"category":"time",this.drawChart(e,"line",o,i)};Kp.prototype.renderPieChart=function(e){var r=ms({},o4);e.options.donut&&(r.cutout="50%"),"legend"in e.options&&a4(r,e.options.legend),e.options.title&&s4(r,e.options.title),r=ms(r,e.options.library||{}),XI(e,r,"pie");for(var n=[],i=[],o=0;o<e.data.length;o++){var s=e.data[o];n.push(s[0]),i.push(s[1])}var u={data:i,backgroundColor:e.options.colors||Sde};u=ms(u,e.options.dataset||{});var h={labels:n,datasets:[u]};this.drawChart(e,"pie",h,r)};Kp.prototype.renderColumnChart=function(e,r){var n;if(r==="bar"){var i=ms(o4,wde);i.indexAxis="y",i.scales.x.grid.drawOnChartArea=!0,i.scales.y.grid.drawOnChartArea=!1,delete i.scales.y.ticks.maxTicksLimit,n=_E(i,a4,s4,$ct,Gct,Ede,Tde,Ade)(e,e.options)}else n=l4(e,e.options);XI(e,n,r);var o=u4(e,n,"column");r!=="bar"&&Kct(e,o,n),"mode"in n.interaction||(n.interaction.mode="index"),this.drawChart(e,"bar",o,n)};Kp.prototype.renderAreaChart=function(e){this.renderLineChart(e,"area")};Kp.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};Kp.prototype.renderScatterChart=function(e,r){r=r||"scatter";var n=l4(e,e.options);XI(e,n,r),"showLine"in n||(n.showLine=!1);var i=u4(e,n,r);n.scales.x.type=n.scales.x.type||"linear",n.scales.x.position=n.scales.x.position||"bottom","mode"in n.interaction||(n.interaction.mode="nearest"),this.drawChart(e,r,i,n)};Kp.prototype.renderBubbleChart=function(e){this.renderScatterChart(e,"bubble")};Kp.prototype.destroy=function(e){e.chart&&e.chart.destroy()};Kp.prototype.drawChart=function(e,r,n,i){if(this.destroy(e),!e.destroyed){var o={type:r,data:n,options:i};e.options.code&&window.console.log("new Chart(ctx, "+JSON.stringify(o)+");"),e.element.innerHTML="<canvas></canvas>";var s=e.element.getElementsByTagName("CANVAS")[0];e.chart=new this.library(s,o)}};var kde={chart:{},xAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},yAxis:{title:{text:null},labels:{style:{fontSize:"12px"}}},title:{text:null},credits:{enabled:!1},legend:{borderWidth:0},tooltip:{style:{fontSize:"12px"}},plotOptions:{areaspline:{},area:{},series:{marker:{}}},time:{useUTC:!1}};function Cde(t,e,r){e!==void 0?(t.legend.enabled=!!e,e&&e!==!0&&(e==="top"||e==="bottom"?t.legend.verticalAlign=e:(t.legend.layout="vertical",t.legend.verticalAlign="middle",t.legend.align=e))):r&&(t.legend.enabled=!1)}function Ide(t,e){t.title.text=e}function rft(t,e){t.yAxis.min=e}function nft(t,e){t.yAxis.max=e}function ift(t,e){var r=e?e===!0?"normal":e:null;t.plotOptions.series.stacking=r,t.plotOptions.area.stacking=r,t.plotOptions.areaspline.stacking=r}function oft(t,e){t.xAxis.title.text=e}function aft(t,e){t.yAxis.title.text=e}var c4=_E(kde,Cde,Ide,rft,nft,ift,oft,aft);function f4(t,e,r){var n={prefix:t.options.prefix,suffix:t.options.suffix,thousands:t.options.thousands,decimal:t.options.decimal,precision:t.options.precision,round:t.options.round,zeros:t.options.zeros};r!=="pie"&&!jv(e.yAxis)&&!e.yAxis.labels.formatter&&(e.yAxis.labels.formatter=function(){return Fd("",this.value,n)}),!e.tooltip.pointFormatter&&!e.tooltip.pointFormat&&(e.tooltip.pointFormatter=function(){return'<span style="color:'+this.color+'">\u25CF</span> '+Fd(this.series.name+": <b>",this.y,n)+"</b><br/>"})}var og=function(e){this.name="highcharts",this.library=e};og.prototype.renderLineChart=function(e,r){r=r||"spline";var n={};r==="areaspline"&&(n={plotOptions:{areaspline:{stacking:"normal"},area:{stacking:"normal"},series:{marker:{enabled:!1}}}}),e.options.curve===!1&&(r==="areaspline"?r="area":r==="spline"&&(r="line"));var i=c4(e,e.options,n);e.xtype==="number"?i.xAxis.type=i.xAxis.type||"linear":i.xAxis.type=e.xtype==="string"?"category":"datetime",i.chart.type||(i.chart.type=r),f4(e,i,r);for(var o=e.data,s=0;s<o.length;s++){o[s].name=o[s].name||"Value";var u=o[s].data;if(e.xtype==="datetime")for(var h=0;h<u.length;h++)u[h][0]=u[h][0].getTime();else e.xtype==="number"&&u.sort(i4);o[s].marker={symbol:"circle"},e.options.points===!1&&(o[s].marker.enabled=!1)}this.drawChart(e,o,i)};og.prototype.renderScatterChart=function(e){var r=c4(e,e.options,{});r.chart.type="scatter",this.drawChart(e,e.data,r)};og.prototype.renderPieChart=function(e){var r=ms(kde,{});e.options.colors&&(r.colors=e.options.colors),e.options.donut&&(r.plotOptions={pie:{innerSize:"50%"}}),"legend"in e.options&&Cde(r,e.options.legend),e.options.title&&Ide(r,e.options.title);var n=ms(r,e.options.library||{});f4(e,n,"pie");var i=[{type:"pie",name:e.options.label||"Value",data:e.data}];this.drawChart(e,i,n)};og.prototype.renderColumnChart=function(e,r){r=r||"column";var n=e.data,i=c4(e,e.options),o=[],s=[];i.chart.type=r,f4(e,i,r);for(var u=0;u<n.length;u++)for(var h=n[u],y=0;y<h.data.length;y++){var w=h.data[y];o[w[0]]||(o[w[0]]=new Array(n.length),s.push(w[0])),o[w[0]][u]=w[1]}e.xtype==="number"&&s.sort(_de),i.xAxis.categories=s;for(var T=[],I=0;I<n.length;I++){for(var P=[],L=0;L<s.length;L++)P.push(o[s[L]][I]||0);var R={name:n[I].name||"Value",data:P};n[I].stack&&(R.stack=n[I].stack),T.push(R)}this.drawChart(e,T,i)};og.prototype.renderBarChart=function(e){this.renderColumnChart(e,"bar")};og.prototype.renderAreaChart=function(e){this.renderLineChart(e,"areaspline")};og.prototype.destroy=function(e){e.chart&&e.chart.destroy()};og.prototype.drawChart=function(e,r,n){this.destroy(e),!e.destroyed&&(n.chart.renderTo=e.element.id,n.series=r,e.options.code&&window.console.log("new Highcharts.Chart("+JSON.stringify(n)+");"),e.chart=new this.library.Chart(n))};var yde={},ZI=[],xE={chartArea:{},fontName:"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif",pointSize:6,legend:{textStyle:{fontSize:12,color:"#444"},alignment:"center",position:"right"},curveType:"function",hAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},gridlines:{color:"transparent"},baselineColor:"#ccc",viewWindow:{}},vAxis:{textStyle:{color:"#666",fontSize:12},titleTextStyle:{},baselineColor:"#ccc",viewWindow:{}},tooltip:{textStyle:{color:"#666",fontSize:12}}};function h4(t,e,r){if(e!==void 0){var n;e?e===!0?n="right":n=e:n="none",t.legend.position=n}else r&&(t.legend.position="none")}function d4(t,e){t.title=e,t.titleTextStyle={color:"#333",fontSize:"20px"}}function sft(t,e){t.vAxis.viewWindow.min=e}function lft(t,e){t.vAxis.viewWindow.max=e}function uft(t,e){t.hAxis.viewWindow.min=e}function cft(t,e){t.hAxis.viewWindow.max=e}function Dde(t,e){t.isStacked=e||!1}function Ode(t,e){t.hAxis.title=e,t.hAxis.titleTextStyle.italic=!1}function Pde(t,e){t.vAxis.title=e,t.vAxis.titleTextStyle.italic=!1}var JI=_E(xE,h4,d4,sft,lft,Dde,Ode,Pde);function fft(t){window.attachEvent?window.attachEvent("onresize",t):window.addEventListener&&window.addEventListener("resize",t,!0),t()}var Hc=function(e){this.name="google",this.library=e};Hc.prototype.renderLineChart=function(e){var r=this;this.waitForLoaded(e,function(){var n={};e.options.curve===!1&&(n.curveType="none"),e.options.points===!1&&(n.pointSize=0);var i=JI(e,e.options,n),o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"LineChart",o,i)})};Hc.prototype.renderPieChart=function(e){var r=this;this.waitForLoaded(e,function(){var n={chartArea:{top:"10%",height:"80%"},legend:{}};e.options.colors&&(n.colors=e.options.colors),e.options.donut&&(n.pieHole=.5),"legend"in e.options&&h4(n,e.options.legend),e.options.title&&d4(n,e.options.title);var i=ms(ms(xE,n),e.options.library||{}),o=new r.library.visualization.DataTable;o.addColumn("string",""),o.addColumn("number","Value"),o.addRows(e.data),r.drawChart(e,"PieChart",o,i)})};Hc.prototype.renderColumnChart=function(e){var r=this;this.waitForLoaded(e,function(){var n=JI(e,e.options),i=r.createDataTable(e.data,e.xtype);r.drawChart(e,"ColumnChart",i,n)})};Hc.prototype.renderBarChart=function(e){var r=this;this.waitForLoaded(e,function(){var n={hAxis:{gridlines:{color:"#ccc"}}},i=_E(xE,h4,d4,uft,cft,Dde,Ode,Pde)(e,e.options,n),o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"BarChart",o,i)})};Hc.prototype.renderAreaChart=function(e){var r=this;this.waitForLoaded(e,function(){var n={isStacked:!0,pointSize:0,areaOpacity:.5},i=JI(e,e.options,n),o=r.createDataTable(e.data,e.xtype);r.drawChart(e,"AreaChart",o,i)})};Hc.prototype.renderGeoChart=function(e){var r=this;this.waitForLoaded(e,"geochart",function(){var n={legend:"none",colorAxis:{colors:e.options.colors||["#f6c7b6","#ce502d"]}},i=ms(ms(xE,n),e.options.library||{}),o=new r.library.visualization.DataTable;o.addColumn("string",""),o.addColumn("number",e.options.label||"Value"),o.addRows(e.data),r.drawChart(e,"GeoChart",o,i)})};Hc.prototype.renderScatterChart=function(e){var r=this;this.waitForLoaded(e,function(){for(var n={},i=JI(e,e.options,n),o=e.data,s=[],u=0;u<o.length;u++){o[u].name=o[u].name||"Value";for(var h=o[u].data,y=0;y<h.length;y++){var w=new Array(o.length+1);w[0]=h[y][0],w[u+1]=h[y][1],s.push(w)}}var T=new r.library.visualization.DataTable;T.addColumn("number","");for(var I=0;I<o.length;I++)T.addColumn("number",o[I].name);T.addRows(s),r.drawChart(e,"ScatterChart",T,i)})};Hc.prototype.renderTimeline=function(e){var r=this;this.waitForLoaded(e,"timeline",function(){var n={legend:"none"};e.options.colors&&(n.colors=e.options.colors);var i=ms(ms(xE,n),e.options.library||{}),o=new r.library.visualization.DataTable;o.addColumn({type:"string",id:"Name"}),o.addColumn({type:"date",id:"Start"}),o.addColumn({type:"date",id:"End"}),o.addRows(e.data),e.element.style.lineHeight="normal",r.drawChart(e,"Timeline",o,i)})};Hc.prototype.destroy=function(e){e.chart&&e.chart.clearChart()};Hc.prototype.drawChart=function(e,r,n,i){this.destroy(e),!e.destroyed&&(e.options.code&&window.console.log("var data = new google.visualization.DataTable("+n.toJSON()+`);
var chart = new google.visualization.`+r+`(element);
chart.draw(data, `+JSON.stringify(i)+");"),e.chart=new this.library.visualization[r](e.element),fft(function(){e.chart.draw(n,i)}))};Hc.prototype.waitForLoaded=function(e,r,n){var i=this;if(n||(n=r,r="corechart"),ZI.push({pack:r,callback:n}),yde[r])this.runCallbacks();else{yde[r]=!0;var o={packages:[r],callback:function(){i.runCallbacks()}},s=e.__config();s.language&&(o.language=s.language),r==="geochart"&&s.mapsApiKey&&(o.mapsApiKey=s.mapsApiKey),this.library.charts.load("current",o)}};Hc.prototype.runCallbacks=function(){for(var e=0;e<ZI.length;e++){var r=ZI[e],n=this.library.visualization&&(r.pack==="corechart"&&this.library.visualization.LineChart||r.pack==="timeline"&&this.library.visualization.Timeline||r.pack==="geochart"&&this.library.visualization.GeoChart);n&&(r.callback(),ZI.splice(e,1),e--)}};Hc.prototype.createDataTable=function(e,r){for(var n=[],i=[],o=0;o<e.length;o++){var s=e[o];e[o].name=e[o].name||"Value";for(var u=0;u<s.data.length;u++){var h=s.data[u],y=r==="datetime"?h[0].getTime():h[0];n[y]||(n[y]=new Array(e.length),i.push(y)),n[y][o]=h[1]}}for(var w=[],T=[],I=0;I<i.length;I++){var P=i[I],L=void 0;r==="datetime"?(L=new Date(P),T.push(L)):L=P,w.push([L].concat(n[P]))}var R=!0;if(r==="datetime"){w.sort(jct);var W=xde(T,!0);R=Uct(W)}else if(r==="number"){w.sort(i4);for(var G=0;G<w.length;G++)w[G][0]=ig(w[G][0]);r="string"}var q=new this.library.visualization.DataTable;r=r==="datetime"&&R?"date":r,q.addColumn(r,"");for(var V=0;V<e.length;V++)q.addColumn("number",e[V].name);return q.addRows(w),q};var Lb=[];function hft(t){if(t){if(t.product==="Highcharts")return og;if(t.charts)return Hc;if(r4(t))return Kp}throw new Error("Unknown adapter")}function yE(t){for(var e=hft(t),r=0;r<Lb.length;r++)if(Lb[r].library===t)return;Lb.push(new e(t))}function dft(){"Chart"in window&&yE(window.Chart),"Highcharts"in window&&yE(window.Highcharts),window.google&&window.google.charts&&yE(window.google)}function pft(t,e){var r="render"+t,n=e.options.adapter;dft();for(var i=0;i<Lb.length;i++){var o=Lb[i];if((!n||n===o.name)&&r4(o[r]))return e.adapter=o.name,e.__adapterObject=o,o[r](e)}throw Lb.length>0?new Error("No charting library found for "+t):new Error("No charting libraries found - be sure to include one before your charts")}var Lo={charts:{},configure:function(t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(Lo.config[e]=t[e])},setDefaultOptions:function(t){Lo.options=t},eachChart:function(t){for(var e in Lo.charts)Object.prototype.hasOwnProperty.call(Lo.charts,e)&&t(Lo.charts[e])},destroyAll:function(){for(var t in Lo.charts)Object.prototype.hasOwnProperty.call(Lo.charts,t)&&(Lo.charts[t].destroy(),delete Lo.charts[t])},config:{},options:{},adapters:Lb,addAdapter:yE,use:function(t){return yE(t),Lo}};function mft(t){for(var e=[],r=0;r<t.length;r++)e.push([Gp(t[r][0]),Gp(t[r][1]),Gp(t[r][2])]);return e}function gft(t,e){if(e==="bubble")return mft(t);var r;e==="number"?r=Gp:e==="datetime"?r=$p:r=ig;for(var n=[],i=0;i<t.length;i++)n.push([r(t[i][0]),Gp(t[i][1])]);return n}function vft(t,e,r){return Lde(t)?(r.xmin||r.xmax)&&(!r.xmin||J5(r.xmin))&&(!r.xmax||J5(r.xmax))?"datetime":"number":bde(t,Vct)?"number":!e&&bde(t,J5)?"datetime":"string"}function bde(t,e){for(var r=0;r<t.length;r++)for(var n=n4(t[r].data),i=0;i<n.length;i++)if(!e(n[i][0]))return!1;return!0}function yft(t){for(var e=[],r=0;r<t.length;r++){var n={};for(var i in t[r])Object.prototype.hasOwnProperty.call(t[r],i)&&(n[i]=t[r][i]);e.push(n)}return e}function bx(t,e,r){var n=t.options,i=t.rawData;t.singleSeriesFormat=!jv(i)||!KI(i[0]),t.singleSeriesFormat&&(i=[{name:n.label,data:i}]),i=yft(i);for(var o=0;o<i.length;o++)i[o].data=n4(i[o].data);t.xtype=e||(n.discrete?"string":vft(i,r,n));for(var s=0;s<i.length;s++)i[s].data=gft(i[s].data,t.xtype);return i}function Mde(t){for(var e=n4(t.rawData),r=0;r<e.length;r++)e[r]=[ig(e[r][0]),Gp(e[r][1])];return e}function Lde(t,e){if(e==="PieChart"||e==="GeoChart"||e==="Timeline")return t.length===0;for(var r=0;r<t.length;r++)if(t[r].data.length>0)return!1;return!0}function bft(t){var e=t.options.download;e===!0?e={}:typeof e=="string"&&(e={filename:e});var r=document.createElement("a");r.download=e.filename||"chart.png",r.style.position="absolute",r.style.top="20px",r.style.right="20px",r.style.zIndex=1e3,r.style.lineHeight="20px",r.target="_blank";var n=document.createElement("img"),i='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path fill="#CCCCCC" d="M344 240h-56L287.1 152c0-13.25-10.75-24-24-24h-16C234.7 128 223.1 138.8 223.1 152L224 240h-56c-9.531 0-18.16 5.656-22 14.38C142.2 263.1 143.9 273.3 150.4 280.3l88.75 96C243.7 381.2 250.1 384 256.8 384c7.781-.3125 13.25-2.875 17.75-7.844l87.25-96c6.406-7.031 8.031-17.19 4.188-25.88S353.5 240 344 240zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM256 464c-114.7 0-208-93.31-208-208S141.3 48 256 48s208 93.31 208 208S370.7 464 256 464z"/></svg>';n.src="data:image/svg+xml;utf8,"+encodeURIComponent(i),n.alt="Download",n.style.width="20px",n.style.height="20px",n.style.border="none",r.appendChild(n);var o=t.element;o.style.position="relative",t.__downloadAttached=!0,t.__enterEvent=o.addEventListener("mouseover",function(s){var u=s.relatedTarget;(!u||u!==this&&!this.contains(u))&&t.options.download&&(r.href=t.toImage(e),o.appendChild(r))}),t.__leaveEvent=o.addEventListener("mouseout",function(s){var u=s.relatedTarget;(!u||u!==this&&!this.contains(u))&&r.parentNode&&r.parentNode.removeChild(r)})}var Rde=[],t4=0,_ft=4;function xft(t,e,r){Rde.push([t,e,r]),p4()}function p4(){if(t4<_ft){var t=Rde.shift();t&&(t4++,Sft(t[0],t[1],t[2]),p4())}}function wft(){t4--,p4()}function Sft(t,e,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.setRequestHeader("Content-Type","application/json"),n.onload=function(){wft(),n.status===200?e(JSON.parse(n.responseText)):r(n.statusText)},n.send()}function m4(t,e){t.textContent=e}function YI(t,e,r){r||(e="Error Loading Chart: "+e),m4(t,e),t.style.color="#ff0000"}function Q5(t){try{t.__render()}catch(e){throw YI(t.element,e.message),e}}function bE(t,e,r){if(r&&t.options.loading&&(typeof e=="string"||typeof e=="function")&&m4(t.element,t.options.loading),typeof e=="string")xft(e,function(n){t.rawData=n,Q5(t)},function(n){YI(t.element,n)});else if(typeof e=="function")try{e(function(n){t.rawData=n,Q5(t)},function(n){YI(t.element,n,!0)})}catch(n){YI(t.element,n,!0)}else t.rawData=e,Q5(t)}function Eft(t,e){if(Lde(e.data,t)){var r=e.options.empty||e.options.messages&&e.options.messages.empty||"No data";m4(e.element,r)}else pft(t,e),e.options.download&&!e.__downloadAttached&&e.adapter==="chartjs"&&bft(e)}function Tft(t){if(typeof t=="string"){var e=t;if(t=document.getElementById(t),!t)throw new Error("No element with id "+e)}return t}var Aa=function(e,r,n){this.element=Tft(e),this.options=ms(Lo.options,n||{}),this.dataSource=r,this.element.id&&(Lo.charts[this.element.id]=this),bE(this,r,!0),this.options.refresh&&this.startRefresh()};Aa.prototype.getElement=function(){return this.element};Aa.prototype.getDataSource=function(){return this.dataSource};Aa.prototype.getData=function(){return this.data};Aa.prototype.getOptions=function(){return this.options};Aa.prototype.getChartObject=function(){return this.chart};Aa.prototype.getAdapter=function(){return this.adapter};Aa.prototype.updateData=function(e,r){this.dataSource=e,r&&this.__updateOptions(r),bE(this,e,!0)};Aa.prototype.setOptions=function(e){this.__updateOptions(e),this.redraw()};Aa.prototype.redraw=function(){bE(this,this.rawData)};Aa.prototype.refreshData=function(){if(typeof this.dataSource=="string"){var e=this.dataSource.indexOf("?")===-1?"?":"&",r=this.dataSource+e+"_="+new Date().getTime();bE(this,r)}else typeof this.dataSource=="function"&&bE(this,this.dataSource)};Aa.prototype.startRefresh=function(){var e=this,r=this.options.refresh;if(r&&typeof this.dataSource!="string"&&typeof this.dataSource!="function")throw new Error("Data source must be a URL or callback for refresh");if(!this.intervalId)if(r)this.intervalId=setInterval(function(){e.refreshData()},r*1e3);else throw new Error("No refresh interval")};Aa.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};Aa.prototype.toImage=function(e){if(this.adapter==="chartjs")if(e&&e.background&&e.background!=="transparent"){var r=this.chart.canvas,n=this.chart.ctx,i=document.createElement("canvas"),o=i.getContext("2d");return i.width=n.canvas.width,i.height=n.canvas.height,o.fillStyle=e.background,o.fillRect(0,0,i.width,i.height),o.drawImage(r,0,0),i.toDataURL("image/png")}else return this.chart.toBase64Image();else throw new Error("Feature only available for Chart.js")};Aa.prototype.destroy=function(){this.destroyed=!0,this.stopRefresh(),this.__adapterObject&&this.__adapterObject.destroy(this),this.__enterEvent&&this.element.removeEventListener("mouseover",this.__enterEvent),this.__leaveEvent&&this.element.removeEventListener("mouseout",this.__leaveEvent)};Aa.prototype.__updateOptions=function(e){var r=e.refresh&&e.refresh!==this.options.refresh;this.options=ms(Lo.options,e),r&&(this.stopRefresh(),this.startRefresh())};Aa.prototype.__render=function(){this.data=this.__processData(),Eft(this.__chartName(),this)};Aa.prototype.__config=function(){return Lo.config};var Aft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this)},e.prototype.__chartName=function(){return"LineChart"},e}(Aa),kft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Mde(this)},e.prototype.__chartName=function(){return"PieChart"},e}(Aa),Cft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this,null,!0)},e.prototype.__chartName=function(){return"ColumnChart"},e}(Aa),Ift=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this,null,!0)},e.prototype.__chartName=function(){return"BarChart"},e}(Aa),Dft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this)},e.prototype.__chartName=function(){return"AreaChart"},e}(Aa),Oft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return Mde(this)},e.prototype.__chartName=function(){return"GeoChart"},e}(Aa),Pft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this,"number")},e.prototype.__chartName=function(){return"ScatterChart"},e}(Aa),Mft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){return bx(this,"bubble")},e.prototype.__chartName=function(){return"BubbleChart"},e}(Aa),Lft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__processData=function(){for(var n=this.rawData,i=0;i<n.length;i++)n[i][1]=$p(n[i][1]),n[i][2]=$p(n[i][2]);return n},e.prototype.__chartName=function(){return"Timeline"},e}(Aa);Lo.LineChart=Aft;Lo.PieChart=kft;Lo.ColumnChart=Cft;Lo.BarChart=Ift;Lo.AreaChart=Dft;Lo.GeoChart=Oft;Lo.ScatterChart=Pft;Lo.BubbleChart=Mft;Lo.Timeline=Lft;typeof window<"u"&&!window.Chartkick&&(window.Chartkick=Lo,document.addEventListener("turbolinks:before-render",function(){Lo.config.autoDestroy!==!1&&Lo.destroyAll()}),document.addEventListener("turbo:before-render",function(){Lo.config.autoDestroy!==!1&&Lo.destroyAll()}),setTimeout(function(){window.dispatchEvent(new Event("chartkick:load"))},0));Lo.default=Lo;function EE(t){return t+.5|0}var Uv=(t,e,r)=>Math.max(Math.min(t,r),e);function wE(t){return Uv(EE(t*2.55),0,255)}function Vv(t){return Uv(EE(t*255),0,255)}function ag(t){return Uv(EE(t/2.55)/100,0,1)}function Fde(t){return Uv(EE(t*100),0,100)}var Wh={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},v4=[..."0123456789ABCDEF"],Rft=t=>v4[t&15],Fft=t=>v4[(t&240)>>4]+v4[t&15],QI=t=>(t&240)>>4===(t&15),qft=t=>QI(t.r)&&QI(t.g)&&QI(t.b)&&QI(t.a);function Nft(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Wh[t[1]]*17,g:255&Wh[t[2]]*17,b:255&Wh[t[3]]*17,a:e===5?Wh[t[4]]*17:255}:(e===7||e===9)&&(r={r:Wh[t[1]]<<4|Wh[t[2]],g:Wh[t[3]]<<4|Wh[t[4]],b:Wh[t[5]]<<4|Wh[t[6]],a:e===9?Wh[t[7]]<<4|Wh[t[8]]:255})),r}var Bft=(t,e)=>t<255?e(t):"";function zft(t){var e=qft(t)?Rft:Fft;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Bft(t.a,e):void 0}var jft=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function zde(t,e,r){let n=e*Math.min(r,1-r),i=(o,s=(o+t/30)%12)=>r-n*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function Uft(t,e,r){let n=(i,o=(i+t/60)%6)=>r-r*e*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Vft(t,e,r){let n=zde(t,1,.5),i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function Hft(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function y4(t){let r=t.r/255,n=t.g/255,i=t.b/255,o=Math.max(r,n,i),s=Math.min(r,n,i),u=(o+s)/2,h,y,w;return o!==s&&(w=o-s,y=u>.5?w/(2-o-s):w/(o+s),h=Hft(r,n,i,w,o),h=h*60+.5),[h|0,y||0,u]}function b4(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(Vv)}function _4(t,e,r){return b4(zde,t,e,r)}function Wft(t,e,r){return b4(Vft,t,e,r)}function $ft(t,e,r){return b4(Uft,t,e,r)}function jde(t){return(t%360+360)%360}function Gft(t){let e=jft.exec(t),r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?wE(+e[5]):Vv(+e[5]));let i=jde(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=Wft(i,o,s):e[1]==="hsv"?n=$ft(i,o,s):n=_4(i,o,s),{r:n[0],g:n[1],b:n[2],a:r}}function Kft(t,e){var r=y4(t);r[0]=jde(r[0]+e),r=_4(r),t.r=r[0],t.g=r[1],t.b=r[2]}function Zft(t){if(!t)return;let e=y4(t),r=e[0],n=Fde(e[1]),i=Fde(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${ag(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}var qde={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Nde={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Yft(){let t={},e=Object.keys(Nde),r=Object.keys(qde),n,i,o,s,u;for(n=0;n<e.length;n++){for(s=u=e[n],i=0;i<r.length;i++)o=r[i],u=u.replace(o,qde[o]);o=parseInt(Nde[s],16),t[u]=[o>>16&255,o>>8&255,o&255]}return t}var eD;function Xft(t){eD||(eD=Yft(),eD.transparent=[0,0,0,0]);let e=eD[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Jft=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Qft(t){let e=Jft.exec(t),r=255,n,i,o;if(e){if(e[7]!==n){let s=+e[7];r=e[8]?wE(s):Uv(s*255,0,255)}return n=+e[1],i=+e[3],o=+e[5],n=255&(e[2]?wE(n):Uv(n,0,255)),i=255&(e[4]?wE(i):Uv(i,0,255)),o=255&(e[6]?wE(o):Uv(o,0,255)),{r:n,g:i,b:o,a:r}}}function eht(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${ag(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var g4=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_x=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tht(t,e,r){let n=_x(ag(t.r)),i=_x(ag(t.g)),o=_x(ag(t.b));return{r:Vv(g4(n+r*(_x(ag(e.r))-n))),g:Vv(g4(i+r*(_x(ag(e.g))-i))),b:Vv(g4(o+r*(_x(ag(e.b))-o))),a:t.a+r*(e.a-t.a)}}function tD(t,e,r){if(t){let n=y4(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=_4(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Ude(t,e){return t&&Object.assign(e||{},t)}function Bde(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Vv(t[3]))):(e=Ude(t,{r:0,g:0,b:0,a:1}),e.a=Vv(e.a)),e}function rht(t){return t.charAt(0)==="r"?Qft(t):Gft(t)}var SE=class t{constructor(e){if(e instanceof t)return e;let r=typeof e,n;r==="object"?n=Bde(e):r==="string"&&(n=Nft(e)||Xft(e)||rht(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ude(this._rgb);return e&&(e.a=ag(e.a)),e}set rgb(e){this._rgb=Bde(e)}rgbString(){return this._valid?eht(this._rgb):void 0}hexString(){return this._valid?zft(this._rgb):void 0}hslString(){return this._valid?Zft(this._rgb):void 0}mix(e,r){if(e){let n=this.rgb,i=e.rgb,o,s=r===o?.5:r,u=2*s-1,h=n.a-i.a,y=((u*h===-1?u:(u+h)/(1+u*h))+1)/2;o=1-y,n.r=255&y*n.r+o*i.r+.5,n.g=255&y*n.g+o*i.g+.5,n.b=255&y*n.b+o*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=tht(this._rgb,e._rgb,r)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=Vv(e),this}clearer(e){let r=this._rgb;return r.a*=1-e,this}greyscale(){let e=this._rgb,r=EE(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){let r=this._rgb;return r.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tD(this._rgb,2,e),this}darken(e){return tD(this._rgb,2,-e),this}saturate(e){return tD(this._rgb,1,e),this}desaturate(e){return tD(this._rgb,1,-e),this}rotate(e){return Kft(this._rgb,e),this}};function Xp(){}var Qde=(()=>{let t=0;return()=>t++})();function Ii(t){return t==null}function ka(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function qi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function gs(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function $c(t,e){return gs(t)?t:e}function si(t,e){return typeof t>"u"?e:t}var epe=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,E4=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ca(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function Ro(t,e,r,n){let i,o,s;if(ka(t))if(o=t.length,n)for(i=o-1;i>=0;i--)e.call(r,t[i],i);else for(i=0;i<o;i++)e.call(r,t[i],i);else if(qi(t))for(s=Object.keys(t),o=s.length,i=0;i<o;i++)e.call(r,t[s[i]],s[i])}function kE(t,e){let r,n,i,o;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],o=e[r],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function oD(t){if(ka(t))return t.map(oD);if(qi(t)){let e=Object.create(null),r=Object.keys(t),n=r.length,i=0;for(;i<n;++i)e[r[i]]=oD(t[r[i]]);return e}return t}function tpe(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function nht(t,e,r,n){if(!tpe(t))return;let i=e[t],o=r[t];qi(i)&&qi(o)?wx(i,o,n):e[t]=oD(o)}function wx(t,e,r){let n=ka(e)?e:[e],i=n.length;if(!qi(t))return t;r=r||{};let o=r.merger||nht,s;for(let u=0;u<i;++u){if(s=n[u],!qi(s))continue;let h=Object.keys(s);for(let y=0,w=h.length;y<w;++y)o(h[y],t,s,r)}return t}function Ex(t,e){return wx(t,e,{merger:iht})}function iht(t,e,r){if(!tpe(t))return;let n=e[t],i=r[t];qi(n)&&qi(i)?Ex(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=oD(i))}var Vde={"":t=>t,x:t=>t.x,y:t=>t.y};function oht(t){let e=t.split("."),r=[],n="";for(let i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function aht(t){let e=oht(t);return r=>{for(let n of e){if(n==="")break;r=r&&r[n]}return r}}function ug(t,e){return(Vde[e]||(Vde[e]=aht(e)))(t)}function uD(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Tx=t=>typeof t<"u",sg=t=>typeof t=="function",T4=(t,e)=>{if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0};function rpe(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var Ca=Math.PI,Ia=2*Ca,sht=Ia+Ca,aD=Number.POSITIVE_INFINITY,lht=Ca/180,Os=Ca/2,Rb=Ca/4,Hde=Ca*2/3,lg=Math.log10,qd=Math.sign;function Ax(t,e,r){return Math.abs(t-e)<r}function A4(t){let e=Math.round(t);t=Ax(t,e,t/1e3)?e:t;let r=Math.pow(10,Math.floor(lg(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function npe(t){let e=[],r=Math.sqrt(t),n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,o)=>i-o).pop(),e}function uht(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Nb(t){return!uht(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ipe(t,e){let r=Math.round(t);return r-e<=t&&r+e>=t}function k4(t,e,r){let n,i,o;for(n=0,i=t.length;n<i;n++)o=t[n][r],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function $h(t){return t*(Ca/180)}function cD(t){return t*(180/Ca)}function C4(t){if(!gs(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function I4(t,e){let r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n),o=Math.atan2(n,r);return o<-.5*Ca&&(o+=Ia),{angle:o,distance:i}}function sD(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function cht(t,e){return(t-e+sht)%Ia-Ca}function Wc(t){return(t%Ia+Ia)%Ia}function kx(t,e,r,n){let i=Wc(t),o=Wc(e),s=Wc(r),u=Wc(o-i),h=Wc(s-i),y=Wc(i-o),w=Wc(i-s);return i===o||i===s||n&&o===s||u>h&&y<w}function Al(t,e,r){return Math.max(e,Math.min(r,t))}function ope(t){return Al(t,-32768,32767)}function Jp(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function fD(t,e,r){r=r||(s=>t[s]<e);let n=t.length-1,i=0,o;for(;n-i>1;)o=i+n>>1,r(o)?i=o:n=o;return{lo:i,hi:n}}var Zp=(t,e,r,n)=>fD(t,r,n?i=>{let o=t[i][e];return o<r||o===r&&t[i+1][e]===r}:i=>t[i][e]<r),ape=(t,e,r)=>fD(t,r,n=>t[n][e]>=r);function spe(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}var lpe=["push","pop","shift","splice","unshift"];function upe(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),lpe.forEach(r=>{let n="_onData"+uD(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return t._chartjs.listeners.forEach(u=>{typeof u[n]=="function"&&u[n](...o)}),s}})})}function D4(t,e){let r=t._chartjs;if(!r)return;let n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(lpe.forEach(o=>{delete t[o]}),delete t._chartjs)}function O4(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var P4=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function M4(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,P4.call(window,()=>{n=!1,t.apply(e,r)}))}}function cpe(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}var hD=t=>t==="start"?"left":t==="end"?"right":"center",hu=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,fpe=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function L4(t,e,r){let n=e.length,i=0,o=n;if(t._sorted){let{iScale:s,vScale:u,_parsed:h}=t,y=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,w=s.axis,{min:T,max:I,minDefined:P,maxDefined:L}=s.getUserBounds();if(P){if(i=Math.min(Zp(h,w,T).lo,r?n:Zp(e,w,s.getPixelForValue(T)).lo),y){let R=h.slice(0,i+1).reverse().findIndex(W=>!Ii(W[u.axis]));i-=Math.max(0,R)}i=Al(i,0,n-1)}if(L){let R=Math.max(Zp(h,s.axis,I,!0).hi+1,r?0:Zp(e,w,s.getPixelForValue(I),!0).hi+1);if(y){let W=h.slice(R-1).findIndex(G=>!Ii(G[u.axis]));R+=Math.max(0,W)}o=Al(R,i,n)-i}else o=n-i}return{start:i,count:o}}function R4(t){let{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;let o=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),o}var rD=t=>t===0||t===1,Wde=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ia/r)),$de=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ia/r)+1,xx={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Os)+1,easeOutSine:t=>Math.sin(t*Os),easeInOutSine:t=>-.5*(Math.cos(Ca*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>rD(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>rD(t)?t:Wde(t,.075,.3),easeOutElastic:t=>rD(t)?t:$de(t,.075,.3),easeInOutElastic(t){return rD(t)?t:t<.5?.5*Wde(t*2,.1125,.45):.5+.5*$de(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-xx.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?xx.easeInBounce(t*2)*.5:xx.easeOutBounce(t*2-1)*.5+.5};function F4(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function q4(t){return F4(t)?t:new SE(t)}function x4(t){return F4(t)?t:new SE(t).saturate(.5).darken(.1).hexString()}var fht=["x","y","borderWidth","radius","tension"],hht=["color","borderColor","backgroundColor"];function dht(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:hht},numbers:{type:"number",properties:fht}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function pht(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var Gde=new Map;function mht(t,e){e=e||{};let r=t+JSON.stringify(e),n=Gde.get(r);return n||(n=new Intl.NumberFormat(t,e),Gde.set(r,n)),n}function Cx(t,e,r){return mht(e,r).format(t)}var hpe={values(t){return ka(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";let n=this.chart.options.locale,i,o=t;if(r.length>1){let y=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(y<1e-4||y>1e15)&&(i="scientific"),o=ght(t,r)}let s=lg(Math.abs(o)),u=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),h={notation:i,minimumFractionDigits:u,maximumFractionDigits:u};return Object.assign(h,this.options.ticks.format),Cx(t,n,h)},logarithmic(t,e,r){if(t===0)return"0";let n=r[e].significand||t/Math.pow(10,Math.floor(lg(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?hpe.numeric.call(this,t,e,r):""}};function ght(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var CE={formatters:hpe};function vht(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:CE.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Wv=Object.create(null),dD=Object.create(null);function TE(t,e){if(!e)return t;let r=e.split(".");for(let n=0,i=r.length;n<i;++n){let o=r[n];t=t[o]||(t[o]=Object.create(null))}return t}function w4(t,e,r){return typeof e=="string"?wx(TE(t,e),r):wx(TE(t,""),e)}var S4=class{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>x4(i.backgroundColor),this.hoverBorderColor=(n,i)=>x4(i.borderColor),this.hoverColor=(n,i)=>x4(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return w4(this,e,r)}get(e){return TE(this,e)}describe(e,r){return w4(dD,e,r)}override(e,r){return w4(Wv,e,r)}route(e,r,n,i){let o=TE(this,e),s=TE(this,n),u="_"+r;Object.defineProperties(o,{[u]:{value:o[r],writable:!0},[r]:{enumerable:!0,get(){let h=this[u],y=s[i];return qi(h)?Object.assign({},y,h):si(h,y)},set(h){this[u]=h}}})}apply(e){e.forEach(r=>r(this))}},za=new S4({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[dht,pht,vht]);function yht(t){return!t||Ii(t.size)||Ii(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function AE(t,e,r,n,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,r.push(i)),o>n&&(n=o),n}function dpe(t,e,r,n){n=n||{};let i=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},o=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let s=0,u=r.length,h,y,w,T,I;for(h=0;h<u;h++)if(T=r[h],T!=null&&!ka(T))s=AE(t,i,o,s,T);else if(ka(T))for(y=0,w=T.length;y<w;y++)I=T[y],I!=null&&!ka(I)&&(s=AE(t,i,o,s,I));t.restore();let P=o.length/2;if(P>r.length){for(h=0;h<P;h++)delete i[o[h]];o.splice(0,P)}return s}function $v(t,e,r){let n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function N4(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function pD(t,e,r,n){B4(t,e,r,n,null)}function B4(t,e,r,n,i){let o,s,u,h,y,w,T,I,P=e.pointStyle,L=e.rotation,R=e.radius,W=(L||0)*lht;if(P&&typeof P=="object"&&(o=P.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(W),t.drawImage(P,-P.width/2,-P.height/2,P.width,P.height),t.restore();return}if(!(isNaN(R)||R<=0)){switch(t.beginPath(),P){default:i?t.ellipse(r,n,i/2,R,0,0,Ia):t.arc(r,n,R,0,Ia),t.closePath();break;case"triangle":w=i?i/2:R,t.moveTo(r+Math.sin(W)*w,n-Math.cos(W)*R),W+=Hde,t.lineTo(r+Math.sin(W)*w,n-Math.cos(W)*R),W+=Hde,t.lineTo(r+Math.sin(W)*w,n-Math.cos(W)*R),t.closePath();break;case"rectRounded":y=R*.516,h=R-y,s=Math.cos(W+Rb)*h,T=Math.cos(W+Rb)*(i?i/2-y:h),u=Math.sin(W+Rb)*h,I=Math.sin(W+Rb)*(i?i/2-y:h),t.arc(r-T,n-u,y,W-Ca,W-Os),t.arc(r+I,n-s,y,W-Os,W),t.arc(r+T,n+u,y,W,W+Os),t.arc(r-I,n+s,y,W+Os,W+Ca),t.closePath();break;case"rect":if(!L){h=Math.SQRT1_2*R,w=i?i/2:h,t.rect(r-w,n-h,2*w,2*h);break}W+=Rb;case"rectRot":T=Math.cos(W)*(i?i/2:R),s=Math.cos(W)*R,u=Math.sin(W)*R,I=Math.sin(W)*(i?i/2:R),t.moveTo(r-T,n-u),t.lineTo(r+I,n-s),t.lineTo(r+T,n+u),t.lineTo(r-I,n+s),t.closePath();break;case"crossRot":W+=Rb;case"cross":T=Math.cos(W)*(i?i/2:R),s=Math.cos(W)*R,u=Math.sin(W)*R,I=Math.sin(W)*(i?i/2:R),t.moveTo(r-T,n-u),t.lineTo(r+T,n+u),t.moveTo(r+I,n-s),t.lineTo(r-I,n+s);break;case"star":T=Math.cos(W)*(i?i/2:R),s=Math.cos(W)*R,u=Math.sin(W)*R,I=Math.sin(W)*(i?i/2:R),t.moveTo(r-T,n-u),t.lineTo(r+T,n+u),t.moveTo(r+I,n-s),t.lineTo(r-I,n+s),W+=Rb,T=Math.cos(W)*(i?i/2:R),s=Math.cos(W)*R,u=Math.sin(W)*R,I=Math.sin(W)*(i?i/2:R),t.moveTo(r-T,n-u),t.lineTo(r+T,n+u),t.moveTo(r+I,n-s),t.lineTo(r-I,n+s);break;case"line":s=i?i/2:Math.cos(W)*R,u=Math.sin(W)*R,t.moveTo(r-s,n-u),t.lineTo(r+s,n+u);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(W)*(i?i/2:R),n+Math.sin(W)*R);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Yp(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function IE(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function DE(t){t.restore()}function ppe(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){let o=(e.x+r.x)/2;t.lineTo(o,e.y),t.lineTo(o,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function mpe(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function bht(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ii(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function _ht(t,e,r,n,i){if(i.strikethrough||i.underline){let o=t.measureText(n),s=e-o.actualBoundingBoxLeft,u=e+o.actualBoundingBoxRight,h=r-o.actualBoundingBoxAscent,y=r+o.actualBoundingBoxDescent,w=i.strikethrough?(h+y)/2:y;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(s,w),t.lineTo(u,w),t.stroke()}}function xht(t,e){let r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Gv(t,e,r,n,i,o={}){let s=ka(e)?e:[e],u=o.strokeWidth>0&&o.strokeColor!=="",h,y;for(t.save(),t.font=i.string,bht(t,o),h=0;h<s.length;++h)y=s[h],o.backdrop&&xht(t,o.backdrop),u&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Ii(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(y,r,n,o.maxWidth)),t.fillText(y,r,n,o.maxWidth),_ht(t,r,n,y,o),n+=Number(i.lineHeight);t.restore()}function Ix(t,e){let{x:r,y:n,w:i,h:o,radius:s}=e;t.arc(r+s.topLeft,n+s.topLeft,s.topLeft,1.5*Ca,Ca,!0),t.lineTo(r,n+o-s.bottomLeft),t.arc(r+s.bottomLeft,n+o-s.bottomLeft,s.bottomLeft,Ca,Os,!0),t.lineTo(r+i-s.bottomRight,n+o),t.arc(r+i-s.bottomRight,n+o-s.bottomRight,s.bottomRight,Os,0,!0),t.lineTo(r+i,n+s.topRight),t.arc(r+i-s.topRight,n+s.topRight,s.topRight,0,-Os,!0),t.lineTo(r+s.topLeft,n)}var wht=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Sht=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Eht(t,e){let r=(""+t).match(wht);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}var Tht=t=>+t||0;function mD(t,e){let r={},n=qi(e),i=n?Object.keys(e):e,o=qi(t)?n?s=>si(t[s],t[e[s]]):s=>t[s]:()=>t;for(let s of i)r[s]=Tht(o(s));return r}function z4(t){return mD(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Kv(t){return mD(t,["topLeft","topRight","bottomLeft","bottomRight"])}function du(t){let e=z4(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function nl(t,e){t=t||{},e=e||za.font;let r=si(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=si(t.style,e.style);n&&!(""+n).match(Sht)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let i={family:si(t.family,e.family),lineHeight:Eht(si(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:si(t.weight,e.weight),string:""};return i.string=yht(i),i}function Dx(t,e,r,n){let i=!0,o,s,u;for(o=0,s=t.length;o<s;++o)if(u=t[o],u!==void 0&&(e!==void 0&&typeof u=="function"&&(u=u(e),i=!1),r!==void 0&&ka(u)&&(u=u[r%u.length],i=!1),u!==void 0))return n&&!i&&(n.cacheable=!1),u}function gpe(t,e,r){let{min:n,max:i}=t,o=E4(e,(i-n)/2),s=(u,h)=>r&&u===0?0:u+h;return{min:s(n,-Math.abs(o)),max:s(i,o)}}function cg(t,e){return Object.assign(Object.create(t),e)}function gD(t,e=[""],r,n,i=()=>t[0]){let o=r||t;typeof n>"u"&&(n=bpe("_fallback",t));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:n,_getTarget:i,override:u=>gD([u,...t],e,o,n)};return new Proxy(s,{deleteProperty(u,h){return delete u[h],delete u._keys,delete t[0][h],!0},get(u,h){return vpe(u,h,()=>Mht(h,e,t,u))},getOwnPropertyDescriptor(u,h){return Reflect.getOwnPropertyDescriptor(u._scopes[0],h)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(u,h){return Zde(u).includes(h)},ownKeys(u){return Zde(u)},set(u,h,y){let w=u._storage||(u._storage=i());return u[h]=w[h]=y,delete u._keys,!0}})}function qb(t,e,r,n){let i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:j4(t,n),setContext:o=>qb(t,o,r,n),override:o=>qb(t.override(o),e,r,n)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete t[s],!0},get(o,s,u){return vpe(o,s,()=>kht(o,s,u))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(o,s,u){return t[s]=u,delete o[s],!0}})}function j4(t,e={scriptable:!0,indexable:!0}){let{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:sg(r)?r:()=>r,isIndexable:sg(n)?n:()=>n}}var Aht=(t,e)=>t?t+uD(e):e,U4=(t,e)=>qi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function vpe(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let n=r();return t[e]=n,n}function kht(t,e,r){let{_proxy:n,_context:i,_subProxy:o,_descriptors:s}=t,u=n[e];return sg(u)&&s.isScriptable(e)&&(u=Cht(e,u,t,r)),ka(u)&&u.length&&(u=Iht(e,u,t,s.isIndexable)),U4(e,u)&&(u=qb(u,i,o&&o[e],s)),u}function Cht(t,e,r,n){let{_proxy:i,_context:o,_subProxy:s,_stack:u}=r;if(u.has(t))throw new Error("Recursion detected: "+Array.from(u).join("->")+"->"+t);u.add(t);let h=e(o,s||n);return u.delete(t),U4(t,h)&&(h=V4(i._scopes,i,t,h)),h}function Iht(t,e,r,n){let{_proxy:i,_context:o,_subProxy:s,_descriptors:u}=r;if(typeof o.index<"u"&&n(t))return e[o.index%e.length];if(qi(e[0])){let h=e,y=i._scopes.filter(w=>w!==h);e=[];for(let w of h){let T=V4(y,i,t,w);e.push(qb(T,o,s&&s[t],u))}}return e}function ype(t,e,r){return sg(t)?t(e,r):t}var Dht=(t,e)=>t===!0?e:typeof t=="string"?ug(e,t):void 0;function Oht(t,e,r,n,i){for(let o of e){let s=Dht(r,o);if(s){t.add(s);let u=ype(s._fallback,r,i);if(typeof u<"u"&&u!==r&&u!==n)return u}else if(s===!1&&typeof n<"u"&&r!==n)return null}return!1}function V4(t,e,r,n){let i=e._rootScopes,o=ype(e._fallback,r,n),s=[...t,...i],u=new Set;u.add(n);let h=Kde(u,s,r,o||r,n);return h===null||typeof o<"u"&&o!==r&&(h=Kde(u,s,o,h,n),h===null)?!1:gD(Array.from(u),[""],i,o,()=>Pht(e,r,n))}function Kde(t,e,r,n,i){for(;r;)r=Oht(t,e,r,n,i);return r}function Pht(t,e,r){let n=t._getTarget();e in n||(n[e]={});let i=n[e];return ka(i)&&qi(r)?r:i||{}}function Mht(t,e,r,n){let i;for(let o of e)if(i=bpe(Aht(o,t),r),typeof i<"u")return U4(t,i)?V4(r,n,t,i):i}function bpe(t,e){for(let r of e){if(!r)continue;let n=r[t];if(typeof n<"u")return n}}function Zde(t){let e=t._keys;return e||(e=t._keys=Lht(t._scopes)),e}function Lht(t){let e=new Set;for(let r of t)for(let n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}function H4(t,e,r,n){let{iScale:i}=t,{key:o="r"}=this._parsing,s=new Array(n),u,h,y,w;for(u=0,h=n;u<h;++u)y=u+r,w=e[y],s[u]={r:i.parse(ug(w,o),y)};return s}var Rht=Number.EPSILON||1e-14,Sx=(t,e)=>e<t.length&&!t[e].skip&&t[e],_pe=t=>t==="x"?"y":"x";function Fht(t,e,r,n){let i=t.skip?e:t,o=e,s=r.skip?e:r,u=sD(o,i),h=sD(s,o),y=u/(u+h),w=h/(u+h);y=isNaN(y)?0:y,w=isNaN(w)?0:w;let T=n*y,I=n*w;return{previous:{x:o.x-T*(s.x-i.x),y:o.y-T*(s.y-i.y)},next:{x:o.x+I*(s.x-i.x),y:o.y+I*(s.y-i.y)}}}function qht(t,e,r){let n=t.length,i,o,s,u,h,y=Sx(t,0);for(let w=0;w<n-1;++w)if(h=y,y=Sx(t,w+1),!(!h||!y)){if(Ax(e[w],0,Rht)){r[w]=r[w+1]=0;continue}i=r[w]/e[w],o=r[w+1]/e[w],u=Math.pow(i,2)+Math.pow(o,2),!(u<=9)&&(s=3/Math.sqrt(u),r[w]=i*s*e[w],r[w+1]=o*s*e[w])}}function Nht(t,e,r="x"){let n=_pe(r),i=t.length,o,s,u,h=Sx(t,0);for(let y=0;y<i;++y){if(s=u,u=h,h=Sx(t,y+1),!u)continue;let w=u[r],T=u[n];s&&(o=(w-s[r])/3,u[`cp1${r}`]=w-o,u[`cp1${n}`]=T-o*e[y]),h&&(o=(h[r]-w)/3,u[`cp2${r}`]=w+o,u[`cp2${n}`]=T+o*e[y])}}function Bht(t,e="x"){let r=_pe(e),n=t.length,i=Array(n).fill(0),o=Array(n),s,u,h,y=Sx(t,0);for(s=0;s<n;++s)if(u=h,h=y,y=Sx(t,s+1),!!h){if(y){let w=y[e]-h[e];i[s]=w!==0?(y[r]-h[r])/w:0}o[s]=u?y?qd(i[s-1])!==qd(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}qht(t,i,o),Nht(t,o,e)}function nD(t,e,r){return Math.max(Math.min(t,r),e)}function zht(t,e){let r,n,i,o,s,u=Yp(t[0],e);for(r=0,n=t.length;r<n;++r)s=o,o=u,u=r<n-1&&Yp(t[r+1],e),o&&(i=t[r],s&&(i.cp1x=nD(i.cp1x,e.left,e.right),i.cp1y=nD(i.cp1y,e.top,e.bottom)),u&&(i.cp2x=nD(i.cp2x,e.left,e.right),i.cp2y=nD(i.cp2y,e.top,e.bottom)))}function xpe(t,e,r,n,i){let o,s,u,h;if(e.spanGaps&&(t=t.filter(y=>!y.skip)),e.cubicInterpolationMode==="monotone")Bht(t,i);else{let y=n?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)u=t[o],h=Fht(y,u,t[Math.min(o+1,s-(n?0:1))%s],e.tension),u.cp1x=h.previous.x,u.cp1y=h.previous.y,u.cp2x=h.next.x,u.cp2y=h.next.y,y=u}e.capBezierPoints&&zht(t,r)}function vD(){return typeof window<"u"&&typeof document<"u"}function yD(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function lD(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}var bD=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function jht(t,e){return bD(t).getPropertyValue(e)}var Uht=["top","right","bottom","left"];function Fb(t,e,r){let n={};r=r?"-"+r:"";for(let i=0;i<4;i++){let o=Uht[i];n[o]=parseFloat(t[e+"-"+o+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var Vht=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function Hht(t,e){let r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:o}=n,s=!1,u,h;if(Vht(i,o,t.target))u=i,h=o;else{let y=e.getBoundingClientRect();u=n.clientX-y.left,h=n.clientY-y.top,s=!0}return{x:u,y:h,box:s}}function Zv(t,e){if("native"in t)return t;let{canvas:r,currentDevicePixelRatio:n}=e,i=bD(r),o=i.boxSizing==="border-box",s=Fb(i,"padding"),u=Fb(i,"border","width"),{x:h,y,box:w}=Hht(t,r),T=s.left+(w&&u.left),I=s.top+(w&&u.top),{width:P,height:L}=e;return o&&(P-=s.width+u.width,L-=s.height+u.height),{x:Math.round((h-T)/P*r.width/n),y:Math.round((y-I)/L*r.height/n)}}function Wht(t,e,r){let n,i;if(e===void 0||r===void 0){let o=t&&yD(t);if(!o)e=t.clientWidth,r=t.clientHeight;else{let s=o.getBoundingClientRect(),u=bD(o),h=Fb(u,"border","width"),y=Fb(u,"padding");e=s.width-y.width-h.width,r=s.height-y.height-h.height,n=lD(u.maxWidth,o,"clientWidth"),i=lD(u.maxHeight,o,"clientHeight")}}return{width:e,height:r,maxWidth:n||aD,maxHeight:i||aD}}var iD=t=>Math.round(t*10)/10;function wpe(t,e,r,n){let i=bD(t),o=Fb(i,"margin"),s=lD(i.maxWidth,t,"clientWidth")||aD,u=lD(i.maxHeight,t,"clientHeight")||aD,h=Wht(t,e,r),{width:y,height:w}=h;if(i.boxSizing==="content-box"){let I=Fb(i,"border","width"),P=Fb(i,"padding");y-=P.width+I.width,w-=P.height+I.height}return y=Math.max(0,y-o.width),w=Math.max(0,n?y/n:w-o.height),y=iD(Math.min(y,s,h.maxWidth)),w=iD(Math.min(w,u,h.maxHeight)),y&&!w&&(w=iD(y/2)),(e!==void 0||r!==void 0)&&n&&h.height&&w>h.height&&(w=h.height,y=iD(Math.floor(w*n))),{width:y,height:w}}function W4(t,e,r){let n=e||1,i=Math.floor(t.height*n),o=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let s=t.canvas;return s.style&&(r||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||s.height!==i||s.width!==o?(t.currentDevicePixelRatio=n,s.height=i,s.width=o,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}var Spe=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};vD()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function $4(t,e){let r=jht(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Hv(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function Epe(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function Tpe(t,e,r,n){let i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=Hv(t,i,r),u=Hv(i,o,r),h=Hv(o,e,r),y=Hv(s,u,r),w=Hv(u,h,r);return Hv(y,w,r)}var $ht=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},Ght=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Bb(t,e,r){return t?$ht(e,r):Ght()}function G4(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function K4(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ape(t){return t==="angle"?{between:kx,compare:cht,normalize:Wc}:{between:Jp,compare:(e,r)=>e-r,normalize:e=>e}}function Yde({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function Kht(t,e,r){let{property:n,start:i,end:o}=r,{between:s,normalize:u}=Ape(n),h=e.length,{start:y,end:w,loop:T}=t,I,P;if(T){for(y+=h,w+=h,I=0,P=h;I<P&&s(u(e[y%h][n]),i,o);++I)y--,w--;y%=h,w%=h}return w<y&&(w+=h),{start:y,end:w,loop:T,style:t.style}}function Z4(t,e,r){if(!r)return[t];let{property:n,start:i,end:o}=r,s=e.length,{compare:u,between:h,normalize:y}=Ape(n),{start:w,end:T,loop:I,style:P}=Kht(t,e,r),L=[],R=!1,W=null,G,q,V,p=()=>h(i,V,G)&&u(i,V)!==0,K=()=>u(o,G)===0||h(o,V,G),j=()=>R||p(),Q=()=>!R||K();for(let ee=w,se=w;ee<=T;++ee)q=e[ee%s],!q.skip&&(G=y(q[n]),G!==V&&(R=h(G,i,o),W===null&&j()&&(W=u(G,i)===0?ee:se),W!==null&&Q()&&(L.push(Yde({start:W,end:ee,loop:I,count:s,style:P})),W=null),se=ee,V=G));return W!==null&&L.push(Yde({start:W,end:T,loop:I,count:s,style:P})),L}function Y4(t,e){let r=[],n=t.segments;for(let i=0;i<n.length;i++){let o=Z4(n[i],t.points,e);o.length&&r.push(...o)}return r}function Zht(t,e,r,n){let i=0,o=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}function Yht(t,e,r,n){let i=t.length,o=[],s=e,u=t[e],h;for(h=e+1;h<=r;++h){let y=t[h%i];y.skip||y.stop?u.skip||(n=!1,o.push({start:e%i,end:(h-1)%i,loop:n}),e=s=y.stop?h:null):(s=h,u.skip&&(e=h)),u=y}return s!==null&&o.push({start:e%i,end:s%i,loop:n}),o}function kpe(t,e){let r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];let o=!!t._loop,{start:s,end:u}=Zht(r,i,o,n);if(n===!0)return Xde(t,[{start:s,end:u,loop:o}],r,e);let h=u<s?u+i:u,y=!!t._fullLoop&&s===0&&u===i-1;return Xde(t,Yht(r,s,h,y),r,e)}function Xde(t,e,r,n){return!n||!n.setContext||!r?e:Xht(t,e,r,n)}function Xht(t,e,r,n){let i=t._chart.getContext(),o=Jde(t.options),{_datasetIndex:s,options:{spanGaps:u}}=t,h=r.length,y=[],w=o,T=e[0].start,I=T;function P(L,R,W,G){let q=u?-1:1;if(L!==R){for(L+=h;r[L%h].skip;)L-=q;for(;r[R%h].skip;)R+=q;L%h!==R%h&&(y.push({start:L%h,end:R%h,loop:W,style:G}),w=G,T=R%h)}}for(let L of e){T=u?T:L.start;let R=r[T%h],W;for(I=T+1;I<=L.end;I++){let G=r[I%h];W=Jde(n.setContext(cg(i,{type:"segment",p0:R,p1:G,p0DataIndex:(I-1)%h,p1DataIndex:I%h,datasetIndex:s}))),Jht(W,w)&&P(T,I-1,L.loop,w),R=G,w=W}T<I-1&&P(T,I-1,L.loop,w)}return y}function Jde(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Jht(t,e){if(!e)return!1;let r=[],n=function(i,o){return F4(o)?(r.includes(o)||r.push(o),r.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(e,n)}var sj=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){let o=r.listeners[i],s=r.duration;o.forEach(u=>u({chart:e,initial:r.initial,numSteps:s,currentStep:Math.min(n-r.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=P4.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;let o=n.items,s=o.length-1,u=!1,h;for(;s>=0;--s)h=o[s],h._active?(h._total>n.duration&&(n.duration=h._total),h.tick(e),u=!0):(o[s]=o[o.length-1],o.pop());u&&(i.draw(),this._notify(i,n,e,"progress")),o.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=o.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){let r=this._charts,n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){let r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){let r=this._charts.get(e);if(!r||!r.items.length)return;let n=r.items,i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},fg=new sj,Cpe="transparent",Qht={boolean(t,e,r){return r>.5?e:t},color(t,e,r){let n=q4(t||Cpe),i=n.valid&&q4(e||Cpe);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}},lj=class{constructor(e,r,n,i){let o=r[n];i=Dx([e.to,i,o,e.from]);let s=Dx([e.from,o,i]);this._active=!0,this._fn=e.fn||Qht[e.type||typeof s],this._easing=xx[e.easing]||xx.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);let i=this._target[this._prop],o=n-this._start,s=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Dx([e.to,r,i,e.from]),this._from=Dx([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let r=e-this._start,n=this._duration,i=this._prop,o=this._from,s=this._loop,u=this._to,h;if(this._active=o!==u&&(s||r<n),!this._active){this._target[i]=u,this._notify(!0);return}if(r<0){this._target[i]=o;return}h=r/n%2,h=s&&h>1?2-h:h,h=this._easing(Math.min(1,Math.max(0,h))),this._target[i]=this._fn(o,u,h)}wait(){let e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){let r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}},ID=class{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!qi(e))return;let r=Object.keys(za.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!qi(o))return;let s={};for(let u of r)s[u]=o[u];(ka(o.properties)&&o.properties||[i]).forEach(u=>{(u===i||!n.has(u))&&n.set(u,s)})})}_animateOptions(e,r){let n=r.options,i=tdt(e,n);if(!i)return[];let o=this._createAnimations(i,n);return n.$shared&&edt(e.options.$animations,n).then(()=>{e.options=n},()=>{}),o}_createAnimations(e,r){let n=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(r),u=Date.now(),h;for(h=s.length-1;h>=0;--h){let y=s[h];if(y.charAt(0)==="$")continue;if(y==="options"){i.push(...this._animateOptions(e,r));continue}let w=r[y],T=o[y],I=n.get(y);if(T)if(I&&T.active()){T.update(I,w,u);continue}else T.cancel();if(!I||!I.duration){e[y]=w;continue}o[y]=T=new lj(I,e,y,w),i.push(T)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}let n=this._createAnimations(e,r);if(n.length)return fg.add(this._chart,n),!0}};function edt(t,e){let r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){let o=t[n[i]];o&&o.active()&&r.push(o.wait())}return Promise.all(r)}function tdt(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function Ipe(t,e){let r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,o=r.max===void 0?e:0;return{start:n?o:i,end:n?i:o}}function rdt(t,e,r){if(r===!1)return!1;let n=Ipe(t,r),i=Ipe(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function ndt(t){let e,r,n,i;return qi(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function kme(t,e){let r=[],n=t._getSortedDatasetMetas(e),i,o;for(i=0,o=n.length;i<o;++i)r.push(n[i].index);return r}function Dpe(t,e,r,n={}){let i=t.keys,o=n.mode==="single",s,u,h,y;if(e===null)return;let w=!1;for(s=0,u=i.length;s<u;++s){if(h=+i[s],h===r){if(w=!0,n.all)continue;break}y=t.values[h],gs(y)&&(o||e===0||qd(e)===qd(y))&&(e+=y)}return!w&&!n.all?0:e}function idt(t,e){let{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",s=Object.keys(t),u=new Array(s.length),h,y,w;for(h=0,y=s.length;h<y;++h)w=s[h],u[h]={[i]:w,[o]:t[w]};return u}function X4(t,e){let r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function odt(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function adt(t){let{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function sdt(t,e,r){let n=t[e]||(t[e]={});return n[r]||(n[r]={})}function Ope(t,e,r,n){for(let i of e.getMatchingVisibleMetas(n).reverse()){let o=t[i.index];if(r&&o>0||!r&&o<0)return i.index}return null}function Ppe(t,e){let{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:o,vScale:s,index:u}=n,h=o.axis,y=s.axis,w=odt(o,s,n),T=e.length,I;for(let P=0;P<T;++P){let L=e[P],{[h]:R,[y]:W}=L,G=L._stacks||(L._stacks={});I=G[y]=sdt(i,w,R),I[u]=W,I._top=Ope(I,s,!0,n.type),I._bottom=Ope(I,s,!1,n.type);let q=I._visualValues||(I._visualValues={});q[u]=W}}function J4(t,e){let r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function ldt(t,e){return cg(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function udt(t,e,r){return cg(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function OE(t,e){let r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(let i of e){let o=i._stacks;if(!o||o[n]===void 0||o[n][r]===void 0)return;delete o[n][r],o[n]._visualValues!==void 0&&o[n]._visualValues[r]!==void 0&&delete o[n]._visualValues[r]}}}var Q4=t=>t==="reset"||t==="none",Mpe=(t,e)=>e?t:Object.assign({},t),cdt=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:kme(r,!0),values:null},tm=class{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=X4(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&OE(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(T,I,P,L)=>T==="x"?I:T==="r"?L:P,o=r.xAxisID=si(n.xAxisID,J4(e,"x")),s=r.yAxisID=si(n.yAxisID,J4(e,"y")),u=r.rAxisID=si(n.rAxisID,J4(e,"r")),h=r.indexAxis,y=r.iAxisID=i(h,o,s,u),w=r.vAxisID=i(h,s,o,u);r.xScale=this.getScaleForId(o),r.yScale=this.getScaleForId(s),r.rScale=this.getScaleForId(u),r.iScale=this.getScaleForId(y),r.vScale=this.getScaleForId(w)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&D4(this._data,this),e._stacked&&OE(e)}_dataCheck(){let e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(qi(r)){let i=this._cachedMeta;this._data=idt(r,i)}else if(n!==r){if(n){D4(n,this);let i=this._cachedMeta;OE(i),i._parsed=[]}r&&Object.isExtensible(r)&&upe(r,this),this._syncList=[],this._data=r}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let r=this._cachedMeta,n=this.getDataset(),i=!1;this._dataCheck();let o=r._stacked;r._stacked=X4(r.vScale,r),r.stack!==n.stack&&(i=!0,OE(r),r.stack=n.stack),this._resyncElements(e),(i||o!==r._stacked)&&(Ppe(this,r._parsed),r._stacked=X4(r.vScale,r))}configure(){let e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){let{_cachedMeta:n,_data:i}=this,{iScale:o,_stacked:s}=n,u=o.axis,h=e===0&&r===i.length?!0:n._sorted,y=e>0&&n._parsed[e-1],w,T,I;if(this._parsing===!1)n._parsed=i,n._sorted=!0,I=i;else{ka(i[e])?I=this.parseArrayData(n,i,e,r):qi(i[e])?I=this.parseObjectData(n,i,e,r):I=this.parsePrimitiveData(n,i,e,r);let P=()=>T[u]===null||y&&T[u]<y[u];for(w=0;w<r;++w)n._parsed[w+e]=T=I[w],h&&(P()&&(h=!1),y=T);n._sorted=h}s&&Ppe(this,I)}parsePrimitiveData(e,r,n,i){let{iScale:o,vScale:s}=e,u=o.axis,h=s.axis,y=o.getLabels(),w=o===s,T=new Array(i),I,P,L;for(I=0,P=i;I<P;++I)L=I+n,T[I]={[u]:w||o.parse(y[L],L),[h]:s.parse(r[L],L)};return T}parseArrayData(e,r,n,i){let{xScale:o,yScale:s}=e,u=new Array(i),h,y,w,T;for(h=0,y=i;h<y;++h)w=h+n,T=r[w],u[h]={x:o.parse(T[0],w),y:s.parse(T[1],w)};return u}parseObjectData(e,r,n,i){let{xScale:o,yScale:s}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,y=new Array(i),w,T,I,P;for(w=0,T=i;w<T;++w)I=w+n,P=r[I],y[w]={x:o.parse(ug(P,u),I),y:s.parse(ug(P,h),I)};return y}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){let i=this.chart,o=this._cachedMeta,s=r[e.axis],u={keys:kme(i,!0),values:r._stacks[e.axis]._visualValues};return Dpe(u,s,o.index,{mode:n})}updateRangeFromParsed(e,r,n,i){let o=n[r.axis],s=o===null?NaN:o,u=i&&n._stacks[r.axis];i&&u&&(i.values=u,s=Dpe(i,o,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,r){let n=this._cachedMeta,i=n._parsed,o=n._sorted&&e===n.iScale,s=i.length,u=this._getOtherScale(e),h=cdt(r,n,this.chart),y={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:w,max:T}=adt(u),I,P;function L(){P=i[I];let R=P[u.axis];return!gs(P[e.axis])||w>R||T<R}for(I=0;I<s&&!(!L()&&(this.updateRangeFromParsed(y,e,P,h),o));++I);if(o){for(I=s-1;I>=0;--I)if(!L()){this.updateRangeFromParsed(y,e,P,h);break}}return y}getAllParsedValues(e){let r=this._cachedMeta._parsed,n=[],i,o,s;for(i=0,o=r.length;i<o;++i)s=r[i][e.axis],gs(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let r=this._cachedMeta,n=r.iScale,i=r.vScale,o=this.getParsed(e);return{label:n?""+n.getLabelForValue(o[n.axis]):"",value:i?""+i.getLabelForValue(o[i.axis]):""}}_update(e){let r=this._cachedMeta;this.update(e||"default"),r._clip=ndt(si(this.options.clip,rdt(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],o=r.chartArea,s=[],u=this._drawStart||0,h=this._drawCount||i.length-u,y=this.options.drawActiveElementsOnTop,w;for(n.dataset&&n.dataset.draw(e,o,u,h),w=u;w<u+h;++w){let T=i[w];T.hidden||(T.active&&y?s.push(T):T.draw(e,o))}for(w=0;w<s.length;++w)s[w].draw(e,o)}getStyle(e,r){let n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){let i=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let s=this._cachedMeta.data[e];o=s.$context||(s.$context=udt(this.getContext(),e,s)),o.parsed=this.getParsed(e),o.raw=i.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=ldt(this.chart.getContext(),this.index)),o.dataset=i,o.index=o.datasetIndex=this.index;return o.active=!!r,o.mode=n,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){let i=r==="active",o=this._cachedDataOpts,s=e+"-"+r,u=o[s],h=this.enableOptionSharing&&Tx(n);if(u)return Mpe(u,h);let y=this.chart.config,w=y.datasetElementScopeKeys(this._type,e),T=i?[`${e}Hover`,"hover",e,""]:[e,""],I=y.getOptionScopes(this.getDataset(),w),P=Object.keys(za.elements[e]),L=()=>this.getContext(n,i,r),R=y.resolveNamedOptions(I,P,L,T);return R.$shared&&(R.$shared=h,o[s]=Object.freeze(Mpe(R,h))),R}_resolveAnimations(e,r,n){let i=this.chart,o=this._cachedDataOpts,s=`animation-${r}`,u=o[s];if(u)return u;let h;if(i.options.animation!==!1){let w=this.chart.config,T=w.datasetAnimationScopeKeys(this._type,r),I=w.getOptionScopes(this.getDataset(),T);h=w.createResolver(I,this.getContext(e,n,r))}let y=new ID(i,h&&h.animations);return h&&h._cacheable&&(o[s]=Object.freeze(y)),y}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Q4(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){let n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,o=this.getSharedOptions(n),s=this.includeOptions(r,o)||o!==i;return this.updateSharedOptions(o,r,n),{sharedOptions:o,includeOptions:s}}updateElement(e,r,n,i){Q4(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!Q4(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;let o=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(o)||o})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let r=this._data,n=this._cachedMeta.data;for(let[u,h,y]of this._syncList)this[u](h,y);this._syncList=[];let i=n.length,o=r.length,s=Math.min(o,i);s&&this.parse(0,s),o>i?this._insertElements(i,o-i,e):o<i&&this._removeElements(o,i-o)}_insertElements(e,r,n=!0){let i=this._cachedMeta,o=i.data,s=e+r,u,h=y=>{for(y.length+=r,u=y.length-1;u>=s;u--)y[u]=y[u-r]};for(h(o),u=e;u<s;++u)o[u]=new this.dataElementType;this._parsing&&h(i._parsed),this.parse(e,r),n&&this.updateElements(o,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){let n=this._cachedMeta;if(this._parsing){let i=n._parsed.splice(e,r);n._stacked&&OE(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};function fdt(t,e){if(!t._cache.$bar){let r=t.getMatchingVisibleMetas(e),n=[];for(let i=0,o=r.length;i<o;i++)n=n.concat(r[i].controller.getAllParsedValues(t));t._cache.$bar=O4(n.sort((i,o)=>i-o))}return t._cache.$bar}function hdt(t){let e=t.iScale,r=fdt(e,t.type),n=e._length,i,o,s,u,h=()=>{s===32767||s===-32768||(Tx(u)&&(n=Math.min(n,Math.abs(s-u)||n)),u=s)};for(i=0,o=r.length;i<o;++i)s=e.getPixelForValue(r[i]),h();for(u=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),h();return n}function ddt(t,e,r,n){let i=r.barThickness,o,s;return Ii(i)?(o=e.min*r.categoryPercentage,s=r.barPercentage):(o=i*n,s=1),{chunk:o/n,ratio:s,start:e.pixels[t]-o/2}}function pdt(t,e,r,n){let i=e.pixels,o=i[t],s=t>0?i[t-1]:null,u=t<i.length-1?i[t+1]:null,h=r.categoryPercentage;s===null&&(s=o-(u===null?e.end-e.start:u-o)),u===null&&(u=o+o-s);let y=o-(o-Math.min(s,u))/2*h;return{chunk:Math.abs(u-s)/2*h/n,ratio:r.barPercentage,start:y}}function mdt(t,e,r,n){let i=r.parse(t[0],n),o=r.parse(t[1],n),s=Math.min(i,o),u=Math.max(i,o),h=s,y=u;Math.abs(s)>Math.abs(u)&&(h=u,y=s),e[r.axis]=y,e._custom={barStart:h,barEnd:y,start:i,end:o,min:s,max:u}}function Cme(t,e,r,n){return ka(t)?mdt(t,e,r,n):e[r.axis]=r.parse(t,n),e}function Lpe(t,e,r,n){let i=t.iScale,o=t.vScale,s=i.getLabels(),u=i===o,h=[],y,w,T,I;for(y=r,w=r+n;y<w;++y)I=e[y],T={},T[i.axis]=u||i.parse(s[y],y),h.push(Cme(I,T,o,y));return h}function ej(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function gdt(t,e,r){return t!==0?qd(t):(e.isHorizontal()?1:-1)*(e.min>=r?1:-1)}function vdt(t){let e,r,n,i,o;return t.horizontal?(e=t.base>t.x,r="left",n="right"):(e=t.base<t.y,r="bottom",n="top"),e?(i="end",o="start"):(i="start",o="end"),{start:r,end:n,reverse:e,top:i,bottom:o}}function ydt(t,e,r,n){let i=e.borderSkipped,o={};if(!i){t.borderSkipped=o;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:u,reverse:h,top:y,bottom:w}=vdt(t);i==="middle"&&r&&(t.enableBorderRadius=!0,(r._top||0)===n?i=y:(r._bottom||0)===n?i=w:(o[Rpe(w,s,u,h)]=!0,i=y)),o[Rpe(i,s,u,h)]=!0,t.borderSkipped=o}function Rpe(t,e,r,n){return n?(t=bdt(t,e,r),t=Fpe(t,r,e)):t=Fpe(t,e,r),t}function bdt(t,e,r){return t===e?r:t===r?e:t}function Fpe(t,e,r){return t==="start"?e:t==="end"?r:t}function _dt(t,{inflateAmount:e},r){t.inflateAmount=e==="auto"?r===1?.33:0:e}var uj=class extends tm{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,r,n,i){return Lpe(e,r,n,i)}parseArrayData(e,r,n,i){return Lpe(e,r,n,i)}parseObjectData(e,r,n,i){let{iScale:o,vScale:s}=e,{xAxisKey:u="x",yAxisKey:h="y"}=this._parsing,y=o.axis==="x"?u:h,w=s.axis==="x"?u:h,T=[],I,P,L,R;for(I=n,P=n+i;I<P;++I)R=r[I],L={},L[o.axis]=o.parse(ug(R,y),I),T.push(Cme(ug(R,w),L,s,I));return T}updateRangeFromParsed(e,r,n,i){super.updateRangeFromParsed(e,r,n,i);let o=n._custom;o&&r===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let r=this._cachedMeta,{iScale:n,vScale:i}=r,o=this.getParsed(e),s=o._custom,u=ej(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(o[i.axis]);return{label:""+n.getLabelForValue(o[n.axis]),value:u}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,e)}updateElements(e,r,n,i){let o=i==="reset",{index:s,_cachedMeta:{vScale:u}}=this,h=u.getBasePixel(),y=u.isHorizontal(),w=this._getRuler(),{sharedOptions:T,includeOptions:I}=this._getSharedOptions(r,i);for(let P=r;P<r+n;P++){let L=this.getParsed(P),R=o||Ii(L[u.axis])?{base:h,head:h}:this._calculateBarValuePixels(P),W=this._calculateBarIndexPixels(P,w),G=(L._stacks||{})[u.axis],q={horizontal:y,base:R.base,enableBorderRadius:!G||ej(L._custom)||s===G._top||s===G._bottom,x:y?R.head:W.center,y:y?W.center:R.head,height:y?W.size:Math.abs(R.size),width:y?Math.abs(R.size):W.size};I&&(q.options=T||this.resolveDataElementOptions(P,e[P].active?"active":i));let V=q.options||e[P].options;ydt(q,V,G,s),_dt(q,V,w.ratio),this.updateElement(e[P],P,q,i)}}_getStacks(e,r){let{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(w=>w.controller.options.grouped),o=n.options.stacked,s=[],u=this._cachedMeta.controller.getParsed(r),h=u&&u[n.axis],y=w=>{let T=w._parsed.find(P=>P[n.axis]===h),I=T&&T[w.vScale.axis];if(Ii(I)||isNaN(I))return!0};for(let w of i)if(!(r!==void 0&&y(w))&&((o===!1||s.indexOf(w.stack)===-1||o===void 0&&w.stack===void 0)&&s.push(w.stack),w.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,r,n){let i=this._getStacks(e,n),o=r!==void 0?i.indexOf(r):-1;return o===-1?i.length-1:o}_getRuler(){let e=this.options,r=this._cachedMeta,n=r.iScale,i=[],o,s;for(o=0,s=r.data.length;o<s;++o)i.push(n.getPixelForValue(this.getParsed(o)[n.axis],o));let u=e.barThickness;return{min:u||hdt(r),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:u?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:r,_stacked:n,index:i},options:{base:o,minBarLength:s}}=this,u=o||0,h=this.getParsed(e),y=h._custom,w=ej(y),T=h[r.axis],I=0,P=n?this.applyStack(r,h,n):T,L,R;P!==T&&(I=P-T,P=T),w&&(T=y.barStart,P=y.barEnd-y.barStart,T!==0&&qd(T)!==qd(y.barEnd)&&(I=0),I+=T);let W=!Ii(o)&&!w?o:I,G=r.getPixelForValue(W);if(this.chart.getDataVisibility(e)?L=r.getPixelForValue(I+P):L=G,R=L-G,Math.abs(R)<s){R=gdt(R,r,u)*s,T===u&&(G-=R/2);let q=r.getPixelForDecimal(0),V=r.getPixelForDecimal(1),p=Math.min(q,V),K=Math.max(q,V);G=Math.max(Math.min(G,K),p),L=G+R,n&&!w&&(h._stacks[r.axis]._visualValues[i]=r.getValueForPixel(L)-r.getValueForPixel(G))}if(G===r.getPixelForValue(u)){let q=qd(R)*r.getLineWidthForValue(u)/2;G+=q,R-=q}return{size:R,base:G,head:L,center:L+R/2}}_calculateBarIndexPixels(e,r){let n=r.scale,i=this.options,o=i.skipNull,s=si(i.maxBarThickness,1/0),u,h;if(r.grouped){let y=o?this._getStackCount(e):r.stackCount,w=i.barThickness==="flex"?pdt(e,r,i,y):ddt(e,r,i,y),T=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);u=w.start+w.chunk*T+w.chunk/2,h=Math.min(s,w.chunk*w.ratio)}else u=n.getPixelForValue(this.getParsed(e)[n.axis],e),h=Math.min(s,r.min*r.ratio);return{base:u-h/2,head:u+h/2,center:u,size:h}}draw(){let e=this._cachedMeta,r=e.vScale,n=e.data,i=n.length,o=0;for(;o<i;++o)this.getParsed(o)[r.axis]!==null&&!n[o].hidden&&n[o].draw(this._ctx)}},cj=class extends tm{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,r,n,i){let o=super.parsePrimitiveData(e,r,n,i);for(let s=0;s<o.length;s++)o[s]._custom=this.resolveDataElementOptions(s+n).radius;return o}parseArrayData(e,r,n,i){let o=super.parseArrayData(e,r,n,i);for(let s=0;s<o.length;s++){let u=r[n+s];o[s]._custom=si(u[2],this.resolveDataElementOptions(s+n).radius)}return o}parseObjectData(e,r,n,i){let o=super.parseObjectData(e,r,n,i);for(let s=0;s<o.length;s++){let u=r[n+s];o[s]._custom=si(u&&u.r&&+u.r,this.resolveDataElementOptions(s+n).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,r=0;for(let n=e.length-1;n>=0;--n)r=Math.max(r,e[n].size(this.resolveDataElementOptions(n))/2);return r>0&&r}getLabelAndValue(e){let r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=r,s=this.getParsed(e),u=i.getLabelForValue(s.x),h=o.getLabelForValue(s.y),y=s._custom;return{label:n[e]||"",value:"("+u+", "+h+(y?", "+y:"")+")"}}update(e){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,e)}updateElements(e,r,n,i){let o=i==="reset",{iScale:s,vScale:u}=this._cachedMeta,{sharedOptions:h,includeOptions:y}=this._getSharedOptions(r,i),w=s.axis,T=u.axis;for(let I=r;I<r+n;I++){let P=e[I],L=!o&&this.getParsed(I),R={},W=R[w]=o?s.getPixelForDecimal(.5):s.getPixelForValue(L[w]),G=R[T]=o?u.getBasePixel():u.getPixelForValue(L[T]);R.skip=isNaN(W)||isNaN(G),y&&(R.options=h||this.resolveDataElementOptions(I,P.active?"active":i),o&&(R.options.radius=0)),this.updateElement(P,I,R,i)}}resolveDataElementOptions(e,r){let n=this.getParsed(e),i=super.resolveDataElementOptions(e,r);i.$shared&&(i=Object.assign({},i,{$shared:!1}));let o=i.radius;return r!=="active"&&(i.radius=0),i.radius+=si(n&&n._custom,o),i}};function xdt(t,e,r){let n=1,i=1,o=0,s=0;if(e<Ia){let u=t,h=u+e,y=Math.cos(u),w=Math.sin(u),T=Math.cos(h),I=Math.sin(h),P=(V,p,K)=>kx(V,u,h,!0)?1:Math.max(p,p*r,K,K*r),L=(V,p,K)=>kx(V,u,h,!0)?-1:Math.min(p,p*r,K,K*r),R=P(0,y,T),W=P(Os,w,I),G=L(Ca,y,T),q=L(Ca+Os,w,I);n=(R-G)/2,i=(W-q)/2,o=-(R+G)/2,s=-(W+q)/2}return{ratioX:n,ratioY:i,offsetX:o,offsetY:s}}var NE=class extends tm{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let r=e.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((o,s)=>{let h=e.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}}};constructor(e,r){super(e,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,r){let n=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=n;else{let o=h=>+n[h];if(qi(n[e])){let{key:h="value"}=this._parsing;o=y=>+ug(n[y],h)}let s,u;for(s=e,u=e+r;s<u;++s)i._parsed[s]=o(s)}}_getRotation(){return $h(this.options.rotation-90)}_getCircumference(){return $h(this.options.circumference)}_getRotationExtents(){let e=Ia,r=-Ia;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){let i=this.chart.getDatasetMeta(n).controller,o=i._getRotation(),s=i._getCircumference();e=Math.min(e,o),r=Math.max(r,o+s)}return{rotation:e,circumference:r-e}}update(e){let r=this.chart,{chartArea:n}=r,i=this._cachedMeta,o=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,u=Math.max((Math.min(n.width,n.height)-s)/2,0),h=Math.min(epe(this.options.cutout,u),1),y=this._getRingWeight(this.index),{circumference:w,rotation:T}=this._getRotationExtents(),{ratioX:I,ratioY:P,offsetX:L,offsetY:R}=xdt(T,w,h),W=(n.width-s)/I,G=(n.height-s)/P,q=Math.max(Math.min(W,G)/2,0),V=E4(this.options.radius,q),p=Math.max(V*h,0),K=(V-p)/this._getVisibleDatasetWeightTotal();this.offsetX=L*V,this.offsetY=R*V,i.total=this.calculateTotal(),this.outerRadius=V-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*y,0),this.updateElements(o,0,o.length,e)}_circumference(e,r){let n=this.options,i=this._cachedMeta,o=this._getCircumference();return r&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*o/Ia)}updateElements(e,r,n,i){let o=i==="reset",s=this.chart,u=s.chartArea,y=s.options.animation,w=(u.left+u.right)/2,T=(u.top+u.bottom)/2,I=o&&y.animateScale,P=I?0:this.innerRadius,L=I?0:this.outerRadius,{sharedOptions:R,includeOptions:W}=this._getSharedOptions(r,i),G=this._getRotation(),q;for(q=0;q<r;++q)G+=this._circumference(q,o);for(q=r;q<r+n;++q){let V=this._circumference(q,o),p=e[q],K={x:w+this.offsetX,y:T+this.offsetY,startAngle:G,endAngle:G+V,circumference:V,outerRadius:L,innerRadius:P};W&&(K.options=R||this.resolveDataElementOptions(q,p.active?"active":i)),G+=V,this.updateElement(p,q,K,i)}}calculateTotal(){let e=this._cachedMeta,r=e.data,n=0,i;for(i=0;i<r.length;i++){let o=e._parsed[i];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(i)&&!r[i].hidden&&(n+=Math.abs(o))}return n}calculateCircumference(e){let r=this._cachedMeta.total;return r>0&&!isNaN(e)?Ia*(Math.abs(e)/r):0}getLabelAndValue(e){let r=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Cx(r._parsed[e],n.options.locale);return{label:i[e]||"",value:o}}getMaxBorderWidth(e){let r=0,n=this.chart,i,o,s,u,h;if(!e){for(i=0,o=n.data.datasets.length;i<o;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,u=s.controller;break}}if(!e)return 0;for(i=0,o=e.length;i<o;++i)h=u.resolveDataElementOptions(i),h.borderAlign!=="inner"&&(r=Math.max(r,h.borderWidth||0,h.hoverBorderWidth||0));return r}getMaxOffset(e){let r=0;for(let n=0,i=e.length;n<i;++n){let o=this.resolveDataElementOptions(n);r=Math.max(r,o.offset||0,o.hoverOffset||0)}return r}_getRingWeightOffset(e){let r=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(r+=this._getRingWeight(n));return r}_getRingWeight(e){return Math.max(si(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}},fj=class extends tm{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let r=this._cachedMeta,{dataset:n,data:i=[],_dataset:o}=r,s=this.chart._animationsDisabled,{start:u,count:h}=L4(r,i,s);this._drawStart=u,this._drawCount=h,R4(r)&&(u=0,h=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;let y=this.resolveDatasetElementOptions(e);this.options.showLine||(y.borderWidth=0),y.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:y},e),this.updateElements(i,u,h,e)}updateElements(e,r,n,i){let o=i==="reset",{iScale:s,vScale:u,_stacked:h,_dataset:y}=this._cachedMeta,{sharedOptions:w,includeOptions:T}=this._getSharedOptions(r,i),I=s.axis,P=u.axis,{spanGaps:L,segment:R}=this.options,W=Nb(L)?L:Number.POSITIVE_INFINITY,G=this.chart._animationsDisabled||o||i==="none",q=r+n,V=e.length,p=r>0&&this.getParsed(r-1);for(let K=0;K<V;++K){let j=e[K],Q=G?j:{};if(K<r||K>=q){Q.skip=!0;continue}let ee=this.getParsed(K),se=Ii(ee[P]),me=Q[I]=s.getPixelForValue(ee[I],K),ve=Q[P]=o||se?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,ee,h):ee[P],K);Q.skip=isNaN(me)||isNaN(ve)||se,Q.stop=K>0&&Math.abs(ee[I]-p[I])>W,R&&(Q.parsed=ee,Q.raw=y.data[K]),T&&(Q.options=w||this.resolveDataElementOptions(K,j.active?"active":i)),G||this.updateElement(j,K,Q,i),p=ee}}getMaxOverflow(){let e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;let o=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,o,s)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}},DD=class extends tm{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let r=e.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:n,color:i}}=e.legend.options;return r.labels.map((o,s)=>{let h=e.getDatasetMeta(0).controller.getStyle(s);return{text:o,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,fontColor:i,lineWidth:h.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,r,n){n.chart.toggleDataVisibility(r.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,r){super(e,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let r=this._cachedMeta,n=this.chart,i=n.data.labels||[],o=Cx(r._parsed[e].r,n.options.locale);return{label:i[e]||"",value:o}}parseObjectData(e,r,n,i){return H4.bind(this)(e,r,n,i)}update(e){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,e)}getMinMax(){let e=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,i)=>{let o=this.getParsed(i).r;!isNaN(o)&&this.chart.getDataVisibility(i)&&(o<r.min&&(r.min=o),o>r.max&&(r.max=o))}),r}_updateRadius(){let e=this.chart,r=e.chartArea,n=e.options,i=Math.min(r.right-r.left,r.bottom-r.top),o=Math.max(i/2,0),s=Math.max(n.cutoutPercentage?o/100*n.cutoutPercentage:1,0),u=(o-s)/e.getVisibleDatasetCount();this.outerRadius=o-u*this.index,this.innerRadius=this.outerRadius-u}updateElements(e,r,n,i){let o=i==="reset",s=this.chart,h=s.options.animation,y=this._cachedMeta.rScale,w=y.xCenter,T=y.yCenter,I=y.getIndexAngle(0)-.5*Ca,P=I,L,R=360/this.countVisibleElements();for(L=0;L<r;++L)P+=this._computeAngle(L,i,R);for(L=r;L<r+n;L++){let W=e[L],G=P,q=P+this._computeAngle(L,i,R),V=s.getDataVisibility(L)?y.getDistanceFromCenterForValue(this.getParsed(L).r):0;P=q,o&&(h.animateScale&&(V=0),h.animateRotate&&(G=q=I));let p={x:w,y:T,innerRadius:0,outerRadius:V,startAngle:G,endAngle:q,options:this.resolveDataElementOptions(L,W.active?"active":i)};this.updateElement(W,L,p,i)}}countVisibleElements(){let e=this._cachedMeta,r=0;return e.data.forEach((n,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&r++}),r}_computeAngle(e,r,n){return this.chart.getDataVisibility(e)?$h(this.resolveDataElementOptions(e,r).angle||n):0}},hj=class extends NE{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},dj=class extends tm{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let r=this._cachedMeta.vScale,n=this.getParsed(e);return{label:r.getLabels()[e],value:""+r.getLabelForValue(n[r.axis])}}parseObjectData(e,r,n,i){return H4.bind(this)(e,r,n,i)}update(e){let r=this._cachedMeta,n=r.dataset,i=r.data||[],o=r.iScale.getLabels();if(n.points=i,e!=="resize"){let s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);let u={_loop:!0,_fullLoop:o.length===i.length,options:s};this.updateElement(n,void 0,u,e)}this.updateElements(i,0,i.length,e)}updateElements(e,r,n,i){let o=this._cachedMeta.rScale,s=i==="reset";for(let u=r;u<r+n;u++){let h=e[u],y=this.resolveDataElementOptions(u,h.active?"active":i),w=o.getPointPositionForValue(u,this.getParsed(u).r),T=s?o.xCenter:w.x,I=s?o.yCenter:w.y,P={x:T,y:I,angle:w.angle,skip:isNaN(T)||isNaN(I),options:y};this.updateElement(h,u,P,i)}}},pj=class extends tm{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let r=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:o}=r,s=this.getParsed(e),u=i.getLabelForValue(s.x),h=o.getLabelForValue(s.y);return{label:n[e]||"",value:"("+u+", "+h+")"}}update(e){let r=this._cachedMeta,{data:n=[]}=r,i=this.chart._animationsDisabled,{start:o,count:s}=L4(r,n,i);if(this._drawStart=o,this._drawCount=s,R4(r)&&(o=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:u,_dataset:h}=r;u._chart=this.chart,u._datasetIndex=this.index,u._decimated=!!h._decimated,u.points=n;let y=this.resolveDatasetElementOptions(e);y.segment=this.options.segment,this.updateElement(u,void 0,{animated:!i,options:y},e)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(n,o,s,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,r,n,i){let o=i==="reset",{iScale:s,vScale:u,_stacked:h,_dataset:y}=this._cachedMeta,w=this.resolveDataElementOptions(r,i),T=this.getSharedOptions(w),I=this.includeOptions(i,T),P=s.axis,L=u.axis,{spanGaps:R,segment:W}=this.options,G=Nb(R)?R:Number.POSITIVE_INFINITY,q=this.chart._animationsDisabled||o||i==="none",V=r>0&&this.getParsed(r-1);for(let p=r;p<r+n;++p){let K=e[p],j=this.getParsed(p),Q=q?K:{},ee=Ii(j[L]),se=Q[P]=s.getPixelForValue(j[P],p),me=Q[L]=o||ee?u.getBasePixel():u.getPixelForValue(h?this.applyStack(u,j,h):j[L],p);Q.skip=isNaN(se)||isNaN(me)||ee,Q.stop=p>0&&Math.abs(j[P]-V[P])>G,W&&(Q.parsed=j,Q.raw=y.data[p]),I&&(Q.options=T||this.resolveDataElementOptions(p,K.active?"active":i)),q||this.updateElement(K,p,Q,i),V=j}this.updateSharedOptions(T,i,w)}getMaxOverflow(){let e=this._cachedMeta,r=e.data||[];if(!this.options.showLine){let u=0;for(let h=r.length-1;h>=0;--h)u=Math.max(u,r[h].size(this.resolveDataElementOptions(h))/2);return u>0&&u}let n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!r.length)return i;let o=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,o,s)/2}},wdt=Object.freeze({__proto__:null,BarController:uj,BubbleController:cj,DoughnutController:NE,LineController:fj,PieController:hj,PolarAreaController:DD,RadarController:dj,ScatterController:pj});function zb(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var mj=class t{static override(e){Object.assign(t.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return zb()}parse(){return zb()}format(){return zb()}add(){return zb()}diff(){return zb()}startOf(){return zb()}endOf(){return zb()}},Sdt={_date:mj};function Edt(t,e,r,n){let{controller:i,data:o,_sorted:s}=t,u=i._cachedMeta.iScale,h=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(u&&e===u.axis&&e!=="r"&&s&&o.length){let y=u._reversePixels?ape:Zp;if(n){if(i._sharedOptions){let w=o[0],T=typeof w.getRange=="function"&&w.getRange(e);if(T){let I=y(o,e,r-T),P=y(o,e,r+T);return{lo:I.lo,hi:P.hi}}}}else{let w=y(o,e,r);if(h){let{vScale:T}=i._cachedMeta,{_parsed:I}=t,P=I.slice(0,w.lo+1).reverse().findIndex(R=>!Ii(R[T.axis]));w.lo-=Math.max(0,P);let L=I.slice(w.hi).findIndex(R=>!Ii(R[T.axis]));w.hi+=Math.max(0,L)}return w}}return{lo:0,hi:o.length-1}}function HE(t,e,r,n,i){let o=t.getSortedVisibleDatasetMetas(),s=r[e];for(let u=0,h=o.length;u<h;++u){let{index:y,data:w}=o[u],{lo:T,hi:I}=Edt(o[u],e,s,i);for(let P=T;P<=I;++P){let L=w[P];L.skip||n(L,y,P)}}}function Tdt(t){let e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){let o=e?Math.abs(n.x-i.x):0,s=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function tj(t,e,r,n,i){let o=[];return!i&&!t.isPointInArea(e)||HE(t,r,e,function(u,h,y){!i&&!Yp(u,t.chartArea,0)||u.inRange(e.x,e.y,n)&&o.push({element:u,datasetIndex:h,index:y})},!0),o}function Adt(t,e,r,n){let i=[];function o(s,u,h){let{startAngle:y,endAngle:w}=s.getProps(["startAngle","endAngle"],n),{angle:T}=I4(s,{x:e.x,y:e.y});kx(T,y,w)&&i.push({element:s,datasetIndex:u,index:h})}return HE(t,r,e,o),i}function kdt(t,e,r,n,i,o){let s=[],u=Tdt(r),h=Number.POSITIVE_INFINITY;function y(w,T,I){let P=w.inRange(e.x,e.y,i);if(n&&!P)return;let L=w.getCenterPoint(i);if(!(!!o||t.isPointInArea(L))&&!P)return;let W=u(e,L);W<h?(s=[{element:w,datasetIndex:T,index:I}],h=W):W===h&&s.push({element:w,datasetIndex:T,index:I})}return HE(t,r,e,y),s}function rj(t,e,r,n,i,o){return!o&&!t.isPointInArea(e)?[]:r==="r"&&!n?Adt(t,e,r,i):kdt(t,e,r,n,i,o)}function qpe(t,e,r,n,i){let o=[],s=r==="x"?"inXRange":"inYRange",u=!1;return HE(t,r,e,(h,y,w)=>{h[s]&&h[s](e[r],i)&&(o.push({element:h,datasetIndex:y,index:w}),u=u||h.inRange(e.x,e.y,i))}),n&&!u?[]:o}var Cdt={evaluateInteractionItems:HE,modes:{index(t,e,r,n){let i=Zv(e,t),o=r.axis||"x",s=r.includeInvisible||!1,u=r.intersect?tj(t,i,o,n,s):rj(t,i,o,!1,n,s),h=[];return u.length?(t.getSortedVisibleDatasetMetas().forEach(y=>{let w=u[0].index,T=y.data[w];T&&!T.skip&&h.push({element:T,datasetIndex:y.index,index:w})}),h):[]},dataset(t,e,r,n){let i=Zv(e,t),o=r.axis||"xy",s=r.includeInvisible||!1,u=r.intersect?tj(t,i,o,n,s):rj(t,i,o,!1,n,s);if(u.length>0){let h=u[0].datasetIndex,y=t.getDatasetMeta(h).data;u=[];for(let w=0;w<y.length;++w)u.push({element:y[w],datasetIndex:h,index:w})}return u},point(t,e,r,n){let i=Zv(e,t),o=r.axis||"xy",s=r.includeInvisible||!1;return tj(t,i,o,n,s)},nearest(t,e,r,n){let i=Zv(e,t),o=r.axis||"xy",s=r.includeInvisible||!1;return rj(t,i,o,r.intersect,n,s)},x(t,e,r,n){let i=Zv(e,t);return qpe(t,i,"x",r.intersect,n)},y(t,e,r,n){let i=Zv(e,t);return qpe(t,i,"y",r.intersect,n)}}},Ime=["left","top","right","bottom"];function PE(t,e){return t.filter(r=>r.pos===e)}function Npe(t,e){return t.filter(r=>Ime.indexOf(r.pos)===-1&&r.box.axis===e)}function ME(t,e){return t.sort((r,n)=>{let i=e?n:r,o=e?r:n;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Idt(t){let e=[],r,n,i,o,s,u;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:o,options:{stack:s,stackWeight:u=1}}=i,e.push({index:r,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:u});return e}function Ddt(t){let e={};for(let r of t){let{stack:n,pos:i,stackWeight:o}=r;if(!n||!Ime.includes(i))continue;let s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function Odt(t,e){let r=Ddt(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e,o,s,u;for(o=0,s=t.length;o<s;++o){u=t[o];let{fullSize:h}=u.box,y=r[u.stack],w=y&&u.stackWeight/y.weight;u.horizontal?(u.width=w?w*n:h&&e.availableWidth,u.height=i):(u.width=n,u.height=w?w*i:h&&e.availableHeight)}return r}function Pdt(t){let e=Idt(t),r=ME(e.filter(y=>y.box.fullSize),!0),n=ME(PE(e,"left"),!0),i=ME(PE(e,"right")),o=ME(PE(e,"top"),!0),s=ME(PE(e,"bottom")),u=Npe(e,"x"),h=Npe(e,"y");return{fullSize:r,leftAndTop:n.concat(o),rightAndBottom:i.concat(h).concat(s).concat(u),chartArea:PE(e,"chartArea"),vertical:n.concat(i).concat(h),horizontal:o.concat(s).concat(u)}}function Bpe(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function Dme(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Mdt(t,e,r,n){let{pos:i,box:o}=r,s=t.maxPadding;if(!qi(i)){r.size&&(t[i]-=r.size);let T=n[r.stack]||{size:0,count:1};T.size=Math.max(T.size,r.horizontal?o.height:o.width),r.size=T.size/T.count,t[i]+=r.size}o.getPadding&&Dme(s,o.getPadding());let u=Math.max(0,e.outerWidth-Bpe(s,t,"left","right")),h=Math.max(0,e.outerHeight-Bpe(s,t,"top","bottom")),y=u!==t.w,w=h!==t.h;return t.w=u,t.h=h,r.horizontal?{same:y,other:w}:{same:w,other:y}}function Ldt(t){let e=t.maxPadding;function r(n){let i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function Rdt(t,e){let r=e.maxPadding;function n(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],r[s])}),o}return n(t?["left","right"]:["top","bottom"])}function FE(t,e,r,n){let i=[],o,s,u,h,y,w;for(o=0,s=t.length,y=0;o<s;++o){u=t[o],h=u.box,h.update(u.width||e.w,u.height||e.h,Rdt(u.horizontal,e));let{same:T,other:I}=Mdt(e,r,u,n);y|=T&&i.length,w=w||I,h.fullSize||i.push(u)}return y&&FE(i,e,r,n)||w}function _D(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function zpe(t,e,r,n){let i=r.padding,{x:o,y:s}=e;for(let u of t){let h=u.box,y=n[u.stack]||{count:1,placed:0,weight:1},w=u.stackWeight/y.weight||1;if(u.horizontal){let T=e.w*w,I=y.size||h.height;Tx(y.start)&&(s=y.start),h.fullSize?_D(h,i.left,s,r.outerWidth-i.right-i.left,I):_D(h,e.left+y.placed,s,T,I),y.start=s,y.placed+=T,s=h.bottom}else{let T=e.h*w,I=y.size||h.width;Tx(y.start)&&(o=y.start),h.fullSize?_D(h,o,i.top,I,r.outerHeight-i.bottom-i.top):_D(h,o,e.top+y.placed,I,T),y.start=o,y.placed+=T,o=h.right}}e.x=o,e.y=s}var Fu={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){let r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;let i=du(t.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(r-i.height,0),u=Pdt(t.boxes),h=u.vertical,y=u.horizontal;Ro(t.boxes,R=>{typeof R.beforeLayout=="function"&&R.beforeLayout()});let w=h.reduce((R,W)=>W.box.options&&W.box.options.display===!1?R:R+1,0)||1,T=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/w,hBoxMaxHeight:s/2}),I=Object.assign({},i);Dme(I,du(n));let P=Object.assign({maxPadding:I,w:o,h:s,x:i.left,y:i.top},i),L=Odt(h.concat(y),T);FE(u.fullSize,P,T,L),FE(h,P,T,L),FE(y,P,T,L)&&FE(h,P,T,L),Ldt(P),zpe(u.leftAndTop,P,T,L),P.x+=P.w,P.y+=P.h,zpe(u.rightAndBottom,P,T,L),t.chartArea={left:P.left,top:P.top,right:P.left+P.w,bottom:P.top+P.h,height:P.h,width:P.w},Ro(u.chartArea,R=>{let W=R.box;Object.assign(W,t.chartArea),W.update(P.w,P.h,{left:0,top:0,right:0,bottom:0})})}},OD=class{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}},gj=class extends OD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},kD="$chartjs",Fdt={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jpe=t=>t===null||t==="";function qdt(t,e){let r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[kD]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",jpe(i)){let o=$4(t,"width");o!==void 0&&(t.width=o)}if(jpe(n))if(t.style.height==="")t.height=t.width/(e||2);else{let o=$4(t,"height");o!==void 0&&(t.height=o)}return t}var Ome=Spe?{passive:!0}:!1;function Ndt(t,e,r){t&&t.addEventListener(e,r,Ome)}function Bdt(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,Ome)}function zdt(t,e){let r=Fdt[t.type]||t.type,{x:n,y:i}=Zv(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function PD(t,e){for(let r of t)if(r===e||r.contains(e))return!0}function jdt(t,e,r){let n=t.canvas,i=new MutationObserver(o=>{let s=!1;for(let u of o)s=s||PD(u.addedNodes,n),s=s&&!PD(u.removedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function Udt(t,e,r){let n=t.canvas,i=new MutationObserver(o=>{let s=!1;for(let u of o)s=s||PD(u.removedNodes,n),s=s&&!PD(u.addedNodes,n);s&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}var BE=new Map,Upe=0;function Pme(){let t=window.devicePixelRatio;t!==Upe&&(Upe=t,BE.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function Vdt(t,e){BE.size||window.addEventListener("resize",Pme),BE.set(t,e)}function Hdt(t){BE.delete(t),BE.size||window.removeEventListener("resize",Pme)}function Wdt(t,e,r){let n=t.canvas,i=n&&yD(n);if(!i)return;let o=M4((u,h)=>{let y=i.clientWidth;r(u,h),y<i.clientWidth&&r()},window),s=new ResizeObserver(u=>{let h=u[0],y=h.contentRect.width,w=h.contentRect.height;y===0&&w===0||o(y,w)});return s.observe(i),Vdt(t,o),s}function nj(t,e,r){r&&r.disconnect(),e==="resize"&&Hdt(t)}function $dt(t,e,r){let n=t.canvas,i=M4(o=>{t.ctx!==null&&r(zdt(o,t))},t);return Ndt(n,e,i),i}var vj=class extends OD{acquireContext(e,r){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(qdt(e,r),n):null}releaseContext(e){let r=e.canvas;if(!r[kD])return!1;let n=r[kD].initial;["height","width"].forEach(o=>{let s=n[o];Ii(s)?r.removeAttribute(o):r.setAttribute(o,s)});let i=n.style||{};return Object.keys(i).forEach(o=>{r.style[o]=i[o]}),r.width=r.width,delete r[kD],!0}addEventListener(e,r,n){this.removeEventListener(e,r);let i=e.$proxies||(e.$proxies={}),s={attach:jdt,detach:Udt,resize:Wdt}[r]||$dt;i[r]=s(e,r,n)}removeEventListener(e,r){let n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:nj,detach:nj,resize:nj}[r]||Bdt)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return wpe(e,r,n,i)}isAttached(e){let r=e&&yD(e);return!!(r&&r.isConnected)}};function Gdt(t){return!vD()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?gj:vj}var Nd=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Nb(this.x)&&Nb(this.y)}getProps(e,r){let n=this.$animations;if(!r||!n)return this;let i={};return e.forEach(o=>{i[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),i}};function Kdt(t,e){let r=t.options.ticks,n=Zdt(t),i=Math.min(r.maxTicksLimit||n,n),o=r.major.enabled?Xdt(e):[],s=o.length,u=o[0],h=o[s-1],y=[];if(s>i)return Jdt(e,y,o,s/i),y;let w=Ydt(o,e,i);if(s>0){let T,I,P=s>1?Math.round((h-u)/(s-1)):null;for(xD(e,y,w,Ii(P)?0:u-P,u),T=0,I=s-1;T<I;T++)xD(e,y,w,o[T],o[T+1]);return xD(e,y,w,h,Ii(P)?e.length:h+P),y}return xD(e,y,w),y}function Zdt(t){let e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function Ydt(t,e,r){let n=Qdt(t),i=e.length/r;if(!n)return Math.max(i,1);let o=npe(n);for(let s=0,u=o.length-1;s<u;s++){let h=o[s];if(h>i)return h}return Math.max(i,1)}function Xdt(t){let e=[],r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function Jdt(t,e,r,n){let i=0,o=r[0],s;for(n=Math.ceil(n),s=0;s<t.length;s++)s===o&&(e.push(t[s]),i++,o=r[i*n])}function xD(t,e,r,n,i){let o=si(n,0),s=Math.min(si(i,t.length),t.length),u=0,h,y,w;for(r=Math.ceil(r),i&&(h=i-n,r=h/Math.floor(h/r)),w=o;w<0;)u++,w=Math.round(o+u*r);for(y=Math.max(o,0);y<s;y++)y===w&&(e.push(t[y]),u++,w=Math.round(o+u*r))}function Qdt(t){let e=t.length,r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}var ept=t=>t==="left"?"right":t==="right"?"left":t,Vpe=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,Hpe=(t,e)=>Math.min(e||t,t);function Wpe(t,e){let r=[],n=t.length/e,i=t.length,o=0;for(;o<i;o+=n)r.push(t[Math.floor(o)]);return r}function tpt(t,e,r){let n=t.ticks.length,i=Math.min(e,n-1),o=t._startPixel,s=t._endPixel,u=1e-6,h=t.getPixelForTick(i),y;if(!(r&&(n===1?y=Math.max(h-o,s-h):e===0?y=(t.getPixelForTick(1)-h)/2:y=(h-t.getPixelForTick(i-1))/2,h+=i<e?y:-y,h<o-u||h>s+u)))return h}function rpt(t,e){Ro(t,r=>{let n=r.gc,i=n.length/2,o;if(i>e){for(o=0;o<i;++o)delete r.data[n[o]];n.splice(0,i)}})}function LE(t){return t.drawTicks?t.tickLength:0}function $pe(t,e){if(!t.display)return 0;let r=nl(t.font,e),n=du(t.padding);return(ka(t.text)?t.text.length:1)*r.lineHeight+n.height}function npt(t,e){return cg(t,{scale:e,type:"scale"})}function ipt(t,e,r){return cg(t,{tick:r,index:e,type:"tick"})}function opt(t,e,r){let n=hD(t);return(r&&e!=="right"||!r&&e==="right")&&(n=ept(n)),n}function apt(t,e,r,n){let{top:i,left:o,bottom:s,right:u,chart:h}=t,{chartArea:y,scales:w}=h,T=0,I,P,L,R=s-i,W=u-o;if(t.isHorizontal()){if(P=hu(n,o,u),qi(r)){let G=Object.keys(r)[0],q=r[G];L=w[G].getPixelForValue(q)+R-e}else r==="center"?L=(y.bottom+y.top)/2+R-e:L=Vpe(t,r,e);I=u-o}else{if(qi(r)){let G=Object.keys(r)[0],q=r[G];P=w[G].getPixelForValue(q)-W+e}else r==="center"?P=(y.left+y.right)/2-W+e:P=Vpe(t,r,e);L=hu(n,s,i),T=r==="left"?-Os:Os}return{titleX:P,titleY:L,maxWidth:I,rotation:T}}var Ub=class t extends Nd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=$c(e,Number.POSITIVE_INFINITY),r=$c(r,Number.NEGATIVE_INFINITY),n=$c(n,Number.POSITIVE_INFINITY),i=$c(i,Number.NEGATIVE_INFINITY),{min:$c(e,n),max:$c(r,i),minDefined:gs(e),maxDefined:gs(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:r,max:n};let u=this.getMatchingVisibleMetas();for(let h=0,y=u.length;h<y;++h)s=u[h].controller.getMinMax(this,e),i||(r=Math.min(r,s.min)),o||(n=Math.max(n,s.max));return r=o&&r>n?n:r,n=i&&r>n?r:n,{min:$c(r,$c(n,r)),max:$c(n,$c(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ca(this.options.beforeUpdate,[this])}update(e,r,n){let{beginAtZero:i,grace:o,ticks:s}=this.options,u=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gpe(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let h=u<this.ticks.length;this._convertTicksToLabels(h?Wpe(this.ticks,u):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=Kdt(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),h&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ca(this.options.afterUpdate,[this])}beforeSetDimensions(){ca(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ca(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ca(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ca(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let r=this.options.ticks,n,i,o;for(n=0,i=e.length;n<i;n++)o=e[n],o.label=ca(r.callback,[o.value,n,e],this)}afterTickToLabelConversion(){ca(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ca(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,r=e.ticks,n=Hpe(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,o=r.maxRotation,s=i,u,h,y;if(!this._isVisible()||!r.display||i>=o||n<=1||!this.isHorizontal()){this.labelRotation=i;return}let w=this._getLabelSizes(),T=w.widest.width,I=w.highest.height,P=Al(this.chart.width-T,0,this.maxWidth);u=e.offset?this.maxWidth/n:P/(n-1),T+6>u&&(u=P/(n-(e.offset?.5:1)),h=this.maxHeight-LE(e.grid)-r.padding-$pe(e.title,this.chart.options.font),y=Math.sqrt(T*T+I*I),s=cD(Math.min(Math.asin(Al((w.highest.height+6)/u,-1,1)),Math.asin(Al(h/y,-1,1))-Math.asin(Al(I/y,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){ca(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ca(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:o}}=this,s=this._isVisible(),u=this.isHorizontal();if(s){let h=$pe(i,r.options.font);if(u?(e.width=this.maxWidth,e.height=LE(o)+h):(e.height=this.maxHeight,e.width=LE(o)+h),n.display&&this.ticks.length){let{first:y,last:w,widest:T,highest:I}=this._getLabelSizes(),P=n.padding*2,L=$h(this.labelRotation),R=Math.cos(L),W=Math.sin(L);if(u){let G=n.mirror?0:W*T.width+R*I.height;e.height=Math.min(this.maxHeight,e.height+G+P)}else{let G=n.mirror?0:R*T.width+W*I.height;e.width=Math.min(this.maxWidth,e.width+G+P)}this._calculatePadding(y,w,W,R)}}this._handleMargins(),u?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){let{ticks:{align:o,padding:s},position:u}=this.options,h=this.labelRotation!==0,y=u!=="top"&&this.axis==="x";if(this.isHorizontal()){let w=this.getPixelForTick(0)-this.left,T=this.right-this.getPixelForTick(this.ticks.length-1),I=0,P=0;h?y?(I=i*e.width,P=n*r.height):(I=n*e.height,P=i*r.width):o==="start"?P=r.width:o==="end"?I=e.width:o!=="inner"&&(I=e.width/2,P=r.width/2),this.paddingLeft=Math.max((I-w+s)*this.width/(this.width-w),0),this.paddingRight=Math.max((P-T+s)*this.width/(this.width-T),0)}else{let w=r.height/2,T=e.height/2;o==="start"?(w=0,T=e.height):o==="end"&&(w=r.height,T=0),this.paddingTop=w+s,this.paddingBottom=T+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ca(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ii(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let r=this.options.ticks.sampleSize,n=this.ticks;r<n.length&&(n=Wpe(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){let{ctx:i,_longestTextCache:o}=this,s=[],u=[],h=Math.floor(r/Hpe(r,n)),y=0,w=0,T,I,P,L,R,W,G,q,V,p,K;for(T=0;T<r;T+=h){if(L=e[T].label,R=this._resolveTickFontOptions(T),i.font=W=R.string,G=o[W]=o[W]||{data:{},gc:[]},q=R.lineHeight,V=p=0,!Ii(L)&&!ka(L))V=AE(i,G.data,G.gc,V,L),p=q;else if(ka(L))for(I=0,P=L.length;I<P;++I)K=L[I],!Ii(K)&&!ka(K)&&(V=AE(i,G.data,G.gc,V,K),p+=q);s.push(V),u.push(p),y=Math.max(V,y),w=Math.max(p,w)}rpt(o,r);let j=s.indexOf(y),Q=u.indexOf(w),ee=se=>({width:s[se]||0,height:u[se]||0});return{first:ee(0),last:ee(r-1),widest:ee(j),highest:ee(Q),widths:s,heights:u}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let r=this._startPixel+e*this._length;return ope(this._alignToPixels?$v(this.chart,r,0):r)}getDecimalForPixel(e){let r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){let r=this.ticks||[];if(e>=0&&e<r.length){let n=r[e];return n.$context||(n.$context=ipt(this.getContext(),e,n))}return this.$context||(this.$context=npt(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,r=$h(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,u=o?o.widest.width+s:0,h=o?o.highest.height+s:0;return this.isHorizontal()?h*n>u*i?u/n:h/i:h*i<u*n?h/n:u/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let r=this.axis,n=this.chart,i=this.options,{grid:o,position:s,border:u}=i,h=o.offset,y=this.isHorizontal(),T=this.ticks.length+(h?1:0),I=LE(o),P=[],L=u.setContext(this.getContext()),R=L.display?L.width:0,W=R/2,G=function(Se){return $v(n,Se,R)},q,V,p,K,j,Q,ee,se,me,ve,U,$;if(s==="top")q=G(this.bottom),Q=this.bottom-I,se=q-W,ve=G(e.top)+W,$=e.bottom;else if(s==="bottom")q=G(this.top),ve=e.top,$=G(e.bottom)-W,Q=q+W,se=this.top+I;else if(s==="left")q=G(this.right),j=this.right-I,ee=q-W,me=G(e.left)+W,U=e.right;else if(s==="right")q=G(this.left),me=e.left,U=G(e.right)-W,j=q+W,ee=this.left+I;else if(r==="x"){if(s==="center")q=G((e.top+e.bottom)/2+.5);else if(qi(s)){let Se=Object.keys(s)[0],de=s[Se];q=G(this.chart.scales[Se].getPixelForValue(de))}ve=e.top,$=e.bottom,Q=q+W,se=Q+I}else if(r==="y"){if(s==="center")q=G((e.left+e.right)/2);else if(qi(s)){let Se=Object.keys(s)[0],de=s[Se];q=G(this.chart.scales[Se].getPixelForValue(de))}j=q-W,ee=j-I,me=e.left,U=e.right}let he=si(i.ticks.maxTicksLimit,T),Ce=Math.max(1,Math.ceil(T/he));for(V=0;V<T;V+=Ce){let Se=this.getContext(V),de=o.setContext(Se),we=u.setContext(Se),Ue=de.lineWidth,ye=de.color,ne=we.dash||[],st=we.dashOffset,dt=de.tickWidth,lt=de.tickColor,kt=de.tickBorderDash||[],ut=de.tickBorderDashOffset;p=tpt(this,V,h),p!==void 0&&(K=$v(n,p,Ue),y?j=ee=me=U=K:Q=se=ve=$=K,P.push({tx1:j,ty1:Q,tx2:ee,ty2:se,x1:me,y1:ve,x2:U,y2:$,width:Ue,color:ye,borderDash:ne,borderDashOffset:st,tickWidth:dt,tickColor:lt,tickBorderDash:kt,tickBorderDashOffset:ut}))}return this._ticksLength=T,this._borderValue=q,P}_computeLabelItems(e){let r=this.axis,n=this.options,{position:i,ticks:o}=n,s=this.isHorizontal(),u=this.ticks,{align:h,crossAlign:y,padding:w,mirror:T}=o,I=LE(n.grid),P=I+w,L=T?-w:P,R=-$h(this.labelRotation),W=[],G,q,V,p,K,j,Q,ee,se,me,ve,U,$="middle";if(i==="top")j=this.bottom-L,Q=this._getXAxisLabelAlignment();else if(i==="bottom")j=this.top+L,Q=this._getXAxisLabelAlignment();else if(i==="left"){let Ce=this._getYAxisLabelAlignment(I);Q=Ce.textAlign,K=Ce.x}else if(i==="right"){let Ce=this._getYAxisLabelAlignment(I);Q=Ce.textAlign,K=Ce.x}else if(r==="x"){if(i==="center")j=(e.top+e.bottom)/2+P;else if(qi(i)){let Ce=Object.keys(i)[0],Se=i[Ce];j=this.chart.scales[Ce].getPixelForValue(Se)+P}Q=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")K=(e.left+e.right)/2-P;else if(qi(i)){let Ce=Object.keys(i)[0],Se=i[Ce];K=this.chart.scales[Ce].getPixelForValue(Se)}Q=this._getYAxisLabelAlignment(I).textAlign}r==="y"&&(h==="start"?$="top":h==="end"&&($="bottom"));let he=this._getLabelSizes();for(G=0,q=u.length;G<q;++G){V=u[G],p=V.label;let Ce=o.setContext(this.getContext(G));ee=this.getPixelForTick(G)+o.labelOffset,se=this._resolveTickFontOptions(G),me=se.lineHeight,ve=ka(p)?p.length:1;let Se=ve/2,de=Ce.color,we=Ce.textStrokeColor,Ue=Ce.textStrokeWidth,ye=Q;s?(K=ee,Q==="inner"&&(G===q-1?ye=this.options.reverse?"left":"right":G===0?ye=this.options.reverse?"right":"left":ye="center"),i==="top"?y==="near"||R!==0?U=-ve*me+me/2:y==="center"?U=-he.highest.height/2-Se*me+me:U=-he.highest.height+me/2:y==="near"||R!==0?U=me/2:y==="center"?U=he.highest.height/2-Se*me:U=he.highest.height-ve*me,T&&(U*=-1),R!==0&&!Ce.showLabelBackdrop&&(K+=me/2*Math.sin(R))):(j=ee,U=(1-ve)*me/2);let ne;if(Ce.showLabelBackdrop){let st=du(Ce.backdropPadding),dt=he.heights[G],lt=he.widths[G],kt=U-st.top,ut=0-st.left;switch($){case"middle":kt-=dt/2;break;case"bottom":kt-=dt;break}switch(Q){case"center":ut-=lt/2;break;case"right":ut-=lt;break;case"inner":G===q-1?ut-=lt:G>0&&(ut-=lt/2);break}ne={left:ut,top:kt,width:lt+st.width,height:dt+st.height,color:Ce.backdropColor}}W.push({label:p,font:se,textOffset:U,options:{rotation:R,color:de,strokeColor:we,strokeWidth:Ue,textAlign:ye,textBaseline:$,translation:[K,j],backdrop:ne}})}return W}_getXAxisLabelAlignment(){let{position:e,ticks:r}=this.options;if(-$h(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:r,ticks:{crossAlign:n,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),u=e+o,h=s.widest.width,y,w;return r==="left"?i?(w=this.right+o,n==="near"?y="left":n==="center"?(y="center",w+=h/2):(y="right",w+=h)):(w=this.right-u,n==="near"?y="right":n==="center"?(y="center",w-=h/2):(y="left",w=this.left)):r==="right"?i?(w=this.left+o,n==="near"?y="right":n==="center"?(y="center",w-=h/2):(y="left",w-=h)):(w=this.left+u,n==="near"?y="left":n==="center"?(y="center",w+=h/2):(y="right",w=this.right)):y="right",{textAlign:y,x:w}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:r},left:n,top:i,width:o,height:s}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,o,s),e.restore())}getLineWidthForValue(e){let r=this.options.grid;if(!this._isVisible()||!r.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,u=(h,y,w)=>{!w.width||!w.color||(n.save(),n.lineWidth=w.width,n.strokeStyle=w.color,n.setLineDash(w.borderDash||[]),n.lineDashOffset=w.borderDashOffset,n.beginPath(),n.moveTo(h.x,h.y),n.lineTo(y.x,y.y),n.stroke(),n.restore())};if(r.display)for(o=0,s=i.length;o<s;++o){let h=i[o];r.drawOnChartArea&&u({x:h.x1,y:h.y1},{x:h.x2,y:h.y2},h),r.drawTicks&&u({x:h.tx1,y:h.ty1},{x:h.tx2,y:h.ty2},{color:h.tickColor,width:h.tickWidth,borderDash:h.tickBorderDash,borderDashOffset:h.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:r,options:{border:n,grid:i}}=this,o=n.setContext(this.getContext()),s=n.display?o.width:0;if(!s)return;let u=i.setContext(this.getContext(0)).lineWidth,h=this._borderValue,y,w,T,I;this.isHorizontal()?(y=$v(e,this.left,s)-s/2,w=$v(e,this.right,u)+u/2,T=I=h):(T=$v(e,this.top,s)-s/2,I=$v(e,this.bottom,u)+u/2,y=w=h),r.save(),r.lineWidth=o.width,r.strokeStyle=o.color,r.beginPath(),r.moveTo(y,T),r.lineTo(w,I),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,i=this._computeLabelArea();i&&IE(n,i);let o=this.getLabelItems(e);for(let s of o){let u=s.options,h=s.font,y=s.label,w=s.textOffset;Gv(n,y,0,w,h,u)}i&&DE(n)}drawTitle(){let{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;let o=nl(n.font),s=du(n.padding),u=n.align,h=o.lineHeight/2;r==="bottom"||r==="center"||qi(r)?(h+=s.bottom,ka(n.text)&&(h+=o.lineHeight*(n.text.length-1))):h+=s.top;let{titleX:y,titleY:w,maxWidth:T,rotation:I}=apt(this,h,r,u);Gv(e,n.text,0,0,o,{color:n.color,maxWidth:T,rotation:I,textAlign:opt(u,r,i),textBaseline:"middle",translation:[y,w]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,r=e.ticks&&e.ticks.z||0,n=si(e.grid&&e.grid.z,-1),i=si(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:r,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[],o,s;for(o=0,s=r.length;o<s;++o){let u=r[o];u[n]===this.id&&(!e||u.type===e)&&i.push(u)}return i}_resolveTickFontOptions(e){let r=this.options.ticks.setContext(this.getContext(e));return nl(r.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Px=class{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let r=Object.getPrototypeOf(e),n;upt(r)&&(n=this.register(r));let i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,spt(e,s,n),this.override&&za.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in za[i]&&(delete za[i][n],this.override&&delete Wv[n])}};function spt(t,e,r){let n=wx(Object.create(null),[r?za.get(r):{},za.get(e),t.defaults]);za.set(e,n),t.defaultRoutes&&lpt(e,t.defaultRoutes),t.descriptors&&za.describe(e,t.descriptors)}function lpt(t,e){Object.keys(e).forEach(r=>{let n=r.split("."),i=n.pop(),o=[t].concat(n).join("."),s=e[r].split("."),u=s.pop(),h=s.join(".");za.route(o,i,h,u)})}function upt(t){return"id"in t&&"defaults"in t}var yj=class{constructor(){this.controllers=new Px(tm,"datasets",!0),this.elements=new Px(Nd,"elements"),this.plugins=new Px(Object,"plugins"),this.scales=new Px(Ub,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{let o=n||this._getRegistryForType(i);n||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):Ro(i,s=>{let u=n||this._getRegistryForType(s);this._exec(e,u,s)})})}_exec(e,r,n){let i=uD(e);ca(n["before"+i],[],n),r[e](n),ca(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){let n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){let i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}},em=new yj,bj=class{constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,r,n);return r==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,r,n,i){i=i||{};for(let o of e){let s=o.plugin,u=s[n],h=[r,i,o.options];if(ca(u,h,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Ii(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){let n=e&&e.config,i=si(n.options&&n.options.plugins,{}),o=cpt(n);return i===!1&&!r?[]:hpt(e,o,i,r)}_notifyStateChanges(e){let r=this._oldCache||[],n=this._cache,i=(o,s)=>o.filter(u=>!s.some(h=>u.plugin.id===h.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}};function cpt(t){let e={},r=[],n=Object.keys(em.plugins.items);for(let o=0;o<n.length;o++)r.push(em.getPlugin(n[o]));let i=t.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];r.indexOf(s)===-1&&(r.push(s),e[s.id]=!0)}return{plugins:r,localIds:e}}function fpt(t,e){return!e&&t===!1?null:t===!0?{}:t}function hpt(t,{plugins:e,localIds:r},n,i){let o=[],s=t.getContext();for(let u of e){let h=u.id,y=fpt(n[h],i);y!==null&&o.push({plugin:u,options:dpt(t.config,{plugin:u,local:r[h]},y,s)})}return o}function dpt(t,{plugin:e,local:r},n,i){let o=t.pluginScopeKeys(e),s=t.getOptionScopes(n,o);return r&&e.defaults&&s.push(e.defaults),t.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function _j(t,e){let r=za.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function ppt(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function mpt(t,e){return t===e?"_index_":"_value_"}function Gpe(t){if(t==="x"||t==="y"||t==="r")return t}function gpt(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function xj(t,...e){if(Gpe(t))return t;for(let r of e){let n=r.axis||gpt(r.position)||t.length>1&&Gpe(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Kpe(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function vpt(t,e){if(e.data&&e.data.datasets){let r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return Kpe(t,"x",r[0])||Kpe(t,"y",r[0])}return{}}function ypt(t,e){let r=Wv[t.type]||{scales:{}},n=e.scales||{},i=_j(t.type,e),o=Object.create(null);return Object.keys(n).forEach(s=>{let u=n[s];if(!qi(u))return console.error(`Invalid scale configuration for scale: ${s}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let h=xj(s,u,vpt(s,t),za.scales[u.type]),y=mpt(h,i),w=r.scales||{};o[s]=Ex(Object.create(null),[{axis:h},u,w[h],w[y]])}),t.data.datasets.forEach(s=>{let u=s.type||t.type,h=s.indexAxis||_j(u,e),w=(Wv[u]||{}).scales||{};Object.keys(w).forEach(T=>{let I=ppt(T,h),P=s[I+"AxisID"]||I;o[P]=o[P]||Object.create(null),Ex(o[P],[{axis:I},n[P],w[T]])})}),Object.keys(o).forEach(s=>{let u=o[s];Ex(u,[za.scales[u.type],za.scale])}),o}function Mme(t){let e=t.options||(t.options={});e.plugins=si(e.plugins,{}),e.scales=ypt(t,e)}function Lme(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function bpt(t){return t=t||{},t.data=Lme(t.data),Mme(t),t}var Zpe=new Map,Rme=new Set;function wD(t,e){let r=Zpe.get(t);return r||(r=e(),Zpe.set(t,r),Rme.add(r)),r}var RE=(t,e,r)=>{let n=ug(e,r);n!==void 0&&t.add(n)},wj=class{constructor(e){this._config=bpt(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Lme(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),Mme(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wD(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return wD(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return wD(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){let r=e.id,n=this.type;return wD(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){let n=this._scopeCache,i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){let{options:i,type:o}=this,s=this._cachedScopes(e,n),u=s.get(r);if(u)return u;let h=new Set;r.forEach(w=>{e&&(h.add(e),w.forEach(T=>RE(h,e,T))),w.forEach(T=>RE(h,i,T)),w.forEach(T=>RE(h,Wv[o]||{},T)),w.forEach(T=>RE(h,za,T)),w.forEach(T=>RE(h,dD,T))});let y=Array.from(h);return y.length===0&&y.push(Object.create(null)),Rme.has(r)&&s.set(r,y),y}chartOptionScopes(){let{options:e,type:r}=this;return[e,Wv[r]||{},za.datasets[r]||{},{type:r},za,dD]}resolveNamedOptions(e,r,n,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:u}=Ype(this._resolverCache,e,i),h=s;if(xpt(s,r)){o.$shared=!1,n=sg(n)?n():n;let y=this.createResolver(e,n,u);h=qb(s,n,y)}for(let y of r)o[y]=h[y];return o}createResolver(e,r,n=[""],i){let{resolver:o}=Ype(this._resolverCache,e,n);return qi(r)?qb(o,r,void 0,i):o}};function Ype(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));let i=r.join(),o=n.get(i);return o||(o={resolver:gD(e,r),subPrefixes:r.filter(u=>!u.toLowerCase().includes("hover"))},n.set(i,o)),o}var _pt=t=>qi(t)&&Object.getOwnPropertyNames(t).some(e=>sg(t[e]));function xpt(t,e){let{isScriptable:r,isIndexable:n}=j4(t);for(let i of e){let o=r(i),s=n(i),u=(s||o)&&t[i];if(o&&(sg(u)||_pt(u))||s&&ka(u))return!0}return!1}var wpt="4.4.8",Spt=["top","bottom","left","right","chartArea"];function Xpe(t,e){return t==="top"||t==="bottom"||Spt.indexOf(t)===-1&&e==="x"}function Jpe(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function Qpe(t){let e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),ca(r&&r.onComplete,[t],e)}function Ept(t){let e=t.chart,r=e.options.animation;ca(r&&r.onProgress,[t],e)}function Fme(t){return vD()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var CD={},eme=t=>{let e=Fme(t);return Object.values(CD).filter(r=>r.canvas===e).pop()};function Tpt(t,e,r){let n=Object.keys(t);for(let i of n){let o=+i;if(o>=e){let s=t[i];delete t[i],(r>0||o>e)&&(t[o+r]=s)}}}function Apt(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function SD(t,e,r){return t.options.clip?t[r]:e[r]}function kpt(t,e){let{xScale:r,yScale:n}=t;return r&&n?{left:SD(r,e,"left"),right:SD(r,e,"right"),top:SD(n,e,"top"),bottom:SD(n,e,"bottom")}:e}var zE=class{static defaults=za;static instances=CD;static overrides=Wv;static registry=em;static version=wpt;static getChart=eme;static register(...e){em.add(...e),tme()}static unregister(...e){em.remove(...e),tme()}constructor(e,r){let n=this.config=new wj(r),i=Fme(e),o=eme(i);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||Gdt(i)),this.platform.updateConfig(n);let u=this.platform.acquireContext(i,s.aspectRatio),h=u&&u.canvas,y=h&&h.height,w=h&&h.width;if(this.id=Qde(),this.ctx=u,this.canvas=h,this.width=w,this.height=y,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new bj,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=cpe(T=>this.update(T),s.resizeDelay||0),this._dataChanges=[],CD[this.id]=this,!u||!h){console.error("Failed to create chart: can't acquire context from the given item");return}fg.listen(this,"complete",Qpe),fg.listen(this,"progress",Ept),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:o}=this;return Ii(e)?r&&o?o:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return em}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():W4(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return N4(this.canvas,this.ctx),this}stop(){return fg.stop(this),this}resize(e,r){fg.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){let n=this.options,i=this.canvas,o=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,r,o),u=n.devicePixelRatio||this.platform.getDevicePixelRatio(),h=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,W4(this,u,!0)&&(this.notifyPlugins("resize",{size:s}),ca(n.onResize,[this,s],this),this.attached&&this._doResize(h)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};Ro(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){let e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((s,u)=>(s[u]=!1,s),{}),o=[];r&&(o=o.concat(Object.keys(r).map(s=>{let u=r[s],h=xj(s,u),y=h==="r",w=h==="x";return{options:u,dposition:y?"chartArea":w?"bottom":"left",dtype:y?"radialLinear":w?"category":"linear"}}))),Ro(o,s=>{let u=s.options,h=u.id,y=xj(h,u),w=si(u.type,s.dtype);(u.position===void 0||Xpe(u.position,y)!==Xpe(s.dposition))&&(u.position=s.dposition),i[h]=!0;let T=null;if(h in n&&n[h].type===w)T=n[h];else{let I=em.getScale(w);T=new I({id:h,type:w,ctx:this.ctx,chart:this}),n[T.id]=T}T.init(u,e)}),Ro(i,(s,u)=>{s||delete n[u]}),Ro(n,s=>{Fu.configure(this,s,s.options),Fu.addBox(this,s)})}_updateMetasets(){let e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,o)=>i.index-o.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(Jpe("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(o=>o===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e=[],r=this.data.datasets,n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){let o=r[n],s=this.getDatasetMeta(n),u=o.type||this.config.type;if(s.type&&s.type!==u&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=u,s.indexAxis=o.indexAxis||_j(u,this.options),s.order=o.order||0,s.index=n,s.label=""+o.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{let h=em.getController(u),{datasetElementType:y,dataElementType:w}=za.datasets[u];Object.assign(h,{dataElementType:em.getElement(w),datasetElementType:y&&em.getElement(y)}),s.controller=new h(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){Ro(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let r=this.config;r.update();let n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let y=0,w=this.data.datasets.length;y<w;y++){let{controller:T}=this.getDatasetMeta(y),I=!i&&o.indexOf(T)===-1;T.buildOrUpdateElements(I),s=Math.max(+T.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Ro(o,y=>{y.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jpe("z","_idx"));let{_active:u,_lastEvent:h}=this;h?this._eventHandler(h,!0):u.length&&this._updateHoverStyles(u,u,!0),this.render()}_updateScales(){Ro(this.scales,e=>{Fu.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!T4(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(let{method:n,start:i,count:o}of r){let s=n==="_removeElements"?-o:o;Tpt(e,i,s)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let r=this.data.datasets.length,n=o=>new Set(e.filter(s=>s[0]===o).map((s,u)=>u+","+s.splice(1).join(","))),i=n(0);for(let o=1;o<r;o++)if(!T4(i,n(o)))return;return Array.from(i).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fu.update(this,this.width,this.height,e);let r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],Ro(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,o)=>{i._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,sg(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){let n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fg.has(this)?this.attached&&!fg.running(this)&&fg.start(this):(this.draw(),Qpe({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let r=this._sortedMetasets,n=[],i,o;for(i=0,o=r.length;i<o;++i){let s=r[i];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let r=this.ctx,n=e._clip,i=!n.disabled,o=kpt(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(i&&IE(r,{left:n.left===!1?0:o.left-n.left,right:n.right===!1?this.width:o.right+n.right,top:n.top===!1?0:o.top-n.top,bottom:n.bottom===!1?this.height:o.bottom+n.bottom}),e.controller.draw(),i&&DE(r),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return Yp(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){let o=Cdt.modes[r];return typeof o=="function"?o(this,e,n,i):[]}getDatasetMeta(e){let r=this.data.datasets[e],n=this._metasets,i=n.filter(o=>o&&o._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=cg(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let r=this.data.datasets[e];if(!r)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){let n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){let i=n?"show":"hide",o=this.getDatasetMeta(e),s=o.controller._resolveAnimations(void 0,i);Tx(r)?(o.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(o,{visible:n}),this.update(u=>u.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){let r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),fg.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),N4(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete CD[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,r=this.platform,n=(o,s)=>{r.addEventListener(this,o,s),e[o]=s},i=(o,s,u)=>{o.offsetX=s,o.offsetY=u,this._eventHandler(o)};Ro(this.options.events,o=>n(o,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,r=this.platform,n=(h,y)=>{r.addEventListener(this,h,y),e[h]=y},i=(h,y)=>{e[h]&&(r.removeEventListener(this,h,y),delete e[h])},o=(h,y)=>{this.canvas&&this.resize(h,y)},s,u=()=>{i("attach",u),this.attached=!0,this.resize(),n("resize",o),n("detach",s)};s=()=>{this.attached=!1,i("resize",o),this._stop(),this._resize(0,0),n("attach",u)},r.isAttached(this.canvas)?u():s()}unbindEvents(){Ro(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},Ro(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){let i=n?"set":"remove",o,s,u,h;for(r==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+i+"DatasetHoverStyle"]()),u=0,h=e.length;u<h;++u){s=e[u];let y=s&&this.getDatasetMeta(s.datasetIndex).controller;y&&y[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let r=this._active||[],n=e.map(({datasetIndex:o,index:s})=>{let u=this.getDatasetMeta(o);if(!u)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:u.data[s],index:s}});!kE(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){let i=this.options.hover,o=(h,y)=>h.filter(w=>!y.some(T=>w.datasetIndex===T.datasetIndex&&w.index===T.index)),s=o(r,e),u=n?e:o(e,r);s.length&&this.updateHoverStyle(s,i.mode,!1),u.length&&i.mode&&this.updateHoverStyle(u,i.mode,!0)}_eventHandler(e,r){let n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;let o=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(o||n.changed)&&this.render(),this}_handleEvent(e,r,n){let{_active:i=[],options:o}=this,s=r,u=this._getActiveElements(e,i,n,s),h=rpe(e),y=Apt(e,this._lastEvent,n,h);n&&(this._lastEvent=null,ca(o.onHover,[e,u,this],this),h&&ca(o.onClick,[e,u,this],this));let w=!kE(u,i);return(w||r)&&(this._active=u,this._updateHoverStyles(u,i,r)),this._lastEvent=y,w}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,i)}};function tme(){return Ro(zE.instances,t=>t._plugins.invalidate())}function Cpt(t,e,r){let{startAngle:n,pixelMargin:i,x:o,y:s,outerRadius:u,innerRadius:h}=e,y=i/u;t.beginPath(),t.arc(o,s,u,n-y,r+y),h>i?(y=i/h,t.arc(o,s,h,r+y,n-y,!0)):t.arc(o,s,i,r+Os,n-Os),t.closePath(),t.clip()}function Ipt(t){return mD(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Dpt(t,e,r,n){let i=Ipt(t.options.borderRadius),o=(r-e)/2,s=Math.min(o,n*e/2),u=h=>{let y=(r-Math.min(o,h))*n/2;return Al(h,0,Math.min(o,y))};return{outerStart:u(i.outerStart),outerEnd:u(i.outerEnd),innerStart:Al(i.innerStart,0,s),innerEnd:Al(i.innerEnd,0,s)}}function Ox(t,e,r,n){return{x:r+t*Math.cos(e),y:n+t*Math.sin(e)}}function MD(t,e,r,n,i,o){let{x:s,y:u,startAngle:h,pixelMargin:y,innerRadius:w}=e,T=Math.max(e.outerRadius+n+r-y,0),I=w>0?w+n+r+y:0,P=0,L=i-h;if(n){let Ce=w>0?w-n:0,Se=T>0?T-n:0,de=(Ce+Se)/2,we=de!==0?L*de/(de+n):L;P=(L-we)/2}let R=Math.max(.001,L*T-r/Ca)/T,W=(L-R)/2,G=h+W+P,q=i-W-P,{outerStart:V,outerEnd:p,innerStart:K,innerEnd:j}=Dpt(e,I,T,q-G),Q=T-V,ee=T-p,se=G+V/Q,me=q-p/ee,ve=I+K,U=I+j,$=G+K/ve,he=q-j/U;if(t.beginPath(),o){let Ce=(se+me)/2;if(t.arc(s,u,T,se,Ce),t.arc(s,u,T,Ce,me),p>0){let Ue=Ox(ee,me,s,u);t.arc(Ue.x,Ue.y,p,me,q+Os)}let Se=Ox(U,q,s,u);if(t.lineTo(Se.x,Se.y),j>0){let Ue=Ox(U,he,s,u);t.arc(Ue.x,Ue.y,j,q+Os,he+Math.PI)}let de=(q-j/I+(G+K/I))/2;if(t.arc(s,u,I,q-j/I,de,!0),t.arc(s,u,I,de,G+K/I,!0),K>0){let Ue=Ox(ve,$,s,u);t.arc(Ue.x,Ue.y,K,$+Math.PI,G-Os)}let we=Ox(Q,G,s,u);if(t.lineTo(we.x,we.y),V>0){let Ue=Ox(Q,se,s,u);t.arc(Ue.x,Ue.y,V,G-Os,se)}}else{t.moveTo(s,u);let Ce=Math.cos(se)*T+s,Se=Math.sin(se)*T+u;t.lineTo(Ce,Se);let de=Math.cos(me)*T+s,we=Math.sin(me)*T+u;t.lineTo(de,we)}t.closePath()}function Opt(t,e,r,n,i){let{fullCircles:o,startAngle:s,circumference:u}=e,h=e.endAngle;if(o){MD(t,e,r,n,h,i);for(let y=0;y<o;++y)t.fill();isNaN(u)||(h=s+(u%Ia||Ia))}return MD(t,e,r,n,h,i),t.fill(),h}function Ppt(t,e,r,n,i){let{fullCircles:o,startAngle:s,circumference:u,options:h}=e,{borderWidth:y,borderJoinStyle:w,borderDash:T,borderDashOffset:I}=h,P=h.borderAlign==="inner";if(!y)return;t.setLineDash(T||[]),t.lineDashOffset=I,P?(t.lineWidth=y*2,t.lineJoin=w||"round"):(t.lineWidth=y,t.lineJoin=w||"bevel");let L=e.endAngle;if(o){MD(t,e,r,n,L,i);for(let R=0;R<o;++R)t.stroke();isNaN(u)||(L=s+(u%Ia||Ia))}P&&Cpt(t,e,L),o||(MD(t,e,r,n,L,i),t.stroke())}var Sj=class extends Nd{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,r,n){let i=this.getProps(["x","y"],n),{angle:o,distance:s}=I4(i,{x:e,y:r}),{startAngle:u,endAngle:h,innerRadius:y,outerRadius:w,circumference:T}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),I=(this.options.spacing+this.options.borderWidth)/2,P=si(T,h-u),L=kx(o,u,h)&&u!==h,R=P>=Ia||L,W=Jp(s,y+I,w+I);return R&&W}getCenterPoint(e){let{x:r,y:n,startAngle:i,endAngle:o,innerRadius:s,outerRadius:u}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:h,spacing:y}=this.options,w=(i+o)/2,T=(s+u+y+h)/2;return{x:r+Math.cos(w)*T,y:n+Math.sin(w)*T}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:r,circumference:n}=this,i=(r.offset||0)/4,o=(r.spacing||0)/2,s=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=n>Ia?Math.floor(n/Ia):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*i,Math.sin(u)*i);let h=1-Math.sin(Math.min(Ca,n||0)),y=i*h;e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,Opt(e,this,y,o,s),Ppt(e,this,y,o,s),e.restore()}};function qme(t,e,r=e){t.lineCap=si(r.borderCapStyle,e.borderCapStyle),t.setLineDash(si(r.borderDash,e.borderDash)),t.lineDashOffset=si(r.borderDashOffset,e.borderDashOffset),t.lineJoin=si(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=si(r.borderWidth,e.borderWidth),t.strokeStyle=si(r.borderColor,e.borderColor)}function Mpt(t,e,r){t.lineTo(r.x,r.y)}function Lpt(t){return t.stepped?ppe:t.tension||t.cubicInterpolationMode==="monotone"?mpe:Mpt}function Nme(t,e,r={}){let n=t.length,{start:i=0,end:o=n-1}=r,{start:s,end:u}=e,h=Math.max(i,s),y=Math.min(o,u),w=i<s&&o<s||i>u&&o>u;return{count:n,start:h,loop:e.loop,ilen:y<h&&!w?n+y-h:y-h}}function Rpt(t,e,r,n){let{points:i,options:o}=e,{count:s,start:u,loop:h,ilen:y}=Nme(i,r,n),w=Lpt(o),{move:T=!0,reverse:I}=n||{},P,L,R;for(P=0;P<=y;++P)L=i[(u+(I?y-P:P))%s],!L.skip&&(T?(t.moveTo(L.x,L.y),T=!1):w(t,R,L,I,o.stepped),R=L);return h&&(L=i[(u+(I?y:0))%s],w(t,R,L,I,o.stepped)),!!h}function Fpt(t,e,r,n){let i=e.points,{count:o,start:s,ilen:u}=Nme(i,r,n),{move:h=!0,reverse:y}=n||{},w=0,T=0,I,P,L,R,W,G,q=p=>(s+(y?u-p:p))%o,V=()=>{R!==W&&(t.lineTo(w,W),t.lineTo(w,R),t.lineTo(w,G))};for(h&&(P=i[q(0)],t.moveTo(P.x,P.y)),I=0;I<=u;++I){if(P=i[q(I)],P.skip)continue;let p=P.x,K=P.y,j=p|0;j===L?(K<R?R=K:K>W&&(W=K),w=(T*w+p)/++T):(V(),t.lineTo(p,K),L=j,T=0,R=W=K),G=K}V()}function Ej(t){let e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?Fpt:Rpt}function qpt(t){return t.stepped?Epe:t.tension||t.cubicInterpolationMode==="monotone"?Tpe:Hv}function Npt(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),qme(t,e.options),t.stroke(i)}function Bpt(t,e,r,n){let{segments:i,options:o}=e,s=Ej(e);for(let u of i)qme(t,o,u.style),t.beginPath(),s(t,e,u,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}var zpt=typeof Path2D=="function";function jpt(t,e,r,n){zpt&&!e.options.segment?Npt(t,e,r,n):Bpt(t,e,r,n)}var Mx=class extends Nd{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let i=n.spanGaps?this._loop:this._fullLoop;xpe(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=kpe(this,this.options.segment))}first(){let e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){let e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){let n=this.options,i=e[r],o=this.points,s=Y4(this,{property:r,start:i,end:i});if(!s.length)return;let u=[],h=qpt(n),y,w;for(y=0,w=s.length;y<w;++y){let{start:T,end:I}=s[y],P=o[T],L=o[I];if(P===L){u.push(P);continue}let R=Math.abs((i-P[r])/(L[r]-P[r])),W=h(P,L,R,n.stepped);W[r]=e[r],u.push(W)}return u.length===1?u[0]:u}pathSegment(e,r,n){return Ej(this)(e,this,r,n)}path(e,r,n){let i=this.segments,o=Ej(this),s=this._loop;r=r||0,n=n||this.points.length-r;for(let u of i)s&=o(e,this,u,{start:r,end:r+n-1});return!!s}draw(e,r,n,i){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),jpt(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};function rme(t,e,r,n){let i=t.options,{[r]:o}=t.getProps([r],n);return Math.abs(e-o)<i.radius+i.hitRadius}var Tj=class extends Nd{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,r,n){let i=this.options,{x:o,y:s}=this.getProps(["x","y"],n);return Math.pow(e-o,2)+Math.pow(r-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,r){return rme(this,e,"x",r)}inYRange(e,r){return rme(this,e,"y",r)}getCenterPoint(e){let{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}size(e){e=e||this.options||{};let r=e.radius||0;r=Math.max(r,r&&e.hoverRadius||0);let n=r&&e.borderWidth||0;return(r+n)*2}draw(e,r){let n=this.options;this.skip||n.radius<.1||!Yp(this,r,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,pD(e,n,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}};function Bme(t,e){let{x:r,y:n,base:i,width:o,height:s}=t.getProps(["x","y","base","width","height"],e),u,h,y,w,T;return t.horizontal?(T=s/2,u=Math.min(r,i),h=Math.max(r,i),y=n-T,w=n+T):(T=o/2,u=r-T,h=r+T,y=Math.min(n,i),w=Math.max(n,i)),{left:u,top:y,right:h,bottom:w}}function Yv(t,e,r,n){return t?0:Al(e,r,n)}function Upt(t,e,r){let n=t.options.borderWidth,i=t.borderSkipped,o=z4(n);return{t:Yv(i.top,o.top,0,r),r:Yv(i.right,o.right,0,e),b:Yv(i.bottom,o.bottom,0,r),l:Yv(i.left,o.left,0,e)}}function Vpt(t,e,r){let{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=Kv(i),s=Math.min(e,r),u=t.borderSkipped,h=n||qi(i);return{topLeft:Yv(!h||u.top||u.left,o.topLeft,0,s),topRight:Yv(!h||u.top||u.right,o.topRight,0,s),bottomLeft:Yv(!h||u.bottom||u.left,o.bottomLeft,0,s),bottomRight:Yv(!h||u.bottom||u.right,o.bottomRight,0,s)}}function Hpt(t){let e=Bme(t),r=e.right-e.left,n=e.bottom-e.top,i=Upt(t,r/2,n/2),o=Vpt(t,r/2,n/2);return{outer:{x:e.left,y:e.top,w:r,h:n,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:r-i.l-i.r,h:n-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function ij(t,e,r,n){let i=e===null,o=r===null,u=t&&!(i&&o)&&Bme(t,n);return u&&(i||Jp(e,u.left,u.right))&&(o||Jp(r,u.top,u.bottom))}function Wpt(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function $pt(t,e){t.rect(e.x,e.y,e.w,e.h)}function oj(t,e,r={}){let n=t.x!==r.x?-e:0,i=t.y!==r.y?-e:0,o=(t.x+t.w!==r.x+r.w?e:0)-n,s=(t.y+t.h!==r.y+r.h?e:0)-i;return{x:t.x+n,y:t.y+i,w:t.w+o,h:t.h+s,radius:t.radius}}var Aj=class extends Nd{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:r,options:{borderColor:n,backgroundColor:i}}=this,{inner:o,outer:s}=Hpt(this),u=Wpt(s.radius)?Ix:$pt;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),u(e,oj(s,r,o)),e.clip(),u(e,oj(o,-r,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),u(e,oj(o,r)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,r,n){return ij(this,e,r,n)}inXRange(e,r){return ij(this,e,null,r)}inYRange(e,r){return ij(this,null,e,r)}getCenterPoint(e){let{x:r,y:n,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(r+i)/2:r,y:o?n:(n+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},Gpt=Object.freeze({__proto__:null,ArcElement:Sj,BarElement:Aj,LineElement:Mx,PointElement:Tj}),kj=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],nme=kj.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function zme(t){return kj[t%kj.length]}function jme(t){return nme[t%nme.length]}function Kpt(t,e){return t.borderColor=zme(e),t.backgroundColor=jme(e),++e}function Zpt(t,e){return t.backgroundColor=t.data.map(()=>zme(e++)),e}function Ypt(t,e){return t.backgroundColor=t.data.map(()=>jme(e++)),e}function Xpt(t){let e=0;return(r,n)=>{let i=t.getDatasetMeta(n).controller;i instanceof NE?e=Zpt(r,e):i instanceof DD?e=Ypt(r,e):i&&(e=Kpt(r,e))}}function ime(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Jpt(t){return t&&(t.borderColor||t.backgroundColor)}function Qpt(){return za.borderColor!=="rgba(0,0,0,0.1)"||za.backgroundColor!=="rgba(0,0,0,0.1)"}var emt={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,r){if(!r.enabled)return;let{data:{datasets:n},options:i}=t.config,{elements:o}=i,s=ime(n)||Jpt(i)||o&&ime(o)||Qpt();if(!r.forceOverride&&s)return;let u=Xpt(t);n.forEach(u)}};function tmt(t,e,r,n,i){let o=i.samples||n;if(o>=r)return t.slice(e,e+r);let s=[],u=(r-2)/(o-2),h=0,y=e+r-1,w=e,T,I,P,L,R;for(s[h++]=t[w],T=0;T<o-2;T++){let W=0,G=0,q,V=Math.floor((T+1)*u)+1+e,p=Math.min(Math.floor((T+2)*u)+1,r)+e,K=p-V;for(q=V;q<p;q++)W+=t[q].x,G+=t[q].y;W/=K,G/=K;let j=Math.floor(T*u)+1+e,Q=Math.min(Math.floor((T+1)*u)+1,r)+e,{x:ee,y:se}=t[w];for(P=L=-1,q=j;q<Q;q++)L=.5*Math.abs((ee-W)*(t[q].y-se)-(ee-t[q].x)*(G-se)),L>P&&(P=L,I=t[q],R=q);s[h++]=I,w=R}return s[h++]=t[y],s}function rmt(t,e,r,n){let i=0,o=0,s,u,h,y,w,T,I,P,L,R,W=[],G=e+r-1,q=t[e].x,p=t[G].x-q;for(s=e;s<e+r;++s){u=t[s],h=(u.x-q)/p*n,y=u.y;let K=h|0;if(K===w)y<L?(L=y,T=s):y>R&&(R=y,I=s),i=(o*i+u.x)/++o;else{let j=s-1;if(!Ii(T)&&!Ii(I)){let Q=Math.min(T,I),ee=Math.max(T,I);Q!==P&&Q!==j&&W.push({...t[Q],x:i}),ee!==P&&ee!==j&&W.push({...t[ee],x:i})}s>0&&j!==P&&W.push(t[j]),W.push(u),w=K,o=0,L=R=y,T=I=P=s}}return W}function Ume(t){if(t._decimated){let e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function ome(t){t.data.datasets.forEach(e=>{Ume(e)})}function nmt(t,e){let r=e.length,n=0,i,{iScale:o}=t,{min:s,max:u,minDefined:h,maxDefined:y}=o.getUserBounds();return h&&(n=Al(Zp(e,o.axis,s).lo,0,r-1)),y?i=Al(Zp(e,o.axis,u).hi+1,n,r)-n:i=r-n,{start:n,count:i}}var imt={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,r)=>{if(!r.enabled){ome(t);return}let n=t.width;t.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:u}=i,h=t.getDatasetMeta(o),y=s||i.data;if(Dx([u,t.options.indexAxis])==="y"||!h.controller.supportsDecimation)return;let w=t.scales[h.xAxisID];if(w.type!=="linear"&&w.type!=="time"||t.options.parsing)return;let{start:T,count:I}=nmt(h,y),P=r.threshold||4*n;if(I<=P){Ume(i);return}Ii(s)&&(i._data=y,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(R){this._data=R}}));let L;switch(r.algorithm){case"lttb":L=tmt(y,T,I,n,r);break;case"min-max":L=rmt(y,T,I,n);break;default:throw new Error(`Unsupported decimation algorithm '${r.algorithm}'`)}i._decimated=L})},destroy(t){ome(t)}};function omt(t,e,r){let n=t.segments,i=t.points,o=e.points,s=[];for(let u of n){let{start:h,end:y}=u;y=Rj(h,y,i);let w=Cj(r,i[h],i[y],u.loop);if(!e.segments){s.push({source:u,target:w,start:i[h],end:i[y]});continue}let T=Y4(e,w);for(let I of T){let P=Cj(r,o[I.start],o[I.end],I.loop),L=Z4(u,i,P);for(let R of L)s.push({source:R,target:I,start:{[r]:ame(w,P,"start",Math.max)},end:{[r]:ame(w,P,"end",Math.min)}})}}return s}function Cj(t,e,r,n){if(n)return;let i=e[t],o=r[t];return t==="angle"&&(i=Wc(i),o=Wc(o)),{property:t,start:i,end:o}}function amt(t,e){let{x:r=null,y:n=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:u})=>{u=Rj(s,u,i);let h=i[s],y=i[u];n!==null?(o.push({x:h.x,y:n}),o.push({x:y.x,y:n})):r!==null&&(o.push({x:r,y:h.y}),o.push({x:r,y:y.y}))}),o}function Rj(t,e,r){for(;e>t;e--){let n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function ame(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function Vme(t,e){let r=[],n=!1;return ka(t)?(n=!0,r=t):r=amt(t,e),r.length?new Mx({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function sme(t){return t&&t.fill!==!1}function smt(t,e,r){let i=t[e].fill,o=[e],s;if(!r)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!gs(i))return i;if(s=t[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function lmt(t,e,r){let n=hmt(t);if(qi(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return gs(i)&&Math.floor(i)===i?umt(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function umt(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function cmt(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:qi(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function fmt(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:qi(t)?n=t.value:n=e.getBaseValue(),n}function hmt(t){let e=t.options,r=e.fill,n=si(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function dmt(t){let{scale:e,index:r,line:n}=t,i=[],o=n.segments,s=n.points,u=pmt(e,r);u.push(Vme({x:null,y:e.bottom},n));for(let h=0;h<o.length;h++){let y=o[h];for(let w=y.start;w<=y.end;w++)mmt(i,s[w],u)}return new Mx({points:i,options:{}})}function pmt(t,e){let r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){let o=n[i];if(o.index===e)break;o.hidden||r.unshift(o.dataset)}return r}function mmt(t,e,r){let n=[];for(let i=0;i<r.length;i++){let o=r[i],{first:s,last:u,point:h}=gmt(o,e,"x");if(!(!h||s&&u)){if(s)n.unshift(h);else if(t.push(h),!u)break}}t.push(...n)}function gmt(t,e,r){let n=t.interpolate(e,r);if(!n)return{};let i=n[r],o=t.segments,s=t.points,u=!1,h=!1;for(let y=0;y<o.length;y++){let w=o[y],T=s[w.start][r],I=s[w.end][r];if(Jp(i,T,I)){u=i===T,h=i===I;break}}return{first:u,last:h,point:n}}var LD=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){let{x:i,y:o,radius:s}=this;return r=r||{start:0,end:Ia},e.arc(i,o,s,r.end,r.start,!0),!n.bounds}interpolate(e){let{x:r,y:n,radius:i}=this,o=e.angle;return{x:r+Math.cos(o)*i,y:n+Math.sin(o)*i,angle:o}}};function vmt(t){let{chart:e,fill:r,line:n}=t;if(gs(r))return ymt(e,r);if(r==="stack")return dmt(t);if(r==="shape")return!0;let i=bmt(t);return i instanceof LD?i:Vme(i,n)}function ymt(t,e){let r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function bmt(t){return(t.scale||{}).getPointPositionForValue?xmt(t):_mt(t)}function _mt(t){let{scale:e={},fill:r}=t,n=cmt(r,e);if(gs(n)){let i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function xmt(t){let{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,o=n.reverse?e.max:e.min,s=fmt(r,e,o),u=[];if(n.grid.circular){let h=e.getPointPositionForValue(0,o);return new LD({x:h.x,y:h.y,radius:e.getDistanceFromCenterForValue(s)})}for(let h=0;h<i;++h)u.push(e.getPointPositionForValue(h,s));return u}function aj(t,e,r){let n=vmt(e),{line:i,scale:o,axis:s}=e,u=i.options,h=u.fill,y=u.backgroundColor,{above:w=y,below:T=y}=h||{};n&&i.points.length&&(IE(t,r),wmt(t,{line:i,target:n,above:w,below:T,area:r,scale:o,axis:s}),DE(t))}function wmt(t,e){let{line:r,target:n,above:i,below:o,area:s,scale:u}=e,h=r._loop?"angle":e.axis;t.save(),h==="x"&&o!==i&&(lme(t,n,s.top),ume(t,{line:r,target:n,color:i,scale:u,property:h}),t.restore(),t.save(),lme(t,n,s.bottom)),ume(t,{line:r,target:n,color:o,scale:u,property:h}),t.restore()}function lme(t,e,r){let{segments:n,points:i}=e,o=!0,s=!1;t.beginPath();for(let u of n){let{start:h,end:y}=u,w=i[h],T=i[Rj(h,y,i)];o?(t.moveTo(w.x,w.y),o=!1):(t.lineTo(w.x,r),t.lineTo(w.x,w.y)),s=!!e.pathSegment(t,u,{move:s}),s?t.closePath():t.lineTo(T.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function ume(t,e){let{line:r,target:n,property:i,color:o,scale:s}=e,u=omt(r,n,i);for(let{source:h,target:y,start:w,end:T}of u){let{style:{backgroundColor:I=o}={}}=h,P=n!==!0;t.save(),t.fillStyle=I,Smt(t,s,P&&Cj(i,w,T)),t.beginPath();let L=!!r.pathSegment(t,h),R;if(P){L?t.closePath():cme(t,n,T,i);let W=!!n.pathSegment(t,y,{move:L,reverse:!0});R=L&&W,R||cme(t,n,w,i)}t.closePath(),t.fill(R?"evenodd":"nonzero"),t.restore()}}function Smt(t,e,r){let{top:n,bottom:i}=e.chart.chartArea,{property:o,start:s,end:u}=r||{};o==="x"&&(t.beginPath(),t.rect(s,n,u-s,i-n),t.clip())}function cme(t,e,r,n){let i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var Emt={id:"filler",afterDatasetsUpdate(t,e,r){let n=(t.data.datasets||[]).length,i=[],o,s,u,h;for(s=0;s<n;++s)o=t.getDatasetMeta(s),u=o.dataset,h=null,u&&u.options&&u instanceof Mx&&(h={visible:t.isDatasetVisible(s),index:s,fill:lmt(u,s,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:u}),o.$filler=h,i.push(h);for(s=0;s<n;++s)h=i[s],!(!h||h.fill===!1)&&(h.fill=smt(i,s,r.propagate))},beforeDraw(t,e,r){let n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let s=i.length-1;s>=0;--s){let u=i[s].$filler;u&&(u.line.updateControlPoints(o,u.axis),n&&u.fill&&aj(t.ctx,u,o))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;let n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){let o=n[i].$filler;sme(o)&&aj(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,r){let n=e.meta.$filler;!sme(n)||r.drawTime!=="beforeDatasetDraw"||aj(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},fme=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},Tmt=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,RD=class extends Nd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},r=ca(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){let{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,i=nl(n.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:u,itemHeight:h}=fme(n,o),y,w;r.font=i.string,this.isHorizontal()?(y=this.maxWidth,w=this._fitRows(s,o,u,h)+10):(w=this.maxHeight,y=this._fitCols(s,i,u,h)+10),this.width=Math.min(y,e.maxWidth||this.maxWidth),this.height=Math.min(w,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){let{ctx:o,maxWidth:s,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],y=this.lineWidths=[0],w=i+u,T=e;o.textAlign="left",o.textBaseline="middle";let I=-1,P=-w;return this.legendItems.forEach((L,R)=>{let W=n+r/2+o.measureText(L.text).width;(R===0||y[y.length-1]+W+2*u>s)&&(T+=w,y[y.length-(R>0?0:1)]=0,P+=w,I++),h[R]={left:0,top:P,row:I,width:W,height:i},y[y.length-1]+=W+u}),T}_fitCols(e,r,n,i){let{ctx:o,maxHeight:s,options:{labels:{padding:u}}}=this,h=this.legendHitBoxes=[],y=this.columnSizes=[],w=s-e,T=u,I=0,P=0,L=0,R=0;return this.legendItems.forEach((W,G)=>{let{itemWidth:q,itemHeight:V}=Amt(n,r,o,W,i);G>0&&P+V+2*u>w&&(T+=I+u,y.push({width:I,height:P}),L+=I+u,R++,I=P=0),h[G]={left:L,top:P,col:R,width:q,height:V},I=Math.max(I,q),P+=V+u}),T+=I,y.push({width:I,height:P}),T}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:o}}=this,s=Bb(o,this.left,this.width);if(this.isHorizontal()){let u=0,h=hu(n,this.left+i,this.right-this.lineWidths[u]);for(let y of r)u!==y.row&&(u=y.row,h=hu(n,this.left+i,this.right-this.lineWidths[u])),y.top+=this.top+e+i,y.left=s.leftForLtr(s.x(h),y.width),h+=y.width+i}else{let u=0,h=hu(n,this.top+e+i,this.bottom-this.columnSizes[u].height);for(let y of r)y.col!==u&&(u=y.col,h=hu(n,this.top+e+i,this.bottom-this.columnSizes[u].height)),y.top=h,y.left+=this.left+i,y.left=s.leftForLtr(s.x(y.left),y.width),h+=y.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;IE(e,this),this._draw(),DE(e)}}_draw(){let{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:o,labels:s}=e,u=za.color,h=Bb(e.rtl,this.left,this.width),y=nl(s.font),{padding:w}=s,T=y.size,I=T/2,P;this.drawTitle(),i.textAlign=h.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=y.string;let{boxWidth:L,boxHeight:R,itemHeight:W}=fme(s,T),G=function(j,Q,ee){if(isNaN(L)||L<=0||isNaN(R)||R<0)return;i.save();let se=si(ee.lineWidth,1);if(i.fillStyle=si(ee.fillStyle,u),i.lineCap=si(ee.lineCap,"butt"),i.lineDashOffset=si(ee.lineDashOffset,0),i.lineJoin=si(ee.lineJoin,"miter"),i.lineWidth=se,i.strokeStyle=si(ee.strokeStyle,u),i.setLineDash(si(ee.lineDash,[])),s.usePointStyle){let me={radius:R*Math.SQRT2/2,pointStyle:ee.pointStyle,rotation:ee.rotation,borderWidth:se},ve=h.xPlus(j,L/2),U=Q+I;B4(i,me,ve,U,s.pointStyleWidth&&L)}else{let me=Q+Math.max((T-R)/2,0),ve=h.leftForLtr(j,L),U=Kv(ee.borderRadius);i.beginPath(),Object.values(U).some($=>$!==0)?Ix(i,{x:ve,y:me,w:L,h:R,radius:U}):i.rect(ve,me,L,R),i.fill(),se!==0&&i.stroke()}i.restore()},q=function(j,Q,ee){Gv(i,ee.text,j,Q+W/2,y,{strikethrough:ee.hidden,textAlign:h.textAlign(ee.textAlign)})},V=this.isHorizontal(),p=this._computeTitleHeight();V?P={x:hu(o,this.left+w,this.right-n[0]),y:this.top+w+p,line:0}:P={x:this.left+w,y:hu(o,this.top+p+w,this.bottom-r[0].height),line:0},G4(this.ctx,e.textDirection);let K=W+w;this.legendItems.forEach((j,Q)=>{i.strokeStyle=j.fontColor,i.fillStyle=j.fontColor;let ee=i.measureText(j.text).width,se=h.textAlign(j.textAlign||(j.textAlign=s.textAlign)),me=L+I+ee,ve=P.x,U=P.y;h.setWidth(this.width),V?Q>0&&ve+me+w>this.right&&(U=P.y+=K,P.line++,ve=P.x=hu(o,this.left+w,this.right-n[P.line])):Q>0&&U+K>this.bottom&&(ve=P.x=ve+r[P.line].width+w,P.line++,U=P.y=hu(o,this.top+p+w,this.bottom-r[P.line].height));let $=h.x(ve);if(G($,U,j),ve=fpe(se,ve+L+I,V?ve+me:this.right,e.rtl),q(h.x(ve),U,j),V)P.x+=me+w;else if(typeof j.text!="string"){let he=y.lineHeight;P.y+=Hme(j,he)+w}else P.y+=K}),K4(this.ctx,e.textDirection)}drawTitle(){let e=this.options,r=e.title,n=nl(r.font),i=du(r.padding);if(!r.display)return;let o=Bb(e.rtl,this.left,this.width),s=this.ctx,u=r.position,h=n.size/2,y=i.top+h,w,T=this.left,I=this.width;if(this.isHorizontal())I=Math.max(...this.lineWidths),w=this.top+y,T=hu(e.align,T,this.right-I);else{let L=this.columnSizes.reduce((R,W)=>Math.max(R,W.height),0);w=y+hu(e.align,this.top,this.bottom-L-e.labels.padding-this._computeTitleHeight())}let P=hu(u,T,T+I);s.textAlign=o.textAlign(hD(u)),s.textBaseline="middle",s.strokeStyle=r.color,s.fillStyle=r.color,s.font=n.string,Gv(s,r.text,P,w,n)}_computeTitleHeight(){let e=this.options.title,r=nl(e.font),n=du(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,o;if(Jp(e,this.left,this.right)&&Jp(r,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(i=o[n],Jp(e,i.left,i.left+i.width)&&Jp(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){let r=this.options;if(!Imt(e.type,r))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=Tmt(i,n);i&&!o&&ca(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!o&&ca(r.onHover,[e,n,this],this)}else n&&ca(r.onClick,[e,n,this],this)}};function Amt(t,e,r,n,i){let o=kmt(n,t,e,r),s=Cmt(i,n,e.lineHeight);return{itemWidth:o,itemHeight:s}}function kmt(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+r.size/2+n.measureText(i).width}function Cmt(t,e,r){let n=t;return typeof e.text!="string"&&(n=Hme(e,r)),n}function Hme(t,e){let r=t.text?t.text.length:0;return e*r}function Imt(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Dmt={id:"legend",_element:RD,start(t,e,r){let n=t.legend=new RD({ctx:t.ctx,options:r,chart:t});Fu.configure(t,n,r),Fu.addBox(t,n)},stop(t){Fu.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){let n=t.legend;Fu.configure(t,n,r),n.options=r},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){let n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:o,useBorderRadius:s,borderRadius:u}}=t.legend.options;return t._getSortedDatasetMetas().map(h=>{let y=h.controller.getStyle(r?0:void 0),w=du(y.borderWidth);return{text:e[h.index].label,fillStyle:y.backgroundColor,fontColor:o,hidden:!h.visible,lineCap:y.borderCapStyle,lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:(w.width+w.height)/4,strokeStyle:y.borderColor,pointStyle:n||y.pointStyle,rotation:y.rotation,textAlign:i||y.textAlign,borderRadius:s&&(u||y.borderRadius),datasetIndex:h.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},jE=class extends Nd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;let i=ka(n.text)?n.text.length:1;this._padding=du(n.padding);let o=i*nl(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:r,left:n,bottom:i,right:o,options:s}=this,u=s.align,h=0,y,w,T;return this.isHorizontal()?(w=hu(u,n,o),T=r+e,y=o-n):(s.position==="left"?(w=n+e,T=hu(u,i,r),h=Ca*-.5):(w=o-e,T=hu(u,r,i),h=Ca*.5),y=i-r),{titleX:w,titleY:T,maxWidth:y,rotation:h}}draw(){let e=this.ctx,r=this.options;if(!r.display)return;let n=nl(r.font),o=n.lineHeight/2+this._padding.top,{titleX:s,titleY:u,maxWidth:h,rotation:y}=this._drawArgs(o);Gv(e,r.text,0,0,n,{color:r.color,maxWidth:h,rotation:y,textAlign:hD(r.align),textBaseline:"middle",translation:[s,u]})}};function Omt(t,e){let r=new jE({ctx:t.ctx,options:e,chart:t});Fu.configure(t,r,e),Fu.addBox(t,r),t.titleBlock=r}var Pmt={id:"title",_element:jE,start(t,e,r){Omt(t,r)},stop(t){let e=t.titleBlock;Fu.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){let n=t.titleBlock;Fu.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},ED=new WeakMap,Mmt={id:"subtitle",start(t,e,r){let n=new jE({ctx:t.ctx,options:r,chart:t});Fu.configure(t,n,r),Fu.addBox(t,n),ED.set(t,n)},stop(t){Fu.removeBox(t,ED.get(t)),ED.delete(t)},beforeUpdate(t,e,r){let n=ED.get(t);Fu.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},qE={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,o=0;for(e=0,r=t.length;e<r;++e){let u=t[e].element;if(u&&u.hasValue()){let h=u.tooltipPosition();n.add(h.x),i+=h.y,++o}}return o===0||n.size===0?!1:{x:[...n].reduce((u,h)=>u+h)/n.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,o,s,u;for(o=0,s=t.length;o<s;++o){let h=t[o].element;if(h&&h.hasValue()){let y=h.getCenterPoint(),w=sD(e,y);w<i&&(i=w,u=h)}}if(u){let h=u.tooltipPosition();r=h.x,n=h.y}return{x:r,y:n}}};function Qp(t,e){return e&&(ka(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function hg(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Lmt(t,e){let{element:r,datasetIndex:n,index:i}=e,o=t.getDatasetMeta(n).controller,{label:s,value:u}=o.getLabelAndValue(i);return{chart:t,label:s,parsed:o.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:u,dataset:o.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function hme(t,e){let r=t.chart.ctx,{body:n,footer:i,title:o}=t,{boxWidth:s,boxHeight:u}=e,h=nl(e.bodyFont),y=nl(e.titleFont),w=nl(e.footerFont),T=o.length,I=i.length,P=n.length,L=du(e.padding),R=L.height,W=0,G=n.reduce((p,K)=>p+K.before.length+K.lines.length+K.after.length,0);if(G+=t.beforeBody.length+t.afterBody.length,T&&(R+=T*y.lineHeight+(T-1)*e.titleSpacing+e.titleMarginBottom),G){let p=e.displayColors?Math.max(u,h.lineHeight):h.lineHeight;R+=P*p+(G-P)*h.lineHeight+(G-1)*e.bodySpacing}I&&(R+=e.footerMarginTop+I*w.lineHeight+(I-1)*e.footerSpacing);let q=0,V=function(p){W=Math.max(W,r.measureText(p).width+q)};return r.save(),r.font=y.string,Ro(t.title,V),r.font=h.string,Ro(t.beforeBody.concat(t.afterBody),V),q=e.displayColors?s+2+e.boxPadding:0,Ro(n,p=>{Ro(p.before,V),Ro(p.lines,V),Ro(p.after,V)}),q=0,r.font=w.string,Ro(t.footer,V),r.restore(),W+=L.width,{width:W,height:R}}function Rmt(t,e){let{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function Fmt(t,e,r,n){let{x:i,width:o}=n,s=r.caretSize+r.caretPadding;if(t==="left"&&i+o+s>e.width||t==="right"&&i-o-s<0)return!0}function qmt(t,e,r,n){let{x:i,width:o}=r,{width:s,chartArea:{left:u,right:h}}=t,y="center";return n==="center"?y=i<=(u+h)/2?"left":"right":i<=o/2?y="left":i>=s-o/2&&(y="right"),Fmt(y,t,e,r)&&(y="center"),y}function dme(t,e,r){let n=r.yAlign||e.yAlign||Rmt(t,r);return{xAlign:r.xAlign||e.xAlign||qmt(t,e,r,n),yAlign:n}}function Nmt(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function Bmt(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function pme(t,e,r,n){let{caretSize:i,caretPadding:o,cornerRadius:s}=t,{xAlign:u,yAlign:h}=r,y=i+o,{topLeft:w,topRight:T,bottomLeft:I,bottomRight:P}=Kv(s),L=Nmt(e,u),R=Bmt(e,h,y);return h==="center"?u==="left"?L+=y:u==="right"&&(L-=y):u==="left"?L-=Math.max(w,I)+i:u==="right"&&(L+=Math.max(T,P)+i),{x:Al(L,0,n.width-e.width),y:Al(R,0,n.height-e.height)}}function TD(t,e,r){let n=du(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function mme(t){return Qp([],hg(t))}function zmt(t,e,r){return cg(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function gme(t,e){let r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}var Wme={beforeTitle:Xp,title(t){if(t.length>0){let e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Xp,beforeBody:Xp,beforeLabel:Xp,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let r=t.formattedValue;return Ii(r)||(e+=r),e},labelColor(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Xp,afterBody:Xp,beforeFooter:Xp,footer:Xp,afterFooter:Xp};function Gc(t,e,r,n){let i=t[e].call(r,n);return typeof i>"u"?Wme[e].call(r,n):i}var FD=class extends Nd{static positioners=qE;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,o=new ID(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=zmt(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){let{callbacks:n}=r,i=Gc(n,"beforeTitle",this,e),o=Gc(n,"title",this,e),s=Gc(n,"afterTitle",this,e),u=[];return u=Qp(u,hg(i)),u=Qp(u,hg(o)),u=Qp(u,hg(s)),u}getBeforeBody(e,r){return mme(Gc(r.callbacks,"beforeBody",this,e))}getBody(e,r){let{callbacks:n}=r,i=[];return Ro(e,o=>{let s={before:[],lines:[],after:[]},u=gme(n,o);Qp(s.before,hg(Gc(u,"beforeLabel",this,o))),Qp(s.lines,Gc(u,"label",this,o)),Qp(s.after,hg(Gc(u,"afterLabel",this,o))),i.push(s)}),i}getAfterBody(e,r){return mme(Gc(r.callbacks,"afterBody",this,e))}getFooter(e,r){let{callbacks:n}=r,i=Gc(n,"beforeFooter",this,e),o=Gc(n,"footer",this,e),s=Gc(n,"afterFooter",this,e),u=[];return u=Qp(u,hg(i)),u=Qp(u,hg(o)),u=Qp(u,hg(s)),u}_createItems(e){let r=this._active,n=this.chart.data,i=[],o=[],s=[],u=[],h,y;for(h=0,y=r.length;h<y;++h)u.push(Lmt(this.chart,r[h]));return e.filter&&(u=u.filter((w,T,I)=>e.filter(w,T,I,n))),e.itemSort&&(u=u.sort((w,T)=>e.itemSort(w,T,n))),Ro(u,w=>{let T=gme(e.callbacks,w);i.push(Gc(T,"labelColor",this,w)),o.push(Gc(T,"labelPointStyle",this,w)),s.push(Gc(T,"labelTextColor",this,w))}),this.labelColors=i,this.labelPointStyles=o,this.labelTextColors=s,this.dataPoints=u,u}update(e,r){let n=this.options.setContext(this.getContext()),i=this._active,o,s=[];if(!i.length)this.opacity!==0&&(o={opacity:0});else{let u=qE[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);let h=this._size=hme(this,n),y=Object.assign({},u,h),w=dme(this.chart,n,y),T=pme(n,y,w,this.chart);this.xAlign=w.xAlign,this.yAlign=w.yAlign,o={opacity:1,x:T.x,y:T.y,width:h.width,height:h.height,caretX:u.x,caretY:u.y}}this._tooltipItems=s,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){let o=this.getCaretPosition(e,n,i);r.lineTo(o.x1,o.y1),r.lineTo(o.x2,o.y2),r.lineTo(o.x3,o.y3)}getCaretPosition(e,r,n){let{xAlign:i,yAlign:o}=this,{caretSize:s,cornerRadius:u}=n,{topLeft:h,topRight:y,bottomLeft:w,bottomRight:T}=Kv(u),{x:I,y:P}=e,{width:L,height:R}=r,W,G,q,V,p,K;return o==="center"?(p=P+R/2,i==="left"?(W=I,G=W-s,V=p+s,K=p-s):(W=I+L,G=W+s,V=p-s,K=p+s),q=W):(i==="left"?G=I+Math.max(h,w)+s:i==="right"?G=I+L-Math.max(y,T)-s:G=this.caretX,o==="top"?(V=P,p=V-s,W=G-s,q=G+s):(V=P+R,p=V+s,W=G+s,q=G-s),K=V),{x1:W,x2:G,x3:q,y1:V,y2:p,y3:K}}drawTitle(e,r,n){let i=this.title,o=i.length,s,u,h;if(o){let y=Bb(n.rtl,this.x,this.width);for(e.x=TD(this,n.titleAlign,n),r.textAlign=y.textAlign(n.titleAlign),r.textBaseline="middle",s=nl(n.titleFont),u=n.titleSpacing,r.fillStyle=n.titleColor,r.font=s.string,h=0;h<o;++h)r.fillText(i[h],y.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+u,h+1===o&&(e.y+=n.titleMarginBottom-u)}}_drawColorBox(e,r,n,i,o){let s=this.labelColors[n],u=this.labelPointStyles[n],{boxHeight:h,boxWidth:y}=o,w=nl(o.bodyFont),T=TD(this,"left",o),I=i.x(T),P=h<w.lineHeight?(w.lineHeight-h)/2:0,L=r.y+P;if(o.usePointStyle){let R={radius:Math.min(y,h)/2,pointStyle:u.pointStyle,rotation:u.rotation,borderWidth:1},W=i.leftForLtr(I,y)+y/2,G=L+h/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,pD(e,R,W,G),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,pD(e,R,W,G)}else{e.lineWidth=qi(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;let R=i.leftForLtr(I,y),W=i.leftForLtr(i.xPlus(I,1),y-2),G=Kv(s.borderRadius);Object.values(G).some(q=>q!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Ix(e,{x:R,y:L,w:y,h,radius:G}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),Ix(e,{x:W,y:L+1,w:y-2,h:h-2,radius:G}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(R,L,y,h),e.strokeRect(R,L,y,h),e.fillStyle=s.backgroundColor,e.fillRect(W,L+1,y-2,h-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){let{body:i}=this,{bodySpacing:o,bodyAlign:s,displayColors:u,boxHeight:h,boxWidth:y,boxPadding:w}=n,T=nl(n.bodyFont),I=T.lineHeight,P=0,L=Bb(n.rtl,this.x,this.width),R=function(ee){r.fillText(ee,L.x(e.x+P),e.y+I/2),e.y+=I+o},W=L.textAlign(s),G,q,V,p,K,j,Q;for(r.textAlign=s,r.textBaseline="middle",r.font=T.string,e.x=TD(this,W,n),r.fillStyle=n.bodyColor,Ro(this.beforeBody,R),P=u&&W!=="right"?s==="center"?y/2+w:y+2+w:0,p=0,j=i.length;p<j;++p){for(G=i[p],q=this.labelTextColors[p],r.fillStyle=q,Ro(G.before,R),V=G.lines,u&&V.length&&(this._drawColorBox(r,e,p,L,n),I=Math.max(T.lineHeight,h)),K=0,Q=V.length;K<Q;++K)R(V[K]),I=T.lineHeight;Ro(G.after,R)}P=0,I=T.lineHeight,Ro(this.afterBody,R),e.y-=o}drawFooter(e,r,n){let i=this.footer,o=i.length,s,u;if(o){let h=Bb(n.rtl,this.x,this.width);for(e.x=TD(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=h.textAlign(n.footerAlign),r.textBaseline="middle",s=nl(n.footerFont),r.fillStyle=n.footerColor,r.font=s.string,u=0;u<o;++u)r.fillText(i[u],h.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){let{xAlign:o,yAlign:s}=this,{x:u,y:h}=e,{width:y,height:w}=n,{topLeft:T,topRight:I,bottomLeft:P,bottomRight:L}=Kv(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(u+T,h),s==="top"&&this.drawCaret(e,r,n,i),r.lineTo(u+y-I,h),r.quadraticCurveTo(u+y,h,u+y,h+I),s==="center"&&o==="right"&&this.drawCaret(e,r,n,i),r.lineTo(u+y,h+w-L),r.quadraticCurveTo(u+y,h+w,u+y-L,h+w),s==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(u+P,h+w),r.quadraticCurveTo(u,h+w,u,h+w-P),s==="center"&&o==="left"&&this.drawCaret(e,r,n,i),r.lineTo(u,h+T),r.quadraticCurveTo(u,h,u+T,h),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){let r=this.chart,n=this.$animations,i=n&&n.x,o=n&&n.y;if(i||o){let s=qE[e.position].call(this,this._active,this._eventPosition);if(!s)return;let u=this._size=hme(this,e),h=Object.assign({},s,this._size),y=dme(r,e,h),w=pme(e,h,y,r);(i._to!==w.x||o._to!==w.y)&&(this.xAlign=y.xAlign,this.yAlign=y.yAlign,this.width=u.width,this.height=u.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,w))}}_willRender(){return!!this.opacity}draw(e){let r=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(r);let i={width:this.width,height:this.height},o={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let s=du(r.padding),u=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&u&&(e.save(),e.globalAlpha=n,this.drawBackground(o,e,i,r),G4(e,r.textDirection),o.y+=s.top,this.drawTitle(o,e,r),this.drawBody(o,e,r),this.drawFooter(o,e,r),K4(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){let n=this._active,i=e.map(({datasetIndex:u,index:h})=>{let y=this.chart.getDatasetMeta(u);if(!y)throw new Error("Cannot find a dataset at index "+u);return{datasetIndex:u,element:y.data[h],index:h}}),o=!kE(n,i),s=this._positionChanged(i,r);(o||s)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let i=this.options,o=this._active||[],s=this._getActiveElements(e,o,r,n),u=this._positionChanged(s,e),h=r||!kE(s,o)||u;return h&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),h}_getActiveElements(e,r,n,i){let o=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(u=>this.chart.data.datasets[u.datasetIndex]&&this.chart.getDatasetMeta(u.datasetIndex).controller.getParsed(u.index)!==void 0);let s=this.chart.getElementsAtEventForMode(e,o.mode,o,n);return o.reverse&&s.reverse(),s}_positionChanged(e,r){let{caretX:n,caretY:i,options:o}=this,s=qE[o.position].call(this,e,r);return s!==!1&&(n!==s.x||i!==s.y)}},jmt={id:"tooltip",_element:FD,positioners:qE,afterInit(t,e,r){r&&(t.tooltip=new FD({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){let r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Wme},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Umt=Object.freeze({__proto__:null,Colors:emt,Decimation:imt,Filler:Emt,Legend:Dmt,SubTitle:Mmt,Title:Pmt,Tooltip:jmt}),Vmt=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function Hmt(t,e,r,n){let i=t.indexOf(e);if(i===-1)return Vmt(t,e,r,n);let o=t.lastIndexOf(e);return i!==o?r:i}var Wmt=(t,e)=>t===null?null:Al(Math.round(t),0,e);function vme(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var Ij=class extends Ub{static id="category";static defaults={ticks:{callback:vme}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let r=this._addedLabels;if(r.length){let n=this.getLabels();for(let{index:i,label:o}of r)n[i]===o&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ii(e))return null;let n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:Hmt(n,e,si(r,e),this._addedLabels),Wmt(r,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){let e=this.min,r=this.max,n=this.options.offset,i=[],o=this.getLabels();o=e===0&&r===o.length-1?o:o.slice(e,r+1),this._valueRange=Math.max(o.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=r;s++)i.push({value:s});return i}getLabelForValue(e){return vme.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};function $mt(t,e){let r=[],{bounds:i,step:o,min:s,max:u,precision:h,count:y,maxTicks:w,maxDigits:T,includeBounds:I}=t,P=o||1,L=w-1,{min:R,max:W}=e,G=!Ii(s),q=!Ii(u),V=!Ii(y),p=(W-R)/(T+1),K=A4((W-R)/L/P)*P,j,Q,ee,se;if(K<1e-14&&!G&&!q)return[{value:R},{value:W}];se=Math.ceil(W/K)-Math.floor(R/K),se>L&&(K=A4(se*K/L/P)*P),Ii(h)||(j=Math.pow(10,h),K=Math.ceil(K*j)/j),i==="ticks"?(Q=Math.floor(R/K)*K,ee=Math.ceil(W/K)*K):(Q=R,ee=W),G&&q&&o&&ipe((u-s)/o,K/1e3)?(se=Math.round(Math.min((u-s)/K,w)),K=(u-s)/se,Q=s,ee=u):V?(Q=G?s:Q,ee=q?u:ee,se=y-1,K=(ee-Q)/se):(se=(ee-Q)/K,Ax(se,Math.round(se),K/1e3)?se=Math.round(se):se=Math.ceil(se));let me=Math.max(C4(K),C4(Q));j=Math.pow(10,Ii(h)?me:h),Q=Math.round(Q*j)/j,ee=Math.round(ee*j)/j;let ve=0;for(G&&(I&&Q!==s?(r.push({value:s}),Q<s&&ve++,Ax(Math.round((Q+ve*K)*j)/j,s,yme(s,p,t))&&ve++):Q<s&&ve++);ve<se;++ve){let U=Math.round((Q+ve*K)*j)/j;if(q&&U>u)break;r.push({value:U})}return q&&I&&ee!==u?r.length&&Ax(r[r.length-1].value,u,yme(u,p,t))?r[r.length-1].value=u:r.push({value:u}):(!q||ee===u)&&r.push({value:ee}),r}function yme(t,e,{horizontal:r,minRotation:n}){let i=$h(n),o=(r?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}var Lx=class extends Ub{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ii(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds(),{min:i,max:o}=this,s=h=>i=r?i:h,u=h=>o=n?o:h;if(e){let h=qd(i),y=qd(o);h<0&&y<0?u(0):h>0&&y>0&&s(0)}if(i===o){let h=o===0?1:Math.abs(o*.05);u(o+h),e||s(i-h)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,r=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},o=this._range||this,s=$mt(i,o);return e.bounds==="ticks"&&k4(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return Cx(e,this.chart.options.locale,this.options.ticks.format)}},Dj=class extends Lx{static id="linear";static defaults={ticks:{callback:CE.formatters.numeric}};determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=gs(e)?e:0,this.max=gs(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),r=e?this.width:this.height,n=$h(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},UE=t=>Math.floor(lg(t)),jb=(t,e)=>Math.pow(10,UE(t)+e);function bme(t){return t/Math.pow(10,UE(t))===1}function _me(t,e,r){let n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function Gmt(t,e){let r=e-t,n=UE(r);for(;_me(t,e,n)>10;)n++;for(;_me(t,e,n)<10;)n--;return Math.min(n,UE(t))}function Kmt(t,{min:e,max:r}){e=$c(t.min,e);let n=[],i=UE(e),o=Gmt(e,r),s=o<0?Math.pow(10,Math.abs(o)):1,u=Math.pow(10,o),h=i>o?Math.pow(10,i):0,y=Math.round((e-h)*s)/s,w=Math.floor((e-h)/u/10)*u*10,T=Math.floor((y-w)/Math.pow(10,o)),I=$c(t.min,Math.round((h+w+T*Math.pow(10,o))*s)/s);for(;I<r;)n.push({value:I,major:bme(I),significand:T}),T>=10?T=T<15?15:20:T++,T>=20&&(o++,T=2,s=o>=0?1:s),I=Math.round((h+w+T*Math.pow(10,o))*s)/s;let P=$c(t.max,I);return n.push({value:P,major:bme(P),significand:T}),n}var Oj=class extends Ub{static id="logarithmic";static defaults={ticks:{callback:CE.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){let n=Lx.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return gs(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=gs(e)?Math.max(0,e):null,this.max=gs(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!gs(this._userMin)&&(this.min=e===jb(this.min,0)?jb(this.min,-1):jb(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),n=this.min,i=this.max,o=u=>n=e?n:u,s=u=>i=r?i:u;n===i&&(n<=0?(o(1),s(10)):(o(jb(n,-1)),s(jb(i,1)))),n<=0&&o(jb(i,-1)),i<=0&&s(jb(n,1)),this.min=n,this.max=i}buildTicks(){let e=this.options,r={min:this._userMin,max:this._userMax},n=Kmt(r,this);return e.bounds==="ticks"&&k4(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Cx(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=lg(e),this._valueRange=lg(this.max)-lg(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(lg(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}};function Pj(t){let e=t.ticks;if(e.display&&t.display){let r=du(e.backdropPadding);return si(e.font&&e.font.size,za.font.size)+r.height}return 0}function Zmt(t,e,r){return r=ka(r)?r:[r],{w:dpe(t,e.string,r),h:r.length*e.lineHeight}}function xme(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function Ymt(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],o=t._pointLabels.length,s=t.options.pointLabels,u=s.centerPointLabels?Ca/o:0;for(let h=0;h<o;h++){let y=s.setContext(t.getPointLabelContext(h));i[h]=y.padding;let w=t.getPointPosition(h,t.drawingArea+i[h],u),T=nl(y.font),I=Zmt(t.ctx,T,t._pointLabels[h]);n[h]=I;let P=Wc(t.getIndexAngle(h)+u),L=Math.round(cD(P)),R=xme(L,w.x,I.w,0,180),W=xme(L,w.y,I.h,90,270);Xmt(r,e,P,R,W)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=egt(t,n,i)}function Xmt(t,e,r,n,i){let o=Math.abs(Math.sin(r)),s=Math.abs(Math.cos(r)),u=0,h=0;n.start<e.l?(u=(e.l-n.start)/o,t.l=Math.min(t.l,e.l-u)):n.end>e.r&&(u=(n.end-e.r)/o,t.r=Math.max(t.r,e.r+u)),i.start<e.t?(h=(e.t-i.start)/s,t.t=Math.min(t.t,e.t-h)):i.end>e.b&&(h=(i.end-e.b)/s,t.b=Math.max(t.b,e.b+h))}function Jmt(t,e,r){let n=t.drawingArea,{extra:i,additionalAngle:o,padding:s,size:u}=r,h=t.getPointPosition(e,n+i+s,o),y=Math.round(cD(Wc(h.angle+Os))),w=ngt(h.y,u.h,y),T=tgt(y),I=rgt(h.x,u.w,T);return{visible:!0,x:h.x,y:w,textAlign:T,left:I,top:w,right:I+u.w,bottom:w+u.h}}function Qmt(t,e){if(!e)return!0;let{left:r,top:n,right:i,bottom:o}=t;return!(Yp({x:r,y:n},e)||Yp({x:r,y:o},e)||Yp({x:i,y:n},e)||Yp({x:i,y:o},e))}function egt(t,e,r){let n=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:u}=o.pointLabels,h={extra:Pj(o)/2,additionalAngle:s?Ca/i:0},y;for(let w=0;w<i;w++){h.padding=r[w],h.size=e[w];let T=Jmt(t,w,h);n.push(T),u==="auto"&&(T.visible=Qmt(T,y),T.visible&&(y=T))}return n}function tgt(t){return t===0||t===180?"center":t<180?"left":"right"}function rgt(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function ngt(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function igt(t,e,r){let{left:n,top:i,right:o,bottom:s}=r,{backdropColor:u}=e;if(!Ii(u)){let h=Kv(e.borderRadius),y=du(e.backdropPadding);t.fillStyle=u;let w=n-y.left,T=i-y.top,I=o-n+y.width,P=s-i+y.height;Object.values(h).some(L=>L!==0)?(t.beginPath(),Ix(t,{x:w,y:T,w:I,h:P,radius:h}),t.fill()):t.fillRect(w,T,I,P)}}function ogt(t,e){let{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){let o=t._pointLabelItems[i];if(!o.visible)continue;let s=n.setContext(t.getPointLabelContext(i));igt(r,s,o);let u=nl(s.font),{x:h,y,textAlign:w}=o;Gv(r,t._pointLabels[i],h,y+u.lineHeight/2,u,{color:s.color,textAlign:w,textBaseline:"middle"})}}function $me(t,e,r,n){let{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,Ia);else{let o=t.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<n;s++)o=t.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function agt(t,e,r,n,i){let o=t.ctx,s=e.circular,{color:u,lineWidth:h}=e;!s&&!n||!u||!h||r<0||(o.save(),o.strokeStyle=u,o.lineWidth=h,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),$me(t,r,s,n),o.closePath(),o.stroke(),o.restore())}function sgt(t,e,r){return cg(t,{label:r,index:e,type:"pointLabel"})}var Mj=class extends Lx{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:CE.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=du(Pj(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!1);this.min=gs(e)&&!isNaN(e)?e:0,this.max=gs(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Pj(this.options))}generateTickLabels(e){Lx.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{let i=ca(this.options.pointLabels.callback,[r,n],this);return i||i===0?i:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?Ymt(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,i){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,i))}getIndexAngle(e){let r=Ia/(this._pointLabels.length||1),n=this.options.startAngle||0;return Wc(e*r+$h(n))}getDistanceFromCenterForValue(e){if(Ii(e))return NaN;let r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Ii(e))return NaN;let r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){let r=this._pointLabels||[];if(e>=0&&e<r.length){let n=r[e];return sgt(this.getContext(),e,n)}}getPointPosition(e,r,n=0){let i=this.getIndexAngle(e)-Os+n;return{x:Math.cos(i)*r+this.xCenter,y:Math.sin(i)*r+this.yCenter,angle:i}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:r,top:n,right:i,bottom:o}=this._pointLabelItems[e];return{left:r,top:n,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:r}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),$me(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,r=this.options,{angleLines:n,grid:i,border:o}=r,s=this._pointLabels.length,u,h,y;if(r.pointLabels.display&&ogt(this,s),i.display&&this.ticks.forEach((w,T)=>{if(T!==0||T===0&&this.min<0){h=this.getDistanceFromCenterForValue(w.value);let I=this.getContext(T),P=i.setContext(I),L=o.setContext(I);agt(this,P,h,s,L)}}),n.display){for(e.save(),u=s-1;u>=0;u--){let w=n.setContext(this.getPointLabelContext(u)),{color:T,lineWidth:I}=w;!I||!T||(e.lineWidth=I,e.strokeStyle=T,e.setLineDash(w.borderDash),e.lineDashOffset=w.borderDashOffset,h=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),y=this.getPointPosition(u,h),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(y.x,y.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;let i=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((u,h)=>{if(h===0&&this.min>=0&&!r.reverse)return;let y=n.setContext(this.getContext(h)),w=nl(y.font);if(o=this.getDistanceFromCenterForValue(this.ticks[h].value),y.showLabelBackdrop){e.font=w.string,s=e.measureText(u.label).width,e.fillStyle=y.backdropColor;let T=du(y.backdropPadding);e.fillRect(-s/2-T.left,-o-w.size/2-T.top,s+T.width,w.size+T.height)}Gv(e,u.label,0,-o,w,{color:y.color,strokeColor:y.textStrokeColor,strokeWidth:y.textStrokeWidth})}),e.restore()}drawTitle(){}},qD={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Kc=Object.keys(qD);function wme(t,e){return t-e}function Sme(t,e){if(Ii(e))return null;let r=t._adapter,{parser:n,round:i,isoWeekday:o}=t._parseOpts,s=e;return typeof n=="function"&&(s=n(s)),gs(s)||(s=typeof n=="string"?r.parse(s,n):r.parse(s)),s===null?null:(i&&(s=i==="week"&&(Nb(o)||o===!0)?r.startOf(s,"isoWeek",o):r.startOf(s,i)),+s)}function Eme(t,e,r,n){let i=Kc.length;for(let o=Kc.indexOf(t);o<i-1;++o){let s=qD[Kc[o]],u=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((r-e)/(u*s.size))<=n)return Kc[o]}return Kc[i-1]}function lgt(t,e,r,n,i){for(let o=Kc.length-1;o>=Kc.indexOf(r);o--){let s=Kc[o];if(qD[s].common&&t._adapter.diff(i,n,s)>=e-1)return s}return Kc[r?Kc.indexOf(r):0]}function ugt(t){for(let e=Kc.indexOf(t)+1,r=Kc.length;e<r;++e)if(qD[Kc[e]].common)return Kc[e]}function Tme(t,e,r){if(!r)t[e]=!0;else if(r.length){let{lo:n,hi:i}=fD(r,e),o=r[n]>=e?r[n]:r[i];t[o]=!0}}function cgt(t,e,r,n){let i=t._adapter,o=+i.startOf(e[0].value,n),s=e[e.length-1].value,u,h;for(u=o;u<=s;u=+i.add(u,1,n))h=r[u],h>=0&&(e[h].major=!0);return e}function Ame(t,e,r){let n=[],i={},o=e.length,s,u;for(s=0;s<o;++s)u=e[s],i[u]=s,n.push({value:u,major:!1});return o===0||!r?n:cgt(t,n,i,r)}var VE=class extends Ub{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){let n=e.time||(e.time={}),i=this._adapter=new Sdt._date(e.adapters.date);i.init(r),Ex(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:Sme(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,r=this._adapter,n=e.time.unit||"day",{min:i,max:o,minDefined:s,maxDefined:u}=this.getUserBounds();function h(y){!s&&!isNaN(y.min)&&(i=Math.min(i,y.min)),!u&&!isNaN(y.max)&&(o=Math.max(o,y.max))}(!s||!u)&&(h(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&h(this.getMinMax(!1))),i=gs(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),o=gs(o)&&!isNaN(o)?o:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,o-1),this.max=Math.max(i+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){let e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);let o=this.min,s=this.max,u=spe(i,o,s);return this._unit=r.unit||(n.autoSkip?Eme(r.minUnit,this.min,this.max,this._getLabelCapacity(o)):lgt(this,u.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:ugt(this._unit),this.initOffsets(i),e.reverse&&u.reverse(),Ame(this,u,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,o;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?n=o:n=(o-this.getDecimalForValue(e[e.length-2]))/2);let s=e.length<3?.5:.25;r=Al(r,0,s),n=Al(n,0,s),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){let e=this._adapter,r=this.min,n=this.max,i=this.options,o=i.time,s=o.unit||Eme(o.minUnit,r,n,this._getLabelCapacity(r)),u=si(i.ticks.stepSize,1),h=s==="week"?o.isoWeekday:!1,y=Nb(h)||h===!0,w={},T=r,I,P;if(y&&(T=+e.startOf(T,"isoWeek",h)),T=+e.startOf(T,y?"day":s),e.diff(n,r,s)>1e5*u)throw new Error(r+" and "+n+" are too far apart with stepSize of "+u+" "+s);let L=i.ticks.source==="data"&&this.getDataTimestamps();for(I=T,P=0;I<n;I=+e.add(I,u,s),P++)Tme(w,I,L);return(I===n||i.bounds==="ticks"||P===1)&&Tme(w,I,L),Object.keys(w).sort(wme).map(R=>+R)}getLabelForValue(e){let r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){let i=this.options.time.displayFormats,o=this._unit,s=r||i[o];return this._adapter.format(e,s)}_tickFormatFunction(e,r,n,i){let o=this.options,s=o.ticks.callback;if(s)return ca(s,[e,r,n],this);let u=o.time.displayFormats,h=this._unit,y=this._majorUnit,w=h&&u[h],T=y&&u[y],I=n[r],P=y&&T&&I&&I.major;return this._adapter.format(e,i||(P?T:w))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let r=this.options.ticks,n=this.ctx.measureText(e).width,i=$h(this.isHorizontal()?r.maxRotation:r.minRotation),o=Math.cos(i),s=Math.sin(i),u=this._resolveTickFontOptions(0).size;return{w:n*o+u*s,h:n*s+u*o}}_getLabelCapacity(e){let r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,o=this._tickFormatFunction(e,0,Ame(this,[e],this._majorUnit),i),s=this._getLabelSize(o),u=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return u>0?u:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;let i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],r,n;if(e.length)return e;let i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(Sme(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return O4(e.sort(wme))}};function AD(t,e,r){let n=0,i=t.length-1,o,s,u,h;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=Zp(t,"pos",e)),{pos:o,time:u}=t[n],{pos:s,time:h}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=Zp(t,"time",e)),{time:o,pos:u}=t[n],{time:s,pos:h}=t[i]);let y=s-o;return y?u+(h-u)*(e-o)/y:u}var Lj=class extends VE{static id="timeseries";static defaults=VE.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=AD(r,this.min),this._tableRange=AD(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:r,max:n}=this,i=[],o=[],s,u,h,y,w;for(s=0,u=e.length;s<u;++s)y=e[s],y>=r&&y<=n&&i.push(y);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(s=0,u=i.length;s<u;++s)w=i[s+1],h=i[s-1],y=i[s],Math.round((w+h)/2)!==y&&o.push({time:y,pos:s/(u-1)});return o}_generate(){let e=this.min,r=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(AD(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return AD(this._table,n*this._tableRange+this._minPos,!0)}},fgt=Object.freeze({__proto__:null,CategoryScale:Ij,LinearScale:Dj,LogarithmicScale:Oj,RadialLinearScale:Mj,TimeScale:VE,TimeSeriesScale:Lj}),Gme=[wdt,Gpt,Umt,fgt];zE.register(...Gme);document.addEventListener("direct-upload:initialize",t=>{let{target:e,detail:r}=t,{id:n,file:i}=r;e.insertAdjacentHTML("beforebegin",`
    <div id="direct-upload-${n}" class="direct-upload direct-upload--pending">
      <div id="direct-upload-progress-${n}" class="direct-upload__progress" style="width: 0%"></div>
      <span class="direct-upload__filename"></span>
    </div>
  `),e.previousElementSibling.querySelector(".direct-upload__filename").textContent=i.name});document.addEventListener("direct-upload:start",t=>{let{id:e}=t.detail;document.getElementById(`direct-upload-${e}`).classList.remove("direct-upload--pending")});document.addEventListener("direct-upload:progress",t=>{let{id:e,progress:r}=t.detail,n=document.getElementById(`direct-upload-progress-${e}`);n.style.width=`${r}%`});document.addEventListener("direct-upload:error",t=>{t.preventDefault();let{id:e,error:r}=t.detail,n=document.getElementById(`direct-upload-${e}`);n.classList.add("direct-upload--error"),n.setAttribute("title",r)});document.addEventListener("direct-upload:end",t=>{let{id:e}=t.detail;document.getElementById(`direct-upload-${e}`).classList.add("direct-upload--complete")});(function(t,e){typeof exports=="object"&&typeof module<"u"?module.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self,t.Mapkick=e())})(void 0,function(){"use strict";function t(L,R){R===void 0&&(R={});var W=R.insertAt;if(!(!L||typeof document>"u")){var G=document.head||document.getElementsByTagName("head")[0],q=document.createElement("style");q.type="text/css",W==="top"&&G.firstChild?G.insertBefore(q,G.firstChild):G.appendChild(q),q.styleSheet?q.styleSheet.cssText=L:q.appendChild(document.createTextNode(L))}}var e=`.mapboxgl-map{font:12px/20px Helvetica Neue,Arial,Helvetica,sans-serif;overflow:hidden;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mapboxgl-canvas{position:absolute;left:0;top:0}.mapboxgl-map:-webkit-full-screen{width:100%;height:100%}.mapboxgl-canary{background-color:salmon}.mapboxgl-canvas-container.mapboxgl-interactive,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass{cursor:-webkit-grab;cursor:-moz-grab;cursor:grab;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.mapboxgl-canvas-container.mapboxgl-interactive.mapboxgl-track-pointer{cursor:pointer}.mapboxgl-canvas-container.mapboxgl-interactive:active,.mapboxgl-ctrl-group button.mapboxgl-ctrl-compass:active{cursor:-webkit-grabbing;cursor:-moz-grabbing;cursor:grabbing}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate .mapboxgl-canvas{touch-action:pan-x pan-y}.mapboxgl-canvas-container.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:pinch-zoom}.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan,.mapboxgl-canvas-container.mapboxgl-touch-zoom-rotate.mapboxgl-touch-drag-pan .mapboxgl-canvas{touch-action:none}.mapboxgl-ctrl-bottom-left,.mapboxgl-ctrl-bottom-right,.mapboxgl-ctrl-top-left,.mapboxgl-ctrl-top-right{position:absolute;pointer-events:none;z-index:2}.mapboxgl-ctrl-top-left{top:0;left:0}.mapboxgl-ctrl-top-right{top:0;right:0}.mapboxgl-ctrl-bottom-left{bottom:0;left:0}.mapboxgl-ctrl-bottom-right{right:0;bottom:0}.mapboxgl-ctrl{clear:both;pointer-events:auto;transform:translate(0)}.mapboxgl-ctrl-top-left .mapboxgl-ctrl{margin:10px 0 0 10px;float:left}.mapboxgl-ctrl-top-right .mapboxgl-ctrl{margin:10px 10px 0 0;float:right}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl{margin:0 0 10px 10px;float:left}.mapboxgl-ctrl-bottom-right .mapboxgl-ctrl{margin:0 10px 10px 0;float:right}.mapboxgl-ctrl-group{border-radius:4px;background:#fff}.mapboxgl-ctrl-group:not(:empty){-moz-box-shadow:0 0 2px rgba(0,0,0,.1);-webkit-box-shadow:0 0 2px rgba(0,0,0,.1);box-shadow:0 0 0 2px rgba(0,0,0,.1)}@media (-ms-high-contrast:active){.mapboxgl-ctrl-group:not(:empty){box-shadow:0 0 0 2px ButtonText}}.mapboxgl-ctrl-group button{width:29px;height:29px;display:block;padding:0;outline:none;border:0;box-sizing:border-box;background-color:transparent;cursor:pointer}.mapboxgl-ctrl-group button+button{border-top:1px solid #ddd}.mapboxgl-ctrl button .mapboxgl-ctrl-icon{display:block;width:100%;height:100%;background-repeat:no-repeat;background-position:50%}@media (-ms-high-contrast:active){.mapboxgl-ctrl-icon{background-color:transparent}.mapboxgl-ctrl-group button+button{border-top:1px solid ButtonText}}.mapboxgl-ctrl button::-moz-focus-inner{border:0;padding:0}.mapboxgl-ctrl-attrib-button:focus,.mapboxgl-ctrl-group button:focus{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl button:disabled{cursor:not-allowed}.mapboxgl-ctrl button:disabled .mapboxgl-ctrl-icon{opacity:.25}.mapboxgl-ctrl button:not(:disabled):hover{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-group button:focus:focus-visible{box-shadow:0 0 2px 2px #0096ff}.mapboxgl-ctrl-group button:focus:not(:focus-visible){box-shadow:none}.mapboxgl-ctrl-group button:focus:first-child{border-radius:4px 4px 0 0}.mapboxgl-ctrl-group button:focus:last-child{border-radius:0 0 4px 4px}.mapboxgl-ctrl-group button:focus:only-child{border-radius:inherit}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-out .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 13c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h9c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-9z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-zoom-in .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M14.5 8.5c-.75 0-1.5.75-1.5 1.5v3h-3c-.75 0-1.5.75-1.5 1.5S9.25 16 10 16h3v3c0 .75.75 1.5 1.5 1.5S16 19.75 16 19v-3h3c.75 0 1.5-.75 1.5-1.5S19.75 13 19 13h-3v-3c0-.75-.75-1.5-1.5-1.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-fullscreen .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M24 16v5.5c0 1.75-.75 2.5-2.5 2.5H16v-1l3-1.5-4-5.5 1-1 5.5 4 1.5-3h1zM6 16l1.5 3 5.5-4 1 1-4 5.5 3 1.5v1H7.5C5.75 24 5 23.25 5 21.5V16h1zm7-11v1l-3 1.5 4 5.5-1 1-5.5-4L6 13H5V7.5C5 5.75 5.75 5 7.5 5H13zm11 2.5c0-1.75-.75-2.5-2.5-2.5H16v1l3 1.5-4 5.5 1 1 5.5-4 1.5 3h1V7.5z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-shrink .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M18.5 16c-1.75 0-2.5.75-2.5 2.5V24h1l1.5-3 5.5 4 1-1-4-5.5 3-1.5v-1h-5.5zM13 18.5c0-1.75-.75-2.5-2.5-2.5H5v1l3 1.5L4 24l1 1 5.5-4 1.5 3h1v-5.5zm3-8c0 1.75.75 2.5 2.5 2.5H24v-1l-3-1.5L25 5l-1-1-5.5 4L17 5h-1v5.5zM10.5 13c1.75 0 2.5-.75 2.5-2.5V5h-1l-1.5 3L5 4 4 5l4 5.5L5 12v1h5.5z'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23999'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-compass .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 29 29' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10.5 14l4-8 4 8h-8z'/%3E%3Cpath d='M10.5 16l4 8 4-8h-8z' fill='%23ccc'/%3E%3C/svg%3E")}}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23333'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23aaa'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-waiting .mapboxgl-ctrl-icon{-webkit-animation:mapboxgl-spin 2s linear infinite;-moz-animation:mapboxgl-spin 2s infinite linear;-o-animation:mapboxgl-spin 2s infinite linear;-ms-animation:mapboxgl-spin 2s infinite linear;animation:mapboxgl-spin 2s linear infinite}@media (-ms-high-contrast:active){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23999'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-active-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e58978'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%2333b5e5'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate.mapboxgl-ctrl-geolocate-background-error .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23e54e33'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3C/svg%3E")}.mapboxgl-ctrl button.mapboxgl-ctrl-geolocate:disabled .mapboxgl-ctrl-icon{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='29' height='29' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill='%23666'%3E%3Cpath d='M10 4C9 4 9 5 9 5v.1A5 5 0 005.1 9H5s-1 0-1 1 1 1 1 1h.1A5 5 0 009 14.9v.1s0 1 1 1 1-1 1-1v-.1a5 5 0 003.9-3.9h.1s1 0 1-1-1-1-1-1h-.1A5 5 0 0011 5.1V5s0-1-1-1zm0 2.5a3.5 3.5 0 110 7 3.5 3.5 0 110-7z'/%3E%3Ccircle cx='10' cy='10' r='2'/%3E%3Cpath d='M14 5l1 1-9 9-1-1 9-9z' fill='red'/%3E%3C/svg%3E")}}@-webkit-keyframes mapboxgl-spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@-moz-keyframes mapboxgl-spin{0%{-moz-transform:rotate(0deg)}to{-moz-transform:rotate(1turn)}}@-o-keyframes mapboxgl-spin{0%{-o-transform:rotate(0deg)}to{-o-transform:rotate(1turn)}}@-ms-keyframes mapboxgl-spin{0%{-ms-transform:rotate(0deg)}to{-ms-transform:rotate(1turn)}}@keyframes mapboxgl-spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}a.mapboxgl-ctrl-logo{width:88px;height:23px;margin:0 0 -4px -4px;display:block;background-repeat:no-repeat;cursor:pointer;overflow:hidden;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg opacity='.3' stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg opacity='.9' fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}a.mapboxgl-ctrl-logo.mapboxgl-compact{width:23px}@media (-ms-high-contrast:active){a.mapboxgl-ctrl-logo{background-color:transparent;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23000' stroke-width='3'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cg fill='%23fff'%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/g%3E%3C/svg%3E")}}@media (-ms-high-contrast:black-on-white){a.mapboxgl-ctrl-logo{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='88' height='23' viewBox='0 0 88 23' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' fill-rule='evenodd'%3E%3Cdefs%3E%3Cpath id='a' d='M11.5 2.25c5.105 0 9.25 4.145 9.25 9.25s-4.145 9.25-9.25 9.25-9.25-4.145-9.25-9.25 4.145-9.25 9.25-9.25zM6.997 15.983c-.051-.338-.828-5.802 2.233-8.873a4.395 4.395 0 013.13-1.28c1.27 0 2.49.51 3.39 1.42.91.9 1.42 2.12 1.42 3.39 0 1.18-.449 2.301-1.28 3.13C12.72 16.93 7 16 7 16l-.003-.017zM15.3 10.5l-2 .8-.8 2-.8-2-2-.8 2-.8.8-2 .8 2 2 .8z'/%3E%3Cpath id='b' d='M50.63 8c.13 0 .23.1.23.23V9c.7-.76 1.7-1.18 2.73-1.18 2.17 0 3.95 1.85 3.95 4.17s-1.77 4.19-3.94 4.19c-1.04 0-2.03-.43-2.74-1.18v3.77c0 .13-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V8.23c0-.12.1-.23.23-.23h1.4zm-3.86.01c.01 0 .01 0 .01-.01.13 0 .22.1.22.22v7.55c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V15c-.7.76-1.69 1.19-2.73 1.19-2.17 0-3.94-1.87-3.94-4.19 0-2.32 1.77-4.19 3.94-4.19 1.03 0 2.02.43 2.73 1.18v-.75c0-.12.1-.23.23-.23h1.4zm26.375-.19a4.24 4.24 0 00-4.16 3.29c-.13.59-.13 1.19 0 1.77a4.233 4.233 0 004.17 3.3c2.35 0 4.26-1.87 4.26-4.19 0-2.32-1.9-4.17-4.27-4.17zM60.63 5c.13 0 .23.1.23.23v3.76c.7-.76 1.7-1.18 2.73-1.18 1.88 0 3.45 1.4 3.84 3.28.13.59.13 1.2 0 1.8-.39 1.88-1.96 3.29-3.84 3.29-1.03 0-2.02-.43-2.73-1.18v.77c0 .12-.1.23-.23.23h-1.4c-.13 0-.23-.1-.23-.23V5.23c0-.12.1-.23.23-.23h1.4zm-34 11h-1.4c-.13 0-.23-.11-.23-.23V8.22c.01-.13.1-.22.23-.22h1.4c.13 0 .22.11.23.22v.68c.5-.68 1.3-1.09 2.16-1.1h.03c1.09 0 2.09.6 2.6 1.55.45-.95 1.4-1.55 2.44-1.56 1.62 0 2.93 1.25 2.9 2.78l.03 5.2c0 .13-.1.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.8 0-1.46.7-1.59 1.62l.01 4.68c0 .13-.11.23-.23.23h-1.41c-.13 0-.23-.11-.23-.23v-4.59c0-.98-.74-1.71-1.62-1.71-.85 0-1.54.79-1.6 1.8v4.5c0 .13-.1.23-.23.23zm53.615 0h-1.61c-.04 0-.08-.01-.12-.03-.09-.06-.13-.19-.06-.28l2.43-3.71-2.39-3.65a.213.213 0 01-.03-.12c0-.12.09-.21.21-.21h1.61c.13 0 .24.06.3.17l1.41 2.37 1.4-2.37a.34.34 0 01.3-.17h1.6c.04 0 .08.01.12.03.09.06.13.19.06.28l-2.37 3.65 2.43 3.7c0 .05.01.09.01.13 0 .12-.09.21-.21.21h-1.61c-.13 0-.24-.06-.3-.17l-1.44-2.42-1.44 2.42a.34.34 0 01-.3.17zm-7.12-1.49c-1.33 0-2.42-1.12-2.42-2.51 0-1.39 1.08-2.52 2.42-2.52 1.33 0 2.42 1.12 2.42 2.51 0 1.39-1.08 2.51-2.42 2.52zm-19.865 0c-1.32 0-2.39-1.11-2.42-2.48v-.07c.02-1.38 1.09-2.49 2.4-2.49 1.32 0 2.41 1.12 2.41 2.51 0 1.39-1.07 2.52-2.39 2.53zm-8.11-2.48c-.01 1.37-1.09 2.47-2.41 2.47s-2.42-1.12-2.42-2.51c0-1.39 1.08-2.52 2.4-2.52 1.33 0 2.39 1.11 2.41 2.48l.02.08zm18.12 2.47c-1.32 0-2.39-1.11-2.41-2.48v-.06c.02-1.38 1.09-2.48 2.41-2.48s2.42 1.12 2.42 2.51c0 1.39-1.09 2.51-2.42 2.51z'/%3E%3C/defs%3E%3Cmask id='c'%3E%3Crect width='100%25' height='100%25' fill='%23fff'/%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/mask%3E%3Cg stroke='%23fff' stroke-width='3' fill='%23fff'%3E%3Ccircle mask='url(%23c)' cx='11.5' cy='11.5' r='9.25'/%3E%3Cuse xlink:href='%23b' mask='url(%23c)'/%3E%3C/g%3E%3Cuse xlink:href='%23a'/%3E%3Cuse xlink:href='%23b'/%3E%3C/svg%3E")}}.mapboxgl-ctrl.mapboxgl-ctrl-attrib{padding:0 5px;background-color:hsla(0,0%,100%,.5);margin:0}@media screen{.mapboxgl-ctrl-attrib.mapboxgl-compact{min-height:20px;padding:2px 24px 2px 0;margin:10px;position:relative;background-color:#fff;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 28px 2px 8px;visibility:visible}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show,.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact-show{padding:2px 8px 2px 28px;border-radius:12px}.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner{display:none}.mapboxgl-ctrl-attrib-button{display:none;cursor:pointer;position:absolute;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E");background-color:hsla(0,0%,100%,.5);width:24px;height:24px;box-sizing:border-box;border-radius:12px;outline:none;top:0;right:0;border:0}.mapboxgl-ctrl-bottom-left .mapboxgl-ctrl-attrib-button,.mapboxgl-ctrl-top-left .mapboxgl-ctrl-attrib-button{left:0}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-inner,.mapboxgl-ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-button{display:block}.mapboxgl-ctrl-attrib.mapboxgl-compact-show .mapboxgl-ctrl-attrib-button{background-color:rgba(0,0,0,.05)}.mapboxgl-ctrl-bottom-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;right:0}.mapboxgl-ctrl-top-right>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;right:0}.mapboxgl-ctrl-top-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{top:0;left:0}.mapboxgl-ctrl-bottom-left>.mapboxgl-ctrl-attrib.mapboxgl-compact:after{bottom:0;left:0}}@media screen and (-ms-high-contrast:active){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' fill='%23fff'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}@media screen and (-ms-high-contrast:black-on-white){.mapboxgl-ctrl-attrib.mapboxgl-compact:after{background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd'%3E%3Cpath d='M4 10a6 6 0 1012 0 6 6 0 10-12 0m5-3a1 1 0 102 0 1 1 0 10-2 0m0 3a1 1 0 112 0v3a1 1 0 11-2 0'/%3E%3C/svg%3E")}}.mapboxgl-ctrl-attrib a{color:rgba(0,0,0,.75);text-decoration:none}.mapboxgl-ctrl-attrib a:hover{color:inherit;text-decoration:underline}.mapboxgl-ctrl-attrib .mapbox-improve-map{font-weight:700;margin-left:2px}.mapboxgl-attrib-empty{display:none}.mapboxgl-ctrl-scale{background-color:hsla(0,0%,100%,.75);font-size:10px;border:2px solid #333;border-top:#333;padding:0 5px;color:#333;box-sizing:border-box}.mapboxgl-popup{position:absolute;top:0;left:0;display:-webkit-flex;display:flex;will-change:transform;pointer-events:none}.mapboxgl-popup-anchor-top,.mapboxgl-popup-anchor-top-left,.mapboxgl-popup-anchor-top-right{-webkit-flex-direction:column;flex-direction:column}.mapboxgl-popup-anchor-bottom,.mapboxgl-popup-anchor-bottom-left,.mapboxgl-popup-anchor-bottom-right{-webkit-flex-direction:column-reverse;flex-direction:column-reverse}.mapboxgl-popup-anchor-left{-webkit-flex-direction:row;flex-direction:row}.mapboxgl-popup-anchor-right{-webkit-flex-direction:row-reverse;flex-direction:row-reverse}.mapboxgl-popup-tip{width:0;height:0;border:10px solid transparent;z-index:1}.mapboxgl-popup-anchor-top .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-top:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-top:none;border-left:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-top:none;border-right:none;border-bottom-color:#fff}.mapboxgl-popup-anchor-bottom .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-bottom:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-tip{-webkit-align-self:flex-start;align-self:flex-start;border-bottom:none;border-left:none;border-top-color:#fff}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-tip{-webkit-align-self:flex-end;align-self:flex-end;border-bottom:none;border-right:none;border-top-color:#fff}.mapboxgl-popup-anchor-left .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-left:none;border-right-color:#fff}.mapboxgl-popup-anchor-right .mapboxgl-popup-tip{-webkit-align-self:center;align-self:center;border-right:none;border-left-color:#fff}.mapboxgl-popup-close-button{position:absolute;right:0;top:0;border:0;border-radius:0 3px 0 0;cursor:pointer;background-color:transparent}.mapboxgl-popup-close-button:hover{background-color:rgba(0,0,0,.05)}.mapboxgl-popup-content{position:relative;background:#fff;border-radius:3px;box-shadow:0 1px 2px rgba(0,0,0,.1);padding:10px 10px 15px;pointer-events:auto}.mapboxgl-popup-anchor-top-left .mapboxgl-popup-content{border-top-left-radius:0}.mapboxgl-popup-anchor-top-right .mapboxgl-popup-content{border-top-right-radius:0}.mapboxgl-popup-anchor-bottom-left .mapboxgl-popup-content{border-bottom-left-radius:0}.mapboxgl-popup-anchor-bottom-right .mapboxgl-popup-content{border-bottom-right-radius:0}.mapboxgl-popup-track-pointer{display:none}.mapboxgl-popup-track-pointer *{pointer-events:none;user-select:none}.mapboxgl-map:hover .mapboxgl-popup-track-pointer{display:flex}.mapboxgl-map:active .mapboxgl-popup-track-pointer{display:none}.mapboxgl-marker{position:absolute;top:0;left:0;will-change:transform}.mapboxgl-user-location-dot,.mapboxgl-user-location-dot:before{background-color:#1da1f2;width:15px;height:15px;border-radius:50%}.mapboxgl-user-location-dot:before{content:"";position:absolute;-webkit-animation:mapboxgl-user-location-dot-pulse 2s infinite;-moz-animation:mapboxgl-user-location-dot-pulse 2s infinite;-ms-animation:mapboxgl-user-location-dot-pulse 2s infinite;animation:mapboxgl-user-location-dot-pulse 2s infinite}.mapboxgl-user-location-dot:after{border-radius:50%;border:2px solid #fff;content:"";height:19px;left:-2px;position:absolute;top:-2px;width:19px;box-sizing:border-box;box-shadow:0 0 3px rgba(0,0,0,.35)}@-webkit-keyframes mapboxgl-user-location-dot-pulse{0%{-webkit-transform:scale(1);opacity:1}70%{-webkit-transform:scale(3);opacity:0}to{-webkit-transform:scale(1);opacity:0}}@-ms-keyframes mapboxgl-user-location-dot-pulse{0%{-ms-transform:scale(1);opacity:1}70%{-ms-transform:scale(3);opacity:0}to{-ms-transform:scale(1);opacity:0}}@keyframes mapboxgl-user-location-dot-pulse{0%{transform:scale(1);opacity:1}70%{transform:scale(3);opacity:0}to{transform:scale(1);opacity:0}}.mapboxgl-user-location-dot-stale{background-color:#aaa}.mapboxgl-user-location-dot-stale:after{display:none}.mapboxgl-user-location-accuracy-circle{background-color:rgba(29,161,242,.2);width:1px;height:1px;border-radius:100%}.mapboxgl-crosshair,.mapboxgl-crosshair .mapboxgl-interactive,.mapboxgl-crosshair .mapboxgl-interactive:active{cursor:crosshair}.mapboxgl-boxzoom{position:absolute;top:0;left:0;width:0;height:0;background:#fff;border:2px dotted #202020;opacity:.5}@media print{.mapbox-improve-map{display:none}}`;t(e);var r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n={},i={get exports(){return n},set exports(L){n=L}};(function(L,R){(function(W,G){L.exports=G()})(r,function(){var W,G,q;function V(p,K){if(!W)W=K;else if(!G)G=K;else{var j="var sharedChunk = {}; ("+W+")(sharedChunk); ("+G+")(sharedChunk);",Q={};W(Q),q=K(Q),typeof window<"u"&&(q.workerUrl=window.URL.createObjectURL(new Blob([j],{type:"text/javascript"})))}}return V(["exports"],function(p){function K(a,l){return a(l={exports:{}},l.exports),l.exports}var j=Q;function Q(a,l,f,_){this.cx=3*a,this.bx=3*(f-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(_-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=_,this.p2x=f,this.p2y=_}Q.prototype.sampleCurveX=function(a){return((this.ax*a+this.bx)*a+this.cx)*a},Q.prototype.sampleCurveY=function(a){return((this.ay*a+this.by)*a+this.cy)*a},Q.prototype.sampleCurveDerivativeX=function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},Q.prototype.solveCurveX=function(a,l){var f,_,k,D,M;for(l===void 0&&(l=1e-6),k=a,M=0;M<8;M++){if(D=this.sampleCurveX(k)-a,Math.abs(D)<l)return k;var H=this.sampleCurveDerivativeX(k);if(Math.abs(H)<1e-6)break;k-=D/H}if((k=a)<(f=0))return f;if(k>(_=1))return _;for(;f<_;){if(D=this.sampleCurveX(k),Math.abs(D-a)<l)return k;a>D?f=k:_=k,k=.5*(_-f)+f}return k},Q.prototype.solve=function(a,l){return this.sampleCurveY(this.solveCurveX(a,l))};var ee=se;function se(a,l){this.x=a,this.y=l}se.prototype={clone:function(){return new se(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,l){return this.clone()._rotateAround(a,l)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var l=a.x-this.x,f=a.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,l){return Math.atan2(this.x*l-this.y*a,this.x*a+this.y*l)},_matMult:function(a){var l=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=l,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var l=Math.cos(a),f=Math.sin(a),_=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=_,this},_rotateAround:function(a,l){var f=Math.cos(a),_=Math.sin(a),k=l.y+_*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-_*(this.y-l.y),this.y=k,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},se.convert=function(a){return a instanceof se?a:Array.isArray(a)?new se(a[0],a[1]):a};var me=typeof self<"u"?self:{},ve=Math.pow(2,53)-1;function U(a,l,f,_){var k=new j(a,l,f,_);return function(D){return k.solve(D)}}var $=U(.25,.1,.25,1);function he(a,l,f){return Math.min(f,Math.max(l,a))}function Ce(a,l,f){var _=f-l,k=((a-l)%_+_)%_+l;return k===l?f:k}function Se(a){for(var l=arguments,f=[],_=arguments.length-1;_-- >0;)f[_]=l[_+1];for(var k=0,D=f;k<D.length;k+=1){var M=D[k];for(var H in M)a[H]=M[H]}return a}var de=1;function we(){return de++}function Ue(){return function a(l){return l?(l^16*Math.random()>>l/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function ye(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function ne(a,l){a.forEach(function(f){l[f]&&(l[f]=l[f].bind(l))})}function st(a,l){return a.indexOf(l,a.length-l.length)!==-1}function dt(a,l,f){var _={};for(var k in a)_[k]=l.call(f||this,a[k],k,a);return _}function lt(a,l,f){var _={};for(var k in a)l.call(f||this,a[k],k,a)&&(_[k]=a[k]);return _}function kt(a){return Array.isArray(a)?a.map(kt):typeof a=="object"&&a?dt(a,kt):a}var ut={};function Ut(a){ut[a]||(typeof console<"u"&&console.warn(a),ut[a]=!0)}function Wt(a,l,f){return(f.y-a.y)*(l.x-a.x)>(l.y-a.y)*(f.x-a.x)}function Ht(a){for(var l=0,f=0,_=a.length,k=_-1,D=void 0,M=void 0;f<_;k=f++)l+=((M=a[k]).x-(D=a[f]).x)*(D.y+M.y);return l}function pr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function zr(a){var l={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(_,k,D,M){var H=D||M;return l[k]=!H||H.toLowerCase(),""}),l["max-age"]){var f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l}var Jt=null;function Qr(a){if(Jt==null){var l=a.navigator?a.navigator.userAgent:null;Jt=!!a.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Jt}function Br(a){try{var l=me[a];return l.setItem("_mapbox_test_",1),l.removeItem("_mapbox_test_"),!0}catch{return!1}}var Rr,Be,Ge,vt,Kt=me.performance&&me.performance.now?me.performance.now.bind(me.performance):Date.now.bind(Date),rt=me.requestAnimationFrame||me.mozRequestAnimationFrame||me.webkitRequestAnimationFrame||me.msRequestAnimationFrame,Ct=me.cancelAnimationFrame||me.mozCancelAnimationFrame||me.webkitCancelAnimationFrame||me.msCancelAnimationFrame,Tt={now:Kt,frame:function(a){var l=rt(a);return{cancel:function(){return Ct(l)}}},getImageData:function(a,l){l===void 0&&(l=0);var f=me.document.createElement("canvas"),_=f.getContext("2d");if(!_)throw new Error("failed to create canvas 2d context");return f.width=a.width,f.height=a.height,_.drawImage(a,0,0,a.width,a.height),_.getImageData(-l,-l,a.width+2*l,a.height+2*l)},resolveURL:function(a){return Rr||(Rr=me.document.createElement("a")),Rr.href=a,Rr.href},hardwareConcurrency:me.navigator&&me.navigator.hardwareConcurrency||4,get devicePixelRatio(){return me.devicePixelRatio},get prefersReducedMotion(){return!!me.matchMedia&&(Be==null&&(Be=me.matchMedia("(prefers-reduced-motion: reduce)")),Be.matches)}},ar={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},er={supported:!1,testSupport:function(a){!ir&&vt&&(sr?He(a):Ge=a)}},ir=!1,sr=!1;function He(a){var l=a.createTexture();a.bindTexture(a.TEXTURE_2D,l);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,vt),a.isContextLost())return;er.supported=!0}catch{}a.deleteTexture(l),ir=!0}me.document&&((vt=me.document.createElement("img")).onload=function(){Ge&&He(Ge),Ge=null,sr=!0},vt.onerror=function(){ir=!0,Ge=null},vt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var Xe="01",Rt=function(a,l){this._transformRequestFn=a,this._customAccessToken=l,this._createSkuToken()};function xr(a){return a.indexOf("mapbox:")===0}Rt.prototype._createSkuToken=function(){var a=function(){for(var l="",f=0;f<10;f++)l+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",Xe,l].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt},Rt.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Rt.prototype.transformRequest=function(a,l){return this._transformRequestFn&&this._transformRequestFn(a,l)||{url:a}},Rt.prototype.normalizeStyleURL=function(a,l){if(!xr(a))return a;var f=wt(a);return f.path="/styles/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||l)},Rt.prototype.normalizeGlyphsURL=function(a,l){if(!xr(a))return a;var f=wt(a);return f.path="/fonts/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||l)},Rt.prototype.normalizeSourceURL=function(a,l){if(!xr(a))return a;var f=wt(a);return f.path="/v4/"+f.authority+".json",f.params.push("secure"),this._makeAPIURL(f,this._customAccessToken||l)},Rt.prototype.normalizeSpriteURL=function(a,l,f,_){var k=wt(a);return xr(a)?(k.path="/styles/v1"+k.path+"/sprite"+l+f,this._makeAPIURL(k,this._customAccessToken||_)):(k.path+=""+l+f,Ot(k))},Rt.prototype.normalizeTileURL=function(a,l){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!xr(a))return a;var f=wt(a);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Tt.devicePixelRatio>=2||l===512?"@2x":"")+(er.supported?".webp":"$1")),f.path=f.path.replace(/^.+\/v4\//,"/"),f.path="/v4"+f.path;var _=this._customAccessToken||function(k){for(var D=0,M=k;D<M.length;D+=1){var H=M[D].match(/^access_token=(.*)$/);if(H)return H[1]}return null}(f.params)||ar.ACCESS_TOKEN;return ar.REQUIRE_ACCESS_TOKEN&&_&&this._skuToken&&f.params.push("sku="+this._skuToken),this._makeAPIURL(f,_)},Rt.prototype.canonicalizeTileURL=function(a,l){var f=wt(a);if(!f.path.match(/(^\/v4\/)/)||!f.path.match(/\.[\w]+$/))return a;var _="mapbox://tiles/";_+=f.path.replace("/v4/","");var k=f.params;return l&&(k=k.filter(function(D){return!D.match(/^access_token=/)})),k.length&&(_+="?"+k.join("&")),_},Rt.prototype.canonicalizeTileset=function(a,l){for(var f=!!l&&xr(l),_=[],k=0,D=a.tiles||[];k<D.length;k+=1){var M=D[k];kn(M)?_.push(this.canonicalizeTileURL(M,f)):_.push(M)}return _},Rt.prototype._makeAPIURL=function(a,l){var f="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",_=wt(ar.API_URL);if(a.protocol=_.protocol,a.authority=_.authority,a.protocol==="http"){var k=a.params.indexOf("secure");k>=0&&a.params.splice(k,1)}if(_.path!=="/"&&(a.path=""+_.path+a.path),!ar.REQUIRE_ACCESS_TOKEN)return Ot(a);if(!(l=l||ar.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+f);if(l[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+f);return a.params=a.params.filter(function(D){return D.indexOf("access_token")===-1}),a.params.push("access_token="+l),Ot(a)};var Yn=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function kn(a){return Yn.test(a)}var Cn=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function wt(a){var l=a.match(Cn);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Ot(a){var l=a.params.length?"?"+a.params.join("&"):"";return a.protocol+"://"+a.authority+a.path+l}function wr(a){if(!a)return null;var l=a.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(decodeURIComponent(me.atob(l[1]).split("").map(function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch{return null}}var tr=function(a){this.type=a,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};tr.prototype.getStorageKey=function(a){var l,f=wr(ar.ACCESS_TOKEN);return l=f&&f.u?me.btoa(encodeURIComponent(f.u).replace(/%([0-9A-F]{2})/g,function(_,k){return String.fromCharCode(+("0x"+k))})):ar.ACCESS_TOKEN||"",a?"mapbox.eventData."+a+":"+l:"mapbox.eventData:"+l},tr.prototype.fetchEventData=function(){var a=Br("localStorage"),l=this.getStorageKey(),f=this.getStorageKey("uuid");if(a)try{var _=me.localStorage.getItem(l);_&&(this.eventData=JSON.parse(_));var k=me.localStorage.getItem(f);k&&(this.anonId=k)}catch{Ut("Unable to read from LocalStorage")}},tr.prototype.saveEventData=function(){var a=Br("localStorage"),l=this.getStorageKey(),f=this.getStorageKey("uuid");if(a)try{me.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&me.localStorage.setItem(l,JSON.stringify(this.eventData))}catch{Ut("Unable to write to LocalStorage")}},tr.prototype.processRequests=function(a){},tr.prototype.postEvent=function(a,l,f,_){var k=this;if(ar.EVENTS_URL){var D=wt(ar.EVENTS_URL);D.params.push("access_token="+(_||ar.ACCESS_TOKEN||""));var M={event:this.type,created:new Date(a).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:Xe,userId:this.anonId},H=l?Se(M,l):M,X={url:Ot(D),headers:{"Content-Type":"text/plain"},body:JSON.stringify([H])};this.pendingRequest=xn(X,function(ie){k.pendingRequest=null,f(ie),k.saveEventData(),k.processRequests(_)})}},tr.prototype.queueRequest=function(a,l){this.queue.push(a),this.processRequests(l)};var on,pn,tn=function(a){function l(){a.call(this,"map.load"),this.success={},this.skuToken=""}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.postMapLoadEvent=function(f,_,k,D){this.skuToken=k;var M=!(!D&&!ar.ACCESS_TOKEN),H=Array.isArray(f)&&f.some(function(X){return xr(X)||kn(X)});ar.EVENTS_URL&&M&&H&&this.queueRequest({id:_,timestamp:Date.now()},D)},l.prototype.processRequests=function(f){var _=this;if(!this.pendingRequest&&this.queue.length!==0){var k=this.queue.shift(),D=k.id,M=k.timestamp;D&&this.success[D]||(this.anonId||this.fetchEventData(),ye(this.anonId)||(this.anonId=Ue()),this.postEvent(M,{skuToken:this.skuToken},function(H){H||D&&(_.success[D]=!0)},f))}},l}(tr),Rn=new(function(a){function l(f){a.call(this,"appUserTurnstile"),this._customAccessToken=f}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.postTurnstileEvent=function(f,_){ar.EVENTS_URL&&ar.ACCESS_TOKEN&&Array.isArray(f)&&f.some(function(k){return xr(k)||kn(k)})&&this.queueRequest(Date.now(),_)},l.prototype.processRequests=function(f){var _=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var k=wr(ar.ACCESS_TOKEN),D=k?k.u:ar.ACCESS_TOKEN,M=D!==this.eventData.tokenU;ye(this.anonId)||(this.anonId=Ue(),M=!0);var H=this.queue.shift();if(this.eventData.lastSuccess){var X=new Date(this.eventData.lastSuccess),ie=new Date(H),ue=(H-this.eventData.lastSuccess)/864e5;M=M||ue>=1||ue<-1||X.getDate()!==ie.getDate()}else M=!0;if(!M)return this.processRequests();this.postEvent(H,{"enabled.telemetry":!1},function(ge){ge||(_.eventData.lastSuccess=H,_.eventData.tokenU=D)},f)}},l}(tr)),Si=Rn.postTurnstileEvent.bind(Rn),Ei=new tn,qe=Ei.postMapLoadEvent.bind(Ei),ze=500,mt=50;function Ft(){me.caches&&!on&&(on=me.caches.open("mapbox-tiles"))}function fr(a){var l=a.indexOf("?");return l<0?a:a.slice(0,l)}var yr,an=1/0;function Or(){return yr==null&&(yr=me.OffscreenCanvas&&new me.OffscreenCanvas(1,1).getContext("2d")&&typeof me.createImageBitmap=="function"),yr}var bn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(bn);var Pr=function(a){function l(f,_,k){_===401&&kn(k)&&(f+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),a.call(this,f),this.status=_,this.url=k,this.name=this.constructor.name,this.message=f}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},l}(Error),Yr=pr()?function(){return self.worker&&self.worker.referrer}:function(){return(me.location.protocol==="blob:"?me.parent:me).location.href},Sn,ii,Xn=function(a,l){if(!(/^file:/.test(f=a.url)||/^file:/.test(Yr())&&!/^\w+:/.test(f))){if(me.fetch&&me.Request&&me.AbortController&&me.Request.prototype.hasOwnProperty("signal"))return function(_,k){var D,M=new me.AbortController,H=new me.Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,referrer:Yr(),signal:M.signal}),X=!1,ie=!1,ue=(D=H.url).indexOf("sku=")>0&&kn(D);_.type==="json"&&H.headers.set("Accept","application/json");var ge=function(Oe,$e,Ke){if(!ie){if(Oe&&Oe.message!=="SecurityError"&&Ut(Oe),$e&&Ke)return Ae($e);var ot=Date.now();me.fetch(H).then(function(Qe){if(Qe.ok){var yt=ue?Qe.clone():null;return Ae(Qe,yt,ot)}return k(new Pr(Qe.statusText,Qe.status,_.url))}).catch(function(Qe){Qe.code!==20&&k(new Error(Qe.message))})}},Ae=function(Oe,$e,Ke){(_.type==="arrayBuffer"?Oe.arrayBuffer():_.type==="json"?Oe.json():Oe.text()).then(function(ot){ie||($e&&Ke&&function(Qe,yt,At){if(Ft(),on){var Lt={status:yt.status,statusText:yt.statusText,headers:new me.Headers};yt.headers.forEach(function(Gt,lr){return Lt.headers.set(lr,Gt)});var Nt=zr(yt.headers.get("Cache-Control")||"");Nt["no-store"]||(Nt["max-age"]&&Lt.headers.set("Expires",new Date(At+1e3*Nt["max-age"]).toUTCString()),new Date(Lt.headers.get("Expires")).getTime()-At<42e4||function(Gt,lr){if(pn===void 0)try{new Response(new ReadableStream),pn=!0}catch{pn=!1}pn?lr(Gt.body):Gt.blob().then(lr)}(yt,function(Gt){var lr=new me.Response(Gt,Lt);Ft(),on&&on.then(function(br){return br.put(fr(Qe.url),lr)}).catch(function(br){return Ut(br.message)})}))}}(H,$e,Ke),X=!0,k(null,ot,Oe.headers.get("Cache-Control"),Oe.headers.get("Expires")))}).catch(function(ot){ie||k(new Error(ot.message))})};return ue?function(Oe,$e){if(Ft(),!on)return $e(null);var Ke=fr(Oe.url);on.then(function(ot){ot.match(Ke).then(function(Qe){var yt=function(At){if(!At)return!1;var Lt=new Date(At.headers.get("Expires")||0),Nt=zr(At.headers.get("Cache-Control")||"");return Lt>Date.now()&&!Nt["no-cache"]}(Qe);ot.delete(Ke),yt&&ot.put(Ke,Qe.clone()),$e(null,Qe,yt)}).catch($e)}).catch($e)}(H,ge):ge(null,null),{cancel:function(){ie=!0,X||M.abort()}}}(a,l);if(pr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,l,void 0,!0)}var f;return function(_,k){var D=new me.XMLHttpRequest;for(var M in D.open(_.method||"GET",_.url,!0),_.type==="arrayBuffer"&&(D.responseType="arraybuffer"),_.headers)D.setRequestHeader(M,_.headers[M]);return _.type==="json"&&(D.responseType="text",D.setRequestHeader("Accept","application/json")),D.withCredentials=_.credentials==="include",D.onerror=function(){k(new Error(D.statusText))},D.onload=function(){if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){var H=D.response;if(_.type==="json")try{H=JSON.parse(D.response)}catch(X){return k(X)}k(null,H,D.getResponseHeader("Cache-Control"),D.getResponseHeader("Expires"))}else k(new Pr(D.statusText,D.status,_.url))},D.send(_.body),{cancel:function(){return D.abort()}}}(a,l)},ha=function(a,l){return Xn(Se(a,{type:"arrayBuffer"}),l)},xn=function(a,l){return Xn(Se(a,{method:"POST"}),l)},pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Sn=[],ii=0;var Ee=function(a,l){if(er.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),ii>=ar.MAX_PARALLEL_IMAGE_REQUESTS){var f={requestParameters:a,callback:l,cancelled:!1,cancel:function(){this.cancelled=!0}};return Sn.push(f),f}ii++;var _=!1,k=function(){if(!_)for(_=!0,ii--;Sn.length&&ii<ar.MAX_PARALLEL_IMAGE_REQUESTS;){var M=Sn.shift();M.cancelled||(M.cancel=Ee(M.requestParameters,M.callback).cancel)}},D=ha(a,function(M,H,X,ie){k(),M?l(M):H&&(Or()?function(ue,ge){var Ae=new me.Blob([new Uint8Array(ue)],{type:"image/png"});me.createImageBitmap(Ae).then(function(Oe){ge(null,Oe)}).catch(function(Oe){ge(new Error("Could not load image because of "+Oe.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}(H,l):function(ue,ge,Ae,Oe){var $e=new me.Image,Ke=me.URL;$e.onload=function(){ge(null,$e),Ke.revokeObjectURL($e.src),$e.onload=null,me.requestAnimationFrame(function(){$e.src=pe})},$e.onerror=function(){return ge(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var ot=new me.Blob([new Uint8Array(ue)],{type:"image/png"});$e.cacheControl=Ae,$e.expires=Oe,$e.src=ue.byteLength?Ke.createObjectURL(ot):pe}(H,l,X,ie))});return{cancel:function(){D.cancel(),k()}}};function ke(a,l,f){f[a]&&f[a].indexOf(l)!==-1||(f[a]=f[a]||[],f[a].push(l))}function oe(a,l,f){if(f&&f[a]){var _=f[a].indexOf(l);_!==-1&&f[a].splice(_,1)}}var Fe=function(a,l){l===void 0&&(l={}),Se(this,l),this.type=a},Pe=function(a){function l(f,_){_===void 0&&(_={}),a.call(this,"error",Se({error:f},_))}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Fe),_e=function(){};_e.prototype.on=function(a,l){return this._listeners=this._listeners||{},ke(a,l,this._listeners),this},_e.prototype.off=function(a,l){return oe(a,l,this._listeners),oe(a,l,this._oneTimeListeners),this},_e.prototype.once=function(a,l){return this._oneTimeListeners=this._oneTimeListeners||{},ke(a,l,this._oneTimeListeners),this},_e.prototype.fire=function(a,l){typeof a=="string"&&(a=new Fe(a,l||{}));var f=a.type;if(this.listens(f)){a.target=this;for(var _=0,k=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];_<k.length;_+=1)k[_].call(this,a);for(var D=0,M=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];D<M.length;D+=1){var H=M[D];oe(f,H,this._oneTimeListeners),H.call(this,a)}var X=this._eventedParent;X&&(Se(a,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),X.fire(a))}else a instanceof Pe&&console.error(a.error);return this},_e.prototype.listens=function(a){return this._listeners&&this._listeners[a]&&this._listeners[a].length>0||this._oneTimeListeners&&this._oneTimeListeners[a]&&this._oneTimeListeners[a].length>0||this._eventedParent&&this._eventedParent.listens(a)},_e.prototype.setEventedParent=function(a,l){return this._eventedParent=a,this._eventedParentData=l,this};var fe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ie=function(a,l,f,_){this.message=(a?a+": ":"")+f,_&&(this.identifier=_),l!=null&&l.__line__&&(this.line=l.__line__)};function nt(a){var l=a.value;return l?[new Ie(a.key,l,"constants have been deprecated as of v8")]:[]}function zt(a){for(var l=arguments,f=[],_=arguments.length-1;_-- >0;)f[_]=l[_+1];for(var k=0,D=f;k<D.length;k+=1){var M=D[k];for(var H in M)a[H]=M[H]}return a}function Vt(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function pt(a){if(Array.isArray(a))return a.map(pt);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){var l={};for(var f in a)l[f]=pt(a[f]);return l}return Vt(a)}var _t=function(a){function l(f,_){a.call(this,_),this.message=_,this.key=f}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Error),_r=function(a,l){l===void 0&&(l=[]),this.parent=a,this.bindings={};for(var f=0,_=l;f<_.length;f+=1){var k=_[f];this.bindings[k[0]]=k[1]}};_r.prototype.concat=function(a){return new _r(this,a)},_r.prototype.get=function(a){if(this.bindings[a])return this.bindings[a];if(this.parent)return this.parent.get(a);throw new Error(a+" not found in scope.")},_r.prototype.has=function(a){return!!this.bindings[a]||!!this.parent&&this.parent.has(a)};var dr={kind:"null"},Mt={kind:"number"},ce={kind:"string"},Re={kind:"boolean"},ct={kind:"color"},jt={kind:"object"},it={kind:"value"},Qt={kind:"collator"},rn={kind:"formatted"},un={kind:"resolvedImage"};function En(a,l){return{kind:"array",itemType:a,N:l}}function Mn(a){if(a.kind==="array"){var l=Mn(a.itemType);return typeof a.N=="number"?"array<"+l+", "+a.N+">":a.itemType.kind==="value"?"array":"array<"+l+">"}return a.kind}var Va=[dr,Mt,ce,Re,ct,rn,jt,En(it),un];function Nr(a,l){if(l.kind==="error")return null;if(a.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!Nr(a.itemType,l.itemType))&&(typeof a.N!="number"||a.N===l.N))return null}else{if(a.kind===l.kind)return null;if(a.kind==="value"){for(var f=0,_=Va;f<_.length;f+=1)if(!Nr(_[f],l))return null}}return"Expected "+Mn(a)+" but found "+Mn(l)+" instead."}function ko(a,l){return l.some(function(f){return f.kind===a.kind})}function yi(a,l){return l.some(function(f){return f==="null"?a===null:f==="array"?Array.isArray(a):f==="object"?a&&!Array.isArray(a)&&typeof a=="object":f===typeof a})}var Fn=K(function(a,l){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _(H){return(H=Math.round(H))<0?0:H>255?255:H}function k(H){return _(H[H.length-1]==="%"?parseFloat(H)/100*255:parseInt(H))}function D(H){return(X=H[H.length-1]==="%"?parseFloat(H)/100:parseFloat(H))<0?0:X>1?1:X;var X}function M(H,X,ie){return ie<0?ie+=1:ie>1&&(ie-=1),6*ie<1?H+(X-H)*ie*6:2*ie<1?X:3*ie<2?H+(X-H)*(2/3-ie)*6:H}try{l.parseCSSColor=function(H){var X,ie=H.replace(/ /g,"").toLowerCase();if(ie in f)return f[ie].slice();if(ie[0]==="#")return ie.length===4?(X=parseInt(ie.substr(1),16))>=0&&X<=4095?[(3840&X)>>4|(3840&X)>>8,240&X|(240&X)>>4,15&X|(15&X)<<4,1]:null:ie.length===7&&(X=parseInt(ie.substr(1),16))>=0&&X<=16777215?[(16711680&X)>>16,(65280&X)>>8,255&X,1]:null;var ue=ie.indexOf("("),ge=ie.indexOf(")");if(ue!==-1&&ge+1===ie.length){var Ae=ie.substr(0,ue),Oe=ie.substr(ue+1,ge-(ue+1)).split(","),$e=1;switch(Ae){case"rgba":if(Oe.length!==4)return null;$e=D(Oe.pop());case"rgb":return Oe.length!==3?null:[k(Oe[0]),k(Oe[1]),k(Oe[2]),$e];case"hsla":if(Oe.length!==4)return null;$e=D(Oe.pop());case"hsl":if(Oe.length!==3)return null;var Ke=(parseFloat(Oe[0])%360+360)%360/360,ot=D(Oe[1]),Qe=D(Oe[2]),yt=Qe<=.5?Qe*(ot+1):Qe+ot-Qe*ot,At=2*Qe-yt;return[_(255*M(At,yt,Ke+1/3)),_(255*M(At,yt,Ke)),_(255*M(At,yt,Ke-1/3)),$e];default:return null}}return null}}catch{}}).parseCSSColor,Vn=function(a,l,f,_){_===void 0&&(_=1),this.r=a,this.g=l,this.b=f,this.a=_};Vn.parse=function(a){if(a){if(a instanceof Vn)return a;if(typeof a=="string"){var l=Fn(a);if(l)return new Vn(l[0]/255*l[3],l[1]/255*l[3],l[2]/255*l[3],l[3])}}},Vn.prototype.toString=function(){var a=this.toArray(),l=a[1],f=a[2],_=a[3];return"rgba("+Math.round(a[0])+","+Math.round(l)+","+Math.round(f)+","+_+")"},Vn.prototype.toArray=function(){var a=this.a;return a===0?[0,0,0,0]:[255*this.r/a,255*this.g/a,255*this.b/a,a]},Vn.black=new Vn(0,0,0,1),Vn.white=new Vn(1,1,1,1),Vn.transparent=new Vn(0,0,0,0),Vn.red=new Vn(1,0,0,1);var is=function(a,l,f){this.sensitivity=a?l?"variant":"case":l?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};is.prototype.compare=function(a,l){return this.collator.compare(a,l)},is.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var xc=function(a,l,f,_,k){this.text=a,this.image=l,this.scale=f,this.fontStack=_,this.textColor=k},bo=function(a){this.sections=a};bo.fromString=function(a){return new bo([new xc(a,null,null,null,null)])},bo.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some(function(a){return a.text.length!==0||a.image&&a.image.name.length!==0})},bo.factory=function(a){return a instanceof bo?a:bo.fromString(a)},bo.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(a){return a.text}).join("")},bo.prototype.serialize=function(){for(var a=["format"],l=0,f=this.sections;l<f.length;l+=1){var _=f[l];if(_.image)a.push(["image",_.image.name]);else{a.push(_.text);var k={};_.fontStack&&(k["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(k["font-scale"]=_.scale),_.textColor&&(k["text-color"]=["rgba"].concat(_.textColor.toArray())),a.push(k)}}return a};var Go=function(a){this.name=a.name,this.available=a.available};function Qh(a,l,f,_){return typeof a=="number"&&a>=0&&a<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:"Invalid rgba value ["+[a,l,f,_].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof _=="number"?[a,l,f,_]:[a,l,f]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function wc(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Vn||a instanceof is||a instanceof bo||a instanceof Go)return!0;if(Array.isArray(a)){for(var l=0,f=a;l<f.length;l+=1)if(!wc(f[l]))return!1;return!0}if(typeof a=="object"){for(var _ in a)if(!wc(a[_]))return!1;return!0}return!1}function Co(a){if(a===null)return dr;if(typeof a=="string")return ce;if(typeof a=="boolean")return Re;if(typeof a=="number")return Mt;if(a instanceof Vn)return ct;if(a instanceof is)return Qt;if(a instanceof bo)return rn;if(a instanceof Go)return un;if(Array.isArray(a)){for(var l,f=a.length,_=0,k=a;_<k.length;_+=1){var D=Co(k[_]);if(l){if(l===D)continue;l=it;break}l=D}return En(l||it,f)}return jt}function nf(a){var l=typeof a;return a===null?"":l==="string"||l==="number"||l==="boolean"?String(a):a instanceof Vn||a instanceof bo||a instanceof Go?a.toString():JSON.stringify(a)}Go.prototype.toString=function(){return this.name},Go.fromString=function(a){return a?new Go({name:a,available:!1}):null},Go.prototype.serialize=function(){return["image",this.name]};var Ha=function(a,l){this.type=a,this.value=l};Ha.parse=function(a,l){if(a.length!==2)return l.error("'literal' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(!wc(a[1]))return l.error("invalid value");var f=a[1],_=Co(f),k=l.expectedType;return _.kind!=="array"||_.N!==0||!k||k.kind!=="array"||typeof k.N=="number"&&k.N!==0||(_=k),new Ha(_,f)},Ha.prototype.evaluate=function(){return this.value},Ha.prototype.eachChild=function(){},Ha.prototype.outputDefined=function(){return!0},Ha.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Vn?["rgba"].concat(this.value.toArray()):this.value instanceof bo?this.value.serialize():this.value};var ta=function(a){this.name="ExpressionEvaluationError",this.message=a};ta.prototype.toJSON=function(){return this.message};var ol={string:ce,number:Mt,boolean:Re,object:jt},oo=function(a,l){this.type=a,this.args=l};oo.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var f,_=1,k=a[0];if(k==="array"){var D,M;if(a.length>2){var H=a[1];if(typeof H!="string"||!(H in ol)||H==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);D=ol[H],_++}else D=it;if(a.length>3){if(a[2]!==null&&(typeof a[2]!="number"||a[2]<0||a[2]!==Math.floor(a[2])))return l.error('The length argument to "array" must be a positive integer literal',2);M=a[2],_++}f=En(D,M)}else f=ol[k];for(var X=[];_<a.length;_++){var ie=l.parse(a[_],_,it);if(!ie)return null;X.push(ie)}return new oo(f,X)},oo.prototype.evaluate=function(a){for(var l=0;l<this.args.length;l++){var f=this.args[l].evaluate(a);if(!Nr(this.type,Co(f)))return f;if(l===this.args.length-1)throw new ta("Expected value to be of type "+Mn(this.type)+", but found "+Mn(Co(f))+" instead.")}return null},oo.prototype.eachChild=function(a){this.args.forEach(a)},oo.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},oo.prototype.serialize=function(){var a=this.type,l=[a.kind];if(a.kind==="array"){var f=a.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){l.push(f.kind);var _=a.N;(typeof _=="number"||this.args.length>1)&&l.push(_)}}return l.concat(this.args.map(function(k){return k.serialize()}))};var Il=function(a){this.type=rn,this.sections=a};Il.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var f=a[1];if(!Array.isArray(f)&&typeof f=="object")return l.error("First argument must be an image or text section.");for(var _=[],k=!1,D=1;D<=a.length-1;++D){var M=a[D];if(k&&typeof M=="object"&&!Array.isArray(M)){k=!1;var H=null;if(M["font-scale"]&&!(H=l.parse(M["font-scale"],1,Mt)))return null;var X=null;if(M["text-font"]&&!(X=l.parse(M["text-font"],1,En(ce))))return null;var ie=null;if(M["text-color"]&&!(ie=l.parse(M["text-color"],1,ct)))return null;var ue=_[_.length-1];ue.scale=H,ue.font=X,ue.textColor=ie}else{var ge=l.parse(a[D],1,it);if(!ge)return null;var Ae=ge.type.kind;if(Ae!=="string"&&Ae!=="value"&&Ae!=="null"&&Ae!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");k=!0,_.push({content:ge,scale:null,font:null,textColor:null})}}return new Il(_)},Il.prototype.evaluate=function(a){return new bo(this.sections.map(function(l){var f=l.content.evaluate(a);return Co(f)===un?new xc("",f,null,null,null):new xc(nf(f),null,l.scale?l.scale.evaluate(a):null,l.font?l.font.evaluate(a).join(","):null,l.textColor?l.textColor.evaluate(a):null)}))},Il.prototype.eachChild=function(a){for(var l=0,f=this.sections;l<f.length;l+=1){var _=f[l];a(_.content),_.scale&&a(_.scale),_.font&&a(_.font),_.textColor&&a(_.textColor)}},Il.prototype.outputDefined=function(){return!1},Il.prototype.serialize=function(){for(var a=["format"],l=0,f=this.sections;l<f.length;l+=1){var _=f[l];a.push(_.content.serialize());var k={};_.scale&&(k["font-scale"]=_.scale.serialize()),_.font&&(k["text-font"]=_.font.serialize()),_.textColor&&(k["text-color"]=_.textColor.serialize()),a.push(k)}return a};var ra=function(a){this.type=un,this.input=a};ra.parse=function(a,l){if(a.length!==2)return l.error("Expected two arguments.");var f=l.parse(a[1],1,ce);return f?new ra(f):l.error("No image name provided.")},ra.prototype.evaluate=function(a){var l=this.input.evaluate(a),f=Go.fromString(l);return f&&a.availableImages&&(f.available=a.availableImages.indexOf(l)>-1),f},ra.prototype.eachChild=function(a){a(this.input)},ra.prototype.outputDefined=function(){return!1},ra.prototype.serialize=function(){return["image",this.input.serialize()]};var om={"to-boolean":Re,"to-color":ct,"to-number":Mt,"to-string":ce},Dl=function(a,l){this.type=a,this.args=l};Dl.parse=function(a,l){if(a.length<2)return l.error("Expected at least one argument.");var f=a[0];if((f==="to-boolean"||f==="to-string")&&a.length!==2)return l.error("Expected one argument.");for(var _=om[f],k=[],D=1;D<a.length;D++){var M=l.parse(a[D],D,it);if(!M)return null;k.push(M)}return new Dl(_,k)},Dl.prototype.evaluate=function(a){if(this.type.kind==="boolean")return!!this.args[0].evaluate(a);if(this.type.kind==="color"){for(var l,f,_=0,k=this.args;_<k.length;_+=1){if(f=null,(l=k[_].evaluate(a))instanceof Vn)return l;if(typeof l=="string"){var D=a.parseColor(l);if(D)return D}else if(Array.isArray(l)&&!(f=l.length<3||l.length>4?"Invalid rbga value "+JSON.stringify(l)+": expected an array containing either three or four numeric values.":Qh(l[0],l[1],l[2],l[3])))return new Vn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new ta(f||"Could not parse color from value '"+(typeof l=="string"?l:String(JSON.stringify(l)))+"'")}if(this.type.kind==="number"){for(var M=null,H=0,X=this.args;H<X.length;H+=1){if((M=X[H].evaluate(a))===null)return 0;var ie=Number(M);if(!isNaN(ie))return ie}throw new ta("Could not convert "+JSON.stringify(M)+" to number.")}return this.type.kind==="formatted"?bo.fromString(nf(this.args[0].evaluate(a))):this.type.kind==="resolvedImage"?Go.fromString(nf(this.args[0].evaluate(a))):nf(this.args[0].evaluate(a))},Dl.prototype.eachChild=function(a){this.args.forEach(a)},Dl.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},Dl.prototype.serialize=function(){if(this.type.kind==="formatted")return new Il([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ra(this.args[0]).serialize();var a=["to-"+this.type.kind];return this.eachChild(function(l){a.push(l.serialize())}),a};var Jd=["Unknown","Point","LineString","Polygon"],al=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};al.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},al.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Jd[this.feature.type]:this.feature.type:null},al.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},al.prototype.canonicalID=function(){return this.canonical},al.prototype.properties=function(){return this.feature&&this.feature.properties||{}},al.prototype.parseColor=function(a){var l=this._parseColorCache[a];return l||(l=this._parseColorCache[a]=Vn.parse(a)),l};var Wa=function(a,l,f,_){this.name=a,this.type=l,this._evaluate=f,this.args=_};Wa.prototype.evaluate=function(a){return this._evaluate(a,this.args)},Wa.prototype.eachChild=function(a){this.args.forEach(a)},Wa.prototype.outputDefined=function(){return!1},Wa.prototype.serialize=function(){return[this.name].concat(this.args.map(function(a){return a.serialize()}))},Wa.parse=function(a,l){var f,_=a[0],k=Wa.definitions[_];if(!k)return l.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0);for(var D=Array.isArray(k)?k[0]:k.type,M=Array.isArray(k)?[[k[1],k[2]]]:k.overloads,H=M.filter(function(Xr){var Dr=Xr[0];return!Array.isArray(Dr)||Dr.length===a.length-1}),X=null,ie=0,ue=H;ie<ue.length;ie+=1){var ge=ue[ie],Ae=ge[0],Oe=ge[1];X=new fo(l.registry,l.path,null,l.scope);for(var $e=[],Ke=!1,ot=1;ot<a.length;ot++){var Qe=a[ot],yt=Array.isArray(Ae)?Ae[ot-1]:Ae.type,At=X.parse(Qe,1+$e.length,yt);if(!At){Ke=!0;break}$e.push(At)}if(!Ke)if(Array.isArray(Ae)&&Ae.length!==$e.length)X.error("Expected "+Ae.length+" arguments, but found "+$e.length+" instead.");else{for(var Lt=0;Lt<$e.length;Lt++){var Nt=Array.isArray(Ae)?Ae[Lt]:Ae.type,Gt=$e[Lt];X.concat(Lt+1).checkSubtype(Nt,Gt.type)}if(X.errors.length===0)return new Wa(_,D,Oe,$e)}}if(H.length===1)(f=l.errors).push.apply(f,X.errors);else{for(var lr=(H.length?H:M).map(function(Xr){var Dr;return Dr=Xr[0],Array.isArray(Dr)?"("+Dr.map(Mn).join(", ")+")":"("+Mn(Dr.type)+"...)"}).join(" | "),br=[],$r=1;$r<a.length;$r++){var Ar=l.parse(a[$r],1+br.length);if(!Ar)return null;br.push(Mn(Ar.type))}l.error("Expected arguments of type "+lr+", but found ("+br.join(", ")+") instead.")}return null},Wa.register=function(a,l){for(var f in Wa.definitions=l,l)a[f]=Wa};var Ol=function(a,l,f){this.type=Qt,this.locale=f,this.caseSensitive=a,this.diacriticSensitive=l};function xs(a,l){a[0]=Math.min(a[0],l[0]),a[1]=Math.min(a[1],l[1]),a[2]=Math.max(a[2],l[0]),a[3]=Math.max(a[3],l[1])}function of(a,l){return!(a[0]<=l[0]||a[2]>=l[2]||a[1]<=l[1]||a[3]>=l[3])}function am(a,l){var f=(180+a[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,k=Math.pow(2,l.z);return[Math.round(f*k*8192),Math.round(_*k*8192)]}function Ig(a,l,f){return l[1]>a[1]!=f[1]>a[1]&&a[0]<(f[0]-l[0])*(a[1]-l[1])/(f[1]-l[1])+l[0]}function sm(a,l){for(var f,_,k,D,M,H,X,ie=!1,ue=0,ge=l.length;ue<ge;ue++)for(var Ae=l[ue],Oe=0,$e=Ae.length;Oe<$e-1;Oe++){if((D=(f=a)[0]-(_=Ae[Oe])[0])*(X=f[1]-(k=Ae[Oe+1])[1])-(H=f[0]-k[0])*(M=f[1]-_[1])==0&&D*H<=0&&M*X<=0)return!1;Ig(a,Ae[Oe],Ae[Oe+1])&&(ie=!ie)}return ie}function co(a,l){for(var f=0;f<l.length;f++)if(sm(a,l[f]))return!0;return!1}function Ji(a,l,f,_){var k=_[0]-f[0],D=_[1]-f[1],M=(a[0]-f[0])*D-k*(a[1]-f[1]),H=(l[0]-f[0])*D-k*(l[1]-f[1]);return M>0&&H<0||M<0&&H>0}function Qd(a,l,f){for(var _=0,k=f;_<k.length;_+=1)for(var D=k[_],M=0;M<D.length-1;++M)if((ge=[(ue=D[M+1])[0]-(ie=D[M])[0],ue[1]-ie[1]])[0]*(Ae=[(X=l)[0]-(H=a)[0],X[1]-H[1]])[1]-ge[1]*Ae[0]!=0&&Ji(H,X,ie,ue)&&Ji(ie,ue,H,X))return!0;var H,X,ie,ue,ge,Ae;return!1}function ed(a,l){for(var f=0;f<a.length;++f)if(!sm(a[f],l))return!1;for(var _=0;_<a.length-1;++_)if(Qd(a[_],a[_+1],l))return!1;return!0}function ep(a,l){for(var f=0;f<l.length;f++)if(ed(a,l[f]))return!0;return!1}function af(a,l,f){for(var _=[],k=0;k<a.length;k++){for(var D=[],M=0;M<a[k].length;M++){var H=am(a[k][M],f);xs(l,H),D.push(H)}_.push(D)}return _}function tp(a,l,f){for(var _=[],k=0;k<a.length;k++){var D=af(a[k],l,f);_.push(D)}return _}function Sc(a,l,f,_){if(a[0]<f[0]||a[0]>f[2]){var k=.5*_,D=a[0]-f[0]>k?-_:f[0]-a[0]>k?_:0;D===0&&(D=a[0]-f[2]>k?-_:f[2]-a[0]>k?_:0),a[0]+=D}xs(l,a)}function lm(a,l,f,_){for(var k=8192*Math.pow(2,_.z),D=[8192*_.x,8192*_.y],M=[],H=0,X=a;H<X.length;H+=1)for(var ie=0,ue=X[H];ie<ue.length;ie+=1){var ge=ue[ie],Ae=[ge.x+D[0],ge.y+D[1]];Sc(Ae,l,f,k),M.push(Ae)}return M}function td(a,l,f,_){for(var k,D=8192*Math.pow(2,_.z),M=[8192*_.x,8192*_.y],H=[],X=0,ie=a;X<ie.length;X+=1){for(var ue=[],ge=0,Ae=ie[X];ge<Ae.length;ge+=1){var Oe=Ae[ge],$e=[Oe.x+M[0],Oe.y+M[1]];xs(l,$e),ue.push($e)}H.push(ue)}if(l[2]-l[0]<=D/2){(k=l)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(var Ke=0,ot=H;Ke<ot.length;Ke+=1)for(var Qe=0,yt=ot[Ke];Qe<yt.length;Qe+=1)Sc(yt[Qe],l,f,D)}return H}Ol.parse=function(a,l){if(a.length!==2)return l.error("Expected one argument.");var f=a[1];if(typeof f!="object"||Array.isArray(f))return l.error("Collator options argument must be an object.");var _=l.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,Re);if(!_)return null;var k=l.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,Re);if(!k)return null;var D=null;return f.locale&&!(D=l.parse(f.locale,1,ce))?null:new Ol(_,k,D)},Ol.prototype.evaluate=function(a){return new is(this.caseSensitive.evaluate(a),this.diacriticSensitive.evaluate(a),this.locale?this.locale.evaluate(a):null)},Ol.prototype.eachChild=function(a){a(this.caseSensitive),a(this.diacriticSensitive),this.locale&&a(this.locale)},Ol.prototype.outputDefined=function(){return!1},Ol.prototype.serialize=function(){var a={};return a["case-sensitive"]=this.caseSensitive.serialize(),a["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(a.locale=this.locale.serialize()),["collator",a]};var ei=function(a,l){this.type=Re,this.geojson=a,this.geometries=l};function mu(a){if(a instanceof Wa&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ei)return!1;var l=!0;return a.eachChild(function(f){l&&!mu(f)&&(l=!1)}),l}function Ws(a){if(a instanceof Wa&&a.name==="feature-state")return!1;var l=!0;return a.eachChild(function(f){l&&!Ws(f)&&(l=!1)}),l}function gu(a,l){if(a instanceof Wa&&l.indexOf(a.name)>=0)return!1;var f=!0;return a.eachChild(function(_){f&&!gu(_,l)&&(f=!1)}),f}ei.parse=function(a,l){if(a.length!==2)return l.error("'within' expression requires exactly one argument, but found "+(a.length-1)+" instead.");if(wc(a[1])){var f=a[1];if(f.type==="FeatureCollection")for(var _=0;_<f.features.length;++_){var k=f.features[_].geometry.type;if(k==="Polygon"||k==="MultiPolygon")return new ei(f,f.features[_].geometry)}else if(f.type==="Feature"){var D=f.geometry.type;if(D==="Polygon"||D==="MultiPolygon")return new ei(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ei(f,f)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ei.prototype.evaluate=function(a){if(a.geometry()!=null&&a.canonicalID()!=null){if(a.geometryType()==="Point")return function(l,f){var _=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=l.canonicalID();if(f.type==="Polygon"){var M=af(f.coordinates,k,D),H=lm(l.geometry(),_,k,D);if(!of(_,k))return!1;for(var X=0,ie=H;X<ie.length;X+=1)if(!sm(ie[X],M))return!1}if(f.type==="MultiPolygon"){var ue=tp(f.coordinates,k,D),ge=lm(l.geometry(),_,k,D);if(!of(_,k))return!1;for(var Ae=0,Oe=ge;Ae<Oe.length;Ae+=1)if(!co(Oe[Ae],ue))return!1}return!0}(a,this.geometries);if(a.geometryType()==="LineString")return function(l,f){var _=[1/0,1/0,-1/0,-1/0],k=[1/0,1/0,-1/0,-1/0],D=l.canonicalID();if(f.type==="Polygon"){var M=af(f.coordinates,k,D),H=td(l.geometry(),_,k,D);if(!of(_,k))return!1;for(var X=0,ie=H;X<ie.length;X+=1)if(!ed(ie[X],M))return!1}if(f.type==="MultiPolygon"){var ue=tp(f.coordinates,k,D),ge=td(l.geometry(),_,k,D);if(!of(_,k))return!1;for(var Ae=0,Oe=ge;Ae<Oe.length;Ae+=1)if(!ep(Oe[Ae],ue))return!1}return!0}(a,this.geometries)}return!1},ei.prototype.eachChild=function(){},ei.prototype.outputDefined=function(){return!0},ei.prototype.serialize=function(){return["within",this.geojson]};var Kl=function(a,l){this.type=l.type,this.name=a,this.boundExpression=l};Kl.parse=function(a,l){if(a.length!==2||typeof a[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");var f=a[1];return l.scope.has(f)?new Kl(f,l.scope.get(f)):l.error('Unknown variable "'+f+'". Make sure "'+f+'" has been bound in an enclosing "let" expression before using it.',1)},Kl.prototype.evaluate=function(a){return this.boundExpression.evaluate(a)},Kl.prototype.eachChild=function(){},Kl.prototype.outputDefined=function(){return!1},Kl.prototype.serialize=function(){return["var",this.name]};var fo=function(a,l,f,_,k){l===void 0&&(l=[]),_===void 0&&(_=new _r),k===void 0&&(k=[]),this.registry=a,this.path=l,this.key=l.map(function(D){return"["+D+"]"}).join(""),this.scope=_,this.errors=k,this.expectedType=f};function sf(a,l){for(var f,_=a.length-1,k=0,D=_,M=0;k<=D;)if((f=a[M=Math.floor((k+D)/2)])<=l){if(M===_||l<a[M+1])return M;k=M+1}else{if(!(f>l))throw new ta("Input is not a number.");D=M-1}return 0}fo.prototype.parse=function(a,l,f,_,k){return k===void 0&&(k={}),l?this.concat(l,f,_)._parse(a,k):this._parse(a,k)},fo.prototype._parse=function(a,l){function f(ie,ue,ge){return ge==="assert"?new oo(ue,[ie]):ge==="coerce"?new Dl(ue,[ie]):ie}if(a!==null&&typeof a!="string"&&typeof a!="boolean"&&typeof a!="number"||(a=["literal",a]),Array.isArray(a)){if(a.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var _=a[0];if(typeof _!="string")return this.error("Expression name must be a string, but found "+typeof _+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var k=this.registry[_];if(k){var D=k.parse(a,this);if(!D)return null;if(this.expectedType){var M=this.expectedType,H=D.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||H.kind!=="value")if(M.kind!=="color"&&M.kind!=="formatted"&&M.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string"){if(this.checkSubtype(M,H))return null}else D=f(D,M,l.typeAnnotation||"coerce");else D=f(D,M,l.typeAnnotation||"assert")}if(!(D instanceof Ha)&&D.type.kind!=="resolvedImage"&&function ie(ue){if(ue instanceof Kl)return ie(ue.boundExpression);if(ue instanceof Wa&&ue.name==="error"||ue instanceof Ol||ue instanceof ei)return!1;var ge=ue instanceof Dl||ue instanceof oo,Ae=!0;return ue.eachChild(function(Oe){Ae=ge?Ae&&ie(Oe):Ae&&Oe instanceof Ha}),!!Ae&&mu(ue)&&gu(ue,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(D)){var X=new al;try{D=new Ha(D.type,D.evaluate(X))}catch(ie){return this.error(ie.message),null}}return D}return this.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(a===void 0?"'undefined' value invalid. Use null instead.":typeof a=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof a+" instead.")},fo.prototype.concat=function(a,l,f){var _=typeof a=="number"?this.path.concat(a):this.path,k=f?this.scope.concat(f):this.scope;return new fo(this.registry,_,l||null,k,this.errors)},fo.prototype.error=function(a){for(var l=arguments,f=[],_=arguments.length-1;_-- >0;)f[_]=l[_+1];var k=""+this.key+f.map(function(D){return"["+D+"]"}).join("");this.errors.push(new _t(k,a))},fo.prototype.checkSubtype=function(a,l){var f=Nr(a,l);return f&&this.error(f),f};var Fo=function(a,l,f){this.type=a,this.input=l,this.labels=[],this.outputs=[];for(var _=0,k=f;_<k.length;_+=1){var D=k[_],M=D[1];this.labels.push(D[0]),this.outputs.push(M)}};function ho(a,l,f){return a*(1-f)+l*f}Fo.parse=function(a,l){if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");var f=l.parse(a[1],1,Mt);if(!f)return null;var _=[],k=null;l.expectedType&&l.expectedType.kind!=="value"&&(k=l.expectedType);for(var D=1;D<a.length;D+=2){var M=D===1?-1/0:a[D],H=a[D+1],X=D,ie=D+1;if(typeof M!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(_.length&&_[_.length-1][0]>=M)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);var ue=l.parse(H,ie,k);if(!ue)return null;k=k||ue.type,_.push([M,ue])}return new Fo(k,f,_)},Fo.prototype.evaluate=function(a){var l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(a);var _=this.input.evaluate(a);if(_<=l[0])return f[0].evaluate(a);var k=l.length;return _>=l[k-1]?f[k-1].evaluate(a):f[sf(l,_)].evaluate(a)},Fo.prototype.eachChild=function(a){a(this.input);for(var l=0,f=this.outputs;l<f.length;l+=1)a(f[l])},Fo.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Fo.prototype.serialize=function(){for(var a=["step",this.input.serialize()],l=0;l<this.labels.length;l++)l>0&&a.push(this.labels[l]),a.push(this.outputs[l].serialize());return a};var Vu=Object.freeze({__proto__:null,number:ho,color:function(a,l,f){return new Vn(ho(a.r,l.r,f),ho(a.g,l.g,f),ho(a.b,l.b,f),ho(a.a,l.a,f))},array:function(a,l,f){return a.map(function(_,k){return ho(_,l[k],f)})}}),Ec=6/29*3*(6/29),Dg=Math.PI/180,sl=180/Math.PI;function um(a){return a>.008856451679035631?Math.pow(a,1/3):a/Ec+4/29}function $s(a){return a>6/29?a*a*a:Ec*(a-4/29)}function rp(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function rd(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Hu(a){var l=rd(a.r),f=rd(a.g),_=rd(a.b),k=um((.4124564*l+.3575761*f+.1804375*_)/.95047),D=um((.2126729*l+.7151522*f+.072175*_)/1);return{l:116*D-16,a:500*(k-D),b:200*(D-um((.0193339*l+.119192*f+.9503041*_)/1.08883)),alpha:a.a}}function nd(a){var l=(a.l+16)/116,f=isNaN(a.a)?l:l+a.a/500,_=isNaN(a.b)?l:l-a.b/200;return l=1*$s(l),f=.95047*$s(f),_=1.08883*$s(_),new Vn(rp(3.2404542*f-1.5371385*l-.4985314*_),rp(-.969266*f+1.8760108*l+.041556*_),rp(.0556434*f-.2040259*l+1.0572252*_),a.alpha)}function cm(a,l,f){var _=l-a;return a+f*(_>180||_<-180?_-360*Math.round(_/360):_)}var Qi={forward:Hu,reverse:nd,interpolate:function(a,l,f){return{l:ho(a.l,l.l,f),a:ho(a.a,l.a,f),b:ho(a.b,l.b,f),alpha:ho(a.alpha,l.alpha,f)}}},ll={forward:function(a){var l=Hu(a),f=l.l,_=l.a,k=l.b,D=Math.atan2(k,_)*sl;return{h:D<0?D+360:D,c:Math.sqrt(_*_+k*k),l:f,alpha:a.a}},reverse:function(a){var l=a.h*Dg,f=a.c;return nd({l:a.l,a:Math.cos(l)*f,b:Math.sin(l)*f,alpha:a.alpha})},interpolate:function(a,l,f){return{h:cm(a.h,l.h,f),c:ho(a.c,l.c,f),l:ho(a.l,l.l,f),alpha:ho(a.alpha,l.alpha,f)}}},np=Object.freeze({__proto__:null,lab:Qi,hcl:ll}),Ma=function(a,l,f,_,k){this.type=a,this.operator=l,this.interpolation=f,this.input=_,this.labels=[],this.outputs=[];for(var D=0,M=k;D<M.length;D+=1){var H=M[D],X=H[1];this.labels.push(H[0]),this.outputs.push(X)}};function Tc(a,l,f,_){var k=_-f,D=a-f;return k===0?0:l===1?D/k:(Math.pow(l,D)-1)/(Math.pow(l,k)-1)}Ma.interpolationFactor=function(a,l,f,_){var k=0;if(a.name==="exponential")k=Tc(l,a.base,f,_);else if(a.name==="linear")k=Tc(l,1,f,_);else if(a.name==="cubic-bezier"){var D=a.controlPoints;k=new j(D[0],D[1],D[2],D[3]).solve(Tc(l,1,f,_))}return k},Ma.parse=function(a,l){var f=a[0],_=a[1],k=a[2],D=a.slice(3);if(!Array.isArray(_)||_.length===0)return l.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){var M=_[1];if(typeof M!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:M}}else{if(_[0]!=="cubic-bezier")return l.error("Unknown interpolation type "+String(_[0]),1,0);var H=_.slice(1);if(H.length!==4||H.some(function(ot){return typeof ot!="number"||ot<0||ot>1}))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:H}}if(a.length-1<4)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if((a.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(!(k=l.parse(k,2,Mt)))return null;var X=[],ie=null;f==="interpolate-hcl"||f==="interpolate-lab"?ie=ct:l.expectedType&&l.expectedType.kind!=="value"&&(ie=l.expectedType);for(var ue=0;ue<D.length;ue+=2){var ge=D[ue],Ae=D[ue+1],Oe=ue+3,$e=ue+4;if(typeof ge!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Oe);if(X.length&&X[X.length-1][0]>=ge)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Oe);var Ke=l.parse(Ae,$e,ie);if(!Ke)return null;ie=ie||Ke.type,X.push([ge,Ke])}return ie.kind==="number"||ie.kind==="color"||ie.kind==="array"&&ie.itemType.kind==="number"&&typeof ie.N=="number"?new Ma(ie,f,_,k,X):l.error("Type "+Mn(ie)+" is not interpolatable.")},Ma.prototype.evaluate=function(a){var l=this.labels,f=this.outputs;if(l.length===1)return f[0].evaluate(a);var _=this.input.evaluate(a);if(_<=l[0])return f[0].evaluate(a);var k=l.length;if(_>=l[k-1])return f[k-1].evaluate(a);var D=sf(l,_),M=Ma.interpolationFactor(this.interpolation,_,l[D],l[D+1]),H=f[D].evaluate(a),X=f[D+1].evaluate(a);return this.operator==="interpolate"?Vu[this.type.kind.toLowerCase()](H,X,M):this.operator==="interpolate-hcl"?ll.reverse(ll.interpolate(ll.forward(H),ll.forward(X),M)):Qi.reverse(Qi.interpolate(Qi.forward(H),Qi.forward(X),M))},Ma.prototype.eachChild=function(a){a(this.input);for(var l=0,f=this.outputs;l<f.length;l+=1)a(f[l])},Ma.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})},Ma.prototype.serialize=function(){var a;a=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var l=[this.operator,a,this.input.serialize()],f=0;f<this.labels.length;f++)l.push(this.labels[f],this.outputs[f].serialize());return l};var ul=function(a,l){this.type=a,this.args=l};ul.parse=function(a,l){if(a.length<2)return l.error("Expectected at least one argument.");var f=null,_=l.expectedType;_&&_.kind!=="value"&&(f=_);for(var k=[],D=0,M=a.slice(1);D<M.length;D+=1){var H=l.parse(M[D],1+k.length,f,void 0,{typeAnnotation:"omit"});if(!H)return null;f=f||H.type,k.push(H)}var X=_&&k.some(function(ie){return Nr(_,ie.type)});return new ul(X?it:f,k)},ul.prototype.evaluate=function(a){for(var l,f=null,_=0,k=0,D=this.args;k<D.length&&(_++,(f=D[k].evaluate(a))&&f instanceof Go&&!f.available&&(l||(l=f.name),f=null,_===this.args.length&&(f=l)),f===null);k+=1);return f},ul.prototype.eachChild=function(a){this.args.forEach(a)},ul.prototype.outputDefined=function(){return this.args.every(function(a){return a.outputDefined()})},ul.prototype.serialize=function(){var a=["coalesce"];return this.eachChild(function(l){a.push(l.serialize())}),a};var Ac=function(a,l){this.type=l.type,this.bindings=[].concat(a),this.result=l};Ac.prototype.evaluate=function(a){return this.result.evaluate(a)},Ac.prototype.eachChild=function(a){for(var l=0,f=this.bindings;l<f.length;l+=1)a(f[l][1]);a(this.result)},Ac.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found "+(a.length-1)+" instead.");for(var f=[],_=1;_<a.length-1;_+=2){var k=a[_];if(typeof k!="string")return l.error("Expected string, but found "+typeof k+" instead.",_);if(/[^a-zA-Z0-9_]/.test(k))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);var D=l.parse(a[_+1],_+1);if(!D)return null;f.push([k,D])}var M=l.parse(a[a.length-1],a.length-1,l.expectedType,f);return M?new Ac(f,M):null},Ac.prototype.outputDefined=function(){return this.result.outputDefined()},Ac.prototype.serialize=function(){for(var a=["let"],l=0,f=this.bindings;l<f.length;l+=1){var _=f[l];a.push(_[0],_[1].serialize())}return a.push(this.result.serialize()),a};var lf=function(a,l,f){this.type=a,this.index=l,this.input=f};lf.parse=function(a,l){if(a.length!==3)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var f=l.parse(a[1],1,Mt),_=l.parse(a[2],2,En(l.expectedType||it));return f&&_?new lf(_.type.itemType,f,_):null},lf.prototype.evaluate=function(a){var l=this.index.evaluate(a),f=this.input.evaluate(a);if(l<0)throw new ta("Array index out of bounds: "+l+" < 0.");if(l>=f.length)throw new ta("Array index out of bounds: "+l+" > "+(f.length-1)+".");if(l!==Math.floor(l))throw new ta("Array index must be an integer, but found "+l+" instead.");return f[l]},lf.prototype.eachChild=function(a){a(this.index),a(this.input)},lf.prototype.outputDefined=function(){return!1},lf.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var kc=function(a,l){this.type=Re,this.needle=a,this.haystack=l};kc.parse=function(a,l){if(a.length!==3)return l.error("Expected 2 arguments, but found "+(a.length-1)+" instead.");var f=l.parse(a[1],1,it),_=l.parse(a[2],2,it);return f&&_?ko(f.type,[Re,ce,Mt,dr,it])?new kc(f,_):l.error("Expected first argument to be of type boolean, string, number or null, but found "+Mn(f.type)+" instead"):null},kc.prototype.evaluate=function(a){var l=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!f)return!1;if(!yi(l,["boolean","string","number","null"]))throw new ta("Expected first argument to be of type boolean, string, number or null, but found "+Mn(Co(l))+" instead.");if(!yi(f,["string","array"]))throw new ta("Expected second argument to be of type array or string, but found "+Mn(Co(f))+" instead.");return f.indexOf(l)>=0},kc.prototype.eachChild=function(a){a(this.needle),a(this.haystack)},kc.prototype.outputDefined=function(){return!0},kc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ls=function(a,l,f){this.type=Mt,this.needle=a,this.haystack=l,this.fromIndex=f};Ls.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var f=l.parse(a[1],1,it),_=l.parse(a[2],2,it);if(!f||!_)return null;if(!ko(f.type,[Re,ce,Mt,dr,it]))return l.error("Expected first argument to be of type boolean, string, number or null, but found "+Mn(f.type)+" instead");if(a.length===4){var k=l.parse(a[3],3,Mt);return k?new Ls(f,_,k):null}return new Ls(f,_)},Ls.prototype.evaluate=function(a){var l=this.needle.evaluate(a),f=this.haystack.evaluate(a);if(!yi(l,["boolean","string","number","null"]))throw new ta("Expected first argument to be of type boolean, string, number or null, but found "+Mn(Co(l))+" instead.");if(!yi(f,["string","array"]))throw new ta("Expected second argument to be of type array or string, but found "+Mn(Co(f))+" instead.");if(this.fromIndex){var _=this.fromIndex.evaluate(a);return f.indexOf(l,_)}return f.indexOf(l)},Ls.prototype.eachChild=function(a){a(this.needle),a(this.haystack),this.fromIndex&&a(this.fromIndex)},Ls.prototype.outputDefined=function(){return!1},Ls.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var a=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),a]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var zi=function(a,l,f,_,k,D){this.inputType=a,this.type=l,this.input=f,this.cases=_,this.outputs=k,this.otherwise=D};zi.parse=function(a,l){if(a.length<5)return l.error("Expected at least 4 arguments, but found only "+(a.length-1)+".");if(a.length%2!=1)return l.error("Expected an even number of arguments.");var f,_;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(var k={},D=[],M=2;M<a.length-1;M+=2){var H=a[M],X=a[M+1];Array.isArray(H)||(H=[H]);var ie=l.concat(M);if(H.length===0)return ie.error("Expected at least one branch label.");for(var ue=0,ge=H;ue<ge.length;ue+=1){var Ae=ge[ue];if(typeof Ae!="number"&&typeof Ae!="string")return ie.error("Branch labels must be numbers or strings.");if(typeof Ae=="number"&&Math.abs(Ae)>Number.MAX_SAFE_INTEGER)return ie.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ae=="number"&&Math.floor(Ae)!==Ae)return ie.error("Numeric branch labels must be integer values.");if(f){if(ie.checkSubtype(f,Co(Ae)))return null}else f=Co(Ae);if(k[String(Ae)]!==void 0)return ie.error("Branch labels must be unique.");k[String(Ae)]=D.length}var Oe=l.parse(X,M,_);if(!Oe)return null;_=_||Oe.type,D.push(Oe)}var $e=l.parse(a[1],1,it);if(!$e)return null;var Ke=l.parse(a[a.length-1],a.length-1,_);return Ke?$e.type.kind!=="value"&&l.concat(1).checkSubtype(f,$e.type)?null:new zi(f,_,$e,k,D,Ke):null},zi.prototype.evaluate=function(a){var l=this.input.evaluate(a);return(Co(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(a)},zi.prototype.eachChild=function(a){a(this.input),this.outputs.forEach(a),a(this.otherwise)},zi.prototype.outputDefined=function(){return this.outputs.every(function(a){return a.outputDefined()})&&this.otherwise.outputDefined()},zi.prototype.serialize=function(){for(var a=this,l=["match",this.input.serialize()],f=[],_={},k=0,D=Object.keys(this.cases).sort();k<D.length;k+=1){var M=D[k];(ge=_[this.cases[M]])===void 0?(_[this.cases[M]]=f.length,f.push([this.cases[M],[M]])):f[ge][1].push(M)}for(var H=function(Oe){return a.inputType.kind==="number"?Number(Oe):Oe},X=0,ie=f;X<ie.length;X+=1){var ue=ie[X],ge=ue[0],Ae=ue[1];l.push(Ae.length===1?H(Ae[0]):Ae.map(H)),l.push(this.outputs[outputIndex$1].serialize())}return l.push(this.otherwise.serialize()),l};var uf=function(a,l,f){this.type=a,this.branches=l,this.otherwise=f};uf.parse=function(a,l){if(a.length<4)return l.error("Expected at least 3 arguments, but found only "+(a.length-1)+".");if(a.length%2!=0)return l.error("Expected an odd number of arguments.");var f;l.expectedType&&l.expectedType.kind!=="value"&&(f=l.expectedType);for(var _=[],k=1;k<a.length-1;k+=2){var D=l.parse(a[k],k,Re);if(!D)return null;var M=l.parse(a[k+1],k+1,f);if(!M)return null;_.push([D,M]),f=f||M.type}var H=l.parse(a[a.length-1],a.length-1,f);return H?new uf(f,_,H):null},uf.prototype.evaluate=function(a){for(var l=0,f=this.branches;l<f.length;l+=1){var _=f[l],k=_[1];if(_[0].evaluate(a))return k.evaluate(a)}return this.otherwise.evaluate(a)},uf.prototype.eachChild=function(a){for(var l=0,f=this.branches;l<f.length;l+=1){var _=f[l],k=_[1];a(_[0]),a(k)}a(this.otherwise)},uf.prototype.outputDefined=function(){return this.branches.every(function(a){return a[1].outputDefined()})&&this.otherwise.outputDefined()},uf.prototype.serialize=function(){var a=["case"];return this.eachChild(function(l){a.push(l.serialize())}),a};var vu=function(a,l,f,_){this.type=a,this.input=l,this.beginIndex=f,this.endIndex=_};function cf(a,l){return a==="=="||a==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function ip(a,l,f,_){return _.compare(l,f)===0}function bi(a,l,f){var _=a!=="=="&&a!=="!=";return function(){function k(D,M,H){this.type=Re,this.lhs=D,this.rhs=M,this.collator=H,this.hasUntypedArgument=D.type.kind==="value"||M.type.kind==="value"}return k.parse=function(D,M){if(D.length!==3&&D.length!==4)return M.error("Expected two or three arguments.");var H=D[0],X=M.parse(D[1],1,it);if(!X)return null;if(!cf(H,X.type))return M.concat(1).error('"'+H+`" comparisons are not supported for type '`+Mn(X.type)+"'.");var ie=M.parse(D[2],2,it);if(!ie)return null;if(!cf(H,ie.type))return M.concat(2).error('"'+H+`" comparisons are not supported for type '`+Mn(ie.type)+"'.");if(X.type.kind!==ie.type.kind&&X.type.kind!=="value"&&ie.type.kind!=="value")return M.error("Cannot compare types '"+Mn(X.type)+"' and '"+Mn(ie.type)+"'.");_&&(X.type.kind==="value"&&ie.type.kind!=="value"?X=new oo(ie.type,[X]):X.type.kind!=="value"&&ie.type.kind==="value"&&(ie=new oo(X.type,[ie])));var ue=null;if(D.length===4){if(X.type.kind!=="string"&&ie.type.kind!=="string"&&X.type.kind!=="value"&&ie.type.kind!=="value")return M.error("Cannot use collator to compare non-string types.");if(!(ue=M.parse(D[3],3,Qt)))return null}return new k(X,ie,ue)},k.prototype.evaluate=function(D){var M=this.lhs.evaluate(D),H=this.rhs.evaluate(D);if(_&&this.hasUntypedArgument){var X=Co(M),ie=Co(H);if(X.kind!==ie.kind||X.kind!=="string"&&X.kind!=="number")throw new ta('Expected arguments for "'+a+'" to be (string, string) or (number, number), but found ('+X.kind+", "+ie.kind+") instead.")}if(this.collator&&!_&&this.hasUntypedArgument){var ue=Co(M),ge=Co(H);if(ue.kind!=="string"||ge.kind!=="string")return l(D,M,H)}return this.collator?f(D,M,H,this.collator.evaluate(D)):l(D,M,H)},k.prototype.eachChild=function(D){D(this.lhs),D(this.rhs),this.collator&&D(this.collator)},k.prototype.outputDefined=function(){return!0},k.prototype.serialize=function(){var D=[a];return this.eachChild(function(M){D.push(M.serialize())}),D},k}()}vu.parse=function(a,l){if(a.length<=2||a.length>=5)return l.error("Expected 3 or 4 arguments, but found "+(a.length-1)+" instead.");var f=l.parse(a[1],1,it),_=l.parse(a[2],2,Mt);if(!f||!_)return null;if(!ko(f.type,[En(it),ce,it]))return l.error("Expected first argument to be of type array or string, but found "+Mn(f.type)+" instead");if(a.length===4){var k=l.parse(a[3],3,Mt);return k?new vu(f.type,f,_,k):null}return new vu(f.type,f,_)},vu.prototype.evaluate=function(a){var l=this.input.evaluate(a),f=this.beginIndex.evaluate(a);if(!yi(l,["string","array"]))throw new ta("Expected first argument to be of type array or string, but found "+Mn(Co(l))+" instead.");if(this.endIndex){var _=this.endIndex.evaluate(a);return l.slice(f,_)}return l.slice(f)},vu.prototype.eachChild=function(a){a(this.input),a(this.beginIndex),this.endIndex&&a(this.endIndex)},vu.prototype.outputDefined=function(){return!1},vu.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var a=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),a]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Og=bi("==",function(a,l,f){return l===f},ip),Qf=bi("!=",function(a,l,f){return l!==f},function(a,l,f,_){return!ip(0,l,f,_)}),id=bi("<",function(a,l,f){return l<f},function(a,l,f,_){return _.compare(l,f)<0}),op=bi(">",function(a,l,f){return l>f},function(a,l,f,_){return _.compare(l,f)>0}),Pg=bi("<=",function(a,l,f){return l<=f},function(a,l,f,_){return _.compare(l,f)<=0}),ap=bi(">=",function(a,l,f){return l>=f},function(a,l,f,_){return _.compare(l,f)>=0}),da=function(a,l,f,_,k){this.type=ce,this.number=a,this.locale=l,this.currency=f,this.minFractionDigits=_,this.maxFractionDigits=k};da.parse=function(a,l){if(a.length!==3)return l.error("Expected two arguments.");var f=l.parse(a[1],1,Mt);if(!f)return null;var _=a[2];if(typeof _!="object"||Array.isArray(_))return l.error("NumberFormat options argument must be an object.");var k=null;if(_.locale&&!(k=l.parse(_.locale,1,ce)))return null;var D=null;if(_.currency&&!(D=l.parse(_.currency,1,ce)))return null;var M=null;if(_["min-fraction-digits"]&&!(M=l.parse(_["min-fraction-digits"],1,Mt)))return null;var H=null;return _["max-fraction-digits"]&&!(H=l.parse(_["max-fraction-digits"],1,Mt))?null:new da(f,k,D,M,H)},da.prototype.evaluate=function(a){return new Intl.NumberFormat(this.locale?this.locale.evaluate(a):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(a):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(a):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(a):void 0}).format(this.number.evaluate(a))},da.prototype.eachChild=function(a){a(this.number),this.locale&&a(this.locale),this.currency&&a(this.currency),this.minFractionDigits&&a(this.minFractionDigits),this.maxFractionDigits&&a(this.maxFractionDigits)},da.prototype.outputDefined=function(){return!1},da.prototype.serialize=function(){var a={};return this.locale&&(a.locale=this.locale.serialize()),this.currency&&(a.currency=this.currency.serialize()),this.minFractionDigits&&(a["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(a["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),a]};var yu=function(a){this.type=Mt,this.input=a};yu.parse=function(a,l){if(a.length!==2)return l.error("Expected 1 argument, but found "+(a.length-1)+" instead.");var f=l.parse(a[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?l.error("Expected argument of type string or array, but found "+Mn(f.type)+" instead."):new yu(f):null},yu.prototype.evaluate=function(a){var l=this.input.evaluate(a);if(typeof l=="string"||Array.isArray(l))return l.length;throw new ta("Expected value to be of type string or array, but found "+Mn(Co(l))+" instead.")},yu.prototype.eachChild=function(a){a(this.input)},yu.prototype.outputDefined=function(){return!1},yu.prototype.serialize=function(){var a=["length"];return this.eachChild(function(l){a.push(l.serialize())}),a};var Rs={"==":Og,"!=":Qf,">":op,"<":id,">=":ap,"<=":Pg,array:oo,at:lf,boolean:oo,case:uf,coalesce:ul,collator:Ol,format:Il,image:ra,in:kc,"index-of":Ls,interpolate:Ma,"interpolate-hcl":Ma,"interpolate-lab":Ma,length:yu,let:Ac,literal:Ha,match:zi,number:oo,"number-format":da,object:oo,slice:vu,step:Fo,string:oo,"to-boolean":Dl,"to-color":Dl,"to-number":Dl,"to-string":Dl,var:Kl,within:ei};function Zl(a,l){var f=l[0],_=l[1],k=l[2],D=l[3];f=f.evaluate(a),_=_.evaluate(a),k=k.evaluate(a);var M=D?D.evaluate(a):1,H=Qh(f,_,k,M);if(H)throw new ta(H);return new Vn(f/255*M,_/255*M,k/255*M,M)}function eh(a,l){return a in l}function od(a,l){var f=l[a];return f===void 0?null:f}function Cc(a){return{type:a}}function Yl(a){return{result:"success",value:a}}function cl(a){return{result:"error",value:a}}function Wu(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function ff(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function th(a){return!!a.expression&&a.expression.interpolated}function Gi(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function hf(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function sp(a){return a}function $a(a,l,f){return a!==void 0?a:l!==void 0?l:f!==void 0?f:void 0}function Gs(a,l,f,_,k){return $a(typeof f===k?_[f]:void 0,a.default,l.default)}function Mg(a,l,f){if(Gi(f)!=="number")return $a(a.default,l.default);var _=a.stops.length;if(_===1||f<=a.stops[0][0])return a.stops[0][1];if(f>=a.stops[_-1][0])return a.stops[_-1][1];var k=sf(a.stops.map(function(D){return D[0]}),f);return a.stops[k][1]}function fm(a,l,f){var _=a.base!==void 0?a.base:1;if(Gi(f)!=="number")return $a(a.default,l.default);var k=a.stops.length;if(k===1||f<=a.stops[0][0])return a.stops[0][1];if(f>=a.stops[k-1][0])return a.stops[k-1][1];var D=sf(a.stops.map(function(ge){return ge[0]}),f),M=function(ge,Ae,Oe,$e){var Ke=$e-Oe,ot=ge-Oe;return Ke===0?0:Ae===1?ot/Ke:(Math.pow(Ae,ot)-1)/(Math.pow(Ae,Ke)-1)}(f,_,a.stops[D][0],a.stops[D+1][0]),H=a.stops[D][1],X=a.stops[D+1][1],ie=Vu[l.type]||sp;if(a.colorSpace&&a.colorSpace!=="rgb"){var ue=np[a.colorSpace];ie=function(ge,Ae){return ue.reverse(ue.interpolate(ue.forward(ge),ue.forward(Ae),M))}}return typeof H.evaluate=="function"?{evaluate:function(){for(var ge=arguments,Ae=[],Oe=arguments.length;Oe--;)Ae[Oe]=ge[Oe];var $e=H.evaluate.apply(void 0,Ae),Ke=X.evaluate.apply(void 0,Ae);if($e!==void 0&&Ke!==void 0)return ie($e,Ke,M)}}:ie(H,X,M)}function lp(a,l,f){return l.type==="color"?f=Vn.parse(f):l.type==="formatted"?f=bo.fromString(f.toString()):l.type==="resolvedImage"?f=Go.fromString(f.toString()):Gi(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0),$a(f,a.default,l.default)}Wa.register(Rs,{error:[{kind:"error"},[ce],function(a,l){throw new ta(l[0].evaluate(a))}],typeof:[ce,[it],function(a,l){return Mn(Co(l[0].evaluate(a)))}],"to-rgba":[En(Mt,4),[ct],function(a,l){return l[0].evaluate(a).toArray()}],rgb:[ct,[Mt,Mt,Mt],Zl],rgba:[ct,[Mt,Mt,Mt,Mt],Zl],has:{type:Re,overloads:[[[ce],function(a,l){return eh(l[0].evaluate(a),a.properties())}],[[ce,jt],function(a,l){var f=l[1];return eh(l[0].evaluate(a),f.evaluate(a))}]]},get:{type:it,overloads:[[[ce],function(a,l){return od(l[0].evaluate(a),a.properties())}],[[ce,jt],function(a,l){var f=l[1];return od(l[0].evaluate(a),f.evaluate(a))}]]},"feature-state":[it,[ce],function(a,l){return od(l[0].evaluate(a),a.featureState||{})}],properties:[jt,[],function(a){return a.properties()}],"geometry-type":[ce,[],function(a){return a.geometryType()}],id:[it,[],function(a){return a.id()}],zoom:[Mt,[],function(a){return a.globals.zoom}],"heatmap-density":[Mt,[],function(a){return a.globals.heatmapDensity||0}],"line-progress":[Mt,[],function(a){return a.globals.lineProgress||0}],accumulated:[it,[],function(a){return a.globals.accumulated===void 0?null:a.globals.accumulated}],"+":[Mt,Cc(Mt),function(a,l){for(var f=0,_=0,k=l;_<k.length;_+=1)f+=k[_].evaluate(a);return f}],"*":[Mt,Cc(Mt),function(a,l){for(var f=1,_=0,k=l;_<k.length;_+=1)f*=k[_].evaluate(a);return f}],"-":{type:Mt,overloads:[[[Mt,Mt],function(a,l){var f=l[1];return l[0].evaluate(a)-f.evaluate(a)}],[[Mt],function(a,l){return-l[0].evaluate(a)}]]},"/":[Mt,[Mt,Mt],function(a,l){var f=l[1];return l[0].evaluate(a)/f.evaluate(a)}],"%":[Mt,[Mt,Mt],function(a,l){var f=l[1];return l[0].evaluate(a)%f.evaluate(a)}],ln2:[Mt,[],function(){return Math.LN2}],pi:[Mt,[],function(){return Math.PI}],e:[Mt,[],function(){return Math.E}],"^":[Mt,[Mt,Mt],function(a,l){var f=l[1];return Math.pow(l[0].evaluate(a),f.evaluate(a))}],sqrt:[Mt,[Mt],function(a,l){return Math.sqrt(l[0].evaluate(a))}],log10:[Mt,[Mt],function(a,l){return Math.log(l[0].evaluate(a))/Math.LN10}],ln:[Mt,[Mt],function(a,l){return Math.log(l[0].evaluate(a))}],log2:[Mt,[Mt],function(a,l){return Math.log(l[0].evaluate(a))/Math.LN2}],sin:[Mt,[Mt],function(a,l){return Math.sin(l[0].evaluate(a))}],cos:[Mt,[Mt],function(a,l){return Math.cos(l[0].evaluate(a))}],tan:[Mt,[Mt],function(a,l){return Math.tan(l[0].evaluate(a))}],asin:[Mt,[Mt],function(a,l){return Math.asin(l[0].evaluate(a))}],acos:[Mt,[Mt],function(a,l){return Math.acos(l[0].evaluate(a))}],atan:[Mt,[Mt],function(a,l){return Math.atan(l[0].evaluate(a))}],min:[Mt,Cc(Mt),function(a,l){return Math.min.apply(Math,l.map(function(f){return f.evaluate(a)}))}],max:[Mt,Cc(Mt),function(a,l){return Math.max.apply(Math,l.map(function(f){return f.evaluate(a)}))}],abs:[Mt,[Mt],function(a,l){return Math.abs(l[0].evaluate(a))}],round:[Mt,[Mt],function(a,l){var f=l[0].evaluate(a);return f<0?-Math.round(-f):Math.round(f)}],floor:[Mt,[Mt],function(a,l){return Math.floor(l[0].evaluate(a))}],ceil:[Mt,[Mt],function(a,l){return Math.ceil(l[0].evaluate(a))}],"filter-==":[Re,[ce,it],function(a,l){var f=l[0],_=l[1];return a.properties()[f.value]===_.value}],"filter-id-==":[Re,[it],function(a,l){var f=l[0];return a.id()===f.value}],"filter-type-==":[Re,[ce],function(a,l){var f=l[0];return a.geometryType()===f.value}],"filter-<":[Re,[ce,it],function(a,l){var f=l[0],_=l[1],k=a.properties()[f.value],D=_.value;return typeof k==typeof D&&k<D}],"filter-id-<":[Re,[it],function(a,l){var f=l[0],_=a.id(),k=f.value;return typeof _==typeof k&&_<k}],"filter->":[Re,[ce,it],function(a,l){var f=l[0],_=l[1],k=a.properties()[f.value],D=_.value;return typeof k==typeof D&&k>D}],"filter-id->":[Re,[it],function(a,l){var f=l[0],_=a.id(),k=f.value;return typeof _==typeof k&&_>k}],"filter-<=":[Re,[ce,it],function(a,l){var f=l[0],_=l[1],k=a.properties()[f.value],D=_.value;return typeof k==typeof D&&k<=D}],"filter-id-<=":[Re,[it],function(a,l){var f=l[0],_=a.id(),k=f.value;return typeof _==typeof k&&_<=k}],"filter->=":[Re,[ce,it],function(a,l){var f=l[0],_=l[1],k=a.properties()[f.value],D=_.value;return typeof k==typeof D&&k>=D}],"filter-id->=":[Re,[it],function(a,l){var f=l[0],_=a.id(),k=f.value;return typeof _==typeof k&&_>=k}],"filter-has":[Re,[it],function(a,l){return l[0].value in a.properties()}],"filter-has-id":[Re,[],function(a){return a.id()!==null&&a.id()!==void 0}],"filter-type-in":[Re,[En(ce)],function(a,l){return l[0].value.indexOf(a.geometryType())>=0}],"filter-id-in":[Re,[En(it)],function(a,l){return l[0].value.indexOf(a.id())>=0}],"filter-in-small":[Re,[ce,En(it)],function(a,l){var f=l[0];return l[1].value.indexOf(a.properties()[f.value])>=0}],"filter-in-large":[Re,[ce,En(it)],function(a,l){var f=l[0],_=l[1];return function(k,D,M,H){for(;M<=H;){var X=M+H>>1;if(D[X]===k)return!0;D[X]>k?H=X-1:M=X+1}return!1}(a.properties()[f.value],_.value,0,_.value.length-1)}],all:{type:Re,overloads:[[[Re,Re],function(a,l){var f=l[1];return l[0].evaluate(a)&&f.evaluate(a)}],[Cc(Re),function(a,l){for(var f=0,_=l;f<_.length;f+=1)if(!_[f].evaluate(a))return!1;return!0}]]},any:{type:Re,overloads:[[[Re,Re],function(a,l){var f=l[1];return l[0].evaluate(a)||f.evaluate(a)}],[Cc(Re),function(a,l){for(var f=0,_=l;f<_.length;f+=1)if(_[f].evaluate(a))return!0;return!1}]]},"!":[Re,[Re],function(a,l){return!l[0].evaluate(a)}],"is-supported-script":[Re,[ce],function(a,l){var f=a.globals&&a.globals.isSupportedScript;return!f||f(l[0].evaluate(a))}],upcase:[ce,[ce],function(a,l){return l[0].evaluate(a).toUpperCase()}],downcase:[ce,[ce],function(a,l){return l[0].evaluate(a).toLowerCase()}],concat:[ce,Cc(it),function(a,l){return l.map(function(f){return nf(f.evaluate(a))}).join("")}],"resolved-locale":[ce,[Qt],function(a,l){return l[0].evaluate(a).resolvedLocale()}]});var Xl=function(a,l){this.expression=a,this._warningHistory={},this._evaluator=new al,this._defaultValue=l?function(f){return f.type==="color"&&hf(f.default)?new Vn(0,0,0,0):f.type==="color"?Vn.parse(f.default)||null:f.default===void 0?null:f.default}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null};function Fs(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Rs}function rh(a,l){var f=new fo(Rs,[],l?function(k){var D={color:ct,string:ce,number:Mt,enum:ce,boolean:Re,formatted:rn,resolvedImage:un};return k.type==="array"?En(D[k.value]||it,k.length):D[k.type]}(l):void 0),_=f.parse(a,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Yl(new Xl(_,l)):cl(f.errors)}Xl.prototype.evaluateWithoutErrorHandling=function(a,l,f,_,k,D){return this._evaluator.globals=a,this._evaluator.feature=l,this._evaluator.featureState=f,this._evaluator.canonical=_,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D,this.expression.evaluate(this._evaluator)},Xl.prototype.evaluate=function(a,l,f,_,k,D){this._evaluator.globals=a,this._evaluator.feature=l||null,this._evaluator.featureState=f||null,this._evaluator.canonical=_,this._evaluator.availableImages=k||null,this._evaluator.formattedSection=D||null;try{var M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new ta("Expected value to be one of "+Object.keys(this._enumValues).map(function(H){return JSON.stringify(H)}).join(", ")+", but found "+JSON.stringify(M)+" instead.");return M}catch(H){return this._warningHistory[H.message]||(this._warningHistory[H.message]=!0,typeof console<"u"&&console.warn(H.message)),this._defaultValue}};var nh=function(a,l){this.kind=a,this._styleExpression=l,this.isStateDependent=a!=="constant"&&!Ws(l.expression)};nh.prototype.evaluateWithoutErrorHandling=function(a,l,f,_,k,D){return this._styleExpression.evaluateWithoutErrorHandling(a,l,f,_,k,D)},nh.prototype.evaluate=function(a,l,f,_,k,D){return this._styleExpression.evaluate(a,l,f,_,k,D)};var bu=function(a,l,f,_){this.kind=a,this.zoomStops=f,this._styleExpression=l,this.isStateDependent=a!=="camera"&&!Ws(l.expression),this.interpolationType=_};function hm(a,l){if((a=rh(a,l)).result==="error")return a;var f=a.value.expression,_=mu(f);if(!_&&!Wu(l))return cl([new _t("","data expressions not supported")]);var k=gu(f,["zoom"]);if(!k&&!ff(l))return cl([new _t("","zoom expressions not supported")]);var D=function M(H){var X=null;if(H instanceof Ac)X=M(H.result);else if(H instanceof ul)for(var ie=0,ue=H.args;ie<ue.length&&!(X=M(ue[ie]));ie+=1);else(H instanceof Fo||H instanceof Ma)&&H.input instanceof Wa&&H.input.name==="zoom"&&(X=H);return X instanceof _t||H.eachChild(function(ge){var Ae=M(ge);Ae instanceof _t?X=Ae:!X&&Ae?X=new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):X&&Ae&&X!==Ae&&(X=new _t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),X}(f);return D||k?D instanceof _t?cl([D]):D instanceof Ma&&!th(l)?cl([new _t("",'"interpolate" expressions cannot be used with this property')]):Yl(D?new bu(_?"camera":"composite",a.value,D.labels,D instanceof Ma?D.interpolation:void 0):new nh(_?"constant":"source",a.value)):cl([new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}bu.prototype.evaluateWithoutErrorHandling=function(a,l,f,_,k,D){return this._styleExpression.evaluateWithoutErrorHandling(a,l,f,_,k,D)},bu.prototype.evaluate=function(a,l,f,_,k,D){return this._styleExpression.evaluate(a,l,f,_,k,D)},bu.prototype.interpolationFactor=function(a,l,f){return this.interpolationType?Ma.interpolationFactor(this.interpolationType,a,l,f):0};var df=function(a,l){this._parameters=a,this._specification=l,zt(this,function f(_,k){var D,M,H,X=k.type==="color",ie=_.stops&&typeof _.stops[0][0]=="object",ue=ie||!(ie||_.property!==void 0),ge=_.type||(th(k)?"exponential":"interval");if(X&&((_=zt({},_)).stops&&(_.stops=_.stops.map(function(Ar){return[Ar[0],Vn.parse(Ar[1])]})),_.default=Vn.parse(_.default?_.default:k.default)),_.colorSpace&&_.colorSpace!=="rgb"&&!np[_.colorSpace])throw new Error("Unknown color space: "+_.colorSpace);if(ge==="exponential")D=fm;else if(ge==="interval")D=Mg;else if(ge==="categorical"){D=Gs,M=Object.create(null);for(var Ae=0,Oe=_.stops;Ae<Oe.length;Ae+=1){var $e=Oe[Ae];M[$e[0]]=$e[1]}H=typeof _.stops[0][0]}else{if(ge!=="identity")throw new Error('Unknown function type "'+ge+'"');D=lp}if(ie){for(var Ke={},ot=[],Qe=0;Qe<_.stops.length;Qe++){var yt=_.stops[Qe],At=yt[0].zoom;Ke[At]===void 0&&(Ke[At]={zoom:At,type:_.type,property:_.property,default:_.default,stops:[]},ot.push(At)),Ke[At].stops.push([yt[0].value,yt[1]])}for(var Lt=[],Nt=0,Gt=ot;Nt<Gt.length;Nt+=1){var lr=Gt[Nt];Lt.push([Ke[lr].zoom,f(Ke[lr],k)])}var br={name:"linear"};return{kind:"composite",interpolationType:br,interpolationFactor:Ma.interpolationFactor.bind(void 0,br),zoomStops:Lt.map(function(Ar){return Ar[0]}),evaluate:function(Ar,Xr){var Dr=Ar.zoom;return fm({stops:Lt,base:_.base},k,Dr).evaluate(Dr,Xr)}}}if(ue){var $r=ge==="exponential"?{name:"exponential",base:_.base!==void 0?_.base:1}:null;return{kind:"camera",interpolationType:$r,interpolationFactor:Ma.interpolationFactor.bind(void 0,$r),zoomStops:_.stops.map(function(Ar){return Ar[0]}),evaluate:function(Ar){return D(_,k,Ar.zoom,M,H)}}}return{kind:"source",evaluate:function(Ar,Xr){var Dr=Xr&&Xr.properties?Xr.properties[_.property]:void 0;return Dr===void 0?$a(_.default,k.default):D(_,k,Dr,M,H)}}}(this._parameters,this._specification))};function fl(a){var l=a.key,f=a.value,_=a.valueSpec||{},k=a.objectElementValidators||{},D=a.style,M=a.styleSpec,H=[],X=Gi(f);if(X!=="object")return[new Ie(l,f,"object expected, "+X+" found")];for(var ie in f){var ue=ie.split(".")[0],ge=_[ue]||_["*"],Ae=void 0;if(k[ue])Ae=k[ue];else if(_[ue])Ae=Tn;else if(k["*"])Ae=k["*"];else{if(!_["*"]){H.push(new Ie(l,f[ie],'unknown property "'+ie+'"'));continue}Ae=Tn}H=H.concat(Ae({key:(l&&l+".")+ie,value:f[ie],valueSpec:ge,style:D,styleSpec:M,object:f,objectKey:ie},f))}for(var Oe in _)k[Oe]||_[Oe].required&&_[Oe].default===void 0&&f[Oe]===void 0&&H.push(new Ie(l,f,'missing required property "'+Oe+'"'));return H}function Pl(a){var l=a.value,f=a.valueSpec,_=a.style,k=a.styleSpec,D=a.key,M=a.arrayElementValidator||Tn;if(Gi(l)!=="array")return[new Ie(D,l,"array expected, "+Gi(l)+" found")];if(f.length&&l.length!==f.length)return[new Ie(D,l,"array length "+f.length+" expected, length "+l.length+" found")];if(f["min-length"]&&l.length<f["min-length"])return[new Ie(D,l,"array length at least "+f["min-length"]+" expected, length "+l.length+" found")];var H={type:f.value,values:f.values};k.$version<7&&(H.function=f.function),Gi(f.value)==="object"&&(H=f.value);for(var X=[],ie=0;ie<l.length;ie++)X=X.concat(M({array:l,arrayIndex:ie,value:l[ie],valueSpec:H,style:_,styleSpec:k,key:D+"["+ie+"]"}));return X}function St(a){var l=a.key,f=a.value,_=a.valueSpec,k=Gi(f);return k==="number"&&f!=f&&(k="NaN"),k!=="number"?[new Ie(l,f,"number expected, "+k+" found")]:"minimum"in _&&f<_.minimum?[new Ie(l,f,f+" is less than the minimum value "+_.minimum)]:"maximum"in _&&f>_.maximum?[new Ie(l,f,f+" is greater than the maximum value "+_.maximum)]:[]}function Zt(a){var l,f,_,k=a.valueSpec,D=Vt(a.value.type),M={},H=D!=="categorical"&&a.value.property===void 0,X=!H,ie=Gi(a.value.stops)==="array"&&Gi(a.value.stops[0])==="array"&&Gi(a.value.stops[0][0])==="object",ue=fl({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(Oe){if(D==="identity")return[new Ie(Oe.key,Oe.value,'identity function may not have a "stops" property')];var $e=[],Ke=Oe.value;return $e=$e.concat(Pl({key:Oe.key,value:Ke,valueSpec:Oe.valueSpec,style:Oe.style,styleSpec:Oe.styleSpec,arrayElementValidator:ge})),Gi(Ke)==="array"&&Ke.length===0&&$e.push(new Ie(Oe.key,Ke,"array must have at least one stop")),$e},default:function(Oe){return Tn({key:Oe.key,value:Oe.value,valueSpec:k,style:Oe.style,styleSpec:Oe.styleSpec})}}});return D==="identity"&&H&&ue.push(new Ie(a.key,a.value,'missing required property "property"')),D==="identity"||a.value.stops||ue.push(new Ie(a.key,a.value,'missing required property "stops"')),D==="exponential"&&a.valueSpec.expression&&!th(a.valueSpec)&&ue.push(new Ie(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(X&&!Wu(a.valueSpec)?ue.push(new Ie(a.key,a.value,"property functions not supported")):H&&!ff(a.valueSpec)&&ue.push(new Ie(a.key,a.value,"zoom functions not supported"))),D!=="categorical"&&!ie||a.value.property!==void 0||ue.push(new Ie(a.key,a.value,'"property" property is required')),ue;function ge(Oe){var $e=[],Ke=Oe.value,ot=Oe.key;if(Gi(Ke)!=="array")return[new Ie(ot,Ke,"array expected, "+Gi(Ke)+" found")];if(Ke.length!==2)return[new Ie(ot,Ke,"array length 2 expected, length "+Ke.length+" found")];if(ie){if(Gi(Ke[0])!=="object")return[new Ie(ot,Ke,"object expected, "+Gi(Ke[0])+" found")];if(Ke[0].zoom===void 0)return[new Ie(ot,Ke,"object stop key must have zoom")];if(Ke[0].value===void 0)return[new Ie(ot,Ke,"object stop key must have value")];if(_&&_>Vt(Ke[0].zoom))return[new Ie(ot,Ke[0].zoom,"stop zoom values must appear in ascending order")];Vt(Ke[0].zoom)!==_&&(_=Vt(Ke[0].zoom),f=void 0,M={}),$e=$e.concat(fl({key:ot+"[0]",value:Ke[0],valueSpec:{zoom:{}},style:Oe.style,styleSpec:Oe.styleSpec,objectElementValidators:{zoom:St,value:Ae}}))}else $e=$e.concat(Ae({key:ot+"[0]",value:Ke[0],valueSpec:{},style:Oe.style,styleSpec:Oe.styleSpec},Ke));return Fs(pt(Ke[1]))?$e.concat([new Ie(ot+"[1]",Ke[1],"expressions are not allowed in function stops.")]):$e.concat(Tn({key:ot+"[1]",value:Ke[1],valueSpec:k,style:Oe.style,styleSpec:Oe.styleSpec}))}function Ae(Oe,$e){var Ke=Gi(Oe.value),ot=Vt(Oe.value),Qe=Oe.value!==null?Oe.value:$e;if(l){if(Ke!==l)return[new Ie(Oe.key,Qe,Ke+" stop domain type must match previous stop domain type "+l)]}else l=Ke;if(Ke!=="number"&&Ke!=="string"&&Ke!=="boolean")return[new Ie(Oe.key,Qe,"stop domain value must be a number, string, or boolean")];if(Ke!=="number"&&D!=="categorical"){var yt="number expected, "+Ke+" found";return Wu(k)&&D===void 0&&(yt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ie(Oe.key,Qe,yt)]}return D!=="categorical"||Ke!=="number"||isFinite(ot)&&Math.floor(ot)===ot?D!=="categorical"&&Ke==="number"&&f!==void 0&&ot<f?[new Ie(Oe.key,Qe,"stop domain values must appear in ascending order")]:(f=ot,D==="categorical"&&ot in M?[new Ie(Oe.key,Qe,"stop domain values must be unique")]:(M[ot]=!0,[])):[new Ie(Oe.key,Qe,"integer expected, found "+ot)]}}function qt(a){var l=(a.expressionContext==="property"?hm:rh)(pt(a.value),a.valueSpec);if(l.result==="error")return l.value.map(function(_){return new Ie(""+a.key+_.key,a.value,_.message)});var f=l.value.expression||l.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!f.outputDefined())return[new Ie(a.key,a.value,'Invalid data expression for "'+a.propertyKey+'". Output values must be contained as literals within the expression.')];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ws(f))return[new Ie(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ws(f))return[new Ie(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!gu(f,["zoom","feature-state"]))return[new Ie(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!mu(f))return[new Ie(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ur(a){var l=a.key,f=a.value,_=a.valueSpec,k=[];return Array.isArray(_.values)?_.values.indexOf(Vt(f))===-1&&k.push(new Ie(l,f,"expected one of ["+_.values.join(", ")+"], "+JSON.stringify(f)+" found")):Object.keys(_.values).indexOf(Vt(f))===-1&&k.push(new Ie(l,f,"expected one of ["+Object.keys(_.values).join(", ")+"], "+JSON.stringify(f)+" found")),k}function On(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(var l=0,f=a.slice(1);l<f.length;l+=1){var _=f[l];if(!On(_)&&typeof _!="boolean")return!1}return!0;default:return!0}}df.deserialize=function(a){return new df(a._parameters,a._specification)},df.serialize=function(a){return{_parameters:a._parameters,_specification:a._specification}};var di={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function qo(a){if(a==null)return{filter:function(){return!0},needGeometry:!1};On(a)||(a=Ic(a));var l=rh(a,di);if(l.result==="error")throw new Error(l.value.map(function(f){return f.key+": "+f.message}).join(", "));return{filter:function(f,_,k){return l.value.evaluate(f,_,{},k)},needGeometry:function f(_){if(!Array.isArray(_))return!1;if(_[0]==="within")return!0;for(var k=1;k<_.length;k++)if(f(_[k]))return!0;return!1}(a)}}function eo(a,l){return a<l?-1:a>l?1:0}function Ic(a){if(!a)return!0;var l,f=a[0];return a.length<=1?f!=="any":f==="=="?dm(a[1],a[2],"=="):f==="!="?_u(dm(a[1],a[2],"==")):f==="<"||f===">"||f==="<="||f===">="?dm(a[1],a[2],f):f==="any"?(l=a.slice(1),["any"].concat(l.map(Ic))):f==="all"?["all"].concat(a.slice(1).map(Ic)):f==="none"?["all"].concat(a.slice(1).map(Ic).map(_u)):f==="in"?hl(a[1],a.slice(2)):f==="!in"?_u(hl(a[1],a.slice(2))):f==="has"?ad(a[1]):f==="!has"?_u(ad(a[1])):f!=="within"||a}function dm(a,l,f){switch(a){case"$type":return["filter-type-"+f,l];case"$id":return["filter-id-"+f,l];default:return["filter-"+f,a,l]}}function hl(a,l){if(l.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(function(f){return typeof f!=typeof l[0]})?["filter-in-large",a,["literal",l.sort(eo)]]:["filter-in-small",a,["literal",l]]}}function ad(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function _u(a){return["!",a]}function dl(a){return On(pt(a.value))?qt(zt({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function l(f){var _=f.value,k=f.key;if(Gi(_)!=="array")return[new Ie(k,_,"array expected, "+Gi(_)+" found")];var D,M=f.styleSpec,H=[];if(_.length<1)return[new Ie(k,_,"filter array must have at least 1 element")];switch(H=H.concat(Ur({key:k+"[0]",value:_[0],valueSpec:M.filter_operator,style:f.style,styleSpec:f.styleSpec})),Vt(_[0])){case"<":case"<=":case">":case">=":_.length>=2&&Vt(_[1])==="$type"&&H.push(new Ie(k,_,'"$type" cannot be use with operator "'+_[0]+'"'));case"==":case"!=":_.length!==3&&H.push(new Ie(k,_,'filter array for operator "'+_[0]+'" must have 3 elements'));case"in":case"!in":_.length>=2&&(D=Gi(_[1]))!=="string"&&H.push(new Ie(k+"[1]",_[1],"string expected, "+D+" found"));for(var X=2;X<_.length;X++)D=Gi(_[X]),Vt(_[1])==="$type"?H=H.concat(Ur({key:k+"["+X+"]",value:_[X],valueSpec:M.geometry_type,style:f.style,styleSpec:f.styleSpec})):D!=="string"&&D!=="number"&&D!=="boolean"&&H.push(new Ie(k+"["+X+"]",_[X],"string, number, or boolean expected, "+D+" found"));break;case"any":case"all":case"none":for(var ie=1;ie<_.length;ie++)H=H.concat(l({key:k+"["+ie+"]",value:_[ie],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":D=Gi(_[1]),_.length!==2?H.push(new Ie(k,_,'filter array for "'+_[0]+'" operator must have 2 elements')):D!=="string"&&H.push(new Ie(k+"[1]",_[1],"string expected, "+D+" found"));break;case"within":D=Gi(_[1]),_.length!==2?H.push(new Ie(k,_,'filter array for "'+_[0]+'" operator must have 2 elements')):D!=="object"&&H.push(new Ie(k+"[1]",_[1],"object expected, "+D+" found"))}return H}(a)}function Jl(a,l){var f=a.key,_=a.style,k=a.styleSpec,D=a.value,M=a.objectKey,H=k[l+"_"+a.layerType];if(!H)return[];var X=M.match(/^(.*)-transition$/);if(l==="paint"&&X&&H[X[1]]&&H[X[1]].transition)return Tn({key:f,value:D,valueSpec:k.transition,style:_,styleSpec:k});var ie,ue=a.valueSpec||H[M];if(!ue)return[new Ie(f,D,'unknown property "'+M+'"')];if(Gi(D)==="string"&&Wu(ue)&&!ue.tokens&&(ie=/^{([^}]+)}$/.exec(D)))return[new Ie(f,D,'"'+M+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ie[1])+" }`.")];var ge=[];return a.layerType==="symbol"&&(M==="text-field"&&_&&!_.glyphs&&ge.push(new Ie(f,D,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&hf(pt(D))&&Vt(D.type)==="identity"&&ge.push(new Ie(f,D,'"text-font" does not support identity functions'))),ge.concat(Tn({key:a.key,value:D,valueSpec:ue,style:_,styleSpec:k,expressionContext:"property",propertyType:l,propertyKey:M}))}function Dc(a){return Jl(a,"paint")}function pi(a){return Jl(a,"layout")}function pm(a){var l=[],f=a.value,_=a.key,k=a.style,D=a.styleSpec;f.type||f.ref||l.push(new Ie(_,f,'either "type" or "ref" is required'));var M,H=Vt(f.type),X=Vt(f.ref);if(f.id)for(var ie=Vt(f.id),ue=0;ue<a.arrayIndex;ue++){var ge=k.layers[ue];Vt(ge.id)===ie&&l.push(new Ie(_,f.id,'duplicate layer id "'+f.id+'", previously used at line '+ge.id.__line__))}if("ref"in f)["type","source","source-layer","filter","layout"].forEach(function($e){$e in f&&l.push(new Ie(_,f[$e],'"'+$e+'" is prohibited for ref layers'))}),k.layers.forEach(function($e){Vt($e.id)===X&&(M=$e)}),M?M.ref?l.push(new Ie(_,f.ref,"ref cannot reference another ref layer")):H=Vt(M.type):l.push(new Ie(_,f.ref,'ref layer "'+X+'" not found'));else if(H!=="background")if(f.source){var Ae=k.sources&&k.sources[f.source],Oe=Ae&&Vt(Ae.type);Ae?Oe==="vector"&&H==="raster"?l.push(new Ie(_,f.source,'layer "'+f.id+'" requires a raster source')):Oe==="raster"&&H!=="raster"?l.push(new Ie(_,f.source,'layer "'+f.id+'" requires a vector source')):Oe!=="vector"||f["source-layer"]?Oe==="raster-dem"&&H!=="hillshade"?l.push(new Ie(_,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):H!=="line"||!f.paint||!f.paint["line-gradient"]||Oe==="geojson"&&Ae.lineMetrics||l.push(new Ie(_,f,'layer "'+f.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):l.push(new Ie(_,f,'layer "'+f.id+'" must specify a "source-layer"')):l.push(new Ie(_,f.source,'source "'+f.source+'" not found'))}else l.push(new Ie(_,f,'missing required property "source"'));return l=l.concat(fl({key:_,value:f,valueSpec:D.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Tn({key:_+".type",value:f.type,valueSpec:D.layer.type,style:a.style,styleSpec:a.styleSpec,object:f,objectKey:"type"})},filter:dl,layout:function($e){return fl({layer:f,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(Ke){return pi(zt({layerType:H},Ke))}}})},paint:function($e){return fl({layer:f,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(Ke){return Dc(zt({layerType:H},Ke))}}})}}}))}function xu(a){var l=a.value,f=a.key,_=Gi(l);return _!=="string"?[new Ie(f,l,"string expected, "+_+" found")]:[]}var li={promoteId:function(a){var l=a.key,f=a.value;if(Gi(f)==="string")return xu({key:l,value:f});var _=[];for(var k in f)_.push.apply(_,xu({key:l+"."+k,value:f[k]}));return _}};function wu(a){var l=a.value,f=a.key,_=a.styleSpec,k=a.style;if(!l.type)return[new Ie(f,l,'"type" is required')];var D,M=Vt(l.type);switch(M){case"vector":case"raster":case"raster-dem":return fl({key:f,value:l,valueSpec:_["source_"+M.replace("-","_")],style:a.style,styleSpec:_,objectElementValidators:li});case"geojson":if(D=fl({key:f,value:l,valueSpec:_.source_geojson,style:k,styleSpec:_,objectElementValidators:li}),l.cluster)for(var H in l.clusterProperties){var X=l.clusterProperties[H],ie=X[0],ue=typeof ie=="string"?[ie,["accumulated"],["get",H]]:ie;D.push.apply(D,qt({key:f+"."+H+".map",value:X[1],expressionContext:"cluster-map"})),D.push.apply(D,qt({key:f+"."+H+".reduce",value:ue,expressionContext:"cluster-reduce"}))}return D;case"video":return fl({key:f,value:l,valueSpec:_.source_video,style:k,styleSpec:_});case"image":return fl({key:f,value:l,valueSpec:_.source_image,style:k,styleSpec:_});case"canvas":return[new Ie(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ur({key:f+".type",value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:k,styleSpec:_})}}function na(a){var l=a.value,f=a.styleSpec,_=f.light,k=a.style,D=[],M=Gi(l);if(l===void 0)return D;if(M!=="object")return D.concat([new Ie("light",l,"object expected, "+M+" found")]);for(var H in l){var X=H.match(/^(.*)-transition$/);D=D.concat(X&&_[X[1]]&&_[X[1]].transition?Tn({key:H,value:l[H],valueSpec:f.transition,style:k,styleSpec:f}):_[H]?Tn({key:H,value:l[H],valueSpec:_[H],style:k,styleSpec:f}):[new Ie(H,l[H],'unknown property "'+H+'"')])}return D}var qs={"*":function(){return[]},array:Pl,boolean:function(a){var l=a.value,f=a.key,_=Gi(l);return _!=="boolean"?[new Ie(f,l,"boolean expected, "+_+" found")]:[]},number:St,color:function(a){var l=a.key,f=a.value,_=Gi(f);return _!=="string"?[new Ie(l,f,"color expected, "+_+" found")]:Fn(f)===null?[new Ie(l,f,'color expected, "'+f+'" found')]:[]},constants:nt,enum:Ur,filter:dl,function:Zt,layer:pm,object:fl,source:wu,light:na,string:xu,formatted:function(a){return xu(a).length===0?[]:qt(a)},resolvedImage:function(a){return xu(a).length===0?[]:qt(a)}};function Tn(a){var l=a.value,f=a.valueSpec,_=a.styleSpec;return f.expression&&hf(Vt(l))?Zt(a):f.expression&&Fs(pt(l))?qt(a):f.type&&qs[f.type]?qs[f.type](a):fl(zt({},a,{valueSpec:f.type?_[f.type]:f}))}function ti(a){var l=a.value,f=a.key,_=xu(a);return _.length||(l.indexOf("{fontstack}")===-1&&_.push(new Ie(f,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&_.push(new Ie(f,l,'"glyphs" url must include a "{range}" token'))),_}function ws(a,l){l===void 0&&(l=fe);var f=[];return f=f.concat(Tn({key:"",value:a,valueSpec:l.$root,styleSpec:l,style:a,objectElementValidators:{glyphs:ti,"*":function(){return[]}}})),a.constants&&(f=f.concat(nt({key:"constants",value:a.constants,style:a,styleSpec:l}))),pf(f)}function pf(a){return[].concat(a).sort(function(l,f){return l.line-f.line})}function pl(a){return function(){for(var l=arguments,f=[],_=arguments.length;_--;)f[_]=l[_];return pf(a.apply(this,f))}}ws.source=pl(wu),ws.light=pl(na),ws.layer=pl(pm),ws.filter=pl(dl),ws.paintProperty=pl(Dc),ws.layoutProperty=pl(pi);var mf=ws,up=mf.light,gf=mf.paintProperty,ih=mf.layoutProperty;function Ql(a,l){var f=!1;if(l&&l.length)for(var _=0,k=l;_<k.length;_+=1)a.fire(new Pe(new Error(k[_].message))),f=!0;return f}var Ss=po;function po(a,l,f){var _=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var k=new Int32Array(this.arrayBuffer);a=k[0],this.d=(l=k[1])+2*(f=k[2]);for(var D=0;D<this.d*this.d;D++){var M=k[3+D],H=k[3+D+1];_.push(M===H?null:k.subarray(M,H))}var X=k[3+_.length+1];this.keys=k.subarray(k[3+_.length],X),this.bboxes=k.subarray(X),this.insert=this._insertReadonly}else{this.d=l+2*f;for(var ie=0;ie<this.d*this.d;ie++)_.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=a,this.padding=f,this.scale=l/a,this.uid=0;var ue=f/l*a;this.min=-ue,this.max=a+ue}po.prototype.insert=function(a,l,f,_,k){this._forEachCell(l,f,_,k,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(k)},po.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},po.prototype._insertCell=function(a,l,f,_,k,D){this.cells[k].push(D)},po.prototype.query=function(a,l,f,_,k){var D=this.min,M=this.max;if(a<=D&&l<=D&&M<=f&&M<=_&&!k)return Array.prototype.slice.call(this.keys);var H=[];return this._forEachCell(a,l,f,_,this._queryCell,H,{},k),H},po.prototype._queryCell=function(a,l,f,_,k,D,M,H){var X=this.cells[k];if(X!==null)for(var ie=this.keys,ue=this.bboxes,ge=0;ge<X.length;ge++){var Ae=X[ge];if(M[Ae]===void 0){var Oe=4*Ae;(H?H(ue[Oe+0],ue[Oe+1],ue[Oe+2],ue[Oe+3]):a<=ue[Oe+2]&&l<=ue[Oe+3]&&f>=ue[Oe+0]&&_>=ue[Oe+1])?(M[Ae]=!0,D.push(ie[Ae])):M[Ae]=!1}}},po.prototype._forEachCell=function(a,l,f,_,k,D,M,H){for(var X=this._convertToCellCoord(a),ie=this._convertToCellCoord(l),ue=this._convertToCellCoord(f),ge=this._convertToCellCoord(_),Ae=X;Ae<=ue;Ae++)for(var Oe=ie;Oe<=ge;Oe++){var $e=this.d*Oe+Ae;if((!H||H(this._convertFromCellCoord(Ae),this._convertFromCellCoord(Oe),this._convertFromCellCoord(Ae+1),this._convertFromCellCoord(Oe+1)))&&k.call(this,a,l,f,_,$e,D,M,H))return}},po.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},po.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},po.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,l=3+this.cells.length+1+1,f=0,_=0;_<this.cells.length;_++)f+=this.cells[_].length;var k=new Int32Array(l+f+this.keys.length+this.bboxes.length);k[0]=this.extent,k[1]=this.n,k[2]=this.padding;for(var D=l,M=0;M<a.length;M++){var H=a[M];k[3+M]=D,k.set(H,D),D+=H.length}return k[3+a.length]=D,k.set(this.keys,D),k[3+a.length+1]=D+=this.keys.length,k.set(this.bboxes,D),D+=this.bboxes.length,k.buffer};var vf=me.ImageData,yf=me.ImageBitmap,_o={};function Ir(a,l,f){f===void 0&&(f={}),Object.defineProperty(l,"_classRegistryKey",{value:a,writeable:!1}),_o[a]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}for(var pa in Ir("Object",Object),Ss.serialize=function(a,l){var f=a.toArrayBuffer();return l&&l.push(f),{buffer:f}},Ss.deserialize=function(a){return new Ss(a.buffer)},Ir("Grid",Ss),Ir("Color",Vn),Ir("Error",Error),Ir("ResolvedImage",Go),Ir("StylePropertyFunction",df),Ir("StyleExpression",Xl,{omit:["_evaluator"]}),Ir("ZoomDependentExpression",bu),Ir("ZoomConstantExpression",nh),Ir("CompoundExpression",Wa,{omit:["_evaluate"]}),Rs)Rs[pa]._classRegistryKey||Ir("Expression_"+pa,Rs[pa]);function oh(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function ah(a){return yf&&a instanceof yf}function Ml(a,l){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(oh(a)||ah(a))return l&&l.push(a),a;if(ArrayBuffer.isView(a)){var f=a;return l&&l.push(f.buffer),f}if(a instanceof vf)return l&&l.push(a.data.buffer),a;if(Array.isArray(a)){for(var _=[],k=0,D=a;k<D.length;k+=1)_.push(Ml(D[k],l));return _}if(typeof a=="object"){var M=a.constructor,H=M._classRegistryKey;if(!H)throw new Error("can't serialize object of unregistered class");var X=M.serialize?M.serialize(a,l):{};if(!M.serialize){for(var ie in a)if(a.hasOwnProperty(ie)&&!(_o[H].omit.indexOf(ie)>=0)){var ue=a[ie];X[ie]=_o[H].shallow.indexOf(ie)>=0?ue:Ml(ue,l)}a instanceof Error&&(X.message=a.message)}if(X.$name)throw new Error("$name property is reserved for worker serialization logic.");return H!=="Object"&&(X.$name=H),X}throw new Error("can't serialize object of type "+typeof a)}function Es(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||oh(a)||ah(a)||ArrayBuffer.isView(a)||a instanceof vf)return a;if(Array.isArray(a))return a.map(Es);if(typeof a=="object"){var l=a.$name||"Object",f=_o[l].klass;if(!f)throw new Error("can't deserialize unregistered class "+l);if(f.deserialize)return f.deserialize(a);for(var _=Object.create(f.prototype),k=0,D=Object.keys(a);k<D.length;k+=1){var M=D[k];if(M!=="$name"){var H=a[M];_[M]=_o[l].shallow.indexOf(M)>=0?H:Es(H)}}return _}throw new Error("can't deserialize object of type "+typeof a)}var sd=function(){this.first=!0};sd.prototype.update=function(a,l){var f=Math.floor(a);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=a,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=l),a!==this.lastZoom&&(this.lastZoom=a,this.lastFloorZoom=f,!0))};var nr={"Latin-1 Supplement":function(a){return a>=128&&a<=255},Arabic:function(a){return a>=1536&&a<=1791},"Arabic Supplement":function(a){return a>=1872&&a<=1919},"Arabic Extended-A":function(a){return a>=2208&&a<=2303},"Hangul Jamo":function(a){return a>=4352&&a<=4607},"Unified Canadian Aboriginal Syllabics":function(a){return a>=5120&&a<=5759},Khmer:function(a){return a>=6016&&a<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(a){return a>=6320&&a<=6399},"General Punctuation":function(a){return a>=8192&&a<=8303},"Letterlike Symbols":function(a){return a>=8448&&a<=8527},"Number Forms":function(a){return a>=8528&&a<=8591},"Miscellaneous Technical":function(a){return a>=8960&&a<=9215},"Control Pictures":function(a){return a>=9216&&a<=9279},"Optical Character Recognition":function(a){return a>=9280&&a<=9311},"Enclosed Alphanumerics":function(a){return a>=9312&&a<=9471},"Geometric Shapes":function(a){return a>=9632&&a<=9727},"Miscellaneous Symbols":function(a){return a>=9728&&a<=9983},"Miscellaneous Symbols and Arrows":function(a){return a>=11008&&a<=11263},"CJK Radicals Supplement":function(a){return a>=11904&&a<=12031},"Kangxi Radicals":function(a){return a>=12032&&a<=12255},"Ideographic Description Characters":function(a){return a>=12272&&a<=12287},"CJK Symbols and Punctuation":function(a){return a>=12288&&a<=12351},Hiragana:function(a){return a>=12352&&a<=12447},Katakana:function(a){return a>=12448&&a<=12543},Bopomofo:function(a){return a>=12544&&a<=12591},"Hangul Compatibility Jamo":function(a){return a>=12592&&a<=12687},Kanbun:function(a){return a>=12688&&a<=12703},"Bopomofo Extended":function(a){return a>=12704&&a<=12735},"CJK Strokes":function(a){return a>=12736&&a<=12783},"Katakana Phonetic Extensions":function(a){return a>=12784&&a<=12799},"Enclosed CJK Letters and Months":function(a){return a>=12800&&a<=13055},"CJK Compatibility":function(a){return a>=13056&&a<=13311},"CJK Unified Ideographs Extension A":function(a){return a>=13312&&a<=19903},"Yijing Hexagram Symbols":function(a){return a>=19904&&a<=19967},"CJK Unified Ideographs":function(a){return a>=19968&&a<=40959},"Yi Syllables":function(a){return a>=40960&&a<=42127},"Yi Radicals":function(a){return a>=42128&&a<=42191},"Hangul Jamo Extended-A":function(a){return a>=43360&&a<=43391},"Hangul Syllables":function(a){return a>=44032&&a<=55215},"Hangul Jamo Extended-B":function(a){return a>=55216&&a<=55295},"Private Use Area":function(a){return a>=57344&&a<=63743},"CJK Compatibility Ideographs":function(a){return a>=63744&&a<=64255},"Arabic Presentation Forms-A":function(a){return a>=64336&&a<=65023},"Vertical Forms":function(a){return a>=65040&&a<=65055},"CJK Compatibility Forms":function(a){return a>=65072&&a<=65103},"Small Form Variants":function(a){return a>=65104&&a<=65135},"Arabic Presentation Forms-B":function(a){return a>=65136&&a<=65279},"Halfwidth and Fullwidth Forms":function(a){return a>=65280&&a<=65519}};function Ko(a){for(var l=0,f=a;l<f.length;l+=1)if(cp(f[l].charCodeAt(0)))return!0;return!1}function cp(a){return!(a!==746&&a!==747&&(a<4352||!(nr["Bopomofo Extended"](a)||nr.Bopomofo(a)||nr["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||nr["CJK Compatibility Ideographs"](a)||nr["CJK Compatibility"](a)||nr["CJK Radicals Supplement"](a)||nr["CJK Strokes"](a)||!(!nr["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||nr["CJK Unified Ideographs Extension A"](a)||nr["CJK Unified Ideographs"](a)||nr["Enclosed CJK Letters and Months"](a)||nr["Hangul Compatibility Jamo"](a)||nr["Hangul Jamo Extended-A"](a)||nr["Hangul Jamo Extended-B"](a)||nr["Hangul Jamo"](a)||nr["Hangul Syllables"](a)||nr.Hiragana(a)||nr["Ideographic Description Characters"](a)||nr.Kanbun(a)||nr["Kangxi Radicals"](a)||nr["Katakana Phonetic Extensions"](a)||nr.Katakana(a)&&a!==12540||!(!nr["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!nr["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||nr["Unified Canadian Aboriginal Syllabics"](a)||nr["Unified Canadian Aboriginal Syllabics Extended"](a)||nr["Vertical Forms"](a)||nr["Yijing Hexagram Symbols"](a)||nr["Yi Syllables"](a)||nr["Yi Radicals"](a))))}function sh(a){return!(cp(a)||function(l){return!!(nr["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||nr["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||nr["Letterlike Symbols"](l)||nr["Number Forms"](l)||nr["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||nr["Control Pictures"](l)&&l!==9251||nr["Optical Character Recognition"](l)||nr["Enclosed Alphanumerics"](l)||nr["Geometric Shapes"](l)||nr["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||nr["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||nr["CJK Symbols and Punctuation"](l)||nr.Katakana(l)||nr["Private Use Area"](l)||nr["CJK Compatibility Forms"](l)||nr["Small Form Variants"](l)||nr["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(a))}function Ks(a){return a>=1424&&a<=2303||nr["Arabic Presentation Forms-A"](a)||nr["Arabic Presentation Forms-B"](a)}function Ga(a,l){return!(!l&&Ks(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||nr.Khmer(a))}function bf(a){for(var l=0,f=a;l<f.length;l+=1)if(Ks(f[l].charCodeAt(0)))return!0;return!1}var Zs=null,ma="unavailable",ga=null,Su=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(ma="error"),Zs&&Zs(a)};function Ys(){_f.fire(new Fe("pluginStateChange",{pluginStatus:ma,pluginURL:ga}))}var _f=new _e,$u=function(){return ma},Ll=function(){if(ma!=="deferred"||!ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ma="loading",Ys(),ga&&ha({url:ga},function(a){a?Su(a):(ma="loaded",Ys())})},ml={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ma==="loaded"||ml.applyArabicShaping!=null},isLoading:function(){return ma==="loading"},setState:function(a){ma=a.pluginStatus,ga=a.pluginURL},isParsed:function(){return ml.applyArabicShaping!=null&&ml.processBidirectionalText!=null&&ml.processStyledBidirectionalText!=null},getPluginURL:function(){return ga}},In=function(a,l){this.zoom=a,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new sd,this.transition={})};In.prototype.isSupportedScript=function(a){return function(l,f){for(var _=0,k=l;_<k.length;_+=1)if(!Ga(k[_].charCodeAt(0),f))return!1;return!0}(a,ml.isLoaded())},In.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},In.prototype.getCrossfadeParameters=function(){var a=this.zoom,l=a-Math.floor(a),f=this.crossFadingFactor();return a>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*l}};var Ts=function(a,l){this.property=a,this.value=l,this.expression=function(f,_){if(hf(f))return new df(f,_);if(Fs(f)){var k=hm(f,_);if(k.result==="error")throw new Error(k.value.map(function(M){return M.key+": "+M.message}).join(", "));return k.value}var D=f;return typeof f=="string"&&_.type==="color"&&(D=Vn.parse(f)),{kind:"constant",evaluate:function(){return D}}}(l===void 0?a.specification.default:l,a.specification)};Ts.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},Ts.prototype.possiblyEvaluate=function(a,l,f){return this.property.possiblyEvaluate(this,a,l,f)};var Rl=function(a){this.property=a,this.value=new Ts(a,void 0)};Rl.prototype.transitioned=function(a,l){return new eu(this.property,this.value,l,Se({},a.transition,this.transition),a.now)},Rl.prototype.untransitioned=function(){return new eu(this.property,this.value,null,{},0)};var ia=function(a){this._properties=a,this._values=Object.create(a.defaultTransitionablePropertyValues)};ia.prototype.getValue=function(a){return kt(this._values[a].value.value)},ia.prototype.setValue=function(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new Rl(this._values[a].property)),this._values[a].value=new Ts(this._values[a].property,l===null?void 0:kt(l))},ia.prototype.getTransition=function(a){return kt(this._values[a].transition)},ia.prototype.setTransition=function(a,l){this._values.hasOwnProperty(a)||(this._values[a]=new Rl(this._values[a].property)),this._values[a].transition=kt(l)||void 0},ia.prototype.serialize=function(){for(var a={},l=0,f=Object.keys(this._values);l<f.length;l+=1){var _=f[l],k=this.getValue(_);k!==void 0&&(a[_]=k);var D=this.getTransition(_);D!==void 0&&(a[_+"-transition"]=D)}return a},ia.prototype.transitioned=function(a,l){for(var f=new Gu(this._properties),_=0,k=Object.keys(this._values);_<k.length;_+=1){var D=k[_];f._values[D]=this._values[D].transitioned(a,l._values[D])}return f},ia.prototype.untransitioned=function(){for(var a=new Gu(this._properties),l=0,f=Object.keys(this._values);l<f.length;l+=1){var _=f[l];a._values[_]=this._values[_].untransitioned()}return a};var eu=function(a,l,f,_,k){this.property=a,this.value=l,this.begin=k+_.delay||0,this.end=this.begin+_.duration||0,a.specification.transition&&(_.delay||_.duration)&&(this.prior=f)};eu.prototype.possiblyEvaluate=function(a,l,f){var _=a.now||0,k=this.value.possiblyEvaluate(a,l,f),D=this.prior;if(D){if(_>this.end)return this.prior=null,k;if(this.value.isDataDriven())return this.prior=null,k;if(_<this.begin)return D.possiblyEvaluate(a,l,f);var M=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(D.possiblyEvaluate(a,l,f),k,function(H){if(H<=0)return 0;if(H>=1)return 1;var X=H*H,ie=X*H;return 4*(H<.5?ie:3*(H-X)+ie-.75)}(M))}return k};var Gu=function(a){this._properties=a,this._values=Object.create(a.defaultTransitioningPropertyValues)};Gu.prototype.possiblyEvaluate=function(a,l,f){for(var _=new aa(this._properties),k=0,D=Object.keys(this._values);k<D.length;k+=1){var M=D[k];_._values[M]=this._values[M].possiblyEvaluate(a,l,f)}return _},Gu.prototype.hasTransition=function(){for(var a=0,l=Object.keys(this._values);a<l.length;a+=1)if(this._values[l[a]].prior)return!0;return!1};var Le=function(a){this._properties=a,this._values=Object.create(a.defaultPropertyValues)};Le.prototype.getValue=function(a){return kt(this._values[a].value)},Le.prototype.setValue=function(a,l){this._values[a]=new Ts(this._values[a].property,l===null?void 0:kt(l))},Le.prototype.serialize=function(){for(var a={},l=0,f=Object.keys(this._values);l<f.length;l+=1){var _=f[l],k=this.getValue(_);k!==void 0&&(a[_]=k)}return a},Le.prototype.possiblyEvaluate=function(a,l,f){for(var _=new aa(this._properties),k=0,D=Object.keys(this._values);k<D.length;k+=1){var M=D[k];_._values[M]=this._values[M].possiblyEvaluate(a,l,f)}return _};var oa=function(a,l,f){this.property=a,this.value=l,this.parameters=f};oa.prototype.isConstant=function(){return this.value.kind==="constant"},oa.prototype.constantOr=function(a){return this.value.kind==="constant"?this.value.value:a},oa.prototype.evaluate=function(a,l,f,_){return this.property.evaluate(this.value,this.parameters,a,l,f,_)};var aa=function(a){this._properties=a,this._values=Object.create(a.defaultPossiblyEvaluatedValues)};aa.prototype.get=function(a){return this._values[a]};var mr=function(a){this.specification=a};mr.prototype.possiblyEvaluate=function(a,l){return a.expression.evaluate(l)},mr.prototype.interpolate=function(a,l,f){var _=Vu[this.specification.type];return _?_(a,l,f):a};var Xt=function(a,l){this.specification=a,this.overrides=l};Xt.prototype.possiblyEvaluate=function(a,l,f,_){return new oa(this,a.expression.kind==="constant"||a.expression.kind==="camera"?{kind:"constant",value:a.expression.evaluate(l,null,{},f,_)}:a.expression,l)},Xt.prototype.interpolate=function(a,l,f){if(a.value.kind!=="constant"||l.value.kind!=="constant")return a;if(a.value.value===void 0||l.value.value===void 0)return new oa(this,{kind:"constant",value:void 0},a.parameters);var _=Vu[this.specification.type];return _?new oa(this,{kind:"constant",value:_(a.value.value,l.value.value,f)},a.parameters):a},Xt.prototype.evaluate=function(a,l,f,_,k,D){return a.kind==="constant"?a.value:a.evaluate(l,f,_,k,D)};var Zo=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(f,_,k,D){if(f.value===void 0)return new oa(this,{kind:"constant",value:void 0},_);if(f.expression.kind==="constant"){var M=f.expression.evaluate(_,null,{},k,D),H=f.property.specification.type==="resolvedImage"&&typeof M!="string"?M.name:M,X=this._calculate(H,H,H,_);return new oa(this,{kind:"constant",value:X},_)}if(f.expression.kind==="camera"){var ie=this._calculate(f.expression.evaluate({zoom:_.zoom-1}),f.expression.evaluate({zoom:_.zoom}),f.expression.evaluate({zoom:_.zoom+1}),_);return new oa(this,{kind:"constant",value:ie},_)}return new oa(this,f.expression,_)},l.prototype.evaluate=function(f,_,k,D,M,H){if(f.kind==="source"){var X=f.evaluate(_,k,D,M,H);return this._calculate(X,X,X,_)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(_.zoom)-1},k,D),f.evaluate({zoom:Math.floor(_.zoom)},k,D),f.evaluate({zoom:Math.floor(_.zoom)+1},k,D),_):f.value},l.prototype._calculate=function(f,_,k,D){return D.zoom>D.zoomHistory.lastIntegerZoom?{from:f,to:_}:{from:k,to:_}},l.prototype.interpolate=function(f){return f},l}(Xt),va=function(a){this.specification=a};va.prototype.possiblyEvaluate=function(a,l,f,_){if(a.value!==void 0){if(a.expression.kind==="constant"){var k=a.expression.evaluate(l,null,{},f,_);return this._calculate(k,k,k,l)}return this._calculate(a.expression.evaluate(new In(Math.floor(l.zoom-1),l)),a.expression.evaluate(new In(Math.floor(l.zoom),l)),a.expression.evaluate(new In(Math.floor(l.zoom+1),l)),l)}},va.prototype._calculate=function(a,l,f,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:a,to:l}:{from:f,to:l}},va.prototype.interpolate=function(a){return a};var tu=function(a){this.specification=a};tu.prototype.possiblyEvaluate=function(a,l,f,_){return!!a.expression.evaluate(l,null,{},f,_)},tu.prototype.interpolate=function(){return!1};var ao=function(a){for(var l in this.properties=a,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],a){var f=a[l];f.specification.overridable&&this.overridableProperties.push(l);var _=this.defaultPropertyValues[l]=new Ts(f,void 0),k=this.defaultTransitionablePropertyValues[l]=new Rl(f);this.defaultTransitioningPropertyValues[l]=k.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=_.possiblyEvaluate({})}};Ir("DataDrivenProperty",Xt),Ir("DataConstantProperty",mr),Ir("CrossFadedDataDrivenProperty",Zo),Ir("CrossFadedProperty",va),Ir("ColorRampProperty",tu);var Eu=function(a){function l(f,_){if(a.call(this),this.id=f.id,this.type=f.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},f.type!=="custom"&&(this.metadata=(f=f).metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),_.layout&&(this._unevaluatedLayout=new Le(_.layout)),_.paint)){for(var k in this._transitionablePaint=new ia(_.paint),f.paint)this.setPaintProperty(k,f.paint[k],{validate:!1});for(var D in f.layout)this.setLayoutProperty(D,f.layout[D],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new aa(_.paint)}}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},l.prototype.getLayoutProperty=function(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)},l.prototype.setLayoutProperty=function(f,_,k){k===void 0&&(k={}),_!=null&&this._validate(ih,"layers."+this.id+".layout."+f,f,_,k)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,_):this.visibility=_)},l.prototype.getPaintProperty=function(f){return st(f,"-transition")?this._transitionablePaint.getTransition(f.slice(0,-11)):this._transitionablePaint.getValue(f)},l.prototype.setPaintProperty=function(f,_,k){if(k===void 0&&(k={}),_!=null&&this._validate(gf,"layers."+this.id+".paint."+f,f,_,k))return!1;if(st(f,"-transition"))return this._transitionablePaint.setTransition(f.slice(0,-11),_||void 0),!1;var D=this._transitionablePaint._values[f],M=D.property.specification["property-type"]==="cross-faded-data-driven",H=D.value.isDataDriven(),X=D.value;this._transitionablePaint.setValue(f,_),this._handleSpecialPaintPropertyUpdate(f);var ie=this._transitionablePaint._values[f].value;return ie.isDataDriven()||H||M||this._handleOverridablePaintPropertyUpdate(f,X,ie)},l.prototype._handleSpecialPaintPropertyUpdate=function(f){},l.prototype._handleOverridablePaintPropertyUpdate=function(f,_,k){return!1},l.prototype.isHidden=function(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"},l.prototype.updateTransitions=function(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)},l.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},l.prototype.recalculate=function(f,_){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,_)},l.prototype.serialize=function(){var f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),lt(f,function(_,k){return!(_===void 0||k==="layout"&&!Object.keys(_).length||k==="paint"&&!Object.keys(_).length)})},l.prototype._validate=function(f,_,k,D,M){return M===void 0&&(M={}),(!M||M.validate!==!1)&&Ql(this,f.call(mf,{key:_,layerType:this.type,objectKey:k,value:D,styleSpec:fe,style:{glyphs:!0,sprite:!0}}))},l.prototype.is3D=function(){return!1},l.prototype.isTileClipped=function(){return!1},l.prototype.hasOffscreenPass=function(){return!1},l.prototype.resize=function(){},l.prototype.isStateDependent=function(){for(var f in this.paint._values){var _=this.paint.get(f);if(_ instanceof oa&&Wu(_.property.specification)&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1},l}(_e),mm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},fp=function(a,l){this._structArray=a,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},ui=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ya(a,l){l===void 0&&(l=1);var f=0,_=0;return{members:a.map(function(k){var D=mm[k.type].BYTES_PER_ELEMENT,M=f=Fl(f,Math.max(l,D)),H=k.components||1;return _=Math.max(_,D),f+=D*H,{name:k.name,type:k.type,components:H,offset:M}}),size:Fl(f,Math.max(_,l)),alignment:l}}function Fl(a,l){return Math.ceil(a/l)*l}ui.serialize=function(a,l){return a._trim(),l&&(a.isTransferred=!0,l.push(a.arrayBuffer)),{length:a.length,arrayBuffer:a.arrayBuffer}},ui.deserialize=function(a){var l=Object.create(this.prototype);return l.arrayBuffer=a.arrayBuffer,l.length=a.length,l.capacity=a.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l},ui.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},ui.prototype.clear=function(){this.length=0},ui.prototype.resize=function(a){this.reserve(a),this.length=a},ui.prototype.reserve=function(a){if(a>this.capacity){this.capacity=Math.max(a,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}},ui.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var xf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_){var k=this.length;return this.resize(k+1),this.emplace(k,f,_)},l.prototype.emplace=function(f,_,k){var D=2*f;return this.int16[D+0]=_,this.int16[D+1]=k,f},l}(ui);xf.prototype.bytesPerElement=4,Ir("StructArrayLayout2i4",xf);var ld=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D){var M=this.length;return this.resize(M+1),this.emplace(M,f,_,k,D)},l.prototype.emplace=function(f,_,k,D,M){var H=4*f;return this.int16[H+0]=_,this.int16[H+1]=k,this.int16[H+2]=D,this.int16[H+3]=M,f},l}(ui);ld.prototype.bytesPerElement=8,Ir("StructArrayLayout4i8",ld);var ru=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H){var X=this.length;return this.resize(X+1),this.emplace(X,f,_,k,D,M,H)},l.prototype.emplace=function(f,_,k,D,M,H,X){var ie=6*f;return this.int16[ie+0]=_,this.int16[ie+1]=k,this.int16[ie+2]=D,this.int16[ie+3]=M,this.int16[ie+4]=H,this.int16[ie+5]=X,f},l}(ui);ru.prototype.bytesPerElement=12,Ir("StructArrayLayout2i4i12",ru);var Ns=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H){var X=this.length;return this.resize(X+1),this.emplace(X,f,_,k,D,M,H)},l.prototype.emplace=function(f,_,k,D,M,H,X){var ie=4*f,ue=8*f;return this.int16[ie+0]=_,this.int16[ie+1]=k,this.uint8[ue+4]=D,this.uint8[ue+5]=M,this.uint8[ue+6]=H,this.uint8[ue+7]=X,f},l}(ui);Ns.prototype.bytesPerElement=8,Ir("StructArrayLayout2i4ub8",Ns);var wf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_){var k=this.length;return this.resize(k+1),this.emplace(k,f,_)},l.prototype.emplace=function(f,_,k){var D=2*f;return this.float32[D+0]=_,this.float32[D+1]=k,f},l}(ui);wf.prototype.bytesPerElement=8,Ir("StructArrayLayout2f8",wf);var ba=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H,X,ie,ue,ge){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,f,_,k,D,M,H,X,ie,ue,ge)},l.prototype.emplace=function(f,_,k,D,M,H,X,ie,ue,ge,Ae){var Oe=10*f;return this.uint16[Oe+0]=_,this.uint16[Oe+1]=k,this.uint16[Oe+2]=D,this.uint16[Oe+3]=M,this.uint16[Oe+4]=H,this.uint16[Oe+5]=X,this.uint16[Oe+6]=ie,this.uint16[Oe+7]=ue,this.uint16[Oe+8]=ge,this.uint16[Oe+9]=Ae,f},l}(ui);ba.prototype.bytesPerElement=20,Ir("StructArrayLayout10ui20",ba);var ud=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe){var $e=this.length;return this.resize($e+1),this.emplace($e,f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe)},l.prototype.emplace=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e){var Ke=12*f;return this.int16[Ke+0]=_,this.int16[Ke+1]=k,this.int16[Ke+2]=D,this.int16[Ke+3]=M,this.uint16[Ke+4]=H,this.uint16[Ke+5]=X,this.uint16[Ke+6]=ie,this.uint16[Ke+7]=ue,this.int16[Ke+8]=ge,this.int16[Ke+9]=Ae,this.int16[Ke+10]=Oe,this.int16[Ke+11]=$e,f},l}(ui);ud.prototype.bytesPerElement=24,Ir("StructArrayLayout4i4ui4i24",ud);var Tu=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k){var D=this.length;return this.resize(D+1),this.emplace(D,f,_,k)},l.prototype.emplace=function(f,_,k,D){var M=3*f;return this.float32[M+0]=_,this.float32[M+1]=k,this.float32[M+2]=D,f},l}(ui);Tu.prototype.bytesPerElement=12,Ir("StructArrayLayout3f12",Tu);var cd=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},l.prototype.emplace=function(f,_){return this.uint32[1*f+0]=_,f},l}(ui);cd.prototype.bytesPerElement=4,Ir("StructArrayLayout1ul4",cd);var lh=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H,X,ie,ue){var ge=this.length;return this.resize(ge+1),this.emplace(ge,f,_,k,D,M,H,X,ie,ue)},l.prototype.emplace=function(f,_,k,D,M,H,X,ie,ue,ge){var Ae=10*f,Oe=5*f;return this.int16[Ae+0]=_,this.int16[Ae+1]=k,this.int16[Ae+2]=D,this.int16[Ae+3]=M,this.int16[Ae+4]=H,this.int16[Ae+5]=X,this.uint32[Oe+3]=ie,this.uint16[Ae+8]=ue,this.uint16[Ae+9]=ge,f},l}(ui);lh.prototype.bytesPerElement=20,Ir("StructArrayLayout6i1ul2ui20",lh);var Xs=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H){var X=this.length;return this.resize(X+1),this.emplace(X,f,_,k,D,M,H)},l.prototype.emplace=function(f,_,k,D,M,H,X){var ie=6*f;return this.int16[ie+0]=_,this.int16[ie+1]=k,this.int16[ie+2]=D,this.int16[ie+3]=M,this.int16[ie+4]=H,this.int16[ie+5]=X,f},l}(ui);Xs.prototype.bytesPerElement=12,Ir("StructArrayLayout2i2i2i12",Xs);var Js=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M){var H=this.length;return this.resize(H+1),this.emplace(H,f,_,k,D,M)},l.prototype.emplace=function(f,_,k,D,M,H){var X=4*f,ie=8*f;return this.float32[X+0]=_,this.float32[X+1]=k,this.float32[X+2]=D,this.int16[ie+6]=M,this.int16[ie+7]=H,f},l}(ui);Js.prototype.bytesPerElement=16,Ir("StructArrayLayout2f1f2i16",Js);var gm=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D){var M=this.length;return this.resize(M+1),this.emplace(M,f,_,k,D)},l.prototype.emplace=function(f,_,k,D,M){var H=12*f,X=3*f;return this.uint8[H+0]=_,this.uint8[H+1]=k,this.float32[X+1]=D,this.float32[X+2]=M,f},l}(ui);gm.prototype.bytesPerElement=12,Ir("StructArrayLayout2ub2f12",gm);var Ku=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k){var D=this.length;return this.resize(D+1),this.emplace(D,f,_,k)},l.prototype.emplace=function(f,_,k,D){var M=3*f;return this.uint16[M+0]=_,this.uint16[M+1]=k,this.uint16[M+2]=D,f},l}(ui);Ku.prototype.bytesPerElement=6,Ir("StructArrayLayout3ui6",Ku);var ji=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt){var At=this.length;return this.resize(At+1),this.emplace(At,f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt)},l.prototype.emplace=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt,At){var Lt=24*f,Nt=12*f,Gt=48*f;return this.int16[Lt+0]=_,this.int16[Lt+1]=k,this.uint16[Lt+2]=D,this.uint16[Lt+3]=M,this.uint32[Nt+2]=H,this.uint32[Nt+3]=X,this.uint32[Nt+4]=ie,this.uint16[Lt+10]=ue,this.uint16[Lt+11]=ge,this.uint16[Lt+12]=Ae,this.float32[Nt+7]=Oe,this.float32[Nt+8]=$e,this.uint8[Gt+36]=Ke,this.uint8[Gt+37]=ot,this.uint8[Gt+38]=Qe,this.uint32[Nt+10]=yt,this.int16[Lt+22]=At,f},l}(ui);ji.prototype.bytesPerElement=48,Ir("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ji);var mi=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt,At,Lt,Nt,Gt,lr,br,$r,Ar,Xr,Dr,Bn){var mn=this.length;return this.resize(mn+1),this.emplace(mn,f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt,At,Lt,Nt,Gt,lr,br,$r,Ar,Xr,Dr,Bn)},l.prototype.emplace=function(f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke,ot,Qe,yt,At,Lt,Nt,Gt,lr,br,$r,Ar,Xr,Dr,Bn,mn){var jr=34*f,Gn=17*f;return this.int16[jr+0]=_,this.int16[jr+1]=k,this.int16[jr+2]=D,this.int16[jr+3]=M,this.int16[jr+4]=H,this.int16[jr+5]=X,this.int16[jr+6]=ie,this.int16[jr+7]=ue,this.uint16[jr+8]=ge,this.uint16[jr+9]=Ae,this.uint16[jr+10]=Oe,this.uint16[jr+11]=$e,this.uint16[jr+12]=Ke,this.uint16[jr+13]=ot,this.uint16[jr+14]=Qe,this.uint16[jr+15]=yt,this.uint16[jr+16]=At,this.uint16[jr+17]=Lt,this.uint16[jr+18]=Nt,this.uint16[jr+19]=Gt,this.uint16[jr+20]=lr,this.uint16[jr+21]=br,this.uint16[jr+22]=$r,this.uint32[Gn+12]=Ar,this.float32[Gn+13]=Xr,this.float32[Gn+14]=Dr,this.float32[Gn+15]=Bn,this.float32[Gn+16]=mn,f},l}(ui);mi.prototype.bytesPerElement=68,Ir("StructArrayLayout8i15ui1ul4f68",mi);var Ka=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},l.prototype.emplace=function(f,_){return this.float32[1*f+0]=_,f},l}(ui);Ka.prototype.bytesPerElement=4,Ir("StructArrayLayout1f4",Ka);var La=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k){var D=this.length;return this.resize(D+1),this.emplace(D,f,_,k)},l.prototype.emplace=function(f,_,k,D){var M=3*f;return this.int16[M+0]=_,this.int16[M+1]=k,this.int16[M+2]=D,f},l}(ui);La.prototype.bytesPerElement=6,Ir("StructArrayLayout3i6",La);var Au=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k){var D=this.length;return this.resize(D+1),this.emplace(D,f,_,k)},l.prototype.emplace=function(f,_,k,D){var M=4*f;return this.uint32[2*f+0]=_,this.uint16[M+2]=k,this.uint16[M+3]=D,f},l}(ui);Au.prototype.bytesPerElement=8,Ir("StructArrayLayout1ul2ui8",Au);var uh=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_){var k=this.length;return this.resize(k+1),this.emplace(k,f,_)},l.prototype.emplace=function(f,_,k){var D=2*f;return this.uint16[D+0]=_,this.uint16[D+1]=k,f},l}(ui);uh.prototype.bytesPerElement=4,Ir("StructArrayLayout2ui4",uh);var ch=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},l.prototype.emplace=function(f,_){return this.uint16[1*f+0]=_,f},l}(ui);ch.prototype.bytesPerElement=2,Ir("StructArrayLayout1ui2",ch);var fh=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},l.prototype.emplaceBack=function(f,_,k,D){var M=this.length;return this.resize(M+1),this.emplace(M,f,_,k,D)},l.prototype.emplace=function(f,_,k,D,M){var H=4*f;return this.float32[H+0]=_,this.float32[H+1]=k,this.float32[H+2]=D,this.float32[H+3]=M,f},l}(ui);fh.prototype.bytesPerElement=16,Ir("StructArrayLayout4f16",fh);var d=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var f={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return f.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},f.x1.get=function(){return this._structArray.int16[this._pos2+2]},f.y1.get=function(){return this._structArray.int16[this._pos2+3]},f.x2.get=function(){return this._structArray.int16[this._pos2+4]},f.y2.get=function(){return this._structArray.int16[this._pos2+5]},f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.anchorPoint.get=function(){return new ee(this.anchorPointX,this.anchorPointY)},Object.defineProperties(l.prototype,f),l}(fp);d.prototype.size=20;var v=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(f){return new d(this,f)},l}(lh);Ir("CollisionBoxArray",v);var g=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},f.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},f.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},f.segment.get=function(){return this._structArray.uint16[this._pos2+10]},f.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},f.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},f.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},f.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},f.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},f.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},f.placedOrientation.set=function(_){this._structArray.uint8[this._pos1+37]=_},f.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},f.hidden.set=function(_){this._structArray.uint8[this._pos1+38]=_},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},f.crossTileID.set=function(_){this._structArray.uint32[this._pos4+10]=_},f.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(l.prototype,f),l}(fp);g.prototype.size=48;var x=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(f){return new g(this,f)},l}(ji);Ir("PlacedSymbolArray",x);var O=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},f.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},f.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},f.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},f.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},f.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},f.key.get=function(){return this._structArray.uint16[this._pos2+8]},f.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},f.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},f.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},f.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},f.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},f.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},f.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},f.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},f.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},f.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},f.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},f.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},f.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},f.crossTileID.set=function(_){this._structArray.uint32[this._pos4+12]=_},f.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},f.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},f.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},f.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(l.prototype,f),l}(fp);O.prototype.size=68;var F=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(f){return new O(this,f)},l}(mi);Ir("SymbolInstanceArray",F);var z=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getoffsetX=function(f){return this.float32[1*f+0]},l}(Ka);Ir("GlyphOffsetArray",z);var Y=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.getx=function(f){return this.int16[3*f+0]},l.prototype.gety=function(f){return this.int16[3*f+1]},l.prototype.gettileUnitDistanceFromAnchor=function(f){return this.int16[3*f+2]},l}(La);Ir("SymbolLineVertexArray",Y);var ae=function(a){function l(){a.apply(this,arguments)}a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l;var f={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(l.prototype,f),l}(fp);ae.prototype.size=8;var be=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.get=function(f){return new ae(this,f)},l}(Au);Ir("FeatureIndexArray",be);var De=ya([{name:"a_pos",components:2,type:"Int16"}],4).members,Me=function(a){a===void 0&&(a=[]),this.segments=a};function Ne(a,l){return 256*(a=he(Math.floor(a),0,255))+he(Math.floor(l),0,255)}Me.prototype.prepareSegment=function(a,l,f,_){var k=this.segments[this.segments.length-1];return a>Me.MAX_VERTEX_ARRAY_LENGTH&&Ut("Max vertices per segment is "+Me.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+a),(!k||k.vertexLength+a>Me.MAX_VERTEX_ARRAY_LENGTH||k.sortKey!==_)&&(k={vertexOffset:l.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},_!==void 0&&(k.sortKey=_),this.segments.push(k)),k},Me.prototype.get=function(){return this.segments},Me.prototype.destroy=function(){for(var a=0,l=this.segments;a<l.length;a+=1){var f=l[a];for(var _ in f.vaos)f.vaos[_].destroy()}},Me.simpleSegment=function(a,l,f,_){return new Me([{vertexOffset:a,primitiveOffset:l,vertexLength:f,primitiveLength:_,vaos:{},sortKey:0}])},Me.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ir("SegmentVector",Me);var Ye=ya([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Ze=K(function(a){a.exports=function(l,f){var _,k,D,M,H,X,ie,ue;for(k=l.length-(_=3&l.length),D=f,H=3432918353,X=461845907,ue=0;ue<k;)ie=255&l.charCodeAt(ue)|(255&l.charCodeAt(++ue))<<8|(255&l.charCodeAt(++ue))<<16|(255&l.charCodeAt(++ue))<<24,++ue,D=27492+(65535&(M=5*(65535&(D=(D^=ie=(65535&(ie=(ie=(65535&ie)*H+(((ie>>>16)*H&65535)<<16)&4294967295)<<15|ie>>>17))*X+(((ie>>>16)*X&65535)<<16)&4294967295)<<13|D>>>19))+((5*(D>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(ie=0,_){case 3:ie^=(255&l.charCodeAt(ue+2))<<16;case 2:ie^=(255&l.charCodeAt(ue+1))<<8;case 1:D^=ie=(65535&(ie=(ie=(65535&(ie^=255&l.charCodeAt(ue)))*H+(((ie>>>16)*H&65535)<<16)&4294967295)<<15|ie>>>17))*X+(((ie>>>16)*X&65535)<<16)&4294967295}return D^=l.length,D=2246822507*(65535&(D^=D>>>16))+((2246822507*(D>>>16)&65535)<<16)&4294967295,D=3266489909*(65535&(D^=D>>>13))+((3266489909*(D>>>16)&65535)<<16)&4294967295,(D^=D>>>16)>>>0}}),et=K(function(a){a.exports=function(l,f){for(var _,k=l.length,D=f^k,M=0;k>=4;)_=1540483477*(65535&(_=255&l.charCodeAt(M)|(255&l.charCodeAt(++M))<<8|(255&l.charCodeAt(++M))<<16|(255&l.charCodeAt(++M))<<24))+((1540483477*(_>>>16)&65535)<<16),D=1540483477*(65535&D)+((1540483477*(D>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),k-=4,++M;switch(k){case 3:D^=(255&l.charCodeAt(M+2))<<16;case 2:D^=(255&l.charCodeAt(M+1))<<8;case 1:D=1540483477*(65535&(D^=255&l.charCodeAt(M)))+((1540483477*(D>>>16)&65535)<<16)}return D=1540483477*(65535&(D^=D>>>13))+((1540483477*(D>>>16)&65535)<<16),(D^=D>>>15)>>>0}}),Ve=Ze,tt=et;Ve.murmur3=Ze,Ve.murmur2=tt;var ft=function(){this.ids=[],this.positions=[],this.indexed=!1};ft.prototype.add=function(a,l,f,_){this.ids.push(Bt(a)),this.positions.push(l,f,_)},ft.prototype.getPositions=function(a){for(var l=Bt(a),f=0,_=this.ids.length-1;f<_;){var k=f+_>>1;this.ids[k]>=l?_=k:f=k+1}for(var D=[];this.ids[f]===l;)D.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return D},ft.serialize=function(a,l){var f=new Float64Array(a.ids),_=new Uint32Array(a.positions);return function k(D,M,H,X){for(;H<X;){for(var ie=D[H+X>>1],ue=H-1,ge=X+1;;){do ue++;while(D[ue]<ie);do ge--;while(D[ge]>ie);if(ue>=ge)break;Pt(D,ue,ge),Pt(M,3*ue,3*ge),Pt(M,3*ue+1,3*ge+1),Pt(M,3*ue+2,3*ge+2)}ge-H<X-ge?(k(D,M,H,ge),H=ge+1):(k(D,M,ge+1,X),X=ge)}}(f,_,0,f.length-1),l&&l.push(f.buffer,_.buffer),{ids:f,positions:_}},ft.deserialize=function(a){var l=new ft;return l.ids=a.ids,l.positions=a.positions,l.indexed=!0,l};var xt=Math.pow(2,53)-1;function Bt(a){var l=+a;return!isNaN(l)&&l<=xt?l:Ve(String(a))}function Pt(a,l,f){var _=a[l];a[l]=a[f],a[f]=_}Ir("FeaturePositionMap",ft);var Dt=function(a,l){this.gl=a.gl,this.location=l},Yt=function(a){function l(f,_){a.call(this,f,_),this.current=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))},l}(Dt),hr=function(a){function l(f,_){a.call(this,f,_),this.current=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))},l}(Dt),or=function(a){function l(f,_){a.call(this,f,_),this.current=[0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))},l}(Dt),Er=function(a){function l(f,_){a.call(this,f,_),this.current=[0,0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))},l}(Dt),Wr=function(a){function l(f,_){a.call(this,f,_),this.current=[0,0,0,0]}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))},l}(Dt),Vr=function(a){function l(f,_){a.call(this,f,_),this.current=Vn.transparent}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))},l}(Dt),Mr=new Float32Array(16),vn=function(a){function l(f,_){a.call(this,f,_),this.current=Mr}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.set=function(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(var _=1;_<16;_++)if(f[_]!==this.current[_]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}},l}(Dt);function Cr(a){return[Ne(255*a.r,255*a.g),Ne(255*a.b,255*a.a)]}var gn=function(a,l,f){this.value=a,this.uniformNames=l.map(function(_){return"u_"+_}),this.type=f};gn.prototype.setUniform=function(a,l,f){a.set(f.constantOr(this.value))},gn.prototype.getBinding=function(a,l,f){return this.type==="color"?new Vr(a,l):new hr(a,l)};var Dn=function(a,l){this.uniformNames=l.map(function(f){return"u_"+f}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Dn.prototype.setConstantPatternPositions=function(a,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=a.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=a.tlbr},Dn.prototype.setUniform=function(a,l,f,_){var k=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;k&&a.set(k)},Dn.prototype.getBinding=function(a,l,f){return f.substr(0,9)==="u_pattern"?new Wr(a,l):new hr(a,l)};var cn=function(a,l,f,_){this.expression=a,this.type=f,this.maxValue=0,this.paintVertexAttributes=l.map(function(k){return{name:"a_"+k,type:"Float32",components:f==="color"?2:1,offset:0}}),this.paintVertexArray=new _};cn.prototype.populatePaintArray=function(a,l,f,_,k){var D=this.paintVertexArray.length,M=this.expression.evaluate(new In(0),l,{},_,[],k);this.paintVertexArray.resize(a),this._setPaintValue(D,a,M)},cn.prototype.updatePaintArray=function(a,l,f,_){var k=this.expression.evaluate({zoom:0},f,_);this._setPaintValue(a,l,k)},cn.prototype._setPaintValue=function(a,l,f){if(this.type==="color")for(var _=Cr(f),k=a;k<l;k++)this.paintVertexArray.emplace(k,_[0],_[1]);else{for(var D=a;D<l;D++)this.paintVertexArray.emplace(D,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}},cn.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},cn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var sn=function(a,l,f,_,k,D){this.expression=a,this.uniformNames=l.map(function(M){return"u_"+M+"_t"}),this.type=f,this.useIntegerZoom=_,this.zoom=k,this.maxValue=0,this.paintVertexAttributes=l.map(function(M){return{name:"a_"+M,type:"Float32",components:f==="color"?4:2,offset:0}}),this.paintVertexArray=new D};sn.prototype.populatePaintArray=function(a,l,f,_,k){var D=this.expression.evaluate(new In(this.zoom),l,{},_,[],k),M=this.expression.evaluate(new In(this.zoom+1),l,{},_,[],k),H=this.paintVertexArray.length;this.paintVertexArray.resize(a),this._setPaintValue(H,a,D,M)},sn.prototype.updatePaintArray=function(a,l,f,_){var k=this.expression.evaluate({zoom:this.zoom},f,_),D=this.expression.evaluate({zoom:this.zoom+1},f,_);this._setPaintValue(a,l,k,D)},sn.prototype._setPaintValue=function(a,l,f,_){if(this.type==="color")for(var k=Cr(f),D=Cr(_),M=a;M<l;M++)this.paintVertexArray.emplace(M,k[0],k[1],D[0],D[1]);else{for(var H=a;H<l;H++)this.paintVertexArray.emplace(H,f,_);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(_))}},sn.prototype.upload=function(a){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=a.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},sn.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},sn.prototype.setUniform=function(a,l){var f=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,_=he(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);a.set(_)},sn.prototype.getBinding=function(a,l,f){return new hr(a,l)};var An=function(a,l,f,_,k,D){this.expression=a,this.type=l,this.useIntegerZoom=f,this.zoom=_,this.layerId=D,this.zoomInPaintVertexArray=new k,this.zoomOutPaintVertexArray=new k};An.prototype.populatePaintArray=function(a,l,f){var _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(a),this.zoomOutPaintVertexArray.resize(a),this._setPaintValues(_,a,l.patterns&&l.patterns[this.layerId],f)},An.prototype.updatePaintArray=function(a,l,f,_,k){this._setPaintValues(a,l,f.patterns&&f.patterns[this.layerId],k)},An.prototype._setPaintValues=function(a,l,f,_){if(_&&f){var k=_[f.min],D=_[f.mid],M=_[f.max];if(k&&D&&M)for(var H=a;H<l;H++)this.zoomInPaintVertexArray.emplace(H,D.tl[0],D.tl[1],D.br[0],D.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],D.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,D.tl[0],D.tl[1],D.br[0],D.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],D.pixelRatio,M.pixelRatio)}},An.prototype.upload=function(a){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=a.createVertexBuffer(this.zoomInPaintVertexArray,Ye.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=a.createVertexBuffer(this.zoomOutPaintVertexArray,Ye.members,this.expression.isStateDependent))},An.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var nn=function(a,l,f){this.binders={},this._buffers=[];var _=[];for(var k in a.paint._values)if(f(k)){var D=a.paint.get(k);if(D instanceof oa&&Wu(D.property.specification)){var M=xo(k,a.type),H=D.value,X=D.property.specification.type,ie=D.property.useIntegerZoom,ue=D.property.specification["property-type"],ge=ue==="cross-faded"||ue==="cross-faded-data-driven";if(H.kind==="constant")this.binders[k]=ge?new Dn(H.value,M):new gn(H.value,M,X),_.push("/u_"+k);else if(H.kind==="source"||ge){var Ae=wo(k,X,"source");this.binders[k]=ge?new An(H,X,ie,l,Ae,a.id):new cn(H,M,X,Ae),_.push("/a_"+k)}else{var Oe=wo(k,X,"composite");this.binders[k]=new sn(H,M,X,ie,l,Oe),_.push("/z_"+k)}}}this.cacheKey=_.sort().join("")};nn.prototype.getMaxValue=function(a){var l=this.binders[a];return l instanceof cn||l instanceof sn?l.maxValue:0},nn.prototype.populatePaintArrays=function(a,l,f,_,k){for(var D in this.binders){var M=this.binders[D];(M instanceof cn||M instanceof sn||M instanceof An)&&M.populatePaintArray(a,l,f,_,k)}},nn.prototype.setConstantPatternPositions=function(a,l){for(var f in this.binders){var _=this.binders[f];_ instanceof Dn&&_.setConstantPatternPositions(a,l)}},nn.prototype.updatePaintArrays=function(a,l,f,_,k){var D=!1;for(var M in a)for(var H=0,X=l.getPositions(M);H<X.length;H+=1){var ie=X[H],ue=f.feature(ie.index);for(var ge in this.binders){var Ae=this.binders[ge];if((Ae instanceof cn||Ae instanceof sn||Ae instanceof An)&&Ae.expression.isStateDependent===!0){var Oe=_.paint.get(ge);Ae.expression=Oe.value,Ae.updatePaintArray(ie.start,ie.end,ue,a[M],k),D=!0}}}return D},nn.prototype.defines=function(){var a=[];for(var l in this.binders){var f=this.binders[l];(f instanceof gn||f instanceof Dn)&&a.push.apply(a,f.uniformNames.map(function(_){return"#define HAS_UNIFORM_"+_}))}return a},nn.prototype.getBinderAttributes=function(){var a=[];for(var l in this.binders){var f=this.binders[l];if(f instanceof cn||f instanceof sn)for(var _=0;_<f.paintVertexAttributes.length;_++)a.push(f.paintVertexAttributes[_].name);else if(f instanceof An)for(var k=0;k<Ye.members.length;k++)a.push(Ye.members[k].name)}return a},nn.prototype.getBinderUniforms=function(){var a=[];for(var l in this.binders){var f=this.binders[l];if(f instanceof gn||f instanceof Dn||f instanceof sn)for(var _=0,k=f.uniformNames;_<k.length;_+=1)a.push(k[_])}return a},nn.prototype.getPaintVertexBuffers=function(){return this._buffers},nn.prototype.getUniforms=function(a,l){var f=[];for(var _ in this.binders){var k=this.binders[_];if(k instanceof gn||k instanceof Dn||k instanceof sn)for(var D=0,M=k.uniformNames;D<M.length;D+=1){var H=M[D];if(l[H]){var X=k.getBinding(a,l[H],H);f.push({name:H,property:_,binding:X})}}}return f},nn.prototype.setUniforms=function(a,l,f,_){for(var k=0,D=l;k<D.length;k+=1){var M=D[k],H=M.name,X=M.property;this.binders[X].setUniform(M.binding,_,f.get(X),H)}},nn.prototype.updatePaintBuffers=function(a){for(var l in this._buffers=[],this.binders){var f=this.binders[l];if(a&&f instanceof An){var _=a.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(f instanceof cn||f instanceof sn)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}},nn.prototype.upload=function(a){for(var l in this.binders){var f=this.binders[l];(f instanceof cn||f instanceof sn||f instanceof An)&&f.upload(a)}this.updatePaintBuffers()},nn.prototype.destroy=function(){for(var a in this.binders){var l=this.binders[a];(l instanceof cn||l instanceof sn||l instanceof An)&&l.destroy()}};var ln=function(a,l,f){f===void 0&&(f=function(){return!0}),this.programConfigurations={};for(var _=0,k=a;_<k.length;_+=1){var D=k[_];this.programConfigurations[D.id]=new nn(D,l,f)}this.needsUpload=!1,this._featureMap=new ft,this._bufferOffset=0};function xo(a,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(l+"-","").replace(/-/g,"_")]}function wo(a,l,f){var _={color:{source:wf,composite:fh},number:{source:Ka,composite:wf}},k=function(D){return{"line-pattern":{source:ba,composite:ba},"fill-pattern":{source:ba,composite:ba},"fill-extrusion-pattern":{source:ba,composite:ba}}[D]}(a);return k&&k[f]||_[l][f]}ln.prototype.populatePaintArrays=function(a,l,f,_,k,D){for(var M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(a,l,_,k,D);l.id!==void 0&&this._featureMap.add(l.id,f,this._bufferOffset,a),this._bufferOffset=a,this.needsUpload=!0},ln.prototype.updatePaintArrays=function(a,l,f,_){for(var k=0,D=f;k<D.length;k+=1){var M=D[k];this.needsUpload=this.programConfigurations[M.id].updatePaintArrays(a,this._featureMap,l,M,_)||this.needsUpload}},ln.prototype.get=function(a){return this.programConfigurations[a]},ln.prototype.upload=function(a){if(this.needsUpload){for(var l in this.programConfigurations)this.programConfigurations[l].upload(a);this.needsUpload=!1}},ln.prototype.destroy=function(){for(var a in this.programConfigurations)this.programConfigurations[a].destroy()},Ir("ConstantBinder",gn),Ir("CrossFadedConstantBinder",Dn),Ir("SourceExpressionBinder",cn),Ir("CrossFadedCompositeBinder",An),Ir("CompositeExpressionBinder",sn),Ir("ProgramConfiguration",nn,{omit:["_buffers"]}),Ir("ProgramConfigurationSet",ln);var Io=Math.pow(2,14)-1,_a=-Io-1;function Ki(a){for(var l=8192/a.extent,f=a.loadGeometry(),_=0;_<f.length;_++)for(var k=f[_],D=0;D<k.length;D++){var M=k[D],H=Math.round(M.x*l),X=Math.round(M.y*l);M.x=he(H,_a,Io),M.y=he(X,_a,Io),(H<M.x||H>M.x+1||X<M.y||X>M.y+1)&&Ut("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return f}function So(a,l){return{type:a.type,id:a.id,properties:a.properties,geometry:l?Ki(a):[]}}function xa(a,l,f,_,k){a.emplaceBack(2*l+(_+1)/2,2*f+(k+1)/2)}var os=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new xf,this.indexArray=new Ku,this.segments=new Me,this.programConfigurations=new ln(a.layers,a.zoom),this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function Zu(a,l){for(var f=0;f<a.length;f++)if(wa(l,a[f]))return!0;for(var _=0;_<l.length;_++)if(wa(a,l[_]))return!0;return!!Yu(a,l)}function As(a,l,f){return!!wa(a,l)||!!ku(l,a,f)}function ks(a,l){if(a.length===1)return Ef(l,a[0]);for(var f=0;f<l.length;f++)for(var _=l[f],k=0;k<_.length;k++)if(wa(a,_[k]))return!0;for(var D=0;D<a.length;D++)if(Ef(l,a[D]))return!0;for(var M=0;M<l.length;M++)if(Yu(a,l[M]))return!0;return!1}function Za(a,l,f){if(a.length>1){if(Yu(a,l))return!0;for(var _=0;_<l.length;_++)if(ku(l[_],a,f))return!0}for(var k=0;k<a.length;k++)if(ku(a[k],l,f))return!0;return!1}function Yu(a,l){if(a.length===0||l.length===0)return!1;for(var f=0;f<a.length-1;f++)for(var _=a[f],k=a[f+1],D=0;D<l.length-1;D++)if(ql(_,k,l[D],l[D+1]))return!0;return!1}function ql(a,l,f,_){return Wt(a,f,_)!==Wt(l,f,_)&&Wt(a,l,f)!==Wt(a,l,_)}function ku(a,l,f){var _=f*f;if(l.length===1)return a.distSqr(l[0])<_;for(var k=1;k<l.length;k++)if(Sf(a,l[k-1],l[k])<_)return!0;return!1}function Sf(a,l,f){var _=l.distSqr(f);if(_===0)return a.distSqr(l);var k=((a.x-l.x)*(f.x-l.x)+(a.y-l.y)*(f.y-l.y))/_;return a.distSqr(k<0?l:k>1?f:f.sub(l)._mult(k)._add(l))}function Ef(a,l){for(var f,_,k,D=!1,M=0;M<a.length;M++)for(var H=0,X=(f=a[M]).length-1;H<f.length;X=H++)(_=f[H]).y>l.y!=(k=f[X]).y>l.y&&l.x<(k.x-_.x)*(l.y-_.y)/(k.y-_.y)+_.x&&(D=!D);return D}function wa(a,l){for(var f=!1,_=0,k=a.length-1;_<a.length;k=_++){var D=a[_],M=a[k];D.y>l.y!=M.y>l.y&&l.x<(M.x-D.x)*(l.y-D.y)/(M.y-D.y)+D.x&&(f=!f)}return f}function Cu(a,l,f){var _=f[0],k=f[2];if(a.x<_.x&&l.x<_.x||a.x>k.x&&l.x>k.x||a.y<_.y&&l.y<_.y||a.y>k.y&&l.y>k.y)return!1;var D=Wt(a,l,f[0]);return D!==Wt(a,l,f[1])||D!==Wt(a,l,f[2])||D!==Wt(a,l,f[3])}function Bs(a,l,f){var _=l.paint.get(a).value;return _.kind==="constant"?_.value:f.programConfigurations.get(l.id).getMaxValue(a)}function sa(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Iu(a,l,f,_,k){if(!l[0]&&!l[1])return a;var D=ee.convert(l)._mult(k);f==="viewport"&&D._rotate(-_);for(var M=[],H=0;H<a.length;H++)M.push(a[H].sub(D));return M}os.prototype.populate=function(a,l,f){var _=this.layers[0],k=[],D=null;_.type==="circle"&&(D=_.layout.get("circle-sort-key"));for(var M=0,H=a;M<H.length;M+=1){var X=H[M],ie=X.feature,ue=X.id,ge=X.index,Ae=X.sourceLayerIndex,Oe=this.layers[0]._featureFilter.needGeometry,$e=So(ie,Oe);if(this.layers[0]._featureFilter.filter(new In(this.zoom),$e,f)){var Ke=D?D.evaluate($e,{},f):void 0,ot={id:ue,properties:ie.properties,type:ie.type,sourceLayerIndex:Ae,index:ge,geometry:Oe?$e.geometry:Ki(ie),patterns:{},sortKey:Ke};k.push(ot)}}D&&k.sort(function(br,$r){return br.sortKey-$r.sortKey});for(var Qe=0,yt=k;Qe<yt.length;Qe+=1){var At=yt[Qe],Lt=At.geometry,Nt=At.index,Gt=At.sourceLayerIndex,lr=a[Nt].feature;this.addFeature(At,Lt,Nt,f),l.featureIndex.insert(lr,Lt,Nt,Gt,this.index)}},os.prototype.update=function(a,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,f)},os.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},os.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},os.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,De),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},os.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},os.prototype.addFeature=function(a,l,f,_){for(var k=0,D=l;k<D.length;k+=1)for(var M=0,H=D[k];M<H.length;M+=1){var X=H[M],ie=X.x,ue=X.y;if(!(ie<0||ie>=8192||ue<0||ue>=8192)){var ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,a.sortKey),Ae=ge.vertexLength;xa(this.layoutVertexArray,ie,ue,-1,-1),xa(this.layoutVertexArray,ie,ue,1,-1),xa(this.layoutVertexArray,ie,ue,1,1),xa(this.layoutVertexArray,ie,ue,-1,1),this.indexArray.emplaceBack(Ae,Ae+1,Ae+2),this.indexArray.emplaceBack(Ae,Ae+3,Ae+2),ge.vertexLength+=4,ge.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,{},_)},Ir("CircleBucket",os,{omit:["layers"]});var Xu=new ao({"circle-sort-key":new Xt(fe.layout_circle["circle-sort-key"])}),Tf={paint:new ao({"circle-radius":new Xt(fe.paint_circle["circle-radius"]),"circle-color":new Xt(fe.paint_circle["circle-color"]),"circle-blur":new Xt(fe.paint_circle["circle-blur"]),"circle-opacity":new Xt(fe.paint_circle["circle-opacity"]),"circle-translate":new mr(fe.paint_circle["circle-translate"]),"circle-translate-anchor":new mr(fe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mr(fe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mr(fe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt(fe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt(fe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt(fe.paint_circle["circle-stroke-opacity"])}),layout:Xu},ri=typeof Float32Array<"u"?Float32Array:Array;function to(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ya(a,l,f){var _=l[0],k=l[1],D=l[2],M=l[3],H=l[4],X=l[5],ie=l[6],ue=l[7],ge=l[8],Ae=l[9],Oe=l[10],$e=l[11],Ke=l[12],ot=l[13],Qe=l[14],yt=l[15],At=f[0],Lt=f[1],Nt=f[2],Gt=f[3];return a[0]=At*_+Lt*H+Nt*ge+Gt*Ke,a[1]=At*k+Lt*X+Nt*Ae+Gt*ot,a[2]=At*D+Lt*ie+Nt*Oe+Gt*Qe,a[3]=At*M+Lt*ue+Nt*$e+Gt*yt,a[4]=(At=f[4])*_+(Lt=f[5])*H+(Nt=f[6])*ge+(Gt=f[7])*Ke,a[5]=At*k+Lt*X+Nt*Ae+Gt*ot,a[6]=At*D+Lt*ie+Nt*Oe+Gt*Qe,a[7]=At*M+Lt*ue+Nt*$e+Gt*yt,a[8]=(At=f[8])*_+(Lt=f[9])*H+(Nt=f[10])*ge+(Gt=f[11])*Ke,a[9]=At*k+Lt*X+Nt*Ae+Gt*ot,a[10]=At*D+Lt*ie+Nt*Oe+Gt*Qe,a[11]=At*M+Lt*ue+Nt*$e+Gt*yt,a[12]=(At=f[12])*_+(Lt=f[13])*H+(Nt=f[14])*ge+(Gt=f[15])*Ke,a[13]=At*k+Lt*X+Nt*Ae+Gt*ot,a[14]=At*D+Lt*ie+Nt*Oe+Gt*Qe,a[15]=At*M+Lt*ue+Nt*$e+Gt*yt,a}Math.hypot||(Math.hypot=function(){for(var a=arguments,l=0,f=arguments.length;f--;)l+=a[f]*a[f];return Math.sqrt(l)});var Af,vm=Ya;function Kn(a,l,f){var _=l[0],k=l[1],D=l[2],M=l[3];return a[0]=f[0]*_+f[4]*k+f[8]*D+f[12]*M,a[1]=f[1]*_+f[5]*k+f[9]*D+f[13]*M,a[2]=f[2]*_+f[6]*k+f[10]*D+f[14]*M,a[3]=f[3]*_+f[7]*k+f[11]*D+f[15]*M,a}Af=new ri(3),ri!=Float32Array&&(Af[0]=0,Af[1]=0,Af[2]=0),function(){var a=new ri(4);ri!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0,a[3]=0)}();var Lg=(function(){var a=new ri(2);ri!=Float32Array&&(a[0]=0,a[1]=0)}(),function(a){function l(f){a.call(this,f,Tf)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(f){return new os(f)},l.prototype.queryRadius=function(f){var _=f;return Bs("circle-radius",this,_)+Bs("circle-stroke-width",this,_)+sa(this.paint.get("circle-translate"))},l.prototype.queryIntersectsFeature=function(f,_,k,D,M,H,X,ie){for(var ue=Iu(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),H.angle,X),ge=this.paint.get("circle-radius").evaluate(_,k)+this.paint.get("circle-stroke-width").evaluate(_,k),Ae=this.paint.get("circle-pitch-alignment")==="map",Oe=Ae?ue:function(lr,br){return lr.map(function($r){return hh($r,br)})}(ue,ie),$e=Ae?ge*X:ge,Ke=0,ot=D;Ke<ot.length;Ke+=1)for(var Qe=0,yt=ot[Ke];Qe<yt.length;Qe+=1){var At=yt[Qe],Lt=Ae?At:hh(At,ie),Nt=$e,Gt=Kn([],[At.x,At.y,0,1],ie);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Nt*=Gt[3]/H.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Nt*=H.cameraToCenterDistance/Gt[3]),As(Oe,Lt,Nt))return!0}return!1},l}(Eu));function hh(a,l){var f=Kn([],[a.x,a.y,0,1],l);return new ee(f[0]/f[3],f[1]/f[3])}var kf=function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(os);function Cf(a,l,f,_){var k=l.width,D=l.height;if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==k*D*f)throw new RangeError("mismatched image size")}else _=new Uint8Array(k*D*f);return a.width=k,a.height=D,a.data=_,a}function hp(a,l,f){var _=l.width,k=l.height;if(_!==a.width||k!==a.height){var D=Cf({},{width:_,height:k},f);yy(a,D,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,_),height:Math.min(a.height,k)},f),a.width=_,a.height=k,a.data=D.data}}function yy(a,l,f,_,k,D){if(k.width===0||k.height===0)return l;if(k.width>a.width||k.height>a.height||f.x>a.width-k.width||f.y>a.height-k.height)throw new RangeError("out of range source coordinates for image copy");if(k.width>l.width||k.height>l.height||_.x>l.width-k.width||_.y>l.height-k.height)throw new RangeError("out of range destination coordinates for image copy");for(var M=a.data,H=l.data,X=0;X<k.height;X++)for(var ie=((f.y+X)*a.width+f.x)*D,ue=((_.y+X)*l.width+_.x)*D,ge=0;ge<k.width*D;ge++)H[ue+ge]=M[ie+ge];return l}Ir("HeatmapBucket",kf,{omit:["layers"]});var No=function(a,l){Cf(this,a,1,l)};No.prototype.resize=function(a){hp(this,a,1)},No.prototype.clone=function(){return new No({width:this.width,height:this.height},new Uint8Array(this.data))},No.copy=function(a,l,f,_,k){yy(a,l,f,_,k,1)};var Xa=function(a,l){Cf(this,a,4,l)};Xa.prototype.resize=function(a){hp(this,a,4)},Xa.prototype.replace=function(a,l){l?this.data.set(a):this.data=a instanceof Uint8ClampedArray?new Uint8Array(a.buffer):a},Xa.prototype.clone=function(){return new Xa({width:this.width,height:this.height},new Uint8Array(this.data))},Xa.copy=function(a,l,f,_,k){yy(a,l,f,_,k,4)},Ir("AlphaImage",No),Ir("RGBAImage",Xa);var fd={paint:new ao({"heatmap-radius":new Xt(fe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt(fe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mr(fe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new tu(fe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mr(fe.paint_heatmap["heatmap-opacity"])})};function dh(a){var l={},f=a.resolution||256,_=a.clips?a.clips.length:1,k=a.image||new Xa({width:f,height:_}),D=function($e,Ke,ot){l[a.evaluationKey]=ot;var Qe=a.expression.evaluate(l);k.data[$e+Ke+0]=Math.floor(255*Qe.r/Qe.a),k.data[$e+Ke+1]=Math.floor(255*Qe.g/Qe.a),k.data[$e+Ke+2]=Math.floor(255*Qe.b/Qe.a),k.data[$e+Ke+3]=Math.floor(255*Qe.a)};if(a.clips)for(var M=0,H=0;M<_;++M,H+=4*f)for(var X=0,ie=0;X<f;X++,ie+=4){var ue=X/(f-1),ge=a.clips[M];D(H,ie,ge.start*(1-ue)+ge.end*ue)}else for(var Ae=0,Oe=0;Ae<f;Ae++,Oe+=4)D(0,Oe,Ae/(f-1));return k}var Oc=function(a){function l(f){a.call(this,f,fd),this._updateColorRamp()}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(f){return new kf(f)},l.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="heatmap-color"&&this._updateColorRamp()},l.prototype._updateColorRamp=function(){this.colorRamp=dh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},l.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},l}(Eu),x0={paint:new ao({"hillshade-illumination-direction":new mr(fe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new mr(fe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mr(fe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mr(fe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mr(fe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mr(fe.paint_hillshade["hillshade-accent-color"])})},nu=function(a){function l(f){a.call(this,f,x0)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},l}(Eu),iu=ya([{name:"a_pos",components:2,type:"Int16"}],4).members,dp=ph,by=ph;function ph(a,l,f){f=f||2;var _,k,D,M,H,X,ie,ue=l&&l.length,ge=ue?l[0]*f:a.length,Ae=pp(a,0,ge,f,!0),Oe=[];if(!Ae||Ae.next===Ae.prev)return Oe;if(ue&&(Ae=function(Ke,ot,Qe,yt){var At,Lt,Nt,Gt=[];for(At=0,Lt=ot.length;At<Lt;At++)(Nt=pp(Ke,ot[At]*yt,At<Lt-1?ot[At+1]*yt:Ke.length,yt,!1))===Nt.next&&(Nt.steiner=!0),Gt.push(q1(Nt));for(Gt.sort(If),At=0;At<Gt.length;At++)w0(Gt[At],Qe),Qe=gl(Qe,Qe.next);return Qe}(a,l,Ae,f)),a.length>80*f){_=D=a[0],k=M=a[1];for(var $e=f;$e<ge;$e+=f)(H=a[$e])<_&&(_=H),(X=a[$e+1])<k&&(k=X),H>D&&(D=H),X>M&&(M=X);ie=(ie=Math.max(D-_,M-k))!==0?1/ie:0}return mh(Ae,Oe,f,_,k,ie),Oe}function pp(a,l,f,_,k){var D,M;if(k===Ou(a,l,f,_)>0)for(D=l;D<f;D+=_)M=xy(D,a[D],a[D+1],M);else for(D=f-_;D>=l;D-=_)M=xy(D,a[D],a[D+1],M);return M&&gp(M,M.next)&&(wm(M),M=M.next),M}function gl(a,l){if(!a)return a;l||(l=a);var f,_=a;do if(f=!1,_.steiner||!gp(_,_.next)&&Bo(_.prev,_,_.next)!==0)_=_.next;else{if(wm(_),(_=l=_.prev)===_.next)break;f=!0}while(f||_!==l);return l}function mh(a,l,f,_,k,D,M){if(a){!M&&D&&function(ue,ge,Ae,Oe){var $e=ue;do $e.z===null&&($e.z=vh($e.x,$e.y,ge,Ae,Oe)),$e.prevZ=$e.prev,$e.nextZ=$e.next,$e=$e.next;while($e!==ue);$e.prevZ.nextZ=null,$e.prevZ=null,function(Ke){var ot,Qe,yt,At,Lt,Nt,Gt,lr,br=1;do{for(Qe=Ke,Ke=null,Lt=null,Nt=0;Qe;){for(Nt++,yt=Qe,Gt=0,ot=0;ot<br&&(Gt++,yt=yt.nextZ);ot++);for(lr=br;Gt>0||lr>0&&yt;)Gt!==0&&(lr===0||!yt||Qe.z<=yt.z)?(At=Qe,Qe=Qe.nextZ,Gt--):(At=yt,yt=yt.nextZ,lr--),Lt?Lt.nextZ=At:Ke=At,At.prevZ=Lt,Lt=At;Qe=yt}Lt.nextZ=null,br*=2}while(Nt>1)}($e)}(a,_,k,D);for(var H,X,ie=a;a.prev!==a.next;)if(H=a.prev,X=a.next,D?bm(a,_,k,D):ym(a))l.push(H.i/f),l.push(a.i/f),l.push(X.i/f),wm(a),a=X.next,ie=X.next;else if((a=X)===ie){M?M===1?mh(a=gh(gl(a),l,f),l,f,_,k,D,2):M===2&&_m(a,l,f,_,k,D):mh(gl(a),l,f,_,k,D,1);break}}}function ym(a){var l=a.prev,f=a,_=a.next;if(Bo(l,f,_)>=0)return!1;for(var k=a.next.next;k!==a.prev;){if(mp(l.x,l.y,f.x,f.y,_.x,_.y,k.x,k.y)&&Bo(k.prev,k,k.next)>=0)return!1;k=k.next}return!0}function bm(a,l,f,_){var k=a.prev,D=a,M=a.next;if(Bo(k,D,M)>=0)return!1;for(var H=k.x>D.x?k.x>M.x?k.x:M.x:D.x>M.x?D.x:M.x,X=k.y>D.y?k.y>M.y?k.y:M.y:D.y>M.y?D.y:M.y,ie=vh(k.x<D.x?k.x<M.x?k.x:M.x:D.x<M.x?D.x:M.x,k.y<D.y?k.y<M.y?k.y:M.y:D.y<M.y?D.y:M.y,l,f,_),ue=vh(H,X,l,f,_),ge=a.prevZ,Ae=a.nextZ;ge&&ge.z>=ie&&Ae&&Ae.z<=ue;){if(ge!==a.prev&&ge!==a.next&&mp(k.x,k.y,D.x,D.y,M.x,M.y,ge.x,ge.y)&&Bo(ge.prev,ge,ge.next)>=0||(ge=ge.prevZ,Ae!==a.prev&&Ae!==a.next&&mp(k.x,k.y,D.x,D.y,M.x,M.y,Ae.x,Ae.y)&&Bo(Ae.prev,Ae,Ae.next)>=0))return!1;Ae=Ae.nextZ}for(;ge&&ge.z>=ie;){if(ge!==a.prev&&ge!==a.next&&mp(k.x,k.y,D.x,D.y,M.x,M.y,ge.x,ge.y)&&Bo(ge.prev,ge,ge.next)>=0)return!1;ge=ge.prevZ}for(;Ae&&Ae.z<=ue;){if(Ae!==a.prev&&Ae!==a.next&&mp(k.x,k.y,D.x,D.y,M.x,M.y,Ae.x,Ae.y)&&Bo(Ae.prev,Ae,Ae.next)>=0)return!1;Ae=Ae.nextZ}return!0}function gh(a,l,f){var _=a;do{var k=_.prev,D=_.next.next;!gp(k,D)&&S0(k,_,_.next,D)&&Cs(k,D)&&Cs(D,k)&&(l.push(k.i/f),l.push(_.i/f),l.push(D.i/f),wm(_),wm(_.next),_=a=D),_=_.next}while(_!==a);return gl(_)}function _m(a,l,f,_,k,D){var M=a;do{for(var H=M.next.next;H!==M.prev;){if(M.i!==H.i&&xm(M,H)){var X=Du(M,H);return M=gl(M,M.next),X=gl(X,X.next),mh(M,l,f,_,k,D),void mh(X,l,f,_,k,D)}H=H.next}M=M.next}while(M!==a)}function If(a,l){return a.x-l.x}function w0(a,l){if(l=function(_,k){var D,M=k,H=_.x,X=_.y,ie=-1/0;do{if(X<=M.y&&X>=M.next.y&&M.next.y!==M.y){var ue=M.x+(X-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(ue<=H&&ue>ie){if(ie=ue,ue===H){if(X===M.y)return M;if(X===M.next.y)return M.next}D=M.x<M.next.x?M:M.next}}M=M.next}while(M!==k);if(!D)return null;if(H===ie)return D;var ge,Ae=D,Oe=D.x,$e=D.y,Ke=1/0;M=D;do H>=M.x&&M.x>=Oe&&H!==M.x&&mp(X<$e?H:ie,X,Oe,$e,X<$e?ie:H,X,M.x,M.y)&&(ge=Math.abs(X-M.y)/(H-M.x),Cs(M,_)&&(ge<Ke||ge===Ke&&(M.x>D.x||M.x===D.x&&_y(D,M)))&&(D=M,Ke=ge)),M=M.next;while(M!==Ae);return D}(a,l)){var f=Du(l,a);gl(l,l.next),gl(f,f.next)}}function _y(a,l){return Bo(a.prev,a,l.prev)<0&&Bo(l.next,a,a.next)<0}function vh(a,l,f,_,k){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=32767*(a-f)*k)|a<<8))|a<<4))|a<<2))|a<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=32767*(l-_)*k)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function q1(a){var l=a,f=a;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==a);return f}function mp(a,l,f,_,k,D,M,H){return(k-M)*(l-H)-(a-M)*(D-H)>=0&&(a-M)*(_-H)-(f-M)*(l-H)>=0&&(f-M)*(D-H)-(k-M)*(_-H)>=0}function xm(a,l){return a.next.i!==l.i&&a.prev.i!==l.i&&!function(f,_){var k=f;do{if(k.i!==f.i&&k.next.i!==f.i&&k.i!==_.i&&k.next.i!==_.i&&S0(k,k.next,f,_))return!0;k=k.next}while(k!==f);return!1}(a,l)&&(Cs(a,l)&&Cs(l,a)&&function(f,_){var k=f,D=!1,M=(f.x+_.x)/2,H=(f.y+_.y)/2;do k.y>H!=k.next.y>H&&k.next.y!==k.y&&M<(k.next.x-k.x)*(H-k.y)/(k.next.y-k.y)+k.x&&(D=!D),k=k.next;while(k!==f);return D}(a,l)&&(Bo(a.prev,a,l.prev)||Bo(a,l.prev,l))||gp(a,l)&&Bo(a.prev,a,a.next)>0&&Bo(l.prev,l,l.next)>0)}function Bo(a,l,f){return(l.y-a.y)*(f.x-l.x)-(l.x-a.x)*(f.y-l.y)}function gp(a,l){return a.x===l.x&&a.y===l.y}function S0(a,l,f,_){var k=vp(Bo(a,l,f)),D=vp(Bo(a,l,_)),M=vp(Bo(f,_,a)),H=vp(Bo(f,_,l));return k!==D&&M!==H||!(k!==0||!hd(a,f,l))||!(D!==0||!hd(a,_,l))||!(M!==0||!hd(f,a,_))||!(H!==0||!hd(f,l,_))}function hd(a,l,f){return l.x<=Math.max(a.x,f.x)&&l.x>=Math.min(a.x,f.x)&&l.y<=Math.max(a.y,f.y)&&l.y>=Math.min(a.y,f.y)}function vp(a){return a>0?1:a<0?-1:0}function Cs(a,l){return Bo(a.prev,a,a.next)<0?Bo(a,l,a.next)>=0&&Bo(a,a.prev,l)>=0:Bo(a,l,a.prev)<0||Bo(a,a.next,l)<0}function Du(a,l){var f=new yh(a.i,a.x,a.y),_=new yh(l.i,l.x,l.y),k=a.next,D=l.prev;return a.next=l,l.prev=a,f.next=k,k.prev=f,_.next=f,f.prev=_,D.next=_,_.prev=D,_}function xy(a,l,f,_){var k=new yh(a,l,f);return _?(k.next=_.next,k.prev=_,_.next.prev=k,_.next=k):(k.prev=k,k.next=k),k}function wm(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function yh(a,l,f){this.i=a,this.x=l,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ou(a,l,f,_){for(var k=0,D=l,M=f-_;D<f;D+=_)k+=(a[M]-a[D])*(a[D+1]+a[M+1]),M=D;return k}function yp(a,l,f,_,k){(function D(M,H,X,ie,ue){for(;ie>X;){if(ie-X>600){var ge=ie-X+1,Ae=H-X+1,Oe=Math.log(ge),$e=.5*Math.exp(2*Oe/3),Ke=.5*Math.sqrt(Oe*$e*(ge-$e)/ge)*(Ae-ge/2<0?-1:1);D(M,H,Math.max(X,Math.floor(H-Ae*$e/ge+Ke)),Math.min(ie,Math.floor(H+(ge-Ae)*$e/ge+Ke)),ue)}var ot=M[H],Qe=X,yt=ie;for(bp(M,X,H),ue(M[ie],ot)>0&&bp(M,X,ie);Qe<yt;){for(bp(M,Qe,yt),Qe++,yt--;ue(M[Qe],ot)<0;)Qe++;for(;ue(M[yt],ot)>0;)yt--}ue(M[X],ot)===0?bp(M,X,yt):bp(M,++yt,ie),yt<=H&&(X=yt+1),H<=yt&&(ie=yt-1)}})(a,l,f||0,_||a.length-1,k||E0)}function bp(a,l,f){var _=a[l];a[l]=a[f],a[f]=_}function E0(a,l){return a<l?-1:a>l?1:0}function Rg(a,l){var f=a.length;if(f<=1)return[a];for(var _,k,D=[],M=0;M<f;M++){var H=Ht(a[M]);H!==0&&(a[M].area=Math.abs(H),k===void 0&&(k=H<0),k===H<0?(_&&D.push(_),_=[a[M]]):_.push(a[M]))}if(_&&D.push(_),l>1)for(var X=0;X<D.length;X++)D[X].length<=l||(yp(D[X],l,1,D[X].length-1,_p),D[X]=D[X].slice(0,l));return D}function _p(a,l){return l.area-a.area}function dd(a,l,f){for(var _=f.patternDependencies,k=!1,D=0,M=l;D<M.length;D+=1){var H=M[D].paint.get(a+"-pattern");H.isConstant()||(k=!0);var X=H.constantOr(null);X&&(k=!0,_[X.to]=!0,_[X.from]=!0)}return k}function wy(a,l,f,_,k){for(var D=k.patternDependencies,M=0,H=l;M<H.length;M+=1){var X=H[M],ie=X.paint.get(a+"-pattern").value;if(ie.kind!=="constant"){var ue=ie.evaluate({zoom:_-1},f,{},k.availableImages),ge=ie.evaluate({zoom:_},f,{},k.availableImages),Ae=ie.evaluate({zoom:_+1},f,{},k.availableImages);ge=ge&&ge.name?ge.name:ge,Ae=Ae&&Ae.name?Ae.name:Ae,D[ue=ue&&ue.name?ue.name:ue]=!0,D[ge]=!0,D[Ae]=!0,f.patterns[X.id]={min:ue,mid:ge,max:Ae}}}return f}ph.deviation=function(a,l,f,_){var k=l&&l.length,D=Math.abs(Ou(a,0,k?l[0]*f:a.length,f));if(k)for(var M=0,H=l.length;M<H;M++)D-=Math.abs(Ou(a,l[M]*f,M<H-1?l[M+1]*f:a.length,f));var X=0;for(M=0;M<_.length;M+=3){var ie=_[M]*f,ue=_[M+1]*f,ge=_[M+2]*f;X+=Math.abs((a[ie]-a[ge])*(a[ue+1]-a[ie+1])-(a[ie]-a[ue])*(a[ge+1]-a[ie+1]))}return D===0&&X===0?0:Math.abs((X-D)/D)},ph.flatten=function(a){for(var l=a[0][0].length,f={vertices:[],holes:[],dimensions:l},_=0,k=0;k<a.length;k++){for(var D=0;D<a[k].length;D++)for(var M=0;M<l;M++)f.vertices.push(a[k][D][M]);k>0&&f.holes.push(_+=a[k-1].length)}return f},dp.default=by;var ou=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xf,this.indexArray=new Ku,this.indexArray2=new uh,this.programConfigurations=new ln(a.layers,a.zoom),this.segments=new Me,this.segments2=new Me,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};ou.prototype.populate=function(a,l,f){this.hasPattern=dd("fill",this.layers,l);for(var _=this.layers[0].layout.get("fill-sort-key"),k=[],D=0,M=a;D<M.length;D+=1){var H=M[D],X=H.feature,ie=H.id,ue=H.index,ge=H.sourceLayerIndex,Ae=this.layers[0]._featureFilter.needGeometry,Oe=So(X,Ae);if(this.layers[0]._featureFilter.filter(new In(this.zoom),Oe,f)){var $e=_?_.evaluate(Oe,{},f,l.availableImages):void 0,Ke={id:ie,properties:X.properties,type:X.type,sourceLayerIndex:ge,index:ue,geometry:Ae?Oe.geometry:Ki(X),patterns:{},sortKey:$e};k.push(Ke)}}_&&k.sort(function(lr,br){return lr.sortKey-br.sortKey});for(var ot=0,Qe=k;ot<Qe.length;ot+=1){var yt=Qe[ot],At=yt.geometry,Lt=yt.index,Nt=yt.sourceLayerIndex;if(this.hasPattern){var Gt=wy("fill",this.layers,yt,this.zoom,l);this.patternFeatures.push(Gt)}else this.addFeature(yt,At,Lt,f,{});l.featureIndex.insert(a[Lt].feature,At,Lt,Nt,this.index)}},ou.prototype.update=function(a,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,f)},ou.prototype.addFeatures=function(a,l,f){for(var _=0,k=this.patternFeatures;_<k.length;_+=1){var D=k[_];this.addFeature(D,D.geometry,D.index,l,f)}},ou.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ou.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ou.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,iu),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.indexBuffer2=a.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(a),this.uploaded=!0},ou.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},ou.prototype.addFeature=function(a,l,f,_,k){for(var D=0,M=Rg(l,500);D<M.length;D+=1){for(var H=M[D],X=0,ie=0,ue=H;ie<ue.length;ie+=1)X+=ue[ie].length;for(var ge=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray),Ae=ge.vertexLength,Oe=[],$e=[],Ke=0,ot=H;Ke<ot.length;Ke+=1){var Qe=ot[Ke];if(Qe.length!==0){Qe!==H[0]&&$e.push(Oe.length/2);var yt=this.segments2.prepareSegment(Qe.length,this.layoutVertexArray,this.indexArray2),At=yt.vertexLength;this.layoutVertexArray.emplaceBack(Qe[0].x,Qe[0].y),this.indexArray2.emplaceBack(At+Qe.length-1,At),Oe.push(Qe[0].x),Oe.push(Qe[0].y);for(var Lt=1;Lt<Qe.length;Lt++)this.layoutVertexArray.emplaceBack(Qe[Lt].x,Qe[Lt].y),this.indexArray2.emplaceBack(At+Lt-1,At+Lt),Oe.push(Qe[Lt].x),Oe.push(Qe[Lt].y);yt.vertexLength+=Qe.length,yt.primitiveLength+=Qe.length}}for(var Nt=dp(Oe,$e),Gt=0;Gt<Nt.length;Gt+=3)this.indexArray.emplaceBack(Ae+Nt[Gt],Ae+Nt[Gt+1],Ae+Nt[Gt+2]);ge.vertexLength+=X,ge.primitiveLength+=Nt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,k,_)},Ir("FillBucket",ou,{omit:["layers","patternFeatures"]});var T0=new ao({"fill-sort-key":new Xt(fe.layout_fill["fill-sort-key"])}),Fg={paint:new ao({"fill-antialias":new mr(fe.paint_fill["fill-antialias"]),"fill-opacity":new Xt(fe.paint_fill["fill-opacity"]),"fill-color":new Xt(fe.paint_fill["fill-color"]),"fill-outline-color":new Xt(fe.paint_fill["fill-outline-color"]),"fill-translate":new mr(fe.paint_fill["fill-translate"]),"fill-translate-anchor":new mr(fe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Zo(fe.paint_fill["fill-pattern"])}),layout:T0},Sy=function(a){function l(f){a.call(this,f,Fg)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.recalculate=function(f,_){a.prototype.recalculate.call(this,f,_);var k=this.paint._values["fill-outline-color"];k.value.kind==="constant"&&k.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},l.prototype.createBucket=function(f){return new ou(f)},l.prototype.queryRadius=function(){return sa(this.paint.get("fill-translate"))},l.prototype.queryIntersectsFeature=function(f,_,k,D,M,H,X){return ks(Iu(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),H.angle,X),D)},l.prototype.isTileClipped=function(){return!0},l}(Eu),xp=ya([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Sm=Df;function Df(a,l,f,_,k){this.properties={},this.extent=f,this.type=0,this._pbf=a,this._geometry=-1,this._keys=_,this._values=k,a.readFields(A0,this,l)}function A0(a,l,f){a==1?l.id=f.readVarint():a==2?function(_,k){for(var D=_.readVarint()+_.pos;_.pos<D;){var M=k._keys[_.readVarint()],H=k._values[_.readVarint()];k.properties[M]=H}}(f,l):a==3?l.type=f.readVarint():a==4&&(l._geometry=f.pos)}function pd(a){for(var l,f,_=0,k=0,D=a.length,M=D-1;k<D;M=k++)_+=((f=a[M]).x-(l=a[k]).x)*(l.y+f.y);return _}Df.types=["Unknown","Point","LineString","Polygon"],Df.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var l,f=a.readVarint()+a.pos,_=1,k=0,D=0,M=0,H=[];a.pos<f;){if(k<=0){var X=a.readVarint();_=7&X,k=X>>3}if(k--,_===1||_===2)D+=a.readSVarint(),M+=a.readSVarint(),_===1&&(l&&H.push(l),l=[]),l.push(new ee(D,M));else{if(_!==7)throw new Error("unknown command "+_);l&&l.push(l[0].clone())}}return l&&H.push(l),H},Df.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var l=a.readVarint()+a.pos,f=1,_=0,k=0,D=0,M=1/0,H=-1/0,X=1/0,ie=-1/0;a.pos<l;){if(_<=0){var ue=a.readVarint();f=7&ue,_=ue>>3}if(_--,f===1||f===2)(k+=a.readSVarint())<M&&(M=k),k>H&&(H=k),(D+=a.readSVarint())<X&&(X=D),D>ie&&(ie=D);else if(f!==7)throw new Error("unknown command "+f)}return[M,X,H,ie]},Df.prototype.toGeoJSON=function(a,l,f){var _,k,D=this.extent*Math.pow(2,f),M=this.extent*a,H=this.extent*l,X=this.loadGeometry(),ie=Df.types[this.type];function ue(Oe){for(var $e=0;$e<Oe.length;$e++){var Ke=Oe[$e];Oe[$e]=[360*(Ke.x+M)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ke.y+H)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var ge=[];for(_=0;_<X.length;_++)ge[_]=X[_][0];ue(X=ge);break;case 2:for(_=0;_<X.length;_++)ue(X[_]);break;case 3:for(X=function(Oe){var $e=Oe.length;if($e<=1)return[Oe];for(var Ke,ot,Qe=[],yt=0;yt<$e;yt++){var At=pd(Oe[yt]);At!==0&&(ot===void 0&&(ot=At<0),ot===At<0?(Ke&&Qe.push(Ke),Ke=[Oe[yt]]):Ke.push(Oe[yt]))}return Ke&&Qe.push(Ke),Qe}(X),_=0;_<X.length;_++)for(k=0;k<X[_].length;k++)ue(X[_][k])}X.length===1?X=X[0]:ie="Multi"+ie;var Ae={type:"Feature",geometry:{type:ie,coordinates:X},properties:this.properties};return"id"in this&&(Ae.id=this.id),Ae};var wp=Sp;function Sp(a,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Ey,this,l),this.length=this._features.length}function Ey(a,l,f){a===15?l.version=f.readVarint():a===1?l.name=f.readString():a===5?l.extent=f.readVarint():a===2?l._features.push(f.pos):a===3?l._keys.push(f.readString()):a===4&&l._values.push(function(_){for(var k=null,D=_.readVarint()+_.pos;_.pos<D;){var M=_.readVarint()>>3;k=M===1?_.readString():M===2?_.readFloat():M===3?_.readDouble():M===4?_.readVarint64():M===5?_.readVarint():M===6?_.readSVarint():M===7?_.readBoolean():null}return k}(f))}function N1(a,l,f){if(a===3){var _=new wp(f,f.readVarint()+f.pos);_.length&&(l[_.name]=_)}}Sp.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var l=this._pbf.readVarint()+this._pbf.pos;return new Sm(this._pbf,l,this.extent,this._keys,this._values)};var md={VectorTile:function(a,l){this.layers=a.readFields(N1,{},l)},VectorTileFeature:Sm,VectorTileLayer:wp},Pi=md.VectorTileFeature.types,qg=Math.pow(2,13);function bh(a,l,f,_,k,D,M,H){a.emplaceBack(l,f,2*Math.floor(_*qg)+M,k*qg*2,D*qg*2,Math.round(H))}var vl=function(a){this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(l){return l.id}),this.index=a.index,this.hasPattern=!1,this.layoutVertexArray=new ru,this.indexArray=new Ku,this.programConfigurations=new ln(a.layers,a.zoom),this.segments=new Me,this.stateDependentLayerIds=this.layers.filter(function(l){return l.isStateDependent()}).map(function(l){return l.id})};function Pu(a,l){return a.x===l.x&&(a.x<0||a.x>8192)||a.y===l.y&&(a.y<0||a.y>8192)}vl.prototype.populate=function(a,l,f){this.features=[],this.hasPattern=dd("fill-extrusion",this.layers,l);for(var _=0,k=a;_<k.length;_+=1){var D=k[_],M=D.feature,H=D.id,X=D.index,ie=D.sourceLayerIndex,ue=this.layers[0]._featureFilter.needGeometry,ge=So(M,ue);if(this.layers[0]._featureFilter.filter(new In(this.zoom),ge,f)){var Ae={id:H,sourceLayerIndex:ie,index:X,geometry:ue?ge.geometry:Ki(M),properties:M.properties,type:M.type,patterns:{}};this.hasPattern?this.features.push(wy("fill-extrusion",this.layers,Ae,this.zoom,l)):this.addFeature(Ae,Ae.geometry,X,f,{}),l.featureIndex.insert(M,Ae.geometry,X,ie,this.index,!0)}}},vl.prototype.addFeatures=function(a,l,f){for(var _=0,k=this.features;_<k.length;_+=1){var D=k[_];this.addFeature(D,D.geometry,D.index,l,f)}},vl.prototype.update=function(a,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,f)},vl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vl.prototype.upload=function(a){this.uploaded||(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,xp),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vl.prototype.addFeature=function(a,l,f,_,k){for(var D=0,M=Rg(l,500);D<M.length;D+=1){for(var H=M[D],X=0,ie=0,ue=H;ie<ue.length;ie+=1)X+=ue[ie].length;for(var ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),Ae=0,Oe=H;Ae<Oe.length;Ae+=1){var $e=Oe[Ae];if($e.length!==0&&!((Gn=$e).every(function(Pn){return Pn.x<0})||Gn.every(function(Pn){return Pn.x>8192})||Gn.every(function(Pn){return Pn.y<0})||Gn.every(function(Pn){return Pn.y>8192})))for(var Ke=0,ot=0;ot<$e.length;ot++){var Qe=$e[ot];if(ot>=1){var yt=$e[ot-1];if(!Pu(Qe,yt)){ge.vertexLength+4>Me.MAX_VERTEX_ARRAY_LENGTH&&(ge=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var At=Qe.sub(yt)._perp()._unit(),Lt=yt.dist(Qe);Ke+Lt>32768&&(Ke=0),bh(this.layoutVertexArray,Qe.x,Qe.y,At.x,At.y,0,0,Ke),bh(this.layoutVertexArray,Qe.x,Qe.y,At.x,At.y,0,1,Ke),bh(this.layoutVertexArray,yt.x,yt.y,At.x,At.y,0,0,Ke+=Lt),bh(this.layoutVertexArray,yt.x,yt.y,At.x,At.y,0,1,Ke);var Nt=ge.vertexLength;this.indexArray.emplaceBack(Nt,Nt+2,Nt+1),this.indexArray.emplaceBack(Nt+1,Nt+2,Nt+3),ge.vertexLength+=4,ge.primitiveLength+=2}}}}if(ge.vertexLength+X>Me.MAX_VERTEX_ARRAY_LENGTH&&(ge=this.segments.prepareSegment(X,this.layoutVertexArray,this.indexArray)),Pi[a.type]==="Polygon"){for(var Gt=[],lr=[],br=ge.vertexLength,$r=0,Ar=H;$r<Ar.length;$r+=1){var Xr=Ar[$r];if(Xr.length!==0){Xr!==H[0]&&lr.push(Gt.length/2);for(var Dr=0;Dr<Xr.length;Dr++){var Bn=Xr[Dr];bh(this.layoutVertexArray,Bn.x,Bn.y,0,0,1,1,0),Gt.push(Bn.x),Gt.push(Bn.y)}}}for(var mn=dp(Gt,lr),jr=0;jr<mn.length;jr+=3)this.indexArray.emplaceBack(br+mn[jr],br+mn[jr+2],br+mn[jr+1]);ge.primitiveLength+=mn.length/3,ge.vertexLength+=X}}var Gn;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,k,_)},Ir("FillExtrusionBucket",vl,{omit:["layers","features"]});var Ng={paint:new ao({"fill-extrusion-opacity":new mr(fe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt(fe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mr(fe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mr(fe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Zo(fe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt(fe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt(fe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mr(fe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Ty=function(a){function l(f){a.call(this,f,Ng)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.createBucket=function(f){return new vl(f)},l.prototype.queryRadius=function(){return sa(this.paint.get("fill-extrusion-translate"))},l.prototype.is3D=function(){return!0},l.prototype.queryIntersectsFeature=function(f,_,k,D,M,H,X,ie){var ue=Iu(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),H.angle,X),ge=this.paint.get("fill-extrusion-height").evaluate(_,k),Ae=this.paint.get("fill-extrusion-base").evaluate(_,k),Oe=function(Ke,ot,Qe,yt){for(var At=[],Lt=0,Nt=Ke;Lt<Nt.length;Lt+=1){var Gt=Nt[Lt],lr=[Gt.x,Gt.y,0,1];Kn(lr,lr,ot),At.push(new ee(lr[0]/lr[3],lr[1]/lr[3]))}return At}(ue,ie),$e=function(Ke,ot,Qe,yt){for(var At=[],Lt=[],Nt=yt[8]*ot,Gt=yt[9]*ot,lr=yt[10]*ot,br=yt[11]*ot,$r=yt[8]*Qe,Ar=yt[9]*Qe,Xr=yt[10]*Qe,Dr=yt[11]*Qe,Bn=0,mn=Ke;Bn<mn.length;Bn+=1){for(var jr=[],Gn=[],Pn=0,ni=mn[Bn];Pn<ni.length;Pn+=1){var en=ni[Pn],gi=en.x,To=en.y,Jo=yt[0]*gi+yt[4]*To+yt[12],zo=yt[1]*gi+yt[5]*To+yt[13],vi=yt[2]*gi+yt[6]*To+yt[14],Qo=yt[3]*gi+yt[7]*To+yt[15],Qa=vi+lr,Po=Qo+br,yn=Jo+$r,cs=zo+Ar,lo=vi+Xr,Jn=Qo+Dr,fs=new ee((Jo+Nt)/Po,(zo+Gt)/Po);fs.z=Qa/Po,jr.push(fs);var Ln=new ee(yn/Jn,cs/Jn);Ln.z=lo/Jn,Gn.push(Ln)}At.push(jr),Lt.push(Gn)}return[At,Lt]}(D,Ae,ge,ie);return function(Ke,ot,Qe){var yt=1/0;ks(Qe,ot)&&(yt=Em(Qe,ot[0]));for(var At=0;At<ot.length;At++)for(var Lt=ot[At],Nt=Ke[At],Gt=0;Gt<Lt.length-1;Gt++){var lr=Lt[Gt],br=[lr,Lt[Gt+1],Nt[Gt+1],Nt[Gt],lr];Zu(Qe,br)&&(yt=Math.min(yt,Em(Qe,br)))}return yt!==1/0&&yt}($e[0],$e[1],Oe)},l}(Eu);function Nl(a,l){return a.x*l.x+a.y*l.y}function Em(a,l){if(a.length===1){for(var f,_=0,k=l[_++];!f||k.equals(f);)if(!(f=l[_++]))return 1/0;for(;_<l.length;_++){var D=l[_],M=a[0],H=f.sub(k),X=D.sub(k),ie=M.sub(k),ue=Nl(H,H),ge=Nl(H,X),Ae=Nl(X,X),Oe=Nl(ie,H),$e=Nl(ie,X),Ke=ue*Ae-ge*ge,ot=(Ae*Oe-ge*$e)/Ke,Qe=(ue*$e-ge*Oe)/Ke,yt=k.z*(1-ot-Qe)+f.z*ot+D.z*Qe;if(isFinite(yt))return yt}return 1/0}for(var At=1/0,Lt=0,Nt=l;Lt<Nt.length;Lt+=1)At=Math.min(At,Nt[Lt].z);return At}var Bg=ya([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Tm=ya([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,Am=md.VectorTileFeature.types,Ep=Math.cos(Math.PI/180*37.5),wn=Math.pow(2,14)/.5,Ra=function(a){var l=this;this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(f){return f.id}),this.index=a.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(function(f){l.gradients[f.id]={}}),this.layoutVertexArray=new Ns,this.layoutVertexArray2=new wf,this.indexArray=new Ku,this.programConfigurations=new ln(a.layers,a.zoom),this.segments=new Me,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(function(f){return f.isStateDependent()}).map(function(f){return f.id})};Ra.prototype.populate=function(a,l,f){this.hasPattern=dd("line",this.layers,l);for(var _=this.layers[0].layout.get("line-sort-key"),k=[],D=0,M=a;D<M.length;D+=1){var H=M[D],X=H.feature,ie=H.id,ue=H.index,ge=H.sourceLayerIndex,Ae=this.layers[0]._featureFilter.needGeometry,Oe=So(X,Ae);if(this.layers[0]._featureFilter.filter(new In(this.zoom),Oe,f)){var $e=_?_.evaluate(Oe,{},f):void 0,Ke={id:ie,properties:X.properties,type:X.type,sourceLayerIndex:ge,index:ue,geometry:Ae?Oe.geometry:Ki(X),patterns:{},sortKey:$e};k.push(Ke)}}_&&k.sort(function(lr,br){return lr.sortKey-br.sortKey});for(var ot=0,Qe=k;ot<Qe.length;ot+=1){var yt=Qe[ot],At=yt.geometry,Lt=yt.index,Nt=yt.sourceLayerIndex;if(this.hasPattern){var Gt=wy("line",this.layers,yt,this.zoom,l);this.patternFeatures.push(Gt)}else this.addFeature(yt,At,Lt,f,{});l.featureIndex.insert(a[Lt].feature,At,Lt,Nt,this.index)}},Ra.prototype.update=function(a,l,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(a,l,this.stateDependentLayers,f)},Ra.prototype.addFeatures=function(a,l,f){for(var _=0,k=this.patternFeatures;_<k.length;_+=1){var D=k[_];this.addFeature(D,D.geometry,D.index,l,f)}},Ra.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Ra.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ra.prototype.upload=function(a){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=a.createVertexBuffer(this.layoutVertexArray2,Tm)),this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,Bg),this.indexBuffer=a.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(a),this.uploaded=!0},Ra.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ra.prototype.lineFeatureClips=function(a){if(a.properties&&a.properties.hasOwnProperty("mapbox_clip_start")&&a.properties.hasOwnProperty("mapbox_clip_end"))return{start:+a.properties.mapbox_clip_start,end:+a.properties.mapbox_clip_end}},Ra.prototype.addFeature=function(a,l,f,_,k){var D=this.layers[0].layout,M=D.get("line-join").evaluate(a,{}),H=D.get("line-cap"),X=D.get("line-miter-limit"),ie=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(a);for(var ue=0,ge=l;ue<ge.length;ue+=1)this.addLine(ge[ue],a,M,H,X,ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,a,f,k,_)},Ra.prototype.addLine=function(a,l,f,_,k,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var M=0;M<a.length-1;M++)this.totalDistance+=a[M].dist(a[M+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var H=Am[l.type]==="Polygon",X=a.length;X>=2&&a[X-1].equals(a[X-2]);)X--;for(var ie=0;ie<X-1&&a[ie].equals(a[ie+1]);)ie++;if(!(X<(H?3:2))){f==="bevel"&&(k=1.05);var ue,ge=this.overscaling<=16?122880/(512*this.overscaling):0,Ae=this.segments.prepareSegment(10*X,this.layoutVertexArray,this.indexArray),Oe=void 0,$e=void 0,Ke=void 0,ot=void 0;this.e1=this.e2=-1,H&&(ot=a[ie].sub(ue=a[X-2])._unit()._perp());for(var Qe=ie;Qe<X;Qe++)if(!($e=Qe===X-1?H?a[ie+1]:void 0:a[Qe+1])||!a[Qe].equals($e)){ot&&(Ke=ot),ue&&(Oe=ue),ue=a[Qe],ot=$e?$e.sub(ue)._unit()._perp():Ke;var yt=(Ke=Ke||ot).add(ot);yt.x===0&&yt.y===0||yt._unit();var At=Ke.x*ot.x+Ke.y*ot.y,Lt=yt.x*ot.x+yt.y*ot.y,Nt=Lt!==0?1/Lt:1/0,Gt=2*Math.sqrt(2-2*Lt),lr=Lt<Ep&&Oe&&$e,br=Ke.x*ot.y-Ke.y*ot.x>0;if(lr&&Qe>ie){var $r=ue.dist(Oe);if($r>2*ge){var Ar=ue.sub(ue.sub(Oe)._mult(ge/$r)._round());this.updateDistance(Oe,Ar),this.addCurrentVertex(Ar,Ke,0,0,Ae),Oe=Ar}}var Xr=Oe&&$e,Dr=Xr?f:H?"butt":_;if(Xr&&Dr==="round"&&(Nt<D?Dr="miter":Nt<=2&&(Dr="fakeround")),Dr==="miter"&&Nt>k&&(Dr="bevel"),Dr==="bevel"&&(Nt>2&&(Dr="flipbevel"),Nt<k&&(Dr="miter")),Oe&&this.updateDistance(Oe,ue),Dr==="miter")yt._mult(Nt),this.addCurrentVertex(ue,yt,0,0,Ae);else if(Dr==="flipbevel"){if(Nt>100)yt=ot.mult(-1);else{var Bn=Nt*Ke.add(ot).mag()/Ke.sub(ot).mag();yt._perp()._mult(Bn*(br?-1:1))}this.addCurrentVertex(ue,yt,0,0,Ae),this.addCurrentVertex(ue,yt.mult(-1),0,0,Ae)}else if(Dr==="bevel"||Dr==="fakeround"){var mn=-Math.sqrt(Nt*Nt-1),jr=br?mn:0,Gn=br?0:mn;if(Oe&&this.addCurrentVertex(ue,Ke,jr,Gn,Ae),Dr==="fakeround")for(var Pn=Math.round(180*Gt/Math.PI/20),ni=1;ni<Pn;ni++){var en=ni/Pn;if(en!==.5){var gi=en-.5;en+=en*gi*(en-1)*((1.0904+At*(At*(3.55645-1.43519*At)-3.2452))*gi*gi+(.848013+At*(.215638*At-1.06021)))}var To=ot.sub(Ke)._mult(en)._add(Ke)._unit()._mult(br?-1:1);this.addHalfVertex(ue,To.x,To.y,!1,br,0,Ae)}$e&&this.addCurrentVertex(ue,ot,-jr,-Gn,Ae)}else if(Dr==="butt")this.addCurrentVertex(ue,yt,0,0,Ae);else if(Dr==="square"){var Jo=Oe?1:-1;this.addCurrentVertex(ue,yt,Jo,Jo,Ae)}else Dr==="round"&&(Oe&&(this.addCurrentVertex(ue,Ke,0,0,Ae),this.addCurrentVertex(ue,Ke,1,1,Ae,!0)),$e&&(this.addCurrentVertex(ue,ot,-1,-1,Ae,!0),this.addCurrentVertex(ue,ot,0,0,Ae)));if(lr&&Qe<X-1){var zo=ue.dist($e);if(zo>2*ge){var vi=ue.add($e.sub(ue)._mult(ge/zo)._round());this.updateDistance(ue,vi),this.addCurrentVertex(vi,ot,0,0,Ae),ue=vi}}}}},Ra.prototype.addCurrentVertex=function(a,l,f,_,k,D){D===void 0&&(D=!1);var M=l.y*_-l.x,H=-l.y-l.x*_;this.addHalfVertex(a,l.x+l.y*f,l.y-l.x*f,D,!1,f,k),this.addHalfVertex(a,M,H,D,!0,-_,k),this.distance>wn/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(a,l,f,_,k,D))},Ra.prototype.addHalfVertex=function(a,l,f,_,k,D,M){var H=.5*(this.lineClips?this.scaledDistance*(wn-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((a.x<<1)+(_?1:0),(a.y<<1)+(k?1:0),Math.round(63*l)+128,Math.round(63*f)+128,1+(D===0?0:D<0?-1:1)|(63&H)<<2,H>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var X=M.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,X),M.primitiveLength++),k?this.e2=X:this.e1=X},Ra.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},Ra.prototype.updateDistance=function(a,l){this.distance+=a.dist(l),this.updateScaledDistance()},Ir("LineBucket",Ra,{omit:["layers","patternFeatures"]});var Ui=new ao({"line-cap":new mr(fe.layout_line["line-cap"]),"line-join":new Xt(fe.layout_line["line-join"]),"line-miter-limit":new mr(fe.layout_line["line-miter-limit"]),"line-round-limit":new mr(fe.layout_line["line-round-limit"]),"line-sort-key":new Xt(fe.layout_line["line-sort-key"])}),Of={paint:new ao({"line-opacity":new Xt(fe.paint_line["line-opacity"]),"line-color":new Xt(fe.paint_line["line-color"]),"line-translate":new mr(fe.paint_line["line-translate"]),"line-translate-anchor":new mr(fe.paint_line["line-translate-anchor"]),"line-width":new Xt(fe.paint_line["line-width"]),"line-gap-width":new Xt(fe.paint_line["line-gap-width"]),"line-offset":new Xt(fe.paint_line["line-offset"]),"line-blur":new Xt(fe.paint_line["line-blur"]),"line-dasharray":new va(fe.paint_line["line-dasharray"]),"line-pattern":new Zo(fe.paint_line["line-pattern"]),"line-gradient":new tu(fe.paint_line["line-gradient"])}),layout:Ui},k0=new(function(a){function l(){a.apply(this,arguments)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.possiblyEvaluate=function(f,_){return _=new In(Math.floor(_.zoom),{now:_.now,fadeDuration:_.fadeDuration,zoomHistory:_.zoomHistory,transition:_.transition}),a.prototype.possiblyEvaluate.call(this,f,_)},l.prototype.evaluate=function(f,_,k,D){return _=Se({},_,{zoom:Math.floor(_.zoom)}),a.prototype.evaluate.call(this,f,_,k,D)},l}(Xt))(Of.paint.properties["line-width"].specification);k0.useIntegerZoom=!0;var _h=function(a){function l(f){a.call(this,f,Of),this.gradientVersion=0}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Fo,this.gradientVersion=(this.gradientVersion+1)%ve)},l.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},l.prototype.recalculate=function(f,_){a.prototype.recalculate.call(this,f,_),this.paint._values["line-floorwidth"]=k0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)},l.prototype.createBucket=function(f){return new Ra(f)},l.prototype.queryRadius=function(f){var _=f,k=Ay(Bs("line-width",this,_),Bs("line-gap-width",this,_)),D=Bs("line-offset",this,_);return k/2+Math.abs(D)+sa(this.paint.get("line-translate"))},l.prototype.queryIntersectsFeature=function(f,_,k,D,M,H,X){var ie=Iu(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),H.angle,X),ue=X/2*Ay(this.paint.get("line-width").evaluate(_,k),this.paint.get("line-gap-width").evaluate(_,k)),ge=this.paint.get("line-offset").evaluate(_,k);return ge&&(D=function(Ae,Oe){for(var $e=[],Ke=new ee(0,0),ot=0;ot<Ae.length;ot++){for(var Qe=Ae[ot],yt=[],At=0;At<Qe.length;At++){var Lt=Qe[At],Nt=Qe[At+1],Gt=At===0?Ke:Lt.sub(Qe[At-1])._unit()._perp(),lr=At===Qe.length-1?Ke:Nt.sub(Lt)._unit()._perp(),br=Gt._add(lr)._unit();br._mult(1/(br.x*lr.x+br.y*lr.y)),yt.push(br._mult(Oe)._add(Lt))}$e.push(yt)}return $e}(D,ge*X)),function(Ae,Oe,$e){for(var Ke=0;Ke<Oe.length;Ke++){var ot=Oe[Ke];if(Ae.length>=3){for(var Qe=0;Qe<ot.length;Qe++)if(wa(Ae,ot[Qe]))return!0}if(Za(Ae,ot,$e))return!0}return!1}(ie,D,ue)},l.prototype.isTileClipped=function(){return!0},l}(Eu);function Ay(a,l){return l>0?l+2*a:a}var as=ya([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),B1=ya([{name:"a_projected_pos",components:3,type:"Float32"}],4),Sa=(ya([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ya([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),ky=(ya([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ya([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),z1=ya([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function C0(a,l,f){return a.sections.forEach(function(_){_.text=function(k,D,M){var H=D.layout.get("text-transform").evaluate(M,{});return H==="uppercase"?k=k.toLocaleUpperCase():H==="lowercase"&&(k=k.toLocaleLowerCase()),ml.applyArabicShaping&&(k=ml.applyArabicShaping(k)),k}(_.text,l,f)}),a}ya([{name:"triangle",components:3,type:"Uint16"}]),ya([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ya([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ya([{type:"Float32",name:"offsetX"}]),ya([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var xh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"},c=function(a,l,f,_,k){var D,M,H=8*k-_-1,X=(1<<H)-1,ie=X>>1,ue=-7,ge=f?k-1:0,Ae=f?-1:1,Oe=a[l+ge];for(ge+=Ae,D=Oe&(1<<-ue)-1,Oe>>=-ue,ue+=H;ue>0;D=256*D+a[l+ge],ge+=Ae,ue-=8);for(M=D&(1<<-ue)-1,D>>=-ue,ue+=_;ue>0;M=256*M+a[l+ge],ge+=Ae,ue-=8);if(D===0)D=1-ie;else{if(D===X)return M?NaN:1/0*(Oe?-1:1);M+=Math.pow(2,_),D-=ie}return(Oe?-1:1)*M*Math.pow(2,D-_)},m=function(a,l,f,_,k,D){var M,H,X,ie=8*D-k-1,ue=(1<<ie)-1,ge=ue>>1,Ae=k===23?Math.pow(2,-24)-Math.pow(2,-77):0,Oe=_?0:D-1,$e=_?1:-1,Ke=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(H=isNaN(l)?1:0,M=ue):(M=Math.floor(Math.log(l)/Math.LN2),l*(X=Math.pow(2,-M))<1&&(M--,X*=2),(l+=M+ge>=1?Ae/X:Ae*Math.pow(2,1-ge))*X>=2&&(M++,X/=2),M+ge>=ue?(H=0,M=ue):M+ge>=1?(H=(l*X-1)*Math.pow(2,k),M+=ge):(H=l*Math.pow(2,ge-1)*Math.pow(2,k),M=0));k>=8;a[f+Oe]=255&H,Oe+=$e,H/=256,k-=8);for(M=M<<k|H,ie+=k;ie>0;a[f+Oe]=255&M,Oe+=$e,M/=256,ie-=8);a[f+Oe-$e]|=128*Ke},E=S;function S(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}S.Varint=0,S.Fixed64=1,S.Bytes=2,S.Fixed32=5;var C=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function B(a){return a.type===S.Bytes?a.readVarint()+a.pos:a.pos+1}function Z(a,l,f){return f?4294967296*l+(a>>>0):4294967296*(l>>>0)+(a>>>0)}function re(a,l,f){var _=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(_);for(var k=f.pos-1;k>=a;k--)f.buf[k+_]=f.buf[k]}function le(a,l){for(var f=0;f<a.length;f++)l.writeVarint(a[f])}function xe(a,l){for(var f=0;f<a.length;f++)l.writeSVarint(a[f])}function We(a,l){for(var f=0;f<a.length;f++)l.writeFloat(a[f])}function Je(a,l){for(var f=0;f<a.length;f++)l.writeDouble(a[f])}function Et(a,l){for(var f=0;f<a.length;f++)l.writeBoolean(a[f])}function bt(a,l){for(var f=0;f<a.length;f++)l.writeFixed32(a[f])}function $t(a,l){for(var f=0;f<a.length;f++)l.writeSFixed32(a[f])}function rr(a,l){for(var f=0;f<a.length;f++)l.writeFixed64(a[f])}function gr(a,l){for(var f=0;f<a.length;f++)l.writeSFixed64(a[f])}function Tr(a,l){return(a[l]|a[l+1]<<8|a[l+2]<<16)+16777216*a[l+3]}function Fr(a,l,f){a[f]=l,a[f+1]=l>>>8,a[f+2]=l>>>16,a[f+3]=l>>>24}function kr(a,l){return(a[l]|a[l+1]<<8|a[l+2]<<16)+(a[l+3]<<24)}function Hr(a,l,f){a===1&&f.readMessage(dn,l)}function dn(a,l,f){if(a===3){var _=f.readMessage(fn,{}),k=_.width,D=_.height,M=_.left,H=_.top,X=_.advance;l.push({id:_.id,bitmap:new No({width:k+6,height:D+6},_.bitmap),metrics:{width:k,height:D,left:M,top:H,advance:X}})}}function fn(a,l,f){a===1?l.id=f.readVarint():a===2?l.bitmap=f.readBytes():a===3?l.width=f.readVarint():a===4?l.height=f.readVarint():a===5?l.left=f.readSVarint():a===6?l.top=f.readSVarint():a===7&&(l.advance=f.readVarint())}function Zn(a){for(var l=0,f=0,_=0,k=a;_<k.length;_+=1){var D=k[_];l+=D.w*D.h,f=Math.max(f,D.w)}a.sort(function(Ke,ot){return ot.h-Ke.h});for(var M=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}],H=0,X=0,ie=0,ue=a;ie<ue.length;ie+=1)for(var ge=ue[ie],Ae=M.length-1;Ae>=0;Ae--){var Oe=M[Ae];if(!(ge.w>Oe.w||ge.h>Oe.h)){if(ge.x=Oe.x,ge.y=Oe.y,X=Math.max(X,ge.y+ge.h),H=Math.max(H,ge.x+ge.w),ge.w===Oe.w&&ge.h===Oe.h){var $e=M.pop();Ae<M.length&&(M[Ae]=$e)}else ge.h===Oe.h?(Oe.x+=ge.w,Oe.w-=ge.w):ge.w===Oe.w?(Oe.y+=ge.h,Oe.h-=ge.h):(M.push({x:Oe.x+ge.w,y:Oe.y,w:Oe.w-ge.w,h:ge.h}),Oe.y+=ge.h,Oe.h-=ge.h);break}}return{w:H,h:X,fill:l/(H*X)||0}}S.prototype={destroy:function(){this.buf=null},readFields:function(a,l,f){for(f=f||this.length;this.pos<f;){var _=this.readVarint(),k=_>>3,D=this.pos;this.type=7&_,a(k,l,this),this.pos===D&&this.skip(_)}return l},readMessage:function(a,l){return this.readFields(a,l,this.readVarint()+this.pos)},readFixed32:function(){var a=Tr(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=kr(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Tr(this.buf,this.pos)+4294967296*Tr(this.buf,this.pos+4);return this.pos+=8,a},readSFixed64:function(){var a=Tr(this.buf,this.pos)+4294967296*kr(this.buf,this.pos+4);return this.pos+=8,a},readFloat:function(){var a=c(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=c(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var l,f,_=this.buf;return l=127&(f=_[this.pos++]),f<128?l:(l|=(127&(f=_[this.pos++]))<<7,f<128?l:(l|=(127&(f=_[this.pos++]))<<14,f<128?l:(l|=(127&(f=_[this.pos++]))<<21,f<128?l:function(k,D,M){var H,X,ie=M.buf;if(H=(112&(X=ie[M.pos++]))>>4,X<128||(H|=(127&(X=ie[M.pos++]))<<3,X<128)||(H|=(127&(X=ie[M.pos++]))<<10,X<128)||(H|=(127&(X=ie[M.pos++]))<<17,X<128)||(H|=(127&(X=ie[M.pos++]))<<24,X<128)||(H|=(1&(X=ie[M.pos++]))<<31,X<128))return Z(k,H,D);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=_[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,l=this.pos;return this.pos=a,a-l>=12&&C?function(f,_,k){return C.decode(f.subarray(_,k))}(this.buf,l,a):function(f,_,k){for(var D="",M=_;M<k;){var H,X,ie,ue=f[M],ge=null,Ae=ue>239?4:ue>223?3:ue>191?2:1;if(M+Ae>k)break;Ae===1?ue<128&&(ge=ue):Ae===2?(192&(H=f[M+1]))==128&&(ge=(31&ue)<<6|63&H)<=127&&(ge=null):Ae===3?(X=f[M+2],(192&(H=f[M+1]))==128&&(192&X)==128&&((ge=(15&ue)<<12|(63&H)<<6|63&X)<=2047||ge>=55296&&ge<=57343)&&(ge=null)):Ae===4&&(X=f[M+2],ie=f[M+3],(192&(H=f[M+1]))==128&&(192&X)==128&&(192&ie)==128&&((ge=(15&ue)<<18|(63&H)<<12|(63&X)<<6|63&ie)<=65535||ge>=1114112)&&(ge=null)),ge===null?(ge=65533,Ae=1):ge>65535&&(ge-=65536,D+=String.fromCharCode(ge>>>10&1023|55296),ge=56320|1023&ge),D+=String.fromCharCode(ge),M+=Ae}return D}(this.buf,l,a)},readBytes:function(){var a=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,a);return this.pos=a,l},readPackedVarint:function(a,l){if(this.type!==S.Bytes)return a.push(this.readVarint(l));var f=B(this);for(a=a||[];this.pos<f;)a.push(this.readVarint(l));return a},readPackedSVarint:function(a){if(this.type!==S.Bytes)return a.push(this.readSVarint());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==S.Bytes)return a.push(this.readBoolean());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==S.Bytes)return a.push(this.readFloat());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==S.Bytes)return a.push(this.readDouble());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==S.Bytes)return a.push(this.readFixed32());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==S.Bytes)return a.push(this.readSFixed32());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==S.Bytes)return a.push(this.readFixed64());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==S.Bytes)return a.push(this.readSFixed64());var l=B(this);for(a=a||[];this.pos<l;)a.push(this.readSFixed64());return a},skip:function(a){var l=7&a;if(l===S.Varint)for(;this.buf[this.pos++]>127;);else if(l===S.Bytes)this.pos=this.readVarint()+this.pos;else if(l===S.Fixed32)this.pos+=4;else{if(l!==S.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(a,l){this.writeVarint(a<<3|l)},realloc:function(a){for(var l=this.length||16;l<this.pos+a;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Fr(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Fr(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Fr(this.buf,-1&a,this.pos),Fr(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Fr(this.buf,-1&a,this.pos),Fr(this.buf,Math.floor(a*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(l,f){var _,k;if(l>=0?(_=l%4294967296|0,k=l/4294967296|0):(k=~(-l/4294967296),4294967295^(_=~(-l%4294967296))?_=_+1|0:(_=0,k=k+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(D,M,H){H.buf[H.pos++]=127&D|128,D>>>=7,H.buf[H.pos++]=127&D|128,D>>>=7,H.buf[H.pos++]=127&D|128,D>>>=7,H.buf[H.pos++]=127&D|128,H.buf[H.pos]=127&(D>>>=7)}(_,0,f),function(D,M){var H=(7&D)<<4;M.buf[M.pos++]|=H|((D>>>=3)?128:0),D&&(M.buf[M.pos++]=127&D|((D>>>=7)?128:0),D&&(M.buf[M.pos++]=127&D|((D>>>=7)?128:0),D&&(M.buf[M.pos++]=127&D|((D>>>=7)?128:0),D&&(M.buf[M.pos++]=127&D|((D>>>=7)?128:0),D&&(M.buf[M.pos++]=127&D)))))}(k,f)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var l=this.pos;this.pos=function(_,k,D){for(var M,H,X=0;X<k.length;X++){if((M=k.charCodeAt(X))>55295&&M<57344){if(!H){M>56319||X+1===k.length?(_[D++]=239,_[D++]=191,_[D++]=189):H=M;continue}if(M<56320){_[D++]=239,_[D++]=191,_[D++]=189,H=M;continue}M=H-55296<<10|M-56320|65536,H=null}else H&&(_[D++]=239,_[D++]=191,_[D++]=189,H=null);M<128?_[D++]=M:(M<2048?_[D++]=M>>6|192:(M<65536?_[D++]=M>>12|224:(_[D++]=M>>18|240,_[D++]=M>>12&63|128),_[D++]=M>>6&63|128),_[D++]=63&M|128)}return D}(this.buf,a,this.pos);var f=this.pos-l;f>=128&&re(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(a){this.realloc(4),m(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),m(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var l=a.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=a[f]},writeRawMessage:function(a,l){this.pos++;var f=this.pos;a(l,this);var _=this.pos-f;_>=128&&re(f,_,this),this.pos=f-1,this.writeVarint(_),this.pos+=_},writeMessage:function(a,l,f){this.writeTag(a,S.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(a,l){l.length&&this.writeMessage(a,le,l)},writePackedSVarint:function(a,l){l.length&&this.writeMessage(a,xe,l)},writePackedBoolean:function(a,l){l.length&&this.writeMessage(a,Et,l)},writePackedFloat:function(a,l){l.length&&this.writeMessage(a,We,l)},writePackedDouble:function(a,l){l.length&&this.writeMessage(a,Je,l)},writePackedFixed32:function(a,l){l.length&&this.writeMessage(a,bt,l)},writePackedSFixed32:function(a,l){l.length&&this.writeMessage(a,$t,l)},writePackedFixed64:function(a,l){l.length&&this.writeMessage(a,rr,l)},writePackedSFixed64:function(a,l){l.length&&this.writeMessage(a,gr,l)},writeBytesField:function(a,l){this.writeTag(a,S.Bytes),this.writeBytes(l)},writeFixed32Field:function(a,l){this.writeTag(a,S.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(a,l){this.writeTag(a,S.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(a,l){this.writeTag(a,S.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(a,l){this.writeTag(a,S.Fixed64),this.writeSFixed64(l)},writeVarintField:function(a,l){this.writeTag(a,S.Varint),this.writeVarint(l)},writeSVarintField:function(a,l){this.writeTag(a,S.Varint),this.writeSVarint(l)},writeStringField:function(a,l){this.writeTag(a,S.Bytes),this.writeString(l)},writeFloatField:function(a,l){this.writeTag(a,S.Fixed32),this.writeFloat(l)},writeDoubleField:function(a,l){this.writeTag(a,S.Fixed64),this.writeDouble(l)},writeBooleanField:function(a,l){this.writeVarintField(a,!!l)}};var Vi=function(a,l){var f=l.pixelRatio,_=l.version,k=l.stretchX,D=l.stretchY,M=l.content;this.paddedRect=a,this.pixelRatio=f,this.stretchX=k,this.stretchY=D,this.content=M,this.version=_},Do={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Do.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Do.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Do.tlbr.get=function(){return this.tl.concat(this.br)},Do.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Vi.prototype,Do);var so=function(a,l){var f={},_={};this.haveRenderCallbacks=[];var k=[];this.addImages(a,f,k),this.addImages(l,_,k);var D=Zn(k),M=new Xa({width:D.w||1,height:D.h||1});for(var H in a){var X=a[H],ie=f[H].paddedRect;Xa.copy(X.data,M,{x:0,y:0},{x:ie.x+1,y:ie.y+1},X.data)}for(var ue in l){var ge=l[ue],Ae=_[ue].paddedRect,Oe=Ae.x+1,$e=Ae.y+1,Ke=ge.data.width,ot=ge.data.height;Xa.copy(ge.data,M,{x:0,y:0},{x:Oe,y:$e},ge.data),Xa.copy(ge.data,M,{x:0,y:ot-1},{x:Oe,y:$e-1},{width:Ke,height:1}),Xa.copy(ge.data,M,{x:0,y:0},{x:Oe,y:$e+ot},{width:Ke,height:1}),Xa.copy(ge.data,M,{x:Ke-1,y:0},{x:Oe-1,y:$e},{width:1,height:ot}),Xa.copy(ge.data,M,{x:0,y:0},{x:Oe+Ke,y:$e},{width:1,height:ot})}this.image=M,this.iconPositions=f,this.patternPositions=_};so.prototype.addImages=function(a,l,f){for(var _ in a){var k=a[_],D={x:0,y:0,w:k.data.width+2,h:k.data.height+2};f.push(D),l[_]=new Vi(D,k),k.hasRenderCallback&&this.haveRenderCallbacks.push(_)}},so.prototype.patchUpdatedImages=function(a,l){for(var f in a.dispatchRenderCallbacks(this.haveRenderCallbacks),a.updatedImages)this.patchUpdatedImage(this.iconPositions[f],a.getImage(f),l),this.patchUpdatedImage(this.patternPositions[f],a.getImage(f),l)},so.prototype.patchUpdatedImage=function(a,l,f){if(a&&l&&a.version!==l.version){a.version=l.version;var _=a.tl;f.update(l.data,void 0,{x:_[0],y:_[1]})}},Ir("ImagePosition",Vi),Ir("ImageAtlas",so);var _i={horizontal:1,vertical:2,horizontalOnly:3},Oo=function(){this.scale=1,this.fontStack="",this.imageName=null};Oo.forText=function(a,l){var f=new Oo;return f.scale=a||1,f.fontStack=l,f},Oo.forImage=function(a){var l=new Oo;return l.imageName=a,l};var ci=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ss(a,l,f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke){var ot,Qe=ci.fromFeature(a,k);ge===_i.vertical&&Qe.verticalizePunctuation();var yt=ml.processBidirectionalText,At=ml.processStyledBidirectionalText;if(yt&&Qe.sections.length===1){ot=[];for(var Lt=0,Nt=yt(Qe.toString(),Pc(Qe,ie,D,l,_,Oe,$e));Lt<Nt.length;Lt+=1){var Gt=Nt[Lt],lr=new ci;lr.text=Gt,lr.sections=Qe.sections;for(var br=0;br<Gt.length;br++)lr.sectionIndex.push(0);ot.push(lr)}}else if(At){ot=[];for(var $r=0,Ar=At(Qe.text,Qe.sectionIndex,Pc(Qe,ie,D,l,_,Oe,$e));$r<Ar.length;$r+=1){var Xr=Ar[$r],Dr=new ci;Dr.text=Xr[0],Dr.sectionIndex=Xr[1],Dr.sections=Qe.sections,ot.push(Dr)}}else ot=function(jr,Gn){for(var Pn=[],ni=jr.text,en=0,gi=0,To=Gn;gi<To.length;gi+=1){var Jo=To[gi];Pn.push(jr.substring(en,Jo)),en=Jo}return en<ni.length&&Pn.push(jr.substring(en,ni.length)),Pn}(Qe,Pc(Qe,ie,D,l,_,Oe,$e));var Bn=[],mn={positionedLines:Bn,text:Qe.toString(),top:ue[1],bottom:ue[1],left:ue[0],right:ue[0],writingMode:ge,iconsInText:!1,verticalizable:!1};return function(jr,Gn,Pn,ni,en,gi,To,Jo,zo,vi,Qo,Qa){for(var Po=0,yn=-17,cs=0,lo=0,Jn=Jo==="right"?1:Jo==="left"?0:.5,fs=0,Ln=0,Zi=en;Ln<Zi.length;Ln+=1){var Mi=Zi[Ln];Mi.trim();var oi=Mi.getMaxScale(),bl=24*(oi-1),zs={positionedGlyphs:[],lineOffset:0};jr.positionedLines[fs]=zs;var ro=zs.positionedGlyphs,Ta=0;if(Mi.length()){for(var jo=0;jo<Mi.length();jo++){var fi=Mi.getSection(jo),Qu=Mi.getSectionIndex(jo),Ai=Mi.getCharCode(jo),uo=0,ea=null,Eh=null,Lc=null,Hg=24,Mm=!(zo===_i.horizontal||!Qo&&!cp(Ai)||Qo&&(Fa[Ai]||(hs=Ai,nr.Arabic(hs)||nr["Arabic Supplement"](hs)||nr["Arabic Extended-A"](hs)||nr["Arabic Presentation Forms-A"](hs)||nr["Arabic Presentation Forms-B"](hs))));if(fi.imageName){var Wg=ni[fi.imageName];if(!Wg)continue;Lc=fi.imageName,jr.iconsInText=jr.iconsInText||!0,Eh=Wg.paddedRect;var bd=Wg.displaySize;fi.scale=24*fi.scale/Qa,uo=bl+(24-bd[1]*fi.scale),Hg=(ea={width:bd[0],height:bd[1],left:1,top:-3,advance:Mm?bd[1]:bd[0]}).advance;var Lm=Mm?bd[0]*fi.scale-24*oi:bd[1]*fi.scale-24*oi;Lm>0&&Lm>Ta&&(Ta=Lm)}else{var Tp=Pn[fi.fontStack],Ap=Tp&&Tp[Ai];if(Ap&&Ap.rect)Eh=Ap.rect,ea=Ap.metrics;else{var Oy=Gn[fi.fontStack],Py=Oy&&Oy[Ai];if(!Py)continue;ea=Py.metrics}uo=24*(oi-fi.scale)}Mm?(jr.verticalizable=!0,ro.push({glyph:Ai,imageName:Lc,x:Po,y:yn+uo,vertical:Mm,scale:fi.scale,fontStack:fi.fontStack,sectionIndex:Qu,metrics:ea,rect:Eh}),Po+=Hg*fi.scale+vi):(ro.push({glyph:Ai,imageName:Lc,x:Po,y:yn+uo,vertical:Mm,scale:fi.scale,fontStack:fi.fontStack,sectionIndex:Qu,metrics:ea,rect:Eh}),Po+=ea.advance*fi.scale+vi)}ro.length!==0&&(cs=Math.max(Po-vi,cs),Mc(ro,0,ro.length-1,Jn,Ta)),Po=0;var Rm=gi*oi+Ta;zs.lineOffset=Math.max(Ta,bl),yn+=Rm,lo=Math.max(Rm,lo),++fs}else yn+=gi,++fs}var hs,Th=yn- -17,$g=ls(To),kp=$g.horizontalAlign,Gg=$g.verticalAlign;(function(q0,N0,Kg,ec,Qn,Zg,Bl,Yg,B0){var Li,z0=(N0-Kg)*Qn;Li=Zg!==Bl?-Yg*ec- -17:(-ec*B0+.5)*Bl;for(var Fm=0,Cp=q0;Fm<Cp.length;Fm+=1)for(var qm=0,My=Cp[Fm].positionedGlyphs;qm<My.length;qm+=1){var Xg=My[qm];Xg.x+=z0,Xg.y+=Li}})(jr.positionedLines,Jn,kp,Gg,cs,lo,gi,Th,en.length),jr.top+=-Gg*Th,jr.bottom=jr.top+Th,jr.left+=-kp*cs,jr.right=jr.left+cs}(mn,l,f,_,ot,M,H,X,ge,ie,Ae,Ke),!function(jr){for(var Gn=0,Pn=jr;Gn<Pn.length;Gn+=1)if(Pn[Gn].positionedGlyphs.length!==0)return!1;return!0}(Bn)&&mn}ci.fromFeature=function(a,l){for(var f=new ci,_=0;_<a.sections.length;_++){var k=a.sections[_];k.image?f.addImageSection(k):f.addTextSection(k,l)}return f},ci.prototype.length=function(){return this.text.length},ci.prototype.getSection=function(a){return this.sections[this.sectionIndex[a]]},ci.prototype.getSectionIndex=function(a){return this.sectionIndex[a]},ci.prototype.getCharCode=function(a){return this.text.charCodeAt(a)},ci.prototype.verticalizePunctuation=function(){this.text=function(a){for(var l="",f=0;f<a.length;f++){var _=a.charCodeAt(f+1)||null,k=a.charCodeAt(f-1)||null;l+=_&&sh(_)&&!xh[a[f+1]]||k&&sh(k)&&!xh[a[f-1]]||!xh[a[f]]?a[f]:xh[a[f]]}return l}(this.text)},ci.prototype.trim=function(){for(var a=0,l=0;l<this.text.length&&Fa[this.text.charCodeAt(l)];l++)a++;for(var f=this.text.length,_=this.text.length-1;_>=0&&_>=a&&Fa[this.text.charCodeAt(_)];_--)f--;this.text=this.text.substring(a,f),this.sectionIndex=this.sectionIndex.slice(a,f)},ci.prototype.substring=function(a,l){var f=new ci;return f.text=this.text.substring(a,l),f.sectionIndex=this.sectionIndex.slice(a,l),f.sections=this.sections,f},ci.prototype.toString=function(){return this.text},ci.prototype.getMaxScale=function(){var a=this;return this.sectionIndex.reduce(function(l,f){return Math.max(l,a.sections[f].scale)},0)},ci.prototype.addTextSection=function(a,l){this.text+=a.text,this.sections.push(Oo.forText(a.scale,a.fontStack||l));for(var f=this.sections.length-1,_=0;_<a.text.length;++_)this.sectionIndex.push(f)},ci.prototype.addImageSection=function(a){var l=a.image?a.image.name:"";if(l.length!==0){var f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Oo.forImage(l)),this.sectionIndex.push(this.sections.length-1)):Ut("Reached maximum number of images 6401")}else Ut("Can't add FormattedSection with an empty image.")},ci.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Fa={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Ti={};function Ea(a,l,f,_,k,D){if(l.imageName){var M=_[l.imageName];return M?M.displaySize[0]*l.scale*24/D+k:0}var H=f[l.fontStack],X=H&&H[a];return X?X.metrics.advance*l.scale+k:0}function Yo(a,l,f,_){var k=Math.pow(a-l,2);return _?a<l?k/2:2*k:k+Math.abs(f)*f}function yl(a,l,f){var _=0;return a===10&&(_-=1e4),f&&(_+=150),a!==40&&a!==65288||(_+=50),l!==41&&l!==65289||(_+=50),_}function gd(a,l,f,_,k,D){for(var M=null,H=Yo(l,f,k,D),X=0,ie=_;X<ie.length;X+=1){var ue=ie[X],ge=Yo(l-ue.x,f,k,D)+ue.badness;ge<=H&&(M=ue,H=ge)}return{index:a,x:l,priorBreak:M,badness:H}}function Pc(a,l,f,_,k,D,M){if(D!=="point")return[];if(!a)return[];for(var H,X=[],ie=function(ot,Qe,yt,At,Lt,Nt){for(var Gt=0,lr=0;lr<ot.length();lr++){var br=ot.getSection(lr);Gt+=Ea(ot.getCharCode(lr),br,At,Lt,Qe,Nt)}return Gt/Math.max(1,Math.ceil(Gt/yt))}(a,l,f,_,k,M),ue=a.text.indexOf("\u200B")>=0,ge=0,Ae=0;Ae<a.length();Ae++){var Oe=a.getSection(Ae),$e=a.getCharCode(Ae);if(Fa[$e]||(ge+=Ea($e,Oe,_,k,l,M)),Ae<a.length()-1){var Ke=!((H=$e)<11904||!(nr["Bopomofo Extended"](H)||nr.Bopomofo(H)||nr["CJK Compatibility Forms"](H)||nr["CJK Compatibility Ideographs"](H)||nr["CJK Compatibility"](H)||nr["CJK Radicals Supplement"](H)||nr["CJK Strokes"](H)||nr["CJK Symbols and Punctuation"](H)||nr["CJK Unified Ideographs Extension A"](H)||nr["CJK Unified Ideographs"](H)||nr["Enclosed CJK Letters and Months"](H)||nr["Halfwidth and Fullwidth Forms"](H)||nr.Hiragana(H)||nr["Ideographic Description Characters"](H)||nr["Kangxi Radicals"](H)||nr["Katakana Phonetic Extensions"](H)||nr.Katakana(H)||nr["Vertical Forms"](H)||nr["Yi Radicals"](H)||nr["Yi Syllables"](H)));(Ti[$e]||Ke||Oe.imageName)&&X.push(gd(Ae+1,ge,ie,X,yl($e,a.getCharCode(Ae+1),Ke&&ue),!1))}}return function ot(Qe){return Qe?ot(Qe.priorBreak).concat(Qe.index):[]}(gd(a.length(),ge,ie,X,0,!0))}function ls(a){var l=.5,f=.5;switch(a){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:l,verticalAlign:f}}function Mc(a,l,f,_,k){if(_||k)for(var D=a[f],M=(a[f].x+D.metrics.advance*D.scale)*_,H=l;H<=f;H++)a[H].x-=M,a[H].y+=k}function Ja(a,l,f,_,k,D){var M,H=a.image;if(H.content){var X=H.content,ie=H.pixelRatio||1;M=[X[0]/ie,X[1]/ie,H.displaySize[0]-X[2]/ie,H.displaySize[1]-X[3]/ie]}var ue,ge,Ae,Oe,$e=l.left*D,Ke=l.right*D;f==="width"||f==="both"?(Oe=k[0]+$e-_[3],ge=k[0]+Ke+_[1]):ge=(Oe=k[0]+($e+Ke-H.displaySize[0])/2)+H.displaySize[0];var ot=l.top*D,Qe=l.bottom*D;return f==="height"||f==="both"?(ue=k[1]+ot-_[0],Ae=k[1]+Qe+_[2]):Ae=(ue=k[1]+(ot+Qe-H.displaySize[1])/2)+H.displaySize[1],{image:H,top:ue,right:ge,bottom:Ae,left:Oe,collisionPadding:M}}Ti[10]=!0,Ti[32]=!0,Ti[38]=!0,Ti[40]=!0,Ti[41]=!0,Ti[43]=!0,Ti[45]=!0,Ti[47]=!0,Ti[173]=!0,Ti[183]=!0,Ti[8203]=!0,Ti[8208]=!0,Ti[8211]=!0,Ti[8231]=!0;var wh=function(a){function l(f,_,k,D){a.call(this,f,_),this.angle=k,D!==void 0&&(this.segment=D)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.clone=function(){return new l(this.x,this.y,this.angle,this.segment)},l}(ee);function Mu(a,l){var f=l.expression;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new In(a+1))};if(f.kind==="source")return{kind:"source"};for(var _=f.zoomStops,k=f.interpolationType,D=0;D<_.length&&_[D]<=a;)D++;for(var M=D=Math.max(0,D-1);M<_.length&&_[M]<a+1;)M++;M=Math.min(_.length-1,M);var H=_[D],X=_[M];return f.kind==="composite"?{kind:"composite",minZoom:H,maxZoom:X,interpolationType:k}:{kind:"camera",minZoom:H,maxZoom:X,minSize:f.evaluate(new In(H)),maxSize:f.evaluate(new In(X)),interpolationType:k}}function Pf(a,l,f){var _=l.uSize,k=f.lowerSize;return a.kind==="source"?k/128:a.kind==="composite"?ho(k/128,f.upperSize/128,l.uSizeT):_}function Mf(a,l){var f=0,_=0;if(a.kind==="constant")_=a.layoutSize;else if(a.kind!=="source"){var k=a.interpolationType,D=k?he(Ma.interpolationFactor(k,l,a.minZoom,a.maxZoom),0,1):0;a.kind==="camera"?_=ho(a.minSize,a.maxSize,D):f=D}return{uSizeT:f,uSize:_}}Ir("Anchor",wh);var Qs=Object.freeze({__proto__:null,getSizeData:Mu,evaluateSizeForFeature:Pf,evaluateSizeForZoom:Mf,SIZE_PACK_FACTOR:128});function vd(a,l,f,_,k){if(l.segment===void 0)return!0;for(var D=l,M=l.segment+1,H=0;H>-f/2;){if(--M<0)return!1;H-=a[M].dist(D),D=a[M]}H+=a[M].dist(a[M+1]),M++;for(var X=[],ie=0;H<f/2;){var ue=a[M],ge=a[M+1];if(!ge)return!1;var Ae=a[M-1].angleTo(ue)-ue.angleTo(ge);for(Ae=Math.abs((Ae+3*Math.PI)%(2*Math.PI)-Math.PI),X.push({distance:H,angleDelta:Ae}),ie+=Ae;H-X[0].distance>_;)ie-=X.shift().angleDelta;if(ie>k)return!1;M++,H+=ue.dist(ge)}return!0}function zg(a){for(var l=0,f=0;f<a.length-1;f++)l+=a[f].dist(a[f+1]);return l}function j1(a,l,f){return a?.6*l*f:0}function MA(a,l){return Math.max(a?a.right-a.left:0,l?l.right-l.left:0)}function WM(a,l,f,_,k,D){for(var M=j1(f,k,D),H=MA(f,_)*D,X=0,ie=zg(a)/2,ue=0;ue<a.length-1;ue++){var ge=a[ue],Ae=a[ue+1],Oe=ge.dist(Ae);if(X+Oe>ie){var $e=(ie-X)/Oe,Ke=ho(ge.x,Ae.x,$e),ot=ho(ge.y,Ae.y,$e),Qe=new wh(Ke,ot,Ae.angleTo(ge),ue);return Qe._round(),!M||vd(a,Qe,H,M,l)?Qe:void 0}X+=Oe}}function $M(a,l,f,_,k,D,M,H,X){var ie=j1(_,D,M),ue=MA(_,k),ge=ue*M,Ae=a[0].x===0||a[0].x===X||a[0].y===0||a[0].y===X;return l-ge<l/4&&(l=ge+l/4),function Oe($e,Ke,ot,Qe,yt,At,Lt,Nt,Gt){for(var lr=At/2,br=zg($e),$r=0,Ar=Ke-ot,Xr=[],Dr=0;Dr<$e.length-1;Dr++){for(var Bn=$e[Dr],mn=$e[Dr+1],jr=Bn.dist(mn),Gn=mn.angleTo(Bn);Ar+ot<$r+jr;){var Pn=((Ar+=ot)-$r)/jr,ni=ho(Bn.x,mn.x,Pn),en=ho(Bn.y,mn.y,Pn);if(ni>=0&&ni<Gt&&en>=0&&en<Gt&&Ar-lr>=0&&Ar+lr<=br){var gi=new wh(ni,en,Gn,Dr);gi._round(),Qe&&!vd($e,gi,At,Qe,yt)||Xr.push(gi)}}$r+=jr}return Nt||Xr.length||Lt||(Xr=Oe($e,$r/2,ot,Qe,yt,At,Lt,!0,Gt)),Xr}(a,Ae?l/2*H%l:(ue/2+2*D)*M*H%l,l,ie,f,ge,Ae,!1,X)}function LA(a,l,f,_,k){for(var D=[],M=0;M<a.length;M++)for(var H=a[M],X=void 0,ie=0;ie<H.length-1;ie++){var ue=H[ie],ge=H[ie+1];ue.x<l&&ge.x<l||(ue.x<l?ue=new ee(l,ue.y+(l-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round():ge.x<l&&(ge=new ee(l,ue.y+(l-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round()),ue.y<f&&ge.y<f||(ue.y<f?ue=new ee(ue.x+(f-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),f)._round():ge.y<f&&(ge=new ee(ue.x+(f-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),f)._round()),ue.x>=_&&ge.x>=_||(ue.x>=_?ue=new ee(_,ue.y+(_-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round():ge.x>=_&&(ge=new ee(_,ue.y+(_-ue.x)/(ge.x-ue.x)*(ge.y-ue.y))._round()),ue.y>=k&&ge.y>=k||(ue.y>=k?ue=new ee(ue.x+(k-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),k)._round():ge.y>=k&&(ge=new ee(ue.x+(k-ue.y)/(ge.y-ue.y)*(ge.x-ue.x),k)._round()),X&&ue.equals(X[X.length-1])||D.push(X=[ue]),X.push(ge)))))}return D}function RA(a,l,f,_){var k=[],D=a.image,M=D.pixelRatio,H=D.paddedRect.w-2,X=D.paddedRect.h-2,ie=a.right-a.left,ue=a.bottom-a.top,ge=D.stretchX||[[0,H]],Ae=D.stretchY||[[0,X]],Oe=function(ni,en){return ni+en[1]-en[0]},$e=ge.reduce(Oe,0),Ke=Ae.reduce(Oe,0),ot=H-$e,Qe=X-Ke,yt=0,At=$e,Lt=0,Nt=Ke,Gt=0,lr=ot,br=0,$r=Qe;if(D.content&&_){var Ar=D.content;yt=I0(ge,0,Ar[0]),Lt=I0(Ae,0,Ar[1]),At=I0(ge,Ar[0],Ar[2]),Nt=I0(Ae,Ar[1],Ar[3]),Gt=Ar[0]-yt,br=Ar[1]-Lt,lr=Ar[2]-Ar[0]-At,$r=Ar[3]-Ar[1]-Nt}var Xr=function(ni,en,gi,To){var Jo=D0(ni.stretch-yt,At,ie,a.left),zo=O0(ni.fixed-Gt,lr,ni.stretch,$e),vi=D0(en.stretch-Lt,Nt,ue,a.top),Qo=O0(en.fixed-br,$r,en.stretch,Ke),Qa=D0(gi.stretch-yt,At,ie,a.left),Po=O0(gi.fixed-Gt,lr,gi.stretch,$e),yn=D0(To.stretch-Lt,Nt,ue,a.top),cs=O0(To.fixed-br,$r,To.stretch,Ke),lo=new ee(Jo,vi),Jn=new ee(Qa,vi),fs=new ee(Qa,yn),Ln=new ee(Jo,yn),Zi=new ee(zo/M,Qo/M),Mi=new ee(Po/M,cs/M),oi=l*Math.PI/180;if(oi){var bl=Math.sin(oi),zs=Math.cos(oi),ro=[zs,-bl,bl,zs];lo._matMult(ro),Jn._matMult(ro),Ln._matMult(ro),fs._matMult(ro)}var Ta=ni.stretch+ni.fixed,jo=en.stretch+en.fixed;return{tl:lo,tr:Jn,bl:Ln,br:fs,tex:{x:D.paddedRect.x+1+Ta,y:D.paddedRect.y+1+jo,w:gi.stretch+gi.fixed-Ta,h:To.stretch+To.fixed-jo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Zi,pixelOffsetBR:Mi,minFontScaleX:lr/M/ie,minFontScaleY:$r/M/ue,isSDF:f}};if(_&&(D.stretchX||D.stretchY))for(var Dr=Ju(ge,ot,$e),Bn=Ju(Ae,Qe,Ke),mn=0;mn<Dr.length-1;mn++)for(var jr=Dr[mn],Gn=Dr[mn+1],Pn=0;Pn<Bn.length-1;Pn++)k.push(Xr(jr,Bn[Pn],Gn,Bn[Pn+1]));else k.push(Xr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:H+1},{fixed:0,stretch:X+1}));return k}function I0(a,l,f){for(var _=0,k=0,D=a;k<D.length;k+=1){var M=D[k];_+=Math.max(l,Math.min(f,M[1]))-Math.max(l,Math.min(f,M[0]))}return _}function Ju(a,l,f){for(var _=[{fixed:-1,stretch:0}],k=0,D=a;k<D.length;k+=1){var M=D[k],H=M[0],X=M[1],ie=_[_.length-1];_.push({fixed:H-ie.stretch,stretch:ie.stretch}),_.push({fixed:H-ie.stretch,stretch:ie.stretch+(X-H)})}return _.push({fixed:l+1,stretch:f}),_}function D0(a,l,f,_){return a/l*f+_}function O0(a,l,f,_){return a-l*f/_}var P0=function(a,l,f,_,k,D,M,H,X,ie){if(this.boxStartIndex=a.length,X){var ue=D.top,ge=D.bottom,Ae=D.collisionPadding;Ae&&(ue-=Ae[1],ge+=Ae[3]);var Oe=ge-ue;Oe>0&&(Oe=Math.max(10,Oe),this.circleDiameter=Oe)}else{var $e=D.top*M-H,Ke=D.bottom*M+H,ot=D.left*M-H,Qe=D.right*M+H,yt=D.collisionPadding;if(yt&&(ot-=yt[0]*M,$e-=yt[1]*M,Qe+=yt[2]*M,Ke+=yt[3]*M),ie){var At=new ee(ot,$e),Lt=new ee(Qe,$e),Nt=new ee(ot,Ke),Gt=new ee(Qe,Ke),lr=ie*Math.PI/180;At._rotate(lr),Lt._rotate(lr),Nt._rotate(lr),Gt._rotate(lr),ot=Math.min(At.x,Lt.x,Nt.x,Gt.x),Qe=Math.max(At.x,Lt.x,Nt.x,Gt.x),$e=Math.min(At.y,Lt.y,Nt.y,Gt.y),Ke=Math.max(At.y,Lt.y,Nt.y,Gt.y)}a.emplaceBack(l.x,l.y,ot,$e,Qe,Ke,f,_,k)}this.boxEndIndex=a.length},km=function(a,l){if(a===void 0&&(a=[]),l===void 0&&(l=GM),this.data=a,this.length=this.data.length,this.compare=l,this.length>0)for(var f=(this.length>>1)-1;f>=0;f--)this._down(f)};function GM(a,l){return a<l?-1:a>l?1:0}function KM(a,l,f){l===void 0&&(l=1),f===void 0&&(f=!1);for(var _=1/0,k=1/0,D=-1/0,M=-1/0,H=a[0],X=0;X<H.length;X++){var ie=H[X];(!X||ie.x<_)&&(_=ie.x),(!X||ie.y<k)&&(k=ie.y),(!X||ie.x>D)&&(D=ie.x),(!X||ie.y>M)&&(M=ie.y)}var ue=Math.min(D-_,M-k),ge=ue/2,Ae=new km([],ZM);if(ue===0)return new ee(_,k);for(var Oe=_;Oe<D;Oe+=ue)for(var $e=k;$e<M;$e+=ue)Ae.push(new jg(Oe+ge,$e+ge,ge,a));for(var Ke=function(yt){for(var At=0,Lt=0,Nt=0,Gt=yt[0],lr=0,br=Gt.length,$r=br-1;lr<br;$r=lr++){var Ar=Gt[lr],Xr=Gt[$r],Dr=Ar.x*Xr.y-Xr.x*Ar.y;Lt+=(Ar.x+Xr.x)*Dr,Nt+=(Ar.y+Xr.y)*Dr,At+=3*Dr}return new jg(Lt/At,Nt/At,0,yt)}(a),ot=Ae.length;Ae.length;){var Qe=Ae.pop();(Qe.d>Ke.d||!Ke.d)&&(Ke=Qe,f&&console.log("found best %d after %d probes",Math.round(1e4*Qe.d)/1e4,ot)),Qe.max-Ke.d<=l||(Ae.push(new jg(Qe.p.x-(ge=Qe.h/2),Qe.p.y-ge,ge,a)),Ae.push(new jg(Qe.p.x+ge,Qe.p.y-ge,ge,a)),Ae.push(new jg(Qe.p.x-ge,Qe.p.y+ge,ge,a)),Ae.push(new jg(Qe.p.x+ge,Qe.p.y+ge,ge,a)),ot+=4)}return f&&(console.log("num probes: "+ot),console.log("best distance: "+Ke.d)),Ke.p}function ZM(a,l){return l.max-a.max}function jg(a,l,f,_){this.p=new ee(a,l),this.h=f,this.d=function(k,D){for(var M=!1,H=1/0,X=0;X<D.length;X++)for(var ie=D[X],ue=0,ge=ie.length,Ae=ge-1;ue<ge;Ae=ue++){var Oe=ie[ue],$e=ie[Ae];Oe.y>k.y!=$e.y>k.y&&k.x<($e.x-Oe.x)*(k.y-Oe.y)/($e.y-Oe.y)+Oe.x&&(M=!M),H=Math.min(H,Sf(k,Oe,$e))}return(M?1:-1)*Math.sqrt(H)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}km.prototype.push=function(a){this.data.push(a),this.length++,this._up(this.length-1)},km.prototype.pop=function(){if(this.length!==0){var a=this.data[0],l=this.data.pop();return this.length--,this.length>0&&(this.data[0]=l,this._down(0)),a}},km.prototype.peek=function(){return this.data[0]},km.prototype._up=function(a){for(var l=this.data,f=this.compare,_=l[a];a>0;){var k=a-1>>1,D=l[k];if(f(_,D)>=0)break;l[a]=D,a=k}l[a]=_},km.prototype._down=function(a){for(var l=this.data,f=this.compare,_=this.length>>1,k=l[a];a<_;){var D=1+(a<<1),M=l[D],H=D+1;if(H<this.length&&f(l[H],M)<0&&(D=H,M=l[H]),f(M,k)>=0)break;l[a]=M,a=D}l[a]=k};var Cy=Number.POSITIVE_INFINITY;function FA(a,l){return l[1]!==Cy?function(f,_,k){var D=0,M=0;switch(_=Math.abs(_),k=Math.abs(k),f){case"top-right":case"top-left":case"top":M=k-7;break;case"bottom-right":case"bottom-left":case"bottom":M=7-k}switch(f){case"top-right":case"bottom-right":case"right":D=-_;break;case"top-left":case"bottom-left":case"left":D=_}return[D,M]}(a,l[0],l[1]):function(f,_){var k=0,D=0;_<0&&(_=0);var M=_/Math.sqrt(2);switch(f){case"top-right":case"top-left":D=M-7;break;case"bottom-right":case"bottom-left":D=7-M;break;case"bottom":D=7-_;break;case"top":D=_-7}switch(f){case"top-right":case"bottom-right":k=-M;break;case"top-left":case"bottom-left":k=M;break;case"left":k=_;break;case"right":k=-_}return[k,D]}(a,l[0])}function U1(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function qA(a,l,f,_,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e){var Ke=function(Lt,Nt,Gt,lr,br,$r,Ar,Xr){for(var Dr=lr.layout.get("text-rotate").evaluate($r,{})*Math.PI/180,Bn=[],mn=0,jr=Nt.positionedLines;mn<jr.length;mn+=1)for(var Gn=jr[mn],Pn=0,ni=Gn.positionedGlyphs;Pn<ni.length;Pn+=1){var en=ni[Pn];if(en.rect){var gi=en.rect||{},To=4,Jo=!0,zo=1,vi=0,Qo=(br||Xr)&&en.vertical,Qa=en.metrics.advance*en.scale/2;if(Xr&&Nt.verticalizable&&(vi=Gn.lineOffset/2-(en.imageName?-(24-en.metrics.width*en.scale)/2:24*(en.scale-1))),en.imageName){var Po=Ar[en.imageName];Jo=Po.sdf,To=1/(zo=Po.pixelRatio)}var yn=br?[en.x+Qa,en.y]:[0,0],cs=br?[0,0]:[en.x+Qa+Gt[0],en.y+Gt[1]-vi],lo=[0,0];Qo&&(lo=cs,cs=[0,0]);var Jn=(en.metrics.left-To)*en.scale-Qa+cs[0],fs=(-en.metrics.top-To)*en.scale+cs[1],Ln=Jn+gi.w*en.scale/zo,Zi=fs+gi.h*en.scale/zo,Mi=new ee(Jn,fs),oi=new ee(Ln,fs),bl=new ee(Jn,Zi),zs=new ee(Ln,Zi);if(Qo){var ro=new ee(-Qa,Qa- -17),Ta=-Math.PI/2,jo=12-Qa,fi=new ee(22-jo,-(en.imageName?jo:0)),Qu=new(Function.prototype.bind.apply(ee,[null].concat(lo)));Mi._rotateAround(Ta,ro)._add(fi)._add(Qu),oi._rotateAround(Ta,ro)._add(fi)._add(Qu),bl._rotateAround(Ta,ro)._add(fi)._add(Qu),zs._rotateAround(Ta,ro)._add(fi)._add(Qu)}if(Dr){var Ai=Math.sin(Dr),uo=Math.cos(Dr),ea=[uo,-Ai,Ai,uo];Mi._matMult(ea),oi._matMult(ea),bl._matMult(ea),zs._matMult(ea)}var Eh=new ee(0,0),Lc=new ee(0,0);Bn.push({tl:Mi,tr:oi,bl,br:zs,tex:gi,writingMode:Nt.writingMode,glyphOffset:yn,sectionIndex:en.sectionIndex,isSDF:Jo,pixelOffsetTL:Eh,pixelOffsetBR:Lc,minFontScaleX:0,minFontScaleY:0})}}return Bn}(0,f,H,k,D,M,_,a.allowVerticalPlacement),ot=a.textSizeData,Qe=null;ot.kind==="source"?(Qe=[128*k.layout.get("text-size").evaluate(M,{})])[0]>32640&&Ut(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):ot.kind==="composite"&&((Qe=[128*Oe.compositeTextSizes[0].evaluate(M,{},$e),128*Oe.compositeTextSizes[1].evaluate(M,{},$e)])[0]>32640||Qe[1]>32640)&&Ut(a.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),a.addSymbols(a.text,Ke,Qe,H,D,M,ie,l,X.lineStartIndex,X.lineLength,Ae,$e);for(var yt=0,At=ue;yt<At.length;yt+=1)ge[At[yt]]=a.text.placedSymbolArray.length-1;return 4*Ke.length}function NA(a){for(var l in a)return a[l];return null}function YM(a,l,f,_){var k=a.compareText;if(l in k){for(var D=k[l],M=D.length-1;M>=0;M--)if(_.dist(D[M])<f)return!0}else k[l]=[];return k[l].push(_),!1}var XM=md.VectorTileFeature.types,JM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function M0(a,l,f,_,k,D,M,H,X,ie,ue,ge,Ae){var Oe=H?Math.min(32640,Math.round(H[0])):0,$e=H?Math.min(32640,Math.round(H[1])):0;a.emplaceBack(l,f,Math.round(32*_),Math.round(32*k),D,M,(Oe<<1)+(X?1:0),$e,16*ie,16*ue,256*ge,256*Ae)}function V1(a,l,f){a.emplaceBack(l.x,l.y,f),a.emplaceBack(l.x,l.y,f),a.emplaceBack(l.x,l.y,f),a.emplaceBack(l.x,l.y,f)}function QM(a){for(var l=0,f=a.sections;l<f.length;l+=1)if(bf(f[l].text))return!0;return!1}var Ug=function(a){this.layoutVertexArray=new ud,this.indexArray=new Ku,this.programConfigurations=a,this.segments=new Me,this.dynamicLayoutVertexArray=new Tu,this.opacityVertexArray=new cd,this.placedSymbolArray=new x};Ug.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Ug.prototype.upload=function(a,l,f,_){this.isEmpty()||(f&&(this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,as.members),this.indexBuffer=a.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=a.createVertexBuffer(this.dynamicLayoutVertexArray,B1.members,!0),this.opacityVertexBuffer=a.createVertexBuffer(this.opacityVertexArray,JM,!0),this.opacityVertexBuffer.itemSize=1),(f||_)&&this.programConfigurations.upload(a))},Ug.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ir("SymbolBuffers",Ug);var Iy=function(a,l,f){this.layoutVertexArray=new a,this.layoutAttributes=l,this.indexArray=new f,this.segments=new Me,this.collisionVertexArray=new gm};Iy.prototype.upload=function(a){this.layoutVertexBuffer=a.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=a.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=a.createVertexBuffer(this.collisionVertexArray,Sa.members,!0)},Iy.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ir("CollisionBuffers",Iy);var Hi=function(a){this.collisionBoxArray=a.collisionBoxArray,this.zoom=a.zoom,this.overscaling=a.overscaling,this.layers=a.layers,this.layerIds=this.layers.map(function(D){return D.id}),this.index=a.index,this.pixelRatio=a.pixelRatio,this.sourceLayerIndex=a.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=to([]),this.placementViewportMatrix=to([]);var l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Mu(this.zoom,l["text-size"]),this.iconSizeData=Mu(this.zoom,l["icon-size"]);var f=this.layers[0].layout,_=f.get("symbol-sort-key"),k=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=k!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(k==="viewport-y"||k==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(function(D){return _i[D]})),this.stateDependentLayerIds=this.layers.filter(function(D){return D.isStateDependent()}).map(function(D){return D.id}),this.sourceID=a.sourceID};Hi.prototype.createArrays=function(){this.text=new Ug(new ln(this.layers,this.zoom,function(a){return/^text/.test(a)})),this.icon=new Ug(new ln(this.layers,this.zoom,function(a){return/^icon/.test(a)})),this.glyphOffsetArray=new z,this.lineVertexArray=new Y,this.symbolInstances=new F},Hi.prototype.calculateGlyphDependencies=function(a,l,f,_,k){for(var D=0;D<a.length;D++)if(l[a.charCodeAt(D)]=!0,(f||_)&&k){var M=xh[a.charAt(D)];M&&(l[M.charCodeAt(0)]=!0)}},Hi.prototype.populate=function(a,l,f){var _=this.layers[0],k=_.layout,D=k.get("text-font"),M=k.get("text-field"),H=k.get("icon-image"),X=(M.value.kind!=="constant"||M.value.value instanceof bo&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(D.value.kind!=="constant"||D.value.value.length>0),ie=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,ue=k.get("symbol-sort-key");if(this.features=[],X||ie){for(var ge=l.iconDependencies,Ae=l.glyphDependencies,Oe=l.availableImages,$e=new In(this.zoom),Ke=0,ot=a;Ke<ot.length;Ke+=1){var Qe=ot[Ke],yt=Qe.feature,At=Qe.id,Lt=Qe.index,Nt=Qe.sourceLayerIndex,Gt=_._featureFilter.needGeometry,lr=So(yt,Gt);if(_._featureFilter.filter($e,lr,f)){Gt||(lr.geometry=Ki(yt));var br=void 0;if(X){var $r=_.getValueAndResolveTokens("text-field",lr,f,Oe),Ar=bo.factory($r);QM(Ar)&&(this.hasRTLText=!0),(!this.hasRTLText||$u()==="unavailable"||this.hasRTLText&&ml.isParsed())&&(br=C0(Ar,_,lr))}var Xr=void 0;if(ie){var Dr=_.getValueAndResolveTokens("icon-image",lr,f,Oe);Xr=Dr instanceof Go?Dr:Go.fromString(Dr)}if(br||Xr){var Bn=this.sortFeaturesByKey?ue.evaluate(lr,{},f):void 0;if(this.features.push({id:At,text:br,icon:Xr,index:Lt,sourceLayerIndex:Nt,geometry:lr.geometry,properties:yt.properties,type:XM[yt.type],sortKey:Bn}),Xr&&(ge[Xr.name]=!0),br){var mn=D.evaluate(lr,{},f).join(","),jr=k.get("text-rotation-alignment")==="map"&&k.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_i.vertical)>=0;for(var Gn=0,Pn=br.sections;Gn<Pn.length;Gn+=1){var ni=Pn[Gn];if(ni.image)ge[ni.image.name]=!0;else{var en=Ko(br.toString()),gi=ni.fontStack||mn,To=Ae[gi]=Ae[gi]||{};this.calculateGlyphDependencies(ni.text,To,jr,this.allowVerticalPlacement,en)}}}}}}k.get("symbol-placement")==="line"&&(this.features=function(Jo){var zo={},vi={},Qo=[],Qa=0;function Po(ro){Qo.push(Jo[ro]),Qa++}function yn(ro,Ta,jo){var fi=vi[ro];return delete vi[ro],vi[Ta]=fi,Qo[fi].geometry[0].pop(),Qo[fi].geometry[0]=Qo[fi].geometry[0].concat(jo[0]),fi}function cs(ro,Ta,jo){var fi=zo[Ta];return delete zo[Ta],zo[ro]=fi,Qo[fi].geometry[0].shift(),Qo[fi].geometry[0]=jo[0].concat(Qo[fi].geometry[0]),fi}function lo(ro,Ta,jo){var fi=jo?Ta[0][Ta[0].length-1]:Ta[0][0];return ro+":"+fi.x+":"+fi.y}for(var Jn=0;Jn<Jo.length;Jn++){var fs=Jo[Jn],Ln=fs.geometry,Zi=fs.text?fs.text.toString():null;if(Zi){var Mi=lo(Zi,Ln),oi=lo(Zi,Ln,!0);if(Mi in vi&&oi in zo&&vi[Mi]!==zo[oi]){var bl=cs(Mi,oi,Ln),zs=yn(Mi,oi,Qo[bl].geometry);delete zo[Mi],delete vi[oi],vi[lo(Zi,Qo[zs].geometry,!0)]=zs,Qo[bl].geometry=null}else Mi in vi?yn(Mi,oi,Ln):oi in zo?cs(Mi,oi,Ln):(Po(Jn),zo[Mi]=Qa-1,vi[oi]=Qa-1)}else Po(Jn)}return Qo.filter(function(ro){return ro.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Jo,zo){return Jo.sortKey-zo.sortKey})}},Hi.prototype.update=function(a,l,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(a,l,this.layers,f),this.icon.programConfigurations.updatePaintArrays(a,l,this.layers,f))},Hi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Hi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Hi.prototype.upload=function(a){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(a),this.iconCollisionBox.upload(a)),this.text.upload(a,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(a,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Hi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Hi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Hi.prototype.addToLineVertexArray=function(a,l){var f=this.lineVertexArray.length;if(a.segment!==void 0){for(var _=a.dist(l[a.segment+1]),k=a.dist(l[a.segment]),D={},M=a.segment+1;M<l.length;M++)D[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:_},M<l.length-1&&(_+=l[M+1].dist(l[M]));for(var H=a.segment||0;H>=0;H--)D[H]={x:l[H].x,y:l[H].y,tileUnitDistanceFromAnchor:k},H>0&&(k+=l[H-1].dist(l[H]));for(var X=0;X<l.length;X++){var ie=D[X];this.lineVertexArray.emplaceBack(ie.x,ie.y,ie.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}},Hi.prototype.addSymbols=function(a,l,f,_,k,D,M,H,X,ie,ue,ge){for(var Ae=a.indexArray,Oe=a.layoutVertexArray,$e=a.segments.prepareSegment(4*l.length,Oe,Ae,this.canOverlap?D.sortKey:void 0),Ke=this.glyphOffsetArray.length,ot=$e.vertexLength,Qe=this.allowVerticalPlacement&&M===_i.vertical?Math.PI/2:0,yt=D.text&&D.text.sections,At=0;At<l.length;At++){var Lt=l[At],Nt=Lt.tl,Gt=Lt.tr,lr=Lt.bl,br=Lt.br,$r=Lt.tex,Ar=Lt.pixelOffsetTL,Xr=Lt.pixelOffsetBR,Dr=Lt.minFontScaleX,Bn=Lt.minFontScaleY,mn=Lt.glyphOffset,jr=Lt.isSDF,Gn=Lt.sectionIndex,Pn=$e.vertexLength,ni=mn[1];M0(Oe,H.x,H.y,Nt.x,ni+Nt.y,$r.x,$r.y,f,jr,Ar.x,Ar.y,Dr,Bn),M0(Oe,H.x,H.y,Gt.x,ni+Gt.y,$r.x+$r.w,$r.y,f,jr,Xr.x,Ar.y,Dr,Bn),M0(Oe,H.x,H.y,lr.x,ni+lr.y,$r.x,$r.y+$r.h,f,jr,Ar.x,Xr.y,Dr,Bn),M0(Oe,H.x,H.y,br.x,ni+br.y,$r.x+$r.w,$r.y+$r.h,f,jr,Xr.x,Xr.y,Dr,Bn),V1(a.dynamicLayoutVertexArray,H,Qe),Ae.emplaceBack(Pn,Pn+1,Pn+2),Ae.emplaceBack(Pn+1,Pn+2,Pn+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mn[0]),At!==l.length-1&&Gn===l[At+1].sectionIndex||a.programConfigurations.populatePaintArrays(Oe.length,D,D.index,{},ge,yt&&yt[Gn])}a.placedSymbolArray.emplaceBack(H.x,H.y,Ke,this.glyphOffsetArray.length-Ke,ot,X,ie,H.segment,f?f[0]:0,f?f[1]:0,_[0],_[1],M,0,!1,0,ue)},Hi.prototype._addCollisionDebugVertex=function(a,l,f,_,k,D){return l.emplaceBack(0,0),a.emplaceBack(f.x,f.y,_,k,Math.round(D.x),Math.round(D.y))},Hi.prototype.addCollisionDebugVertices=function(a,l,f,_,k,D,M){var H=k.segments.prepareSegment(4,k.layoutVertexArray,k.indexArray),X=H.vertexLength,ie=k.layoutVertexArray,ue=k.collisionVertexArray,ge=M.anchorX,Ae=M.anchorY;this._addCollisionDebugVertex(ie,ue,D,ge,Ae,new ee(a,l)),this._addCollisionDebugVertex(ie,ue,D,ge,Ae,new ee(f,l)),this._addCollisionDebugVertex(ie,ue,D,ge,Ae,new ee(f,_)),this._addCollisionDebugVertex(ie,ue,D,ge,Ae,new ee(a,_)),H.vertexLength+=4;var Oe=k.indexArray;Oe.emplaceBack(X,X+1),Oe.emplaceBack(X+1,X+2),Oe.emplaceBack(X+2,X+3),Oe.emplaceBack(X+3,X),H.primitiveLength+=4},Hi.prototype.addDebugCollisionBoxes=function(a,l,f,_){for(var k=a;k<l;k++){var D=this.collisionBoxArray.get(k);this.addCollisionDebugVertices(D.x1,D.y1,D.x2,D.y2,_?this.textCollisionBox:this.iconCollisionBox,D.anchorPoint,f)}},Hi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Iy(Xs,ky.members,uh),this.iconCollisionBox=new Iy(Xs,ky.members,uh);for(var a=0;a<this.symbolInstances.length;a++){var l=this.symbolInstances.get(a);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}},Hi.prototype._deserializeCollisionBoxesForSymbol=function(a,l,f,_,k,D,M,H,X){for(var ie={},ue=l;ue<f;ue++){var ge=a.get(ue);ie.textBox={x1:ge.x1,y1:ge.y1,x2:ge.x2,y2:ge.y2,anchorPointX:ge.anchorPointX,anchorPointY:ge.anchorPointY},ie.textFeatureIndex=ge.featureIndex;break}for(var Ae=_;Ae<k;Ae++){var Oe=a.get(Ae);ie.verticalTextBox={x1:Oe.x1,y1:Oe.y1,x2:Oe.x2,y2:Oe.y2,anchorPointX:Oe.anchorPointX,anchorPointY:Oe.anchorPointY},ie.verticalTextFeatureIndex=Oe.featureIndex;break}for(var $e=D;$e<M;$e++){var Ke=a.get($e);ie.iconBox={x1:Ke.x1,y1:Ke.y1,x2:Ke.x2,y2:Ke.y2,anchorPointX:Ke.anchorPointX,anchorPointY:Ke.anchorPointY},ie.iconFeatureIndex=Ke.featureIndex;break}for(var ot=H;ot<X;ot++){var Qe=a.get(ot);ie.verticalIconBox={x1:Qe.x1,y1:Qe.y1,x2:Qe.x2,y2:Qe.y2,anchorPointX:Qe.anchorPointX,anchorPointY:Qe.anchorPointY},ie.verticalIconFeatureIndex=Qe.featureIndex;break}return ie},Hi.prototype.deserializeCollisionBoxes=function(a){this.collisionArrays=[];for(var l=0;l<this.symbolInstances.length;l++){var f=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(a,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}},Hi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Hi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Hi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Hi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Hi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Hi.prototype.addIndicesForPlacedSymbol=function(a,l){for(var f=a.placedSymbolArray.get(l),_=f.vertexStartIndex+4*f.numGlyphs,k=f.vertexStartIndex;k<_;k+=4)a.indexArray.emplaceBack(k,k+1,k+2),a.indexArray.emplaceBack(k+1,k+2,k+3)},Hi.prototype.getSortedSymbolIndexes=function(a){if(this.sortedAngle===a&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var l=Math.sin(a),f=Math.cos(a),_=[],k=[],D=[],M=0;M<this.symbolInstances.length;++M){D.push(M);var H=this.symbolInstances.get(M);_.push(0|Math.round(l*H.anchorX+f*H.anchorY)),k.push(H.featureIndex)}return D.sort(function(X,ie){return _[X]-_[ie]||k[ie]-k[X]}),D},Hi.prototype.addToSortKeyRanges=function(a,l){var f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===l?f.symbolInstanceEnd=a+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:a,symbolInstanceEnd:a+1})},Hi.prototype.sortFeatures=function(a){var l=this;if(this.sortFeaturesByY&&this.sortedAngle!==a&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(a),this.sortedAngle=a,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var f=0,_=this.symbolInstanceIndexes;f<_.length;f+=1){var k=this.symbolInstances.get(_[f]);this.featureSortOrder.push(k.featureIndex),[k.rightJustifiedTextSymbolIndex,k.centerJustifiedTextSymbolIndex,k.leftJustifiedTextSymbolIndex].forEach(function(D,M,H){D>=0&&H.indexOf(D)===M&&l.addIndicesForPlacedSymbol(l.text,D)}),k.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,k.verticalPlacedTextSymbolIndex),k.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.placedIconSymbolIndex),k.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,k.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ir("SymbolBucket",Hi,{omit:["layers","collisionBoxArray","features","compareText"]}),Hi.MAX_GLYPHS=65535,Hi.addDynamicAttributes=V1;var eL=new ao({"symbol-placement":new mr(fe.layout_symbol["symbol-placement"]),"symbol-spacing":new mr(fe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mr(fe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt(fe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mr(fe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mr(fe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new mr(fe.layout_symbol["icon-ignore-placement"]),"icon-optional":new mr(fe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mr(fe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt(fe.layout_symbol["icon-size"]),"icon-text-fit":new mr(fe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mr(fe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt(fe.layout_symbol["icon-image"]),"icon-rotate":new Xt(fe.layout_symbol["icon-rotate"]),"icon-padding":new mr(fe.layout_symbol["icon-padding"]),"icon-keep-upright":new mr(fe.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt(fe.layout_symbol["icon-offset"]),"icon-anchor":new Xt(fe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mr(fe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mr(fe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mr(fe.layout_symbol["text-rotation-alignment"]),"text-field":new Xt(fe.layout_symbol["text-field"]),"text-font":new Xt(fe.layout_symbol["text-font"]),"text-size":new Xt(fe.layout_symbol["text-size"]),"text-max-width":new Xt(fe.layout_symbol["text-max-width"]),"text-line-height":new mr(fe.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt(fe.layout_symbol["text-letter-spacing"]),"text-justify":new Xt(fe.layout_symbol["text-justify"]),"text-radial-offset":new Xt(fe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mr(fe.layout_symbol["text-variable-anchor"]),"text-anchor":new Xt(fe.layout_symbol["text-anchor"]),"text-max-angle":new mr(fe.layout_symbol["text-max-angle"]),"text-writing-mode":new mr(fe.layout_symbol["text-writing-mode"]),"text-rotate":new Xt(fe.layout_symbol["text-rotate"]),"text-padding":new mr(fe.layout_symbol["text-padding"]),"text-keep-upright":new mr(fe.layout_symbol["text-keep-upright"]),"text-transform":new Xt(fe.layout_symbol["text-transform"]),"text-offset":new Xt(fe.layout_symbol["text-offset"]),"text-allow-overlap":new mr(fe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new mr(fe.layout_symbol["text-ignore-placement"]),"text-optional":new mr(fe.layout_symbol["text-optional"])}),H1={paint:new ao({"icon-opacity":new Xt(fe.paint_symbol["icon-opacity"]),"icon-color":new Xt(fe.paint_symbol["icon-color"]),"icon-halo-color":new Xt(fe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt(fe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt(fe.paint_symbol["icon-halo-blur"]),"icon-translate":new mr(fe.paint_symbol["icon-translate"]),"icon-translate-anchor":new mr(fe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xt(fe.paint_symbol["text-opacity"]),"text-color":new Xt(fe.paint_symbol["text-color"],{runtimeType:ct,getOverride:function(a){return a.textColor},hasOverride:function(a){return!!a.textColor}}),"text-halo-color":new Xt(fe.paint_symbol["text-halo-color"]),"text-halo-width":new Xt(fe.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt(fe.paint_symbol["text-halo-blur"]),"text-translate":new mr(fe.paint_symbol["text-translate"]),"text-translate-anchor":new mr(fe.paint_symbol["text-translate-anchor"])}),layout:eL},Vg=function(a){this.type=a.property.overrides?a.property.overrides.runtimeType:dr,this.defaultValue=a};Vg.prototype.evaluate=function(a){if(a.formattedSection){var l=this.defaultValue.property.overrides;if(l&&l.hasOverride(a.formattedSection))return l.getOverride(a.formattedSection)}return a.feature&&a.featureState?this.defaultValue.evaluate(a.feature,a.featureState):this.defaultValue.property.specification.default},Vg.prototype.eachChild=function(a){this.defaultValue.isConstant()||a(this.defaultValue.value._styleExpression.expression)},Vg.prototype.outputDefined=function(){return!1},Vg.prototype.serialize=function(){return null},Ir("FormatSectionOverride",Vg,{omit:["defaultValue"]});var tL=function(a){function l(f){a.call(this,f,H1)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.recalculate=function(f,_){if(a.prototype.recalculate.call(this,f,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var k=this.layout.get("text-writing-mode");if(k){for(var D=[],M=0,H=k;M<H.length;M+=1){var X=H[M];D.indexOf(X)<0&&D.push(X)}this.layout._values["text-writing-mode"]=D}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},l.prototype.getValueAndResolveTokens=function(f,_,k,D){var M=this.layout.get(f).evaluate(_,{},k,D),H=this._unevaluatedLayout._values[f];return H.isDataDriven()||Fs(H.value)||!M?M:function(X,ie){return ie.replace(/{([^{}]+)}/g,function(ue,ge){return ge in X?String(X[ge]):""})}(_.properties,M)},l.prototype.createBucket=function(f){return new Hi(f)},l.prototype.queryRadius=function(){return 0},l.prototype.queryIntersectsFeature=function(){return!1},l.prototype._setPaintOverrides=function(){for(var f=0,_=H1.paint.overridableProperties;f<_.length;f+=1){var k=_[f];if(l.hasPaintOverride(this.layout,k)){var D,M=this.paint.get(k),H=new Vg(M),X=new Xl(H,M.property.specification);D=M.value.kind==="constant"||M.value.kind==="source"?new nh("source",X):new bu("composite",X,M.value.zoomStops,M.value._interpolationType),this.paint._values[k]=new oa(M.property,D,M.parameters)}}},l.prototype._handleOverridablePaintPropertyUpdate=function(f,_,k){return!(!this.layout||_.isDataDriven()||k.isDataDriven())&&l.hasPaintOverride(this.layout,f)},l.hasPaintOverride=function(f,_){var k=f.get("text-field"),D=H1.paint.properties[_],M=!1,H=function(ue){for(var ge=0,Ae=ue;ge<Ae.length;ge+=1)if(D.overrides&&D.overrides.hasOverride(Ae[ge]))return void(M=!0)};if(k.value.kind==="constant"&&k.value.value instanceof bo)H(k.value.value.sections);else if(k.value.kind==="source"){var X=function(ue){M||(ue instanceof Ha&&Co(ue.value)===rn?H(ue.value.sections):ue instanceof Il?H(ue.sections):ue.eachChild(X))},ie=k.value;ie._styleExpression&&X(ie._styleExpression.expression)}return M},l}(Eu),rL={paint:new ao({"background-color":new mr(fe.paint_background["background-color"]),"background-pattern":new va(fe.paint_background["background-pattern"]),"background-opacity":new mr(fe.paint_background["background-opacity"])})},nL=function(a){function l(f){a.call(this,f,rL)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Eu),iL={paint:new ao({"raster-opacity":new mr(fe.paint_raster["raster-opacity"]),"raster-hue-rotate":new mr(fe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mr(fe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mr(fe.paint_raster["raster-brightness-max"]),"raster-saturation":new mr(fe.paint_raster["raster-saturation"]),"raster-contrast":new mr(fe.paint_raster["raster-contrast"]),"raster-resampling":new mr(fe.paint_raster["raster-resampling"]),"raster-fade-duration":new mr(fe.paint_raster["raster-fade-duration"])})},W1=function(a){function l(f){a.call(this,f,iL)}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l}(Eu),BA=function(a){function l(f){a.call(this,f,{}),this.implementation=f}return a&&(l.__proto__=a),(l.prototype=Object.create(a&&a.prototype)).constructor=l,l.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},l.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},l.prototype.recalculate=function(){},l.prototype.updateTransitions=function(){},l.prototype.hasTransition=function(){},l.prototype.serialize=function(){},l.prototype.onAdd=function(f){this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},l.prototype.onRemove=function(f){this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},l}(Eu),oL={circle:Lg,heatmap:Oc,hillshade:nu,fill:Sy,"fill-extrusion":Ty,line:_h,symbol:tL,background:nL,raster:W1},zA=me.HTMLImageElement,jA=me.HTMLCanvasElement,UA=me.HTMLVideoElement,VA=me.ImageData,L0=me.ImageBitmap,Cm=function(a,l,f,_){this.context=a,this.format=f,this.texture=a.gl.createTexture(),this.update(l,_)};Cm.prototype.update=function(a,l,f){var _=a.width,k=a.height,D=!(this.size&&this.size[0]===_&&this.size[1]===k||f),M=this.context,H=M.gl;if(this.useMipmap=!!(l&&l.useMipmap),H.bindTexture(H.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===H.RGBA&&(!l||l.premultiply!==!1)),D)this.size=[_,k],a instanceof zA||a instanceof jA||a instanceof UA||a instanceof VA||L0&&a instanceof L0?H.texImage2D(H.TEXTURE_2D,0,this.format,this.format,H.UNSIGNED_BYTE,a):H.texImage2D(H.TEXTURE_2D,0,this.format,_,k,0,this.format,H.UNSIGNED_BYTE,a.data);else{var X=f||{x:0,y:0},ie=X.x,ue=X.y;a instanceof zA||a instanceof jA||a instanceof UA||a instanceof VA||L0&&a instanceof L0?H.texSubImage2D(H.TEXTURE_2D,0,ie,ue,H.RGBA,H.UNSIGNED_BYTE,a):H.texSubImage2D(H.TEXTURE_2D,0,ie,ue,_,k,H.RGBA,H.UNSIGNED_BYTE,a.data)}this.useMipmap&&this.isSizePowerOfTwo()&&H.generateMipmap(H.TEXTURE_2D)},Cm.prototype.bind=function(a,l,f){var _=this.context.gl;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),a!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,a),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||a),this.filter=a),l!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,l),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,l),this.wrap=l)},Cm.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Cm.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var $1=function(a){var l=this;this._callback=a,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){l._triggered=!1,l._callback()})};$1.prototype.trigger=function(){var a=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){a._triggered=!1,a._callback()},0))},$1.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Im=function(a,l,f){this.target=a,this.parent=l,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},ne(["receive","process"],this),this.invoker=new $1(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=pr()?a:me};function HA(a,l,f){var _=2*Math.PI*6378137/256/Math.pow(2,f);return[a*_-2*Math.PI*6378137/2,l*_-2*Math.PI*6378137/2]}Im.prototype.send=function(a,l,f,_,k){var D=this;k===void 0&&(k=!1);var M=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[M]=f);var H=Qr(this.globalScope)?void 0:[];return this.target.postMessage({id:M,type:a,hasCallback:!!f,targetMapId:_,mustQueue:k,sourceMapId:this.mapId,data:Ml(l,H)},H),{cancel:function(){f&&delete D.callbacks[M],D.target.postMessage({id:M,type:"<cancel>",targetMapId:_,sourceMapId:D.mapId})}}},Im.prototype.receive=function(a){var l=a.data,f=l.id;if(f&&(!l.targetMapId||this.mapId===l.targetMapId))if(l.type==="<cancel>"){delete this.tasks[f];var _=this.cancelCallbacks[f];delete this.cancelCallbacks[f],_&&_()}else pr()||l.mustQueue?(this.tasks[f]=l,this.taskQueue.push(f),this.invoker.trigger()):this.processTask(f,l)},Im.prototype.process=function(){if(this.taskQueue.length){var a=this.taskQueue.shift(),l=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),l&&this.processTask(a,l)}},Im.prototype.processTask=function(a,l){var f=this;if(l.type==="<response>"){var _=this.callbacks[a];delete this.callbacks[a],_&&(l.error?_(Es(l.error)):_(null,Es(l.data)))}else{var k=!1,D=Qr(this.globalScope)?void 0:[],M=l.hasCallback?function(ue,ge){k=!0,delete f.cancelCallbacks[a],f.target.postMessage({id:a,type:"<response>",sourceMapId:f.mapId,error:ue?Ml(ue):null,data:Ml(ge,D)},D)}:function(ue){k=!0},H=null,X=Es(l.data);if(this.parent[l.type])H=this.parent[l.type](l.sourceMapId,X,M);else if(this.parent.getWorkerSource){var ie=l.type.split(".");H=this.parent.getWorkerSource(l.sourceMapId,ie[0],X.source)[ie[1]](X,M)}else M(new Error("Could not find function "+l.type));!k&&H&&H.cancel&&(this.cancelCallbacks[a]=H.cancel)}},Im.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Xo=function(a,l){a&&(l?this.setSouthWest(a).setNorthEast(l):a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1]))};Xo.prototype.setNorthEast=function(a){return this._ne=a instanceof Eo?new Eo(a.lng,a.lat):Eo.convert(a),this},Xo.prototype.setSouthWest=function(a){return this._sw=a instanceof Eo?new Eo(a.lng,a.lat):Eo.convert(a),this},Xo.prototype.extend=function(a){var l,f,_=this._sw,k=this._ne;if(a instanceof Eo)l=a,f=a;else{if(!(a instanceof Xo))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Xo.convert(a)):this.extend(Eo.convert(a)):this;if(f=a._ne,!(l=a._sw)||!f)return this}return _||k?(_.lng=Math.min(l.lng,_.lng),_.lat=Math.min(l.lat,_.lat),k.lng=Math.max(f.lng,k.lng),k.lat=Math.max(f.lat,k.lat)):(this._sw=new Eo(l.lng,l.lat),this._ne=new Eo(f.lng,f.lat)),this},Xo.prototype.getCenter=function(){return new Eo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Xo.prototype.getSouthWest=function(){return this._sw},Xo.prototype.getNorthEast=function(){return this._ne},Xo.prototype.getNorthWest=function(){return new Eo(this.getWest(),this.getNorth())},Xo.prototype.getSouthEast=function(){return new Eo(this.getEast(),this.getSouth())},Xo.prototype.getWest=function(){return this._sw.lng},Xo.prototype.getSouth=function(){return this._sw.lat},Xo.prototype.getEast=function(){return this._ne.lng},Xo.prototype.getNorth=function(){return this._ne.lat},Xo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Xo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Xo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Xo.prototype.contains=function(a){var l=Eo.convert(a),f=l.lng,_=l.lat,k=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(k=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&k},Xo.convert=function(a){return!a||a instanceof Xo?a:new Xo(a)};var Eo=function(a,l){if(isNaN(a)||isNaN(l))throw new Error("Invalid LngLat object: ("+a+", "+l+")");if(this.lng=+a,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Eo.prototype.wrap=function(){return new Eo(Ce(this.lng,-180,180),this.lat)},Eo.prototype.toArray=function(){return[this.lng,this.lat]},Eo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Eo.prototype.distanceTo=function(a){var l=Math.PI/180,f=this.lat*l,_=a.lat*l,k=Math.sin(f)*Math.sin(_)+Math.cos(f)*Math.cos(_)*Math.cos((a.lng-this.lng)*l);return 63710088e-1*Math.acos(Math.min(k,1))},Eo.prototype.toBounds=function(a){a===void 0&&(a=0);var l=360*a/40075017,f=l/Math.cos(Math.PI/180*this.lat);return new Xo(new Eo(this.lng-f,this.lat-l),new Eo(this.lng+f,this.lat+l))},Eo.convert=function(a){if(a instanceof Eo)return a;if(Array.isArray(a)&&(a.length===2||a.length===3))return new Eo(Number(a[0]),Number(a[1]));if(!Array.isArray(a)&&typeof a=="object"&&a!==null)return new Eo(Number("lng"in a?a.lng:a.lon),Number(a.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var WA=2*Math.PI*63710088e-1;function $A(a){return WA*Math.cos(a*Math.PI/180)}function GA(a){return(180+a)/360}function KA(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ZA(a,l){return a/$A(l)}function G1(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}var Dm=function(a,l,f){f===void 0&&(f=0),this.x=+a,this.y=+l,this.z=+f};Dm.fromLngLat=function(a,l){l===void 0&&(l=0);var f=Eo.convert(a);return new Dm(GA(f.lng),KA(f.lat),ZA(l,f.lat))},Dm.prototype.toLngLat=function(){return new Eo(360*this.x-180,G1(this.y))},Dm.prototype.toAltitude=function(){return this.z*$A(G1(this.y))},Dm.prototype.meterInMercatorCoordinateUnits=function(){return 1/WA*(a=G1(this.y),1/Math.cos(a*Math.PI/180));var a};var Om=function(a,l,f){this.z=a,this.x=l,this.y=f,this.key=Dy(0,a,a,l,f)};Om.prototype.equals=function(a){return this.z===a.z&&this.x===a.x&&this.y===a.y},Om.prototype.url=function(a,l){var f,_,k,D,M,H=(_=this.y,k=this.z,D=HA(256*(f=this.x),256*(_=Math.pow(2,k)-_-1),k),M=HA(256*(f+1),256*(_+1),k),D[0]+","+D[1]+","+M[0]+","+M[1]),X=function(ie,ue,ge){for(var Ae,Oe="",$e=ie;$e>0;$e--)Oe+=(ue&(Ae=1<<$e-1)?1:0)+(ge&Ae?2:0);return Oe}(this.z,this.x,this.y);return a[(this.x+this.y)%a.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",X).replace("{bbox-epsg-3857}",H)},Om.prototype.getTilePoint=function(a){var l=Math.pow(2,this.z);return new ee(8192*(a.x*l-this.x),8192*(a.y*l-this.y))},Om.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var YA=function(a,l){this.wrap=a,this.canonical=l,this.key=Dy(a,l.z,l.z,l.x,l.y)},qa=function(a,l,f,_,k){this.overscaledZ=a,this.wrap=l,this.canonical=new Om(f,+_,+k),this.key=Dy(l,a,f,_,k)};function Dy(a,l,f,_,k){(a*=2)<0&&(a=-1*a-1);var D=1<<f;return(D*D*a+D*k+_).toString(36)+f.toString(36)+l.toString(36)}qa.prototype.equals=function(a){return this.overscaledZ===a.overscaledZ&&this.wrap===a.wrap&&this.canonical.equals(a.canonical)},qa.prototype.scaledTo=function(a){var l=this.canonical.z-a;return a>this.canonical.z?new qa(a,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qa(a,this.wrap,a,this.canonical.x>>l,this.canonical.y>>l)},qa.prototype.calculateScaledKey=function(a,l){var f=this.canonical.z-a;return a>this.canonical.z?Dy(this.wrap*+l,a,this.canonical.z,this.canonical.x,this.canonical.y):Dy(this.wrap*+l,a,a,this.canonical.x>>f,this.canonical.y>>f)},qa.prototype.isChildOf=function(a){if(a.wrap!==this.wrap)return!1;var l=this.canonical.z-a.canonical.z;return a.overscaledZ===0||a.overscaledZ<this.overscaledZ&&a.canonical.x===this.canonical.x>>l&&a.canonical.y===this.canonical.y>>l},qa.prototype.children=function(a){if(this.overscaledZ>=a)return[new qa(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var l=this.canonical.z+1,f=2*this.canonical.x,_=2*this.canonical.y;return[new qa(l,this.wrap,l,f,_),new qa(l,this.wrap,l,f+1,_),new qa(l,this.wrap,l,f,_+1),new qa(l,this.wrap,l,f+1,_+1)]},qa.prototype.isLessThan=function(a){return this.wrap<a.wrap||!(this.wrap>a.wrap)&&(this.overscaledZ<a.overscaledZ||!(this.overscaledZ>a.overscaledZ)&&(this.canonical.x<a.canonical.x||!(this.canonical.x>a.canonical.x)&&this.canonical.y<a.canonical.y))},qa.prototype.wrapped=function(){return new qa(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qa.prototype.unwrapTo=function(a){return new qa(this.overscaledZ,a,this.canonical.z,this.canonical.x,this.canonical.y)},qa.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qa.prototype.toUnwrapped=function(){return new YA(this.wrap,this.canonical)},qa.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qa.prototype.getTilePoint=function(a){return this.canonical.getTilePoint(new Dm(a.x-this.wrap,a.y))},Ir("CanonicalTileID",Om),Ir("OverscaledTileID",qa,{omit:["posMatrix"]});var yd=function(a,l,f){if(this.uid=a,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return Ut('"'+f+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=l.height;var _=this.dim=l.height-2;this.data=new Uint32Array(l.data.buffer),this.encoding=f||"mapbox";for(var k=0;k<_;k++)this.data[this._idx(-1,k)]=this.data[this._idx(0,k)],this.data[this._idx(_,k)]=this.data[this._idx(_-1,k)],this.data[this._idx(k,-1)]=this.data[this._idx(k,0)],this.data[this._idx(k,_)]=this.data[this._idx(k,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)]};yd.prototype.get=function(a,l){var f=new Uint8Array(this.data.buffer),_=4*this._idx(a,l);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[_],f[_+1],f[_+2])},yd.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},yd.prototype._idx=function(a,l){if(a<-1||a>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(a+1)},yd.prototype._unpackMapbox=function(a,l,f){return(256*a*256+256*l+f)/10-1e4},yd.prototype._unpackTerrarium=function(a,l,f){return 256*a+l+f/256-32768},yd.prototype.getPixels=function(){return new Xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},yd.prototype.backfillBorder=function(a,l,f){if(this.dim!==a.dim)throw new Error("dem dimension mismatch");var _=l*this.dim,k=l*this.dim+this.dim,D=f*this.dim,M=f*this.dim+this.dim;switch(l){case-1:_=k-1;break;case 1:k=_+1}switch(f){case-1:D=M-1;break;case 1:M=D+1}for(var H=-l*this.dim,X=-f*this.dim,ie=D;ie<M;ie++)for(var ue=_;ue<k;ue++)this.data[this._idx(ue,ie)]=a.data[this._idx(ue+H,ie+X)]},Ir("DEMData",yd);var R0=function(a){this._stringToNumber={},this._numberToString=[];for(var l=0;l<a.length;l++){var f=a[l];this._stringToNumber[f]=l,this._numberToString[l]=f}};R0.prototype.encode=function(a){return this._stringToNumber[a]},R0.prototype.decode=function(a){return this._numberToString[a]};var F0=function(a,l,f,_,k){this.type="Feature",this._vectorTileFeature=a,a._z=l,a._x=f,a._y=_,this.properties=a.properties,this.id=k},K1={geometry:{configurable:!0}};K1.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},K1.geometry.set=function(a){this._geometry=a},F0.prototype.toJSON=function(){var a={geometry:this.geometry};for(var l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(a[l]=this[l]);return a},Object.defineProperties(F0.prototype,K1);var Pm=function(){this.state={},this.stateChanges={},this.deletedStates={}};Pm.prototype.updateState=function(a,l,f){var _=String(l);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][_]=this.stateChanges[a][_]||{},Se(this.stateChanges[a][_],f),this.deletedStates[a]===null)for(var k in this.deletedStates[a]={},this.state[a])k!==_&&(this.deletedStates[a][k]=null);else if(this.deletedStates[a]&&this.deletedStates[a][_]===null)for(var D in this.deletedStates[a][_]={},this.state[a][_])f[D]||(this.deletedStates[a][_][D]=null);else for(var M in f)this.deletedStates[a]&&this.deletedStates[a][_]&&this.deletedStates[a][_][M]===null&&delete this.deletedStates[a][_][M]},Pm.prototype.removeFeatureState=function(a,l,f){if(this.deletedStates[a]!==null){var _=String(l);if(this.deletedStates[a]=this.deletedStates[a]||{},f&&l!==void 0)this.deletedStates[a][_]!==null&&(this.deletedStates[a][_]=this.deletedStates[a][_]||{},this.deletedStates[a][_][f]=null);else if(l!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][_])for(f in this.deletedStates[a][_]={},this.stateChanges[a][_])this.deletedStates[a][_][f]=null;else this.deletedStates[a][_]=null;else this.deletedStates[a]=null}},Pm.prototype.getState=function(a,l){var f=String(l),_=Se({},(this.state[a]||{})[f],(this.stateChanges[a]||{})[f]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){var k=this.deletedStates[a][l];if(k===null)return{};for(var D in k)delete _[D]}return _},Pm.prototype.initializeTileState=function(a,l){a.setFeatureState(this.state,l)},Pm.prototype.coalesceChanges=function(a,l){var f={};for(var _ in this.stateChanges){this.state[_]=this.state[_]||{};var k={};for(var D in this.stateChanges[_])this.state[_][D]||(this.state[_][D]={}),Se(this.state[_][D],this.stateChanges[_][D]),k[D]=this.state[_][D];f[_]=k}for(var M in this.deletedStates){this.state[M]=this.state[M]||{};var H={};if(this.deletedStates[M]===null)for(var X in this.state[M])H[X]={},this.state[M][X]={};else for(var ie in this.deletedStates[M]){if(this.deletedStates[M][ie]===null)this.state[M][ie]={};else for(var ue=0,ge=Object.keys(this.deletedStates[M][ie]);ue<ge.length;ue+=1)delete this.state[M][ie][ge[ue]];H[ie]=this.state[M][ie]}f[M]=f[M]||{},Se(f[M],H)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(var Ae in a)a[Ae].setFeatureState(f,l)};var Sh=function(a,l){this.tileID=a,this.x=a.canonical.x,this.y=a.canonical.y,this.z=a.canonical.z,this.grid=new Ss(8192,16,0),this.grid3D=new Ss(8192,16,0),this.featureIndexArray=new be,this.promoteId=l};function XA(a,l,f,_,k){return dt(a,function(D,M){var H=l instanceof aa?l.get(M):null;return H&&H.evaluate?H.evaluate(f,_,k):H})}function JA(a){for(var l=1/0,f=1/0,_=-1/0,k=-1/0,D=0,M=a;D<M.length;D+=1){var H=M[D];l=Math.min(l,H.x),f=Math.min(f,H.y),_=Math.max(_,H.x),k=Math.max(k,H.y)}return{minX:l,minY:f,maxX:_,maxY:k}}function aL(a,l){return l-a}Sh.prototype.insert=function(a,l,f,_,k,D){var M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,_,k);for(var H=D?this.grid3D:this.grid,X=0;X<l.length;X++){for(var ie=l[X],ue=[1/0,1/0,-1/0,-1/0],ge=0;ge<ie.length;ge++){var Ae=ie[ge];ue[0]=Math.min(ue[0],Ae.x),ue[1]=Math.min(ue[1],Ae.y),ue[2]=Math.max(ue[2],Ae.x),ue[3]=Math.max(ue[3],Ae.y)}ue[0]<8192&&ue[1]<8192&&ue[2]>=0&&ue[3]>=0&&H.insert(M,ue[0],ue[1],ue[2],ue[3])}},Sh.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new md.VectorTile(new E(this.rawTileData)).layers,this.sourceLayerCoder=new R0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Sh.prototype.query=function(a,l,f,_){var k=this;this.loadVTLayers();for(var D=a.params||{},M=8192/a.tileSize/a.scale,H=qo(D.filter),X=a.queryGeometry,ie=a.queryPadding*M,ue=JA(X),ge=this.grid.query(ue.minX-ie,ue.minY-ie,ue.maxX+ie,ue.maxY+ie),Ae=JA(a.cameraQueryGeometry),Oe=this.grid3D.query(Ae.minX-ie,Ae.minY-ie,Ae.maxX+ie,Ae.maxY+ie,function(Lt,Nt,Gt,lr){return function(br,$r,Ar,Xr,Dr){for(var Bn=0,mn=br;Bn<mn.length;Bn+=1){var jr=mn[Bn];if($r<=jr.x&&Ar<=jr.y&&Xr>=jr.x&&Dr>=jr.y)return!0}var Gn=[new ee($r,Ar),new ee($r,Dr),new ee(Xr,Dr),new ee(Xr,Ar)];if(br.length>2){for(var Pn=0,ni=Gn;Pn<ni.length;Pn+=1)if(wa(br,ni[Pn]))return!0}for(var en=0;en<br.length-1;en++)if(Cu(br[en],br[en+1],Gn))return!0;return!1}(a.cameraQueryGeometry,Lt-ie,Nt-ie,Gt+ie,lr+ie)}),$e=0,Ke=Oe;$e<Ke.length;$e+=1)ge.push(Ke[$e]);ge.sort(aL);for(var ot,Qe={},yt=function(Lt){var Nt=ge[Lt];if(Nt!==ot){ot=Nt;var Gt=k.featureIndexArray.get(Nt),lr=null;k.loadMatchingFeature(Qe,Gt.bucketIndex,Gt.sourceLayerIndex,Gt.featureIndex,H,D.layers,D.availableImages,l,f,_,function(br,$r,Ar){return lr||(lr=Ki(br)),$r.queryIntersectsFeature(X,br,Ar,lr,k.z,a.transform,M,a.pixelPosMatrix)})}},At=0;At<ge.length;At++)yt(At);return Qe},Sh.prototype.loadMatchingFeature=function(a,l,f,_,k,D,M,H,X,ie,ue){var ge=this.bucketLayerIDs[l];if(!D||function(br,$r){for(var Ar=0;Ar<br.length;Ar++)if($r.indexOf(br[Ar])>=0)return!0;return!1}(D,ge)){var Ae=this.sourceLayerCoder.decode(f),Oe=this.vtLayers[Ae].feature(_);if(k.needGeometry){var $e=So(Oe,!0);if(!k.filter(new In(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!k.filter(new In(this.tileID.overscaledZ),Oe))return;for(var Ke=this.getId(Oe,Ae),ot=0;ot<ge.length;ot++){var Qe=ge[ot];if(!(D&&D.indexOf(Qe)<0)){var yt=H[Qe];if(yt){var At={};Ke!==void 0&&ie&&(At=ie.getState(yt.sourceLayer||"_geojsonTileLayer",Ke));var Lt=Se({},X[Qe]);Lt.paint=XA(Lt.paint,yt.paint,Oe,At,M),Lt.layout=XA(Lt.layout,yt.layout,Oe,At,M);var Nt=!ue||ue(Oe,yt,At);if(Nt){var Gt=new F0(Oe,this.z,this.x,this.y,Ke);Gt.layer=Lt;var lr=a[Qe];lr===void 0&&(lr=a[Qe]=[]),lr.push({featureIndex:_,feature:Gt,intersectionZ:Nt})}}}}}},Sh.prototype.lookupSymbolFeatures=function(a,l,f,_,k,D,M,H){var X={};this.loadVTLayers();for(var ie=qo(k),ue=0,ge=a;ue<ge.length;ue+=1)this.loadMatchingFeature(X,f,_,ge[ue],ie,D,M,H,l);return X},Sh.prototype.hasLayer=function(a){for(var l=0,f=this.bucketLayerIDs;l<f.length;l+=1)for(var _=0,k=f[l];_<k.length;_+=1)if(a===k[_])return!0;return!1},Sh.prototype.getId=function(a,l){var f=a.id;return this.promoteId&&typeof(f=a.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]])=="boolean"&&(f=Number(f)),f},Ir("FeatureIndex",Sh,{omit:["rawTileData","sourceLayerCoder"]});var us=function(a,l){this.tileID=a,this.uid=we(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};us.prototype.registerFadeDuration=function(a){var l=a+this.timeAdded;l<Tt.now()||this.fadeEndTime&&l<this.fadeEndTime||(this.fadeEndTime=l)},us.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},us.prototype.loadVectorData=function(a,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){for(var _ in a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=function(ie,ue){var ge={};if(!ue)return ge;for(var Ae=function(){var Ke=$e[Oe],ot=Ke.layerIds.map(function(At){return ue.getLayer(At)}).filter(Boolean);if(ot.length!==0){Ke.layers=ot,Ke.stateDependentLayerIds&&(Ke.stateDependentLayers=Ke.stateDependentLayerIds.map(function(At){return ot.filter(function(Lt){return Lt.id===At})[0]}));for(var Qe=0,yt=ot;Qe<yt.length;Qe+=1)ge[yt[Qe].id]=Ke}},Oe=0,$e=ie;Oe<$e.length;Oe+=1)Ae();return ge}(a.buckets,l.style),this.hasSymbolBuckets=!1,this.buckets){var k=this.buckets[_];if(k instanceof Hi){if(this.hasSymbolBuckets=!0,!f)break;k.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var D in this.buckets){var M=this.buckets[D];if(M instanceof Hi&&M.hasRTLText){this.hasRTLText=!0,ml.isLoading()||ml.isLoaded()||$u()!=="deferred"||Ll();break}}for(var H in this.queryPadding=0,this.buckets){var X=this.buckets[H];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(H).queryRadius(X))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage)}else this.collisionBoxArray=new v},us.prototype.unloadVectorData=function(){for(var a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},us.prototype.getBucket=function(a){return this.buckets[a.id]},us.prototype.upload=function(a){for(var l in this.buckets){var f=this.buckets[l];f.uploadPending()&&f.upload(a)}var _=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Cm(a,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Cm(a,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)},us.prototype.prepare=function(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)},us.prototype.queryRenderedFeatures=function(a,l,f,_,k,D,M,H,X,ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:k,scale:D,tileSize:this.tileSize,pixelPosMatrix:ie,transform:H,params:M,queryPadding:this.queryPadding*X},a,l,f):{}},us.prototype.querySourceFeatures=function(a,l){var f=this.latestFeatureIndex;if(f&&f.rawTileData){var _=f.loadVTLayers(),k=l?l.sourceLayer:"",D=_._geojsonTileLayer||_[k];if(D)for(var M=qo(l&&l.filter),H=this.tileID.canonical,X=H.z,ie=H.x,ue=H.y,ge={z:X,x:ie,y:ue},Ae=0;Ae<D.length;Ae++){var Oe=D.feature(Ae);if(M.needGeometry){var $e=So(Oe,!0);if(!M.filter(new In(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!M.filter(new In(this.tileID.overscaledZ),Oe))continue;var Ke=f.getId(Oe,k),ot=new F0(Oe,X,ie,ue,Ke);ot.tile=ge,a.push(ot)}}},us.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},us.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},us.prototype.setExpiryData=function(a){var l=this.expirationTime;if(a.cacheControl){var f=zr(a.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){var _=Date.now(),k=!1;if(this.expirationTime>_)k=!1;else if(l)if(this.expirationTime<l)k=!0;else{var D=this.expirationTime-l;D?this.expirationTime=_+Math.max(D,3e4):k=!0}else k=!0;k?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},us.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},us.prototype.setFeatureState=function(a,l){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(a).length!==0){var f=this.latestFeatureIndex.loadVTLayers();for(var _ in this.buckets)if(l.style.hasLayer(_)){var k=this.buckets[_],D=k.layers[0].sourceLayer||"_geojsonTileLayer",M=f[D],H=a[D];if(M&&H&&Object.keys(H).length!==0){k.update(H,M,this.imageAtlas&&this.imageAtlas.patternPositions||{});var X=l&&l.style&&l.style.getLayer(_);X&&(this.queryPadding=Math.max(this.queryPadding,X.queryRadius(k)))}}}},us.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},us.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Tt.now()},us.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},us.prototype.setHoldDuration=function(a){this.symbolFadeHoldUntil=Tt.now()+a},us.prototype.setDependencies=function(a,l){for(var f={},_=0,k=l;_<k.length;_+=1)f[k[_]]=!0;this.dependencies[a]=f},us.prototype.hasDependency=function(a,l){for(var f=0,_=a;f<_.length;f+=1){var k=this.dependencies[_[f]];if(k){for(var D=0,M=l;D<M.length;D+=1)if(k[M[D]])return!0}}return!1};var Lf=me.performance,QA=function(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},Lf.mark(this._marks.start)};QA.prototype.finish=function(){Lf.mark(this._marks.end);var a=Lf.getEntriesByName(this._marks.measure);return a.length===0&&(Lf.measure(this._marks.measure,this._marks.start,this._marks.end),a=Lf.getEntriesByName(this._marks.measure),Lf.clearMarks(this._marks.start),Lf.clearMarks(this._marks.end),Lf.clearMeasures(this._marks.measure)),a},p.Actor=Im,p.AlphaImage=No,p.CanonicalTileID=Om,p.CollisionBoxArray=v,p.Color=Vn,p.DEMData=yd,p.DataConstantProperty=mr,p.DictionaryCoder=R0,p.EXTENT=8192,p.ErrorEvent=Pe,p.EvaluationParameters=In,p.Event=Fe,p.Evented=_e,p.FeatureIndex=Sh,p.FillBucket=ou,p.FillExtrusionBucket=vl,p.ImageAtlas=so,p.ImagePosition=Vi,p.LineBucket=Ra,p.LngLat=Eo,p.LngLatBounds=Xo,p.MercatorCoordinate=Dm,p.ONE_EM=24,p.OverscaledTileID=qa,p.Point=ee,p.Point$1=ee,p.Properties=ao,p.Protobuf=E,p.RGBAImage=Xa,p.RequestManager=Rt,p.RequestPerformance=QA,p.ResourceType=bn,p.SegmentVector=Me,p.SourceFeatureState=Pm,p.StructArrayLayout1ui2=ch,p.StructArrayLayout2f1f2i16=Js,p.StructArrayLayout2i4=xf,p.StructArrayLayout3ui6=Ku,p.StructArrayLayout4i8=ld,p.SymbolBucket=Hi,p.Texture=Cm,p.Tile=us,p.Transitionable=ia,p.Uniform1f=hr,p.Uniform1i=Yt,p.Uniform2f=or,p.Uniform3f=Er,p.Uniform4f=Wr,p.UniformColor=Vr,p.UniformMatrix4f=vn,p.UnwrappedTileID=YA,p.ValidationError=Ie,p.WritingMode=_i,p.ZoomHistory=sd,p.add=function(a,l,f){return a[0]=l[0]+f[0],a[1]=l[1]+f[1],a[2]=l[2]+f[2],a},p.addDynamicAttributes=V1,p.asyncAll=function(a,l,f){if(!a.length)return f(null,[]);var _=a.length,k=new Array(a.length),D=null;a.forEach(function(M,H){l(M,function(X,ie){X&&(D=X),k[H]=ie,--_==0&&f(D,k)})})},p.bezier=U,p.bindAll=ne,p.browser=Tt,p.cacheEntryPossiblyAdded=function(a){++an>mt&&(a.getActor().send("enforceCacheSizeLimit",ze),an=0)},p.clamp=he,p.clearTileCache=function(a){var l=me.caches.delete("mapbox-tiles");a&&l.catch(a).then(function(){return a()})},p.clipLine=LA,p.clone=function(a){var l=new ri(16);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l[3]=a[3],l[4]=a[4],l[5]=a[5],l[6]=a[6],l[7]=a[7],l[8]=a[8],l[9]=a[9],l[10]=a[10],l[11]=a[11],l[12]=a[12],l[13]=a[13],l[14]=a[14],l[15]=a[15],l},p.clone$1=kt,p.clone$2=function(a){var l=new ri(3);return l[0]=a[0],l[1]=a[1],l[2]=a[2],l},p.collisionCircleLayout=z1,p.config=ar,p.create=function(){var a=new ri(16);return ri!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},p.create$1=function(){var a=new ri(9);return ri!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a},p.create$2=function(){var a=new ri(4);return ri!=Float32Array&&(a[1]=0,a[2]=0),a[0]=1,a[3]=1,a},p.createCommonjsModule=K,p.createExpression=rh,p.createLayout=ya,p.createStyleLayer=function(a){return a.type==="custom"?new BA(a):new oL[a.type](a)},p.cross=function(a,l,f){var _=l[0],k=l[1],D=l[2],M=f[0],H=f[1],X=f[2];return a[0]=k*X-D*H,a[1]=D*M-_*X,a[2]=_*H-k*M,a},p.deepEqual=function a(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(var _=0;_<l.length;_++)if(!a(l[_],f[_]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(var k in l)if(!a(l[k],f[k]))return!1;return!0}return l===f},p.dot=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]},p.dot$1=function(a,l){return a[0]*l[0]+a[1]*l[1]+a[2]*l[2]+a[3]*l[3]},p.ease=$,p.emitValidationErrors=Ql,p.endsWith=st,p.enforceCacheSizeLimit=function(a){Ft(),on&&on.then(function(l){l.keys().then(function(f){for(var _=0;_<f.length-a;_++)l.delete(f[_])})})},p.evaluateSizeForFeature=Pf,p.evaluateSizeForZoom=Mf,p.evaluateVariableOffset=FA,p.evented=_f,p.extend=Se,p.featureFilter=qo,p.filterObject=lt,p.fromRotation=function(a,l){var f=Math.sin(l),_=Math.cos(l);return a[0]=_,a[1]=f,a[2]=0,a[3]=-f,a[4]=_,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},p.getAnchorAlignment=ls,p.getAnchorJustification=U1,p.getArrayBuffer=ha,p.getImage=Ee,p.getJSON=function(a,l){return Xn(Se(a,{type:"json"}),l)},p.getRTLTextPluginStatus=$u,p.getReferrer=Yr,p.getVideo=function(a,l){var f,_,k=me.document.createElement("video");k.muted=!0,k.onloadstart=function(){l(null,k)};for(var D=0;D<a.length;D++){var M=me.document.createElement("source");f=a[D],_=void 0,(_=me.document.createElement("a")).href=f,(_.protocol!==me.document.location.protocol||_.host!==me.document.location.host)&&(k.crossOrigin="Anonymous"),M.src=a[D],k.appendChild(M)}return{cancel:function(){}}},p.identity=to,p.invert=function(a,l){var f=l[0],_=l[1],k=l[2],D=l[3],M=l[4],H=l[5],X=l[6],ie=l[7],ue=l[8],ge=l[9],Ae=l[10],Oe=l[11],$e=l[12],Ke=l[13],ot=l[14],Qe=l[15],yt=f*H-_*M,At=f*X-k*M,Lt=f*ie-D*M,Nt=_*X-k*H,Gt=_*ie-D*H,lr=k*ie-D*X,br=ue*Ke-ge*$e,$r=ue*ot-Ae*$e,Ar=ue*Qe-Oe*$e,Xr=ge*ot-Ae*Ke,Dr=ge*Qe-Oe*Ke,Bn=Ae*Qe-Oe*ot,mn=yt*Bn-At*Dr+Lt*Xr+Nt*Ar-Gt*$r+lr*br;return mn?(a[0]=(H*Bn-X*Dr+ie*Xr)*(mn=1/mn),a[1]=(k*Dr-_*Bn-D*Xr)*mn,a[2]=(Ke*lr-ot*Gt+Qe*Nt)*mn,a[3]=(Ae*Gt-ge*lr-Oe*Nt)*mn,a[4]=(X*Ar-M*Bn-ie*$r)*mn,a[5]=(f*Bn-k*Ar+D*$r)*mn,a[6]=(ot*Lt-$e*lr-Qe*At)*mn,a[7]=(ue*lr-Ae*Lt+Oe*At)*mn,a[8]=(M*Dr-H*Ar+ie*br)*mn,a[9]=(_*Ar-f*Dr-D*br)*mn,a[10]=($e*Gt-Ke*Lt+Qe*yt)*mn,a[11]=(ge*Lt-ue*Gt-Oe*yt)*mn,a[12]=(H*$r-M*Xr-X*br)*mn,a[13]=(f*Xr-_*$r+k*br)*mn,a[14]=(Ke*At-$e*Nt-ot*yt)*mn,a[15]=(ue*Nt-ge*At+Ae*yt)*mn,a):null},p.isChar=nr,p.isMapboxURL=xr,p.keysDifference=function(a,l){var f=[];for(var _ in a)_ in l||f.push(_);return f},p.makeRequest=Xn,p.mapObject=dt,p.mercatorXfromLng=GA,p.mercatorYfromLat=KA,p.mercatorZfromAltitude=ZA,p.mul=vm,p.multiply=Ya,p.mvt=md,p.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},p.normalize=function(a,l){var f=l[0],_=l[1],k=l[2],D=f*f+_*_+k*k;return D>0&&(D=1/Math.sqrt(D)),a[0]=l[0]*D,a[1]=l[1]*D,a[2]=l[2]*D,a},p.number=ho,p.offscreenCanvasSupported=Or,p.ortho=function(a,l,f,_,k,D,M){var H=1/(l-f),X=1/(_-k),ie=1/(D-M);return a[0]=-2*H,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*X,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*ie,a[11]=0,a[12]=(l+f)*H,a[13]=(k+_)*X,a[14]=(M+D)*ie,a[15]=1,a},p.parseGlyphPBF=function(a){return new E(a).readFields(Hr,[])},p.pbf=E,p.performSymbolLayout=function(a,l,f,_,k,D,M){a.createArrays(),a.tilePixelRatio=8192/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;var H=a.layers[0].layout,X=a.layers[0]._unevaluatedLayout._values,ie={};if(a.textSizeData.kind==="composite"){var ue=a.textSizeData,ge=ue.maxZoom;ie.compositeTextSizes=[X["text-size"].possiblyEvaluate(new In(ue.minZoom),M),X["text-size"].possiblyEvaluate(new In(ge),M)]}if(a.iconSizeData.kind==="composite"){var Ae=a.iconSizeData,Oe=Ae.maxZoom;ie.compositeIconSizes=[X["icon-size"].possiblyEvaluate(new In(Ae.minZoom),M),X["icon-size"].possiblyEvaluate(new In(Oe),M)]}ie.layoutTextSize=X["text-size"].possiblyEvaluate(new In(a.zoom+1),M),ie.layoutIconSize=X["icon-size"].possiblyEvaluate(new In(a.zoom+1),M),ie.textMaxSize=X["text-size"].possiblyEvaluate(new In(18));for(var $e=24*H.get("text-line-height"),Ke=H.get("text-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",ot=H.get("text-keep-upright"),Qe=H.get("text-size"),yt=function(){var Nt=Lt[At],Gt=H.get("text-font").evaluate(Nt,{},M).join(","),lr=Qe.evaluate(Nt,{},M),br=ie.layoutTextSize.evaluate(Nt,{},M),$r=ie.layoutIconSize.evaluate(Nt,{},M),Ar={horizontal:{},vertical:void 0},Xr=Nt.text,Dr=[0,0];if(Xr){var Bn=Xr.toString(),mn=24*H.get("text-letter-spacing").evaluate(Nt,{},M),jr=function(Ln){for(var Zi=0,Mi=Ln;Zi<Mi.length;Zi+=1)if(oi=Mi[Zi].charCodeAt(0),nr.Arabic(oi)||nr["Arabic Supplement"](oi)||nr["Arabic Extended-A"](oi)||nr["Arabic Presentation Forms-A"](oi)||nr["Arabic Presentation Forms-B"](oi))return!1;var oi;return!0}(Bn)?mn:0,Gn=H.get("text-anchor").evaluate(Nt,{},M),Pn=H.get("text-variable-anchor");if(!Pn){var ni=H.get("text-radial-offset").evaluate(Nt,{},M);Dr=ni?FA(Gn,[24*ni,Cy]):H.get("text-offset").evaluate(Nt,{},M).map(function(Ln){return 24*Ln})}var en=Ke?"center":H.get("text-justify").evaluate(Nt,{},M),gi=H.get("symbol-placement"),To=gi==="point"?24*H.get("text-max-width").evaluate(Nt,{},M):0,Jo=function(){a.allowVerticalPlacement&&Ko(Bn)&&(Ar.vertical=ss(Xr,l,f,k,Gt,To,$e,Gn,"left",jr,Dr,_i.vertical,!0,gi,br,lr))};if(!Ke&&Pn){for(var zo=en==="auto"?Pn.map(function(Ln){return U1(Ln)}):[en],vi=!1,Qo=0;Qo<zo.length;Qo++){var Qa=zo[Qo];if(!Ar.horizontal[Qa])if(vi)Ar.horizontal[Qa]=Ar.horizontal[0];else{var Po=ss(Xr,l,f,k,Gt,To,$e,"center",Qa,jr,Dr,_i.horizontal,!1,gi,br,lr);Po&&(Ar.horizontal[Qa]=Po,vi=Po.positionedLines.length===1)}}Jo()}else{en==="auto"&&(en=U1(Gn));var yn=ss(Xr,l,f,k,Gt,To,$e,Gn,en,jr,Dr,_i.horizontal,!1,gi,br,lr);yn&&(Ar.horizontal[en]=yn),Jo(),Ko(Bn)&&Ke&&ot&&(Ar.vertical=ss(Xr,l,f,k,Gt,To,$e,Gn,en,jr,Dr,_i.vertical,!1,gi,br,lr))}}var cs=void 0,lo=!1;if(Nt.icon&&Nt.icon.name){var Jn=_[Nt.icon.name];Jn&&(cs=function(Ln,Zi,Mi){var oi=ls(Mi),bl=Zi[0]-Ln.displaySize[0]*oi.horizontalAlign,zs=Zi[1]-Ln.displaySize[1]*oi.verticalAlign;return{image:Ln,top:zs,bottom:zs+Ln.displaySize[1],left:bl,right:bl+Ln.displaySize[0]}}(k[Nt.icon.name],H.get("icon-offset").evaluate(Nt,{},M),H.get("icon-anchor").evaluate(Nt,{},M)),lo=Jn.sdf,a.sdfIcons===void 0?a.sdfIcons=Jn.sdf:a.sdfIcons!==Jn.sdf&&Ut("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Jn.pixelRatio!==a.pixelRatio||H.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}var fs=NA(Ar.horizontal)||Ar.vertical;a.iconsInText=!!fs&&fs.iconsInText,(fs||cs)&&function(Ln,Zi,Mi,oi,bl,zs,ro,Ta,jo,fi,Qu){var Ai=zs.textMaxSize.evaluate(Zi,{});Ai===void 0&&(Ai=ro);var uo,ea=Ln.layers[0].layout,Eh=ea.get("icon-offset").evaluate(Zi,{},Qu),Lc=NA(Mi.horizontal),Hg=ro/24,Mm=Ln.tilePixelRatio*Hg,Wg=Ln.tilePixelRatio*Ai/24,bd=Ln.tilePixelRatio*Ta,Lm=Ln.tilePixelRatio*ea.get("symbol-spacing"),Tp=ea.get("text-padding")*Ln.tilePixelRatio,Ap=ea.get("icon-padding")*Ln.tilePixelRatio,Oy=ea.get("text-max-angle")/180*Math.PI,Py=ea.get("text-rotation-alignment")==="map"&&ea.get("symbol-placement")!=="point",Rm=ea.get("icon-rotation-alignment")==="map"&&ea.get("symbol-placement")!=="point",hs=ea.get("symbol-placement"),Th=Lm/2,$g=ea.get("icon-text-fit");oi&&$g!=="none"&&(Ln.allowVerticalPlacement&&Mi.vertical&&(uo=Ja(oi,Mi.vertical,$g,ea.get("icon-text-fit-padding"),Eh,Hg)),Lc&&(oi=Ja(oi,Lc,$g,ea.get("icon-text-fit-padding"),Eh,Hg)));var kp=function(sL,Ly){Ly.x<0||Ly.x>=8192||Ly.y<0||Ly.y>=8192||function(la,Rf,lL,Ah,J1,j0,U0,kh,V0,es,_l,H0,Q1,rk,Jg,nk,ik,ok,ew,ak,Lu,W0,tw,Ff,uL){var sk,Nm,Qg,qf,ev,tv=la.addToLineVertexArray(Rf,lL),lk=0,uk=0,ck=0,rw=0,$0=-1,nw=-1,_d={},fk=Ve(""),iw=0,ow=0;if(kh._unevaluatedLayout.getValue("text-radial-offset")===void 0?(iw=(sk=kh.layout.get("text-offset").evaluate(Lu,{},Ff).map(function(nv){return 24*nv}))[0],ow=sk[1]):(iw=24*kh.layout.get("text-radial-offset").evaluate(Lu,{},Ff),ow=Cy),la.allowVerticalPlacement&&Ah.vertical){var hk=kh.layout.get("text-rotate").evaluate(Lu,{},Ff)+90;qf=new P0(V0,Rf,es,_l,H0,Ah.vertical,Q1,rk,Jg,hk),U0&&(ev=new P0(V0,Rf,es,_l,H0,U0,ik,ok,Jg,hk))}if(J1){var aw=kh.layout.get("icon-rotate").evaluate(Lu,{}),dk=kh.layout.get("icon-text-fit")!=="none",pk=RA(J1,aw,tw,dk),sw=U0?RA(U0,aw,tw,dk):void 0;Qg=new P0(V0,Rf,es,_l,H0,J1,ik,ok,!1,aw),lk=4*pk.length;var mk=la.iconSizeData,Ry=null;mk.kind==="source"?(Ry=[128*kh.layout.get("icon-size").evaluate(Lu,{})])[0]>32640&&Ut(la.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):mk.kind==="composite"&&((Ry=[128*W0.compositeIconSizes[0].evaluate(Lu,{},Ff),128*W0.compositeIconSizes[1].evaluate(Lu,{},Ff)])[0]>32640||Ry[1]>32640)&&Ut(la.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),la.addSymbols(la.icon,pk,Ry,ak,ew,Lu,!1,Rf,tv.lineStartIndex,tv.lineLength,-1,Ff),$0=la.icon.placedSymbolArray.length-1,sw&&(uk=4*sw.length,la.addSymbols(la.icon,sw,Ry,ak,ew,Lu,_i.vertical,Rf,tv.lineStartIndex,tv.lineLength,-1,Ff),nw=la.icon.placedSymbolArray.length-1)}for(var gk in Ah.horizontal){var G0=Ah.horizontal[gk];if(!Nm){fk=Ve(G0.text);var cL=kh.layout.get("text-rotate").evaluate(Lu,{},Ff);Nm=new P0(V0,Rf,es,_l,H0,G0,Q1,rk,Jg,cL)}var vk=G0.positionedLines.length===1;if(ck+=qA(la,Rf,G0,j0,kh,Jg,Lu,nk,tv,Ah.vertical?_i.horizontal:_i.horizontalOnly,vk?Object.keys(Ah.horizontal):[gk],_d,$0,W0,Ff),vk)break}Ah.vertical&&(rw+=qA(la,Rf,Ah.vertical,j0,kh,Jg,Lu,nk,tv,_i.vertical,["vertical"],_d,nw,W0,Ff));var fL=Nm?Nm.boxStartIndex:la.collisionBoxArray.length,hL=Nm?Nm.boxEndIndex:la.collisionBoxArray.length,dL=qf?qf.boxStartIndex:la.collisionBoxArray.length,pL=qf?qf.boxEndIndex:la.collisionBoxArray.length,mL=Qg?Qg.boxStartIndex:la.collisionBoxArray.length,gL=Qg?Qg.boxEndIndex:la.collisionBoxArray.length,vL=ev?ev.boxStartIndex:la.collisionBoxArray.length,yL=ev?ev.boxEndIndex:la.collisionBoxArray.length,Ch=-1,rv=function(nv,yk){return nv&&nv.circleDiameter?Math.max(nv.circleDiameter,yk):yk};Ch=rv(Nm,Ch),Ch=rv(qf,Ch),Ch=rv(Qg,Ch);var lw=(Ch=rv(ev,Ch))>-1?1:0;lw&&(Ch*=uL/24),la.glyphOffsetArray.length>=Hi.MAX_GLYPHS&&Ut("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Lu.sortKey!==void 0&&la.addToSortKeyRanges(la.symbolInstances.length,Lu.sortKey),la.symbolInstances.emplaceBack(Rf.x,Rf.y,_d.right>=0?_d.right:-1,_d.center>=0?_d.center:-1,_d.left>=0?_d.left:-1,_d.vertical||-1,$0,nw,fk,fL,hL,dL,pL,mL,gL,vL,yL,es,ck,rw,lk,uk,lw,0,Q1,iw,ow,Ch)}(Ln,Ly,sL,Mi,oi,bl,uo,Ln.layers[0],Ln.collisionBoxArray,Zi.index,Zi.sourceLayerIndex,Ln.index,Mm,Tp,Py,jo,bd,Ap,Rm,Eh,Zi,zs,fi,Qu,ro)};if(hs==="line")for(var Gg=0,q0=LA(Zi.geometry,0,0,8192,8192);Gg<q0.length;Gg+=1)for(var N0=q0[Gg],Kg=0,ec=$M(N0,Lm,Oy,Mi.vertical||Lc,oi,24,Wg,Ln.overscaling,8192);Kg<ec.length;Kg+=1){var Qn=ec[Kg];Lc&&YM(Ln,Lc.text,Th,Qn)||kp(N0,Qn)}else if(hs==="line-center")for(var Zg=0,Bl=Zi.geometry;Zg<Bl.length;Zg+=1){var Yg=Bl[Zg];if(Yg.length>1){var B0=WM(Yg,Oy,Mi.vertical||Lc,oi,24,Wg);B0&&kp(Yg,B0)}}else if(Zi.type==="Polygon")for(var Li=0,z0=Rg(Zi.geometry,0);Li<z0.length;Li+=1){var Fm=z0[Li],Cp=KM(Fm,16);kp(Fm[0],new wh(Cp.x,Cp.y,0))}else if(Zi.type==="LineString")for(var qm=0,My=Zi.geometry;qm<My.length;qm+=1){var Xg=My[qm];kp(Xg,new wh(Xg[0].x,Xg[0].y,0))}else if(Zi.type==="Point")for(var Z1=0,ek=Zi.geometry;Z1<ek.length;Z1+=1)for(var Y1=0,tk=ek[Z1];Y1<tk.length;Y1+=1){var X1=tk[Y1];kp([X1],new wh(X1.x,X1.y,0))}}(a,Nt,Ar,cs,_,ie,br,$r,Dr,lo,M)},At=0,Lt=a.features;At<Lt.length;At+=1)yt();D&&a.generateCollisionDebugBuffers()},p.perspective=function(a,l,f,_,k){var D,M=1/Math.tan(l/2);return a[0]=M/f,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=M,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,k!=null&&k!==1/0?(a[10]=(k+_)*(D=1/(_-k)),a[14]=2*k*_*D):(a[10]=-1,a[14]=-2*_),a},p.pick=function(a,l){for(var f={},_=0;_<l.length;_++){var k=l[_];k in a&&(f[k]=a[k])}return f},p.plugin=ml,p.polygonIntersectsPolygon=Zu,p.postMapLoadEvent=qe,p.postTurnstileEvent=Si,p.potpack=Zn,p.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],p.register=Ir,p.registerForPluginStateChange=function(a){return a({pluginStatus:ma,pluginURL:ga}),_f.on("pluginStateChange",a),a},p.renderColorRamp=dh,p.rotate=function(a,l,f){var _=l[0],k=l[1],D=l[2],M=l[3],H=Math.sin(f),X=Math.cos(f);return a[0]=_*X+D*H,a[1]=k*X+M*H,a[2]=_*-H+D*X,a[3]=k*-H+M*X,a},p.rotateX=function(a,l,f){var _=Math.sin(f),k=Math.cos(f),D=l[4],M=l[5],H=l[6],X=l[7],ie=l[8],ue=l[9],ge=l[10],Ae=l[11];return l!==a&&(a[0]=l[0],a[1]=l[1],a[2]=l[2],a[3]=l[3],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[4]=D*k+ie*_,a[5]=M*k+ue*_,a[6]=H*k+ge*_,a[7]=X*k+Ae*_,a[8]=ie*k-D*_,a[9]=ue*k-M*_,a[10]=ge*k-H*_,a[11]=Ae*k-X*_,a},p.rotateZ=function(a,l,f){var _=Math.sin(f),k=Math.cos(f),D=l[0],M=l[1],H=l[2],X=l[3],ie=l[4],ue=l[5],ge=l[6],Ae=l[7];return l!==a&&(a[8]=l[8],a[9]=l[9],a[10]=l[10],a[11]=l[11],a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15]),a[0]=D*k+ie*_,a[1]=M*k+ue*_,a[2]=H*k+ge*_,a[3]=X*k+Ae*_,a[4]=ie*k-D*_,a[5]=ue*k-M*_,a[6]=ge*k-H*_,a[7]=Ae*k-X*_,a},p.scale=function(a,l,f){var _=f[0],k=f[1],D=f[2];return a[0]=l[0]*_,a[1]=l[1]*_,a[2]=l[2]*_,a[3]=l[3]*_,a[4]=l[4]*k,a[5]=l[5]*k,a[6]=l[6]*k,a[7]=l[7]*k,a[8]=l[8]*D,a[9]=l[9]*D,a[10]=l[10]*D,a[11]=l[11]*D,a[12]=l[12],a[13]=l[13],a[14]=l[14],a[15]=l[15],a},p.scale$1=function(a,l,f){return a[0]=l[0]*f,a[1]=l[1]*f,a[2]=l[2]*f,a[3]=l[3]*f,a},p.scale$2=function(a,l,f){return a[0]=l[0]*f,a[1]=l[1]*f,a[2]=l[2]*f,a},p.setCacheLimits=function(a,l){ze=a,mt=l},p.setRTLTextPlugin=function(a,l,f){if(f===void 0&&(f=!1),ma==="deferred"||ma==="loading"||ma==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");ga=Tt.resolveURL(a),ma="deferred",Zs=l,Ys(),f||Ll()},p.sphericalToCartesian=function(a){var l=a[0],f=a[1],_=a[2];return f+=90,f*=Math.PI/180,_*=Math.PI/180,{x:l*Math.cos(f)*Math.sin(_),y:l*Math.sin(f)*Math.sin(_),z:l*Math.cos(_)}},p.sqrLen=function(a){var l=a[0],f=a[1];return l*l+f*f},p.styleSpec=fe,p.sub=function(a,l,f){return a[0]=l[0]-f[0],a[1]=l[1]-f[1],a[2]=l[2]-f[2],a},p.symbolSize=Qs,p.transformMat3=function(a,l,f){var _=l[0],k=l[1],D=l[2];return a[0]=_*f[0]+k*f[3]+D*f[6],a[1]=_*f[1]+k*f[4]+D*f[7],a[2]=_*f[2]+k*f[5]+D*f[8],a},p.transformMat4=Kn,p.translate=function(a,l,f){var _,k,D,M,H,X,ie,ue,ge,Ae,Oe,$e,Ke=f[0],ot=f[1],Qe=f[2];return l===a?(a[12]=l[0]*Ke+l[4]*ot+l[8]*Qe+l[12],a[13]=l[1]*Ke+l[5]*ot+l[9]*Qe+l[13],a[14]=l[2]*Ke+l[6]*ot+l[10]*Qe+l[14],a[15]=l[3]*Ke+l[7]*ot+l[11]*Qe+l[15]):(k=l[1],D=l[2],M=l[3],H=l[4],X=l[5],ie=l[6],ue=l[7],ge=l[8],Ae=l[9],Oe=l[10],$e=l[11],a[0]=_=l[0],a[1]=k,a[2]=D,a[3]=M,a[4]=H,a[5]=X,a[6]=ie,a[7]=ue,a[8]=ge,a[9]=Ae,a[10]=Oe,a[11]=$e,a[12]=_*Ke+H*ot+ge*Qe+l[12],a[13]=k*Ke+X*ot+Ae*Qe+l[13],a[14]=D*Ke+ie*ot+Oe*Qe+l[14],a[15]=M*Ke+ue*ot+$e*Qe+l[15]),a},p.triggerPluginCompletionEvent=Su,p.uniqueId=we,p.validateCustomStyleLayer=function(a){var l=[],f=a.id;return f===void 0&&l.push({message:"layers."+f+': missing required property "id"'}),a.render===void 0&&l.push({message:"layers."+f+': missing required method "render"'}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&l.push({message:"layers."+f+': property "renderingMode" must be either "2d" or "3d"'}),l},p.validateLight=up,p.validateStyle=mf,p.values=function(a){var l=[];for(var f in a)l.push(a[f]);return l},p.vectorTile=md,p.version="1.13.3",p.warnOnce=Ut,p.webpSupported=er,p.window=me,p.wrap=Ce}),V(["./shared"],function(p){function K(pe){var Ee=typeof pe;if(Ee==="number"||Ee==="boolean"||Ee==="string"||pe==null)return JSON.stringify(pe);if(Array.isArray(pe)){for(var ke="[",oe=0,Fe=pe;oe<Fe.length;oe+=1)ke+=K(Fe[oe])+",";return ke+"]"}for(var Pe=Object.keys(pe).sort(),_e="{",fe=0;fe<Pe.length;fe++)_e+=JSON.stringify(Pe[fe])+":"+K(pe[Pe[fe]])+",";return _e+"}"}function j(pe){for(var Ee="",ke=0,oe=p.refProperties;ke<oe.length;ke+=1)Ee+="/"+K(pe[oe[ke]]);return Ee}var Q=function(pe){this.keyCache={},pe&&this.replace(pe)};Q.prototype.replace=function(pe){this._layerConfigs={},this._layers={},this.update(pe,[])},Q.prototype.update=function(pe,Ee){for(var ke=this,oe=0,Fe=pe;oe<Fe.length;oe+=1){var Pe=Fe[oe];this._layerConfigs[Pe.id]=Pe;var _e=this._layers[Pe.id]=p.createStyleLayer(Pe);_e._featureFilter=p.featureFilter(_e.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var fe=0,Ie=Ee;fe<Ie.length;fe+=1){var nt=Ie[fe];delete this.keyCache[nt],delete this._layerConfigs[nt],delete this._layers[nt]}this.familiesBySource={};for(var zt=0,Vt=function(Re,ct){for(var jt={},it=0;it<Re.length;it++){var Qt=ct&&ct[Re[it].id]||j(Re[it]);ct&&(ct[Re[it].id]=Qt);var rn=jt[Qt];rn||(rn=jt[Qt]=[]),rn.push(Re[it])}var un=[];for(var En in jt)un.push(jt[En]);return un}(p.values(this._layerConfigs),this.keyCache);zt<Vt.length;zt+=1){var pt=Vt[zt].map(function(Re){return ke._layers[Re.id]}),_t=pt[0];if(_t.visibility!=="none"){var _r=_t.source||"",dr=this.familiesBySource[_r];dr||(dr=this.familiesBySource[_r]={});var Mt=_t.sourceLayer||"_geojsonTileLayer",ce=dr[Mt];ce||(ce=dr[Mt]=[]),ce.push(pt)}}};var ee=function(pe){var Ee={},ke=[];for(var oe in pe){var Fe=pe[oe],Pe=Ee[oe]={};for(var _e in Fe){var fe=Fe[+_e];if(fe&&fe.bitmap.width!==0&&fe.bitmap.height!==0){var Ie={x:0,y:0,w:fe.bitmap.width+2,h:fe.bitmap.height+2};ke.push(Ie),Pe[_e]={rect:Ie,metrics:fe.metrics}}}}var nt=p.potpack(ke),zt=new p.AlphaImage({width:nt.w||1,height:nt.h||1});for(var Vt in pe){var pt=pe[Vt];for(var _t in pt){var _r=pt[+_t];if(_r&&_r.bitmap.width!==0&&_r.bitmap.height!==0){var dr=Ee[Vt][_t].rect;p.AlphaImage.copy(_r.bitmap,zt,{x:0,y:0},{x:dr.x+1,y:dr.y+1},_r.bitmap)}}}this.image=zt,this.positions=Ee};p.register("GlyphAtlas",ee);var se=function(pe){this.tileID=new p.OverscaledTileID(pe.tileID.overscaledZ,pe.tileID.wrap,pe.tileID.canonical.z,pe.tileID.canonical.x,pe.tileID.canonical.y),this.uid=pe.uid,this.zoom=pe.zoom,this.pixelRatio=pe.pixelRatio,this.tileSize=pe.tileSize,this.source=pe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=pe.showCollisionBoxes,this.collectResourceTiming=!!pe.collectResourceTiming,this.returnDependencies=!!pe.returnDependencies,this.promoteId=pe.promoteId};function me(pe,Ee,ke){for(var oe=new p.EvaluationParameters(Ee),Fe=0,Pe=pe;Fe<Pe.length;Fe+=1)Pe[Fe].recalculate(oe,ke)}function ve(pe,Ee){var ke=p.getArrayBuffer(pe.request,function(oe,Fe,Pe,_e){oe?Ee(oe):Fe&&Ee(null,{vectorTile:new p.vectorTile.VectorTile(new p.pbf(Fe)),rawData:Fe,cacheControl:Pe,expires:_e})});return function(){ke.cancel(),Ee()}}se.prototype.parse=function(pe,Ee,ke,oe,Fe){var Pe=this;this.status="parsing",this.data=pe,this.collisionBoxArray=new p.CollisionBoxArray;var _e=new p.DictionaryCoder(Object.keys(pe.layers).sort()),fe=new p.FeatureIndex(this.tileID,this.promoteId);fe.bucketLayerIDs=[];var Ie,nt,zt,Vt,pt={},_t={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ke},_r=Ee.familiesBySource[this.source];for(var dr in _r){var Mt=pe.layers[dr];if(Mt){Mt.version===1&&p.warnOnce('Vector tile source "'+this.source+'" layer "'+dr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var ce=_e.encode(dr),Re=[],ct=0;ct<Mt.length;ct++){var jt=Mt.feature(ct),it=fe.getId(jt,dr);Re.push({feature:jt,id:it,index:ct,sourceLayerIndex:ce})}for(var Qt=0,rn=_r[dr];Qt<rn.length;Qt+=1){var un=rn[Qt],En=un[0];En.minzoom&&this.zoom<Math.floor(En.minzoom)||En.maxzoom&&this.zoom>=En.maxzoom||En.visibility!=="none"&&(me(un,this.zoom,ke),(pt[En.id]=En.createBucket({index:fe.bucketLayerIDs.length,layers:un,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ce,sourceID:this.source})).populate(Re,_t,this.tileID.canonical),fe.bucketLayerIDs.push(un.map(function(yi){return yi.id})))}}}var Mn=p.mapObject(_t.glyphDependencies,function(yi){return Object.keys(yi).map(Number)});Object.keys(Mn).length?oe.send("getGlyphs",{uid:this.uid,stacks:Mn},function(yi,Fn){Ie||(Ie=yi,nt=Fn,ko.call(Pe))}):nt={};var Va=Object.keys(_t.iconDependencies);Va.length?oe.send("getImages",{icons:Va,source:this.source,tileID:this.tileID,type:"icons"},function(yi,Fn){Ie||(Ie=yi,zt=Fn,ko.call(Pe))}):zt={};var Nr=Object.keys(_t.patternDependencies);function ko(){if(Ie)return Fe(Ie);if(nt&&zt&&Vt){var yi=new ee(nt),Fn=new p.ImageAtlas(zt,Vt);for(var Vn in pt){var is=pt[Vn];is instanceof p.SymbolBucket?(me(is.layers,this.zoom,ke),p.performSymbolLayout(is,nt,yi.positions,zt,Fn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):is.hasPattern&&(is instanceof p.LineBucket||is instanceof p.FillBucket||is instanceof p.FillExtrusionBucket)&&(me(is.layers,this.zoom,ke),is.addFeatures(_t,this.tileID.canonical,Fn.patternPositions))}this.status="done",Fe(null,{buckets:p.values(pt).filter(function(xc){return!xc.isEmpty()}),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yi.image,imageAtlas:Fn,glyphMap:this.returnDependencies?nt:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?yi.positions:null})}}Nr.length?oe.send("getImages",{icons:Nr,source:this.source,tileID:this.tileID,type:"patterns"},function(yi,Fn){Ie||(Ie=yi,Vt=Fn,ko.call(Pe))}):Vt={},ko.call(this)};var U=function(pe,Ee,ke,oe){this.actor=pe,this.layerIndex=Ee,this.availableImages=ke,this.loadVectorData=oe||ve,this.loading={},this.loaded={}};U.prototype.loadTile=function(pe,Ee){var ke=this,oe=pe.uid;this.loading||(this.loading={});var Fe=!!(pe&&pe.request&&pe.request.collectResourceTiming)&&new p.RequestPerformance(pe.request),Pe=this.loading[oe]=new se(pe);Pe.abort=this.loadVectorData(pe,function(_e,fe){if(delete ke.loading[oe],_e||!fe)return Pe.status="done",ke.loaded[oe]=Pe,Ee(_e);var Ie=fe.rawData,nt={};fe.expires&&(nt.expires=fe.expires),fe.cacheControl&&(nt.cacheControl=fe.cacheControl);var zt={};if(Fe){var Vt=Fe.finish();Vt&&(zt.resourceTiming=JSON.parse(JSON.stringify(Vt)))}Pe.vectorTile=fe.vectorTile,Pe.parse(fe.vectorTile,ke.layerIndex,ke.availableImages,ke.actor,function(pt,_t){if(pt||!_t)return Ee(pt);Ee(null,p.extend({rawTileData:Ie.slice(0)},_t,nt,zt))}),ke.loaded=ke.loaded||{},ke.loaded[oe]=Pe})},U.prototype.reloadTile=function(pe,Ee){var ke=this,oe=this.loaded,Fe=pe.uid,Pe=this;if(oe&&oe[Fe]){var _e=oe[Fe];_e.showCollisionBoxes=pe.showCollisionBoxes;var fe=function(Ie,nt){var zt=_e.reloadCallback;zt&&(delete _e.reloadCallback,_e.parse(_e.vectorTile,Pe.layerIndex,ke.availableImages,Pe.actor,zt)),Ee(Ie,nt)};_e.status==="parsing"?_e.reloadCallback=fe:_e.status==="done"&&(_e.vectorTile?_e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,fe):fe())}},U.prototype.abortTile=function(pe,Ee){var ke=this.loading,oe=pe.uid;ke&&ke[oe]&&ke[oe].abort&&(ke[oe].abort(),delete ke[oe]),Ee()},U.prototype.removeTile=function(pe,Ee){var ke=this.loaded,oe=pe.uid;ke&&ke[oe]&&delete ke[oe],Ee()};var $=p.window.ImageBitmap,he=function(){this.loaded={}};function Ce(pe,Ee){if(pe.length!==0){Se(pe[0],Ee);for(var ke=1;ke<pe.length;ke++)Se(pe[ke],!Ee)}}function Se(pe,Ee){for(var ke=0,oe=0,Fe=0,Pe=pe.length,_e=Pe-1;Fe<Pe;_e=Fe++){var fe=(pe[Fe][0]-pe[_e][0])*(pe[_e][1]+pe[Fe][1]),Ie=ke+fe;oe+=Math.abs(ke)>=Math.abs(fe)?ke-Ie+fe:fe-Ie+ke,ke=Ie}ke+oe>=0!=!!Ee&&pe.reverse()}he.prototype.loadTile=function(pe,Ee){var ke=pe.uid,oe=pe.encoding,Fe=pe.rawImageData,Pe=$&&Fe instanceof $?this.getImageData(Fe):Fe,_e=new p.DEMData(ke,Pe,oe);this.loaded=this.loaded||{},this.loaded[ke]=_e,Ee(null,_e)},he.prototype.getImageData=function(pe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(pe.width,pe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=pe.width,this.offscreenCanvas.height=pe.height,this.offscreenCanvasContext.drawImage(pe,0,0,pe.width,pe.height);var Ee=this.offscreenCanvasContext.getImageData(-1,-1,pe.width+2,pe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new p.RGBAImage({width:Ee.width,height:Ee.height},Ee.data)},he.prototype.removeTile=function(pe){var Ee=this.loaded,ke=pe.uid;Ee&&Ee[ke]&&delete Ee[ke]};var de=p.vectorTile.VectorTileFeature.prototype.toGeoJSON,we=function(pe){this._feature=pe,this.extent=p.EXTENT,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))};we.prototype.loadGeometry=function(){if(this._feature.type===1){for(var pe=[],Ee=0,ke=this._feature.geometry;Ee<ke.length;Ee+=1){var oe=ke[Ee];pe.push([new p.Point$1(oe[0],oe[1])])}return pe}for(var Fe=[],Pe=0,_e=this._feature.geometry;Pe<_e.length;Pe+=1){for(var fe=[],Ie=0,nt=_e[Pe];Ie<nt.length;Ie+=1){var zt=nt[Ie];fe.push(new p.Point$1(zt[0],zt[1]))}Fe.push(fe)}return Fe},we.prototype.toGeoJSON=function(pe,Ee,ke){return de.call(this,pe,Ee,ke)};var Ue=function(pe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=p.EXTENT,this.length=pe.length,this._features=pe};Ue.prototype.feature=function(pe){return new we(this._features[pe])};var ye=p.vectorTile.VectorTileFeature,ne=st;function st(pe,Ee){this.options=Ee||{},this.features=pe,this.length=pe.length}function dt(pe,Ee){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=Ee||4096}st.prototype.feature=function(pe){return new dt(this.features[pe],this.options.extent)},dt.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var Ee=0;Ee<pe.length;Ee++){for(var ke=pe[Ee],oe=[],Fe=0;Fe<ke.length;Fe++)oe.push(new p.Point$1(ke[Fe][0],ke[Fe][1]));this.geometry.push(oe)}return this.geometry},dt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,Ee=1/0,ke=-1/0,oe=1/0,Fe=-1/0,Pe=0;Pe<pe.length;Pe++)for(var _e=pe[Pe],fe=0;fe<_e.length;fe++){var Ie=_e[fe];Ee=Math.min(Ee,Ie.x),ke=Math.max(ke,Ie.x),oe=Math.min(oe,Ie.y),Fe=Math.max(Fe,Ie.y)}return[Ee,oe,ke,Fe]},dt.prototype.toGeoJSON=ye.prototype.toGeoJSON;var lt=ut,kt=ne;function ut(pe){var Ee=new p.pbf;return function(ke,oe){for(var Fe in ke.layers)oe.writeMessage(3,Ut,ke.layers[Fe])}(pe,Ee),Ee.finish()}function Ut(pe,Ee){var ke;Ee.writeVarintField(15,pe.version||1),Ee.writeStringField(1,pe.name||""),Ee.writeVarintField(5,pe.extent||4096);var oe={keys:[],values:[],keycache:{},valuecache:{}};for(ke=0;ke<pe.length;ke++)oe.feature=pe.feature(ke),Ee.writeMessage(2,Wt,oe);var Fe=oe.keys;for(ke=0;ke<Fe.length;ke++)Ee.writeStringField(3,Fe[ke]);var Pe=oe.values;for(ke=0;ke<Pe.length;ke++)Ee.writeMessage(4,Qr,Pe[ke])}function Wt(pe,Ee){var ke=pe.feature;ke.id!==void 0&&Ee.writeVarintField(1,ke.id),Ee.writeMessage(2,Ht,pe),Ee.writeVarintField(3,ke.type),Ee.writeMessage(4,Jt,ke)}function Ht(pe,Ee){var ke=pe.feature,oe=pe.keys,Fe=pe.values,Pe=pe.keycache,_e=pe.valuecache;for(var fe in ke.properties){var Ie=Pe[fe];Ie===void 0&&(oe.push(fe),Pe[fe]=Ie=oe.length-1),Ee.writeVarint(Ie);var nt=ke.properties[fe],zt=typeof nt;zt!=="string"&&zt!=="boolean"&&zt!=="number"&&(nt=JSON.stringify(nt));var Vt=zt+":"+nt,pt=_e[Vt];pt===void 0&&(Fe.push(nt),_e[Vt]=pt=Fe.length-1),Ee.writeVarint(pt)}}function pr(pe,Ee){return(Ee<<3)+(7&pe)}function zr(pe){return pe<<1^pe>>31}function Jt(pe,Ee){for(var ke=pe.loadGeometry(),oe=pe.type,Fe=0,Pe=0,_e=ke.length,fe=0;fe<_e;fe++){var Ie=ke[fe],nt=1;oe===1&&(nt=Ie.length),Ee.writeVarint(pr(1,nt));for(var zt=oe===3?Ie.length-1:Ie.length,Vt=0;Vt<zt;Vt++){Vt===1&&oe!==1&&Ee.writeVarint(pr(2,zt-1));var pt=Ie[Vt].x-Fe,_t=Ie[Vt].y-Pe;Ee.writeVarint(zr(pt)),Ee.writeVarint(zr(_t)),Fe+=pt,Pe+=_t}oe===3&&Ee.writeVarint(pr(7,1))}}function Qr(pe,Ee){var ke=typeof pe;ke==="string"?Ee.writeStringField(1,pe):ke==="boolean"?Ee.writeBooleanField(7,pe):ke==="number"&&(pe%1!=0?Ee.writeDoubleField(3,pe):pe<0?Ee.writeSVarintField(6,pe):Ee.writeVarintField(5,pe))}function Br(pe,Ee,ke,oe){Rr(pe,ke,oe),Rr(Ee,2*ke,2*oe),Rr(Ee,2*ke+1,2*oe+1)}function Rr(pe,Ee,ke){var oe=pe[Ee];pe[Ee]=pe[ke],pe[ke]=oe}function Be(pe,Ee,ke,oe){var Fe=pe-ke,Pe=Ee-oe;return Fe*Fe+Pe*Pe}lt.fromVectorTileJs=ut,lt.fromGeojsonVt=function(pe,Ee){Ee=Ee||{};var ke={};for(var oe in pe)ke[oe]=new ne(pe[oe].features,Ee),ke[oe].name=oe,ke[oe].version=Ee.version,ke[oe].extent=Ee.extent;return ut({layers:ke})},lt.GeoJSONWrapper=kt;var Ge=function(pe){return pe[0]},vt=function(pe){return pe[1]},Kt=function(pe,Ee,ke,oe,Fe){Ee===void 0&&(Ee=Ge),ke===void 0&&(ke=vt),oe===void 0&&(oe=64),Fe===void 0&&(Fe=Float64Array),this.nodeSize=oe,this.points=pe;for(var Pe=pe.length<65536?Uint16Array:Uint32Array,_e=this.ids=new Pe(pe.length),fe=this.coords=new Fe(2*pe.length),Ie=0;Ie<pe.length;Ie++)_e[Ie]=Ie,fe[2*Ie]=Ee(pe[Ie]),fe[2*Ie+1]=ke(pe[Ie]);(function nt(zt,Vt,pt,_t,_r,dr){if(!(_r-_t<=pt)){var Mt=_t+_r>>1;(function ce(Re,ct,jt,it,Qt,rn){for(;Qt>it;){if(Qt-it>600){var un=Qt-it+1,En=jt-it+1,Mn=Math.log(un),Va=.5*Math.exp(2*Mn/3),Nr=.5*Math.sqrt(Mn*Va*(un-Va)/un)*(En-un/2<0?-1:1);ce(Re,ct,jt,Math.max(it,Math.floor(jt-En*Va/un+Nr)),Math.min(Qt,Math.floor(jt+(un-En)*Va/un+Nr)),rn)}var ko=ct[2*jt+rn],yi=it,Fn=Qt;for(Br(Re,ct,it,jt),ct[2*Qt+rn]>ko&&Br(Re,ct,it,Qt);yi<Fn;){for(Br(Re,ct,yi,Fn),yi++,Fn--;ct[2*yi+rn]<ko;)yi++;for(;ct[2*Fn+rn]>ko;)Fn--}ct[2*it+rn]===ko?Br(Re,ct,it,Fn):Br(Re,ct,++Fn,Qt),Fn<=jt&&(it=Fn+1),jt<=Fn&&(Qt=Fn-1)}})(zt,Vt,Mt,_t,_r,dr%2),nt(zt,Vt,pt,_t,Mt-1,dr+1),nt(zt,Vt,pt,Mt+1,_r,dr+1)}})(_e,fe,oe,0,_e.length-1,0)};Kt.prototype.range=function(pe,Ee,ke,oe){return function(Fe,Pe,_e,fe,Ie,nt,zt){for(var Vt,pt,_t=[0,Fe.length-1,0],_r=[];_t.length;){var dr=_t.pop(),Mt=_t.pop(),ce=_t.pop();if(Mt-ce<=zt)for(var Re=ce;Re<=Mt;Re++)pt=Pe[2*Re+1],(Vt=Pe[2*Re])>=_e&&Vt<=Ie&&pt>=fe&&pt<=nt&&_r.push(Fe[Re]);else{var ct=Math.floor((ce+Mt)/2);pt=Pe[2*ct+1],(Vt=Pe[2*ct])>=_e&&Vt<=Ie&&pt>=fe&&pt<=nt&&_r.push(Fe[ct]);var jt=(dr+1)%2;(dr===0?_e<=Vt:fe<=pt)&&(_t.push(ce),_t.push(ct-1),_t.push(jt)),(dr===0?Ie>=Vt:nt>=pt)&&(_t.push(ct+1),_t.push(Mt),_t.push(jt))}}return _r}(this.ids,this.coords,pe,Ee,ke,oe,this.nodeSize)},Kt.prototype.within=function(pe,Ee,ke){return function(oe,Fe,Pe,_e,fe,Ie){for(var nt=[0,oe.length-1,0],zt=[],Vt=fe*fe;nt.length;){var pt=nt.pop(),_t=nt.pop(),_r=nt.pop();if(_t-_r<=Ie)for(var dr=_r;dr<=_t;dr++)Be(Fe[2*dr],Fe[2*dr+1],Pe,_e)<=Vt&&zt.push(oe[dr]);else{var Mt=Math.floor((_r+_t)/2),ce=Fe[2*Mt],Re=Fe[2*Mt+1];Be(ce,Re,Pe,_e)<=Vt&&zt.push(oe[Mt]);var ct=(pt+1)%2;(pt===0?Pe-fe<=ce:_e-fe<=Re)&&(nt.push(_r),nt.push(Mt-1),nt.push(ct)),(pt===0?Pe+fe>=ce:_e+fe>=Re)&&(nt.push(Mt+1),nt.push(_t),nt.push(ct))}}return zt}(this.ids,this.coords,pe,Ee,ke,this.nodeSize)};var rt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(pe){return pe}},Ct=function(pe){this.options=Xe(Object.create(rt),pe),this.trees=new Array(this.options.maxZoom+1)};function Tt(pe,Ee,ke,oe,Fe){return{x:pe,y:Ee,zoom:1/0,id:ke,parentId:-1,numPoints:oe,properties:Fe}}function ar(pe,Ee){var ke=pe.geometry.coordinates,oe=ke[1];return{x:sr(ke[0]),y:He(oe),zoom:1/0,index:Ee,parentId:-1}}function er(pe){return{type:"Feature",id:pe.id,properties:ir(pe),geometry:{type:"Point",coordinates:[(oe=pe.x,360*(oe-.5)),(Ee=pe.y,ke=(180-360*Ee)*Math.PI/180,360*Math.atan(Math.exp(ke))/Math.PI-90)]}};var Ee,ke,oe}function ir(pe){var Ee=pe.numPoints,ke=Ee>=1e4?Math.round(Ee/1e3)+"k":Ee>=1e3?Math.round(Ee/100)/10+"k":Ee;return Xe(Xe({},pe.properties),{cluster:!0,cluster_id:pe.id,point_count:Ee,point_count_abbreviated:ke})}function sr(pe){return pe/360+.5}function He(pe){var Ee=Math.sin(pe*Math.PI/180),ke=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return ke<0?0:ke>1?1:ke}function Xe(pe,Ee){for(var ke in Ee)pe[ke]=Ee[ke];return pe}function Rt(pe){return pe.x}function xr(pe){return pe.y}function Yn(pe,Ee,ke,oe,Fe,Pe){var _e=Fe-ke,fe=Pe-oe;if(_e!==0||fe!==0){var Ie=((pe-ke)*_e+(Ee-oe)*fe)/(_e*_e+fe*fe);Ie>1?(ke=Fe,oe=Pe):Ie>0&&(ke+=_e*Ie,oe+=fe*Ie)}return(_e=pe-ke)*_e+(fe=Ee-oe)*fe}function kn(pe,Ee,ke,oe){var Fe={id:pe===void 0?null:pe,type:Ee,geometry:ke,tags:oe,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Pe){var _e=Pe.geometry,fe=Pe.type;if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")Cn(Pe,_e);else if(fe==="Polygon"||fe==="MultiLineString")for(var Ie=0;Ie<_e.length;Ie++)Cn(Pe,_e[Ie]);else if(fe==="MultiPolygon")for(Ie=0;Ie<_e.length;Ie++)for(var nt=0;nt<_e[Ie].length;nt++)Cn(Pe,_e[Ie][nt])}(Fe),Fe}function Cn(pe,Ee){for(var ke=0;ke<Ee.length;ke+=3)pe.minX=Math.min(pe.minX,Ee[ke]),pe.minY=Math.min(pe.minY,Ee[ke+1]),pe.maxX=Math.max(pe.maxX,Ee[ke]),pe.maxY=Math.max(pe.maxY,Ee[ke+1])}function wt(pe,Ee,ke,oe){if(Ee.geometry){var Fe=Ee.geometry.coordinates,Pe=Ee.geometry.type,_e=Math.pow(ke.tolerance/((1<<ke.maxZoom)*ke.extent),2),fe=[],Ie=Ee.id;if(ke.promoteId?Ie=Ee.properties[ke.promoteId]:ke.generateId&&(Ie=oe||0),Pe==="Point")Ot(Fe,fe);else if(Pe==="MultiPoint")for(var nt=0;nt<Fe.length;nt++)Ot(Fe[nt],fe);else if(Pe==="LineString")wr(Fe,fe,_e,!1);else if(Pe==="MultiLineString"){if(ke.lineMetrics){for(nt=0;nt<Fe.length;nt++)wr(Fe[nt],fe=[],_e,!1),pe.push(kn(Ie,"LineString",fe,Ee.properties));return}tr(Fe,fe,_e,!1)}else if(Pe==="Polygon")tr(Fe,fe,_e,!0);else{if(Pe!=="MultiPolygon"){if(Pe==="GeometryCollection"){for(nt=0;nt<Ee.geometry.geometries.length;nt++)wt(pe,{id:Ie,geometry:Ee.geometry.geometries[nt],properties:Ee.properties},ke,oe);return}throw new Error("Input data is not a valid GeoJSON object.")}for(nt=0;nt<Fe.length;nt++){var zt=[];tr(Fe[nt],zt,_e,!0),fe.push(zt)}}pe.push(kn(Ie,Pe,fe,Ee.properties))}}function Ot(pe,Ee){Ee.push(on(pe[0])),Ee.push(pn(pe[1])),Ee.push(0)}function wr(pe,Ee,ke,oe){for(var Fe,Pe,_e=0,fe=0;fe<pe.length;fe++){var Ie=on(pe[fe][0]),nt=pn(pe[fe][1]);Ee.push(Ie),Ee.push(nt),Ee.push(0),fe>0&&(_e+=oe?(Fe*nt-Ie*Pe)/2:Math.sqrt(Math.pow(Ie-Fe,2)+Math.pow(nt-Pe,2))),Fe=Ie,Pe=nt}var zt=Ee.length-3;Ee[2]=1,function Vt(pt,_t,_r,dr){for(var Mt,ce=dr,Re=_r-_t>>1,ct=_r-_t,jt=pt[_t],it=pt[_t+1],Qt=pt[_r],rn=pt[_r+1],un=_t+3;un<_r;un+=3){var En=Yn(pt[un],pt[un+1],jt,it,Qt,rn);if(En>ce)Mt=un,ce=En;else if(En===ce){var Mn=Math.abs(un-Re);Mn<ct&&(Mt=un,ct=Mn)}}ce>dr&&(Mt-_t>3&&Vt(pt,_t,Mt,dr),pt[Mt+2]=ce,_r-Mt>3&&Vt(pt,Mt,_r,dr))}(Ee,0,zt,ke),Ee[zt+2]=1,Ee.size=Math.abs(_e),Ee.start=0,Ee.end=Ee.size}function tr(pe,Ee,ke,oe){for(var Fe=0;Fe<pe.length;Fe++){var Pe=[];wr(pe[Fe],Pe,ke,oe),Ee.push(Pe)}}function on(pe){return pe/360+.5}function pn(pe){var Ee=Math.sin(pe*Math.PI/180),ke=.5-.25*Math.log((1+Ee)/(1-Ee))/Math.PI;return ke<0?0:ke>1?1:ke}function tn(pe,Ee,ke,oe,Fe,Pe,_e,fe){if(oe/=Ee,Pe>=(ke/=Ee)&&_e<oe)return pe;if(_e<ke||Pe>=oe)return null;for(var Ie=[],nt=0;nt<pe.length;nt++){var zt=pe[nt],Vt=zt.geometry,pt=zt.type,_t=Fe===0?zt.minX:zt.minY,_r=Fe===0?zt.maxX:zt.maxY;if(_t>=ke&&_r<oe)Ie.push(zt);else if(!(_r<ke||_t>=oe)){var dr=[];if(pt==="Point"||pt==="MultiPoint")Rn(Vt,dr,ke,oe,Fe);else if(pt==="LineString")Si(Vt,dr,ke,oe,Fe,!1,fe.lineMetrics);else if(pt==="MultiLineString")qe(Vt,dr,ke,oe,Fe,!1);else if(pt==="Polygon")qe(Vt,dr,ke,oe,Fe,!0);else if(pt==="MultiPolygon")for(var Mt=0;Mt<Vt.length;Mt++){var ce=[];qe(Vt[Mt],ce,ke,oe,Fe,!0),ce.length&&dr.push(ce)}if(dr.length){if(fe.lineMetrics&&pt==="LineString"){for(Mt=0;Mt<dr.length;Mt++)Ie.push(kn(zt.id,pt,dr[Mt],zt.tags));continue}pt!=="LineString"&&pt!=="MultiLineString"||(dr.length===1?(pt="LineString",dr=dr[0]):pt="MultiLineString"),pt!=="Point"&&pt!=="MultiPoint"||(pt=dr.length===3?"Point":"MultiPoint"),Ie.push(kn(zt.id,pt,dr,zt.tags))}}}return Ie.length?Ie:null}function Rn(pe,Ee,ke,oe,Fe){for(var Pe=0;Pe<pe.length;Pe+=3){var _e=pe[Pe+Fe];_e>=ke&&_e<=oe&&(Ee.push(pe[Pe]),Ee.push(pe[Pe+1]),Ee.push(pe[Pe+2]))}}function Si(pe,Ee,ke,oe,Fe,Pe,_e){for(var fe,Ie,nt=Ei(pe),zt=Fe===0?mt:Ft,Vt=pe.start,pt=0;pt<pe.length-3;pt+=3){var _t=pe[pt],_r=pe[pt+1],dr=pe[pt+2],Mt=pe[pt+3],ce=pe[pt+4],Re=Fe===0?_t:_r,ct=Fe===0?Mt:ce,jt=!1;_e&&(fe=Math.sqrt(Math.pow(_t-Mt,2)+Math.pow(_r-ce,2))),Re<ke?ct>ke&&(Ie=zt(nt,_t,_r,Mt,ce,ke),_e&&(nt.start=Vt+fe*Ie)):Re>oe?ct<oe&&(Ie=zt(nt,_t,_r,Mt,ce,oe),_e&&(nt.start=Vt+fe*Ie)):ze(nt,_t,_r,dr),ct<ke&&Re>=ke&&(Ie=zt(nt,_t,_r,Mt,ce,ke),jt=!0),ct>oe&&Re<=oe&&(Ie=zt(nt,_t,_r,Mt,ce,oe),jt=!0),!Pe&&jt&&(_e&&(nt.end=Vt+fe*Ie),Ee.push(nt),nt=Ei(pe)),_e&&(Vt+=fe)}var it=pe.length-3;_t=pe[it],_r=pe[it+1],dr=pe[it+2],(Re=Fe===0?_t:_r)>=ke&&Re<=oe&&ze(nt,_t,_r,dr),it=nt.length-3,Pe&&it>=3&&(nt[it]!==nt[0]||nt[it+1]!==nt[1])&&ze(nt,nt[0],nt[1],nt[2]),nt.length&&Ee.push(nt)}function Ei(pe){var Ee=[];return Ee.size=pe.size,Ee.start=pe.start,Ee.end=pe.end,Ee}function qe(pe,Ee,ke,oe,Fe,Pe){for(var _e=0;_e<pe.length;_e++)Si(pe[_e],Ee,ke,oe,Fe,Pe,!1)}function ze(pe,Ee,ke,oe){pe.push(Ee),pe.push(ke),pe.push(oe)}function mt(pe,Ee,ke,oe,Fe,Pe){var _e=(Pe-Ee)/(oe-Ee);return pe.push(Pe),pe.push(ke+(Fe-ke)*_e),pe.push(1),_e}function Ft(pe,Ee,ke,oe,Fe,Pe){var _e=(Pe-ke)/(Fe-ke);return pe.push(Ee+(oe-Ee)*_e),pe.push(Pe),pe.push(1),_e}function fr(pe,Ee){for(var ke=[],oe=0;oe<pe.length;oe++){var Fe,Pe=pe[oe],_e=Pe.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")Fe=yr(Pe.geometry,Ee);else if(_e==="MultiLineString"||_e==="Polygon"){Fe=[];for(var fe=0;fe<Pe.geometry.length;fe++)Fe.push(yr(Pe.geometry[fe],Ee))}else if(_e==="MultiPolygon")for(Fe=[],fe=0;fe<Pe.geometry.length;fe++){for(var Ie=[],nt=0;nt<Pe.geometry[fe].length;nt++)Ie.push(yr(Pe.geometry[fe][nt],Ee));Fe.push(Ie)}ke.push(kn(Pe.id,_e,Fe,Pe.tags))}return ke}function yr(pe,Ee){var ke=[];ke.size=pe.size,pe.start!==void 0&&(ke.start=pe.start,ke.end=pe.end);for(var oe=0;oe<pe.length;oe+=3)ke.push(pe[oe]+Ee,pe[oe+1],pe[oe+2]);return ke}function an(pe,Ee){if(pe.transformed)return pe;var ke,oe,Fe,Pe=1<<pe.z,_e=pe.x,fe=pe.y;for(ke=0;ke<pe.features.length;ke++){var Ie=pe.features[ke],nt=Ie.geometry,zt=Ie.type;if(Ie.geometry=[],zt===1)for(oe=0;oe<nt.length;oe+=2)Ie.geometry.push(Or(nt[oe],nt[oe+1],Ee,Pe,_e,fe));else for(oe=0;oe<nt.length;oe++){var Vt=[];for(Fe=0;Fe<nt[oe].length;Fe+=2)Vt.push(Or(nt[oe][Fe],nt[oe][Fe+1],Ee,Pe,_e,fe));Ie.geometry.push(Vt)}}return pe.transformed=!0,pe}function Or(pe,Ee,ke,oe,Fe,Pe){return[Math.round(ke*(pe*oe-Fe)),Math.round(ke*(Ee*oe-Pe))]}function bn(pe,Ee,ke,oe,Fe){for(var Pe=Ee===Fe.maxZoom?0:Fe.tolerance/((1<<Ee)*Fe.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ke,y:oe,z:Ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},fe=0;fe<pe.length;fe++){_e.numFeatures++,Pr(_e,pe[fe],Pe,Fe);var Ie=pe[fe].minX,nt=pe[fe].minY,zt=pe[fe].maxX,Vt=pe[fe].maxY;Ie<_e.minX&&(_e.minX=Ie),nt<_e.minY&&(_e.minY=nt),zt>_e.maxX&&(_e.maxX=zt),Vt>_e.maxY&&(_e.maxY=Vt)}return _e}function Pr(pe,Ee,ke,oe){var Fe=Ee.geometry,Pe=Ee.type,_e=[];if(Pe==="Point"||Pe==="MultiPoint")for(var fe=0;fe<Fe.length;fe+=3)_e.push(Fe[fe]),_e.push(Fe[fe+1]),pe.numPoints++,pe.numSimplified++;else if(Pe==="LineString")Yr(_e,Fe,pe,ke,!1,!1);else if(Pe==="MultiLineString"||Pe==="Polygon")for(fe=0;fe<Fe.length;fe++)Yr(_e,Fe[fe],pe,ke,Pe==="Polygon",fe===0);else if(Pe==="MultiPolygon")for(var Ie=0;Ie<Fe.length;Ie++){var nt=Fe[Ie];for(fe=0;fe<nt.length;fe++)Yr(_e,nt[fe],pe,ke,!0,fe===0)}if(_e.length){var zt=Ee.tags||null;if(Pe==="LineString"&&oe.lineMetrics){for(var Vt in zt={},Ee.tags)zt[Vt]=Ee.tags[Vt];zt.mapbox_clip_start=Fe.start/Fe.size,zt.mapbox_clip_end=Fe.end/Fe.size}var pt={geometry:_e,type:Pe==="Polygon"||Pe==="MultiPolygon"?3:Pe==="LineString"||Pe==="MultiLineString"?2:1,tags:zt};Ee.id!==null&&(pt.id=Ee.id),pe.features.push(pt)}}function Yr(pe,Ee,ke,oe,Fe,Pe){var _e=oe*oe;if(oe>0&&Ee.size<(Fe?_e:oe))ke.numPoints+=Ee.length/3;else{for(var fe=[],Ie=0;Ie<Ee.length;Ie+=3)(oe===0||Ee[Ie+2]>_e)&&(ke.numSimplified++,fe.push(Ee[Ie]),fe.push(Ee[Ie+1])),ke.numPoints++;Fe&&function(nt,zt){for(var Vt=0,pt=0,_t=nt.length,_r=_t-2;pt<_t;_r=pt,pt+=2)Vt+=(nt[pt]-nt[_r])*(nt[pt+1]+nt[_r+1]);if(Vt>0===zt)for(pt=0,_t=nt.length;pt<_t/2;pt+=2){var dr=nt[pt],Mt=nt[pt+1];nt[pt]=nt[_t-2-pt],nt[pt+1]=nt[_t-1-pt],nt[_t-2-pt]=dr,nt[_t-1-pt]=Mt}}(fe,Pe),pe.push(fe)}}function Sn(pe,Ee){var ke=(Ee=this.options=function(Fe,Pe){for(var _e in Pe)Fe[_e]=Pe[_e];return Fe}(Object.create(this.options),Ee)).debug;if(ke&&console.time("preprocess data"),Ee.maxZoom<0||Ee.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Ee.promoteId&&Ee.generateId)throw new Error("promoteId and generateId cannot be used together.");var oe=function(Fe,Pe){var _e=[];if(Fe.type==="FeatureCollection")for(var fe=0;fe<Fe.features.length;fe++)wt(_e,Fe.features[fe],Pe,fe);else wt(_e,Fe.type==="Feature"?Fe:{geometry:Fe},Pe);return _e}(pe,Ee);this.tiles={},this.tileCoords=[],ke&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Ee.indexMaxZoom,Ee.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(oe=function(Fe,Pe){var _e=Pe.buffer/Pe.extent,fe=Fe,Ie=tn(Fe,1,-1-_e,_e,0,-1,2,Pe),nt=tn(Fe,1,1-_e,2+_e,0,-1,2,Pe);return(Ie||nt)&&(fe=tn(Fe,1,-_e,1+_e,0,-1,2,Pe)||[],Ie&&(fe=fr(Ie,1).concat(fe)),nt&&(fe=fe.concat(fr(nt,-1)))),fe}(oe,Ee)).length&&this.splitTile(oe,0,0,0),ke&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ii(pe,Ee,ke){return 32*((1<<pe)*ke+Ee)+pe}function Xn(pe,Ee){var ke=pe.tileID.canonical;if(!this._geoJSONIndex)return Ee(null,null);var oe=this._geoJSONIndex.getTile(ke.z,ke.x,ke.y);if(!oe)return Ee(null,null);var Fe=new Ue(oe.features),Pe=lt(Fe);Pe.byteOffset===0&&Pe.byteLength===Pe.buffer.byteLength||(Pe=new Uint8Array(Pe)),Ee(null,{vectorTile:Fe,rawData:Pe.buffer})}Ct.prototype.load=function(pe){var Ee=this.options,ke=Ee.log,oe=Ee.minZoom,Fe=Ee.maxZoom,Pe=Ee.nodeSize;ke&&console.time("total time");var _e="prepare "+pe.length+" points";ke&&console.time(_e),this.points=pe;for(var fe=[],Ie=0;Ie<pe.length;Ie++)pe[Ie].geometry&&fe.push(ar(pe[Ie],Ie));this.trees[Fe+1]=new Kt(fe,Rt,xr,Pe,Float32Array),ke&&console.timeEnd(_e);for(var nt=Fe;nt>=oe;nt--){var zt=+Date.now();fe=this._cluster(fe,nt),this.trees[nt]=new Kt(fe,Rt,xr,Pe,Float32Array),ke&&console.log("z%d: %d clusters in %dms",nt,fe.length,+Date.now()-zt)}return ke&&console.timeEnd("total time"),this},Ct.prototype.getClusters=function(pe,Ee){var ke=((pe[0]+180)%360+360)%360-180,oe=Math.max(-90,Math.min(90,pe[1])),Fe=pe[2]===180?180:((pe[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,pe[3]));if(pe[2]-pe[0]>=360)ke=-180,Fe=180;else if(ke>Fe){var _e=this.getClusters([ke,oe,180,Pe],Ee),fe=this.getClusters([-180,oe,Fe,Pe],Ee);return _e.concat(fe)}for(var Ie=this.trees[this._limitZoom(Ee)],nt=[],zt=0,Vt=Ie.range(sr(ke),He(Pe),sr(Fe),He(oe));zt<Vt.length;zt+=1){var pt=Ie.points[Vt[zt]];nt.push(pt.numPoints?er(pt):this.points[pt.index])}return nt},Ct.prototype.getChildren=function(pe){var Ee=this._getOriginId(pe),ke=this._getOriginZoom(pe),oe="No cluster with the specified id.",Fe=this.trees[ke];if(!Fe)throw new Error(oe);var Pe=Fe.points[Ee];if(!Pe)throw new Error(oe);for(var _e=this.options.radius/(this.options.extent*Math.pow(2,ke-1)),fe=[],Ie=0,nt=Fe.within(Pe.x,Pe.y,_e);Ie<nt.length;Ie+=1){var zt=Fe.points[nt[Ie]];zt.parentId===pe&&fe.push(zt.numPoints?er(zt):this.points[zt.index])}if(fe.length===0)throw new Error(oe);return fe},Ct.prototype.getLeaves=function(pe,Ee,ke){var oe=[];return this._appendLeaves(oe,pe,Ee=Ee||10,ke=ke||0,0),oe},Ct.prototype.getTile=function(pe,Ee,ke){var oe=this.trees[this._limitZoom(pe)],Fe=Math.pow(2,pe),Pe=this.options,_e=Pe.radius/Pe.extent,fe=(ke-_e)/Fe,Ie=(ke+1+_e)/Fe,nt={features:[]};return this._addTileFeatures(oe.range((Ee-_e)/Fe,fe,(Ee+1+_e)/Fe,Ie),oe.points,Ee,ke,Fe,nt),Ee===0&&this._addTileFeatures(oe.range(1-_e/Fe,fe,1,Ie),oe.points,Fe,ke,Fe,nt),Ee===Fe-1&&this._addTileFeatures(oe.range(0,fe,_e/Fe,Ie),oe.points,-1,ke,Fe,nt),nt.features.length?nt:null},Ct.prototype.getClusterExpansionZoom=function(pe){for(var Ee=this._getOriginZoom(pe)-1;Ee<=this.options.maxZoom;){var ke=this.getChildren(pe);if(Ee++,ke.length!==1)break;pe=ke[0].properties.cluster_id}return Ee},Ct.prototype._appendLeaves=function(pe,Ee,ke,oe,Fe){for(var Pe=0,_e=this.getChildren(Ee);Pe<_e.length;Pe+=1){var fe=_e[Pe],Ie=fe.properties;if(Ie&&Ie.cluster?Fe+Ie.point_count<=oe?Fe+=Ie.point_count:Fe=this._appendLeaves(pe,Ie.cluster_id,ke,oe,Fe):Fe<oe?Fe++:pe.push(fe),pe.length===ke)break}return Fe},Ct.prototype._addTileFeatures=function(pe,Ee,ke,oe,Fe,Pe){for(var _e=0,fe=pe;_e<fe.length;_e+=1){var Ie=Ee[fe[_e]],nt=Ie.numPoints,zt={type:1,geometry:[[Math.round(this.options.extent*(Ie.x*Fe-ke)),Math.round(this.options.extent*(Ie.y*Fe-oe))]],tags:nt?ir(Ie):this.points[Ie.index].properties},Vt=void 0;nt?Vt=Ie.id:this.options.generateId?Vt=Ie.index:this.points[Ie.index].id&&(Vt=this.points[Ie.index].id),Vt!==void 0&&(zt.id=Vt),Pe.features.push(zt)}},Ct.prototype._limitZoom=function(pe){return Math.max(this.options.minZoom,Math.min(+pe,this.options.maxZoom+1))},Ct.prototype._cluster=function(pe,Ee){for(var ke=[],oe=this.options,Fe=oe.reduce,Pe=oe.minPoints,_e=oe.radius/(oe.extent*Math.pow(2,Ee)),fe=0;fe<pe.length;fe++){var Ie=pe[fe];if(!(Ie.zoom<=Ee)){Ie.zoom=Ee;for(var nt=this.trees[Ee+1],zt=nt.within(Ie.x,Ie.y,_e),Vt=Ie.numPoints||1,pt=Vt,_t=0,_r=zt;_t<_r.length;_t+=1){var dr=nt.points[_r[_t]];dr.zoom>Ee&&(pt+=dr.numPoints||1)}if(pt>=Pe){for(var Mt=Ie.x*Vt,ce=Ie.y*Vt,Re=Fe&&Vt>1?this._map(Ie,!0):null,ct=(fe<<5)+(Ee+1)+this.points.length,jt=0,it=zt;jt<it.length;jt+=1){var Qt=nt.points[it[jt]];if(!(Qt.zoom<=Ee)){Qt.zoom=Ee;var rn=Qt.numPoints||1;Mt+=Qt.x*rn,ce+=Qt.y*rn,Qt.parentId=ct,Fe&&(Re||(Re=this._map(Ie,!0)),Fe(Re,this._map(Qt)))}}Ie.parentId=ct,ke.push(Tt(Mt/pt,ce/pt,ct,pt,Re))}else if(ke.push(Ie),pt>1)for(var un=0,En=zt;un<En.length;un+=1){var Mn=nt.points[En[un]];Mn.zoom<=Ee||(Mn.zoom=Ee,ke.push(Mn))}}}return ke},Ct.prototype._getOriginId=function(pe){return pe-this.points.length>>5},Ct.prototype._getOriginZoom=function(pe){return(pe-this.points.length)%32},Ct.prototype._map=function(pe,Ee){if(pe.numPoints)return Ee?Xe({},pe.properties):pe.properties;var ke=this.points[pe.index].properties,oe=this.options.map(ke);return Ee&&oe===ke?Xe({},oe):oe},Sn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Sn.prototype.splitTile=function(pe,Ee,ke,oe,Fe,Pe,_e){for(var fe=[pe,Ee,ke,oe],Ie=this.options,nt=Ie.debug;fe.length;){oe=fe.pop(),ke=fe.pop(),Ee=fe.pop(),pe=fe.pop();var zt=1<<Ee,Vt=ii(Ee,ke,oe),pt=this.tiles[Vt];if(!pt&&(nt>1&&console.time("creation"),pt=this.tiles[Vt]=bn(pe,Ee,ke,oe,Ie),this.tileCoords.push({z:Ee,x:ke,y:oe}),nt)){nt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Ee,ke,oe,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var _t="z"+Ee;this.stats[_t]=(this.stats[_t]||0)+1,this.total++}if(pt.source=pe,Fe){if(Ee===Ie.maxZoom||Ee===Fe)continue;var _r=1<<Fe-Ee;if(ke!==Math.floor(Pe/_r)||oe!==Math.floor(_e/_r))continue}else if(Ee===Ie.indexMaxZoom||pt.numPoints<=Ie.indexMaxPoints)continue;if(pt.source=null,pe.length!==0){nt>1&&console.time("clipping");var dr,Mt,ce,Re,ct,jt,it=.5*Ie.buffer/Ie.extent,Qt=.5-it,rn=.5+it,un=1+it;dr=Mt=ce=Re=null,ct=tn(pe,zt,ke-it,ke+rn,0,pt.minX,pt.maxX,Ie),jt=tn(pe,zt,ke+Qt,ke+un,0,pt.minX,pt.maxX,Ie),pe=null,ct&&(dr=tn(ct,zt,oe-it,oe+rn,1,pt.minY,pt.maxY,Ie),Mt=tn(ct,zt,oe+Qt,oe+un,1,pt.minY,pt.maxY,Ie),ct=null),jt&&(ce=tn(jt,zt,oe-it,oe+rn,1,pt.minY,pt.maxY,Ie),Re=tn(jt,zt,oe+Qt,oe+un,1,pt.minY,pt.maxY,Ie),jt=null),nt>1&&console.timeEnd("clipping"),fe.push(dr||[],Ee+1,2*ke,2*oe),fe.push(Mt||[],Ee+1,2*ke,2*oe+1),fe.push(ce||[],Ee+1,2*ke+1,2*oe),fe.push(Re||[],Ee+1,2*ke+1,2*oe+1)}}},Sn.prototype.getTile=function(pe,Ee,ke){var oe=this.options,Fe=oe.extent,Pe=oe.debug;if(pe<0||pe>24)return null;var _e=1<<pe,fe=ii(pe,Ee=(Ee%_e+_e)%_e,ke);if(this.tiles[fe])return an(this.tiles[fe],Fe);Pe>1&&console.log("drilling down to z%d-%d-%d",pe,Ee,ke);for(var Ie,nt=pe,zt=Ee,Vt=ke;!Ie&&nt>0;)nt--,zt=Math.floor(zt/2),Vt=Math.floor(Vt/2),Ie=this.tiles[ii(nt,zt,Vt)];return Ie&&Ie.source?(Pe>1&&console.log("found parent tile z%d-%d-%d",nt,zt,Vt),Pe>1&&console.time("drilling down"),this.splitTile(Ie.source,nt,zt,Vt,pe,Ee,ke),Pe>1&&console.timeEnd("drilling down"),this.tiles[fe]?an(this.tiles[fe],Fe):null):null};var ha=function(pe){function Ee(ke,oe,Fe,Pe){pe.call(this,ke,oe,Fe,Xn),Pe&&(this.loadGeoJSON=Pe)}return pe&&(Ee.__proto__=pe),(Ee.prototype=Object.create(pe&&pe.prototype)).constructor=Ee,Ee.prototype.loadData=function(ke,oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=oe,this._pendingLoadDataParams=ke,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Ee.prototype._loadData=function(){var ke=this;if(this._pendingCallback&&this._pendingLoadDataParams){var oe=this._pendingCallback,Fe=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=!!(Fe&&Fe.request&&Fe.request.collectResourceTiming)&&new p.RequestPerformance(Fe.request);this.loadGeoJSON(Fe,function(_e,fe){if(_e||!fe)return oe(_e);if(typeof fe!="object")return oe(new Error("Input data given to '"+Fe.source+"' is not a valid GeoJSON object."));(function pt(_t,_r){var dr,Mt=_t&&_t.type;if(Mt==="FeatureCollection")for(dr=0;dr<_t.features.length;dr++)pt(_t.features[dr],_r);else if(Mt==="GeometryCollection")for(dr=0;dr<_t.geometries.length;dr++)pt(_t.geometries[dr],_r);else if(Mt==="Feature")pt(_t.geometry,_r);else if(Mt==="Polygon")Ce(_t.coordinates,_r);else if(Mt==="MultiPolygon")for(dr=0;dr<_t.coordinates.length;dr++)Ce(_t.coordinates[dr],_r);return _t})(fe,!0);try{if(Fe.filter){var Ie=p.createExpression(Fe.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ie.result==="error")throw new Error(Ie.value.map(function(pt){return pt.key+": "+pt.message}).join(", "));var nt=fe.features.filter(function(pt){return Ie.value.evaluate({zoom:0},pt)});fe={type:"FeatureCollection",features:nt}}ke._geoJSONIndex=Fe.cluster?new Ct(function(pt){var _t=pt.superclusterOptions,_r=pt.clusterProperties;if(!_r||!_t)return _t;for(var dr={},Mt={},ce={accumulated:null,zoom:0},Re={properties:null},ct=Object.keys(_r),jt=0,it=ct;jt<it.length;jt+=1){var Qt=it[jt],rn=_r[Qt],un=rn[0],En=p.createExpression(rn[1]),Mn=p.createExpression(typeof un=="string"?[un,["accumulated"],["get",Qt]]:un);dr[Qt]=En.value,Mt[Qt]=Mn.value}return _t.map=function(Va){Re.properties=Va;for(var Nr={},ko=0,yi=ct;ko<yi.length;ko+=1){var Fn=yi[ko];Nr[Fn]=dr[Fn].evaluate(ce,Re)}return Nr},_t.reduce=function(Va,Nr){Re.properties=Nr;for(var ko=0,yi=ct;ko<yi.length;ko+=1){var Fn=yi[ko];ce.accumulated=Va[Fn],Va[Fn]=Mt[Fn].evaluate(ce,Re)}},_t}(Fe)).load(fe.features):function(pt,_t){return new Sn(pt,_t)}(fe,Fe.geojsonVtOptions)}catch(pt){return oe(pt)}ke.loaded={};var zt={};if(Pe){var Vt=Pe.finish();Vt&&(zt.resourceTiming={},zt.resourceTiming[Fe.source]=JSON.parse(JSON.stringify(Vt)))}oe(null,zt)})}},Ee.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},Ee.prototype.reloadTile=function(ke,oe){var Fe=this.loaded;return Fe&&Fe[ke.uid]?pe.prototype.reloadTile.call(this,ke,oe):this.loadTile(ke,oe)},Ee.prototype.loadGeoJSON=function(ke,oe){if(ke.request)p.getJSON(ke.request,oe);else{if(typeof ke.data!="string")return oe(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."));try{return oe(null,JSON.parse(ke.data))}catch{return oe(new Error("Input data given to '"+ke.source+"' is not a valid GeoJSON object."))}}},Ee.prototype.removeSource=function(ke,oe){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),oe()},Ee.prototype.getClusterExpansionZoom=function(ke,oe){try{oe(null,this._geoJSONIndex.getClusterExpansionZoom(ke.clusterId))}catch(Fe){oe(Fe)}},Ee.prototype.getClusterChildren=function(ke,oe){try{oe(null,this._geoJSONIndex.getChildren(ke.clusterId))}catch(Fe){oe(Fe)}},Ee.prototype.getClusterLeaves=function(ke,oe){try{oe(null,this._geoJSONIndex.getLeaves(ke.clusterId,ke.limit,ke.offset))}catch(Fe){oe(Fe)}},Ee}(U),xn=function(pe){var Ee=this;this.self=pe,this.actor=new p.Actor(pe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:U,geojson:ha},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ke,oe){if(Ee.workerSourceTypes[ke])throw new Error('Worker source with name "'+ke+'" already registered.');Ee.workerSourceTypes[ke]=oe},this.self.registerRTLTextPlugin=function(ke){if(p.plugin.isParsed())throw new Error("RTL text plugin already registered.");p.plugin.applyArabicShaping=ke.applyArabicShaping,p.plugin.processBidirectionalText=ke.processBidirectionalText,p.plugin.processStyledBidirectionalText=ke.processStyledBidirectionalText}};return xn.prototype.setReferrer=function(pe,Ee){this.referrer=Ee},xn.prototype.setImages=function(pe,Ee,ke){for(var oe in this.availableImages[pe]=Ee,this.workerSources[pe]){var Fe=this.workerSources[pe][oe];for(var Pe in Fe)Fe[Pe].availableImages=Ee}ke()},xn.prototype.setLayers=function(pe,Ee,ke){this.getLayerIndex(pe).replace(Ee),ke()},xn.prototype.updateLayers=function(pe,Ee,ke){this.getLayerIndex(pe).update(Ee.layers,Ee.removedIds),ke()},xn.prototype.loadTile=function(pe,Ee,ke){this.getWorkerSource(pe,Ee.type,Ee.source).loadTile(Ee,ke)},xn.prototype.loadDEMTile=function(pe,Ee,ke){this.getDEMWorkerSource(pe,Ee.source).loadTile(Ee,ke)},xn.prototype.reloadTile=function(pe,Ee,ke){this.getWorkerSource(pe,Ee.type,Ee.source).reloadTile(Ee,ke)},xn.prototype.abortTile=function(pe,Ee,ke){this.getWorkerSource(pe,Ee.type,Ee.source).abortTile(Ee,ke)},xn.prototype.removeTile=function(pe,Ee,ke){this.getWorkerSource(pe,Ee.type,Ee.source).removeTile(Ee,ke)},xn.prototype.removeDEMTile=function(pe,Ee){this.getDEMWorkerSource(pe,Ee.source).removeTile(Ee)},xn.prototype.removeSource=function(pe,Ee,ke){if(this.workerSources[pe]&&this.workerSources[pe][Ee.type]&&this.workerSources[pe][Ee.type][Ee.source]){var oe=this.workerSources[pe][Ee.type][Ee.source];delete this.workerSources[pe][Ee.type][Ee.source],oe.removeSource!==void 0?oe.removeSource(Ee,ke):ke()}},xn.prototype.loadWorkerSource=function(pe,Ee,ke){try{this.self.importScripts(Ee.url),ke()}catch(oe){ke(oe.toString())}},xn.prototype.syncRTLPluginState=function(pe,Ee,ke){try{p.plugin.setState(Ee);var oe=p.plugin.getPluginURL();if(p.plugin.isLoaded()&&!p.plugin.isParsed()&&oe!=null){this.self.importScripts(oe);var Fe=p.plugin.isParsed();ke(Fe?void 0:new Error("RTL Text Plugin failed to import scripts from "+oe),Fe)}}catch(Pe){ke(Pe.toString())}},xn.prototype.getAvailableImages=function(pe){var Ee=this.availableImages[pe];return Ee||(Ee=[]),Ee},xn.prototype.getLayerIndex=function(pe){var Ee=this.layerIndexes[pe];return Ee||(Ee=this.layerIndexes[pe]=new Q),Ee},xn.prototype.getWorkerSource=function(pe,Ee,ke){var oe=this;return this.workerSources[pe]||(this.workerSources[pe]={}),this.workerSources[pe][Ee]||(this.workerSources[pe][Ee]={}),this.workerSources[pe][Ee][ke]||(this.workerSources[pe][Ee][ke]=new this.workerSourceTypes[Ee]({send:function(Fe,Pe,_e){oe.actor.send(Fe,Pe,_e,pe)}},this.getLayerIndex(pe),this.getAvailableImages(pe))),this.workerSources[pe][Ee][ke]},xn.prototype.getDEMWorkerSource=function(pe,Ee){return this.demWorkerSources[pe]||(this.demWorkerSources[pe]={}),this.demWorkerSources[pe][Ee]||(this.demWorkerSources[pe][Ee]=new he),this.demWorkerSources[pe][Ee]},xn.prototype.enforceCacheSizeLimit=function(pe,Ee){p.enforceCacheSizeLimit(Ee)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new xn(self)),xn}),V(["./shared"],function(p){var K=p.createCommonjsModule(function(d){function v(O){return!g(O)}function g(O){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var z,Y,ae=new Blob([""],{type:"text/javascript"}),be=URL.createObjectURL(ae);try{Y=new Worker(be),z=!0}catch{z=!1}return Y&&Y.terminate(),URL.revokeObjectURL(be),z}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var z=document.createElement("canvas");z.width=z.height=1;var Y=z.getContext("2d");if(!Y)return!1;var ae=Y.getImageData(0,0,1,1);return ae&&ae.width===z.width}()?(x[F=O&&O.failIfMajorPerformanceCaveat]===void 0&&(x[F]=function(z){var Y=function(be){var De=document.createElement("canvas"),Me=Object.create(v.webGLContextAttributes);return Me.failIfMajorPerformanceCaveat=be,De.probablySupportsContext?De.probablySupportsContext("webgl",Me)||De.probablySupportsContext("experimental-webgl",Me):De.supportsContext?De.supportsContext("webgl",Me)||De.supportsContext("experimental-webgl",Me):De.getContext("webgl",Me)||De.getContext("experimental-webgl",Me)}(z);if(!Y)return!1;var ae=Y.createShader(Y.VERTEX_SHADER);return!(!ae||Y.isContextLost())&&(Y.shaderSource(ae,"void main() {}"),Y.compileShader(ae),Y.getShaderParameter(ae,Y.COMPILE_STATUS)===!0)}(F)),x[F]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var F}d.exports?d.exports=v:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=v,window.mapboxgl.notSupportedReason=g);var x={};v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),j={create:function(d,v,g){var x=p.window.document.createElement(d);return v!==void 0&&(x.className=v),g&&g.appendChild(x),x},createNS:function(d,v){return p.window.document.createElementNS(d,v)}},Q=p.window.document&&p.window.document.documentElement.style;function ee(d){if(!Q)return d[0];for(var v=0;v<d.length;v++)if(d[v]in Q)return d[v];return d[0]}var se,me=ee(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);j.disableDrag=function(){Q&&me&&(se=Q[me],Q[me]="none")},j.enableDrag=function(){Q&&me&&(Q[me]=se)};var ve=ee(["transform","WebkitTransform"]);j.setTransform=function(d,v){d.style[ve]=v};var U=!1;try{var $=Object.defineProperty({},"passive",{get:function(){U=!0}});p.window.addEventListener("test",$,$),p.window.removeEventListener("test",$,$)}catch{U=!1}j.addEventListener=function(d,v,g,x){x===void 0&&(x={}),d.addEventListener(v,g,"passive"in x&&U?x:x.capture)},j.removeEventListener=function(d,v,g,x){x===void 0&&(x={}),d.removeEventListener(v,g,"passive"in x&&U?x:x.capture)};var he=function(d){d.preventDefault(),d.stopPropagation(),p.window.removeEventListener("click",he,!0)};function Ce(d){var v=d.userImage;return!!(v&&v.render&&v.render())&&(d.data.replace(new Uint8Array(v.data.buffer)),!0)}j.suppressClick=function(){p.window.addEventListener("click",he,!0),p.window.setTimeout(function(){p.window.removeEventListener("click",he,!0)},0)},j.mousePos=function(d,v){var g=d.getBoundingClientRect();return new p.Point(v.clientX-g.left-d.clientLeft,v.clientY-g.top-d.clientTop)},j.touchPos=function(d,v){for(var g=d.getBoundingClientRect(),x=[],O=0;O<v.length;O++)x.push(new p.Point(v[O].clientX-g.left-d.clientLeft,v[O].clientY-g.top-d.clientTop));return x},j.mouseButton=function(d){return p.window.InstallTrigger!==void 0&&d.button===2&&d.ctrlKey&&p.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:d.button},j.remove=function(d){d.parentNode&&d.parentNode.removeChild(d)};var Se=function(d){function v(){d.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new p.RGBAImage({width:1,height:1}),this.dirty=!0}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.isLoaded=function(){return this.loaded},v.prototype.setLoaded=function(g){if(this.loaded!==g&&(this.loaded=g,g)){for(var x=0,O=this.requestors;x<O.length;x+=1){var F=O[x];this._notify(F.ids,F.callback)}this.requestors=[]}},v.prototype.getImage=function(g){return this.images[g]},v.prototype.addImage=function(g,x){this._validate(g,x)&&(this.images[g]=x)},v.prototype._validate=function(g,x){var O=!0;return this._validateStretch(x.stretchX,x.data&&x.data.width)||(this.fire(new p.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchX" value'))),O=!1),this._validateStretch(x.stretchY,x.data&&x.data.height)||(this.fire(new p.ErrorEvent(new Error('Image "'+g+'" has invalid "stretchY" value'))),O=!1),this._validateContent(x.content,x)||(this.fire(new p.ErrorEvent(new Error('Image "'+g+'" has invalid "content" value'))),O=!1),O},v.prototype._validateStretch=function(g,x){if(!g)return!0;for(var O=0,F=0,z=g;F<z.length;F+=1){var Y=z[F];if(Y[0]<O||Y[1]<Y[0]||x<Y[1])return!1;O=Y[1]}return!0},v.prototype._validateContent=function(g,x){return!(g&&(g.length!==4||g[0]<0||x.data.width<g[0]||g[1]<0||x.data.height<g[1]||g[2]<0||x.data.width<g[2]||g[3]<0||x.data.height<g[3]||g[2]<g[0]||g[3]<g[1]))},v.prototype.updateImage=function(g,x){x.version=this.images[g].version+1,this.images[g]=x,this.updatedImages[g]=!0},v.prototype.removeImage=function(g){var x=this.images[g];delete this.images[g],delete this.patterns[g],x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()},v.prototype.listImages=function(){return Object.keys(this.images)},v.prototype.getImages=function(g,x){var O=!0;if(!this.isLoaded())for(var F=0,z=g;F<z.length;F+=1)this.images[z[F]]||(O=!1);this.isLoaded()||O?this._notify(g,x):this.requestors.push({ids:g,callback:x})},v.prototype._notify=function(g,x){for(var O={},F=0,z=g;F<z.length;F+=1){var Y=z[F];this.images[Y]||this.fire(new p.Event("styleimagemissing",{id:Y}));var ae=this.images[Y];ae?O[Y]={data:ae.data.clone(),pixelRatio:ae.pixelRatio,sdf:ae.sdf,version:ae.version,stretchX:ae.stretchX,stretchY:ae.stretchY,content:ae.content,hasRenderCallback:!!(ae.userImage&&ae.userImage.render)}:p.warnOnce('Image "'+Y+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}x(null,O)},v.prototype.getPixelSize=function(){var g=this.atlasImage;return{width:g.width,height:g.height}},v.prototype.getPattern=function(g){var x=this.patterns[g],O=this.getImage(g);if(!O)return null;if(x&&x.position.version===O.version)return x.position;if(x)x.position.version=O.version;else{var F={w:O.data.width+2,h:O.data.height+2,x:0,y:0},z=new p.ImagePosition(F,O);this.patterns[g]={bin:F,position:z}}return this._updatePatternAtlas(),this.patterns[g].position},v.prototype.bind=function(g){var x=g.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new p.Texture(g,this.atlasImage,x.RGBA),this.atlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE)},v.prototype._updatePatternAtlas=function(){var g=[];for(var x in this.patterns)g.push(this.patterns[x].bin);var O=p.potpack(g),F=O.w,z=O.h,Y=this.atlasImage;for(var ae in Y.resize({width:F||1,height:z||1}),this.patterns){var be=this.patterns[ae].bin,De=be.x+1,Me=be.y+1,Ne=this.images[ae].data,Ye=Ne.width,Ze=Ne.height;p.RGBAImage.copy(Ne,Y,{x:0,y:0},{x:De,y:Me},{width:Ye,height:Ze}),p.RGBAImage.copy(Ne,Y,{x:0,y:Ze-1},{x:De,y:Me-1},{width:Ye,height:1}),p.RGBAImage.copy(Ne,Y,{x:0,y:0},{x:De,y:Me+Ze},{width:Ye,height:1}),p.RGBAImage.copy(Ne,Y,{x:Ye-1,y:0},{x:De-1,y:Me},{width:1,height:Ze}),p.RGBAImage.copy(Ne,Y,{x:0,y:0},{x:De+Ye,y:Me},{width:1,height:Ze})}this.dirty=!0},v.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},v.prototype.dispatchRenderCallbacks=function(g){for(var x=0,O=g;x<O.length;x+=1){var F=O[x];if(!this.callbackDispatchedThisFrame[F]){this.callbackDispatchedThisFrame[F]=!0;var z=this.images[F];Ce(z)&&this.updateImage(F,z)}}},v}(p.Evented),de=ye,we=ye,Ue=1e20;function ye(d,v,g,x,O,F){this.fontSize=d||24,this.buffer=v===void 0?3:v,this.cutoff=x||.25,this.fontFamily=O||"sans-serif",this.fontWeight=F||"normal",this.radius=g||8;var z=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=z,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.d=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Int16Array(z),this.middle=Math.round(z/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function ne(d,v,g,x,O,F,z){for(var Y=0;Y<v;Y++){for(var ae=0;ae<g;ae++)x[ae]=d[ae*v+Y];for(st(x,O,F,z,g),ae=0;ae<g;ae++)d[ae*v+Y]=O[ae]}for(ae=0;ae<g;ae++){for(Y=0;Y<v;Y++)x[Y]=d[ae*v+Y];for(st(x,O,F,z,v),Y=0;Y<v;Y++)d[ae*v+Y]=Math.sqrt(O[Y])}}function st(d,v,g,x,O){g[0]=0,x[0]=-Ue,x[1]=+Ue;for(var F=1,z=0;F<O;F++){for(var Y=(d[F]+F*F-(d[g[z]]+g[z]*g[z]))/(2*F-2*g[z]);Y<=x[z];)z--,Y=(d[F]+F*F-(d[g[z]]+g[z]*g[z]))/(2*F-2*g[z]);g[++z]=F,x[z]=Y,x[z+1]=+Ue}for(F=0,z=0;F<O;F++){for(;x[z+1]<F;)z++;v[F]=(F-g[z])*(F-g[z])+d[g[z]]}}ye.prototype.draw=function(d){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(d,this.buffer,this.middle);for(var v=this.ctx.getImageData(0,0,this.size,this.size),g=new Uint8ClampedArray(this.size*this.size),x=0;x<this.size*this.size;x++){var O=v.data[4*x+3]/255;this.gridOuter[x]=O===1?0:O===0?Ue:Math.pow(Math.max(0,.5-O),2),this.gridInner[x]=O===1?Ue:O===0?0:Math.pow(Math.max(0,O-.5),2)}for(ne(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),ne(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),x=0;x<this.size*this.size;x++)g[x]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[x]-this.gridInner[x])/this.radius+this.cutoff))));return g},de.default=we;var dt=function(d,v){this.requestManager=d,this.localIdeographFontFamily=v,this.entries={}};dt.prototype.setURL=function(d){this.url=d},dt.prototype.getGlyphs=function(d,v){var g=this,x=[];for(var O in d)for(var F=0,z=d[O];F<z.length;F+=1)x.push({stack:O,id:z[F]});p.asyncAll(x,function(Y,ae){var be=Y.stack,De=Y.id,Me=g.entries[be];Me||(Me=g.entries[be]={glyphs:{},requests:{},ranges:{}});var Ne=Me.glyphs[De];if(Ne===void 0){if(Ne=g._tinySDF(Me,be,De))return Me.glyphs[De]=Ne,void ae(null,{stack:be,id:De,glyph:Ne});var Ye=Math.floor(De/256);if(256*Ye>65535)ae(new Error("glyphs > 65535 not supported"));else if(Me.ranges[Ye])ae(null,{stack:be,id:De,glyph:Ne});else{var Ze=Me.requests[Ye];Ze||(Ze=Me.requests[Ye]=[],dt.loadGlyphRange(be,Ye,g.url,g.requestManager,function(et,Ve){if(Ve){for(var tt in Ve)g._doesCharSupportLocalGlyph(+tt)||(Me.glyphs[+tt]=Ve[+tt]);Me.ranges[Ye]=!0}for(var ft=0,xt=Ze;ft<xt.length;ft+=1)(0,xt[ft])(et,Ve);delete Me.requests[Ye]})),Ze.push(function(et,Ve){et?ae(et):Ve&&ae(null,{stack:be,id:De,glyph:Ve[De]||null})})}}else ae(null,{stack:be,id:De,glyph:Ne})},function(Y,ae){if(Y)v(Y);else if(ae){for(var be={},De=0,Me=ae;De<Me.length;De+=1){var Ne=Me[De],Ye=Ne.stack,Ze=Ne.id,et=Ne.glyph;(be[Ye]||(be[Ye]={}))[Ze]=et&&{id:et.id,bitmap:et.bitmap.clone(),metrics:et.metrics}}v(null,be)}})},dt.prototype._doesCharSupportLocalGlyph=function(d){return!!this.localIdeographFontFamily&&(p.isChar["CJK Unified Ideographs"](d)||p.isChar["Hangul Syllables"](d)||p.isChar.Hiragana(d)||p.isChar.Katakana(d))},dt.prototype._tinySDF=function(d,v,g){var x=this.localIdeographFontFamily;if(x&&this._doesCharSupportLocalGlyph(g)){var O=d.tinySDF;if(!O){var F="400";/bold/i.test(v)?F="900":/medium/i.test(v)?F="500":/light/i.test(v)&&(F="200"),O=d.tinySDF=new dt.TinySDF(24,3,8,.25,x,F)}return{id:g,bitmap:new p.AlphaImage({width:30,height:30},O.draw(String.fromCharCode(g))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},dt.loadGlyphRange=function(d,v,g,x,O){var F=256*v,z=F+255,Y=x.transformRequest(x.normalizeGlyphsURL(g).replace("{fontstack}",d).replace("{range}",F+"-"+z),p.ResourceType.Glyphs);p.getArrayBuffer(Y,function(ae,be){if(ae)O(ae);else if(be){for(var De={},Me=0,Ne=p.parseGlyphPBF(be);Me<Ne.length;Me+=1){var Ye=Ne[Me];De[Ye.id]=Ye}O(null,De)}})},dt.TinySDF=de;var lt=function(){this.specification=p.styleSpec.light.position};lt.prototype.possiblyEvaluate=function(d,v){return p.sphericalToCartesian(d.expression.evaluate(v))},lt.prototype.interpolate=function(d,v,g){return{x:p.number(d.x,v.x,g),y:p.number(d.y,v.y,g),z:p.number(d.z,v.z,g)}};var kt=new p.Properties({anchor:new p.DataConstantProperty(p.styleSpec.light.anchor),position:new lt,color:new p.DataConstantProperty(p.styleSpec.light.color),intensity:new p.DataConstantProperty(p.styleSpec.light.intensity)}),ut=function(d){function v(g){d.call(this),this._transitionable=new p.Transitionable(kt),this.setLight(g),this._transitioning=this._transitionable.untransitioned()}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getLight=function(){return this._transitionable.serialize()},v.prototype.setLight=function(g,x){if(x===void 0&&(x={}),!this._validate(p.validateLight,g,x))for(var O in g){var F=g[O];p.endsWith(O,"-transition")?this._transitionable.setTransition(O.slice(0,-11),F):this._transitionable.setValue(O,F)}},v.prototype.updateTransitions=function(g){this._transitioning=this._transitionable.transitioned(g,this._transitioning)},v.prototype.hasTransition=function(){return this._transitioning.hasTransition()},v.prototype.recalculate=function(g){this.properties=this._transitioning.possiblyEvaluate(g)},v.prototype._validate=function(g,x,O){return(!O||O.validate!==!1)&&p.emitValidationErrors(this,g.call(p.validateStyle,p.extend({value:x,style:{glyphs:!0,sprite:!0},styleSpec:p.styleSpec})))},v}(p.Evented),Ut=function(d,v){this.width=d,this.height=v,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};Ut.prototype.getDash=function(d,v){var g=d.join(",")+String(v);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(d,v)),this.dashEntry[g]},Ut.prototype.getDashRanges=function(d,v,g){var x=[],O=d.length%2==1?-d[d.length-1]*g:0,F=d[0]*g,z=!0;x.push({left:O,right:F,isDash:z,zeroLength:d[0]===0});for(var Y=d[0],ae=1;ae<d.length;ae++){var be=d[ae];x.push({left:O=Y*g,right:F=(Y+=be)*g,isDash:z=!z,zeroLength:be===0})}return x},Ut.prototype.addRoundDash=function(d,v,g){for(var x=v/2,O=-g;O<=g;O++)for(var F=this.width*(this.nextRow+g+O),z=0,Y=d[z],ae=0;ae<this.width;ae++){ae/Y.right>1&&(Y=d[++z]);var be=Math.abs(ae-Y.left),De=Math.abs(ae-Y.right),Me=Math.min(be,De),Ne=void 0,Ye=O/g*(x+1);if(Y.isDash){var Ze=x-Math.abs(Ye);Ne=Math.sqrt(Me*Me+Ze*Ze)}else Ne=x-Math.sqrt(Me*Me+Ye*Ye);this.data[F+ae]=Math.max(0,Math.min(255,Ne+128))}},Ut.prototype.addRegularDash=function(d){for(var v=d.length-1;v>=0;--v){var g=d[v],x=d[v+1];g.zeroLength?d.splice(v,1):x&&x.isDash===g.isDash&&(x.left=g.left,d.splice(v,1))}var O=d[0],F=d[d.length-1];O.isDash===F.isDash&&(O.left=F.left-this.width,F.right=O.right+this.width);for(var z=this.width*this.nextRow,Y=0,ae=d[Y],be=0;be<this.width;be++){be/ae.right>1&&(ae=d[++Y]);var De=Math.abs(be-ae.left),Me=Math.abs(be-ae.right),Ne=Math.min(De,Me);this.data[z+be]=Math.max(0,Math.min(255,(ae.isDash?Ne:-Ne)+128))}},Ut.prototype.addDash=function(d,v){var g=v?7:0,x=2*g+1;if(this.nextRow+x>this.height)return p.warnOnce("LineAtlas out of space"),null;for(var O=0,F=0;F<d.length;F++)O+=d[F];if(O!==0){var z=this.width/O,Y=this.getDashRanges(d,this.width,z);v?this.addRoundDash(Y,z,g):this.addRegularDash(Y)}var ae={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:O};return this.nextRow+=x,this.dirty=!0,ae},Ut.prototype.bind=function(d){var v=d.gl;this.texture?(v.bindTexture(v.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,v.texSubImage2D(v.TEXTURE_2D,0,0,0,this.width,this.height,v.ALPHA,v.UNSIGNED_BYTE,this.data))):(this.texture=v.createTexture(),v.bindTexture(v.TEXTURE_2D,this.texture),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.REPEAT),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR),v.texImage2D(v.TEXTURE_2D,0,v.ALPHA,this.width,this.height,0,v.ALPHA,v.UNSIGNED_BYTE,this.data))};var Wt=function d(v,g){this.workerPool=v,this.actors=[],this.currentActor=0,this.id=p.uniqueId();for(var x=this.workerPool.acquire(this.id),O=0;O<x.length;O++){var F=new d.Actor(x[O],g,this.id);F.name="Worker "+O,this.actors.push(F)}};function Ht(d,v,g){var x=function(O,F){if(O)return g(O);if(F){var z=p.pick(p.extend(F,d),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);F.vector_layers&&(z.vectorLayers=F.vector_layers,z.vectorLayerIds=z.vectorLayers.map(function(Y){return Y.id})),z.tiles=v.canonicalizeTileset(z,d.url),g(null,z)}};return d.url?p.getJSON(v.transformRequest(v.normalizeSourceURL(d.url),p.ResourceType.Source),x):p.browser.frame(function(){return x(null,d)})}Wt.prototype.broadcast=function(d,v,g){p.asyncAll(this.actors,function(x,O){x.send(d,v,O)},g=g||function(){})},Wt.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},Wt.prototype.remove=function(){this.actors.forEach(function(d){d.remove()}),this.actors=[],this.workerPool.release(this.id)},Wt.Actor=p.Actor;var pr=function(d,v,g){this.bounds=p.LngLatBounds.convert(this.validateBounds(d)),this.minzoom=v||0,this.maxzoom=g||24};pr.prototype.validateBounds=function(d){return Array.isArray(d)&&d.length===4?[Math.max(-180,d[0]),Math.max(-90,d[1]),Math.min(180,d[2]),Math.min(90,d[3])]:[-180,-90,180,90]},pr.prototype.contains=function(d){var v=Math.pow(2,d.z),g=Math.floor(p.mercatorXfromLng(this.bounds.getWest())*v),x=Math.floor(p.mercatorYfromLat(this.bounds.getNorth())*v),O=Math.ceil(p.mercatorXfromLng(this.bounds.getEast())*v),F=Math.ceil(p.mercatorYfromLat(this.bounds.getSouth())*v);return d.x>=g&&d.x<O&&d.y>=x&&d.y<F};var zr=function(d){function v(g,x,O,F){if(d.call(this),this.id=g,this.dispatcher=O,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,p.extend(this,p.pick(x,["url","scheme","tileSize","promoteId"])),this._options=p.extend({type:"vector"},x),this._collectResourceTiming=x.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(F)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ht(this._options,this.map._requestManager,function(x,O){g._tileJSONRequest=null,g._loaded=!0,x?g.fire(new p.ErrorEvent(x)):O&&(p.extend(g,O),O.bounds&&(g.tileBounds=new pr(O.bounds,g.minzoom,g.maxzoom)),p.postTurnstileEvent(O.tiles,g.map._requestManager._customAccessToken),p.postMapLoadEvent(O.tiles,g.map._getMapId(),g.map._requestManager._skuToken,g.map._requestManager._customAccessToken),g.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})))})},v.prototype.loaded=function(){return this._loaded},v.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setSourceProperty=function(g){this._tileJSONRequest&&this._tileJSONRequest.cancel(),g(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},v.prototype.setTiles=function(g){var x=this;return this.setSourceProperty(function(){x._options.tiles=g}),this},v.prototype.setUrl=function(g){var x=this;return this.setSourceProperty(function(){x.url=g,x._options.url=g}),this},v.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},v.prototype.serialize=function(){return p.extend({},this._options)},v.prototype.loadTile=function(g,x){var O=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme)),F={request:this.map._requestManager.transformRequest(O,p.ResourceType.Tile),uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,tileSize:this.tileSize*g.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:p.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function z(Y,ae){return delete g.request,g.aborted?x(null):Y&&Y.status!==404?x(Y):(ae&&ae.resourceTiming&&(g.resourceTiming=ae.resourceTiming),this.map._refreshExpiredTiles&&ae&&g.setExpiryData(ae),g.loadVectorData(ae,this.map.painter),p.cacheEntryPossiblyAdded(this.dispatcher),x(null),void(g.reloadCallback&&(this.loadTile(g,g.reloadCallback),g.reloadCallback=null)))}F.request.collectResourceTiming=this._collectResourceTiming,g.actor&&g.state!=="expired"?g.state==="loading"?g.reloadCallback=x:g.request=g.actor.send("reloadTile",F,z.bind(this)):(g.actor=this.dispatcher.getActor(),g.request=g.actor.send("loadTile",F,z.bind(this)))},v.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.actor&&g.actor.send("abortTile",{uid:g.uid,type:this.type,source:this.id},void 0)},v.prototype.unloadTile=function(g){g.unloadVectorData(),g.actor&&g.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id},void 0)},v.prototype.hasTransition=function(){return!1},v}(p.Evented),Jt=function(d){function v(g,x,O,F){d.call(this),this.id=g,this.dispatcher=O,this.setEventedParent(F),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=p.extend({type:"raster"},x),p.extend(this,p.pick(x,["url","scheme","tileSize"]))}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Ht(this._options,this.map._requestManager,function(x,O){g._tileJSONRequest=null,g._loaded=!0,x?g.fire(new p.ErrorEvent(x)):O&&(p.extend(g,O),O.bounds&&(g.tileBounds=new pr(O.bounds,g.minzoom,g.maxzoom)),p.postTurnstileEvent(O.tiles),p.postMapLoadEvent(O.tiles,g.map._getMapId(),g.map._requestManager._skuToken),g.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})),g.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})))})},v.prototype.loaded=function(){return this._loaded},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},v.prototype.serialize=function(){return p.extend({},this._options)},v.prototype.hasTile=function(g){return!this.tileBounds||this.tileBounds.contains(g.canonical)},v.prototype.loadTile=function(g,x){var O=this,F=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);g.request=p.getImage(this.map._requestManager.transformRequest(F,p.ResourceType.Tile),function(z,Y){if(delete g.request,g.aborted)g.state="unloaded",x(null);else if(z)g.state="errored",x(z);else if(Y){O.map._refreshExpiredTiles&&g.setExpiryData(Y),delete Y.cacheControl,delete Y.expires;var ae=O.map.painter.context,be=ae.gl;g.texture=O.map.painter.getTileTexture(Y.width),g.texture?g.texture.update(Y,{useMipmap:!0}):(g.texture=new p.Texture(ae,Y,be.RGBA,{useMipmap:!0}),g.texture.bind(be.LINEAR,be.CLAMP_TO_EDGE,be.LINEAR_MIPMAP_NEAREST),ae.extTextureFilterAnisotropic&&be.texParameterf(be.TEXTURE_2D,ae.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ae.extTextureFilterAnisotropicMax)),g.state="loaded",p.cacheEntryPossiblyAdded(O.dispatcher),x(null)}})},v.prototype.abortTile=function(g,x){g.request&&(g.request.cancel(),delete g.request),x()},v.prototype.unloadTile=function(g,x){g.texture&&this.map.painter.saveTileTexture(g.texture),x()},v.prototype.hasTransition=function(){return!1},v}(p.Evented),Qr=function(d){function v(g,x,O,F){d.call(this,g,x,O,F),this.type="raster-dem",this.maxzoom=22,this._options=p.extend({type:"raster-dem"},x),this.encoding=x.encoding||"mapbox"}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},v.prototype.loadTile=function(g,x){var O=this.map._requestManager.normalizeTileURL(g.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function F(z,Y){z&&(g.state="errored",x(z)),Y&&(g.dem=Y,g.needsHillshadePrepare=!0,g.state="loaded",x(null))}g.request=p.getImage(this.map._requestManager.transformRequest(O,p.ResourceType.Tile),function(z,Y){if(delete g.request,g.aborted)g.state="unloaded",x(null);else if(z)g.state="errored",x(z);else if(Y){this.map._refreshExpiredTiles&&g.setExpiryData(Y),delete Y.cacheControl,delete Y.expires;var ae=p.window.ImageBitmap&&Y instanceof p.window.ImageBitmap&&p.offscreenCanvasSupported()?Y:p.browser.getImageData(Y,1),be={uid:g.uid,coord:g.tileID,source:this.id,rawImageData:ae,encoding:this.encoding};g.actor&&g.state!=="expired"||(g.actor=this.dispatcher.getActor(),g.actor.send("loadDEMTile",be,F.bind(this)))}}.bind(this)),g.neighboringTiles=this._getNeighboringTiles(g.tileID)},v.prototype._getNeighboringTiles=function(g){var x=g.canonical,O=Math.pow(2,x.z),F=(x.x-1+O)%O,z=x.x===0?g.wrap-1:g.wrap,Y=(x.x+1+O)%O,ae=x.x+1===O?g.wrap+1:g.wrap,be={};return be[new p.OverscaledTileID(g.overscaledZ,z,x.z,F,x.y).key]={backfilled:!1},be[new p.OverscaledTileID(g.overscaledZ,ae,x.z,Y,x.y).key]={backfilled:!1},x.y>0&&(be[new p.OverscaledTileID(g.overscaledZ,z,x.z,F,x.y-1).key]={backfilled:!1},be[new p.OverscaledTileID(g.overscaledZ,g.wrap,x.z,x.x,x.y-1).key]={backfilled:!1},be[new p.OverscaledTileID(g.overscaledZ,ae,x.z,Y,x.y-1).key]={backfilled:!1}),x.y+1<O&&(be[new p.OverscaledTileID(g.overscaledZ,z,x.z,F,x.y+1).key]={backfilled:!1},be[new p.OverscaledTileID(g.overscaledZ,g.wrap,x.z,x.x,x.y+1).key]={backfilled:!1},be[new p.OverscaledTileID(g.overscaledZ,ae,x.z,Y,x.y+1).key]={backfilled:!1}),be},v.prototype.unloadTile=function(g){g.demTexture&&this.map.painter.saveTileTexture(g.demTexture),g.fbo&&(g.fbo.destroy(),delete g.fbo),g.dem&&delete g.dem,delete g.neighboringTiles,g.state="unloaded",g.actor&&g.actor.send("removeDEMTile",{uid:g.uid,source:this.id})},v}(Jt),Br=function(d){function v(g,x,O,F){d.call(this),this.id=g,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=O.getActor(),this.setEventedParent(F),this._data=x.data,this._options=p.extend({},x),this._collectResourceTiming=x.collectResourceTiming,this._resourceTiming=[],x.maxzoom!==void 0&&(this.maxzoom=x.maxzoom),x.type&&(this.type=x.type),x.attribution&&(this.attribution=x.attribution),this.promoteId=x.promoteId;var z=p.EXTENT/this.tileSize;this.workerOptions=p.extend({source:this.id,cluster:x.cluster||!1,geojsonVtOptions:{buffer:(x.buffer!==void 0?x.buffer:128)*z,tolerance:(x.tolerance!==void 0?x.tolerance:.375)*z,extent:p.EXTENT,maxZoom:this.maxzoom,lineMetrics:x.lineMetrics||!1,generateId:x.generateId||!1},superclusterOptions:{maxZoom:x.clusterMaxZoom!==void 0?Math.min(x.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,x.clusterMinPoints||2),extent:p.EXTENT,radius:(x.clusterRadius||50)*z,log:!1,generateId:x.generateId||!1},clusterProperties:x.clusterProperties,filter:x.filter},x.workerOptions)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(){var g=this;this.fire(new p.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(x){if(x)g.fire(new p.ErrorEvent(x));else{var O={dataType:"source",sourceDataType:"metadata"};g._collectResourceTiming&&g._resourceTiming&&g._resourceTiming.length>0&&(O.resourceTiming=g._resourceTiming,g._resourceTiming=[]),g.fire(new p.Event("data",O))}})},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setData=function(g){var x=this;return this._data=g,this.fire(new p.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(O){if(O)x.fire(new p.ErrorEvent(O));else{var F={dataType:"source",sourceDataType:"content"};x._collectResourceTiming&&x._resourceTiming&&x._resourceTiming.length>0&&(F.resourceTiming=x._resourceTiming,x._resourceTiming=[]),x.fire(new p.Event("data",F))}}),this},v.prototype.getClusterExpansionZoom=function(g,x){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:g,source:this.id},x),this},v.prototype.getClusterChildren=function(g,x){return this.actor.send("geojson.getClusterChildren",{clusterId:g,source:this.id},x),this},v.prototype.getClusterLeaves=function(g,x,O,F){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:g,limit:x,offset:O},F),this},v.prototype._updateWorkerData=function(g){var x=this;this._loaded=!1;var O=p.extend({},this.workerOptions),F=this._data;typeof F=="string"?(O.request=this.map._requestManager.transformRequest(p.browser.resolveURL(F),p.ResourceType.Source),O.request.collectResourceTiming=this._collectResourceTiming):O.data=JSON.stringify(F),this.actor.send(this.type+".loadData",O,function(z,Y){x._removed||Y&&Y.abandoned||(x._loaded=!0,Y&&Y.resourceTiming&&Y.resourceTiming[x.id]&&(x._resourceTiming=Y.resourceTiming[x.id].slice(0)),x.actor.send(x.type+".coalesce",{source:O.source},null),g(z))})},v.prototype.loaded=function(){return this._loaded},v.prototype.loadTile=function(g,x){var O=this,F=g.actor?"reloadTile":"loadTile";g.actor=this.actor,g.request=this.actor.send(F,{type:this.type,uid:g.uid,tileID:g.tileID,zoom:g.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:p.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(z,Y){return delete g.request,g.unloadVectorData(),g.aborted?x(null):z?x(z):(g.loadVectorData(Y,O.map.painter,F==="reloadTile"),x(null))})},v.prototype.abortTile=function(g){g.request&&(g.request.cancel(),delete g.request),g.aborted=!0},v.prototype.unloadTile=function(g){g.unloadVectorData(),this.actor.send("removeTile",{uid:g.uid,type:this.type,source:this.id})},v.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},v.prototype.serialize=function(){return p.extend({},this._options,{type:this.type,data:this._data})},v.prototype.hasTransition=function(){return!1},v}(p.Evented),Rr=p.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),Be=function(d){function v(g,x,O,F){d.call(this),this.id=g,this.dispatcher=O,this.coordinates=x.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(F),this.options=x}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(g,x){var O=this;this._loaded=!1,this.fire(new p.Event("dataloading",{dataType:"source"})),this.url=this.options.url,p.getImage(this.map._requestManager.transformRequest(this.url,p.ResourceType.Image),function(F,z){O._loaded=!0,F?O.fire(new p.ErrorEvent(F)):z&&(O.image=z,g&&(O.coordinates=g),x&&x(),O._finishLoading())})},v.prototype.loaded=function(){return this._loaded},v.prototype.updateImage=function(g){var x=this;return this.image&&g.url?(this.options.url=g.url,this.load(g.coordinates,function(){x.texture=null}),this):this},v.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"metadata"})))},v.prototype.onAdd=function(g){this.map=g,this.load()},v.prototype.setCoordinates=function(g){var x=this;this.coordinates=g;var O=g.map(p.MercatorCoordinate.fromLngLat);this.tileID=function(z){for(var Y=1/0,ae=1/0,be=-1/0,De=-1/0,Me=0,Ne=z;Me<Ne.length;Me+=1){var Ye=Ne[Me];Y=Math.min(Y,Ye.x),ae=Math.min(ae,Ye.y),be=Math.max(be,Ye.x),De=Math.max(De,Ye.y)}var Ze=Math.max(be-Y,De-ae),et=Math.max(0,Math.floor(-Math.log(Ze)/Math.LN2)),Ve=Math.pow(2,et);return new p.CanonicalTileID(et,Math.floor((Y+be)/2*Ve),Math.floor((ae+De)/2*Ve))}(O),this.minzoom=this.maxzoom=this.tileID.z;var F=O.map(function(z){return x.tileID.getTilePoint(z)._round()});return this._boundsArray=new p.StructArrayLayout4i8,this._boundsArray.emplaceBack(F[0].x,F[0].y,0,0),this._boundsArray.emplaceBack(F[1].x,F[1].y,p.EXTENT,0),this._boundsArray.emplaceBack(F[3].x,F[3].y,0,p.EXTENT),this._boundsArray.emplaceBack(F[2].x,F[2].y,p.EXTENT,p.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new p.Event("data",{dataType:"source",sourceDataType:"content"})),this},v.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var g=this.map.painter.context,x=g.gl;for(var O in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,Rr.members)),this.boundsSegments||(this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new p.Texture(g,this.image,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[O];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},v.prototype.loadTile=function(g,x){this.tileID&&this.tileID.equals(g.tileID.canonical)?(this.tiles[String(g.tileID.wrap)]=g,g.buckets={},x(null)):(g.state="errored",x(null))},v.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},v.prototype.hasTransition=function(){return!1},v}(p.Evented),Ge=function(d){function v(g,x,O,F){d.call(this,g,x,O,F),this.roundZoom=!0,this.type="video",this.options=x}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(){var g=this;this._loaded=!1;var x=this.options;this.urls=[];for(var O=0,F=x.urls;O<F.length;O+=1)this.urls.push(this.map._requestManager.transformRequest(F[O],p.ResourceType.Source).url);p.getVideo(this.urls,function(z,Y){g._loaded=!0,z?g.fire(new p.ErrorEvent(z)):Y&&(g.video=Y,g.video.loop=!0,g.video.setAttribute("playsinline",""),g.video.addEventListener("playing",function(){g.map.triggerRepaint()}),g.map&&g.video.play(),g._finishLoading())})},v.prototype.pause=function(){this.video&&this.video.pause()},v.prototype.play=function(){this.video&&this.video.play()},v.prototype.seek=function(g){if(this.video){var x=this.video.seekable;g<x.start(0)||g>x.end(0)?this.fire(new p.ErrorEvent(new p.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+x.start(0)+" and "+x.end(0)+"-second mark."))):this.video.currentTime=g}},v.prototype.getVideo=function(){return this.video},v.prototype.onAdd=function(g){this.map||(this.map=g,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},v.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var g=this.map.painter.context,x=g.gl;for(var O in this.boundsBuffer||(this.boundsBuffer=g.createVertexBuffer(this._boundsArray,Rr.members)),this.boundsSegments||(this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE),x.texSubImage2D(x.TEXTURE_2D,0,0,0,x.RGBA,x.UNSIGNED_BYTE,this.video)):(this.texture=new p.Texture(g,this.video,x.RGBA),this.texture.bind(x.LINEAR,x.CLAMP_TO_EDGE)),this.tiles){var F=this.tiles[O];F.state!=="loaded"&&(F.state="loaded",F.texture=this.texture)}}},v.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},v.prototype.hasTransition=function(){return this.video&&!this.video.paused},v}(Be),vt=function(d){function v(g,x,O,F){d.call(this,g,x,O,F),x.coordinates?Array.isArray(x.coordinates)&&x.coordinates.length===4&&!x.coordinates.some(function(z){return!Array.isArray(z)||z.length!==2||z.some(function(Y){return typeof Y!="number"})})||this.fire(new p.ErrorEvent(new p.ValidationError("sources."+g,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new p.ErrorEvent(new p.ValidationError("sources."+g,null,'missing required property "coordinates"'))),x.animate&&typeof x.animate!="boolean"&&this.fire(new p.ErrorEvent(new p.ValidationError("sources."+g,null,'optional "animate" property must be a boolean value'))),x.canvas?typeof x.canvas=="string"||x.canvas instanceof p.window.HTMLCanvasElement||this.fire(new p.ErrorEvent(new p.ValidationError("sources."+g,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new p.ErrorEvent(new p.ValidationError("sources."+g,null,'missing required property "canvas"'))),this.options=x,this.animate=x.animate===void 0||x.animate}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof p.window.HTMLCanvasElement?this.options.canvas:p.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new p.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},v.prototype.getCanvas=function(){return this.canvas},v.prototype.onAdd=function(g){this.map=g,this.load(),this.canvas&&this.animate&&this.play()},v.prototype.onRemove=function(){this.pause()},v.prototype.prepare=function(){var g=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,g=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,g=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var x=this.map.painter.context,O=x.gl;for(var F in this.boundsBuffer||(this.boundsBuffer=x.createVertexBuffer(this._boundsArray,Rr.members)),this.boundsSegments||(this.boundsSegments=p.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(g||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new p.Texture(x,this.canvas,O.RGBA,{premultiply:!0}),this.tiles){var z=this.tiles[F];z.state!=="loaded"&&(z.state="loaded",z.texture=this.texture)}}},v.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},v.prototype.hasTransition=function(){return this._playing},v.prototype._hasInvalidDimensions=function(){for(var g=0,x=[this.canvas.width,this.canvas.height];g<x.length;g+=1){var O=x[g];if(isNaN(O)||O<=0)return!0}return!1},v}(Be),Kt={vector:zr,raster:Jt,"raster-dem":Qr,geojson:Br,video:Ge,image:Be,canvas:vt};function rt(d,v){var g=p.identity([]);return p.translate(g,g,[1,1,0]),p.scale(g,g,[.5*d.width,.5*d.height,1]),p.multiply(g,g,d.calculatePosMatrix(v.toUnwrapped()))}function Ct(d,v,g,x,O,F){var z=function(et,Ve,tt){if(et)for(var ft=0,xt=et;ft<xt.length;ft+=1){var Bt=Ve[xt[ft]];if(Bt&&Bt.source===tt&&Bt.type==="fill-extrusion")return!0}else for(var Pt in Ve){var Dt=Ve[Pt];if(Dt.source===tt&&Dt.type==="fill-extrusion")return!0}return!1}(O&&O.layers,v,d.id),Y=F.maxPitchScaleFactor(),ae=d.tilesIn(x,Y,z);ae.sort(Tt);for(var be=[],De=0,Me=ae;De<Me.length;De+=1){var Ne=Me[De];be.push({wrappedTileID:Ne.tileID.wrapped().key,queryResults:Ne.tile.queryRenderedFeatures(v,g,d._state,Ne.queryGeometry,Ne.cameraQueryGeometry,Ne.scale,O,F,Y,rt(d.transform,Ne.tileID))})}var Ye=function(et){for(var Ve={},tt={},ft=0,xt=et;ft<xt.length;ft+=1){var Bt=xt[ft],Pt=Bt.queryResults,Dt=Bt.wrappedTileID,Yt=tt[Dt]=tt[Dt]||{};for(var hr in Pt)for(var or=Pt[hr],Er=Yt[hr]=Yt[hr]||{},Wr=Ve[hr]=Ve[hr]||[],Vr=0,Mr=or;Vr<Mr.length;Vr+=1){var vn=Mr[Vr];Er[vn.featureIndex]||(Er[vn.featureIndex]=!0,Wr.push(vn))}}return Ve}(be);for(var Ze in Ye)Ye[Ze].forEach(function(et){var Ve=et.feature,tt=d.getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=tt});return Ye}function Tt(d,v){var g=d.tileID,x=v.tileID;return g.overscaledZ-x.overscaledZ||g.canonical.y-x.canonical.y||g.wrap-x.wrap||g.canonical.x-x.canonical.x}var ar=function(d,v){this.max=d,this.onRemove=v,this.reset()};ar.prototype.reset=function(){for(var d in this.data)for(var v=0,g=this.data[d];v<g.length;v+=1){var x=g[v];x.timeout&&clearTimeout(x.timeout),this.onRemove(x.value)}return this.data={},this.order=[],this},ar.prototype.add=function(d,v,g){var x=this,O=d.wrapped().key;this.data[O]===void 0&&(this.data[O]=[]);var F={value:v,timeout:void 0};if(g!==void 0&&(F.timeout=setTimeout(function(){x.remove(d,F)},g)),this.data[O].push(F),this.order.push(O),this.order.length>this.max){var z=this._getAndRemoveByKey(this.order[0]);z&&this.onRemove(z)}return this},ar.prototype.has=function(d){return d.wrapped().key in this.data},ar.prototype.getAndRemove=function(d){return this.has(d)?this._getAndRemoveByKey(d.wrapped().key):null},ar.prototype._getAndRemoveByKey=function(d){var v=this.data[d].shift();return v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.order.splice(this.order.indexOf(d),1),v.value},ar.prototype.getByKey=function(d){var v=this.data[d];return v?v[0].value:null},ar.prototype.get=function(d){return this.has(d)?this.data[d.wrapped().key][0].value:null},ar.prototype.remove=function(d,v){if(!this.has(d))return this;var g=d.wrapped().key,x=v===void 0?0:this.data[g].indexOf(v),O=this.data[g][x];return this.data[g].splice(x,1),O.timeout&&clearTimeout(O.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(O.value),this.order.splice(this.order.indexOf(g),1),this},ar.prototype.setMaxSize=function(d){for(this.max=d;this.order.length>this.max;){var v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this},ar.prototype.filter=function(d){var v=[];for(var g in this.data)for(var x=0,O=this.data[g];x<O.length;x+=1){var F=O[x];d(F.value)||v.push(F)}for(var z=0,Y=v;z<Y.length;z+=1){var ae=Y[z];this.remove(ae.value.tileID,ae)}};var er=function(d,v,g){this.context=d;var x=d.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),d.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer};er.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},er.prototype.updateData=function(d){var v=this.context.gl;this.context.unbindVAO(),this.bind(),v.bufferSubData(v.ELEMENT_ARRAY_BUFFER,0,d.arrayBuffer)},er.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ir={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},sr=function(d,v,g,x){this.length=v.length,this.attributes=g,this.itemSize=v.bytesPerElement,this.dynamicDraw=x,this.context=d;var O=d.gl;this.buffer=O.createBuffer(),d.bindVertexBuffer.set(this.buffer),O.bufferData(O.ARRAY_BUFFER,v.arrayBuffer,this.dynamicDraw?O.DYNAMIC_DRAW:O.STATIC_DRAW),this.dynamicDraw||delete v.arrayBuffer};sr.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},sr.prototype.updateData=function(d){var v=this.context.gl;this.bind(),v.bufferSubData(v.ARRAY_BUFFER,0,d.arrayBuffer)},sr.prototype.enableAttributes=function(d,v){for(var g=0;g<this.attributes.length;g++){var x=v.attributes[this.attributes[g].name];x!==void 0&&d.enableVertexAttribArray(x)}},sr.prototype.setVertexAttribPointers=function(d,v,g){for(var x=0;x<this.attributes.length;x++){var O=this.attributes[x],F=v.attributes[O.name];F!==void 0&&d.vertexAttribPointer(F,O.components,d[ir[O.type]],!1,this.itemSize,O.offset+this.itemSize*(g||0))}},sr.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var He=function(d){this.gl=d.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};He.prototype.get=function(){return this.current},He.prototype.set=function(d){},He.prototype.getDefault=function(){return this.default},He.prototype.setDefault=function(){this.set(this.default)};var Xe=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return p.Color.transparent},v.prototype.set=function(g){var x=this.current;(g.r!==x.r||g.g!==x.g||g.b!==x.b||g.a!==x.a||this.dirty)&&(this.gl.clearColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},v}(He),Rt=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return 1},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearDepth(g),this.current=g,this.dirty=!1)},v}(He),xr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return 0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.clearStencil(g),this.current=g,this.dirty=!1)},v}(He),Yn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return[!0,!0,!0,!0]},v.prototype.set=function(g){var x=this.current;(g[0]!==x[0]||g[1]!==x[1]||g[2]!==x[2]||g[3]!==x[3]||this.dirty)&&(this.gl.colorMask(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},v}(He),kn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthMask(g),this.current=g,this.dirty=!1)},v}(He),Cn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return 255},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.stencilMask(g),this.current=g,this.dirty=!1)},v}(He),wt=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},v.prototype.set=function(g){var x=this.current;(g.func!==x.func||g.ref!==x.ref||g.mask!==x.mask||this.dirty)&&(this.gl.stencilFunc(g.func,g.ref,g.mask),this.current=g,this.dirty=!1)},v}(He),Ot=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[g.KEEP,g.KEEP,g.KEEP]},v.prototype.set=function(g){var x=this.current;(g[0]!==x[0]||g[1]!==x[1]||g[2]!==x[2]||this.dirty)&&(this.gl.stencilOp(g[0],g[1],g[2]),this.current=g,this.dirty=!1)},v}(He),wr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;g?x.enable(x.STENCIL_TEST):x.disable(x.STENCIL_TEST),this.current=g,this.dirty=!1}},v}(He),tr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return[0,1]},v.prototype.set=function(g){var x=this.current;(g[0]!==x[0]||g[1]!==x[1]||this.dirty)&&(this.gl.depthRange(g[0],g[1]),this.current=g,this.dirty=!1)},v}(He),on=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;g?x.enable(x.DEPTH_TEST):x.disable(x.DEPTH_TEST),this.current=g,this.dirty=!1}},v}(He),pn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.LESS},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.depthFunc(g),this.current=g,this.dirty=!1)},v}(He),tn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;g?x.enable(x.BLEND):x.disable(x.BLEND),this.current=g,this.dirty=!1}},v}(He),Rn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[g.ONE,g.ZERO]},v.prototype.set=function(g){var x=this.current;(g[0]!==x[0]||g[1]!==x[1]||this.dirty)&&(this.gl.blendFunc(g[0],g[1]),this.current=g,this.dirty=!1)},v}(He),Si=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return p.Color.transparent},v.prototype.set=function(g){var x=this.current;(g.r!==x.r||g.g!==x.g||g.b!==x.b||g.a!==x.a||this.dirty)&&(this.gl.blendColor(g.r,g.g,g.b,g.a),this.current=g,this.dirty=!1)},v}(He),Ei=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.FUNC_ADD},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.blendEquation(g),this.current=g,this.dirty=!1)},v}(He),qe=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;g?x.enable(x.CULL_FACE):x.disable(x.CULL_FACE),this.current=g,this.dirty=!1}},v}(He),ze=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.BACK},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.cullFace(g),this.current=g,this.dirty=!1)},v}(He),mt=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.CCW},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.frontFace(g),this.current=g,this.dirty=!1)},v}(He),Ft=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.useProgram(g),this.current=g,this.dirty=!1)},v}(He),fr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return this.gl.TEXTURE0},v.prototype.set=function(g){(g!==this.current||this.dirty)&&(this.gl.activeTexture(g),this.current=g,this.dirty=!1)},v}(He),yr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){var g=this.gl;return[0,0,g.drawingBufferWidth,g.drawingBufferHeight]},v.prototype.set=function(g){var x=this.current;(g[0]!==x[0]||g[1]!==x[1]||g[2]!==x[2]||g[3]!==x[3]||this.dirty)&&(this.gl.viewport(g[0],g[1],g[2],g[3]),this.current=g,this.dirty=!1)},v}(He),an=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.bindFramebuffer(x.FRAMEBUFFER,g),this.current=g,this.dirty=!1}},v}(He),Or=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.bindRenderbuffer(x.RENDERBUFFER,g),this.current=g,this.dirty=!1}},v}(He),bn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.bindTexture(x.TEXTURE_2D,g),this.current=g,this.dirty=!1}},v}(He),Pr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.bindBuffer(x.ARRAY_BUFFER,g),this.current=g,this.dirty=!1}},v}(He),Yr=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){var x=this.gl;x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,g),this.current=g,this.dirty=!1},v}(He),Sn=function(d){function v(g){d.call(this,g),this.vao=g.extVertexArrayObject}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v.prototype.set=function(g){this.vao&&(g!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(g),this.current=g,this.dirty=!1)},v}(He),ii=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return 4},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_ALIGNMENT,g),this.current=g,this.dirty=!1}},v}(He),Xn=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,g),this.current=g,this.dirty=!1}},v}(He),ha=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return!1},v.prototype.set=function(g){if(g!==this.current||this.dirty){var x=this.gl;x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,g),this.current=g,this.dirty=!1}},v}(He),xn=function(d){function v(g,x){d.call(this,g),this.context=g,this.parent=x}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getDefault=function(){return null},v}(He),pe=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.setDirty=function(){this.dirty=!0},v.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var x=this.gl;x.framebufferTexture2D(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,g,0),this.current=g,this.dirty=!1}},v}(xn),Ee=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.set=function(g){if(g!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var x=this.gl;x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,g),this.current=g,this.dirty=!1}},v}(xn),ke=function(d,v,g,x){this.context=d,this.width=v,this.height=g;var O=this.framebuffer=d.gl.createFramebuffer();this.colorAttachment=new pe(d,O),x&&(this.depthAttachment=new Ee(d,O))};ke.prototype.destroy=function(){var d=this.context.gl,v=this.colorAttachment.get();if(v&&d.deleteTexture(v),this.depthAttachment){var g=this.depthAttachment.get();g&&d.deleteRenderbuffer(g)}d.deleteFramebuffer(this.framebuffer)};var oe=function(d,v,g){this.func=d,this.mask=v,this.range=g};oe.ReadOnly=!1,oe.ReadWrite=!0,oe.disabled=new oe(519,oe.ReadOnly,[0,1]);var Fe=function(d,v,g,x,O,F){this.test=d,this.ref=v,this.mask=g,this.fail=x,this.depthFail=O,this.pass=F};Fe.disabled=new Fe({func:519,mask:0},0,0,7680,7680,7680);var Pe=function(d,v,g){this.blendFunction=d,this.blendColor=v,this.mask=g};Pe.disabled=new Pe(Pe.Replace=[1,0],p.Color.transparent,[!1,!1,!1,!1]),Pe.unblended=new Pe(Pe.Replace,p.Color.transparent,[!0,!0,!0,!0]),Pe.alphaBlended=new Pe([1,771],p.Color.transparent,[!0,!0,!0,!0]);var _e=function(d,v,g){this.enable=d,this.mode=v,this.frontFace=g};_e.disabled=new _e(!1,1029,2305),_e.backCCW=new _e(!0,1029,2305);var fe=function(d){this.gl=d,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Xe(this),this.clearDepth=new Rt(this),this.clearStencil=new xr(this),this.colorMask=new Yn(this),this.depthMask=new kn(this),this.stencilMask=new Cn(this),this.stencilFunc=new wt(this),this.stencilOp=new Ot(this),this.stencilTest=new wr(this),this.depthRange=new tr(this),this.depthTest=new on(this),this.depthFunc=new pn(this),this.blend=new tn(this),this.blendFunc=new Rn(this),this.blendColor=new Si(this),this.blendEquation=new Ei(this),this.cullFace=new qe(this),this.cullFaceSide=new ze(this),this.frontFace=new mt(this),this.program=new Ft(this),this.activeTexture=new fr(this),this.viewport=new yr(this),this.bindFramebuffer=new an(this),this.bindRenderbuffer=new Or(this),this.bindTexture=new bn(this),this.bindVertexBuffer=new Pr(this),this.bindElementBuffer=new Yr(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Sn(this),this.pixelStoreUnpack=new ii(this),this.pixelStoreUnpackPremultiplyAlpha=new Xn(this),this.pixelStoreUnpackFlipY=new ha(this),this.extTextureFilterAnisotropic=d.getExtension("EXT_texture_filter_anisotropic")||d.getExtension("MOZ_EXT_texture_filter_anisotropic")||d.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=d.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=d.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(d.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=d.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=d.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=d.getParameter(d.MAX_TEXTURE_SIZE)};fe.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},fe.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},fe.prototype.createIndexBuffer=function(d,v){return new er(this,d,v)},fe.prototype.createVertexBuffer=function(d,v,g){return new sr(this,d,v,g)},fe.prototype.createRenderbuffer=function(d,v,g){var x=this.gl,O=x.createRenderbuffer();return this.bindRenderbuffer.set(O),x.renderbufferStorage(x.RENDERBUFFER,d,v,g),this.bindRenderbuffer.set(null),O},fe.prototype.createFramebuffer=function(d,v,g){return new ke(this,d,v,g)},fe.prototype.clear=function(d){var v=d.color,g=d.depth,x=this.gl,O=0;v&&(O|=x.COLOR_BUFFER_BIT,this.clearColor.set(v),this.colorMask.set([!0,!0,!0,!0])),g!==void 0&&(O|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(g),this.depthMask.set(!0)),x.clear(O)},fe.prototype.setCullFace=function(d){d.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(d.mode),this.frontFace.set(d.frontFace))},fe.prototype.setDepthMode=function(d){d.func!==this.gl.ALWAYS||d.mask?(this.depthTest.set(!0),this.depthFunc.set(d.func),this.depthMask.set(d.mask),this.depthRange.set(d.range)):this.depthTest.set(!1)},fe.prototype.setStencilMode=function(d){d.test.func!==this.gl.ALWAYS||d.mask?(this.stencilTest.set(!0),this.stencilMask.set(d.mask),this.stencilOp.set([d.fail,d.depthFail,d.pass]),this.stencilFunc.set({func:d.test.func,ref:d.ref,mask:d.test.mask})):this.stencilTest.set(!1)},fe.prototype.setColorMode=function(d){p.deepEqual(d.blendFunction,Pe.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(d.blendFunction),this.blendColor.set(d.blendColor)),this.colorMask.set(d.mask)},fe.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ie=function(d){function v(g,x,O){var F=this;d.call(this),this.id=g,this.dispatcher=O,this.on("data",function(z){z.dataType==="source"&&z.sourceDataType==="metadata"&&(F._sourceLoaded=!0),F._sourceLoaded&&!F._paused&&z.dataType==="source"&&z.sourceDataType==="content"&&(F.reload(),F.transform&&F.update(F.transform))}),this.on("error",function(){F._sourceErrored=!0}),this._source=function(z,Y,ae,be){var De=new Kt[Y.type](z,Y,ae,be);if(De.id!==z)throw new Error("Expected Source id to be "+z+" instead of "+De.id);return p.bindAll(["load","abort","unload","serialize","prepare"],De),De}(g,x,O,this),this._tiles={},this._cache=new ar(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new p.SourceFeatureState}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.onAdd=function(g){this.map=g,this._maxTileCacheSize=g?g._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(g)},v.prototype.onRemove=function(g){this._source&&this._source.onRemove&&this._source.onRemove(g)},v.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var g in this._tiles){var x=this._tiles[g];if(x.state!=="loaded"&&x.state!=="errored")return!1}return!0},v.prototype.getSource=function(){return this._source},v.prototype.pause=function(){this._paused=!0},v.prototype.resume=function(){if(this._paused){var g=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,g&&this.reload(),this.transform&&this.update(this.transform)}},v.prototype._loadTile=function(g,x){return this._source.loadTile(g,x)},v.prototype._unloadTile=function(g){if(this._source.unloadTile)return this._source.unloadTile(g,function(){})},v.prototype._abortTile=function(g){if(this._source.abortTile)return this._source.abortTile(g,function(){})},v.prototype.serialize=function(){return this._source.serialize()},v.prototype.prepare=function(g){for(var x in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var O=this._tiles[x];O.upload(g),O.prepare(this.map.style.imageManager)}},v.prototype.getIds=function(){return p.values(this._tiles).map(function(g){return g.tileID}).sort(nt).map(function(g){return g.key})},v.prototype.getRenderableIds=function(g){var x=this,O=[];for(var F in this._tiles)this._isIdRenderable(F,g)&&O.push(this._tiles[F]);return g?O.sort(function(z,Y){var ae=z.tileID,be=Y.tileID,De=new p.Point(ae.canonical.x,ae.canonical.y)._rotate(x.transform.angle),Me=new p.Point(be.canonical.x,be.canonical.y)._rotate(x.transform.angle);return ae.overscaledZ-be.overscaledZ||Me.y-De.y||Me.x-De.x}).map(function(z){return z.tileID.key}):O.map(function(z){return z.tileID}).sort(nt).map(function(z){return z.key})},v.prototype.hasRenderableParent=function(g){var x=this.findLoadedParent(g,0);return!!x&&this._isIdRenderable(x.tileID.key)},v.prototype._isIdRenderable=function(g,x){return this._tiles[g]&&this._tiles[g].hasData()&&!this._coveredTiles[g]&&(x||!this._tiles[g].holdingForFade())},v.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var g in this._cache.reset(),this._tiles)this._tiles[g].state!=="errored"&&this._reloadTile(g,"reloading")},v.prototype._reloadTile=function(g,x){var O=this._tiles[g];O&&(O.state!=="loading"&&(O.state=x),this._loadTile(O,this._tileLoaded.bind(this,O,g,x)))},v.prototype._tileLoaded=function(g,x,O,F){if(F)return g.state="errored",void(F.status!==404?this._source.fire(new p.ErrorEvent(F,{tile:g})):this.update(this.transform));g.timeAdded=p.browser.now(),O==="expired"&&(g.refreshedUponExpiration=!0),this._setTileReloadTimer(x,g),this.getSource().type==="raster-dem"&&g.dem&&this._backfillDEM(g),this._state.initializeTileState(g,this.map?this.map.painter:null),this._source.fire(new p.Event("data",{dataType:"source",tile:g,coord:g.tileID}))},v.prototype._backfillDEM=function(g){for(var x=this.getRenderableIds(),O=0;O<x.length;O++){var F=x[O];if(g.neighboringTiles&&g.neighboringTiles[F]){var z=this.getTileByID(F);Y(g,z),Y(z,g)}}function Y(ae,be){ae.needsHillshadePrepare=!0;var De=be.tileID.canonical.x-ae.tileID.canonical.x,Me=be.tileID.canonical.y-ae.tileID.canonical.y,Ne=Math.pow(2,ae.tileID.canonical.z),Ye=be.tileID.key;De===0&&Me===0||Math.abs(Me)>1||(Math.abs(De)>1&&(Math.abs(De+Ne)===1?De+=Ne:Math.abs(De-Ne)===1&&(De-=Ne)),be.dem&&ae.dem&&(ae.dem.backfillBorder(be.dem,De,Me),ae.neighboringTiles&&ae.neighboringTiles[Ye]&&(ae.neighboringTiles[Ye].backfilled=!0)))}},v.prototype.getTile=function(g){return this.getTileByID(g.key)},v.prototype.getTileByID=function(g){return this._tiles[g]},v.prototype._retainLoadedChildren=function(g,x,O,F){for(var z in this._tiles){var Y=this._tiles[z];if(!(F[z]||!Y.hasData()||Y.tileID.overscaledZ<=x||Y.tileID.overscaledZ>O)){for(var ae=Y.tileID;Y&&Y.tileID.overscaledZ>x+1;){var be=Y.tileID.scaledTo(Y.tileID.overscaledZ-1);(Y=this._tiles[be.key])&&Y.hasData()&&(ae=be)}for(var De=ae;De.overscaledZ>x;)if(g[(De=De.scaledTo(De.overscaledZ-1)).key]){F[ae.key]=ae;break}}}},v.prototype.findLoadedParent=function(g,x){if(g.key in this._loadedParentTiles){var O=this._loadedParentTiles[g.key];return O&&O.tileID.overscaledZ>=x?O:null}for(var F=g.overscaledZ-1;F>=x;F--){var z=g.scaledTo(F),Y=this._getLoadedTile(z);if(Y)return Y}},v.prototype._getLoadedTile=function(g){var x=this._tiles[g.key];return x&&x.hasData()?x:this._cache.getByKey(g.wrapped().key)},v.prototype.updateCacheSize=function(g){var x=Math.ceil(g.width/this._source.tileSize)+1,O=Math.ceil(g.height/this._source.tileSize)+1,F=Math.floor(x*O*5),z=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(z)},v.prototype.handleWrapJump=function(g){var x=Math.round((g-(this._prevLng===void 0?g:this._prevLng))/360);if(this._prevLng=g,x){var O={};for(var F in this._tiles){var z=this._tiles[F];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+x),O[z.tileID.key]=z}for(var Y in this._tiles=O,this._timers)clearTimeout(this._timers[Y]),delete this._timers[Y];for(var ae in this._tiles)this._setTileReloadTimer(ae,this._tiles[ae])}},v.prototype.update=function(g){var x=this;if(this.transform=g,this._sourceLoaded&&!this._paused){var O;this.updateCacheSize(g),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?O=g.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Yt){return new p.OverscaledTileID(Yt.canonical.z,Yt.wrap,Yt.canonical.z,Yt.canonical.x,Yt.canonical.y)}):(O=g.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(O=O.filter(function(Yt){return x._source.hasTile(Yt)}))):O=[];var F=g.coveringZoomLevel(this._source),z=Math.max(F-v.maxOverzooming,this._source.minzoom),Y=Math.max(F+v.maxUnderzooming,this._source.minzoom),ae=this._updateRetainedTiles(O,F);if(zt(this._source.type)){for(var be={},De={},Me=0,Ne=Object.keys(ae);Me<Ne.length;Me+=1){var Ye=Ne[Me],Ze=ae[Ye],et=this._tiles[Ye];if(et&&!(et.fadeEndTime&&et.fadeEndTime<=p.browser.now())){var Ve=this.findLoadedParent(Ze,z);Ve&&(this._addTile(Ve.tileID),be[Ve.tileID.key]=Ve.tileID),De[Ye]=Ze}}for(var tt in this._retainLoadedChildren(De,F,Y,ae),be)ae[tt]||(this._coveredTiles[tt]=!0,ae[tt]=be[tt])}for(var ft in ae)this._tiles[ft].clearFadeHold();for(var xt=0,Bt=p.keysDifference(this._tiles,ae);xt<Bt.length;xt+=1){var Pt=Bt[xt],Dt=this._tiles[Pt];Dt.hasSymbolBuckets&&!Dt.holdingForFade()?Dt.setHoldDuration(this.map._fadeDuration):Dt.hasSymbolBuckets&&!Dt.symbolFadeFinished()||this._removeTile(Pt)}this._updateLoadedParentTileCache()}},v.prototype.releaseSymbolFadeTiles=function(){for(var g in this._tiles)this._tiles[g].holdingForFade()&&this._removeTile(g)},v.prototype._updateRetainedTiles=function(g,x){for(var O={},F={},z=Math.max(x-v.maxOverzooming,this._source.minzoom),Y=Math.max(x+v.maxUnderzooming,this._source.minzoom),ae={},be=0,De=g;be<De.length;be+=1){var Me=De[be],Ne=this._addTile(Me);O[Me.key]=Me,Ne.hasData()||x<this._source.maxzoom&&(ae[Me.key]=Me)}this._retainLoadedChildren(ae,x,Y,O);for(var Ye=0,Ze=g;Ye<Ze.length;Ye+=1){var et=Ze[Ye],Ve=this._tiles[et.key];if(!Ve.hasData()){if(x+1>this._source.maxzoom){var tt=et.children(this._source.maxzoom)[0],ft=this.getTile(tt);if(ft&&ft.hasData()){O[tt.key]=tt;continue}}else{var xt=et.children(this._source.maxzoom);if(O[xt[0].key]&&O[xt[1].key]&&O[xt[2].key]&&O[xt[3].key])continue}for(var Bt=Ve.wasRequested(),Pt=et.overscaledZ-1;Pt>=z;--Pt){var Dt=et.scaledTo(Pt);if(F[Dt.key]||(F[Dt.key]=!0,!(Ve=this.getTile(Dt))&&Bt&&(Ve=this._addTile(Dt)),Ve&&(O[Dt.key]=Dt,Bt=Ve.wasRequested(),Ve.hasData())))break}}}return O},v.prototype._updateLoadedParentTileCache=function(){for(var g in this._loadedParentTiles={},this._tiles){for(var x=[],O=void 0,F=this._tiles[g].tileID;F.overscaledZ>0;){if(F.key in this._loadedParentTiles){O=this._loadedParentTiles[F.key];break}x.push(F.key);var z=F.scaledTo(F.overscaledZ-1);if(O=this._getLoadedTile(z))break;F=z}for(var Y=0,ae=x;Y<ae.length;Y+=1)this._loadedParentTiles[ae[Y]]=O}},v.prototype._addTile=function(g){var x=this._tiles[g.key];if(x)return x;(x=this._cache.getAndRemove(g))&&(this._setTileReloadTimer(g.key,x),x.tileID=g,this._state.initializeTileState(x,this.map?this.map.painter:null),this._cacheTimers[g.key]&&(clearTimeout(this._cacheTimers[g.key]),delete this._cacheTimers[g.key],this._setTileReloadTimer(g.key,x)));var O=!!x;return O||(x=new p.Tile(g,this._source.tileSize*g.overscaleFactor()),this._loadTile(x,this._tileLoaded.bind(this,x,g.key,x.state))),x?(x.uses++,this._tiles[g.key]=x,O||this._source.fire(new p.Event("dataloading",{tile:x,coord:x.tileID,dataType:"source"})),x):null},v.prototype._setTileReloadTimer=function(g,x){var O=this;g in this._timers&&(clearTimeout(this._timers[g]),delete this._timers[g]);var F=x.getExpiryTimeout();F&&(this._timers[g]=setTimeout(function(){O._reloadTile(g,"expired"),delete O._timers[g]},F))},v.prototype._removeTile=function(g){var x=this._tiles[g];x&&(x.uses--,delete this._tiles[g],this._timers[g]&&(clearTimeout(this._timers[g]),delete this._timers[g]),x.uses>0||(x.hasData()&&x.state!=="reloading"?this._cache.add(x.tileID,x,x.getExpiryTimeout()):(x.aborted=!0,this._abortTile(x),this._unloadTile(x))))},v.prototype.clearTiles=function(){for(var g in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(g);this._cache.reset()},v.prototype.tilesIn=function(g,x,O){var F=this,z=[],Y=this.transform;if(!Y)return z;for(var ae=O?Y.getCameraQueryGeometry(g):g,be=g.map(function(Pt){return Y.pointCoordinate(Pt)}),De=ae.map(function(Pt){return Y.pointCoordinate(Pt)}),Me=this.getIds(),Ne=1/0,Ye=1/0,Ze=-1/0,et=-1/0,Ve=0,tt=De;Ve<tt.length;Ve+=1){var ft=tt[Ve];Ne=Math.min(Ne,ft.x),Ye=Math.min(Ye,ft.y),Ze=Math.max(Ze,ft.x),et=Math.max(et,ft.y)}for(var xt=function(Pt){var Dt=F._tiles[Me[Pt]];if(!Dt.holdingForFade()){var Yt=Dt.tileID,hr=Math.pow(2,Y.zoom-Dt.tileID.overscaledZ),or=x*Dt.queryPadding*p.EXTENT/Dt.tileSize/hr,Er=[Yt.getTilePoint(new p.MercatorCoordinate(Ne,Ye)),Yt.getTilePoint(new p.MercatorCoordinate(Ze,et))];if(Er[0].x-or<p.EXTENT&&Er[0].y-or<p.EXTENT&&Er[1].x+or>=0&&Er[1].y+or>=0){var Wr=be.map(function(Mr){return Yt.getTilePoint(Mr)}),Vr=De.map(function(Mr){return Yt.getTilePoint(Mr)});z.push({tile:Dt,tileID:Yt,queryGeometry:Wr,cameraQueryGeometry:Vr,scale:hr})}}},Bt=0;Bt<Me.length;Bt++)xt(Bt);return z},v.prototype.getVisibleCoordinates=function(g){for(var x=this,O=this.getRenderableIds(g).map(function(ae){return x._tiles[ae].tileID}),F=0,z=O;F<z.length;F+=1){var Y=z[F];Y.posMatrix=this.transform.calculatePosMatrix(Y.toUnwrapped())}return O},v.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(zt(this._source.type))for(var g in this._tiles){var x=this._tiles[g];if(x.fadeEndTime!==void 0&&x.fadeEndTime>=p.browser.now())return!0}return!1},v.prototype.setFeatureState=function(g,x,O){this._state.updateState(g=g||"_geojsonTileLayer",x,O)},v.prototype.removeFeatureState=function(g,x,O){this._state.removeFeatureState(g=g||"_geojsonTileLayer",x,O)},v.prototype.getFeatureState=function(g,x){return this._state.getState(g=g||"_geojsonTileLayer",x)},v.prototype.setDependencies=function(g,x,O){var F=this._tiles[g];F&&F.setDependencies(x,O)},v.prototype.reloadTilesForDependencies=function(g,x){for(var O in this._tiles)this._tiles[O].hasDependency(g,x)&&this._reloadTile(O,"reloading");this._cache.filter(function(F){return!F.hasDependency(g,x)})},v}(p.Evented);function nt(d,v){var g=Math.abs(2*d.wrap)-+(d.wrap<0),x=Math.abs(2*v.wrap)-+(v.wrap<0);return d.overscaledZ-v.overscaledZ||x-g||v.canonical.y-d.canonical.y||v.canonical.x-d.canonical.x}function zt(d){return d==="raster"||d==="image"||d==="video"}function Vt(){return new p.window.Worker(fh.workerUrl)}Ie.maxOverzooming=10,Ie.maxUnderzooming=3;var pt="mapboxgl_preloaded_worker_pool",_t=function(){this.active={}};_t.prototype.acquire=function(d){if(!this.workers)for(this.workers=[];this.workers.length<_t.workerCount;)this.workers.push(new Vt);return this.active[d]=!0,this.workers.slice()},_t.prototype.release=function(d){delete this.active[d],this.numActive()===0&&(this.workers.forEach(function(v){v.terminate()}),this.workers=null)},_t.prototype.isPreloaded=function(){return!!this.active[pt]},_t.prototype.numActive=function(){return Object.keys(this.active).length};var _r,dr=Math.floor(p.browser.hardwareConcurrency/2);function Mt(){return _r||(_r=new _t),_r}function ce(d,v){var g={};for(var x in d)x!=="ref"&&(g[x]=d[x]);return p.refProperties.forEach(function(O){O in v&&(g[O]=v[O])}),g}function Re(d){d=d.slice();for(var v=Object.create(null),g=0;g<d.length;g++)v[d[g].id]=d[g];for(var x=0;x<d.length;x++)"ref"in d[x]&&(d[x]=ce(d[x],v[d[x].ref]));return d}_t.workerCount=Math.max(Math.min(dr,6),1);var ct={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function jt(d,v,g){g.push({command:ct.addSource,args:[d,v[d]]})}function it(d,v,g){v.push({command:ct.removeSource,args:[d]}),g[d]=!0}function Qt(d,v,g,x){it(d,g,x),jt(d,v,g)}function rn(d,v,g){var x;for(x in d[g])if(d[g].hasOwnProperty(x)&&x!=="data"&&!p.deepEqual(d[g][x],v[g][x]))return!1;for(x in v[g])if(v[g].hasOwnProperty(x)&&x!=="data"&&!p.deepEqual(d[g][x],v[g][x]))return!1;return!0}function un(d,v,g,x,O,F){var z;for(z in v=v||{},d=d||{})d.hasOwnProperty(z)&&(p.deepEqual(d[z],v[z])||g.push({command:F,args:[x,z,v[z],O]}));for(z in v)v.hasOwnProperty(z)&&!d.hasOwnProperty(z)&&(p.deepEqual(d[z],v[z])||g.push({command:F,args:[x,z,v[z],O]}))}function En(d){return d.id}function Mn(d,v){return d[v.id]=v,d}var Va=function(d,v){this.reset(d,v)};Va.prototype.reset=function(d,v){this.points=d||[],this._distances=[0];for(var g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(v||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Va.prototype.lerp=function(d){if(this.points.length===1)return this.points[0];d=p.clamp(d,0,1);for(var v=1,g=this._distances[v],x=d*this.paddedLength+this.padding;g<x&&v<this._distances.length;)g=this._distances[++v];var O=v-1,F=this._distances[O],z=g-F,Y=z>0?(x-F)/z:0;return this.points[O].mult(1-Y).add(this.points[v].mult(Y))};var Nr=function(d,v,g){var x=this.boxCells=[],O=this.circleCells=[];this.xCellCount=Math.ceil(d/g),this.yCellCount=Math.ceil(v/g);for(var F=0;F<this.xCellCount*this.yCellCount;F++)x.push([]),O.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=d,this.height=v,this.xScale=this.xCellCount/d,this.yScale=this.yCellCount/v,this.boxUid=0,this.circleUid=0};function ko(d,v,g,x,O){var F=p.create();return v?(p.scale(F,F,[1/O,1/O,1]),g||p.rotateZ(F,F,x.angle)):p.multiply(F,x.labelPlaneMatrix,d),F}function yi(d,v,g,x,O){if(v){var F=p.clone(d);return p.scale(F,F,[O,O,1]),g||p.rotateZ(F,F,-x.angle),F}return x.glCoordMatrix}function Fn(d,v){var g=[d.x,d.y,0,1];ta(g,g,v);var x=g[3];return{point:new p.Point(g[0]/x,g[1]/x),signedDistanceFromCamera:x}}function Vn(d,v){return .5+d/v*.5}function is(d,v){var g=d[0]/d[3],x=d[1]/d[3];return g>=-v[0]&&g<=v[0]&&x>=-v[1]&&x<=v[1]}function xc(d,v,g,x,O,F,z,Y){var ae=x?d.textSizeData:d.iconSizeData,be=p.evaluateSizeForZoom(ae,g.transform.zoom),De=[256/g.width*2+1,256/g.height*2+1],Me=x?d.text.dynamicLayoutVertexArray:d.icon.dynamicLayoutVertexArray;Me.clear();for(var Ne=d.lineVertexArray,Ye=x?d.text.placedSymbolArray:d.icon.placedSymbolArray,Ze=g.transform.width/g.transform.height,et=!1,Ve=0;Ve<Ye.length;Ve++){var tt=Ye.get(Ve);if(tt.hidden||tt.writingMode===p.WritingMode.vertical&&!et)Ha(tt.numGlyphs,Me);else{et=!1;var ft=[tt.anchorX,tt.anchorY,0,1];if(p.transformMat4(ft,ft,v),is(ft,De)){var xt=Vn(g.transform.cameraToCenterDistance,ft[3]),Bt=p.evaluateSizeForFeature(ae,be,tt),Pt=z?Bt/xt:Bt*xt,Dt=new p.Point(tt.anchorX,tt.anchorY),Yt=Fn(Dt,O).point,hr={},or=Qh(tt,Pt,!1,Y,v,O,F,d.glyphOffsetArray,Ne,Me,Yt,Dt,hr,Ze);et=or.useVertical,(or.notEnoughRoom||et||or.needsFlipping&&Qh(tt,Pt,!0,Y,v,O,F,d.glyphOffsetArray,Ne,Me,Yt,Dt,hr,Ze).notEnoughRoom)&&Ha(tt.numGlyphs,Me)}else Ha(tt.numGlyphs,Me)}}x?d.text.dynamicLayoutVertexBuffer.updateData(Me):d.icon.dynamicLayoutVertexBuffer.updateData(Me)}function bo(d,v,g,x,O,F,z,Y,ae,be,De){var Me=Y.glyphStartIndex+Y.numGlyphs,Ne=Y.lineStartIndex,Ye=Y.lineStartIndex+Y.lineLength,Ze=v.getoffsetX(Y.glyphStartIndex),et=v.getoffsetX(Me-1),Ve=Co(d*Ze,g,x,O,F,z,Y.segment,Ne,Ye,ae,be,De);if(!Ve)return null;var tt=Co(d*et,g,x,O,F,z,Y.segment,Ne,Ye,ae,be,De);return tt?{first:Ve,last:tt}:null}function Go(d,v,g,x){return d===p.WritingMode.horizontal&&Math.abs(g.y-v.y)>Math.abs(g.x-v.x)*x?{useVertical:!0}:(d===p.WritingMode.vertical?v.y<g.y:v.x>g.x)?{needsFlipping:!0}:null}function Qh(d,v,g,x,O,F,z,Y,ae,be,De,Me,Ne,Ye){var Ze,et=v/24,Ve=d.lineOffsetX*et,tt=d.lineOffsetY*et;if(d.numGlyphs>1){var ft=d.glyphStartIndex+d.numGlyphs,xt=d.lineStartIndex,Bt=d.lineStartIndex+d.lineLength,Pt=bo(et,Y,Ve,tt,g,De,Me,d,ae,F,Ne);if(!Pt)return{notEnoughRoom:!0};var Dt=Fn(Pt.first.point,z).point,Yt=Fn(Pt.last.point,z).point;if(x&&!g){var hr=Go(d.writingMode,Dt,Yt,Ye);if(hr)return hr}Ze=[Pt.first];for(var or=d.glyphStartIndex+1;or<ft-1;or++)Ze.push(Co(et*Y.getoffsetX(or),Ve,tt,g,De,Me,d.segment,xt,Bt,ae,F,Ne));Ze.push(Pt.last)}else{if(x&&!g){var Er=Fn(Me,O).point,Wr=d.lineStartIndex+d.segment+1,Vr=new p.Point(ae.getx(Wr),ae.gety(Wr)),Mr=Fn(Vr,O),vn=Mr.signedDistanceFromCamera>0?Mr.point:wc(Me,Vr,Er,1,O),Cr=Go(d.writingMode,Er,vn,Ye);if(Cr)return Cr}var gn=Co(et*Y.getoffsetX(d.glyphStartIndex),Ve,tt,g,De,Me,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,ae,F,Ne);if(!gn)return{notEnoughRoom:!0};Ze=[gn]}for(var Dn=0,cn=Ze;Dn<cn.length;Dn+=1){var sn=cn[Dn];p.addDynamicAttributes(be,sn.point,sn.angle)}return{}}function wc(d,v,g,x,O){var F=Fn(d.add(d.sub(v)._unit()),O).point,z=g.sub(F);return g.add(z._mult(x/z.mag()))}function Co(d,v,g,x,O,F,z,Y,ae,be,De,Me){var Ne=x?d-v:d+v,Ye=Ne>0?1:-1,Ze=0;x&&(Ye*=-1,Ze=Math.PI),Ye<0&&(Ze+=Math.PI);for(var et=Ye>0?Y+z:Y+z+1,Ve=O,tt=O,ft=0,xt=0,Bt=Math.abs(Ne),Pt=[];ft+xt<=Bt;){if((et+=Ye)<Y||et>=ae)return null;if(tt=Ve,Pt.push(Ve),(Ve=Me[et])===void 0){var Dt=new p.Point(be.getx(et),be.gety(et)),Yt=Fn(Dt,De);if(Yt.signedDistanceFromCamera>0)Ve=Me[et]=Yt.point;else{var hr=et-Ye;Ve=wc(ft===0?F:new p.Point(be.getx(hr),be.gety(hr)),Dt,tt,Bt-ft+1,De)}}ft+=xt,xt=tt.dist(Ve)}var or=(Bt-ft)/xt,Er=Ve.sub(tt),Wr=Er.mult(or)._add(tt);Wr._add(Er._unit()._perp()._mult(g*Ye));var Vr=Ze+Math.atan2(Ve.y-tt.y,Ve.x-tt.x);return Pt.push(Wr),{point:Wr,angle:Vr,path:Pt}}Nr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Nr.prototype.insert=function(d,v,g,x,O){this._forEachCell(v,g,x,O,this._insertBoxCell,this.boxUid++),this.boxKeys.push(d),this.bboxes.push(v),this.bboxes.push(g),this.bboxes.push(x),this.bboxes.push(O)},Nr.prototype.insertCircle=function(d,v,g,x){this._forEachCell(v-x,g-x,v+x,g+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(d),this.circles.push(v),this.circles.push(g),this.circles.push(x)},Nr.prototype._insertBoxCell=function(d,v,g,x,O,F){this.boxCells[O].push(F)},Nr.prototype._insertCircleCell=function(d,v,g,x,O,F){this.circleCells[O].push(F)},Nr.prototype._query=function(d,v,g,x,O,F){if(g<0||d>this.width||x<0||v>this.height)return!O&&[];var z=[];if(d<=0&&v<=0&&this.width<=g&&this.height<=x){if(O)return!0;for(var Y=0;Y<this.boxKeys.length;Y++)z.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(var ae=0;ae<this.circleKeys.length;ae++){var be=this.circles[3*ae],De=this.circles[3*ae+1],Me=this.circles[3*ae+2];z.push({key:this.circleKeys[ae],x1:be-Me,y1:De-Me,x2:be+Me,y2:De+Me})}return F?z.filter(F):z}return this._forEachCell(d,v,g,x,this._queryCell,z,{hitTest:O,seenUids:{box:{},circle:{}}},F),O?z.length>0:z},Nr.prototype._queryCircle=function(d,v,g,x,O){var F=d-g,z=d+g,Y=v-g,ae=v+g;if(z<0||F>this.width||ae<0||Y>this.height)return!x&&[];var be=[];return this._forEachCell(F,Y,z,ae,this._queryCellCircle,be,{hitTest:x,circle:{x:d,y:v,radius:g},seenUids:{box:{},circle:{}}},O),x?be.length>0:be},Nr.prototype.query=function(d,v,g,x,O){return this._query(d,v,g,x,!1,O)},Nr.prototype.hitTest=function(d,v,g,x,O){return this._query(d,v,g,x,!0,O)},Nr.prototype.hitTestCircle=function(d,v,g,x){return this._queryCircle(d,v,g,!0,x)},Nr.prototype._queryCell=function(d,v,g,x,O,F,z,Y){var ae=z.seenUids,be=this.boxCells[O];if(be!==null)for(var De=this.bboxes,Me=0,Ne=be;Me<Ne.length;Me+=1){var Ye=Ne[Me];if(!ae.box[Ye]){ae.box[Ye]=!0;var Ze=4*Ye;if(d<=De[Ze+2]&&v<=De[Ze+3]&&g>=De[Ze+0]&&x>=De[Ze+1]&&(!Y||Y(this.boxKeys[Ye]))){if(z.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[Ye],x1:De[Ze],y1:De[Ze+1],x2:De[Ze+2],y2:De[Ze+3]})}}}var et=this.circleCells[O];if(et!==null)for(var Ve=this.circles,tt=0,ft=et;tt<ft.length;tt+=1){var xt=ft[tt];if(!ae.circle[xt]){ae.circle[xt]=!0;var Bt=3*xt;if(this._circleAndRectCollide(Ve[Bt],Ve[Bt+1],Ve[Bt+2],d,v,g,x)&&(!Y||Y(this.circleKeys[xt]))){if(z.hitTest)return F.push(!0),!0;var Pt=Ve[Bt],Dt=Ve[Bt+1],Yt=Ve[Bt+2];F.push({key:this.circleKeys[xt],x1:Pt-Yt,y1:Dt-Yt,x2:Pt+Yt,y2:Dt+Yt})}}}},Nr.prototype._queryCellCircle=function(d,v,g,x,O,F,z,Y){var ae=z.circle,be=z.seenUids,De=this.boxCells[O];if(De!==null)for(var Me=this.bboxes,Ne=0,Ye=De;Ne<Ye.length;Ne+=1){var Ze=Ye[Ne];if(!be.box[Ze]){be.box[Ze]=!0;var et=4*Ze;if(this._circleAndRectCollide(ae.x,ae.y,ae.radius,Me[et+0],Me[et+1],Me[et+2],Me[et+3])&&(!Y||Y(this.boxKeys[Ze])))return F.push(!0),!0}}var Ve=this.circleCells[O];if(Ve!==null)for(var tt=this.circles,ft=0,xt=Ve;ft<xt.length;ft+=1){var Bt=xt[ft];if(!be.circle[Bt]){be.circle[Bt]=!0;var Pt=3*Bt;if(this._circlesCollide(tt[Pt],tt[Pt+1],tt[Pt+2],ae.x,ae.y,ae.radius)&&(!Y||Y(this.circleKeys[Bt])))return F.push(!0),!0}}},Nr.prototype._forEachCell=function(d,v,g,x,O,F,z,Y){for(var ae=this._convertToXCellCoord(d),be=this._convertToYCellCoord(v),De=this._convertToXCellCoord(g),Me=this._convertToYCellCoord(x),Ne=ae;Ne<=De;Ne++)for(var Ye=be;Ye<=Me;Ye++)if(O.call(this,d,v,g,x,this.xCellCount*Ye+Ne,F,z,Y))return},Nr.prototype._convertToXCellCoord=function(d){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(d*this.xScale)))},Nr.prototype._convertToYCellCoord=function(d){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(d*this.yScale)))},Nr.prototype._circlesCollide=function(d,v,g,x,O,F){var z=x-d,Y=O-v,ae=g+F;return ae*ae>z*z+Y*Y},Nr.prototype._circleAndRectCollide=function(d,v,g,x,O,F,z){var Y=(F-x)/2,ae=Math.abs(d-(x+Y));if(ae>Y+g)return!1;var be=(z-O)/2,De=Math.abs(v-(O+be));if(De>be+g)return!1;if(ae<=Y||De<=be)return!0;var Me=ae-Y,Ne=De-be;return Me*Me+Ne*Ne<=g*g};var nf=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ha(d,v){for(var g=0;g<d;g++){var x=v.length;v.resize(x+4),v.float32.set(nf,3*x)}}function ta(d,v,g){var x=v[0],O=v[1];return d[0]=g[0]*x+g[4]*O+g[12],d[1]=g[1]*x+g[5]*O+g[13],d[3]=g[3]*x+g[7]*O+g[15],d}var ol=function(d,v,g){v===void 0&&(v=new Nr(d.width+200,d.height+200,25)),g===void 0&&(g=new Nr(d.width+200,d.height+200,25)),this.transform=d,this.grid=v,this.ignoredGrid=g,this.pitchfactor=Math.cos(d._pitch)*d.cameraToCenterDistance,this.screenRightBoundary=d.width+100,this.screenBottomBoundary=d.height+100,this.gridRightBoundary=d.width+200,this.gridBottomBoundary=d.height+200};function oo(d,v,g){return v*(p.EXTENT/(d.tileSize*Math.pow(2,g-d.tileID.overscaledZ)))}ol.prototype.placeCollisionBox=function(d,v,g,x,O){var F=this.projectAndGetPerspectiveRatio(x,d.anchorPointX,d.anchorPointY),z=g*F.perspectiveRatio,Y=d.x1*z+F.point.x,ae=d.y1*z+F.point.y,be=d.x2*z+F.point.x,De=d.y2*z+F.point.y;return!this.isInsideGrid(Y,ae,be,De)||!v&&this.grid.hitTest(Y,ae,be,De,O)?{box:[],offscreen:!1}:{box:[Y,ae,be,De],offscreen:this.isOffscreen(Y,ae,be,De)}},ol.prototype.placeCollisionCircles=function(d,v,g,x,O,F,z,Y,ae,be,De,Me,Ne){var Ye=[],Ze=new p.Point(v.anchorX,v.anchorY),et=Fn(Ze,F),Ve=Vn(this.transform.cameraToCenterDistance,et.signedDistanceFromCamera),tt=(be?O/Ve:O*Ve)/p.ONE_EM,ft=Fn(Ze,z).point,xt=bo(tt,x,v.lineOffsetX*tt,v.lineOffsetY*tt,!1,ft,Ze,v,g,z,{}),Bt=!1,Pt=!1,Dt=!0;if(xt){for(var Yt=.5*Me*Ve+Ne,hr=new p.Point(-100,-100),or=new p.Point(this.screenRightBoundary,this.screenBottomBoundary),Er=new Va,Wr=xt.first,Vr=xt.last,Mr=[],vn=Wr.path.length-1;vn>=1;vn--)Mr.push(Wr.path[vn]);for(var Cr=1;Cr<Vr.path.length;Cr++)Mr.push(Vr.path[Cr]);var gn=2.5*Yt;if(Y){var Dn=Mr.map(function(Za){return Fn(Za,Y)});Mr=Dn.some(function(Za){return Za.signedDistanceFromCamera<=0})?[]:Dn.map(function(Za){return Za.point})}var cn=[];if(Mr.length>0){for(var sn=Mr[0].clone(),An=Mr[0].clone(),nn=1;nn<Mr.length;nn++)sn.x=Math.min(sn.x,Mr[nn].x),sn.y=Math.min(sn.y,Mr[nn].y),An.x=Math.max(An.x,Mr[nn].x),An.y=Math.max(An.y,Mr[nn].y);cn=sn.x>=hr.x&&An.x<=or.x&&sn.y>=hr.y&&An.y<=or.y?[Mr]:An.x<hr.x||sn.x>or.x||An.y<hr.y||sn.y>or.y?[]:p.clipLine([Mr],hr.x,hr.y,or.x,or.y)}for(var ln=0,xo=cn;ln<xo.length;ln+=1){var wo;Er.reset(xo[ln],.25*Yt),wo=Er.length<=.5*Yt?1:Math.ceil(Er.paddedLength/gn)+1;for(var Io=0;Io<wo;Io++){var _a=Io/Math.max(wo-1,1),Ki=Er.lerp(_a),So=Ki.x+100,xa=Ki.y+100;Ye.push(So,xa,Yt,0);var os=So-Yt,Zu=xa-Yt,As=So+Yt,ks=xa+Yt;if(Dt=Dt&&this.isOffscreen(os,Zu,As,ks),Pt=Pt||this.isInsideGrid(os,Zu,As,ks),!d&&this.grid.hitTestCircle(So,xa,Yt,De)&&(Bt=!0,!ae))return{circles:[],offscreen:!1,collisionDetected:Bt}}}}return{circles:!ae&&Bt||!Pt?[]:Ye,offscreen:Dt,collisionDetected:Bt}},ol.prototype.queryRenderedSymbols=function(d){if(d.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var v=[],g=1/0,x=1/0,O=-1/0,F=-1/0,z=0,Y=d;z<Y.length;z+=1){var ae=Y[z],be=new p.Point(ae.x+100,ae.y+100);g=Math.min(g,be.x),x=Math.min(x,be.y),O=Math.max(O,be.x),F=Math.max(F,be.y),v.push(be)}for(var De={},Me={},Ne=0,Ye=this.grid.query(g,x,O,F).concat(this.ignoredGrid.query(g,x,O,F));Ne<Ye.length;Ne+=1){var Ze=Ye[Ne],et=Ze.key;if(De[et.bucketInstanceId]===void 0&&(De[et.bucketInstanceId]={}),!De[et.bucketInstanceId][et.featureIndex]){var Ve=[new p.Point(Ze.x1,Ze.y1),new p.Point(Ze.x2,Ze.y1),new p.Point(Ze.x2,Ze.y2),new p.Point(Ze.x1,Ze.y2)];p.polygonIntersectsPolygon(v,Ve)&&(De[et.bucketInstanceId][et.featureIndex]=!0,Me[et.bucketInstanceId]===void 0&&(Me[et.bucketInstanceId]=[]),Me[et.bucketInstanceId].push(et.featureIndex))}}return Me},ol.prototype.insertCollisionBox=function(d,v,g,x,O){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:g,featureIndex:x,collisionGroupID:O},d[0],d[1],d[2],d[3])},ol.prototype.insertCollisionCircles=function(d,v,g,x,O){for(var F=v?this.ignoredGrid:this.grid,z={bucketInstanceId:g,featureIndex:x,collisionGroupID:O},Y=0;Y<d.length;Y+=4)F.insertCircle(z,d[Y],d[Y+1],d[Y+2])},ol.prototype.projectAndGetPerspectiveRatio=function(d,v,g){var x=[v,g,0,1];return ta(x,x,d),{point:new p.Point((x[0]/x[3]+1)/2*this.transform.width+100,(-x[1]/x[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/x[3]*.5}},ol.prototype.isOffscreen=function(d,v,g,x){return g<100||d>=this.screenRightBoundary||x<100||v>this.screenBottomBoundary},ol.prototype.isInsideGrid=function(d,v,g,x){return g>=0&&d<this.gridRightBoundary&&x>=0&&v<this.gridBottomBoundary},ol.prototype.getViewportMatrix=function(){var d=p.identity([]);return p.translate(d,d,[-100,-100,0]),d};var Il=function(d,v,g,x){this.opacity=d?Math.max(0,Math.min(1,d.opacity+(d.placed?v:-v))):x&&g?1:0,this.placed=g};Il.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ra=function(d,v,g,x,O){this.text=new Il(d?d.text:null,v,g,O),this.icon=new Il(d?d.icon:null,v,x,O)};ra.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var om=function(d,v,g){this.text=d,this.icon=v,this.skipFade=g},Dl=function(){this.invProjMatrix=p.create(),this.viewportMatrix=p.create(),this.circles=[]},Jd=function(d,v,g,x,O){this.bucketInstanceId=d,this.featureIndex=v,this.sourceLayerIndex=g,this.bucketIndex=x,this.tileID=O},al=function(d){this.crossSourceCollisions=d,this.maxGroupID=0,this.collisionGroups={}};function Wa(d,v,g,x,O){var F=p.getAnchorAlignment(d),z=-(F.horizontalAlign-.5)*v,Y=-(F.verticalAlign-.5)*g,ae=p.evaluateVariableOffset(d,x);return new p.Point(z+ae[0]*O,Y+ae[1]*O)}function Ol(d,v,g,x,O,F){var z=d.x1,Y=d.x2,ae=d.y1,be=d.y2,De=d.anchorPointX,Me=d.anchorPointY,Ne=new p.Point(v,g);return x&&Ne._rotate(O?F:-F),{x1:z+Ne.x,y1:ae+Ne.y,x2:Y+Ne.x,y2:be+Ne.y,anchorPointX:De,anchorPointY:Me}}al.prototype.get=function(d){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[d]){var v=++this.maxGroupID;this.collisionGroups[d]={ID:v,predicate:function(g){return g.collisionGroupID===v}}}return this.collisionGroups[d]};var xs=function(d,v,g,x){this.transform=d.clone(),this.collisionIndex=new ol(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=v,this.retainedQueryData={},this.collisionGroups=new al(g),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}};function of(d,v,g,x,O){d.emplaceBack(v?1:0,g?1:0,x||0,O||0),d.emplaceBack(v?1:0,g?1:0,x||0,O||0),d.emplaceBack(v?1:0,g?1:0,x||0,O||0),d.emplaceBack(v?1:0,g?1:0,x||0,O||0)}xs.prototype.getBucketParts=function(d,v,g,x){var O=g.getBucket(v),F=g.latestFeatureIndex;if(O&&F&&v.id===O.layerIds[0]){var z=g.collisionBoxArray,Y=O.layers[0].layout,ae=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),be=g.tileSize/p.EXTENT,De=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),Me=Y.get("text-pitch-alignment")==="map",Ne=Y.get("text-rotation-alignment")==="map",Ye=oo(g,1,this.transform.zoom),Ze=ko(De,Me,Ne,this.transform,Ye),et=null;if(Me){var Ve=yi(De,Me,Ne,this.transform,Ye);et=p.multiply([],this.transform.labelPlaneMatrix,Ve)}this.retainedQueryData[O.bucketInstanceId]=new Jd(O.bucketInstanceId,F,O.sourceLayerIndex,O.index,g.tileID);var tt={bucket:O,layout:Y,posMatrix:De,textLabelPlaneMatrix:Ze,labelToScreenMatrix:et,scale:ae,textPixelRatio:be,holdingForFade:g.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:p.evaluateSizeForZoom(O.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(O.sourceID)};if(x)for(var ft=0,xt=O.sortKeyRanges;ft<xt.length;ft+=1){var Bt=xt[ft];d.push({sortKey:Bt.sortKey,symbolInstanceStart:Bt.symbolInstanceStart,symbolInstanceEnd:Bt.symbolInstanceEnd,parameters:tt})}else d.push({symbolInstanceStart:0,symbolInstanceEnd:O.symbolInstances.length,parameters:tt})}},xs.prototype.attemptAnchorPlacement=function(d,v,g,x,O,F,z,Y,ae,be,De,Me,Ne,Ye,Ze){var et,Ve=[Me.textOffset0,Me.textOffset1],tt=Wa(d,g,x,Ve,O),ft=this.collisionIndex.placeCollisionBox(Ol(v,tt.x,tt.y,F,z,this.transform.angle),De,Y,ae,be.predicate);if(!Ze||this.collisionIndex.placeCollisionBox(Ol(Ze,tt.x,tt.y,F,z,this.transform.angle),De,Y,ae,be.predicate).box.length!==0)return ft.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID]&&this.prevPlacement.placements[Me.crossTileID].text&&(et=this.prevPlacement.variableOffsets[Me.crossTileID].anchor),this.variableOffsets[Me.crossTileID]={textOffset:Ve,width:g,height:x,anchor:d,textBoxScale:O,prevAnchor:et},this.markUsedJustification(Ne,d,Me,Ye),Ne.allowVerticalPlacement&&(this.markUsedOrientation(Ne,Ye,Me),this.placedOrientations[Me.crossTileID]=Ye),{shift:tt,placedGlyphBoxes:ft}):void 0},xs.prototype.placeLayerBucketPart=function(d,v,g){var x=this,O=d.parameters,F=O.bucket,z=O.layout,Y=O.posMatrix,ae=O.textLabelPlaneMatrix,be=O.labelToScreenMatrix,De=O.textPixelRatio,Me=O.holdingForFade,Ne=O.collisionBoxArray,Ye=O.partiallyEvaluatedTextSize,Ze=O.collisionGroup,et=z.get("text-optional"),Ve=z.get("icon-optional"),tt=z.get("text-allow-overlap"),ft=z.get("icon-allow-overlap"),xt=z.get("text-rotation-alignment")==="map",Bt=z.get("text-pitch-alignment")==="map",Pt=z.get("icon-text-fit")!=="none",Dt=z.get("symbol-z-order")==="viewport-y",Yt=tt&&(ft||!F.hasIconData()||Ve),hr=ft&&(tt||!F.hasTextData()||et);!F.collisionArrays&&Ne&&F.deserializeCollisionBoxes(Ne);var or=function(Cr,gn){if(!v[Cr.crossTileID])if(Me)x.placements[Cr.crossTileID]=new om(!1,!1,!1);else{var Dn,cn=!1,sn=!1,An=!0,nn=null,ln={box:null,offscreen:null},xo={box:null,offscreen:null},wo=null,Io=null,_a=0,Ki=0,So=0;gn.textFeatureIndex?_a=gn.textFeatureIndex:Cr.useRuntimeCollisionCircles&&(_a=Cr.featureIndex),gn.verticalTextFeatureIndex&&(Ki=gn.verticalTextFeatureIndex);var xa=gn.textBox;if(xa){var os=function(ri){var to=p.WritingMode.horizontal;if(F.allowVerticalPlacement&&!ri&&x.prevPlacement){var Ya=x.prevPlacement.placedOrientations[Cr.crossTileID];Ya&&(x.placedOrientations[Cr.crossTileID]=Ya,x.markUsedOrientation(F,to=Ya,Cr))}return to},Zu=function(ri,to){if(F.allowVerticalPlacement&&Cr.numVerticalGlyphVertices>0&&gn.verticalTextBox)for(var Ya=0,Af=F.writingModes;Ya<Af.length&&(Af[Ya]===p.WritingMode.vertical?(ln=to(),xo=ln):ln=ri(),!(ln&&ln.box&&ln.box.length));Ya+=1);else ln=ri()};if(z.get("text-variable-anchor")){var As=z.get("text-variable-anchor");if(x.prevPlacement&&x.prevPlacement.variableOffsets[Cr.crossTileID]){var ks=x.prevPlacement.variableOffsets[Cr.crossTileID];As.indexOf(ks.anchor)>0&&(As=As.filter(function(ri){return ri!==ks.anchor})).unshift(ks.anchor)}var Za=function(ri,to,Ya){for(var Af=ri.x2-ri.x1,vm=ri.y2-ri.y1,Kn=Cr.textBoxScale,Lg=Pt&&!ft?to:null,hh={box:[],offscreen:!1},kf=tt?2*As.length:As.length,Cf=0;Cf<kf;++Cf){var hp=x.attemptAnchorPlacement(As[Cf%As.length],ri,Af,vm,Kn,xt,Bt,De,Y,Ze,Cf>=As.length,Cr,F,Ya,Lg);if(hp&&(hh=hp.placedGlyphBoxes)&&hh.box&&hh.box.length){cn=!0,nn=hp.shift;break}}return hh};Zu(function(){return Za(xa,gn.iconBox,p.WritingMode.horizontal)},function(){var ri=gn.verticalTextBox;return F.allowVerticalPlacement&&!(ln&&ln.box&&ln.box.length)&&Cr.numVerticalGlyphVertices>0&&ri?Za(ri,gn.verticalIconBox,p.WritingMode.vertical):{box:null,offscreen:null}}),ln&&(cn=ln.box,An=ln.offscreen);var Yu=os(ln&&ln.box);if(!cn&&x.prevPlacement){var ql=x.prevPlacement.variableOffsets[Cr.crossTileID];ql&&(x.variableOffsets[Cr.crossTileID]=ql,x.markUsedJustification(F,ql.anchor,Cr,Yu))}}else{var ku=function(ri,to){var Ya=x.collisionIndex.placeCollisionBox(ri,tt,De,Y,Ze.predicate);return Ya&&Ya.box&&Ya.box.length&&(x.markUsedOrientation(F,to,Cr),x.placedOrientations[Cr.crossTileID]=to),Ya};Zu(function(){return ku(xa,p.WritingMode.horizontal)},function(){var ri=gn.verticalTextBox;return F.allowVerticalPlacement&&Cr.numVerticalGlyphVertices>0&&ri?ku(ri,p.WritingMode.vertical):{box:null,offscreen:null}}),os(ln&&ln.box&&ln.box.length)}}if(cn=(Dn=ln)&&Dn.box&&Dn.box.length>0,An=Dn&&Dn.offscreen,Cr.useRuntimeCollisionCircles){var Sf=F.text.placedSymbolArray.get(Cr.centerJustifiedTextSymbolIndex),Ef=p.evaluateSizeForFeature(F.textSizeData,Ye,Sf),wa=z.get("text-padding");wo=x.collisionIndex.placeCollisionCircles(tt,Sf,F.lineVertexArray,F.glyphOffsetArray,Ef,Y,ae,be,g,Bt,Ze.predicate,Cr.collisionCircleDiameter,wa),cn=tt||wo.circles.length>0&&!wo.collisionDetected,An=An&&wo.offscreen}if(gn.iconFeatureIndex&&(So=gn.iconFeatureIndex),gn.iconBox){var Cu=function(ri){var to=Pt&&nn?Ol(ri,nn.x,nn.y,xt,Bt,x.transform.angle):ri;return x.collisionIndex.placeCollisionBox(to,ft,De,Y,Ze.predicate)};sn=xo&&xo.box&&xo.box.length&&gn.verticalIconBox?(Io=Cu(gn.verticalIconBox)).box.length>0:(Io=Cu(gn.iconBox)).box.length>0,An=An&&Io.offscreen}var Bs=et||Cr.numHorizontalGlyphVertices===0&&Cr.numVerticalGlyphVertices===0,sa=Ve||Cr.numIconVertices===0;if(Bs||sa?sa?Bs||(sn=sn&&cn):cn=sn&&cn:sn=cn=sn&&cn,cn&&Dn&&Dn.box&&x.collisionIndex.insertCollisionBox(Dn.box,z.get("text-ignore-placement"),F.bucketInstanceId,xo&&xo.box&&Ki?Ki:_a,Ze.ID),sn&&Io&&x.collisionIndex.insertCollisionBox(Io.box,z.get("icon-ignore-placement"),F.bucketInstanceId,So,Ze.ID),wo&&(cn&&x.collisionIndex.insertCollisionCircles(wo.circles,z.get("text-ignore-placement"),F.bucketInstanceId,_a,Ze.ID),g)){var Iu=F.bucketInstanceId,Xu=x.collisionCircleArrays[Iu];Xu===void 0&&(Xu=x.collisionCircleArrays[Iu]=new Dl);for(var Tf=0;Tf<wo.circles.length;Tf+=4)Xu.circles.push(wo.circles[Tf+0]),Xu.circles.push(wo.circles[Tf+1]),Xu.circles.push(wo.circles[Tf+2]),Xu.circles.push(wo.collisionDetected?1:0)}x.placements[Cr.crossTileID]=new om(cn||Yt,sn||hr,An||F.justReloaded),v[Cr.crossTileID]=!0}};if(Dt)for(var Er=F.getSortedSymbolIndexes(this.transform.angle),Wr=Er.length-1;Wr>=0;--Wr){var Vr=Er[Wr];or(F.symbolInstances.get(Vr),F.collisionArrays[Vr])}else for(var Mr=d.symbolInstanceStart;Mr<d.symbolInstanceEnd;Mr++)or(F.symbolInstances.get(Mr),F.collisionArrays[Mr]);if(g&&F.bucketInstanceId in this.collisionCircleArrays){var vn=this.collisionCircleArrays[F.bucketInstanceId];p.invert(vn.invProjMatrix,Y),vn.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1},xs.prototype.markUsedJustification=function(d,v,g,x){var O;O=x===p.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[p.getAnchorJustification(v)];for(var F=0,z=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];F<z.length;F+=1){var Y=z[F];Y>=0&&(d.text.placedSymbolArray.get(Y).crossTileID=O>=0&&Y!==O?0:g.crossTileID)}},xs.prototype.markUsedOrientation=function(d,v,g){for(var x=v===p.WritingMode.horizontal||v===p.WritingMode.horizontalOnly?v:0,O=v===p.WritingMode.vertical?v:0,F=0,z=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];F<z.length;F+=1)d.text.placedSymbolArray.get(z[F]).placedOrientation=x;g.verticalPlacedTextSymbolIndex&&(d.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=O)},xs.prototype.commit=function(d){this.commitTime=d,this.zoomAtLastRecencyCheck=this.transform.zoom;var v=this.prevPlacement,g=!1;this.prevZoomAdjustment=v?v.zoomAdjustment(this.transform.zoom):0;var x=v?v.symbolFadeChange(d):1,O=v?v.opacities:{},F=v?v.variableOffsets:{},z=v?v.placedOrientations:{};for(var Y in this.placements){var ae=this.placements[Y],be=O[Y];be?(this.opacities[Y]=new ra(be,x,ae.text,ae.icon),g=g||ae.text!==be.text.placed||ae.icon!==be.icon.placed):(this.opacities[Y]=new ra(null,x,ae.text,ae.icon,ae.skipFade),g=g||ae.text||ae.icon)}for(var De in O){var Me=O[De];if(!this.opacities[De]){var Ne=new ra(Me,x,!1,!1);Ne.isHidden()||(this.opacities[De]=Ne,g=g||Me.text.placed||Me.icon.placed)}}for(var Ye in F)this.variableOffsets[Ye]||!this.opacities[Ye]||this.opacities[Ye].isHidden()||(this.variableOffsets[Ye]=F[Ye]);for(var Ze in z)this.placedOrientations[Ze]||!this.opacities[Ze]||this.opacities[Ze].isHidden()||(this.placedOrientations[Ze]=z[Ze]);g?this.lastPlacementChangeTime=d:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=v?v.lastPlacementChangeTime:d)},xs.prototype.updateLayerOpacities=function(d,v){for(var g={},x=0,O=v;x<O.length;x+=1){var F=O[x],z=F.getBucket(d);z&&F.latestFeatureIndex&&d.id===z.layerIds[0]&&this.updateBucketOpacities(z,g,F.collisionBoxArray)}},xs.prototype.updateBucketOpacities=function(d,v,g){var x=this;d.hasTextData()&&d.text.opacityVertexArray.clear(),d.hasIconData()&&d.icon.opacityVertexArray.clear(),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexArray.clear(),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexArray.clear();var O=d.layers[0].layout,F=new ra(null,0,!1,!1,!0),z=O.get("text-allow-overlap"),Y=O.get("icon-allow-overlap"),ae=O.get("text-variable-anchor"),be=O.get("text-rotation-alignment")==="map",De=O.get("text-pitch-alignment")==="map",Me=O.get("icon-text-fit")!=="none",Ne=new ra(null,0,z&&(Y||!d.hasIconData()||O.get("icon-optional")),Y&&(z||!d.hasTextData()||O.get("text-optional")),!0);!d.collisionArrays&&g&&(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData())&&d.deserializeCollisionBoxes(g);for(var Ye=function(tt,ft,xt){for(var Bt=0;Bt<ft/4;Bt++)tt.opacityVertexArray.emplaceBack(xt)},Ze=function(tt){var ft=d.symbolInstances.get(tt),xt=ft.numHorizontalGlyphVertices,Bt=ft.numVerticalGlyphVertices,Pt=ft.crossTileID,Dt=x.opacities[Pt];v[Pt]?Dt=F:Dt||(x.opacities[Pt]=Dt=Ne),v[Pt]=!0;var Yt=ft.numIconVertices>0,hr=x.placedOrientations[ft.crossTileID],or=hr===p.WritingMode.vertical,Er=hr===p.WritingMode.horizontal||hr===p.WritingMode.horizontalOnly;if(xt>0||Bt>0){var Wr=ep(Dt.text);Ye(d.text,xt,or?af:Wr),Ye(d.text,Bt,Er?af:Wr);var Vr=Dt.text.isHidden();[ft.rightJustifiedTextSymbolIndex,ft.centerJustifiedTextSymbolIndex,ft.leftJustifiedTextSymbolIndex].forEach(function(ln){ln>=0&&(d.text.placedSymbolArray.get(ln).hidden=Vr||or?1:0)}),ft.verticalPlacedTextSymbolIndex>=0&&(d.text.placedSymbolArray.get(ft.verticalPlacedTextSymbolIndex).hidden=Vr||Er?1:0);var Mr=x.variableOffsets[ft.crossTileID];Mr&&x.markUsedJustification(d,Mr.anchor,ft,hr);var vn=x.placedOrientations[ft.crossTileID];vn&&(x.markUsedJustification(d,"left",ft,vn),x.markUsedOrientation(d,vn,ft))}if(Yt){var Cr=ep(Dt.icon),gn=!(Me&&ft.verticalPlacedIconSymbolIndex&&or);ft.placedIconSymbolIndex>=0&&(Ye(d.icon,ft.numIconVertices,gn?Cr:af),d.icon.placedSymbolArray.get(ft.placedIconSymbolIndex).hidden=Dt.icon.isHidden()),ft.verticalPlacedIconSymbolIndex>=0&&(Ye(d.icon,ft.numVerticalIconVertices,gn?af:Cr),d.icon.placedSymbolArray.get(ft.verticalPlacedIconSymbolIndex).hidden=Dt.icon.isHidden())}if(d.hasIconCollisionBoxData()||d.hasTextCollisionBoxData()){var Dn=d.collisionArrays[tt];if(Dn){var cn=new p.Point(0,0);if(Dn.textBox||Dn.verticalTextBox){var sn=!0;if(ae){var An=x.variableOffsets[Pt];An?(cn=Wa(An.anchor,An.width,An.height,An.textOffset,An.textBoxScale),be&&cn._rotate(De?x.transform.angle:-x.transform.angle)):sn=!1}Dn.textBox&&of(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!sn||or,cn.x,cn.y),Dn.verticalTextBox&&of(d.textCollisionBox.collisionVertexArray,Dt.text.placed,!sn||Er,cn.x,cn.y)}var nn=!!(!Er&&Dn.verticalIconBox);Dn.iconBox&&of(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,nn,Me?cn.x:0,Me?cn.y:0),Dn.verticalIconBox&&of(d.iconCollisionBox.collisionVertexArray,Dt.icon.placed,!nn,Me?cn.x:0,Me?cn.y:0)}}},et=0;et<d.symbolInstances.length;et++)Ze(et);if(d.sortFeatures(this.transform.angle),this.retainedQueryData[d.bucketInstanceId]&&(this.retainedQueryData[d.bucketInstanceId].featureSortOrder=d.featureSortOrder),d.hasTextData()&&d.text.opacityVertexBuffer&&d.text.opacityVertexBuffer.updateData(d.text.opacityVertexArray),d.hasIconData()&&d.icon.opacityVertexBuffer&&d.icon.opacityVertexBuffer.updateData(d.icon.opacityVertexArray),d.hasIconCollisionBoxData()&&d.iconCollisionBox.collisionVertexBuffer&&d.iconCollisionBox.collisionVertexBuffer.updateData(d.iconCollisionBox.collisionVertexArray),d.hasTextCollisionBoxData()&&d.textCollisionBox.collisionVertexBuffer&&d.textCollisionBox.collisionVertexBuffer.updateData(d.textCollisionBox.collisionVertexArray),d.bucketInstanceId in this.collisionCircleArrays){var Ve=this.collisionCircleArrays[d.bucketInstanceId];d.placementInvProjMatrix=Ve.invProjMatrix,d.placementViewportMatrix=Ve.viewportMatrix,d.collisionCircleArray=Ve.circles,delete this.collisionCircleArrays[d.bucketInstanceId]}},xs.prototype.symbolFadeChange=function(d){return this.fadeDuration===0?1:(d-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},xs.prototype.zoomAdjustment=function(d){return Math.max(0,(this.transform.zoom-d)/1.5)},xs.prototype.hasTransitions=function(d){return this.stale||d-this.lastPlacementChangeTime<this.fadeDuration},xs.prototype.stillRecent=function(d,v){var g=this.zoomAtLastRecencyCheck===v?1-this.zoomAdjustment(v):1;return this.zoomAtLastRecencyCheck=v,this.commitTime+this.fadeDuration*g>d},xs.prototype.setStale=function(){this.stale=!0};var am=Math.pow(2,25),Ig=Math.pow(2,24),sm=Math.pow(2,17),co=Math.pow(2,16),Ji=Math.pow(2,9),Qd=Math.pow(2,8),ed=Math.pow(2,1);function ep(d){if(d.opacity===0&&!d.placed)return 0;if(d.opacity===1&&d.placed)return 4294967295;var v=d.placed?1:0,g=Math.floor(127*d.opacity);return g*am+v*Ig+g*sm+v*co+g*Ji+v*Qd+g*ed+v}var af=0,tp=function(d){this._sortAcrossTiles=d.layout.get("symbol-z-order")!=="viewport-y"&&d.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};tp.prototype.continuePlacement=function(d,v,g,x,O){for(var F=this._bucketParts;this._currentTileIndex<d.length;)if(v.getBucketParts(F,x,d[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,O())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,F.sort(function(z,Y){return z.sortKey-Y.sortKey}));this._currentPartIndex<F.length;)if(v.placeLayerBucketPart(F[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,O())return!0;return!1};var Sc=function(d,v,g,x,O,F,z){this.placement=new xs(d,O,F,z),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=g,this._showCollisionBoxes=x,this._done=!1};Sc.prototype.isDone=function(){return this._done},Sc.prototype.continuePlacement=function(d,v,g){for(var x=this,O=p.browser.now(),F=function(){var ae=p.browser.now()-O;return!x._forceFullPlacement&&ae>2};this._currentPlacementIndex>=0;){var z=v[d[this._currentPlacementIndex]],Y=this.placement.collisionIndex.transform.zoom;if(z.type==="symbol"&&(!z.minzoom||z.minzoom<=Y)&&(!z.maxzoom||z.maxzoom>Y)){if(this._inProgressLayer||(this._inProgressLayer=new tp(z)),this._inProgressLayer.continuePlacement(g[z.source],this.placement,this._showCollisionBoxes,z,F))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Sc.prototype.commit=function(d){return this.placement.commit(d),this.placement};var lm=512/p.EXTENT/2,td=function(d,v,g){this.tileID=d,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(var x=0;x<v.length;x++){var O=v.get(x),F=O.key;this.indexedSymbolInstances[F]||(this.indexedSymbolInstances[F]=[]),this.indexedSymbolInstances[F].push({crossTileID:O.crossTileID,coord:this.getScaledCoordinates(O,d)})}};td.prototype.getScaledCoordinates=function(d,v){var g=lm/Math.pow(2,v.canonical.z-this.tileID.canonical.z);return{x:Math.floor((v.canonical.x*p.EXTENT+d.anchorX)*g),y:Math.floor((v.canonical.y*p.EXTENT+d.anchorY)*g)}},td.prototype.findMatches=function(d,v,g){for(var x=this.tileID.canonical.z<v.canonical.z?1:Math.pow(2,this.tileID.canonical.z-v.canonical.z),O=0;O<d.length;O++){var F=d.get(O);if(!F.crossTileID){var z=this.indexedSymbolInstances[F.key];if(z)for(var Y=this.getScaledCoordinates(F,v),ae=0,be=z;ae<be.length;ae+=1){var De=be[ae];if(Math.abs(De.coord.x-Y.x)<=x&&Math.abs(De.coord.y-Y.y)<=x&&!g[De.crossTileID]){g[De.crossTileID]=!0,F.crossTileID=De.crossTileID;break}}}}};var ei=function(){this.maxCrossTileID=0};ei.prototype.generate=function(){return++this.maxCrossTileID};var mu=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};mu.prototype.handleWrapJump=function(d){var v=Math.round((d-this.lng)/360);if(v!==0)for(var g in this.indexes){var x=this.indexes[g],O={};for(var F in x){var z=x[F];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+v),O[z.tileID.key]=z}this.indexes[g]=O}this.lng=d},mu.prototype.addBucket=function(d,v,g){if(this.indexes[d.overscaledZ]&&this.indexes[d.overscaledZ][d.key]){if(this.indexes[d.overscaledZ][d.key].bucketInstanceId===v.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(d.overscaledZ,this.indexes[d.overscaledZ][d.key])}for(var x=0;x<v.symbolInstances.length;x++)v.symbolInstances.get(x).crossTileID=0;this.usedCrossTileIDs[d.overscaledZ]||(this.usedCrossTileIDs[d.overscaledZ]={});var O=this.usedCrossTileIDs[d.overscaledZ];for(var F in this.indexes){var z=this.indexes[F];if(Number(F)>d.overscaledZ)for(var Y in z){var ae=z[Y];ae.tileID.isChildOf(d)&&ae.findMatches(v.symbolInstances,d,O)}else{var be=z[d.scaledTo(Number(F)).key];be&&be.findMatches(v.symbolInstances,d,O)}}for(var De=0;De<v.symbolInstances.length;De++){var Me=v.symbolInstances.get(De);Me.crossTileID||(Me.crossTileID=g.generate(),O[Me.crossTileID]=!0)}return this.indexes[d.overscaledZ]===void 0&&(this.indexes[d.overscaledZ]={}),this.indexes[d.overscaledZ][d.key]=new td(d,v.symbolInstances,v.bucketInstanceId),!0},mu.prototype.removeBucketCrossTileIDs=function(d,v){for(var g in v.indexedSymbolInstances)for(var x=0,O=v.indexedSymbolInstances[g];x<O.length;x+=1)delete this.usedCrossTileIDs[d][O[x].crossTileID]},mu.prototype.removeStaleBuckets=function(d){var v=!1;for(var g in this.indexes){var x=this.indexes[g];for(var O in x)d[x[O].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,x[O]),delete x[O],v=!0)}return v};var Ws=function(){this.layerIndexes={},this.crossTileIDs=new ei,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ws.prototype.addLayer=function(d,v,g){var x=this.layerIndexes[d.id];x===void 0&&(x=this.layerIndexes[d.id]=new mu);var O=!1,F={};x.handleWrapJump(g);for(var z=0,Y=v;z<Y.length;z+=1){var ae=Y[z],be=ae.getBucket(d);be&&d.id===be.layerIds[0]&&(be.bucketInstanceId||(be.bucketInstanceId=++this.maxBucketInstanceId),x.addBucket(ae.tileID,be,this.crossTileIDs)&&(O=!0),F[be.bucketInstanceId]=!0)}return x.removeStaleBuckets(F)&&(O=!0),O},Ws.prototype.pruneUnusedLayers=function(d){var v={};for(var g in d.forEach(function(x){v[x]=!0}),this.layerIndexes)v[g]||delete this.layerIndexes[g]};var gu=function(d,v){return p.emitValidationErrors(d,v&&v.filter(function(g){return g.identifier!=="source.canvas"}))},Kl=p.pick(ct,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),fo=p.pick(ct,["setCenter","setZoom","setBearing","setPitch"]),sf=function(){var d={},v=p.styleSpec.$version;for(var g in p.styleSpec.$root){var x,O=p.styleSpec.$root[g];O.required&&(x=g==="version"?v:O.type==="array"?[]:{})!=null&&(d[g]=x)}return d}(),Fo=function(d){function v(g,x){var O=this;x===void 0&&(x={}),d.call(this),this.map=g,this.dispatcher=new Wt(Mt(),this),this.imageManager=new Se,this.imageManager.setEventedParent(this),this.glyphManager=new dt(g._requestManager,x.localIdeographFontFamily),this.lineAtlas=new Ut(256,512),this.crossTileSymbolIndex=new Ws,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new p.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",p.getReferrer());var F=this;this._rtlTextPluginCallback=v.registerForPluginStateChange(function(z){F.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:z.pluginStatus,pluginURL:z.pluginURL},function(Y,ae){if(p.triggerPluginCompletionEvent(Y),ae&&ae.every(function(De){return De}))for(var be in F.sourceCaches)F.sourceCaches[be].reload()})}),this.on("data",function(z){if(z.dataType==="source"&&z.sourceDataType==="metadata"){var Y=O.sourceCaches[z.sourceId];if(Y){var ae=Y.getSource();if(ae&&ae.vectorLayerIds)for(var be in O._layers){var De=O._layers[be];De.source===ae.id&&O._validateLayer(De)}}}})}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.loadURL=function(g,x){var O=this;x===void 0&&(x={}),this.fire(new p.Event("dataloading",{dataType:"style"}));var F=typeof x.validate=="boolean"?x.validate:!p.isMapboxURL(g);g=this.map._requestManager.normalizeStyleURL(g,x.accessToken);var z=this.map._requestManager.transformRequest(g,p.ResourceType.Style);this._request=p.getJSON(z,function(Y,ae){O._request=null,Y?O.fire(new p.ErrorEvent(Y)):ae&&O._load(ae,F)})},v.prototype.loadJSON=function(g,x){var O=this;x===void 0&&(x={}),this.fire(new p.Event("dataloading",{dataType:"style"})),this._request=p.browser.frame(function(){O._request=null,O._load(g,x.validate!==!1)})},v.prototype.loadEmpty=function(){this.fire(new p.Event("dataloading",{dataType:"style"})),this._load(sf,!1)},v.prototype._load=function(g,x){if(!x||!gu(this,p.validateStyle(g))){for(var O in this._loaded=!0,this.stylesheet=g,g.sources)this.addSource(O,g.sources[O],{validate:!1});g.sprite?this._loadSprite(g.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(g.glyphs);var F=Re(this.stylesheet.layers);this._order=F.map(function(be){return be.id}),this._layers={},this._serializedLayers={};for(var z=0,Y=F;z<Y.length;z+=1){var ae=Y[z];(ae=p.createStyleLayer(ae)).setEventedParent(this,{layer:{id:ae.id}}),this._layers[ae.id]=ae,this._serializedLayers[ae.id]=ae.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ut(this.stylesheet.light),this.fire(new p.Event("data",{dataType:"style"})),this.fire(new p.Event("style.load"))}},v.prototype._loadSprite=function(g){var x=this;this._spriteRequest=function(O,F,z){var Y,ae,be,De=p.browser.devicePixelRatio>1?"@2x":"",Me=p.getJSON(F.transformRequest(F.normalizeSpriteURL(O,De,".json"),p.ResourceType.SpriteJSON),function(Ze,et){Me=null,be||(be=Ze,Y=et,Ye())}),Ne=p.getImage(F.transformRequest(F.normalizeSpriteURL(O,De,".png"),p.ResourceType.SpriteImage),function(Ze,et){Ne=null,be||(be=Ze,ae=et,Ye())});function Ye(){if(be)z(be);else if(Y&&ae){var Ze=p.browser.getImageData(ae),et={};for(var Ve in Y){var tt=Y[Ve],ft=tt.width,xt=tt.height,Bt=tt.x,Pt=tt.y,Dt=tt.sdf,Yt=tt.pixelRatio,hr=tt.stretchX,or=tt.stretchY,Er=tt.content,Wr=new p.RGBAImage({width:ft,height:xt});p.RGBAImage.copy(Ze,Wr,{x:Bt,y:Pt},{x:0,y:0},{width:ft,height:xt}),et[Ve]={data:Wr,pixelRatio:Yt,sdf:Dt,stretchX:hr,stretchY:or,content:Er}}z(null,et)}}return{cancel:function(){Me&&(Me.cancel(),Me=null),Ne&&(Ne.cancel(),Ne=null)}}}(g,this.map._requestManager,function(O,F){if(x._spriteRequest=null,O)x.fire(new p.ErrorEvent(O));else if(F)for(var z in F)x.imageManager.addImage(z,F[z]);x.imageManager.setLoaded(!0),x._availableImages=x.imageManager.listImages(),x.dispatcher.broadcast("setImages",x._availableImages),x.fire(new p.Event("data",{dataType:"style"}))})},v.prototype._validateLayer=function(g){var x=this.sourceCaches[g.source];if(x){var O=g.sourceLayer;if(O){var F=x.getSource();(F.type==="geojson"||F.vectorLayerIds&&F.vectorLayerIds.indexOf(O)===-1)&&this.fire(new p.ErrorEvent(new Error('Source layer "'+O+'" does not exist on source "'+F.id+'" as specified by style layer "'+g.id+'"')))}}},v.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var g in this.sourceCaches)if(!this.sourceCaches[g].loaded())return!1;return!!this.imageManager.isLoaded()},v.prototype._serializeLayers=function(g){for(var x=[],O=0,F=g;O<F.length;O+=1){var z=this._layers[F[O]];z.type!=="custom"&&x.push(z.serialize())}return x},v.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var g in this.sourceCaches)if(this.sourceCaches[g].hasTransition())return!0;for(var x in this._layers)if(this._layers[x].hasTransition())return!0;return!1},v.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},v.prototype.update=function(g){if(this._loaded){var x=this._changed;if(this._changed){var O=Object.keys(this._updatedLayers),F=Object.keys(this._removedLayers);for(var z in(O.length||F.length)&&this._updateWorkerLayers(O,F),this._updatedSources){var Y=this._updatedSources[z];Y==="reload"?this._reloadSource(z):Y==="clear"&&this._clearSource(z)}for(var ae in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[ae].updateTransitions(g);this.light.updateTransitions(g),this._resetUpdates()}var be={};for(var De in this.sourceCaches){var Me=this.sourceCaches[De];be[De]=Me.used,Me.used=!1}for(var Ne=0,Ye=this._order;Ne<Ye.length;Ne+=1){var Ze=this._layers[Ye[Ne]];Ze.recalculate(g,this._availableImages),!Ze.isHidden(g.zoom)&&Ze.source&&(this.sourceCaches[Ze.source].used=!0)}for(var et in be){var Ve=this.sourceCaches[et];be[et]!==Ve.used&&Ve.fire(new p.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:et}))}this.light.recalculate(g),this.z=g.zoom,x&&this.fire(new p.Event("data",{dataType:"style"}))}},v.prototype._updateTilesForChangedImages=function(){var g=Object.keys(this._changedImages);if(g.length){for(var x in this.sourceCaches)this.sourceCaches[x].reloadTilesForDependencies(["icons","patterns"],g);this._changedImages={}}},v.prototype._updateWorkerLayers=function(g,x){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(g),removedIds:x})},v.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},v.prototype.setState=function(g){var x=this;if(this._checkLoaded(),gu(this,p.validateStyle(g)))return!1;(g=p.clone$1(g)).layers=Re(g.layers);var O=function(z,Y){if(!z)return[{command:ct.setStyle,args:[Y]}];var ae=[];try{if(!p.deepEqual(z.version,Y.version))return[{command:ct.setStyle,args:[Y]}];p.deepEqual(z.center,Y.center)||ae.push({command:ct.setCenter,args:[Y.center]}),p.deepEqual(z.zoom,Y.zoom)||ae.push({command:ct.setZoom,args:[Y.zoom]}),p.deepEqual(z.bearing,Y.bearing)||ae.push({command:ct.setBearing,args:[Y.bearing]}),p.deepEqual(z.pitch,Y.pitch)||ae.push({command:ct.setPitch,args:[Y.pitch]}),p.deepEqual(z.sprite,Y.sprite)||ae.push({command:ct.setSprite,args:[Y.sprite]}),p.deepEqual(z.glyphs,Y.glyphs)||ae.push({command:ct.setGlyphs,args:[Y.glyphs]}),p.deepEqual(z.transition,Y.transition)||ae.push({command:ct.setTransition,args:[Y.transition]}),p.deepEqual(z.light,Y.light)||ae.push({command:ct.setLight,args:[Y.light]});var be={},De=[];(function(Ne,Ye,Ze,et){var Ve;for(Ve in Ye=Ye||{},Ne=Ne||{})Ne.hasOwnProperty(Ve)&&(Ye.hasOwnProperty(Ve)||it(Ve,Ze,et));for(Ve in Ye)Ye.hasOwnProperty(Ve)&&(Ne.hasOwnProperty(Ve)?p.deepEqual(Ne[Ve],Ye[Ve])||(Ne[Ve].type==="geojson"&&Ye[Ve].type==="geojson"&&rn(Ne,Ye,Ve)?Ze.push({command:ct.setGeoJSONSourceData,args:[Ve,Ye[Ve].data]}):Qt(Ve,Ye,Ze,et)):jt(Ve,Ye,Ze))})(z.sources,Y.sources,De,be);var Me=[];z.layers&&z.layers.forEach(function(Ne){be[Ne.source]?ae.push({command:ct.removeLayer,args:[Ne.id]}):Me.push(Ne)}),ae=ae.concat(De),function(Ne,Ye,Ze){Ye=Ye||[];var et,Ve,tt,ft,xt,Bt,Pt,Dt=(Ne=Ne||[]).map(En),Yt=Ye.map(En),hr=Ne.reduce(Mn,{}),or=Ye.reduce(Mn,{}),Er=Dt.slice(),Wr=Object.create(null);for(et=0,Ve=0;et<Dt.length;et++)or.hasOwnProperty(tt=Dt[et])?Ve++:(Ze.push({command:ct.removeLayer,args:[tt]}),Er.splice(Er.indexOf(tt,Ve),1));for(et=0,Ve=0;et<Yt.length;et++)Er[Er.length-1-et]!==(tt=Yt[Yt.length-1-et])&&(hr.hasOwnProperty(tt)?(Ze.push({command:ct.removeLayer,args:[tt]}),Er.splice(Er.lastIndexOf(tt,Er.length-Ve),1)):Ve++,Ze.push({command:ct.addLayer,args:[or[tt],Bt=Er[Er.length-et]]}),Er.splice(Er.length-et,0,tt),Wr[tt]=!0);for(et=0;et<Yt.length;et++)if(ft=hr[tt=Yt[et]],xt=or[tt],!Wr[tt]&&!p.deepEqual(ft,xt))if(p.deepEqual(ft.source,xt.source)&&p.deepEqual(ft["source-layer"],xt["source-layer"])&&p.deepEqual(ft.type,xt.type)){for(Pt in un(ft.layout,xt.layout,Ze,tt,null,ct.setLayoutProperty),un(ft.paint,xt.paint,Ze,tt,null,ct.setPaintProperty),p.deepEqual(ft.filter,xt.filter)||Ze.push({command:ct.setFilter,args:[tt,xt.filter]}),p.deepEqual(ft.minzoom,xt.minzoom)&&p.deepEqual(ft.maxzoom,xt.maxzoom)||Ze.push({command:ct.setLayerZoomRange,args:[tt,xt.minzoom,xt.maxzoom]}),ft)ft.hasOwnProperty(Pt)&&Pt!=="layout"&&Pt!=="paint"&&Pt!=="filter"&&Pt!=="metadata"&&Pt!=="minzoom"&&Pt!=="maxzoom"&&(Pt.indexOf("paint.")===0?un(ft[Pt],xt[Pt],Ze,tt,Pt.slice(6),ct.setPaintProperty):p.deepEqual(ft[Pt],xt[Pt])||Ze.push({command:ct.setLayerProperty,args:[tt,Pt,xt[Pt]]}));for(Pt in xt)xt.hasOwnProperty(Pt)&&!ft.hasOwnProperty(Pt)&&Pt!=="layout"&&Pt!=="paint"&&Pt!=="filter"&&Pt!=="metadata"&&Pt!=="minzoom"&&Pt!=="maxzoom"&&(Pt.indexOf("paint.")===0?un(ft[Pt],xt[Pt],Ze,tt,Pt.slice(6),ct.setPaintProperty):p.deepEqual(ft[Pt],xt[Pt])||Ze.push({command:ct.setLayerProperty,args:[tt,Pt,xt[Pt]]}))}else Ze.push({command:ct.removeLayer,args:[tt]}),Bt=Er[Er.lastIndexOf(tt)+1],Ze.push({command:ct.addLayer,args:[xt,Bt]})}(Me,Y.layers,ae)}catch(Ne){console.warn("Unable to compute style diff:",Ne),ae=[{command:ct.setStyle,args:[Y]}]}return ae}(this.serialize(),g).filter(function(z){return!(z.command in fo)});if(O.length===0)return!1;var F=O.filter(function(z){return!(z.command in Kl)});if(F.length>0)throw new Error("Unimplemented: "+F.map(function(z){return z.command}).join(", ")+".");return O.forEach(function(z){z.command!=="setTransition"&&x[z.command].apply(x,z.args)}),this.stylesheet=g,!0},v.prototype.addImage=function(g,x){if(this.getImage(g))return this.fire(new p.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(g,x),this._afterImageUpdated(g)},v.prototype.updateImage=function(g,x){this.imageManager.updateImage(g,x)},v.prototype.getImage=function(g){return this.imageManager.getImage(g)},v.prototype.removeImage=function(g){if(!this.getImage(g))return this.fire(new p.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(g),this._afterImageUpdated(g)},v.prototype._afterImageUpdated=function(g){this._availableImages=this.imageManager.listImages(),this._changedImages[g]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new p.Event("data",{dataType:"style"}))},v.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},v.prototype.addSource=function(g,x,O){var F=this;if(O===void 0&&(O={}),this._checkLoaded(),this.sourceCaches[g]!==void 0)throw new Error("There is already a source with this ID");if(!x.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(x).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(x.type)>=0&&this._validate(p.validateStyle.source,"sources."+g,x,null,O))){this.map&&this.map._collectResourceTiming&&(x.collectResourceTiming=!0);var z=this.sourceCaches[g]=new Ie(g,x,this.dispatcher);z.style=this,z.setEventedParent(this,function(){return{isSourceLoaded:F.loaded(),source:z.serialize(),sourceId:g}}),z.onAdd(this.map),this._changed=!0}},v.prototype.removeSource=function(g){if(this._checkLoaded(),this.sourceCaches[g]===void 0)throw new Error("There is no source with this ID");for(var x in this._layers)if(this._layers[x].source===g)return this.fire(new p.ErrorEvent(new Error('Source "'+g+'" cannot be removed while layer "'+x+'" is using it.')));var O=this.sourceCaches[g];delete this.sourceCaches[g],delete this._updatedSources[g],O.fire(new p.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:g})),O.setEventedParent(null),O.clearTiles(),O.onRemove&&O.onRemove(this.map),this._changed=!0},v.prototype.setGeoJSONSourceData=function(g,x){this._checkLoaded(),this.sourceCaches[g].getSource().setData(x),this._changed=!0},v.prototype.getSource=function(g){return this.sourceCaches[g]&&this.sourceCaches[g].getSource()},v.prototype.addLayer=function(g,x,O){O===void 0&&(O={}),this._checkLoaded();var F=g.id;if(this.getLayer(F))this.fire(new p.ErrorEvent(new Error('Layer with id "'+F+'" already exists on this map')));else{var z;if(g.type==="custom"){if(gu(this,p.validateCustomStyleLayer(g)))return;z=p.createStyleLayer(g)}else{if(typeof g.source=="object"&&(this.addSource(F,g.source),g=p.clone$1(g),g=p.extend(g,{source:F})),this._validate(p.validateStyle.layer,"layers."+F,g,{arrayIndex:-1},O))return;z=p.createStyleLayer(g),this._validateLayer(z),z.setEventedParent(this,{layer:{id:F}}),this._serializedLayers[z.id]=z.serialize()}var Y=x?this._order.indexOf(x):this._order.length;if(x&&Y===-1)this.fire(new p.ErrorEvent(new Error('Layer with id "'+x+'" does not exist on this map.')));else{if(this._order.splice(Y,0,F),this._layerOrderChanged=!0,this._layers[F]=z,this._removedLayers[F]&&z.source&&z.type!=="custom"){var ae=this._removedLayers[F];delete this._removedLayers[F],ae.type!==z.type?this._updatedSources[z.source]="clear":(this._updatedSources[z.source]="reload",this.sourceCaches[z.source].pause())}this._updateLayer(z),z.onAdd&&z.onAdd(this.map)}}},v.prototype.moveLayer=function(g,x){if(this._checkLoaded(),this._changed=!0,this._layers[g]){if(g!==x){var O=this._order.indexOf(g);this._order.splice(O,1);var F=x?this._order.indexOf(x):this._order.length;x&&F===-1?this.fire(new p.ErrorEvent(new Error('Layer with id "'+x+'" does not exist on this map.'))):(this._order.splice(F,0,g),this._layerOrderChanged=!0)}}else this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be moved.")))},v.prototype.removeLayer=function(g){this._checkLoaded();var x=this._layers[g];if(x){x.setEventedParent(null);var O=this._order.indexOf(g);this._order.splice(O,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[g]=x,delete this._layers[g],delete this._serializedLayers[g],delete this._updatedLayers[g],delete this._updatedPaintProps[g],x.onRemove&&x.onRemove(this.map)}else this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be removed.")))},v.prototype.getLayer=function(g){return this._layers[g]},v.prototype.hasLayer=function(g){return g in this._layers},v.prototype.setLayerZoomRange=function(g,x,O){this._checkLoaded();var F=this.getLayer(g);F?F.minzoom===x&&F.maxzoom===O||(x!=null&&(F.minzoom=x),O!=null&&(F.maxzoom=O),this._updateLayer(F)):this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot have zoom extent.")))},v.prototype.setFilter=function(g,x,O){O===void 0&&(O={}),this._checkLoaded();var F=this.getLayer(g);if(F){if(!p.deepEqual(F.filter,x))return x==null?(F.filter=void 0,void this._updateLayer(F)):void(this._validate(p.validateStyle.filter,"layers."+F.id+".filter",x,null,O)||(F.filter=p.clone$1(x),this._updateLayer(F)))}else this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be filtered.")))},v.prototype.getFilter=function(g){return p.clone$1(this.getLayer(g).filter)},v.prototype.setLayoutProperty=function(g,x,O,F){F===void 0&&(F={}),this._checkLoaded();var z=this.getLayer(g);z?p.deepEqual(z.getLayoutProperty(x),O)||(z.setLayoutProperty(x,O,F),this._updateLayer(z)):this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},v.prototype.getLayoutProperty=function(g,x){var O=this.getLayer(g);if(O)return O.getLayoutProperty(x);this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style.")))},v.prototype.setPaintProperty=function(g,x,O,F){F===void 0&&(F={}),this._checkLoaded();var z=this.getLayer(g);z?p.deepEqual(z.getPaintProperty(x),O)||(z.setPaintProperty(x,O,F)&&this._updateLayer(z),this._changed=!0,this._updatedPaintProps[g]=!0):this.fire(new p.ErrorEvent(new Error("The layer '"+g+"' does not exist in the map's style and cannot be styled.")))},v.prototype.getPaintProperty=function(g,x){return this.getLayer(g).getPaintProperty(x)},v.prototype.setFeatureState=function(g,x){this._checkLoaded();var O=g.source,F=g.sourceLayer,z=this.sourceCaches[O];if(z!==void 0){var Y=z.getSource().type;Y==="geojson"&&F?this.fire(new p.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):Y!=="vector"||F?(g.id===void 0&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),z.setFeatureState(F,g.id,x)):this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},v.prototype.removeFeatureState=function(g,x){this._checkLoaded();var O=g.source,F=this.sourceCaches[O];if(F!==void 0){var z=F.getSource().type,Y=z==="vector"?g.sourceLayer:void 0;z!=="vector"||Y?x&&typeof g.id!="string"&&typeof g.id!="number"?this.fire(new p.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):F.removeFeatureState(Y,g.id,x):this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error("The source '"+O+"' does not exist in the map's style.")))},v.prototype.getFeatureState=function(g){this._checkLoaded();var x=g.source,O=g.sourceLayer,F=this.sourceCaches[x];if(F!==void 0){if(F.getSource().type!=="vector"||O)return g.id===void 0&&this.fire(new p.ErrorEvent(new Error("The feature id parameter must be provided."))),F.getFeatureState(O,g.id);this.fire(new p.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new p.ErrorEvent(new Error("The source '"+x+"' does not exist in the map's style.")))},v.prototype.getTransition=function(){return p.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},v.prototype.serialize=function(){return p.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:p.mapObject(this.sourceCaches,function(g){return g.serialize()}),layers:this._serializeLayers(this._order)},function(g){return g!==void 0})},v.prototype._updateLayer=function(g){this._updatedLayers[g.id]=!0,g.source&&!this._updatedSources[g.source]&&this.sourceCaches[g.source].getSource().type!=="raster"&&(this._updatedSources[g.source]="reload",this.sourceCaches[g.source].pause()),this._changed=!0},v.prototype._flattenAndSortRenderedFeatures=function(g){for(var x=this,O=function(hr){return x._layers[hr].type==="fill-extrusion"},F={},z=[],Y=this._order.length-1;Y>=0;Y--){var ae=this._order[Y];if(O(ae)){F[ae]=Y;for(var be=0,De=g;be<De.length;be+=1){var Me=De[be][ae];if(Me)for(var Ne=0,Ye=Me;Ne<Ye.length;Ne+=1)z.push(Ye[Ne])}}}z.sort(function(hr,or){return or.intersectionZ-hr.intersectionZ});for(var Ze=[],et=this._order.length-1;et>=0;et--){var Ve=this._order[et];if(O(Ve))for(var tt=z.length-1;tt>=0;tt--){var ft=z[tt].feature;if(F[ft.layer.id]<et)break;Ze.push(ft),z.pop()}else for(var xt=0,Bt=g;xt<Bt.length;xt+=1){var Pt=Bt[xt][Ve];if(Pt)for(var Dt=0,Yt=Pt;Dt<Yt.length;Dt+=1)Ze.push(Yt[Dt].feature)}}return Ze},v.prototype.queryRenderedFeatures=function(g,x,O){x&&x.filter&&this._validate(p.validateStyle.filter,"queryRenderedFeatures.filter",x.filter,null,x);var F={};if(x&&x.layers){if(!Array.isArray(x.layers))return this.fire(new p.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var z=0,Y=x.layers;z<Y.length;z+=1){var ae=Y[z],be=this._layers[ae];if(!be)return this.fire(new p.ErrorEvent(new Error("The layer '"+ae+"' does not exist in the map's style and cannot be queried for features."))),[];F[be.source]=!0}}var De=[];for(var Me in x.availableImages=this._availableImages,this.sourceCaches)x.layers&&!F[Me]||De.push(Ct(this.sourceCaches[Me],this._layers,this._serializedLayers,g,x,O));return this.placement&&De.push(function(Ne,Ye,Ze,et,Ve,tt,ft){for(var xt={},Bt=tt.queryRenderedSymbols(et),Pt=[],Dt=0,Yt=Object.keys(Bt).map(Number);Dt<Yt.length;Dt+=1)Pt.push(ft[Yt[Dt]]);Pt.sort(Tt);for(var hr=function(){var Mr=Er[or],vn=Mr.featureIndex.lookupSymbolFeatures(Bt[Mr.bucketInstanceId],Ye,Mr.bucketIndex,Mr.sourceLayerIndex,Ve.filter,Ve.layers,Ve.availableImages,Ne);for(var Cr in vn){var gn=xt[Cr]=xt[Cr]||[],Dn=vn[Cr];Dn.sort(function(An,nn){var ln=Mr.featureSortOrder;if(ln){var xo=ln.indexOf(An.featureIndex);return ln.indexOf(nn.featureIndex)-xo}return nn.featureIndex-An.featureIndex});for(var cn=0,sn=Dn;cn<sn.length;cn+=1)gn.push(sn[cn])}},or=0,Er=Pt;or<Er.length;or+=1)hr();var Wr=function(Mr){xt[Mr].forEach(function(vn){var Cr=vn.feature,gn=Ze[Ne[Mr].source].getFeatureState(Cr.layer["source-layer"],Cr.id);Cr.source=Cr.layer.source,Cr.layer["source-layer"]&&(Cr.sourceLayer=Cr.layer["source-layer"]),Cr.state=gn})};for(var Vr in xt)Wr(Vr);return xt}(this._layers,this._serializedLayers,this.sourceCaches,g,x,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(De)},v.prototype.querySourceFeatures=function(g,x){x&&x.filter&&this._validate(p.validateStyle.filter,"querySourceFeatures.filter",x.filter,null,x);var O=this.sourceCaches[g];return O?function(F,z){for(var Y=F.getRenderableIds().map(function(Ye){return F.getTileByID(Ye)}),ae=[],be={},De=0;De<Y.length;De++){var Me=Y[De],Ne=Me.tileID.canonical.key;be[Ne]||(be[Ne]=!0,Me.querySourceFeatures(ae,z))}return ae}(O,x):[]},v.prototype.addSourceType=function(g,x,O){return v.getSourceType(g)?O(new Error('A source type called "'+g+'" already exists.')):(v.setSourceType(g,x),x.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:g,url:x.workerSourceURL},O):O(null,null))},v.prototype.getLight=function(){return this.light.getLight()},v.prototype.setLight=function(g,x){x===void 0&&(x={}),this._checkLoaded();var O=this.light.getLight(),F=!1;for(var z in g)if(!p.deepEqual(g[z],O[z])){F=!0;break}if(F){var Y={now:p.browser.now(),transition:p.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(g,x),this.light.updateTransitions(Y)}},v.prototype._validate=function(g,x,O,F,z){return z===void 0&&(z={}),(!z||z.validate!==!1)&&gu(this,g.call(p.validateStyle,p.extend({key:x,style:this.serialize(),value:O,styleSpec:p.styleSpec},F)))},v.prototype._remove=function(){for(var g in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),p.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[g].setEventedParent(null);for(var x in this.sourceCaches)this.sourceCaches[x].clearTiles(),this.sourceCaches[x].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},v.prototype._clearSource=function(g){this.sourceCaches[g].clearTiles()},v.prototype._reloadSource=function(g){this.sourceCaches[g].resume(),this.sourceCaches[g].reload()},v.prototype._updateSources=function(g){for(var x in this.sourceCaches)this.sourceCaches[x].update(g)},v.prototype._generateCollisionBoxes=function(){for(var g in this.sourceCaches)this._reloadSource(g)},v.prototype._updatePlacement=function(g,x,O,F,z){z===void 0&&(z=!1);for(var Y=!1,ae=!1,be={},De=0,Me=this._order;De<Me.length;De+=1){var Ne=this._layers[Me[De]];if(Ne.type==="symbol"){if(!be[Ne.source]){var Ye=this.sourceCaches[Ne.source];be[Ne.source]=Ye.getRenderableIds(!0).map(function(ft){return Ye.getTileByID(ft)}).sort(function(ft,xt){return xt.tileID.overscaledZ-ft.tileID.overscaledZ||(ft.tileID.isLessThan(xt.tileID)?-1:1)})}var Ze=this.crossTileSymbolIndex.addLayer(Ne,be[Ne.source],g.center.lng);Y=Y||Ze}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((z=z||this._layerOrderChanged||O===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(p.browser.now(),g.zoom))&&(this.pauseablePlacement=new Sc(g,this._order,z,x,O,F,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,be),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(p.browser.now()),ae=!0),Y&&this.pauseablePlacement.placement.setStale()),ae||Y)for(var et=0,Ve=this._order;et<Ve.length;et+=1){var tt=this._layers[Ve[et]];tt.type==="symbol"&&this.placement.updateLayerOpacities(tt,be[tt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(p.browser.now())},v.prototype._releaseSymbolFadeTiles=function(){for(var g in this.sourceCaches)this.sourceCaches[g].releaseSymbolFadeTiles()},v.prototype.getImages=function(g,x,O){this.imageManager.getImages(x.icons,O),this._updateTilesForChangedImages();var F=this.sourceCaches[x.source];F&&F.setDependencies(x.tileID.key,x.type,x.icons)},v.prototype.getGlyphs=function(g,x,O){this.glyphManager.getGlyphs(x.stacks,O)},v.prototype.getResource=function(g,x,O){return p.makeRequest(x,O)},v}(p.Evented);Fo.getSourceType=function(d){return Kt[d]},Fo.setSourceType=function(d,v){Kt[d]=v},Fo.registerForPluginStateChange=p.registerForPluginStateChange;var ho=p.createLayout([{name:"a_pos",type:"Int16",components:2}]),Vu=bi(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),Ec=bi(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Dg=bi(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),sl=bi(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),um=bi("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),$s=bi(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),rp=bi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),rd=bi("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Hu=bi("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),nd=bi("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),cm=bi(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Qi=bi(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),ll=bi(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),np=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ma=bi(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Tc=bi(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),ul=bi(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),Ac=bi(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),lf=bi(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),kc=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),Ls=bi(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),zi=bi(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),uf=bi(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),vu=bi(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),cf=bi(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),ip=bi(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function bi(d,v){var g=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,x=v.match(/attribute ([\w]+) ([\w]+)/g),O=d.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),F=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),z=F?F.concat(O):O,Y={};return{fragmentSource:d=d.replace(g,function(ae,be,De,Me,Ne){return Y[Ne]=!0,be==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
varying `+De+" "+Me+" "+Ne+`;
#else
uniform `+De+" "+Me+" u_"+Ne+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+Ne+`
    `+De+" "+Me+" "+Ne+" = u_"+Ne+`;
#endif
`}),vertexSource:v=v.replace(g,function(ae,be,De,Me,Ne){var Ye=Me==="float"?"vec2":"vec4",Ze=Ne.match(/color/)?"color":Ye;return Y[Ne]?be==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
uniform lowp float u_`+Ne+`_t;
attribute `+De+" "+Ye+" a_"+Ne+`;
varying `+De+" "+Me+" "+Ne+`;
#else
uniform `+De+" "+Me+" u_"+Ne+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Ne+" = a_"+Ne+`;
#else
    `+De+" "+Me+" "+Ne+" = u_"+Ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+Ne+" = unpack_mix_"+Ze+"(a_"+Ne+", u_"+Ne+`_t);
#else
    `+De+" "+Me+" "+Ne+" = u_"+Ne+`;
#endif
`:be==="define"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
uniform lowp float u_`+Ne+`_t;
attribute `+De+" "+Ye+" a_"+Ne+`;
#else
uniform `+De+" "+Me+" u_"+Ne+`;
#endif
`:Ze==="vec4"?`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+De+" "+Me+" "+Ne+" = a_"+Ne+`;
#else
    `+De+" "+Me+" "+Ne+" = u_"+Ne+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+Ne+`
    `+De+" "+Me+" "+Ne+" = unpack_mix_"+Ze+"(a_"+Ne+", u_"+Ne+`_t);
#else
    `+De+" "+Me+" "+Ne+" = u_"+Ne+`;
#endif
`}),staticAttributes:x,staticUniforms:z}}var Og=Object.freeze({__proto__:null,prelude:Vu,background:Ec,backgroundPattern:Dg,circle:sl,clippingMask:um,heatmap:$s,heatmapTexture:rp,collisionBox:rd,collisionCircle:Hu,debug:nd,fill:cm,fillOutline:Qi,fillOutlinePattern:ll,fillPattern:np,fillExtrusion:Ma,fillExtrusionPattern:Tc,hillshadePrepare:ul,hillshade:Ac,line:lf,lineGradient:kc,linePattern:Ls,lineSDF:zi,raster:uf,symbolIcon:vu,symbolSDF:cf,symbolTextAndIcon:ip}),Qf=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function id(d){for(var v=[],g=0;g<d.length;g++)if(d[g]!==null){var x=d[g].split(" ");v.push(x.pop())}return v}Qf.prototype.bind=function(d,v,g,x,O,F,z,Y){this.context=d;for(var ae=this.boundPaintVertexBuffers.length!==x.length,be=0;!ae&&be<x.length;be++)this.boundPaintVertexBuffers[be]!==x[be]&&(ae=!0);d.extVertexArrayObject&&this.vao&&this.boundProgram===v&&this.boundLayoutVertexBuffer===g&&!ae&&this.boundIndexBuffer===O&&this.boundVertexOffset===F&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===Y?(d.bindVertexArrayOES.set(this.vao),z&&z.bind(),O&&O.dynamicDraw&&O.bind(),Y&&Y.bind()):this.freshBind(v,g,x,O,F,z,Y)},Qf.prototype.freshBind=function(d,v,g,x,O,F,z){var Y,ae=d.numAttributes,be=this.context,De=be.gl;if(be.extVertexArrayObject)this.vao&&this.destroy(),this.vao=be.extVertexArrayObject.createVertexArrayOES(),be.bindVertexArrayOES.set(this.vao),Y=0,this.boundProgram=d,this.boundLayoutVertexBuffer=v,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=x,this.boundVertexOffset=O,this.boundDynamicVertexBuffer=F,this.boundDynamicVertexBuffer2=z;else{Y=be.currentNumAttributes||0;for(var Me=ae;Me<Y;Me++)De.disableVertexAttribArray(Me)}v.enableAttributes(De,d);for(var Ne=0,Ye=g;Ne<Ye.length;Ne+=1)Ye[Ne].enableAttributes(De,d);F&&F.enableAttributes(De,d),z&&z.enableAttributes(De,d),v.bind(),v.setVertexAttribPointers(De,d,O);for(var Ze=0,et=g;Ze<et.length;Ze+=1){var Ve=et[Ze];Ve.bind(),Ve.setVertexAttribPointers(De,d,O)}F&&(F.bind(),F.setVertexAttribPointers(De,d,O)),x&&x.bind(),z&&(z.bind(),z.setVertexAttribPointers(De,d,O)),be.currentNumAttributes=ae},Qf.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var op=function(d,v,g,x,O,F){var z=d.gl;this.program=z.createProgram();for(var Y=id(g.staticAttributes),ae=x?x.getBinderAttributes():[],be=Y.concat(ae),De=g.staticUniforms?id(g.staticUniforms):[],Me=x?x.getBinderUniforms():[],Ne=[],Ye=0,Ze=De.concat(Me);Ye<Ze.length;Ye+=1){var et=Ze[Ye];Ne.indexOf(et)<0&&Ne.push(et)}var Ve=x?x.defines():[];F&&Ve.push("#define OVERDRAW_INSPECTOR;");var tt=Ve.concat(Vu.fragmentSource,g.fragmentSource).join(`
`),ft=Ve.concat(Vu.vertexSource,g.vertexSource).join(`
`),xt=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(xt,tt),z.compileShader(xt),z.attachShader(this.program,xt);var Bt=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(Bt,ft),z.compileShader(Bt),z.attachShader(this.program,Bt),this.attributes={};var Pt={};this.numAttributes=be.length;for(var Dt=0;Dt<this.numAttributes;Dt++)be[Dt]&&(z.bindAttribLocation(this.program,Dt,be[Dt]),this.attributes[be[Dt]]=Dt);z.linkProgram(this.program),z.deleteShader(Bt),z.deleteShader(xt);for(var Yt=0;Yt<Ne.length;Yt++){var hr=Ne[Yt];if(hr&&!Pt[hr]){var or=z.getUniformLocation(this.program,hr);or&&(Pt[hr]=or)}}this.fixedUniforms=O(d,Pt),this.binderUniforms=x?x.getUniforms(d,Pt):[]}}};function Pg(d,v,g){var x=1/oo(g,1,v.transform.tileZoom),O=Math.pow(2,g.tileID.overscaledZ),F=g.tileSize*Math.pow(2,v.transform.tileZoom)/O,z=F*(g.tileID.canonical.x+g.tileID.wrap*O),Y=F*g.tileID.canonical.y;return{u_image:0,u_texsize:g.imageAtlasTexture.size,u_scale:[x,d.fromScale,d.toScale],u_fade:d.t,u_pixel_coord_upper:[z>>16,Y>>16],u_pixel_coord_lower:[65535&z,65535&Y]}}op.prototype.draw=function(d,v,g,x,O,F,z,Y,ae,be,De,Me,Ne,Ye,Ze,et){var Ve,tt=d.gl;if(!this.failedToCreate){for(var ft in d.program.set(this.program),d.setDepthMode(g),d.setStencilMode(x),d.setColorMode(O),d.setCullFace(F),this.fixedUniforms)this.fixedUniforms[ft].set(z[ft]);Ye&&Ye.setUniforms(d,this.binderUniforms,Me,{zoom:Ne});for(var xt=(Ve={},Ve[tt.LINES]=2,Ve[tt.TRIANGLES]=3,Ve[tt.LINE_STRIP]=1,Ve)[v],Bt=0,Pt=De.get();Bt<Pt.length;Bt+=1){var Dt=Pt[Bt],Yt=Dt.vaos||(Dt.vaos={});(Yt[Y]||(Yt[Y]=new Qf)).bind(d,this,ae,Ye?Ye.getPaintVertexBuffers():[],be,Dt.vertexOffset,Ze,et),tt.drawElements(v,Dt.primitiveLength*xt,tt.UNSIGNED_SHORT,Dt.primitiveOffset*xt*2)}}};var ap=function(d,v,g,x){var O=v.style.light,F=O.properties.get("position"),z=[F.x,F.y,F.z],Y=p.create$1();O.properties.get("anchor")==="viewport"&&p.fromRotation(Y,-v.transform.angle),p.transformMat3(z,z,Y);var ae=O.properties.get("color");return{u_matrix:d,u_lightpos:z,u_lightintensity:O.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+g,u_opacity:x}},da=function(d,v,g,x,O,F,z){return p.extend(ap(d,v,g,x),Pg(F,v,z),{u_height_factor:-Math.pow(2,O.overscaledZ)/z.tileSize/8})},yu=function(d){return{u_matrix:d}},Rs=function(d,v,g,x){return p.extend(yu(d),Pg(g,v,x))},Zl=function(d,v){return{u_matrix:d,u_world:v}},eh=function(d,v,g,x,O){return p.extend(Rs(d,v,g,x),{u_world:O})},od=function(d,v,g,x){var O,F,z=d.transform;if(x.paint.get("circle-pitch-alignment")==="map"){var Y=oo(g,1,z.zoom);O=!0,F=[Y,Y]}else O=!1,F=z.pixelsToGLUnits;return{u_camera_to_center_distance:z.cameraToCenterDistance,u_scale_with_map:+(x.paint.get("circle-pitch-scale")==="map"),u_matrix:d.translatePosMatrix(v.posMatrix,g,x.paint.get("circle-translate"),x.paint.get("circle-translate-anchor")),u_pitch_with_map:+O,u_device_pixel_ratio:p.browser.devicePixelRatio,u_extrude_scale:F}},Cc=function(d,v,g){var x=oo(g,1,v.zoom),O=Math.pow(2,v.zoom-g.tileID.overscaledZ),F=g.tileID.overscaleFactor();return{u_matrix:d,u_camera_to_center_distance:v.cameraToCenterDistance,u_pixels_to_tile_units:x,u_extrude_scale:[v.pixelsToGLUnits[0]/(x*O),v.pixelsToGLUnits[1]/(x*O)],u_overscale_factor:F}},Yl=function(d,v,g){return{u_matrix:d,u_inv_matrix:v,u_camera_to_center_distance:g.cameraToCenterDistance,u_viewport_size:[g.width,g.height]}},cl=function(d,v,g){return g===void 0&&(g=1),{u_matrix:d,u_color:v,u_overlay:0,u_overlay_scale:g}},Wu=function(d){return{u_matrix:d}},ff=function(d,v,g,x){return{u_matrix:d,u_extrude_scale:oo(v,1,g),u_intensity:x}},th=function(d,v,g){var x=d.transform;return{u_matrix:Gs(d,v,g),u_ratio:1/oo(v,1,x.zoom),u_device_pixel_ratio:p.browser.devicePixelRatio,u_units_to_pixels:[1/x.pixelsToGLUnits[0],1/x.pixelsToGLUnits[1]]}},Gi=function(d,v,g,x){return p.extend(th(d,v,g),{u_image:0,u_image_height:x})},hf=function(d,v,g,x){var O=d.transform,F=$a(v,O);return{u_matrix:Gs(d,v,g),u_texsize:v.imageAtlasTexture.size,u_ratio:1/oo(v,1,O.zoom),u_device_pixel_ratio:p.browser.devicePixelRatio,u_image:0,u_scale:[F,x.fromScale,x.toScale],u_fade:x.t,u_units_to_pixels:[1/O.pixelsToGLUnits[0],1/O.pixelsToGLUnits[1]]}},sp=function(d,v,g,x,O){var F=d.lineAtlas,z=$a(v,d.transform),Y=g.layout.get("line-cap")==="round",ae=F.getDash(x.from,Y),be=F.getDash(x.to,Y),De=ae.width*O.fromScale,Me=be.width*O.toScale;return p.extend(th(d,v,g),{u_patternscale_a:[z/De,-ae.height/2],u_patternscale_b:[z/Me,-be.height/2],u_sdfgamma:F.width/(256*Math.min(De,Me)*p.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:ae.y,u_tex_y_b:be.y,u_mix:O.t})};function $a(d,v){return 1/oo(d,1,v.tileZoom)}function Gs(d,v,g){return d.translatePosMatrix(v.tileID.posMatrix,v,g.paint.get("line-translate"),g.paint.get("line-translate-anchor"))}var Mg=function(d,v,g,x,O){return{u_matrix:d,u_tl_parent:v,u_scale_parent:g,u_buffer_scale:1,u_fade_t:x.mix,u_opacity:x.opacity*O.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:O.paint.get("raster-brightness-min"),u_brightness_high:O.paint.get("raster-brightness-max"),u_saturation_factor:(z=O.paint.get("raster-saturation"),z>0?1-1/(1.001-z):-z),u_contrast_factor:(F=O.paint.get("raster-contrast"),F>0?1/(1-F):1+F),u_spin_weights:fm(O.paint.get("raster-hue-rotate"))};var F,z};function fm(d){d*=Math.PI/180;var v=Math.sin(d),g=Math.cos(d);return[(2*g+1)/3,(-Math.sqrt(3)*v-g+1)/3,(Math.sqrt(3)*v-g+1)/3]}var lp,Xl=function(d,v,g,x,O,F,z,Y,ae,be){var De=O.transform;return{u_is_size_zoom_constant:+(d==="constant"||d==="source"),u_is_size_feature_constant:+(d==="constant"||d==="camera"),u_size_t:v?v.uSizeT:0,u_size:v?v.uSize:0,u_camera_to_center_distance:De.cameraToCenterDistance,u_pitch:De.pitch/360*2*Math.PI,u_rotate_symbol:+g,u_aspect_ratio:De.width/De.height,u_fade_change:O.options.fadeDuration?O.symbolFadeChange:1,u_matrix:F,u_label_plane_matrix:z,u_coord_matrix:Y,u_is_text:+ae,u_pitch_with_map:+x,u_texsize:be,u_texture:0}},Fs=function(d,v,g,x,O,F,z,Y,ae,be,De){var Me=O.transform;return p.extend(Xl(d,v,g,x,O,F,z,Y,ae,be),{u_gamma_scale:x?Math.cos(Me._pitch)*Me.cameraToCenterDistance:1,u_device_pixel_ratio:p.browser.devicePixelRatio,u_is_halo:+De})},rh=function(d,v,g,x,O,F,z,Y,ae,be){return p.extend(Fs(d,v,g,x,O,F,z,Y,!0,ae,!0),{u_texsize_icon:be,u_texture_icon:1})},nh=function(d,v,g){return{u_matrix:d,u_opacity:v,u_color:g}},bu=function(d,v,g,x,O,F){return p.extend(function(z,Y,ae,be){var De=ae.imageManager.getPattern(z.from.toString()),Me=ae.imageManager.getPattern(z.to.toString()),Ne=ae.imageManager.getPixelSize(),Ye=Ne.width,Ze=Ne.height,et=Math.pow(2,be.tileID.overscaledZ),Ve=be.tileSize*Math.pow(2,ae.transform.tileZoom)/et,tt=Ve*(be.tileID.canonical.x+be.tileID.wrap*et),ft=Ve*be.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:De.tl,u_pattern_br_a:De.br,u_pattern_tl_b:Me.tl,u_pattern_br_b:Me.br,u_texsize:[Ye,Ze],u_mix:Y.t,u_pattern_size_a:De.displaySize,u_pattern_size_b:Me.displaySize,u_scale_a:Y.fromScale,u_scale_b:Y.toScale,u_tile_units_to_pixels:1/oo(be,1,ae.transform.tileZoom),u_pixel_coord_upper:[tt>>16,ft>>16],u_pixel_coord_lower:[65535&tt,65535&ft]}}(x,F,g,O),{u_matrix:d,u_opacity:v})},hm={fillExtrusion:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_lightpos:new p.Uniform3f(d,v.u_lightpos),u_lightintensity:new p.Uniform1f(d,v.u_lightintensity),u_lightcolor:new p.Uniform3f(d,v.u_lightcolor),u_vertical_gradient:new p.Uniform1f(d,v.u_vertical_gradient),u_opacity:new p.Uniform1f(d,v.u_opacity)}},fillExtrusionPattern:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_lightpos:new p.Uniform3f(d,v.u_lightpos),u_lightintensity:new p.Uniform1f(d,v.u_lightintensity),u_lightcolor:new p.Uniform3f(d,v.u_lightcolor),u_vertical_gradient:new p.Uniform1f(d,v.u_vertical_gradient),u_height_factor:new p.Uniform1f(d,v.u_height_factor),u_image:new p.Uniform1i(d,v.u_image),u_texsize:new p.Uniform2f(d,v.u_texsize),u_pixel_coord_upper:new p.Uniform2f(d,v.u_pixel_coord_upper),u_pixel_coord_lower:new p.Uniform2f(d,v.u_pixel_coord_lower),u_scale:new p.Uniform3f(d,v.u_scale),u_fade:new p.Uniform1f(d,v.u_fade),u_opacity:new p.Uniform1f(d,v.u_opacity)}},fill:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix)}},fillPattern:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_image:new p.Uniform1i(d,v.u_image),u_texsize:new p.Uniform2f(d,v.u_texsize),u_pixel_coord_upper:new p.Uniform2f(d,v.u_pixel_coord_upper),u_pixel_coord_lower:new p.Uniform2f(d,v.u_pixel_coord_lower),u_scale:new p.Uniform3f(d,v.u_scale),u_fade:new p.Uniform1f(d,v.u_fade)}},fillOutline:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_world:new p.Uniform2f(d,v.u_world)}},fillOutlinePattern:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_world:new p.Uniform2f(d,v.u_world),u_image:new p.Uniform1i(d,v.u_image),u_texsize:new p.Uniform2f(d,v.u_texsize),u_pixel_coord_upper:new p.Uniform2f(d,v.u_pixel_coord_upper),u_pixel_coord_lower:new p.Uniform2f(d,v.u_pixel_coord_lower),u_scale:new p.Uniform3f(d,v.u_scale),u_fade:new p.Uniform1f(d,v.u_fade)}},circle:function(d,v){return{u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_scale_with_map:new p.Uniform1i(d,v.u_scale_with_map),u_pitch_with_map:new p.Uniform1i(d,v.u_pitch_with_map),u_extrude_scale:new p.Uniform2f(d,v.u_extrude_scale),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_matrix:new p.UniformMatrix4f(d,v.u_matrix)}},collisionBox:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_pixels_to_tile_units:new p.Uniform1f(d,v.u_pixels_to_tile_units),u_extrude_scale:new p.Uniform2f(d,v.u_extrude_scale),u_overscale_factor:new p.Uniform1f(d,v.u_overscale_factor)}},collisionCircle:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_inv_matrix:new p.UniformMatrix4f(d,v.u_inv_matrix),u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_viewport_size:new p.Uniform2f(d,v.u_viewport_size)}},debug:function(d,v){return{u_color:new p.UniformColor(d,v.u_color),u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_overlay:new p.Uniform1i(d,v.u_overlay),u_overlay_scale:new p.Uniform1f(d,v.u_overlay_scale)}},clippingMask:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix)}},heatmap:function(d,v){return{u_extrude_scale:new p.Uniform1f(d,v.u_extrude_scale),u_intensity:new p.Uniform1f(d,v.u_intensity),u_matrix:new p.UniformMatrix4f(d,v.u_matrix)}},heatmapTexture:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_world:new p.Uniform2f(d,v.u_world),u_image:new p.Uniform1i(d,v.u_image),u_color_ramp:new p.Uniform1i(d,v.u_color_ramp),u_opacity:new p.Uniform1f(d,v.u_opacity)}},hillshade:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_image:new p.Uniform1i(d,v.u_image),u_latrange:new p.Uniform2f(d,v.u_latrange),u_light:new p.Uniform2f(d,v.u_light),u_shadow:new p.UniformColor(d,v.u_shadow),u_highlight:new p.UniformColor(d,v.u_highlight),u_accent:new p.UniformColor(d,v.u_accent)}},hillshadePrepare:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_image:new p.Uniform1i(d,v.u_image),u_dimension:new p.Uniform2f(d,v.u_dimension),u_zoom:new p.Uniform1f(d,v.u_zoom),u_unpack:new p.Uniform4f(d,v.u_unpack)}},line:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_ratio:new p.Uniform1f(d,v.u_ratio),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_units_to_pixels:new p.Uniform2f(d,v.u_units_to_pixels)}},lineGradient:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_ratio:new p.Uniform1f(d,v.u_ratio),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_units_to_pixels:new p.Uniform2f(d,v.u_units_to_pixels),u_image:new p.Uniform1i(d,v.u_image),u_image_height:new p.Uniform1f(d,v.u_image_height)}},linePattern:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_texsize:new p.Uniform2f(d,v.u_texsize),u_ratio:new p.Uniform1f(d,v.u_ratio),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_image:new p.Uniform1i(d,v.u_image),u_units_to_pixels:new p.Uniform2f(d,v.u_units_to_pixels),u_scale:new p.Uniform3f(d,v.u_scale),u_fade:new p.Uniform1f(d,v.u_fade)}},lineSDF:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_ratio:new p.Uniform1f(d,v.u_ratio),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_units_to_pixels:new p.Uniform2f(d,v.u_units_to_pixels),u_patternscale_a:new p.Uniform2f(d,v.u_patternscale_a),u_patternscale_b:new p.Uniform2f(d,v.u_patternscale_b),u_sdfgamma:new p.Uniform1f(d,v.u_sdfgamma),u_image:new p.Uniform1i(d,v.u_image),u_tex_y_a:new p.Uniform1f(d,v.u_tex_y_a),u_tex_y_b:new p.Uniform1f(d,v.u_tex_y_b),u_mix:new p.Uniform1f(d,v.u_mix)}},raster:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_tl_parent:new p.Uniform2f(d,v.u_tl_parent),u_scale_parent:new p.Uniform1f(d,v.u_scale_parent),u_buffer_scale:new p.Uniform1f(d,v.u_buffer_scale),u_fade_t:new p.Uniform1f(d,v.u_fade_t),u_opacity:new p.Uniform1f(d,v.u_opacity),u_image0:new p.Uniform1i(d,v.u_image0),u_image1:new p.Uniform1i(d,v.u_image1),u_brightness_low:new p.Uniform1f(d,v.u_brightness_low),u_brightness_high:new p.Uniform1f(d,v.u_brightness_high),u_saturation_factor:new p.Uniform1f(d,v.u_saturation_factor),u_contrast_factor:new p.Uniform1f(d,v.u_contrast_factor),u_spin_weights:new p.Uniform3f(d,v.u_spin_weights)}},symbolIcon:function(d,v){return{u_is_size_zoom_constant:new p.Uniform1i(d,v.u_is_size_zoom_constant),u_is_size_feature_constant:new p.Uniform1i(d,v.u_is_size_feature_constant),u_size_t:new p.Uniform1f(d,v.u_size_t),u_size:new p.Uniform1f(d,v.u_size),u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_pitch:new p.Uniform1f(d,v.u_pitch),u_rotate_symbol:new p.Uniform1i(d,v.u_rotate_symbol),u_aspect_ratio:new p.Uniform1f(d,v.u_aspect_ratio),u_fade_change:new p.Uniform1f(d,v.u_fade_change),u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_label_plane_matrix:new p.UniformMatrix4f(d,v.u_label_plane_matrix),u_coord_matrix:new p.UniformMatrix4f(d,v.u_coord_matrix),u_is_text:new p.Uniform1i(d,v.u_is_text),u_pitch_with_map:new p.Uniform1i(d,v.u_pitch_with_map),u_texsize:new p.Uniform2f(d,v.u_texsize),u_texture:new p.Uniform1i(d,v.u_texture)}},symbolSDF:function(d,v){return{u_is_size_zoom_constant:new p.Uniform1i(d,v.u_is_size_zoom_constant),u_is_size_feature_constant:new p.Uniform1i(d,v.u_is_size_feature_constant),u_size_t:new p.Uniform1f(d,v.u_size_t),u_size:new p.Uniform1f(d,v.u_size),u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_pitch:new p.Uniform1f(d,v.u_pitch),u_rotate_symbol:new p.Uniform1i(d,v.u_rotate_symbol),u_aspect_ratio:new p.Uniform1f(d,v.u_aspect_ratio),u_fade_change:new p.Uniform1f(d,v.u_fade_change),u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_label_plane_matrix:new p.UniformMatrix4f(d,v.u_label_plane_matrix),u_coord_matrix:new p.UniformMatrix4f(d,v.u_coord_matrix),u_is_text:new p.Uniform1i(d,v.u_is_text),u_pitch_with_map:new p.Uniform1i(d,v.u_pitch_with_map),u_texsize:new p.Uniform2f(d,v.u_texsize),u_texture:new p.Uniform1i(d,v.u_texture),u_gamma_scale:new p.Uniform1f(d,v.u_gamma_scale),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_is_halo:new p.Uniform1i(d,v.u_is_halo)}},symbolTextAndIcon:function(d,v){return{u_is_size_zoom_constant:new p.Uniform1i(d,v.u_is_size_zoom_constant),u_is_size_feature_constant:new p.Uniform1i(d,v.u_is_size_feature_constant),u_size_t:new p.Uniform1f(d,v.u_size_t),u_size:new p.Uniform1f(d,v.u_size),u_camera_to_center_distance:new p.Uniform1f(d,v.u_camera_to_center_distance),u_pitch:new p.Uniform1f(d,v.u_pitch),u_rotate_symbol:new p.Uniform1i(d,v.u_rotate_symbol),u_aspect_ratio:new p.Uniform1f(d,v.u_aspect_ratio),u_fade_change:new p.Uniform1f(d,v.u_fade_change),u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_label_plane_matrix:new p.UniformMatrix4f(d,v.u_label_plane_matrix),u_coord_matrix:new p.UniformMatrix4f(d,v.u_coord_matrix),u_is_text:new p.Uniform1i(d,v.u_is_text),u_pitch_with_map:new p.Uniform1i(d,v.u_pitch_with_map),u_texsize:new p.Uniform2f(d,v.u_texsize),u_texsize_icon:new p.Uniform2f(d,v.u_texsize_icon),u_texture:new p.Uniform1i(d,v.u_texture),u_texture_icon:new p.Uniform1i(d,v.u_texture_icon),u_gamma_scale:new p.Uniform1f(d,v.u_gamma_scale),u_device_pixel_ratio:new p.Uniform1f(d,v.u_device_pixel_ratio),u_is_halo:new p.Uniform1i(d,v.u_is_halo)}},background:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_opacity:new p.Uniform1f(d,v.u_opacity),u_color:new p.UniformColor(d,v.u_color)}},backgroundPattern:function(d,v){return{u_matrix:new p.UniformMatrix4f(d,v.u_matrix),u_opacity:new p.Uniform1f(d,v.u_opacity),u_image:new p.Uniform1i(d,v.u_image),u_pattern_tl_a:new p.Uniform2f(d,v.u_pattern_tl_a),u_pattern_br_a:new p.Uniform2f(d,v.u_pattern_br_a),u_pattern_tl_b:new p.Uniform2f(d,v.u_pattern_tl_b),u_pattern_br_b:new p.Uniform2f(d,v.u_pattern_br_b),u_texsize:new p.Uniform2f(d,v.u_texsize),u_mix:new p.Uniform1f(d,v.u_mix),u_pattern_size_a:new p.Uniform2f(d,v.u_pattern_size_a),u_pattern_size_b:new p.Uniform2f(d,v.u_pattern_size_b),u_scale_a:new p.Uniform1f(d,v.u_scale_a),u_scale_b:new p.Uniform1f(d,v.u_scale_b),u_pixel_coord_upper:new p.Uniform2f(d,v.u_pixel_coord_upper),u_pixel_coord_lower:new p.Uniform2f(d,v.u_pixel_coord_lower),u_tile_units_to_pixels:new p.Uniform1f(d,v.u_tile_units_to_pixels)}}};function df(d,v,g,x,O,F,z){for(var Y=d.context,ae=Y.gl,be=d.useProgram("collisionBox"),De=[],Me=0,Ne=0,Ye=0;Ye<x.length;Ye++){var Ze=x[Ye],et=v.getTile(Ze),Ve=et.getBucket(g);if(Ve){var tt=Ze.posMatrix;O[0]===0&&O[1]===0||(tt=d.translatePosMatrix(Ze.posMatrix,et,O,F));var ft=z?Ve.textCollisionBox:Ve.iconCollisionBox,xt=Ve.collisionCircleArray;if(xt.length>0){var Bt=p.create(),Pt=tt;p.mul(Bt,Ve.placementInvProjMatrix,d.transform.glCoordMatrix),p.mul(Bt,Bt,Ve.placementViewportMatrix),De.push({circleArray:xt,circleOffset:Ne,transform:Pt,invTransform:Bt}),Ne=Me+=xt.length/4}ft&&be.draw(Y,ae.LINES,oe.disabled,Fe.disabled,d.colorModeForRenderPass(),_e.disabled,Cc(tt,d.transform,et),g.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,null,d.transform.zoom,null,null,ft.collisionVertexBuffer)}}if(z&&De.length){var Dt=d.useProgram("collisionCircle"),Yt=new p.StructArrayLayout2f1f2i16;Yt.resize(4*Me),Yt._trim();for(var hr=0,or=0,Er=De;or<Er.length;or+=1)for(var Wr=Er[or],Vr=0;Vr<Wr.circleArray.length/4;Vr++){var Mr=4*Vr,vn=Wr.circleArray[Mr+0],Cr=Wr.circleArray[Mr+1],gn=Wr.circleArray[Mr+2],Dn=Wr.circleArray[Mr+3];Yt.emplace(hr++,vn,Cr,gn,Dn,0),Yt.emplace(hr++,vn,Cr,gn,Dn,1),Yt.emplace(hr++,vn,Cr,gn,Dn,2),Yt.emplace(hr++,vn,Cr,gn,Dn,3)}(!lp||lp.length<2*Me)&&(lp=function(wo){var Io=2*wo,_a=new p.StructArrayLayout3ui6;_a.resize(Io),_a._trim();for(var Ki=0;Ki<Io;Ki++){var So=6*Ki;_a.uint16[So+0]=4*Ki+0,_a.uint16[So+1]=4*Ki+1,_a.uint16[So+2]=4*Ki+2,_a.uint16[So+3]=4*Ki+2,_a.uint16[So+4]=4*Ki+3,_a.uint16[So+5]=4*Ki+0}return _a}(Me));for(var cn=Y.createIndexBuffer(lp,!0),sn=Y.createVertexBuffer(Yt,p.collisionCircleLayout.members,!0),An=0,nn=De;An<nn.length;An+=1){var ln=nn[An],xo=Yl(ln.transform,ln.invTransform,d.transform);Dt.draw(Y,ae.TRIANGLES,oe.disabled,Fe.disabled,d.colorModeForRenderPass(),_e.disabled,xo,g.id,sn,cn,p.SegmentVector.simpleSegment(0,2*ln.circleOffset,ln.circleArray.length,ln.circleArray.length/2),null,d.transform.zoom,null,null,null)}sn.destroy(),cn.destroy()}}var fl=p.identity(new Float32Array(16));function Pl(d,v,g,x,O,F){var z=p.getAnchorAlignment(d),Y=-(z.horizontalAlign-.5)*v,ae=-(z.verticalAlign-.5)*g,be=p.evaluateVariableOffset(d,x);return new p.Point((Y/O+be[0])*F,(ae/O+be[1])*F)}function St(d,v,g,x,O,F,z,Y,ae,be,De){var Me=d.text.placedSymbolArray,Ne=d.text.dynamicLayoutVertexArray,Ye=d.icon.dynamicLayoutVertexArray,Ze={};Ne.clear();for(var et=0;et<Me.length;et++){var Ve=Me.get(et),tt=Ve.hidden||!Ve.crossTileID||d.allowVerticalPlacement&&!Ve.placedOrientation?null:x[Ve.crossTileID];if(tt){var ft=new p.Point(Ve.anchorX,Ve.anchorY),xt=Fn(ft,g?Y:z),Bt=Vn(F.cameraToCenterDistance,xt.signedDistanceFromCamera),Pt=O.evaluateSizeForFeature(d.textSizeData,be,Ve)*Bt/p.ONE_EM;g&&(Pt*=d.tilePixelRatio/ae);for(var Dt=Pl(tt.anchor,tt.width,tt.height,tt.textOffset,tt.textBoxScale,Pt),Yt=g?Fn(ft.add(Dt),z).point:xt.point.add(v?Dt.rotate(-F.angle):Dt),hr=d.allowVerticalPlacement&&Ve.placedOrientation===p.WritingMode.vertical?Math.PI/2:0,or=0;or<Ve.numGlyphs;or++)p.addDynamicAttributes(Ne,Yt,hr);De&&Ve.associatedIconIndex>=0&&(Ze[Ve.associatedIconIndex]={shiftedAnchor:Yt,angle:hr})}else Ha(Ve.numGlyphs,Ne)}if(De){Ye.clear();for(var Er=d.icon.placedSymbolArray,Wr=0;Wr<Er.length;Wr++){var Vr=Er.get(Wr);if(Vr.hidden)Ha(Vr.numGlyphs,Ye);else{var Mr=Ze[Wr];if(Mr)for(var vn=0;vn<Vr.numGlyphs;vn++)p.addDynamicAttributes(Ye,Mr.shiftedAnchor,Mr.angle);else Ha(Vr.numGlyphs,Ye)}}d.icon.dynamicLayoutVertexBuffer.updateData(Ye)}d.text.dynamicLayoutVertexBuffer.updateData(Ne)}function Zt(d,v,g){return g.iconsInText&&v?"symbolTextAndIcon":d?"symbolSDF":"symbolIcon"}function qt(d,v,g,x,O,F,z,Y,ae,be,De,Me){for(var Ne=d.context,Ye=Ne.gl,Ze=d.transform,et=Y==="map",Ve=ae==="map",tt=et&&g.layout.get("symbol-placement")!=="point",ft=et&&!Ve&&!tt,xt=g.layout.get("symbol-sort-key").constantOr(1)!==void 0,Bt=!1,Pt=d.depthModeForSublayer(0,oe.ReadOnly),Dt=g.layout.get("text-variable-anchor"),Yt=[],hr=0,or=x;hr<or.length;hr+=1){var Er=or[hr],Wr=v.getTile(Er),Vr=Wr.getBucket(g);if(Vr){var Mr=O?Vr.text:Vr.icon;if(Mr&&Mr.segments.get().length){var vn=Mr.programConfigurations.get(g.id),Cr=O||Vr.sdfIcons,gn=O?Vr.textSizeData:Vr.iconSizeData,Dn=Ve||Ze.pitch!==0,cn=d.useProgram(Zt(Cr,O,Vr),vn),sn=p.evaluateSizeForZoom(gn,Ze.zoom),An=void 0,nn=[0,0],ln=void 0,xo=void 0,wo=null,Io=void 0;if(O)ln=Wr.glyphAtlasTexture,xo=Ye.LINEAR,An=Wr.glyphAtlasTexture.size,Vr.iconsInText&&(nn=Wr.imageAtlasTexture.size,wo=Wr.imageAtlasTexture,Io=Dn||d.options.rotating||d.options.zooming||gn.kind==="composite"||gn.kind==="camera"?Ye.LINEAR:Ye.NEAREST);else{var _a=g.layout.get("icon-size").constantOr(0)!==1||Vr.iconsNeedLinear;ln=Wr.imageAtlasTexture,xo=Cr||d.options.rotating||d.options.zooming||_a||Dn?Ye.LINEAR:Ye.NEAREST,An=Wr.imageAtlasTexture.size}var Ki=oo(Wr,1,d.transform.zoom),So=ko(Er.posMatrix,Ve,et,d.transform,Ki),xa=yi(Er.posMatrix,Ve,et,d.transform,Ki),os=Dt&&Vr.hasTextData(),Zu=g.layout.get("icon-text-fit")!=="none"&&os&&Vr.hasIconData();tt&&xc(Vr,Er.posMatrix,d,O,So,xa,Ve,be);var As=d.translatePosMatrix(Er.posMatrix,Wr,F,z),ks=tt||O&&Dt||Zu?fl:So,Za=d.translatePosMatrix(xa,Wr,F,z,!0),Yu=Cr&&g.paint.get(O?"text-halo-width":"icon-halo-width").constantOr(1)!==0,ql={program:cn,buffers:Mr,uniformValues:Cr?Vr.iconsInText?rh(gn.kind,sn,ft,Ve,d,As,ks,Za,An,nn):Fs(gn.kind,sn,ft,Ve,d,As,ks,Za,O,An,!0):Xl(gn.kind,sn,ft,Ve,d,As,ks,Za,O,An),atlasTexture:ln,atlasTextureIcon:wo,atlasInterpolation:xo,atlasInterpolationIcon:Io,isSDF:Cr,hasHalo:Yu};if(xt&&Vr.canOverlap){Bt=!0;for(var ku=0,Sf=Mr.segments.get();ku<Sf.length;ku+=1){var Ef=Sf[ku];Yt.push({segments:new p.SegmentVector([Ef]),sortKey:Ef.sortKey,state:ql})}}else Yt.push({segments:Mr.segments,sortKey:0,state:ql})}}}Bt&&Yt.sort(function(Xu,Tf){return Xu.sortKey-Tf.sortKey});for(var wa=0,Cu=Yt;wa<Cu.length;wa+=1){var Bs=Cu[wa],sa=Bs.state;if(Ne.activeTexture.set(Ye.TEXTURE0),sa.atlasTexture.bind(sa.atlasInterpolation,Ye.CLAMP_TO_EDGE),sa.atlasTextureIcon&&(Ne.activeTexture.set(Ye.TEXTURE1),sa.atlasTextureIcon&&sa.atlasTextureIcon.bind(sa.atlasInterpolationIcon,Ye.CLAMP_TO_EDGE)),sa.isSDF){var Iu=sa.uniformValues;sa.hasHalo&&(Iu.u_is_halo=1,Ur(sa.buffers,Bs.segments,g,d,sa.program,Pt,De,Me,Iu)),Iu.u_is_halo=0}Ur(sa.buffers,Bs.segments,g,d,sa.program,Pt,De,Me,sa.uniformValues)}}function Ur(d,v,g,x,O,F,z,Y,ae){var be=x.context;O.draw(be,be.gl.TRIANGLES,F,z,Y,_e.disabled,ae,g.id,d.layoutVertexBuffer,d.indexBuffer,v,g.paint,x.transform.zoom,d.programConfigurations.get(g.id),d.dynamicLayoutVertexBuffer,d.opacityVertexBuffer)}function On(d,v,g,x,O,F,z){var Y,ae,be,De,Me,Ne=d.context.gl,Ye=g.paint.get("fill-pattern"),Ze=Ye&&Ye.constantOr(1),et=g.getCrossfadeParameters();z?(ae=Ze&&!g.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=Ne.LINES):(ae=Ze?"fillPattern":"fill",Y=Ne.TRIANGLES);for(var Ve=0,tt=x;Ve<tt.length;Ve+=1){var ft=tt[Ve],xt=v.getTile(ft);if(!Ze||xt.patternsLoaded()){var Bt=xt.getBucket(g);if(Bt){var Pt=Bt.programConfigurations.get(g.id),Dt=d.useProgram(ae,Pt);Ze&&(d.context.activeTexture.set(Ne.TEXTURE0),xt.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),Pt.updatePaintBuffers(et));var Yt=Ye.constantOr(null);if(Yt&&xt.imageAtlas){var hr=xt.imageAtlas,or=hr.patternPositions[Yt.to.toString()],Er=hr.patternPositions[Yt.from.toString()];or&&Er&&Pt.setConstantPatternPositions(or,Er)}var Wr=d.translatePosMatrix(ft.posMatrix,xt,g.paint.get("fill-translate"),g.paint.get("fill-translate-anchor"));if(z){De=Bt.indexBuffer2,Me=Bt.segments2;var Vr=[Ne.drawingBufferWidth,Ne.drawingBufferHeight];be=ae==="fillOutlinePattern"&&Ze?eh(Wr,d,et,xt,Vr):Zl(Wr,Vr)}else De=Bt.indexBuffer,Me=Bt.segments,be=Ze?Rs(Wr,d,et,xt):yu(Wr);Dt.draw(d.context,Y,O,d.stencilModeForClipping(ft),F,_e.disabled,be,g.id,Bt.layoutVertexBuffer,De,Me,g.paint,d.transform.zoom,Pt)}}}}function di(d,v,g,x,O,F,z){for(var Y=d.context,ae=Y.gl,be=g.paint.get("fill-extrusion-pattern"),De=be.constantOr(1),Me=g.getCrossfadeParameters(),Ne=g.paint.get("fill-extrusion-opacity"),Ye=0,Ze=x;Ye<Ze.length;Ye+=1){var et=Ze[Ye],Ve=v.getTile(et),tt=Ve.getBucket(g);if(tt){var ft=tt.programConfigurations.get(g.id),xt=d.useProgram(De?"fillExtrusionPattern":"fillExtrusion",ft);De&&(d.context.activeTexture.set(ae.TEXTURE0),Ve.imageAtlasTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE),ft.updatePaintBuffers(Me));var Bt=be.constantOr(null);if(Bt&&Ve.imageAtlas){var Pt=Ve.imageAtlas,Dt=Pt.patternPositions[Bt.to.toString()],Yt=Pt.patternPositions[Bt.from.toString()];Dt&&Yt&&ft.setConstantPatternPositions(Dt,Yt)}var hr=d.translatePosMatrix(et.posMatrix,Ve,g.paint.get("fill-extrusion-translate"),g.paint.get("fill-extrusion-translate-anchor")),or=g.paint.get("fill-extrusion-vertical-gradient"),Er=De?da(hr,d,or,Ne,et,Me,Ve):ap(hr,d,or,Ne);xt.draw(Y,Y.gl.TRIANGLES,O,F,z,_e.backCCW,Er,g.id,tt.layoutVertexBuffer,tt.indexBuffer,tt.segments,g.paint,d.transform.zoom,ft)}}}function qo(d,v,g,x,O,F){var z=d.context,Y=z.gl,ae=v.fbo;if(ae){var be=d.useProgram("hillshade");z.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,ae.colorAttachment.get());var De=function(Me,Ne,Ye){var Ze=Ye.paint.get("hillshade-shadow-color"),et=Ye.paint.get("hillshade-highlight-color"),Ve=Ye.paint.get("hillshade-accent-color"),tt=Ye.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ye.paint.get("hillshade-illumination-anchor")==="viewport"&&(tt-=Me.transform.angle);var ft,xt,Bt,Pt=!Me.options.moving;return{u_matrix:Me.transform.calculatePosMatrix(Ne.tileID.toUnwrapped(),Pt),u_image:0,u_latrange:(ft=Ne.tileID,xt=Math.pow(2,ft.canonical.z),Bt=ft.canonical.y,[new p.MercatorCoordinate(0,Bt/xt).toLngLat().lat,new p.MercatorCoordinate(0,(Bt+1)/xt).toLngLat().lat]),u_light:[Ye.paint.get("hillshade-exaggeration"),tt],u_shadow:Ze,u_highlight:et,u_accent:Ve}}(d,v,g);be.draw(z,Y.TRIANGLES,x,O,F,_e.disabled,De,g.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}}function eo(d,v,g,x,O,F){var z=d.context,Y=z.gl,ae=v.dem;if(ae&&ae.data){var be=ae.dim,De=ae.stride,Me=ae.getPixels();if(z.activeTexture.set(Y.TEXTURE1),z.pixelStoreUnpackPremultiplyAlpha.set(!1),v.demTexture=v.demTexture||d.getTileTexture(De),v.demTexture){var Ne=v.demTexture;Ne.update(Me,{premultiply:!1}),Ne.bind(Y.NEAREST,Y.CLAMP_TO_EDGE)}else v.demTexture=new p.Texture(z,Me,Y.RGBA,{premultiply:!1}),v.demTexture.bind(Y.NEAREST,Y.CLAMP_TO_EDGE);z.activeTexture.set(Y.TEXTURE0);var Ye=v.fbo;if(!Ye){var Ze=new p.Texture(z,{width:be,height:be,data:null},Y.RGBA);Ze.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),(Ye=v.fbo=z.createFramebuffer(be,be,!0)).colorAttachment.set(Ze.texture)}z.bindFramebuffer.set(Ye.framebuffer),z.viewport.set([0,0,be,be]),d.useProgram("hillshadePrepare").draw(z,Y.TRIANGLES,x,O,F,_e.disabled,function(et,Ve){var tt=Ve.stride,ft=p.create();return p.ortho(ft,0,p.EXTENT,-p.EXTENT,0,0,1),p.translate(ft,ft,[0,-p.EXTENT,0]),{u_matrix:ft,u_image:1,u_dimension:[tt,tt],u_zoom:et.overscaledZ,u_unpack:Ve.getUnpackVector()}}(v.tileID,ae),g.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments),v.needsHillshadePrepare=!1}}function Ic(d,v,g,x,O){var F=x.paint.get("raster-fade-duration");if(F>0){var z=p.browser.now(),Y=(z-d.timeAdded)/F,ae=v?(z-v.timeAdded)/F:-1,be=g.getSource(),De=O.coveringZoomLevel({tileSize:be.tileSize,roundZoom:be.roundZoom}),Me=!v||Math.abs(v.tileID.overscaledZ-De)>Math.abs(d.tileID.overscaledZ-De),Ne=Me&&d.refreshedUponExpiration?1:p.clamp(Me?Y:1-ae,0,1);return d.refreshedUponExpiration&&Y>=1&&(d.refreshedUponExpiration=!1),v?{opacity:1,mix:1-Ne}:{opacity:Ne,mix:0}}return{opacity:1,mix:0}}var dm=new p.Color(1,0,0,1),hl=new p.Color(0,1,0,1),ad=new p.Color(0,0,1,1),_u=new p.Color(1,0,1,1),dl=new p.Color(0,1,1,1);function Jl(d,v,g,x){pi(d,0,v+g/2,d.transform.width,g,x)}function Dc(d,v,g,x){pi(d,v-g/2,0,g,d.transform.height,x)}function pi(d,v,g,x,O,F){var z=d.context,Y=z.gl;Y.enable(Y.SCISSOR_TEST),Y.scissor(v*p.browser.devicePixelRatio,g*p.browser.devicePixelRatio,x*p.browser.devicePixelRatio,O*p.browser.devicePixelRatio),z.clear({color:F}),Y.disable(Y.SCISSOR_TEST)}function pm(d,v,g){var x=d.context,O=x.gl,F=g.posMatrix,z=d.useProgram("debug"),Y=oe.disabled,ae=Fe.disabled,be=d.colorModeForRenderPass();x.activeTexture.set(O.TEXTURE0),d.emptyTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),z.draw(x,O.LINE_STRIP,Y,ae,be,_e.disabled,cl(F,p.Color.red),"$debug",d.debugBuffer,d.tileBorderIndexBuffer,d.debugSegments);var De=v.getTileByID(g.key).latestRawTileData,Me=Math.floor((De&&De.byteLength||0)/1024),Ne=v.getTile(g).tileSize,Ye=512/Math.min(Ne,512)*(g.overscaledZ/d.transform.zoom)*.5,Ze=g.canonical.toString();g.overscaledZ!==g.canonical.z&&(Ze+=" => "+g.overscaledZ),function(et,Ve){et.initDebugOverlayCanvas();var tt=et.debugOverlayCanvas,ft=et.context.gl,xt=et.debugOverlayCanvas.getContext("2d");xt.clearRect(0,0,tt.width,tt.height),xt.shadowColor="white",xt.shadowBlur=2,xt.lineWidth=1.5,xt.strokeStyle="white",xt.textBaseline="top",xt.font="bold 36px Open Sans, sans-serif",xt.fillText(Ve,5,5),xt.strokeText(Ve,5,5),et.debugOverlayTexture.update(tt),et.debugOverlayTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE)}(d,Ze+" "+Me+"kb"),z.draw(x,O.TRIANGLES,Y,ae,Pe.alphaBlended,_e.disabled,cl(F,p.Color.transparent,Ye),"$debug",d.debugBuffer,d.quadTriangleIndexBuffer,d.debugSegments)}var xu={symbol:function(d,v,g,x,O){if(d.renderPass==="translucent"){var F=Fe.disabled,z=d.colorModeForRenderPass();g.layout.get("text-variable-anchor")&&function(Y,ae,be,De,Me,Ne,Ye){for(var Ze=ae.transform,et=Me==="map",Ve=Ne==="map",tt=0,ft=Y;tt<ft.length;tt+=1){var xt=ft[tt],Bt=De.getTile(xt),Pt=Bt.getBucket(be);if(Pt&&Pt.text&&Pt.text.segments.get().length){var Dt=p.evaluateSizeForZoom(Pt.textSizeData,Ze.zoom),Yt=oo(Bt,1,ae.transform.zoom),hr=ko(xt.posMatrix,Ve,et,ae.transform,Yt),or=be.layout.get("icon-text-fit")!=="none"&&Pt.hasIconData();if(Dt){var Er=Math.pow(2,Ze.zoom-Bt.tileID.overscaledZ);St(Pt,et,Ve,Ye,p.symbolSize,Ze,hr,xt.posMatrix,Er,Dt,or)}}}}(x,d,g,v,g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),O),g.paint.get("icon-opacity").constantOr(1)!==0&&qt(d,v,g,x,!1,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),g.layout.get("icon-rotation-alignment"),g.layout.get("icon-pitch-alignment"),g.layout.get("icon-keep-upright"),F,z),g.paint.get("text-opacity").constantOr(1)!==0&&qt(d,v,g,x,!0,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),g.layout.get("text-rotation-alignment"),g.layout.get("text-pitch-alignment"),g.layout.get("text-keep-upright"),F,z),v.map.showCollisionBoxes&&(df(d,v,g,x,g.paint.get("text-translate"),g.paint.get("text-translate-anchor"),!0),df(d,v,g,x,g.paint.get("icon-translate"),g.paint.get("icon-translate-anchor"),!1))}},circle:function(d,v,g,x){if(d.renderPass==="translucent"){var O=g.paint.get("circle-opacity"),F=g.paint.get("circle-stroke-width"),z=g.paint.get("circle-stroke-opacity"),Y=g.layout.get("circle-sort-key").constantOr(1)!==void 0;if(O.constantOr(1)!==0||F.constantOr(1)!==0&&z.constantOr(1)!==0){for(var ae=d.context,be=ae.gl,De=d.depthModeForSublayer(0,oe.ReadOnly),Me=Fe.disabled,Ne=d.colorModeForRenderPass(),Ye=[],Ze=0;Ze<x.length;Ze++){var et=x[Ze],Ve=v.getTile(et),tt=Ve.getBucket(g);if(tt){var ft=tt.programConfigurations.get(g.id),xt={programConfiguration:ft,program:d.useProgram("circle",ft),layoutVertexBuffer:tt.layoutVertexBuffer,indexBuffer:tt.indexBuffer,uniformValues:od(d,et,Ve,g)};if(Y)for(var Bt=0,Pt=tt.segments.get();Bt<Pt.length;Bt+=1){var Dt=Pt[Bt];Ye.push({segments:new p.SegmentVector([Dt]),sortKey:Dt.sortKey,state:xt})}else Ye.push({segments:tt.segments,sortKey:0,state:xt})}}Y&&Ye.sort(function(Wr,Vr){return Wr.sortKey-Vr.sortKey});for(var Yt=0,hr=Ye;Yt<hr.length;Yt+=1){var or=hr[Yt],Er=or.state;Er.program.draw(ae,be.TRIANGLES,De,Me,Ne,_e.disabled,Er.uniformValues,g.id,Er.layoutVertexBuffer,Er.indexBuffer,or.segments,g.paint,d.transform.zoom,Er.programConfiguration)}}}},heatmap:function(d,v,g,x){if(g.paint.get("heatmap-opacity")!==0)if(d.renderPass==="offscreen"){var O=d.context,F=O.gl,z=Fe.disabled,Y=new Pe([F.ONE,F.ONE],p.Color.transparent,[!0,!0,!0,!0]);(function(Ye,Ze,et){var Ve=Ye.gl;Ye.activeTexture.set(Ve.TEXTURE1),Ye.viewport.set([0,0,Ze.width/4,Ze.height/4]);var tt=et.heatmapFbo;if(tt)Ve.bindTexture(Ve.TEXTURE_2D,tt.colorAttachment.get()),Ye.bindFramebuffer.set(tt.framebuffer);else{var ft=Ve.createTexture();Ve.bindTexture(Ve.TEXTURE_2D,ft),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_S,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_WRAP_T,Ve.CLAMP_TO_EDGE),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MIN_FILTER,Ve.LINEAR),Ve.texParameteri(Ve.TEXTURE_2D,Ve.TEXTURE_MAG_FILTER,Ve.LINEAR),tt=et.heatmapFbo=Ye.createFramebuffer(Ze.width/4,Ze.height/4,!1),function(xt,Bt,Pt,Dt){var Yt=xt.gl;Yt.texImage2D(Yt.TEXTURE_2D,0,Yt.RGBA,Bt.width/4,Bt.height/4,0,Yt.RGBA,xt.extRenderToTextureHalfFloat?xt.extTextureHalfFloat.HALF_FLOAT_OES:Yt.UNSIGNED_BYTE,null),Dt.colorAttachment.set(Pt)}(Ye,Ze,ft,tt)}})(O,d,g),O.clear({color:p.Color.transparent});for(var ae=0;ae<x.length;ae++){var be=x[ae];if(!v.hasRenderableParent(be)){var De=v.getTile(be),Me=De.getBucket(g);if(Me){var Ne=Me.programConfigurations.get(g.id);d.useProgram("heatmap",Ne).draw(O,F.TRIANGLES,oe.disabled,z,Y,_e.disabled,ff(be.posMatrix,De,d.transform.zoom,g.paint.get("heatmap-intensity")),g.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,g.paint,d.transform.zoom,Ne)}}}O.viewport.set([0,0,d.width,d.height])}else d.renderPass==="translucent"&&(d.context.setColorMode(d.colorModeForRenderPass()),function(Ye,Ze){var et=Ye.context,Ve=et.gl,tt=Ze.heatmapFbo;if(tt){et.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,tt.colorAttachment.get()),et.activeTexture.set(Ve.TEXTURE1);var ft=Ze.colorRampTexture;ft||(ft=Ze.colorRampTexture=new p.Texture(et,Ze.colorRamp,Ve.RGBA)),ft.bind(Ve.LINEAR,Ve.CLAMP_TO_EDGE),Ye.useProgram("heatmapTexture").draw(et,Ve.TRIANGLES,oe.disabled,Fe.disabled,Ye.colorModeForRenderPass(),_e.disabled,function(xt,Bt,Pt,Dt){var Yt=p.create();p.ortho(Yt,0,xt.width,xt.height,0,0,1);var hr=xt.context.gl;return{u_matrix:Yt,u_world:[hr.drawingBufferWidth,hr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Bt.paint.get("heatmap-opacity")}}(Ye,Ze),Ze.id,Ye.viewportBuffer,Ye.quadTriangleIndexBuffer,Ye.viewportSegments,Ze.paint,Ye.transform.zoom)}}(d,g))},line:function(d,v,g,x){if(d.renderPass==="translucent"){var O=g.paint.get("line-opacity"),F=g.paint.get("line-width");if(O.constantOr(1)!==0&&F.constantOr(1)!==0)for(var z=d.depthModeForSublayer(0,oe.ReadOnly),Y=d.colorModeForRenderPass(),ae=g.paint.get("line-dasharray"),be=g.paint.get("line-pattern"),De=be.constantOr(1),Me=g.paint.get("line-gradient"),Ne=g.getCrossfadeParameters(),Ye=De?"linePattern":ae?"lineSDF":Me?"lineGradient":"line",Ze=d.context,et=Ze.gl,Ve=!0,tt=0,ft=x;tt<ft.length;tt+=1){var xt=ft[tt],Bt=v.getTile(xt);if(!De||Bt.patternsLoaded()){var Pt=Bt.getBucket(g);if(Pt){var Dt=Pt.programConfigurations.get(g.id),Yt=d.context.program.get(),hr=d.useProgram(Ye,Dt),or=Ve||hr.program!==Yt,Er=be.constantOr(null);if(Er&&Bt.imageAtlas){var Wr=Bt.imageAtlas,Vr=Wr.patternPositions[Er.to.toString()],Mr=Wr.patternPositions[Er.from.toString()];Vr&&Mr&&Dt.setConstantPatternPositions(Vr,Mr)}var vn=De?hf(d,Bt,g,Ne):ae?sp(d,Bt,g,ae,Ne):Me?Gi(d,Bt,g,Pt.lineClipsArray.length):th(d,Bt,g);if(De)Ze.activeTexture.set(et.TEXTURE0),Bt.imageAtlasTexture.bind(et.LINEAR,et.CLAMP_TO_EDGE),Dt.updatePaintBuffers(Ne);else if(ae&&(or||d.lineAtlas.dirty))Ze.activeTexture.set(et.TEXTURE0),d.lineAtlas.bind(Ze);else if(Me){var Cr=Pt.gradients[g.id],gn=Cr.texture;if(g.gradientVersion!==Cr.version){var Dn=256;if(g.stepInterpolant){var cn=v.getSource().maxzoom,sn=xt.canonical.z===cn?Math.ceil(1<<d.transform.maxZoom-xt.canonical.z):1;Dn=p.clamp(p.nextPowerOfTwo(Pt.maxLineLength/p.EXTENT*1024*sn),256,Ze.maxTextureSize)}Cr.gradient=p.renderColorRamp({expression:g.gradientExpression(),evaluationKey:"lineProgress",resolution:Dn,image:Cr.gradient||void 0,clips:Pt.lineClipsArray}),Cr.texture?Cr.texture.update(Cr.gradient):Cr.texture=new p.Texture(Ze,Cr.gradient,et.RGBA),Cr.version=g.gradientVersion,gn=Cr.texture}Ze.activeTexture.set(et.TEXTURE0),gn.bind(g.stepInterpolant?et.NEAREST:et.LINEAR,et.CLAMP_TO_EDGE)}hr.draw(Ze,et.TRIANGLES,z,d.stencilModeForClipping(xt),Y,_e.disabled,vn,g.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,g.paint,d.transform.zoom,Dt,Pt.layoutVertexBuffer2),Ve=!1}}}}},fill:function(d,v,g,x){var O=g.paint.get("fill-color"),F=g.paint.get("fill-opacity");if(F.constantOr(1)!==0){var z=d.colorModeForRenderPass(),Y=g.paint.get("fill-pattern"),ae=d.opaquePassEnabledForLayer()&&!Y.constantOr(1)&&O.constantOr(p.Color.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(d.renderPass===ae){var be=d.depthModeForSublayer(1,d.renderPass==="opaque"?oe.ReadWrite:oe.ReadOnly);On(d,v,g,x,be,z,!1)}if(d.renderPass==="translucent"&&g.paint.get("fill-antialias")){var De=d.depthModeForSublayer(g.getPaintProperty("fill-outline-color")?2:0,oe.ReadOnly);On(d,v,g,x,De,z,!0)}}},"fill-extrusion":function(d,v,g,x){var O=g.paint.get("fill-extrusion-opacity");if(O!==0&&d.renderPass==="translucent"){var F=new oe(d.context.gl.LEQUAL,oe.ReadWrite,d.depthRangeFor3D);if(O!==1||g.paint.get("fill-extrusion-pattern").constantOr(1))di(d,v,g,x,F,Fe.disabled,Pe.disabled),di(d,v,g,x,F,d.stencilModeFor3D(),d.colorModeForRenderPass());else{var z=d.colorModeForRenderPass();di(d,v,g,x,F,Fe.disabled,z)}}},hillshade:function(d,v,g,x){if(d.renderPass==="offscreen"||d.renderPass==="translucent"){for(var O=d.context,F=d.depthModeForSublayer(0,oe.ReadOnly),z=d.colorModeForRenderPass(),Y=d.renderPass==="translucent"?d.stencilConfigForOverlap(x):[{},x],ae=Y[0],be=0,De=Y[1];be<De.length;be+=1){var Me=De[be],Ne=v.getTile(Me);Ne.needsHillshadePrepare&&d.renderPass==="offscreen"?eo(d,Ne,g,F,Fe.disabled,z):d.renderPass==="translucent"&&qo(d,Ne,g,F,ae[Me.overscaledZ],z)}O.viewport.set([0,0,d.width,d.height])}},raster:function(d,v,g,x){if(d.renderPass==="translucent"&&g.paint.get("raster-opacity")!==0&&x.length)for(var O=d.context,F=O.gl,z=v.getSource(),Y=d.useProgram("raster"),ae=d.colorModeForRenderPass(),be=z instanceof Be?[{},x]:d.stencilConfigForOverlap(x),De=be[0],Me=be[1],Ne=Me[Me.length-1].overscaledZ,Ye=!d.options.moving,Ze=0,et=Me;Ze<et.length;Ze+=1){var Ve=et[Ze],tt=d.depthModeForSublayer(Ve.overscaledZ-Ne,g.paint.get("raster-opacity")===1?oe.ReadWrite:oe.ReadOnly,F.LESS),ft=v.getTile(Ve),xt=d.transform.calculatePosMatrix(Ve.toUnwrapped(),Ye);ft.registerFadeDuration(g.paint.get("raster-fade-duration"));var Bt=v.findLoadedParent(Ve,0),Pt=Ic(ft,Bt,v,g,d.transform),Dt=void 0,Yt=void 0,hr=g.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;O.activeTexture.set(F.TEXTURE0),ft.texture.bind(hr,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(F.TEXTURE1),Bt?(Bt.texture.bind(hr,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),Dt=Math.pow(2,Bt.tileID.overscaledZ-ft.tileID.overscaledZ),Yt=[ft.tileID.canonical.x*Dt%1,ft.tileID.canonical.y*Dt%1]):ft.texture.bind(hr,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST);var or=Mg(xt,Yt||[0,0],Dt||1,Pt,g);z instanceof Be?Y.draw(O,F.TRIANGLES,tt,Fe.disabled,ae,_e.disabled,or,g.id,z.boundsBuffer,d.quadTriangleIndexBuffer,z.boundsSegments):Y.draw(O,F.TRIANGLES,tt,De[Ve.overscaledZ],ae,_e.disabled,or,g.id,d.rasterBoundsBuffer,d.quadTriangleIndexBuffer,d.rasterBoundsSegments)}},background:function(d,v,g){var x=g.paint.get("background-color"),O=g.paint.get("background-opacity");if(O!==0){var F=d.context,z=F.gl,Y=d.transform,ae=Y.tileSize,be=g.paint.get("background-pattern");if(!d.isPatternMissing(be)){var De=!be&&x.a===1&&O===1&&d.opaquePassEnabledForLayer()?"opaque":"translucent";if(d.renderPass===De){var Me=Fe.disabled,Ne=d.depthModeForSublayer(0,De==="opaque"?oe.ReadWrite:oe.ReadOnly),Ye=d.colorModeForRenderPass(),Ze=d.useProgram(be?"backgroundPattern":"background"),et=Y.coveringTiles({tileSize:ae});be&&(F.activeTexture.set(z.TEXTURE0),d.imageManager.bind(d.context));for(var Ve=g.getCrossfadeParameters(),tt=0,ft=et;tt<ft.length;tt+=1){var xt=ft[tt],Bt=d.transform.calculatePosMatrix(xt.toUnwrapped()),Pt=be?bu(Bt,O,d,be,{tileID:xt,tileSize:ae},Ve):nh(Bt,O,x);Ze.draw(F,z.TRIANGLES,Ne,Me,Ye,_e.disabled,Pt,g.id,d.tileExtentBuffer,d.quadTriangleIndexBuffer,d.tileExtentSegments)}}}}},debug:function(d,v,g){for(var x=0;x<g.length;x++)pm(d,v,g[x])},custom:function(d,v,g){var x=d.context,O=g.implementation;if(d.renderPass==="offscreen"){var F=O.prerender;F&&(d.setCustomLayerDefaults(),x.setColorMode(d.colorModeForRenderPass()),F.call(O,x.gl,d.transform.customLayerMatrix()),x.setDirty(),d.setBaseState())}else if(d.renderPass==="translucent"){d.setCustomLayerDefaults(),x.setColorMode(d.colorModeForRenderPass()),x.setStencilMode(Fe.disabled);var z=O.renderingMode==="3d"?new oe(d.context.gl.LEQUAL,oe.ReadWrite,d.depthRangeFor3D):d.depthModeForSublayer(0,oe.ReadOnly);x.setDepthMode(z),O.render(x.gl,d.transform.customLayerMatrix()),x.setDirty(),d.setBaseState(),x.bindFramebuffer.set(null)}}},li=function(d,v){this.context=new fe(d),this.transform=v,this._tileTextures={},this.setup(),this.numSublayers=Ie.maxUnderzooming+Ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ws,this.gpuTimers={}};li.prototype.resize=function(d,v){if(this.width=d*p.browser.devicePixelRatio,this.height=v*p.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var g=0,x=this.style._order;g<x.length;g+=1)this.style._layers[x[g]].resize()},li.prototype.setup=function(){var d=this.context,v=new p.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(p.EXTENT,0),v.emplaceBack(0,p.EXTENT),v.emplaceBack(p.EXTENT,p.EXTENT),this.tileExtentBuffer=d.createVertexBuffer(v,ho.members),this.tileExtentSegments=p.SegmentVector.simpleSegment(0,0,4,2);var g=new p.StructArrayLayout2i4;g.emplaceBack(0,0),g.emplaceBack(p.EXTENT,0),g.emplaceBack(0,p.EXTENT),g.emplaceBack(p.EXTENT,p.EXTENT),this.debugBuffer=d.createVertexBuffer(g,ho.members),this.debugSegments=p.SegmentVector.simpleSegment(0,0,4,5);var x=new p.StructArrayLayout4i8;x.emplaceBack(0,0,0,0),x.emplaceBack(p.EXTENT,0,p.EXTENT,0),x.emplaceBack(0,p.EXTENT,0,p.EXTENT),x.emplaceBack(p.EXTENT,p.EXTENT,p.EXTENT,p.EXTENT),this.rasterBoundsBuffer=d.createVertexBuffer(x,Rr.members),this.rasterBoundsSegments=p.SegmentVector.simpleSegment(0,0,4,2);var O=new p.StructArrayLayout2i4;O.emplaceBack(0,0),O.emplaceBack(1,0),O.emplaceBack(0,1),O.emplaceBack(1,1),this.viewportBuffer=d.createVertexBuffer(O,ho.members),this.viewportSegments=p.SegmentVector.simpleSegment(0,0,4,2);var F=new p.StructArrayLayout1ui2;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=d.createIndexBuffer(F);var z=new p.StructArrayLayout3ui6;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=d.createIndexBuffer(z),this.emptyTexture=new p.Texture(d,{width:1,height:1,data:new Uint8Array([0,0,0,0])},d.gl.RGBA);var Y=this.context.gl;this.stencilClearMode=new Fe({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO)},li.prototype.clearStencil=function(){var d=this.context,v=d.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var g=p.create();p.ortho(g,0,this.width,this.height,0,0,1),p.scale(g,g,[v.drawingBufferWidth,v.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(d,v.TRIANGLES,oe.disabled,this.stencilClearMode,Pe.disabled,_e.disabled,Wu(g),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},li.prototype._renderTileClippingMasks=function(d,v){if(this.currentStencilSource!==d.source&&d.isTileClipped()&&v&&v.length){this.currentStencilSource=d.source;var g=this.context,x=g.gl;this.nextStencilID+v.length>256&&this.clearStencil(),g.setColorMode(Pe.disabled),g.setDepthMode(oe.disabled);var O=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var F=0,z=v;F<z.length;F+=1){var Y=z[F],ae=this._tileClippingMaskIDs[Y.key]=this.nextStencilID++;O.draw(g,x.TRIANGLES,oe.disabled,new Fe({func:x.ALWAYS,mask:0},ae,255,x.KEEP,x.KEEP,x.REPLACE),Pe.disabled,_e.disabled,Wu(Y.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},li.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var d=this.nextStencilID++,v=this.context.gl;return new Fe({func:v.NOTEQUAL,mask:255},d,255,v.KEEP,v.KEEP,v.REPLACE)},li.prototype.stencilModeForClipping=function(d){var v=this.context.gl;return new Fe({func:v.EQUAL,mask:255},this._tileClippingMaskIDs[d.key],0,v.KEEP,v.KEEP,v.REPLACE)},li.prototype.stencilConfigForOverlap=function(d){var v,g=this.context.gl,x=d.sort(function(ae,be){return be.overscaledZ-ae.overscaledZ}),O=x[x.length-1].overscaledZ,F=x[0].overscaledZ-O+1;if(F>1){this.currentStencilSource=void 0,this.nextStencilID+F>256&&this.clearStencil();for(var z={},Y=0;Y<F;Y++)z[Y+O]=new Fe({func:g.GEQUAL,mask:255},Y+this.nextStencilID,255,g.KEEP,g.KEEP,g.REPLACE);return this.nextStencilID+=F,[z,x]}return[(v={},v[O]=Fe.disabled,v),x]},li.prototype.colorModeForRenderPass=function(){var d=this.context.gl;return this._showOverdrawInspector?new Pe([d.CONSTANT_COLOR,d.ONE],new p.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Pe.unblended:Pe.alphaBlended},li.prototype.depthModeForSublayer=function(d,v,g){if(!this.opaquePassEnabledForLayer())return oe.disabled;var x=1-((1+this.currentLayer)*this.numSublayers+d)*this.depthEpsilon;return new oe(g||this.context.gl.LEQUAL,v,[x,x])},li.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},li.prototype.render=function(d,v){var g=this;this.style=d,this.options=v,this.lineAtlas=d.lineAtlas,this.imageManager=d.imageManager,this.glyphManager=d.glyphManager,this.symbolFadeChange=d.placement.symbolFadeChange(p.browser.now()),this.imageManager.beginFrame();var x=this.style._order,O=this.style.sourceCaches;for(var F in O){var z=O[F];z.used&&z.prepare(this.context)}var Y,ae,be={},De={},Me={};for(var Ne in O){var Ye=O[Ne];be[Ne]=Ye.getVisibleCoordinates(),De[Ne]=be[Ne].slice().reverse(),Me[Ne]=Ye.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Ze=0;Ze<x.length;Ze++)if(this.style._layers[x[Ze]].is3D()){this.opaquePassCutoff=Ze;break}this.renderPass="offscreen";for(var et=0,Ve=x;et<Ve.length;et+=1){var tt=this.style._layers[Ve[et]];if(tt.hasOffscreenPass()&&!tt.isHidden(this.transform.zoom)){var ft=De[tt.source];(tt.type==="custom"||ft.length)&&this.renderLayer(this,O[tt.source],tt,ft)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:v.showOverdrawInspector?p.Color.black:p.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=v.showOverdrawInspector,this.depthRangeFor3D=[0,1-(d._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=x.length-1;this.currentLayer>=0;this.currentLayer--){var xt=this.style._layers[x[this.currentLayer]],Bt=O[xt.source],Pt=be[xt.source];this._renderTileClippingMasks(xt,Pt),this.renderLayer(this,Bt,xt,Pt)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<x.length;this.currentLayer++){var Dt=this.style._layers[x[this.currentLayer]],Yt=O[Dt.source],hr=(Dt.type==="symbol"?Me:De)[Dt.source];this._renderTileClippingMasks(Dt,be[Dt.source]),this.renderLayer(this,Yt,Dt,hr)}this.options.showTileBoundaries&&(p.values(this.style._layers).forEach(function(or){or.source&&!or.isHidden(g.transform.zoom)&&(or.source!==(ae&&ae.id)&&(ae=g.style.sourceCaches[or.source]),(!Y||Y.getSource().maxzoom<ae.getSource().maxzoom)&&(Y=ae))}),Y&&xu.debug(this,Y,Y.getVisibleCoordinates())),this.options.showPadding&&function(or){var Er=or.transform.padding;Jl(or,or.transform.height-(Er.top||0),3,dm),Jl(or,Er.bottom||0,3,hl),Dc(or,Er.left||0,3,ad),Dc(or,or.transform.width-(Er.right||0),3,_u);var Wr=or.transform.centerPoint;(function(Vr,Mr,vn,Cr){pi(Vr,Mr-1,vn-10,2,20,Cr),pi(Vr,Mr-10,vn-1,20,2,Cr)})(or,Wr.x,or.transform.height-Wr.y,dl)}(this),this.context.setDefault()},li.prototype.renderLayer=function(d,v,g,x){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||x.length)&&(this.id=g.id,this.gpuTimingStart(g),xu[g.type](d,v,g,x,this.style.placement.variableOffsets),this.gpuTimingEnd())},li.prototype.gpuTimingStart=function(d){if(this.options.gpuTiming){var v=this.context.extTimerQuery,g=this.gpuTimers[d.id];g||(g=this.gpuTimers[d.id]={calls:0,cpuTime:0,query:v.createQueryEXT()}),g.calls++,v.beginQueryEXT(v.TIME_ELAPSED_EXT,g.query)}},li.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var d=this.context.extTimerQuery;d.endQueryEXT(d.TIME_ELAPSED_EXT)}},li.prototype.collectGpuTimers=function(){var d=this.gpuTimers;return this.gpuTimers={},d},li.prototype.queryGpuTimers=function(d){var v={};for(var g in d){var x=d[g],O=this.context.extTimerQuery,F=O.getQueryObjectEXT(x.query,O.QUERY_RESULT_EXT)/1e6;O.deleteQueryEXT(x.query),v[g]=F}return v},li.prototype.translatePosMatrix=function(d,v,g,x,O){if(!g[0]&&!g[1])return d;var F=O?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(F){var z=Math.sin(F),Y=Math.cos(F);g=[g[0]*Y-g[1]*z,g[0]*z+g[1]*Y]}var ae=[O?g[0]:oo(v,g[0],this.transform.zoom),O?g[1]:oo(v,g[1],this.transform.zoom),0],be=new Float32Array(16);return p.translate(be,d,ae),be},li.prototype.saveTileTexture=function(d){var v=this._tileTextures[d.size[0]];v?v.push(d):this._tileTextures[d.size[0]]=[d]},li.prototype.getTileTexture=function(d){var v=this._tileTextures[d];return v&&v.length>0?v.pop():null},li.prototype.isPatternMissing=function(d){if(!d)return!1;if(!d.from||!d.to)return!0;var v=this.imageManager.getPattern(d.from.toString()),g=this.imageManager.getPattern(d.to.toString());return!v||!g},li.prototype.useProgram=function(d,v){this.cache=this.cache||{};var g=""+d+(v?v.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[g]||(this.cache[g]=new op(this.context,d,Og[d],v,hm[d],this._showOverdrawInspector)),this.cache[g]},li.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},li.prototype.setBaseState=function(){var d=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(d.FUNC_ADD)},li.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=p.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new p.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},li.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var wu=function(d,v){this.points=d,this.planes=v};wu.fromInvProjectionMatrix=function(d,v,g){var x=Math.pow(2,g),O=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(z){return p.transformMat4([],z,d)}).map(function(z){return p.scale$1([],z,1/z[3]/v*x)}),F=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(z){var Y=p.sub([],O[z[0]],O[z[1]]),ae=p.sub([],O[z[2]],O[z[1]]),be=p.normalize([],p.cross([],Y,ae)),De=-p.dot(be,O[z[1]]);return be.concat(De)});return new wu(O,F)};var na=function(d,v){this.min=d,this.max=v,this.center=p.scale$2([],p.add([],this.min,this.max),.5)};na.prototype.quadrant=function(d){for(var v=[d%2==0,d<2],g=p.clone$2(this.min),x=p.clone$2(this.max),O=0;O<v.length;O++)g[O]=v[O]?this.min[O]:this.center[O],x[O]=v[O]?this.center[O]:this.max[O];return x[2]=this.max[2],new na(g,x)},na.prototype.distanceX=function(d){return Math.max(Math.min(this.max[0],d[0]),this.min[0])-d[0]},na.prototype.distanceY=function(d){return Math.max(Math.min(this.max[1],d[1]),this.min[1])-d[1]},na.prototype.intersects=function(d){for(var v=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],g=!0,x=0;x<d.planes.length;x++){for(var O=d.planes[x],F=0,z=0;z<v.length;z++)F+=p.dot$1(O,v[z])>=0;if(F===0)return 0;F!==v.length&&(g=!1)}if(g)return 2;for(var Y=0;Y<3;Y++){for(var ae=Number.MAX_VALUE,be=-Number.MAX_VALUE,De=0;De<d.points.length;De++){var Me=d.points[De][Y]-this.min[Y];ae=Math.min(ae,Me),be=Math.max(be,Me)}if(be<0||ae>this.max[Y]-this.min[Y])return 0}return 1};var qs=function(d,v,g,x){if(d===void 0&&(d=0),v===void 0&&(v=0),g===void 0&&(g=0),x===void 0&&(x=0),isNaN(d)||d<0||isNaN(v)||v<0||isNaN(g)||g<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=d,this.bottom=v,this.left=g,this.right=x};qs.prototype.interpolate=function(d,v,g){return v.top!=null&&d.top!=null&&(this.top=p.number(d.top,v.top,g)),v.bottom!=null&&d.bottom!=null&&(this.bottom=p.number(d.bottom,v.bottom,g)),v.left!=null&&d.left!=null&&(this.left=p.number(d.left,v.left,g)),v.right!=null&&d.right!=null&&(this.right=p.number(d.right,v.right,g)),this},qs.prototype.getCenter=function(d,v){var g=p.clamp((this.left+d-this.right)/2,0,d),x=p.clamp((this.top+v-this.bottom)/2,0,v);return new p.Point(g,x)},qs.prototype.equals=function(d){return this.top===d.top&&this.bottom===d.bottom&&this.left===d.left&&this.right===d.right},qs.prototype.clone=function(){return new qs(this.top,this.bottom,this.left,this.right)},qs.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Tn=function(d,v,g,x,O){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=O===void 0||O,this._minZoom=d||0,this._maxZoom=v||22,this._minPitch=g??0,this._maxPitch=x??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new p.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qs,this._posMatrixCache={},this._alignedPosMatrixCache={}},ti={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Tn.prototype.clone=function(){var d=new Tn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return d.tileSize=this.tileSize,d.latRange=this.latRange,d.width=this.width,d.height=this.height,d._center=this._center,d.zoom=this.zoom,d.angle=this.angle,d._fov=this._fov,d._pitch=this._pitch,d._unmodified=this._unmodified,d._edgeInsets=this._edgeInsets.clone(),d._calcMatrices(),d},ti.minZoom.get=function(){return this._minZoom},ti.minZoom.set=function(d){this._minZoom!==d&&(this._minZoom=d,this.zoom=Math.max(this.zoom,d))},ti.maxZoom.get=function(){return this._maxZoom},ti.maxZoom.set=function(d){this._maxZoom!==d&&(this._maxZoom=d,this.zoom=Math.min(this.zoom,d))},ti.minPitch.get=function(){return this._minPitch},ti.minPitch.set=function(d){this._minPitch!==d&&(this._minPitch=d,this.pitch=Math.max(this.pitch,d))},ti.maxPitch.get=function(){return this._maxPitch},ti.maxPitch.set=function(d){this._maxPitch!==d&&(this._maxPitch=d,this.pitch=Math.min(this.pitch,d))},ti.renderWorldCopies.get=function(){return this._renderWorldCopies},ti.renderWorldCopies.set=function(d){d===void 0?d=!0:d===null&&(d=!1),this._renderWorldCopies=d},ti.worldSize.get=function(){return this.tileSize*this.scale},ti.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},ti.size.get=function(){return new p.Point(this.width,this.height)},ti.bearing.get=function(){return-this.angle/Math.PI*180},ti.bearing.set=function(d){var v=-p.wrap(d,-180,180)*Math.PI/180;this.angle!==v&&(this._unmodified=!1,this.angle=v,this._calcMatrices(),this.rotationMatrix=p.create$2(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},ti.pitch.get=function(){return this._pitch/Math.PI*180},ti.pitch.set=function(d){var v=p.clamp(d,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==v&&(this._unmodified=!1,this._pitch=v,this._calcMatrices())},ti.fov.get=function(){return this._fov/Math.PI*180},ti.fov.set=function(d){d=Math.max(.01,Math.min(60,d)),this._fov!==d&&(this._unmodified=!1,this._fov=d/180*Math.PI,this._calcMatrices())},ti.zoom.get=function(){return this._zoom},ti.zoom.set=function(d){var v=Math.min(Math.max(d,this.minZoom),this.maxZoom);this._zoom!==v&&(this._unmodified=!1,this._zoom=v,this.scale=this.zoomScale(v),this.tileZoom=Math.floor(v),this.zoomFraction=v-this.tileZoom,this._constrain(),this._calcMatrices())},ti.center.get=function(){return this._center},ti.center.set=function(d){d.lat===this._center.lat&&d.lng===this._center.lng||(this._unmodified=!1,this._center=d,this._constrain(),this._calcMatrices())},ti.padding.get=function(){return this._edgeInsets.toJSON()},ti.padding.set=function(d){this._edgeInsets.equals(d)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,d,1),this._calcMatrices())},ti.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Tn.prototype.isPaddingEqual=function(d){return this._edgeInsets.equals(d)},Tn.prototype.interpolatePadding=function(d,v,g){this._unmodified=!1,this._edgeInsets.interpolate(d,v,g),this._constrain(),this._calcMatrices()},Tn.prototype.coveringZoomLevel=function(d){var v=(d.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/d.tileSize));return Math.max(0,v)},Tn.prototype.getVisibleUnwrappedCoordinates=function(d){var v=[new p.UnwrappedTileID(0,d)];if(this._renderWorldCopies)for(var g=this.pointCoordinate(new p.Point(0,0)),x=this.pointCoordinate(new p.Point(this.width,0)),O=this.pointCoordinate(new p.Point(this.width,this.height)),F=this.pointCoordinate(new p.Point(0,this.height)),z=Math.floor(Math.min(g.x,x.x,O.x,F.x)),Y=Math.floor(Math.max(g.x,x.x,O.x,F.x)),ae=z-1;ae<=Y+1;ae++)ae!==0&&v.push(new p.UnwrappedTileID(ae,d));return v},Tn.prototype.coveringTiles=function(d){var v=this.coveringZoomLevel(d),g=v;if(d.minzoom!==void 0&&v<d.minzoom)return[];d.maxzoom!==void 0&&v>d.maxzoom&&(v=d.maxzoom);var x=p.MercatorCoordinate.fromLngLat(this.center),O=Math.pow(2,v),F=[O*x.x,O*x.y,0],z=wu.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v),Y=d.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Y=v);var ae=function(or){return{aabb:new na([or*O,0,0],[(or+1)*O,O,0]),zoom:0,x:0,y:0,wrap:or,fullyVisible:!1}},be=[],De=[],Me=v,Ne=d.reparseOverscaled?g:v;if(this._renderWorldCopies)for(var Ye=1;Ye<=3;Ye++)be.push(ae(-Ye)),be.push(ae(Ye));for(be.push(ae(0));be.length>0;){var Ze=be.pop(),et=Ze.x,Ve=Ze.y,tt=Ze.fullyVisible;if(!tt){var ft=Ze.aabb.intersects(z);if(ft===0)continue;tt=ft===2}var xt=Ze.aabb.distanceX(F),Bt=Ze.aabb.distanceY(F),Pt=Math.max(Math.abs(xt),Math.abs(Bt));if(Ze.zoom===Me||Pt>3+(1<<Me-Ze.zoom)-2&&Ze.zoom>=Y)De.push({tileID:new p.OverscaledTileID(Ze.zoom===Me?Ne:Ze.zoom,Ze.wrap,Ze.zoom,et,Ve),distanceSq:p.sqrLen([F[0]-.5-et,F[1]-.5-Ve])});else for(var Dt=0;Dt<4;Dt++){var Yt=(et<<1)+Dt%2,hr=(Ve<<1)+(Dt>>1);be.push({aabb:Ze.aabb.quadrant(Dt),zoom:Ze.zoom+1,x:Yt,y:hr,wrap:Ze.wrap,fullyVisible:tt})}}return De.sort(function(or,Er){return or.distanceSq-Er.distanceSq}).map(function(or){return or.tileID})},Tn.prototype.resize=function(d,v){this.width=d,this.height=v,this.pixelsToGLUnits=[2/d,-2/v],this._constrain(),this._calcMatrices()},ti.unmodified.get=function(){return this._unmodified},Tn.prototype.zoomScale=function(d){return Math.pow(2,d)},Tn.prototype.scaleZoom=function(d){return Math.log(d)/Math.LN2},Tn.prototype.project=function(d){var v=p.clamp(d.lat,-this.maxValidLatitude,this.maxValidLatitude);return new p.Point(p.mercatorXfromLng(d.lng)*this.worldSize,p.mercatorYfromLat(v)*this.worldSize)},Tn.prototype.unproject=function(d){return new p.MercatorCoordinate(d.x/this.worldSize,d.y/this.worldSize).toLngLat()},ti.point.get=function(){return this.project(this.center)},Tn.prototype.setLocationAtPoint=function(d,v){var g=this.pointCoordinate(v),x=this.pointCoordinate(this.centerPoint),O=this.locationCoordinate(d),F=new p.MercatorCoordinate(O.x-(g.x-x.x),O.y-(g.y-x.y));this.center=this.coordinateLocation(F),this._renderWorldCopies&&(this.center=this.center.wrap())},Tn.prototype.locationPoint=function(d){return this.coordinatePoint(this.locationCoordinate(d))},Tn.prototype.pointLocation=function(d){return this.coordinateLocation(this.pointCoordinate(d))},Tn.prototype.locationCoordinate=function(d){return p.MercatorCoordinate.fromLngLat(d)},Tn.prototype.coordinateLocation=function(d){return d.toLngLat()},Tn.prototype.pointCoordinate=function(d){var v=[d.x,d.y,0,1],g=[d.x,d.y,1,1];p.transformMat4(v,v,this.pixelMatrixInverse),p.transformMat4(g,g,this.pixelMatrixInverse);var x=v[3],O=g[3],F=v[1]/x,z=g[1]/O,Y=v[2]/x,ae=g[2]/O,be=Y===ae?0:(0-Y)/(ae-Y);return new p.MercatorCoordinate(p.number(v[0]/x,g[0]/O,be)/this.worldSize,p.number(F,z,be)/this.worldSize)},Tn.prototype.coordinatePoint=function(d){var v=[d.x*this.worldSize,d.y*this.worldSize,0,1];return p.transformMat4(v,v,this.pixelMatrix),new p.Point(v[0]/v[3],v[1]/v[3])},Tn.prototype.getBounds=function(){return new p.LngLatBounds().extend(this.pointLocation(new p.Point(0,0))).extend(this.pointLocation(new p.Point(this.width,0))).extend(this.pointLocation(new p.Point(this.width,this.height))).extend(this.pointLocation(new p.Point(0,this.height)))},Tn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new p.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Tn.prototype.setMaxBounds=function(d){d?(this.lngRange=[d.getWest(),d.getEast()],this.latRange=[d.getSouth(),d.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Tn.prototype.calculatePosMatrix=function(d,v){v===void 0&&(v=!1);var g=d.key,x=v?this._alignedPosMatrixCache:this._posMatrixCache;if(x[g])return x[g];var O=d.canonical,F=this.worldSize/this.zoomScale(O.z),z=O.x+Math.pow(2,O.z)*d.wrap,Y=p.identity(new Float64Array(16));return p.translate(Y,Y,[z*F,O.y*F,0]),p.scale(Y,Y,[F/p.EXTENT,F/p.EXTENT,1]),p.multiply(Y,v?this.alignedProjMatrix:this.projMatrix,Y),x[g]=new Float32Array(Y),x[g]},Tn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Tn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var d,v,g,x,O=-90,F=90,z=-180,Y=180,ae=this.size,be=this._unmodified;if(this.latRange){var De=this.latRange;O=p.mercatorYfromLat(De[1])*this.worldSize,d=(F=p.mercatorYfromLat(De[0])*this.worldSize)-O<ae.y?ae.y/(F-O):0}if(this.lngRange){var Me=this.lngRange;z=p.mercatorXfromLng(Me[0])*this.worldSize,v=(Y=p.mercatorXfromLng(Me[1])*this.worldSize)-z<ae.x?ae.x/(Y-z):0}var Ne=this.point,Ye=Math.max(v||0,d||0);if(Ye)return this.center=this.unproject(new p.Point(v?(Y+z)/2:Ne.x,d?(F+O)/2:Ne.y)),this.zoom+=this.scaleZoom(Ye),this._unmodified=be,void(this._constraining=!1);if(this.latRange){var Ze=Ne.y,et=ae.y/2;Ze-et<O&&(x=O+et),Ze+et>F&&(x=F-et)}if(this.lngRange){var Ve=Ne.x,tt=ae.x/2;Ve-tt<z&&(g=z+tt),Ve+tt>Y&&(g=Y-tt)}g===void 0&&x===void 0||(this.center=this.unproject(new p.Point(g!==void 0?g:Ne.x,x!==void 0?x:Ne.y))),this._unmodified=be,this._constraining=!1}},Tn.prototype._calcMatrices=function(){if(this.height){var d=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var v=Math.PI/2+this._pitch,g=this._fov*(.5+d.y/this.height),x=Math.sin(g)*this.cameraToCenterDistance/Math.sin(p.clamp(Math.PI-v-g,.01,Math.PI-.01)),O=this.point,F=O.x,z=O.y,Y=1.01*(Math.cos(Math.PI/2-this._pitch)*x+this.cameraToCenterDistance),ae=this.height/50,be=new Float64Array(16);p.perspective(be,this._fov,this.width/this.height,ae,Y),be[8]=2*-d.x/this.width,be[9]=2*d.y/this.height,p.scale(be,be,[1,-1,1]),p.translate(be,be,[0,0,-this.cameraToCenterDistance]),p.rotateX(be,be,this._pitch),p.rotateZ(be,be,this.angle),p.translate(be,be,[-F,-z,0]),this.mercatorMatrix=p.scale([],be,[this.worldSize,this.worldSize,this.worldSize]),p.scale(be,be,[1,1,p.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=be,this.invProjMatrix=p.invert([],this.projMatrix);var De=this.width%2/2,Me=this.height%2/2,Ne=Math.cos(this.angle),Ye=Math.sin(this.angle),Ze=F-Math.round(F)+Ne*De+Ye*Me,et=z-Math.round(z)+Ne*Me+Ye*De,Ve=new Float64Array(be);if(p.translate(Ve,Ve,[Ze>.5?Ze-1:Ze,et>.5?et-1:et,0]),this.alignedProjMatrix=Ve,be=p.create(),p.scale(be,be,[this.width/2,-this.height/2,1]),p.translate(be,be,[1,-1,0]),this.labelPlaneMatrix=be,be=p.create(),p.scale(be,be,[1,-1,1]),p.translate(be,be,[-1,-1,0]),p.scale(be,be,[2/this.width,2/this.height,1]),this.glCoordMatrix=be,this.pixelMatrix=p.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(be=p.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=be,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Tn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var d=this.pointCoordinate(new p.Point(0,0)),v=[d.x*this.worldSize,d.y*this.worldSize,0,1];return p.transformMat4(v,v,this.pixelMatrix)[3]/this.cameraToCenterDistance},Tn.prototype.getCameraPoint=function(){var d=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new p.Point(0,d))},Tn.prototype.getCameraQueryGeometry=function(d){var v=this.getCameraPoint();if(d.length===1)return[d[0],v];for(var g=v.x,x=v.y,O=v.x,F=v.y,z=0,Y=d;z<Y.length;z+=1){var ae=Y[z];g=Math.min(g,ae.x),x=Math.min(x,ae.y),O=Math.max(O,ae.x),F=Math.max(F,ae.y)}return[new p.Point(g,x),new p.Point(O,x),new p.Point(O,F),new p.Point(g,F),new p.Point(g,x)]},Object.defineProperties(Tn.prototype,ti);var ws=function(d){var v,g,x,O;this._hashName=d&&encodeURIComponent(d),p.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(v=this._updateHashUnthrottled.bind(this),g=!1,x=null,O=function(){x=null,g&&(v(),x=setTimeout(O,300),g=!1)},function(){return g=!0,x||O(),x})};ws.prototype.addTo=function(d){return this._map=d,p.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ws.prototype.remove=function(){return p.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ws.prototype.getHashString=function(d){var v=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,x=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),O=Math.pow(10,x),F=Math.round(v.lng*O)/O,z=Math.round(v.lat*O)/O,Y=this._map.getBearing(),ae=this._map.getPitch(),be="";if(be+=d?"/"+F+"/"+z+"/"+g:g+"/"+z+"/"+F,(Y||ae)&&(be+="/"+Math.round(10*Y)/10),ae&&(be+="/"+Math.round(ae)),this._hashName){var De=this._hashName,Me=!1,Ne=p.window.location.hash.slice(1).split("&").map(function(Ye){var Ze=Ye.split("=")[0];return Ze===De?(Me=!0,Ze+"="+be):Ye}).filter(function(Ye){return Ye});return Me||Ne.push(De+"="+be),"#"+Ne.join("&")}return"#"+be},ws.prototype._getCurrentHash=function(){var d,v=this,g=p.window.location.hash.replace("#","");return this._hashName?(g.split("&").map(function(x){return x.split("=")}).forEach(function(x){x[0]===v._hashName&&(d=x)}),(d&&d[1]||"").split("/")):g.split("/")},ws.prototype._onHashChange=function(){var d=this._getCurrentHash();if(d.length>=3&&!d.some(function(g){return isNaN(g)})){var v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},ws.prototype._updateHashUnthrottled=function(){var d=p.window.location.href.replace(/(#.+)?$/,this.getHashString());try{p.window.history.replaceState(p.window.history.state,null,d)}catch{}};var pf={linearity:.3,easing:p.bezier(0,0,.3,1)},pl=p.extend({deceleration:2500,maxSpeed:1400},pf),mf=p.extend({deceleration:20,maxSpeed:1400},pf),up=p.extend({deceleration:1e3,maxSpeed:360},pf),gf=p.extend({deceleration:1e3,maxSpeed:90},pf),ih=function(d){this._map=d,this.clear()};function Ql(d,v){(!d.duration||d.duration<v.duration)&&(d.duration=v.duration,d.easing=v.easing)}function Ss(d,v,g){var x=g.maxSpeed,O=g.linearity,F=g.deceleration,z=p.clamp(d*O/(v/1e3),-x,x),Y=Math.abs(z)/(F*O);return{easing:g.easing,duration:1e3*Y,amount:z*(Y/2)}}ih.prototype.clear=function(){this._inertiaBuffer=[]},ih.prototype.record=function(d){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:p.browser.now(),settings:d})},ih.prototype._drainInertiaBuffer=function(){for(var d=this._inertiaBuffer,v=p.browser.now();d.length>0&&v-d[0].time>160;)d.shift()},ih.prototype._onMoveEnd=function(d){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var v={zoom:0,bearing:0,pitch:0,pan:new p.Point(0,0),pinchAround:void 0,around:void 0},g=0,x=this._inertiaBuffer;g<x.length;g+=1){var O=x[g].settings;v.zoom+=O.zoomDelta||0,v.bearing+=O.bearingDelta||0,v.pitch+=O.pitchDelta||0,O.panDelta&&v.pan._add(O.panDelta),O.around&&(v.around=O.around),O.pinchAround&&(v.pinchAround=O.pinchAround)}var F=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,z={};if(v.pan.mag()){var Y=Ss(v.pan.mag(),F,p.extend({},pl,d||{}));z.offset=v.pan.mult(Y.amount/v.pan.mag()),z.center=this._map.transform.center,Ql(z,Y)}if(v.zoom){var ae=Ss(v.zoom,F,mf);z.zoom=this._map.transform.zoom+ae.amount,Ql(z,ae)}if(v.bearing){var be=Ss(v.bearing,F,up);z.bearing=this._map.transform.bearing+p.clamp(be.amount,-179,179),Ql(z,be)}if(v.pitch){var De=Ss(v.pitch,F,gf);z.pitch=this._map.transform.pitch+De.amount,Ql(z,De)}if(z.zoom||z.bearing){var Me=v.pinchAround===void 0?v.around:v.pinchAround;z.around=Me?this._map.unproject(Me):this._map.getCenter()}return this.clear(),p.extend(z,{noMoveStart:!0})}};var po=function(d){function v(x,O,F,z){z===void 0&&(z={});var Y=j.mousePos(O.getCanvasContainer(),F),ae=O.unproject(Y);d.call(this,x,p.extend({point:Y,lngLat:ae,originalEvent:F},z)),this._defaultPrevented=!1,this.target=O}d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(p.Event),vf=function(d){function v(x,O,F){var z=x==="touchend"?F.changedTouches:F.touches,Y=j.touchPos(O.getCanvasContainer(),z),ae=Y.map(function(Me){return O.unproject(Me)}),be=Y.reduce(function(Me,Ne,Ye,Ze){return Me.add(Ne.div(Ze.length))},new p.Point(0,0)),De=O.unproject(be);d.call(this,x,{points:Y,point:be,lngLats:ae,lngLat:De,originalEvent:F}),this._defaultPrevented=!1}d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(p.Event),yf=function(d){function v(x,O,F){d.call(this,x,{originalEvent:F}),this._defaultPrevented=!1}d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v;var g={defaultPrevented:{configurable:!0}};return v.prototype.preventDefault=function(){this._defaultPrevented=!0},g.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(v.prototype,g),v}(p.Event),_o=function(d,v){this._map=d,this._clickTolerance=v.clickTolerance};_o.prototype.reset=function(){delete this._mousedownPos},_o.prototype.wheel=function(d){return this._firePreventable(new yf(d.type,this._map,d))},_o.prototype.mousedown=function(d,v){return this._mousedownPos=v,this._firePreventable(new po(d.type,this._map,d))},_o.prototype.mouseup=function(d){this._map.fire(new po(d.type,this._map,d))},_o.prototype.click=function(d,v){this._mousedownPos&&this._mousedownPos.dist(v)>=this._clickTolerance||this._map.fire(new po(d.type,this._map,d))},_o.prototype.dblclick=function(d){return this._firePreventable(new po(d.type,this._map,d))},_o.prototype.mouseover=function(d){this._map.fire(new po(d.type,this._map,d))},_o.prototype.mouseout=function(d){this._map.fire(new po(d.type,this._map,d))},_o.prototype.touchstart=function(d){return this._firePreventable(new vf(d.type,this._map,d))},_o.prototype.touchmove=function(d){this._map.fire(new vf(d.type,this._map,d))},_o.prototype.touchend=function(d){this._map.fire(new vf(d.type,this._map,d))},_o.prototype.touchcancel=function(d){this._map.fire(new vf(d.type,this._map,d))},_o.prototype._firePreventable=function(d){if(this._map.fire(d),d.defaultPrevented)return{}},_o.prototype.isEnabled=function(){return!0},_o.prototype.isActive=function(){return!1},_o.prototype.enable=function(){},_o.prototype.disable=function(){};var Ir=function(d){this._map=d};Ir.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Ir.prototype.mousemove=function(d){this._map.fire(new po(d.type,this._map,d))},Ir.prototype.mousedown=function(){this._delayContextMenu=!0},Ir.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new po("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Ir.prototype.contextmenu=function(d){this._delayContextMenu?this._contextMenuEvent=d:this._map.fire(new po(d.type,this._map,d)),this._map.listens("contextmenu")&&d.preventDefault()},Ir.prototype.isEnabled=function(){return!0},Ir.prototype.isActive=function(){return!1},Ir.prototype.enable=function(){},Ir.prototype.disable=function(){};var pa=function(d,v){this._map=d,this._el=d.getCanvasContainer(),this._container=d.getContainer(),this._clickTolerance=v.clickTolerance||1};function oh(d,v){for(var g={},x=0;x<d.length;x++)g[d[x].identifier]=v[x];return g}pa.prototype.isEnabled=function(){return!!this._enabled},pa.prototype.isActive=function(){return!!this._active},pa.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},pa.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},pa.prototype.mousedown=function(d,v){this.isEnabled()&&d.shiftKey&&d.button===0&&(j.disableDrag(),this._startPos=this._lastPos=v,this._active=!0)},pa.prototype.mousemoveWindow=function(d,v){if(this._active){var g=v;if(!(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)){var x=this._startPos;this._lastPos=g,this._box||(this._box=j.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",d));var O=Math.min(x.x,g.x),F=Math.max(x.x,g.x),z=Math.min(x.y,g.y),Y=Math.max(x.y,g.y);j.setTransform(this._box,"translate("+O+"px,"+z+"px)"),this._box.style.width=F-O+"px",this._box.style.height=Y-z+"px"}}},pa.prototype.mouseupWindow=function(d,v){var g=this;if(this._active&&d.button===0){var x=this._startPos,O=v;if(this.reset(),j.suppressClick(),x.x!==O.x||x.y!==O.y)return this._map.fire(new p.Event("boxzoomend",{originalEvent:d})),{cameraAnimation:function(F){return F.fitScreenCoordinates(x,O,g._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",d)}},pa.prototype.keydown=function(d){this._active&&d.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",d))},pa.prototype.blur=function(){this.reset()},pa.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(j.remove(this._box),this._box=null),j.enableDrag(),delete this._startPos,delete this._lastPos},pa.prototype._fireEvent=function(d,v){return this._map.fire(new p.Event(d,{originalEvent:v}))};var ah=function(d){this.reset(),this.numTouches=d.numTouches};ah.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},ah.prototype.touchstart=function(d,v,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=d.timeStamp),g.length===this.numTouches&&(this.centroid=function(x){for(var O=new p.Point(0,0),F=0,z=x;F<z.length;F+=1)O._add(z[F]);return O.div(x.length)}(v),this.touches=oh(g,v)))},ah.prototype.touchmove=function(d,v,g){if(!this.aborted&&this.centroid){var x=oh(g,v);for(var O in this.touches){var F=x[O];(!F||F.dist(this.touches[O])>30)&&(this.aborted=!0)}}},ah.prototype.touchend=function(d,v,g){if((!this.centroid||d.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){var x=!this.aborted&&this.centroid;if(this.reset(),x)return x}};var Ml=function(d){this.singleTap=new ah(d),this.numTaps=d.numTaps,this.reset()};Ml.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},Ml.prototype.touchstart=function(d,v,g){this.singleTap.touchstart(d,v,g)},Ml.prototype.touchmove=function(d,v,g){this.singleTap.touchmove(d,v,g)},Ml.prototype.touchend=function(d,v,g){var x=this.singleTap.touchend(d,v,g);if(x){var O=d.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(x)<30;if(O&&F||this.reset(),this.count++,this.lastTime=d.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}};var Es=function(){this._zoomIn=new Ml({numTouches:1,numTaps:2}),this._zoomOut=new Ml({numTouches:2,numTaps:1}),this.reset()};Es.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Es.prototype.touchstart=function(d,v,g){this._zoomIn.touchstart(d,v,g),this._zoomOut.touchstart(d,v,g)},Es.prototype.touchmove=function(d,v,g){this._zoomIn.touchmove(d,v,g),this._zoomOut.touchmove(d,v,g)},Es.prototype.touchend=function(d,v,g){var x=this,O=this._zoomIn.touchend(d,v,g),F=this._zoomOut.touchend(d,v,g);return O?(this._active=!0,d.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(z){return z.easeTo({duration:300,zoom:z.getZoom()+1,around:z.unproject(O)},{originalEvent:d})}}):F?(this._active=!0,d.preventDefault(),setTimeout(function(){return x.reset()},0),{cameraAnimation:function(z){return z.easeTo({duration:300,zoom:z.getZoom()-1,around:z.unproject(F)},{originalEvent:d})}}):void 0},Es.prototype.touchcancel=function(){this.reset()},Es.prototype.enable=function(){this._enabled=!0},Es.prototype.disable=function(){this._enabled=!1,this.reset()},Es.prototype.isEnabled=function(){return this._enabled},Es.prototype.isActive=function(){return this._active};var sd={0:1,2:2},nr=function(d){this.reset(),this._clickTolerance=d.clickTolerance||1};nr.prototype.blur=function(){this.reset()},nr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},nr.prototype._correctButton=function(d,v){return!1},nr.prototype._move=function(d,v){return{}},nr.prototype.mousedown=function(d,v){if(!this._lastPoint){var g=j.mouseButton(d);this._correctButton(d,g)&&(this._lastPoint=v,this._eventButton=g)}},nr.prototype.mousemoveWindow=function(d,v){var g=this._lastPoint;if(g){if(d.preventDefault(),function(x,O){var F=sd[O];return x.buttons===void 0||(x.buttons&F)!==F}(d,this._eventButton))this.reset();else if(this._moved||!(v.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=v,this._move(g,v)}},nr.prototype.mouseupWindow=function(d){this._lastPoint&&j.mouseButton(d)===this._eventButton&&(this._moved&&j.suppressClick(),this.reset())},nr.prototype.enable=function(){this._enabled=!0},nr.prototype.disable=function(){this._enabled=!1,this.reset()},nr.prototype.isEnabled=function(){return this._enabled},nr.prototype.isActive=function(){return this._active};var Ko=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.mousedown=function(g,x){d.prototype.mousedown.call(this,g,x),this._lastPoint&&(this._active=!0)},v.prototype._correctButton=function(g,x){return x===0&&!g.ctrlKey},v.prototype._move=function(g,x){return{around:x,panDelta:x.sub(g)}},v}(nr),cp=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype._correctButton=function(g,x){return x===0&&g.ctrlKey||x===2},v.prototype._move=function(g,x){var O=.8*(x.x-g.x);if(O)return this._active=!0,{bearingDelta:O}},v.prototype.contextmenu=function(g){g.preventDefault()},v}(nr),sh=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype._correctButton=function(g,x){return x===0&&g.ctrlKey||x===2},v.prototype._move=function(g,x){var O=-.5*(x.y-g.y);if(O)return this._active=!0,{pitchDelta:O}},v.prototype.contextmenu=function(g){g.preventDefault()},v}(nr),Ks=function(d){this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset()};Ks.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new p.Point(0,0)},Ks.prototype.touchstart=function(d,v,g){return this._calculateTransform(d,v,g)},Ks.prototype.touchmove=function(d,v,g){if(this._active&&!(g.length<this._minTouches))return d.preventDefault(),this._calculateTransform(d,v,g)},Ks.prototype.touchend=function(d,v,g){this._calculateTransform(d,v,g),this._active&&g.length<this._minTouches&&this.reset()},Ks.prototype.touchcancel=function(){this.reset()},Ks.prototype._calculateTransform=function(d,v,g){g.length>0&&(this._active=!0);var x=oh(g,v),O=new p.Point(0,0),F=new p.Point(0,0),z=0;for(var Y in x){var ae=x[Y],be=this._touches[Y];be&&(O._add(ae),F._add(ae.sub(be)),z++,x[Y]=ae)}if(this._touches=x,!(z<this._minTouches)&&F.mag()){var De=F.div(z);if(this._sum._add(De),!(this._sum.mag()<this._clickTolerance))return{around:O.div(z),panDelta:De}}},Ks.prototype.enable=function(){this._enabled=!0},Ks.prototype.disable=function(){this._enabled=!1,this.reset()},Ks.prototype.isEnabled=function(){return this._enabled},Ks.prototype.isActive=function(){return this._active};var Ga=function(){this.reset()};function bf(d,v,g){for(var x=0;x<d.length;x++)if(d[x].identifier===g)return v[x]}function Zs(d,v){return Math.log(d/v)/Math.LN2}Ga.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ga.prototype._start=function(d){},Ga.prototype._move=function(d,v,g){return{}},Ga.prototype.touchstart=function(d,v,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([v[0],v[1]]))},Ga.prototype.touchmove=function(d,v,g){if(this._firstTwoTouches){d.preventDefault();var x=this._firstTwoTouches,O=x[1],F=bf(g,v,x[0]),z=bf(g,v,O);if(F&&z){var Y=this._aroundCenter?null:F.add(z).div(2);return this._move([F,z],Y,d)}}},Ga.prototype.touchend=function(d,v,g){if(this._firstTwoTouches){var x=this._firstTwoTouches,O=x[1],F=bf(g,v,x[0]),z=bf(g,v,O);F&&z||(this._active&&j.suppressClick(),this.reset())}},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype.enable=function(d){this._enabled=!0,this._aroundCenter=!!d&&d.around==="center"},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};var ma=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.reset=function(){d.prototype.reset.call(this),delete this._distance,delete this._startDistance},v.prototype._start=function(g){this._startDistance=this._distance=g[0].dist(g[1])},v.prototype._move=function(g,x){var O=this._distance;if(this._distance=g[0].dist(g[1]),this._active||!(Math.abs(Zs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zs(this._distance,O),pinchAround:x}},v}(Ga);function ga(d,v){return 180*d.angleWith(v)/Math.PI}var Su=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.reset=function(){d.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},v.prototype._start=function(g){this._startVector=this._vector=g[0].sub(g[1]),this._minDiameter=g[0].dist(g[1])},v.prototype._move=function(g,x){var O=this._vector;if(this._vector=g[0].sub(g[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ga(this._vector,O),pinchAround:x}},v.prototype._isBelowThreshold=function(g){this._minDiameter=Math.min(this._minDiameter,g.mag());var x=25/(Math.PI*this._minDiameter)*360,O=ga(g,this._startVector);return Math.abs(O)<x},v}(Ga);function Ys(d){return Math.abs(d.y)>Math.abs(d.x)}var _f=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.reset=function(){d.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},v.prototype._start=function(g){this._lastPoints=g,Ys(g[0].sub(g[1]))&&(this._valid=!1)},v.prototype._move=function(g,x,O){var F=g[0].sub(this._lastPoints[0]),z=g[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(F,z,O.timeStamp),this._valid)return this._lastPoints=g,this._active=!0,{pitchDelta:(F.y+z.y)/2*-.5}},v.prototype.gestureBeginsVertically=function(g,x,O){if(this._valid!==void 0)return this._valid;var F=g.mag()>=2,z=x.mag()>=2;if(F||z){if(!F||!z)return this._firstMove===void 0&&(this._firstMove=O),O-this._firstMove<100&&void 0;var Y=g.y>0==x.y>0;return Ys(g)&&Ys(x)&&Y}},v}(Ga),$u={panStep:100,bearingStep:15,pitchStep:10},Ll=function(){var d=$u;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1};function ml(d){return d*(2-d)}Ll.prototype.blur=function(){this.reset()},Ll.prototype.reset=function(){this._active=!1},Ll.prototype.keydown=function(d){var v=this;if(!(d.altKey||d.ctrlKey||d.metaKey)){var g=0,x=0,O=0,F=0,z=0;switch(d.keyCode){case 61:case 107:case 171:case 187:g=1;break;case 189:case 109:case 173:g=-1;break;case 37:d.shiftKey?x=-1:(d.preventDefault(),F=-1);break;case 39:d.shiftKey?x=1:(d.preventDefault(),F=1);break;case 38:d.shiftKey?O=1:(d.preventDefault(),z=-1);break;case 40:d.shiftKey?O=-1:(d.preventDefault(),z=1);break;default:return}return this._rotationDisabled&&(x=0,O=0),{cameraAnimation:function(Y){var ae=Y.getZoom();Y.easeTo({duration:300,easeId:"keyboardHandler",easing:ml,zoom:g?Math.round(ae)+g*(d.shiftKey?2:1):ae,bearing:Y.getBearing()+x*v._bearingStep,pitch:Y.getPitch()+O*v._pitchStep,offset:[-F*v._panStep,-z*v._panStep],center:Y.getCenter()},{originalEvent:d})}}}},Ll.prototype.enable=function(){this._enabled=!0},Ll.prototype.disable=function(){this._enabled=!1,this.reset()},Ll.prototype.isEnabled=function(){return this._enabled},Ll.prototype.isActive=function(){return this._active},Ll.prototype.disableRotation=function(){this._rotationDisabled=!0},Ll.prototype.enableRotation=function(){this._rotationDisabled=!1};var In=function(d,v){this._map=d,this._el=d.getCanvasContainer(),this._handler=v,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,p.bindAll(["_onTimeout"],this)};In.prototype.setZoomRate=function(d){this._defaultZoomRate=d},In.prototype.setWheelZoomRate=function(d){this._wheelZoomRate=d},In.prototype.isEnabled=function(){return!!this._enabled},In.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},In.prototype.isZooming=function(){return!!this._zooming},In.prototype.enable=function(d){this.isEnabled()||(this._enabled=!0,this._aroundCenter=d&&d.around==="center")},In.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},In.prototype.wheel=function(d){if(this.isEnabled()){var v=d.deltaMode===p.window.WheelEvent.DOM_DELTA_LINE?40*d.deltaY:d.deltaY,g=p.browser.now(),x=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,v!==0&&v%4.000244140625==0?this._type="wheel":v!==0&&Math.abs(v)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=v,this._timeout=setTimeout(this._onTimeout,40,d)):this._type||(this._type=Math.abs(x*v)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,v+=this._lastValue)),d.shiftKey&&v&&(v/=4),this._type&&(this._lastWheelEvent=d,this._delta-=v,this._active||this._start(d)),d.preventDefault()}},In.prototype._onTimeout=function(d){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},In.prototype._start=function(d){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var v=j.mousePos(this._el,d);this._around=p.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(v)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},In.prototype.renderFrame=function(){var d=this;if(this._frameId&&(this._frameId=null,this.isActive())){var v=this._map.transform;if(this._delta!==0){var g=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,x=2/(1+Math.exp(-Math.abs(this._delta*g)));this._delta<0&&x!==0&&(x=1/x);var O=typeof this._targetZoom=="number"?v.zoomScale(this._targetZoom):v.scale;this._targetZoom=Math.min(v.maxZoom,Math.max(v.minZoom,v.scaleZoom(O*x))),this._type==="wheel"&&(this._startZoom=v.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var F,z=typeof this._targetZoom=="number"?this._targetZoom:v.zoom,Y=this._startZoom,ae=this._easing,be=!1;if(this._type==="wheel"&&Y&&ae){var De=Math.min((p.browser.now()-this._lastWheelEventTime)/200,1),Me=ae(De);F=p.number(Y,z,Me),De<1?this._frameId||(this._frameId=!0):be=!0}else F=z,be=!0;return this._active=!0,be&&(this._active=!1,this._finishTimeout=setTimeout(function(){d._zooming=!1,d._handler._triggerRenderFrame(),delete d._targetZoom,delete d._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!be,zoomDelta:F-v.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},In.prototype._smoothOutEasing=function(d){var v=p.ease;if(this._prevEase){var g=this._prevEase,x=(p.browser.now()-g.start)/g.duration,O=g.easing(x+.01)-g.easing(x),F=.27/Math.sqrt(O*O+1e-4)*.01,z=Math.sqrt(.0729-F*F);v=p.bezier(F,z,.25,1)}return this._prevEase={start:p.browser.now(),duration:d,easing:v},v},In.prototype.blur=function(){this.reset()},In.prototype.reset=function(){this._active=!1};var Ts=function(d,v){this._clickZoom=d,this._tapZoom=v};Ts.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ts.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ts.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ts.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Rl=function(){this.reset()};Rl.prototype.reset=function(){this._active=!1},Rl.prototype.blur=function(){this.reset()},Rl.prototype.dblclick=function(d,v){return d.preventDefault(),{cameraAnimation:function(g){g.easeTo({duration:300,zoom:g.getZoom()+(d.shiftKey?-1:1),around:g.unproject(v)},{originalEvent:d})}}},Rl.prototype.enable=function(){this._enabled=!0},Rl.prototype.disable=function(){this._enabled=!1,this.reset()},Rl.prototype.isEnabled=function(){return this._enabled},Rl.prototype.isActive=function(){return this._active};var ia=function(){this._tap=new Ml({numTouches:1,numTaps:1}),this.reset()};ia.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},ia.prototype.touchstart=function(d,v,g){this._swipePoint||(this._tapTime&&d.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=v[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(d,v,g))},ia.prototype.touchmove=function(d,v,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;var x=v[0],O=x.y-this._swipePoint.y;return this._swipePoint=x,d.preventDefault(),this._active=!0,{zoomDelta:O/128}}}else this._tap.touchmove(d,v,g)},ia.prototype.touchend=function(d,v,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(d,v,g)&&(this._tapTime=d.timeStamp)},ia.prototype.touchcancel=function(){this.reset()},ia.prototype.enable=function(){this._enabled=!0},ia.prototype.disable=function(){this._enabled=!1,this.reset()},ia.prototype.isEnabled=function(){return this._enabled},ia.prototype.isActive=function(){return this._active};var eu=function(d,v,g){this._el=d,this._mousePan=v,this._touchPan=g};eu.prototype.enable=function(d){this._inertiaOptions=d||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},eu.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},eu.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},eu.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Gu=function(d,v,g){this._pitchWithRotate=d.pitchWithRotate,this._mouseRotate=v,this._mousePitch=g};Gu.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Gu.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Gu.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Gu.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Le=function(d,v,g,x){this._el=d,this._touchZoom=v,this._touchRotate=g,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0};Le.prototype.enable=function(d){this._touchZoom.enable(d),this._rotationDisabled||this._touchRotate.enable(d),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Le.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Le.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Le.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Le.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Le.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var oa=function(d){return d.zoom||d.drag||d.pitch||d.rotate},aa=function(d){function v(){d.apply(this,arguments)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v}(p.Event);function mr(d){return d.panDelta&&d.panDelta.mag()||d.zoomDelta||d.bearingDelta||d.pitchDelta}var Xt=function(d,v){this._map=d,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ih(d),this._bearingSnap=v.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(v),p.bindAll(["handleEvent","handleWindowEvent"],this);var g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[p.window.document,"mousemove",{capture:!0}],[p.window.document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[p.window,"blur",void 0]];for(var x=0,O=this._listeners;x<O.length;x+=1){var F=O[x],z=F[0];j.addEventListener(z,F[1],z===p.window.document?this.handleWindowEvent:this.handleEvent,F[2])}};Xt.prototype.destroy=function(){for(var d=0,v=this._listeners;d<v.length;d+=1){var g=v[d],x=g[0];j.removeEventListener(x,g[1],x===p.window.document?this.handleWindowEvent:this.handleEvent,g[2])}},Xt.prototype._addDefaultHandlers=function(d){var v=this._map,g=v.getCanvasContainer();this._add("mapEvent",new _o(v,d));var x=v.boxZoom=new pa(v,d);this._add("boxZoom",x);var O=new Es,F=new Rl;v.doubleClickZoom=new Ts(F,O),this._add("tapZoom",O),this._add("clickZoom",F);var z=new ia;this._add("tapDragZoom",z);var Y=v.touchPitch=new _f;this._add("touchPitch",Y);var ae=new cp(d),be=new sh(d);v.dragRotate=new Gu(d,ae,be),this._add("mouseRotate",ae,["mousePitch"]),this._add("mousePitch",be,["mouseRotate"]);var De=new Ko(d),Me=new Ks(d);v.dragPan=new eu(g,De,Me),this._add("mousePan",De),this._add("touchPan",Me,["touchZoom","touchRotate"]);var Ne=new Su,Ye=new ma;v.touchZoomRotate=new Le(g,Ye,Ne,z),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",Ye,["touchPan","touchRotate"]);var Ze=v.scrollZoom=new In(v,this);this._add("scrollZoom",Ze,["mousePan"]);var et=v.keyboard=new Ll;this._add("keyboard",et),this._add("blockableMapEvent",new Ir(v));for(var Ve=0,tt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Ve<tt.length;Ve+=1){var ft=tt[Ve];d.interactive&&d[ft]&&v[ft].enable(d[ft])}},Xt.prototype._add=function(d,v,g){this._handlers.push({handlerName:d,handler:v,allowed:g}),this._handlersById[d]=v},Xt.prototype.stop=function(d){if(!this._updatingCamera){for(var v=0,g=this._handlers;v<g.length;v+=1)g[v].handler.reset();this._inertia.clear(),this._fireEvents({},{},d),this._changes=[]}},Xt.prototype.isActive=function(){for(var d=0,v=this._handlers;d<v.length;d+=1)if(v[d].handler.isActive())return!0;return!1},Xt.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Xt.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Xt.prototype.isMoving=function(){return!!oa(this._eventsInProgress)||this.isZooming()},Xt.prototype._blockedByActive=function(d,v,g){for(var x in d)if(x!==g&&(!v||v.indexOf(x)<0))return!0;return!1},Xt.prototype.handleWindowEvent=function(d){this.handleEvent(d,d.type+"Window")},Xt.prototype._getMapTouches=function(d){for(var v=[],g=0,x=d;g<x.length;g+=1){var O=x[g];this._el.contains(O.target)&&v.push(O)}return v},Xt.prototype.handleEvent=function(d,v){this._updatingCamera=!0;for(var g=d.type==="renderFrame"?void 0:d,x={needsRenderFrame:!1},O={},F={},z=d.touches?this._getMapTouches(d.touches):void 0,Y=z?j.touchPos(this._el,z):j.mousePos(this._el,d),ae=0,be=this._handlers;ae<be.length;ae+=1){var De=be[ae],Me=De.handlerName,Ne=De.handler,Ye=De.allowed;if(Ne.isEnabled()){var Ze=void 0;this._blockedByActive(F,Ye,Me)?Ne.reset():Ne[v||d.type]&&(Ze=Ne[v||d.type](d,Y,z),this.mergeHandlerResult(x,O,Ze,Me,g),Ze&&Ze.needsRenderFrame&&this._triggerRenderFrame()),(Ze||Ne.isActive())&&(F[Me]=Ne)}}var et={};for(var Ve in this._previousActiveHandlers)F[Ve]||(et[Ve]=g);this._previousActiveHandlers=F,(Object.keys(et).length||mr(x))&&(this._changes.push([x,O,et]),this._triggerRenderFrame()),(Object.keys(F).length||mr(x))&&this._map._stop(!0),this._updatingCamera=!1;var tt=x.cameraAnimation;tt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],tt(this._map))},Xt.prototype.mergeHandlerResult=function(d,v,g,x,O){if(g){p.extend(d,g);var F={handlerName:x,originalEvent:g.originalEvent||O};g.zoomDelta!==void 0&&(v.zoom=F),g.panDelta!==void 0&&(v.drag=F),g.pitchDelta!==void 0&&(v.pitch=F),g.bearingDelta!==void 0&&(v.rotate=F)}},Xt.prototype._applyChanges=function(){for(var d={},v={},g={},x=0,O=this._changes;x<O.length;x+=1){var F=O[x],z=F[0],Y=F[1],ae=F[2];z.panDelta&&(d.panDelta=(d.panDelta||new p.Point(0,0))._add(z.panDelta)),z.zoomDelta&&(d.zoomDelta=(d.zoomDelta||0)+z.zoomDelta),z.bearingDelta&&(d.bearingDelta=(d.bearingDelta||0)+z.bearingDelta),z.pitchDelta&&(d.pitchDelta=(d.pitchDelta||0)+z.pitchDelta),z.around!==void 0&&(d.around=z.around),z.pinchAround!==void 0&&(d.pinchAround=z.pinchAround),z.noInertia&&(d.noInertia=z.noInertia),p.extend(v,Y),p.extend(g,ae)}this._updateMapTransform(d,v,g),this._changes=[]},Xt.prototype._updateMapTransform=function(d,v,g){var x=this._map,O=x.transform;if(!mr(d))return this._fireEvents(v,g,!0);var F=d.panDelta,z=d.zoomDelta,Y=d.bearingDelta,ae=d.pitchDelta,be=d.around,De=d.pinchAround;De!==void 0&&(be=De),x._stop(!0),be=be||x.transform.centerPoint;var Me=O.pointLocation(F?be.sub(F):be);Y&&(O.bearing+=Y),ae&&(O.pitch+=ae),z&&(O.zoom+=z),O.setLocationAtPoint(Me,be),this._map._update(),d.noInertia||this._inertia.record(d),this._fireEvents(v,g,!0)},Xt.prototype._fireEvents=function(d,v,g){var x=this,O=oa(this._eventsInProgress),F=oa(d),z={};for(var Y in d)this._eventsInProgress[Y]||(z[Y+"start"]=d[Y].originalEvent),this._eventsInProgress[Y]=d[Y];for(var ae in!O&&F&&this._fireEvent("movestart",F.originalEvent),z)this._fireEvent(ae,z[ae]);for(var be in F&&this._fireEvent("move",F.originalEvent),d)this._fireEvent(be,d[be].originalEvent);var De,Me={};for(var Ne in this._eventsInProgress){var Ye=this._eventsInProgress[Ne],Ze=Ye.handlerName,et=Ye.originalEvent;this._handlersById[Ze].isActive()||(delete this._eventsInProgress[Ne],Me[Ne+"end"]=De=v[Ze]||et)}for(var Ve in Me)this._fireEvent(Ve,Me[Ve]);var tt=oa(this._eventsInProgress);if(g&&(O||F)&&!tt){this._updatingCamera=!0;var ft=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),xt=function(Bt){return Bt!==0&&-x._bearingSnap<Bt&&Bt<x._bearingSnap};ft?(xt(ft.bearing||this._map.getBearing())&&(ft.bearing=0),this._map.easeTo(ft,{originalEvent:De})):(this._map.fire(new p.Event("moveend",{originalEvent:De})),xt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Xt.prototype._fireEvent=function(d,v){this._map.fire(new p.Event(d,v?{originalEvent:v}:{}))},Xt.prototype._requestFrame=function(){var d=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add(function(v){delete d._frameId,d.handleEvent(new aa("renderFrame",{timeStamp:v})),d._applyChanges()})},Xt.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var Zo=function(d){function v(g,x){d.call(this),this._moving=!1,this._zooming=!1,this.transform=g,this._bearingSnap=x.bearingSnap,p.bindAll(["_renderFrameCallback"],this)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.getCenter=function(){return new p.LngLat(this.transform.center.lng,this.transform.center.lat)},v.prototype.setCenter=function(g,x){return this.jumpTo({center:g},x)},v.prototype.panBy=function(g,x,O){return g=p.Point.convert(g).mult(-1),this.panTo(this.transform.center,p.extend({offset:g},x),O)},v.prototype.panTo=function(g,x,O){return this.easeTo(p.extend({center:g},x),O)},v.prototype.getZoom=function(){return this.transform.zoom},v.prototype.setZoom=function(g,x){return this.jumpTo({zoom:g},x),this},v.prototype.zoomTo=function(g,x,O){return this.easeTo(p.extend({zoom:g},x),O)},v.prototype.zoomIn=function(g,x){return this.zoomTo(this.getZoom()+1,g,x),this},v.prototype.zoomOut=function(g,x){return this.zoomTo(this.getZoom()-1,g,x),this},v.prototype.getBearing=function(){return this.transform.bearing},v.prototype.setBearing=function(g,x){return this.jumpTo({bearing:g},x),this},v.prototype.getPadding=function(){return this.transform.padding},v.prototype.setPadding=function(g,x){return this.jumpTo({padding:g},x),this},v.prototype.rotateTo=function(g,x,O){return this.easeTo(p.extend({bearing:g},x),O)},v.prototype.resetNorth=function(g,x){return this.rotateTo(0,p.extend({duration:1e3},g),x),this},v.prototype.resetNorthPitch=function(g,x){return this.easeTo(p.extend({bearing:0,pitch:0,duration:1e3},g),x),this},v.prototype.snapToNorth=function(g,x){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(g,x):this},v.prototype.getPitch=function(){return this.transform.pitch},v.prototype.setPitch=function(g,x){return this.jumpTo({pitch:g},x),this},v.prototype.cameraForBounds=function(g,x){g=p.LngLatBounds.convert(g);var O=x&&x.bearing||0;return this._cameraForBoxAndBearing(g.getNorthWest(),g.getSouthEast(),O,x)},v.prototype._cameraForBoxAndBearing=function(g,x,O,F){var z={top:0,bottom:0,right:0,left:0};if(typeof(F=p.extend({padding:z,offset:[0,0],maxZoom:this.transform.maxZoom},F)).padding=="number"){var Y=F.padding;F.padding={top:Y,bottom:Y,right:Y,left:Y}}F.padding=p.extend(z,F.padding);var ae=this.transform,be=ae.padding,De=ae.project(p.LngLat.convert(g)),Me=ae.project(p.LngLat.convert(x)),Ne=De.rotate(-O*Math.PI/180),Ye=Me.rotate(-O*Math.PI/180),Ze=new p.Point(Math.max(Ne.x,Ye.x),Math.max(Ne.y,Ye.y)),et=new p.Point(Math.min(Ne.x,Ye.x),Math.min(Ne.y,Ye.y)),Ve=Ze.sub(et),tt=(ae.width-(be.left+be.right+F.padding.left+F.padding.right))/Ve.x,ft=(ae.height-(be.top+be.bottom+F.padding.top+F.padding.bottom))/Ve.y;if(!(ft<0||tt<0)){var xt=Math.min(ae.scaleZoom(ae.scale*Math.min(tt,ft)),F.maxZoom),Bt=typeof F.offset.x=="number"?new p.Point(F.offset.x,F.offset.y):p.Point.convert(F.offset),Pt=new p.Point((F.padding.left-F.padding.right)/2,(F.padding.top-F.padding.bottom)/2).rotate(O*Math.PI/180),Dt=Bt.add(Pt).mult(ae.scale/ae.zoomScale(xt));return{center:ae.unproject(De.add(Me).div(2).sub(Dt)),zoom:xt,bearing:O}}p.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},v.prototype.fitBounds=function(g,x,O){return this._fitInternal(this.cameraForBounds(g,x),x,O)},v.prototype.fitScreenCoordinates=function(g,x,O,F,z){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(p.Point.convert(g)),this.transform.pointLocation(p.Point.convert(x)),O,F),F,z)},v.prototype._fitInternal=function(g,x,O){return g?(delete(x=p.extend(g,x)).padding,x.linear?this.easeTo(x,O):this.flyTo(x,O)):this},v.prototype.jumpTo=function(g,x){this.stop();var O=this.transform,F=!1,z=!1,Y=!1;return"zoom"in g&&O.zoom!==+g.zoom&&(F=!0,O.zoom=+g.zoom),g.center!==void 0&&(O.center=p.LngLat.convert(g.center)),"bearing"in g&&O.bearing!==+g.bearing&&(z=!0,O.bearing=+g.bearing),"pitch"in g&&O.pitch!==+g.pitch&&(Y=!0,O.pitch=+g.pitch),g.padding==null||O.isPaddingEqual(g.padding)||(O.padding=g.padding),this.fire(new p.Event("movestart",x)).fire(new p.Event("move",x)),F&&this.fire(new p.Event("zoomstart",x)).fire(new p.Event("zoom",x)).fire(new p.Event("zoomend",x)),z&&this.fire(new p.Event("rotatestart",x)).fire(new p.Event("rotate",x)).fire(new p.Event("rotateend",x)),Y&&this.fire(new p.Event("pitchstart",x)).fire(new p.Event("pitch",x)).fire(new p.Event("pitchend",x)),this.fire(new p.Event("moveend",x))},v.prototype.easeTo=function(g,x){var O=this;this._stop(!1,g.easeId),((g=p.extend({offset:[0,0],duration:500,easing:p.ease},g)).animate===!1||!g.essential&&p.browser.prefersReducedMotion)&&(g.duration=0);var F=this.transform,z=this.getZoom(),Y=this.getBearing(),ae=this.getPitch(),be=this.getPadding(),De="zoom"in g?+g.zoom:z,Me="bearing"in g?this._normalizeBearing(g.bearing,Y):Y,Ne="pitch"in g?+g.pitch:ae,Ye="padding"in g?g.padding:F.padding,Ze=p.Point.convert(g.offset),et=F.centerPoint.add(Ze),Ve=F.pointLocation(et),tt=p.LngLat.convert(g.center||Ve);this._normalizeCenter(tt);var ft,xt,Bt=F.project(Ve),Pt=F.project(tt).sub(Bt),Dt=F.zoomScale(De-z);g.around&&(ft=p.LngLat.convert(g.around),xt=F.locationPoint(ft));var Yt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||De!==z,this._rotating=this._rotating||Y!==Me,this._pitching=this._pitching||Ne!==ae,this._padding=!F.isPaddingEqual(Ye),this._easeId=g.easeId,this._prepareEase(x,g.noMoveStart,Yt),this._ease(function(hr){if(O._zooming&&(F.zoom=p.number(z,De,hr)),O._rotating&&(F.bearing=p.number(Y,Me,hr)),O._pitching&&(F.pitch=p.number(ae,Ne,hr)),O._padding&&(F.interpolatePadding(be,Ye,hr),et=F.centerPoint.add(Ze)),ft)F.setLocationAtPoint(ft,xt);else{var or=F.zoomScale(F.zoom-z),Er=De>z?Math.min(2,Dt):Math.max(.5,Dt),Wr=Math.pow(Er,1-hr),Vr=F.unproject(Bt.add(Pt.mult(hr*Wr)).mult(or));F.setLocationAtPoint(F.renderWorldCopies?Vr.wrap():Vr,et)}O._fireMoveEvents(x)},function(hr){O._afterEase(x,hr)},g),this},v.prototype._prepareEase=function(g,x,O){O===void 0&&(O={}),this._moving=!0,x||O.moving||this.fire(new p.Event("movestart",g)),this._zooming&&!O.zooming&&this.fire(new p.Event("zoomstart",g)),this._rotating&&!O.rotating&&this.fire(new p.Event("rotatestart",g)),this._pitching&&!O.pitching&&this.fire(new p.Event("pitchstart",g))},v.prototype._fireMoveEvents=function(g){this.fire(new p.Event("move",g)),this._zooming&&this.fire(new p.Event("zoom",g)),this._rotating&&this.fire(new p.Event("rotate",g)),this._pitching&&this.fire(new p.Event("pitch",g))},v.prototype._afterEase=function(g,x){if(!this._easeId||!x||this._easeId!==x){delete this._easeId;var O=this._zooming,F=this._rotating,z=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,O&&this.fire(new p.Event("zoomend",g)),F&&this.fire(new p.Event("rotateend",g)),z&&this.fire(new p.Event("pitchend",g)),this.fire(new p.Event("moveend",g))}},v.prototype.flyTo=function(g,x){var O=this;if(!g.essential&&p.browser.prefersReducedMotion){var F=p.pick(g,["center","zoom","bearing","pitch","around"]);return this.jumpTo(F,x)}this.stop(),g=p.extend({offset:[0,0],speed:1.2,curve:1.42,easing:p.ease},g);var z=this.transform,Y=this.getZoom(),ae=this.getBearing(),be=this.getPitch(),De=this.getPadding(),Me="zoom"in g?p.clamp(+g.zoom,z.minZoom,z.maxZoom):Y,Ne="bearing"in g?this._normalizeBearing(g.bearing,ae):ae,Ye="pitch"in g?+g.pitch:be,Ze="padding"in g?g.padding:z.padding,et=z.zoomScale(Me-Y),Ve=p.Point.convert(g.offset),tt=z.centerPoint.add(Ve),ft=z.pointLocation(tt),xt=p.LngLat.convert(g.center||ft);this._normalizeCenter(xt);var Bt=z.project(ft),Pt=z.project(xt).sub(Bt),Dt=g.curve,Yt=Math.max(z.width,z.height),hr=Yt/et,or=Pt.mag();if("minZoom"in g){var Er=p.clamp(Math.min(g.minZoom,Y,Me),z.minZoom,z.maxZoom),Wr=Yt/z.zoomScale(Er-Y);Dt=Math.sqrt(Wr/or*2)}var Vr=Dt*Dt;function Mr(nn){var ln=(hr*hr-Yt*Yt+(nn?-1:1)*Vr*Vr*or*or)/(2*(nn?hr:Yt)*Vr*or);return Math.log(Math.sqrt(ln*ln+1)-ln)}function vn(nn){return(Math.exp(nn)-Math.exp(-nn))/2}function Cr(nn){return(Math.exp(nn)+Math.exp(-nn))/2}var gn=Mr(0),Dn=function(nn){return Cr(gn)/Cr(gn+Dt*nn)},cn=function(nn){return Yt*((Cr(gn)*(vn(ln=gn+Dt*nn)/Cr(ln))-vn(gn))/Vr)/or;var ln},sn=(Mr(1)-gn)/Dt;if(Math.abs(or)<1e-6||!isFinite(sn)){if(Math.abs(Yt-hr)<1e-6)return this.easeTo(g,x);var An=hr<Yt?-1:1;sn=Math.abs(Math.log(hr/Yt))/Dt,cn=function(){return 0},Dn=function(nn){return Math.exp(An*Dt*nn)}}return g.duration="duration"in g?+g.duration:1e3*sn/("screenSpeed"in g?+g.screenSpeed/Dt:+g.speed),g.maxDuration&&g.duration>g.maxDuration&&(g.duration=0),this._zooming=!0,this._rotating=ae!==Ne,this._pitching=Ye!==be,this._padding=!z.isPaddingEqual(Ze),this._prepareEase(x,!1),this._ease(function(nn){var ln=nn*sn,xo=1/Dn(ln);z.zoom=nn===1?Me:Y+z.scaleZoom(xo),O._rotating&&(z.bearing=p.number(ae,Ne,nn)),O._pitching&&(z.pitch=p.number(be,Ye,nn)),O._padding&&(z.interpolatePadding(De,Ze,nn),tt=z.centerPoint.add(Ve));var wo=nn===1?xt:z.unproject(Bt.add(Pt.mult(cn(ln))).mult(xo));z.setLocationAtPoint(z.renderWorldCopies?wo.wrap():wo,tt),O._fireMoveEvents(x)},function(){return O._afterEase(x)},g),this},v.prototype.isEasing=function(){return!!this._easeFrameId},v.prototype.stop=function(){return this._stop()},v.prototype._stop=function(g,x){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var O=this._onEaseEnd;delete this._onEaseEnd,O.call(this,x)}if(!g){var F=this.handlers;F&&F.stop(!1)}return this},v.prototype._ease=function(g,x,O){O.animate===!1||O.duration===0?(g(1),x()):(this._easeStart=p.browser.now(),this._easeOptions=O,this._onEaseFrame=g,this._onEaseEnd=x,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},v.prototype._renderFrameCallback=function(){var g=Math.min((p.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(g)),g<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},v.prototype._normalizeBearing=function(g,x){g=p.wrap(g,-180,180);var O=Math.abs(g-x);return Math.abs(g-360-x)<O&&(g-=360),Math.abs(g+360-x)<O&&(g+=360),g},v.prototype._normalizeCenter=function(g){var x=this.transform;if(x.renderWorldCopies&&!x.lngRange){var O=g.lng-x.center.lng;g.lng+=O>180?-360:O<-180?360:0}},v}(p.Evented),va=function(d){d===void 0&&(d={}),this.options=d,p.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};va.prototype.getDefaultPosition=function(){return"bottom-right"},va.prototype.onAdd=function(d){var v=this.options&&this.options.compact;return this._map=d,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=j.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=j.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),v&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),v===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},va.prototype.onRemove=function(){j.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},va.prototype._setElementTitle=function(d,v){var g=this._map._getUIString("AttributionControl."+v);d.title=g,d.setAttribute("aria-label",g)},va.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},va.prototype._updateEditLink=function(){var d=this._editLink;d||(d=this._editLink=this._container.querySelector(".mapbox-improve-map"));var v=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||p.config.ACCESS_TOKEN}];if(d){var g=v.reduce(function(x,O,F){return O.value&&(x+=O.key+"="+O.value+(F<v.length-1?"&":"")),x},"?");d.href=p.config.FEEDBACK_URL+"/"+g+(this._map._hash?this._map._hash.getHashString(!0):""),d.rel="noopener nofollow",this._setElementTitle(d,"MapFeedback")}},va.prototype._updateData=function(d){!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},va.prototype._updateAttributions=function(){if(this._map.style){var d=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?d=d.concat(this.options.customAttribution.map(function(Y){return typeof Y!="string"?"":Y})):typeof this.options.customAttribution=="string"&&d.push(this.options.customAttribution)),this._map.style.stylesheet){var v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}var g=this._map.style.sourceCaches;for(var x in g){var O=g[x];if(O.used){var F=O.getSource();F.attribution&&d.indexOf(F.attribution)<0&&d.push(F.attribution)}}d.sort(function(Y,ae){return Y.length-ae.length});var z=(d=d.filter(function(Y,ae){for(var be=ae+1;be<d.length;be++)if(d[be].indexOf(Y)>=0)return!1;return!0})).join(" | ");z!==this._attribHTML&&(this._attribHTML=z,d.length?(this._innerContainer.innerHTML=z,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},va.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var tu=function(){p.bindAll(["_updateLogo"],this),p.bindAll(["_updateCompact"],this)};tu.prototype.onAdd=function(d){this._map=d,this._container=j.create("div","mapboxgl-ctrl");var v=j.create("a","mapboxgl-ctrl-logo");return v.target="_blank",v.rel="noopener nofollow",v.href="https://www.mapbox.com/",v.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),v.setAttribute("rel","noopener nofollow"),this._container.appendChild(v),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},tu.prototype.onRemove=function(){j.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},tu.prototype.getDefaultPosition=function(){return"bottom-left"},tu.prototype._updateLogo=function(d){d&&d.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},tu.prototype._logoRequired=function(){if(this._map.style){var d=this._map.style.sourceCaches;for(var v in d)if(d[v].getSource().mapbox_logo)return!0;return!1}},tu.prototype._updateCompact=function(){var d=this._container.children;if(d.length){var v=d[0];this._map.getCanvasContainer().offsetWidth<250?v.classList.add("mapboxgl-compact"):v.classList.remove("mapboxgl-compact")}};var ao=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};ao.prototype.add=function(d){var v=++this._id;return this._queue.push({callback:d,id:v,cancelled:!1}),v},ao.prototype.remove=function(d){for(var v=this._currentlyRunning,g=0,x=v?this._queue.concat(v):this._queue;g<x.length;g+=1){var O=x[g];if(O.id===d)return void(O.cancelled=!0)}},ao.prototype.run=function(d){d===void 0&&(d=0);var v=this._currentlyRunning=this._queue;this._queue=[];for(var g=0,x=v;g<x.length;g+=1){var O=x[g];if(!O.cancelled&&(O.callback(d),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},ao.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Eu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},mm=p.window.HTMLImageElement,fp=p.window.HTMLElement,ui=p.window.ImageBitmap,ya={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Fl=function(d){function v(x){var O=this;if((x=p.extend({},ya,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var F=new Tn(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies);if(d.call(this,F,x),this._interactive=x.interactive,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new ao,this._controls=[],this._mapId=p.uniqueId(),this._locale=p.extend({},Eu,x.locale),this._clickTolerance=x.clickTolerance,this._requestManager=new p.RequestManager(x.transformRequest,x.accessToken),typeof x.container=="string"){if(this._container=p.window.document.getElementById(x.container),!this._container)throw new Error("Container '"+x.container+"' not found.")}else{if(!(x.container instanceof fp))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),p.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return O._update(!1)}),this.on("moveend",function(){return O._update(!1)}),this.on("zoom",function(){return O._update(!0)}),p.window!==void 0&&(p.window.addEventListener("online",this._onWindowOnline,!1),p.window.addEventListener("resize",this._onWindowResize,!1),p.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Xt(this,x),this._hash=x.hash&&new ws(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,p.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new va({customAttribution:x.customAttribution})),this.addControl(new tu,x.logoPosition),this.on("style.load",function(){O.transform.unmodified&&O.jumpTo(O.style.stylesheet)}),this.on("data",function(z){O._update(z.dataType==="style"),O.fire(new p.Event(z.dataType+"data",z))}),this.on("dataloading",function(z){O.fire(new p.Event(z.dataType+"dataloading",z))})}d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v;var g={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return v.prototype._getMapId=function(){return this._mapId},v.prototype.addControl=function(x,O){if(O===void 0&&(O=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var F=x.onAdd(this);this._controls.push(x);var z=this._controlPositions[O];return O.indexOf("bottom")!==-1?z.insertBefore(F,z.firstChild):z.appendChild(F),this},v.prototype.removeControl=function(x){if(!x||!x.onRemove)return this.fire(new p.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var O=this._controls.indexOf(x);return O>-1&&this._controls.splice(O,1),x.onRemove(this),this},v.prototype.hasControl=function(x){return this._controls.indexOf(x)>-1},v.prototype.resize=function(x){var O=this._containerDimensions(),F=O[0],z=O[1];if(F===this.transform.width&&z===this.transform.height)return this;this._resizeCanvas(F,z),this.transform.resize(F,z),this.painter.resize(F,z);var Y=!this._moving;return Y&&this.fire(new p.Event("movestart",x)).fire(new p.Event("move",x)),this.fire(new p.Event("resize",x)),Y&&this.fire(new p.Event("moveend",x)),this},v.prototype.getBounds=function(){return this.transform.getBounds()},v.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},v.prototype.setMaxBounds=function(x){return this.transform.setMaxBounds(p.LngLatBounds.convert(x)),this._update()},v.prototype.setMinZoom=function(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},v.prototype.getMinZoom=function(){return this.transform.minZoom},v.prototype.setMaxZoom=function(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")},v.prototype.getMaxZoom=function(){return this.transform.maxZoom},v.prototype.setMinPitch=function(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},v.prototype.getMinPitch=function(){return this.transform.minPitch},v.prototype.setMaxPitch=function(x){if((x=x??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")},v.prototype.getMaxPitch=function(){return this.transform.maxPitch},v.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},v.prototype.setRenderWorldCopies=function(x){return this.transform.renderWorldCopies=x,this._update()},v.prototype.project=function(x){return this.transform.locationPoint(p.LngLat.convert(x))},v.prototype.unproject=function(x){return this.transform.pointLocation(p.Point.convert(x))},v.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},v.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},v.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},v.prototype._createDelegatedListener=function(x,O,F){var z,Y=this;if(x==="mouseenter"||x==="mouseover"){var ae=!1;return{layer:O,listener:F,delegates:{mousemove:function(De){var Me=Y.getLayer(O)?Y.queryRenderedFeatures(De.point,{layers:[O]}):[];Me.length?ae||(ae=!0,F.call(Y,new po(x,Y,De.originalEvent,{features:Me}))):ae=!1},mouseout:function(){ae=!1}}}}if(x==="mouseleave"||x==="mouseout"){var be=!1;return{layer:O,listener:F,delegates:{mousemove:function(De){(Y.getLayer(O)?Y.queryRenderedFeatures(De.point,{layers:[O]}):[]).length?be=!0:be&&(be=!1,F.call(Y,new po(x,Y,De.originalEvent)))},mouseout:function(De){be&&(be=!1,F.call(Y,new po(x,Y,De.originalEvent)))}}}}return{layer:O,listener:F,delegates:(z={},z[x]=function(De){var Me=Y.getLayer(O)?Y.queryRenderedFeatures(De.point,{layers:[O]}):[];Me.length&&(De.features=Me,F.call(Y,De),delete De.features)},z)}},v.prototype.on=function(x,O,F){if(F===void 0)return d.prototype.on.call(this,x,O);var z=this._createDelegatedListener(x,O,F);for(var Y in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(z),z.delegates)this.on(Y,z.delegates[Y]);return this},v.prototype.once=function(x,O,F){if(F===void 0)return d.prototype.once.call(this,x,O);var z=this._createDelegatedListener(x,O,F);for(var Y in z.delegates)this.once(Y,z.delegates[Y]);return this},v.prototype.off=function(x,O,F){var z=this;return F===void 0?d.prototype.off.call(this,x,O):(this._delegatedListeners&&this._delegatedListeners[x]&&function(Y){for(var ae=Y[x],be=0;be<ae.length;be++){var De=ae[be];if(De.layer===O&&De.listener===F){for(var Me in De.delegates)z.off(Me,De.delegates[Me]);return ae.splice(be,1),z}}}(this._delegatedListeners),this)},v.prototype.queryRenderedFeatures=function(x,O){if(!this.style)return[];var F;if(O!==void 0||x===void 0||x instanceof p.Point||Array.isArray(x)||(O=x,x=void 0),O=O||{},(x=x||[[0,0],[this.transform.width,this.transform.height]])instanceof p.Point||typeof x[0]=="number")F=[p.Point.convert(x)];else{var z=p.Point.convert(x[0]),Y=p.Point.convert(x[1]);F=[z,new p.Point(Y.x,z.y),Y,new p.Point(z.x,Y.y),z]}return this.style.queryRenderedFeatures(F,O,this.transform)},v.prototype.querySourceFeatures=function(x,O){return this.style.querySourceFeatures(x,O)},v.prototype.setStyle=function(x,O){return(O=p.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},O)).diff!==!1&&O.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,O),this):(this._localIdeographFontFamily=O.localIdeographFontFamily,this._updateStyle(x,O))},v.prototype._getUIString=function(x){var O=this._locale[x];if(O==null)throw new Error("Missing UI string '"+x+"'");return O},v.prototype._updateStyle=function(x,O){return this.style&&(this.style.setEventedParent(null),this.style._remove()),x?(this.style=new Fo(this,O||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x):this.style.loadJSON(x),this):(delete this.style,this)},v.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Fo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},v.prototype._diffStyle=function(x,O){var F=this;if(typeof x=="string"){var z=this._requestManager.normalizeStyleURL(x),Y=this._requestManager.transformRequest(z,p.ResourceType.Style);p.getJSON(Y,function(ae,be){ae?F.fire(new p.ErrorEvent(ae)):be&&F._updateDiff(be,O)})}else typeof x=="object"&&this._updateDiff(x,O)},v.prototype._updateDiff=function(x,O){try{this.style.setState(x)&&this._update(!0)}catch(F){p.warnOnce("Unable to perform style diff: "+(F.message||F.error||F)+".  Rebuilding the style from scratch."),this._updateStyle(x,O)}},v.prototype.getStyle=function(){if(this.style)return this.style.serialize()},v.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():p.warnOnce("There is no style added to the map.")},v.prototype.addSource=function(x,O){return this._lazyInitEmptyStyle(),this.style.addSource(x,O),this._update(!0)},v.prototype.isSourceLoaded=function(x){var O=this.style&&this.style.sourceCaches[x];if(O!==void 0)return O.loaded();this.fire(new p.ErrorEvent(new Error("There is no source with ID '"+x+"'")))},v.prototype.areTilesLoaded=function(){var x=this.style&&this.style.sourceCaches;for(var O in x){var F=x[O]._tiles;for(var z in F){var Y=F[z];if(Y.state!=="loaded"&&Y.state!=="errored")return!1}}return!0},v.prototype.addSourceType=function(x,O,F){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,O,F)},v.prototype.removeSource=function(x){return this.style.removeSource(x),this._update(!0)},v.prototype.getSource=function(x){return this.style.getSource(x)},v.prototype.addImage=function(x,O,F){F===void 0&&(F={});var z=F.pixelRatio;z===void 0&&(z=1);var Y=F.sdf;Y===void 0&&(Y=!1);var ae=F.stretchX,be=F.stretchY,De=F.content;if(this._lazyInitEmptyStyle(),O instanceof mm||ui&&O instanceof ui){var Me=p.browser.getImageData(O);this.style.addImage(x,{data:new p.RGBAImage({width:Me.width,height:Me.height},Me.data),pixelRatio:z,stretchX:ae,stretchY:be,content:De,sdf:Y,version:0})}else{if(O.width===void 0||O.height===void 0)return this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Ne=O;this.style.addImage(x,{data:new p.RGBAImage({width:O.width,height:O.height},new Uint8Array(O.data)),pixelRatio:z,stretchX:ae,stretchY:be,content:De,sdf:Y,version:0,userImage:Ne}),Ne.onAdd&&Ne.onAdd(this,x)}},v.prototype.updateImage=function(x,O){var F=this.style.getImage(x);if(!F)return this.fire(new p.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var z=O instanceof mm||ui&&O instanceof ui?p.browser.getImageData(O):O,Y=z.width,ae=z.height,be=z.data;return Y===void 0||ae===void 0?this.fire(new p.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Y!==F.data.width||ae!==F.data.height?this.fire(new p.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(F.data.replace(be,!(O instanceof mm||ui&&O instanceof ui)),void this.style.updateImage(x,F))},v.prototype.hasImage=function(x){return x?!!this.style.getImage(x):(this.fire(new p.ErrorEvent(new Error("Missing required image id"))),!1)},v.prototype.removeImage=function(x){this.style.removeImage(x)},v.prototype.loadImage=function(x,O){p.getImage(this._requestManager.transformRequest(x,p.ResourceType.Image),O)},v.prototype.listImages=function(){return this.style.listImages()},v.prototype.addLayer=function(x,O){return this._lazyInitEmptyStyle(),this.style.addLayer(x,O),this._update(!0)},v.prototype.moveLayer=function(x,O){return this.style.moveLayer(x,O),this._update(!0)},v.prototype.removeLayer=function(x){return this.style.removeLayer(x),this._update(!0)},v.prototype.getLayer=function(x){return this.style.getLayer(x)},v.prototype.setLayerZoomRange=function(x,O,F){return this.style.setLayerZoomRange(x,O,F),this._update(!0)},v.prototype.setFilter=function(x,O,F){return F===void 0&&(F={}),this.style.setFilter(x,O,F),this._update(!0)},v.prototype.getFilter=function(x){return this.style.getFilter(x)},v.prototype.setPaintProperty=function(x,O,F,z){return z===void 0&&(z={}),this.style.setPaintProperty(x,O,F,z),this._update(!0)},v.prototype.getPaintProperty=function(x,O){return this.style.getPaintProperty(x,O)},v.prototype.setLayoutProperty=function(x,O,F,z){return z===void 0&&(z={}),this.style.setLayoutProperty(x,O,F,z),this._update(!0)},v.prototype.getLayoutProperty=function(x,O){return this.style.getLayoutProperty(x,O)},v.prototype.setLight=function(x,O){return O===void 0&&(O={}),this._lazyInitEmptyStyle(),this.style.setLight(x,O),this._update(!0)},v.prototype.getLight=function(){return this.style.getLight()},v.prototype.setFeatureState=function(x,O){return this.style.setFeatureState(x,O),this._update()},v.prototype.removeFeatureState=function(x,O){return this.style.removeFeatureState(x,O),this._update()},v.prototype.getFeatureState=function(x){return this.style.getFeatureState(x)},v.prototype.getContainer=function(){return this._container},v.prototype.getCanvasContainer=function(){return this._canvasContainer},v.prototype.getCanvas=function(){return this._canvas},v.prototype._containerDimensions=function(){var x=0,O=0;return this._container&&(x=this._container.clientWidth||400,O=this._container.clientHeight||300),[x,O]},v.prototype._detectMissingCSS=function(){p.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&p.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},v.prototype._setupContainer=function(){var x=this._container;x.classList.add("mapboxgl-map"),(this._missingCSSCanary=j.create("div","mapboxgl-canary",x)).style.visibility="hidden",this._detectMissingCSS();var O=this._canvasContainer=j.create("div","mapboxgl-canvas-container",x);this._interactive&&O.classList.add("mapboxgl-interactive"),this._canvas=j.create("canvas","mapboxgl-canvas",O),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var F=this._containerDimensions();this._resizeCanvas(F[0],F[1]);var z=this._controlContainer=j.create("div","mapboxgl-control-container",x),Y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(ae){Y[ae]=j.create("div","mapboxgl-ctrl-"+ae,z)}),this._container.addEventListener("scroll",this._onMapScroll,!1)},v.prototype._resizeCanvas=function(x,O){var F=p.browser.devicePixelRatio||1;this._canvas.width=F*x,this._canvas.height=F*O,this._canvas.style.width=x+"px",this._canvas.style.height=O+"px"},v.prototype._setupPainter=function(){var x=p.extend({},K.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),O=this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);O?(this.painter=new li(O,this.transform),p.webpSupported.testSupport(O)):this.fire(new p.ErrorEvent(new Error("Failed to initialize WebGL")))},v.prototype._contextLost=function(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new p.Event("webglcontextlost",{originalEvent:x}))},v.prototype._contextRestored=function(x){this._setupPainter(),this.resize(),this._update(),this.fire(new p.Event("webglcontextrestored",{originalEvent:x}))},v.prototype._onMapScroll=function(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},v.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},v.prototype._update=function(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this},v.prototype._requestRenderFrame=function(x){return this._update(),this._renderTaskQueue.add(x)},v.prototype._cancelRenderFrame=function(x){this._renderTaskQueue.remove(x)},v.prototype._render=function(x){var O,F=this,z=0,Y=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(O=Y.createQueryEXT(),Y.beginQueryEXT(Y.TIME_ELAPSED_EXT,O),z=p.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),!this._removed){var ae=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var be=this.transform.zoom,De=p.browser.now();this.style.zoomHistory.update(be,De);var Me=new p.EvaluationParameters(be,{now:De,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Ne=Me.crossFadingFactor();Ne===1&&Ne===this._crossFadingFactor||(ae=!0,this._crossFadingFactor=Ne),this.style.update(Me)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new p.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new p.Event("load"))),this.style&&(this.style.hasTransitions()||ae)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ye=p.browser.now()-z;Y.endQueryEXT(Y.TIME_ELAPSED_EXT,O),setTimeout(function(){var Ve=Y.getQueryObjectEXT(O,Y.QUERY_RESULT_EXT)/1e6;Y.deleteQueryEXT(O),F.fire(new p.Event("gpu-timing-frame",{cpuTime:Ye,gpuTime:Ve}))},50)}if(this.listens("gpu-timing-layer")){var Ze=this.painter.collectGpuTimers();setTimeout(function(){var Ve=F.painter.queryGpuTimers(Ze);F.fire(new p.Event("gpu-timing-layer",{layerTimes:Ve}))},50)}var et=this._sourcesDirty||this._styleDirty||this._placementDirty;return et||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new p.Event("idle")),!this._loaded||this._fullyLoaded||et||(this._fullyLoaded=!0),this}},v.prototype.remove=function(){this._hash&&this._hash.remove();for(var x=0,O=this._controls;x<O.length;x+=1)O[x].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),p.window!==void 0&&(p.window.removeEventListener("resize",this._onWindowResize,!1),p.window.removeEventListener("orientationchange",this._onWindowResize,!1),p.window.removeEventListener("online",this._onWindowOnline,!1));var F=this.painter.context.gl.getExtension("WEBGL_lose_context");F&&F.loseContext(),xf(this._canvasContainer),xf(this._controlContainer),xf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new p.Event("remove"))},v.prototype.triggerRepaint=function(){var x=this;this.style&&!this._frame&&(this._frame=p.browser.frame(function(O){x._frame=null,x._render(O)}))},v.prototype._onWindowOnline=function(){this._update()},v.prototype._onWindowResize=function(x){this._trackResize&&this.resize({originalEvent:x})._update()},g.showTileBoundaries.get=function(){return!!this._showTileBoundaries},g.showTileBoundaries.set=function(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())},g.showPadding.get=function(){return!!this._showPadding},g.showPadding.set=function(x){this._showPadding!==x&&(this._showPadding=x,this._update())},g.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},g.showCollisionBoxes.set=function(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())},g.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},g.showOverdrawInspector.set=function(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())},g.repaint.get=function(){return!!this._repaint},g.repaint.set=function(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())},g.vertices.get=function(){return!!this._vertices},g.vertices.set=function(x){this._vertices=x,this._update()},v.prototype._setCacheLimits=function(x,O){p.setCacheLimits(x,O)},g.version.get=function(){return p.version},Object.defineProperties(v.prototype,g),v}(Zo);function xf(d){d.parentNode&&d.parentNode.removeChild(d)}var ld={showCompass:!0,showZoom:!0,visualizePitch:!1},ru=function(d){var v=this;this.options=p.extend({},ld,d),this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(g){return g.preventDefault()}),this.options.showZoom&&(p.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(g){return v._map.zoomIn({},{originalEvent:g})}),j.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(g){return v._map.zoomOut({},{originalEvent:g})}),j.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(p.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(g){v.options.visualizePitch?v._map.resetNorthPitch({},{originalEvent:g}):v._map.resetNorth({},{originalEvent:g})}),this._compassIcon=j.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ru.prototype._updateZoomButtons=function(){var d=this._map.getZoom(),v=d===this._map.getMaxZoom(),g=d===this._map.getMinZoom();this._zoomInButton.disabled=v,this._zoomOutButton.disabled=g,this._zoomInButton.setAttribute("aria-disabled",v.toString()),this._zoomOutButton.setAttribute("aria-disabled",g.toString())},ru.prototype._rotateCompassArrow=function(){var d=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=d},ru.prototype.onAdd=function(d){return this._map=d,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ns(this._map,this._compass,this.options.visualizePitch)),this._container},ru.prototype.onRemove=function(){j.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ru.prototype._createButton=function(d,v){var g=j.create("button",d,this._container);return g.type="button",g.addEventListener("click",v),g},ru.prototype._setButtonTitle=function(d,v){var g=this._map._getUIString("NavigationControl."+v);d.title=g,d.setAttribute("aria-label",g)};var Ns=function(d,v,g){g===void 0&&(g=!1),this._clickTolerance=10,this.element=v,this.mouseRotate=new cp({clickTolerance:d.dragRotate._mouseRotate._clickTolerance}),this.map=d,g&&(this.mousePitch=new sh({clickTolerance:d.dragRotate._mousePitch._clickTolerance})),p.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),j.addEventListener(v,"mousedown",this.mousedown),j.addEventListener(v,"touchstart",this.touchstart,{passive:!1}),j.addEventListener(v,"touchmove",this.touchmove),j.addEventListener(v,"touchend",this.touchend),j.addEventListener(v,"touchcancel",this.reset)};function wf(d,v,g){if(d=new p.LngLat(d.lng,d.lat),v){var x=new p.LngLat(d.lng-360,d.lat),O=new p.LngLat(d.lng+360,d.lat),F=g.locationPoint(d).distSqr(v);g.locationPoint(x).distSqr(v)<F?d=x:g.locationPoint(O).distSqr(v)<F&&(d=O)}for(;Math.abs(d.lng-g.center.lng)>180;){var z=g.locationPoint(d);if(z.x>=0&&z.y>=0&&z.x<=g.width&&z.y<=g.height)break;d.lng>g.center.lng?d.lng-=360:d.lng+=360}return d}Ns.prototype.down=function(d,v){this.mouseRotate.mousedown(d,v),this.mousePitch&&this.mousePitch.mousedown(d,v),j.disableDrag()},Ns.prototype.move=function(d,v){var g=this.map,x=this.mouseRotate.mousemoveWindow(d,v);if(x&&x.bearingDelta&&g.setBearing(g.getBearing()+x.bearingDelta),this.mousePitch){var O=this.mousePitch.mousemoveWindow(d,v);O&&O.pitchDelta&&g.setPitch(g.getPitch()+O.pitchDelta)}},Ns.prototype.off=function(){var d=this.element;j.removeEventListener(d,"mousedown",this.mousedown),j.removeEventListener(d,"touchstart",this.touchstart,{passive:!1}),j.removeEventListener(d,"touchmove",this.touchmove),j.removeEventListener(d,"touchend",this.touchend),j.removeEventListener(d,"touchcancel",this.reset),this.offTemp()},Ns.prototype.offTemp=function(){j.enableDrag(),j.removeEventListener(p.window,"mousemove",this.mousemove),j.removeEventListener(p.window,"mouseup",this.mouseup)},Ns.prototype.mousedown=function(d){this.down(p.extend({},d,{ctrlKey:!0,preventDefault:function(){return d.preventDefault()}}),j.mousePos(this.element,d)),j.addEventListener(p.window,"mousemove",this.mousemove),j.addEventListener(p.window,"mouseup",this.mouseup)},Ns.prototype.mousemove=function(d){this.move(d,j.mousePos(this.element,d))},Ns.prototype.mouseup=function(d){this.mouseRotate.mouseupWindow(d),this.mousePitch&&this.mousePitch.mouseupWindow(d),this.offTemp()},Ns.prototype.touchstart=function(d){d.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=j.touchPos(this.element,d.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return d.preventDefault()}},this._startPos))},Ns.prototype.touchmove=function(d){d.targetTouches.length!==1?this.reset():(this._lastPos=j.touchPos(this.element,d.targetTouches)[0],this.move({preventDefault:function(){return d.preventDefault()}},this._lastPos))},Ns.prototype.touchend=function(d){d.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Ns.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ba={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ud(d,v,g){var x=d.classList;for(var O in ba)x.remove("mapboxgl-"+g+"-anchor-"+O);x.add("mapboxgl-"+g+"-anchor-"+v)}var Tu,cd=function(d){function v(g,x){if(d.call(this),(g instanceof p.window.HTMLElement||x)&&(g=p.extend({element:g},x)),p.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=g&&g.anchor||"center",this._color=g&&g.color||"#3FB1CE",this._scale=g&&g.scale||1,this._draggable=g&&g.draggable||!1,this._clickTolerance=g&&g.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=g&&g.rotation||0,this._rotationAlignment=g&&g.rotationAlignment||"auto",this._pitchAlignment=g&&g.pitchAlignment&&g.pitchAlignment!=="auto"?g.pitchAlignment:this._rotationAlignment,g&&g.element)this._element=g.element,this._offset=p.Point.convert(g&&g.offset||[0,0]);else{this._defaultMarker=!0,this._element=j.create("div"),this._element.setAttribute("aria-label","Map marker");var O=j.createNS("http://www.w3.org/2000/svg","svg");O.setAttributeNS(null,"display","block"),O.setAttributeNS(null,"height","41px"),O.setAttributeNS(null,"width","27px"),O.setAttributeNS(null,"viewBox","0 0 27 41");var F=j.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"stroke","none"),F.setAttributeNS(null,"stroke-width","1"),F.setAttributeNS(null,"fill","none"),F.setAttributeNS(null,"fill-rule","evenodd");var z=j.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");var Y=j.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Y.setAttributeNS(null,"fill","#000000");for(var ae=0,be=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];ae<be.length;ae+=1){var De=be[ae],Me=j.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",De.rx),Me.setAttributeNS(null,"ry",De.ry),Y.appendChild(Me)}var Ne=j.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"fill",this._color);var Ye=j.createNS("http://www.w3.org/2000/svg","path");Ye.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ne.appendChild(Ye);var Ze=j.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"opacity","0.25"),Ze.setAttributeNS(null,"fill","#000000");var et=j.createNS("http://www.w3.org/2000/svg","path");et.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ze.appendChild(et);var Ve=j.createNS("http://www.w3.org/2000/svg","g");Ve.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ve.setAttributeNS(null,"fill","#FFFFFF");var tt=j.createNS("http://www.w3.org/2000/svg","g");tt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var ft=j.createNS("http://www.w3.org/2000/svg","circle");ft.setAttributeNS(null,"fill","#000000"),ft.setAttributeNS(null,"opacity","0.25"),ft.setAttributeNS(null,"cx","5.5"),ft.setAttributeNS(null,"cy","5.5"),ft.setAttributeNS(null,"r","5.4999962");var xt=j.createNS("http://www.w3.org/2000/svg","circle");xt.setAttributeNS(null,"fill","#FFFFFF"),xt.setAttributeNS(null,"cx","5.5"),xt.setAttributeNS(null,"cy","5.5"),xt.setAttributeNS(null,"r","5.4999962"),tt.appendChild(ft),tt.appendChild(xt),z.appendChild(Y),z.appendChild(Ne),z.appendChild(Ze),z.appendChild(Ve),z.appendChild(tt),O.appendChild(z),O.setAttributeNS(null,"height",41*this._scale+"px"),O.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(O),this._offset=p.Point.convert(g&&g.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Bt){Bt.preventDefault()}),this._element.addEventListener("mousedown",function(Bt){Bt.preventDefault()}),ud(this._element,this._anchor,"marker"),this._popup=null}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.addTo=function(g){return this.remove(),this._map=g,g.getCanvasContainer().appendChild(this._element),g.on("move",this._update),g.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},v.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),j.remove(this._element),this._popup&&this._popup.remove(),this},v.prototype.getLngLat=function(){return this._lngLat},v.prototype.setLngLat=function(g){return this._lngLat=p.LngLat.convert(g),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},v.prototype.getElement=function(){return this._element},v.prototype.setPopup=function(g){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),g){if(!("offset"in g.options)){var x=Math.sqrt(Math.pow(13.5,2)/2);g.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(24.6+x)],"bottom-right":[-x,-1*(24.6+x)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=g,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},v.prototype._onKeyPress=function(g){var x=g.code,O=g.charCode||g.keyCode;x!=="Space"&&x!=="Enter"&&O!==32&&O!==13||this.togglePopup()},v.prototype._onMapClick=function(g){var x=g.originalEvent.target,O=this._element;this._popup&&(x===O||O.contains(x))&&this.togglePopup()},v.prototype.getPopup=function(){return this._popup},v.prototype.togglePopup=function(){var g=this._popup;return g?(g.isOpen()?g.remove():g.addTo(this._map),this):this},v.prototype._update=function(g){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=wf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var x="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?x="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(x="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var O="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?O="rotateX(0deg)":this._pitchAlignment==="map"&&(O="rotateX("+this._map.getPitch()+"deg)"),g&&g.type!=="moveend"||(this._pos=this._pos.round()),j.setTransform(this._element,ba[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+O+" "+x)}},v.prototype.getOffset=function(){return this._offset},v.prototype.setOffset=function(g){return this._offset=p.Point.convert(g),this._update(),this},v.prototype._onMove=function(g){if(!this._isDragging){var x=this._clickTolerance||this._map._clickTolerance;this._isDragging=g.point.dist(this._pointerdownPos)>=x}this._isDragging&&(this._pos=g.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new p.Event("dragstart"))),this.fire(new p.Event("drag")))},v.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new p.Event("dragend")),this._state="inactive"},v.prototype._addDragHandler=function(g){this._element.contains(g.originalEvent.target)&&(g.preventDefault(),this._positionDelta=g.point.sub(this._pos).add(this._offset),this._pointerdownPos=g.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},v.prototype.setDraggable=function(g){return this._draggable=!!g,this._map&&(g?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},v.prototype.isDraggable=function(){return this._draggable},v.prototype.setRotation=function(g){return this._rotation=g||0,this._update(),this},v.prototype.getRotation=function(){return this._rotation},v.prototype.setRotationAlignment=function(g){return this._rotationAlignment=g||"auto",this._update(),this},v.prototype.getRotationAlignment=function(){return this._rotationAlignment},v.prototype.setPitchAlignment=function(g){return this._pitchAlignment=g&&g!=="auto"?g:this._rotationAlignment,this._update(),this},v.prototype.getPitchAlignment=function(){return this._pitchAlignment},v}(p.Evented),lh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Xs=0,Js=!1,gm=function(d){function v(g){d.call(this),this.options=p.extend({},lh,g),p.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.onAdd=function(g){var x;return this._map=g,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),x=this._setupUI,Tu!==void 0?x(Tu):p.window.navigator.permissions!==void 0?p.window.navigator.permissions.query({name:"geolocation"}).then(function(O){x(Tu=O.state!=="denied")}):x(Tu=!!p.window.navigator.geolocation),this._container},v.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(p.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),j.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xs=0,Js=!1},v.prototype._isOutOfMapMaxBounds=function(g){var x=this._map.getMaxBounds(),O=g.coords;return x&&(O.longitude<x.getWest()||O.longitude>x.getEast()||O.latitude<x.getSouth()||O.latitude>x.getNorth())},v.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},v.prototype._onSuccess=function(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new p.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("geolocate",g)),this._finish()}},v.prototype._updateCamera=function(g){var x=new p.LngLat(g.coords.longitude,g.coords.latitude),O=g.coords.accuracy,F=this._map.getBearing(),z=p.extend({bearing:F},this.options.fitBoundsOptions);this._map.fitBounds(x.toBounds(O),z,{geolocateSource:!0})},v.prototype._updateMarker=function(g){if(g){var x=new p.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(x).addTo(this._map),this._userLocationDotMarker.setLngLat(x).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},v.prototype._updateCircleRadius=function(){var g=this._map._container.clientHeight/2,x=this._map.unproject([0,g]),O=this._map.unproject([1,g]),F=x.distanceTo(O),z=Math.ceil(2*this._accuracy/F);this._circleElement.style.width=z+"px",this._circleElement.style.height=z+"px"},v.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},v.prototype._onError=function(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var x=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=x,this._geolocateButton.setAttribute("aria-label",x),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&Js)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new p.Event("error",g)),this._finish()}},v.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},v.prototype._setupUI=function(g){var x=this;if(this._container.addEventListener("contextmenu",function(z){return z.preventDefault()}),this._geolocateButton=j.create("button","mapboxgl-ctrl-geolocate",this._container),j.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",g===!1){p.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var O=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=O,this._geolocateButton.setAttribute("aria-label",O)}else{var F=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=F,this._geolocateButton.setAttribute("aria-label",F)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=j.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new cd(this._dotElement),this._circleElement=j.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new cd({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(z){z.geolocateSource||x._watchState!=="ACTIVE_LOCK"||z.originalEvent&&z.originalEvent.type==="resize"||(x._watchState="BACKGROUND",x._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),x._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),x.fire(new p.Event("trackuserlocationend")))})},v.prototype.trigger=function(){if(!this._setup)return p.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new p.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xs--,Js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new p.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new p.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var g;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Xs>1?(g={maximumAge:6e5,timeout:0},Js=!0):(g=this.options.positionOptions,Js=!1),this._geolocationWatchID=p.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else p.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},v.prototype._clearWatch=function(){p.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},v}(p.Evented),Ku={maxWidth:100,unit:"metric"},ji=function(d){this.options=p.extend({},Ku,d),p.bindAll(["_onMove","setUnit"],this)};function mi(d,v,g){var x=g&&g.maxWidth||100,O=d._container.clientHeight/2,F=d.unproject([0,O]),z=d.unproject([x,O]),Y=F.distanceTo(z);if(g&&g.unit==="imperial"){var ae=3.2808*Y;ae>5280?Ka(v,x,ae/5280,d._getUIString("ScaleControl.Miles")):Ka(v,x,ae,d._getUIString("ScaleControl.Feet"))}else g&&g.unit==="nautical"?Ka(v,x,Y/1852,d._getUIString("ScaleControl.NauticalMiles")):Y>=1e3?Ka(v,x,Y/1e3,d._getUIString("ScaleControl.Kilometers")):Ka(v,x,Y,d._getUIString("ScaleControl.Meters"))}function Ka(d,v,g,x){var O,F,z,Y=(O=g,(F=Math.pow(10,(""+Math.floor(O)).length-1))*(z=(z=O/F)>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(ae){var be=Math.pow(10,Math.ceil(-Math.log(ae)/Math.LN10));return Math.round(ae*be)/be}(z)));d.style.width=v*(Y/g)+"px",d.innerHTML=Y+"&nbsp;"+x}ji.prototype.getDefaultPosition=function(){return"bottom-left"},ji.prototype._onMove=function(){mi(this._map,this._container,this.options)},ji.prototype.onAdd=function(d){return this._map=d,this._container=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",d.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ji.prototype.onRemove=function(){j.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ji.prototype.setUnit=function(d){this.options.unit=d,mi(this._map,this._container,this.options)};var La=function(d){this._fullscreen=!1,d&&d.container&&(d.container instanceof p.window.HTMLElement?this._container=d.container:p.warnOnce("Full screen control 'container' must be a DOM element.")),p.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in p.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in p.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in p.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in p.window.document&&(this._fullscreenchange="MSFullscreenChange")};La.prototype.onAdd=function(d){return this._map=d,this._container||(this._container=this._map.getContainer()),this._controlContainer=j.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",p.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},La.prototype.onRemove=function(){j.remove(this._controlContainer),this._map=null,p.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},La.prototype._checkFullscreenSupport=function(){return!!(p.window.document.fullscreenEnabled||p.window.document.mozFullScreenEnabled||p.window.document.msFullscreenEnabled||p.window.document.webkitFullscreenEnabled)},La.prototype._setupUI=function(){var d=this._fullscreenButton=j.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);j.create("span","mapboxgl-ctrl-icon",d).setAttribute("aria-hidden",!0),d.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),p.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},La.prototype._updateTitle=function(){var d=this._getTitle();this._fullscreenButton.setAttribute("aria-label",d),this._fullscreenButton.title=d},La.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},La.prototype._isFullscreen=function(){return this._fullscreen},La.prototype._changeIcon=function(){(p.window.document.fullscreenElement||p.window.document.mozFullScreenElement||p.window.document.webkitFullscreenElement||p.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},La.prototype._onClickFullscreen=function(){this._isFullscreen()?p.window.document.exitFullscreen?p.window.document.exitFullscreen():p.window.document.mozCancelFullScreen?p.window.document.mozCancelFullScreen():p.window.document.msExitFullscreen?p.window.document.msExitFullscreen():p.window.document.webkitCancelFullScreen&&p.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Au={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},uh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),ch=function(d){function v(g){d.call(this),this.options=p.extend(Object.create(Au),g),p.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return d&&(v.__proto__=d),(v.prototype=Object.create(d&&d.prototype)).constructor=v,v.prototype.addTo=function(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new p.Event("open")),this},v.prototype.isOpen=function(){return!!this._map},v.prototype.remove=function(){return this._content&&j.remove(this._content),this._container&&(j.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new p.Event("close")),this},v.prototype.getLngLat=function(){return this._lngLat},v.prototype.setLngLat=function(g){return this._lngLat=p.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},v.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},v.prototype.getElement=function(){return this._container},v.prototype.setText=function(g){return this.setDOMContent(p.window.document.createTextNode(g))},v.prototype.setHTML=function(g){var x,O=p.window.document.createDocumentFragment(),F=p.window.document.createElement("body");for(F.innerHTML=g;x=F.firstChild;)O.appendChild(x);return this.setDOMContent(O)},v.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},v.prototype.setMaxWidth=function(g){return this.options.maxWidth=g,this._update(),this},v.prototype.setDOMContent=function(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=j.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this},v.prototype.addClassName=function(g){this._container&&this._container.classList.add(g)},v.prototype.removeClassName=function(g){this._container&&this._container.classList.remove(g)},v.prototype.setOffset=function(g){return this.options.offset=g,this._update(),this},v.prototype.toggleClassName=function(g){if(this._container)return this._container.classList.toggle(g)},v.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=j.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},v.prototype._onMouseUp=function(g){this._update(g.point)},v.prototype._onMouseMove=function(g){this._update(g.point)},v.prototype._onDrag=function(g){this._update(g.point)},v.prototype._update=function(g){var x=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=j.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=j.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Me){return x._container.classList.add(Me)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=wf(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||g)){var O=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat),F=this.options.anchor,z=function Me(Ne){if(Ne){if(typeof Ne=="number"){var Ye=Math.round(Math.sqrt(.5*Math.pow(Ne,2)));return{center:new p.Point(0,0),top:new p.Point(0,Ne),"top-left":new p.Point(Ye,Ye),"top-right":new p.Point(-Ye,Ye),bottom:new p.Point(0,-Ne),"bottom-left":new p.Point(Ye,-Ye),"bottom-right":new p.Point(-Ye,-Ye),left:new p.Point(Ne,0),right:new p.Point(-Ne,0)}}if(Ne instanceof p.Point||Array.isArray(Ne)){var Ze=p.Point.convert(Ne);return{center:Ze,top:Ze,"top-left":Ze,"top-right":Ze,bottom:Ze,"bottom-left":Ze,"bottom-right":Ze,left:Ze,right:Ze}}return{center:p.Point.convert(Ne.center||[0,0]),top:p.Point.convert(Ne.top||[0,0]),"top-left":p.Point.convert(Ne["top-left"]||[0,0]),"top-right":p.Point.convert(Ne["top-right"]||[0,0]),bottom:p.Point.convert(Ne.bottom||[0,0]),"bottom-left":p.Point.convert(Ne["bottom-left"]||[0,0]),"bottom-right":p.Point.convert(Ne["bottom-right"]||[0,0]),left:p.Point.convert(Ne.left||[0,0]),right:p.Point.convert(Ne.right||[0,0])}}return Me(new p.Point(0,0))}(this.options.offset);if(!F){var Y,ae=this._container.offsetWidth,be=this._container.offsetHeight;Y=O.y+z.bottom.y<be?["top"]:O.y>this._map.transform.height-be?["bottom"]:[],O.x<ae/2?Y.push("left"):O.x>this._map.transform.width-ae/2&&Y.push("right"),F=Y.length===0?"bottom":Y.join("-")}var De=O.add(z[F]).round();j.setTransform(this._container,ba[F]+" translate("+De.x+"px,"+De.y+"px)"),ud(this._container,F,"popup")}},v.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var g=this._container.querySelector(uh);g&&g.focus()}},v.prototype._onClose=function(){this.remove()},v}(p.Evented),fh={version:p.version,supported:K,setRTLTextPlugin:p.setRTLTextPlugin,getRTLTextPluginStatus:p.getRTLTextPluginStatus,Map:Fl,NavigationControl:ru,GeolocateControl:gm,AttributionControl:va,ScaleControl:ji,FullscreenControl:La,Popup:ch,Marker:cd,Style:Fo,LngLat:p.LngLat,LngLatBounds:p.LngLatBounds,Point:p.Point,MercatorCoordinate:p.MercatorCoordinate,Evented:p.Evented,config:p.config,prewarm:function(){Mt().acquire(pt)},clearPrewarmedResources:function(){var d=_r;d&&(d.isPreloaded()&&d.numActive()===1?(d.release(pt),_r=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return p.config.ACCESS_TOKEN},set accessToken(d){p.config.ACCESS_TOKEN=d},get baseApiUrl(){return p.config.API_URL},set baseApiUrl(d){p.config.API_URL=d},get workerCount(){return _t.workerCount},set workerCount(d){_t.workerCount=d},get maxParallelImageRequests(){return p.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(d){p.config.MAX_PARALLEL_IMAGE_REQUESTS=d},clearStorage:function(d){p.clearTileCache(d)},workerUrl:""};return fh}),q})})(i);var o=n;function s(L){if(typeof L=="string"){var R=L;if(L=document.getElementById(L),!L)throw new Error("No element with id "+R)}return L}function u(L){if(!/^#([0-9a-f]{3}){1,2}$/i.test(L)&&!/^[a-z]+$/i.test(L))throw new Error("Invalid color")}function h(L,R){var W=41,G=27,q=2,V=new L.Marker()._element.querySelector("svg");V.removeAttribute("display"),V.setAttribute("xmlns","http://www.w3.org/2000/svg"),V.setAttribute("height",W),V.setAttribute("width",G),V.setAttribute("viewBox","0 0 "+G+" "+W),u(R),V.querySelector("*[fill='#3FB1CE']").setAttribute("fill",R);var p=V.querySelectorAll("circle"),K=p[p.length-1];if(p.length==1){var j=K.cloneNode();j.setAttribute("fill","#000000"),j.setAttribute("opacity",.25),K.parentNode.insertBefore(j,K)}K.setAttribute("r",4.5);var Q=new Image(G*q,W*q);return Q.src="data:image/svg+xml;utf8,"+encodeURIComponent(V.outerHTML),Q}var y={},w=function(R,W,G,q){var V=this;!P.library&&typeof window<"u"&&(P.library=window.mapboxgl||window.maplibregl||null);var p=P.library;if(!p)throw new Error("No mapping library found");var K,j={},Q={},ee=[],se=0;R=s(R),R.id&&(y[R.id]=this);function me(Be,Ge,vt){var Kt=new XMLHttpRequest;Kt.open("GET",Ge,!0),Kt.setRequestHeader("Content-Type","application/json"),Kt.onload=function(){Kt.status===200?vt(JSON.parse(Kt.responseText)):Ce(Be,Kt.statusText)},Kt.send()}function ve(Be){K.loaded()?Be():K.on("load",Be)}function U(Be){return typeof Be=="number"?Be:new Date(Be).getTime()/1e3}function $(Be,Ge,vt){for(var Kt=0;Kt<Ge.length;Kt++){var rt=Ge[Kt],Ct=U(rt.time);Ct&&(Q[Ct]||(Q[Ct]=[]),Q[Ct].push(rt),Rr.extend(ne(rt)))}for(var Tt in Q)Object.prototype.hasOwnProperty.call(Q,Tt)&&ee.push(parseInt(Tt));ee.sort(),Ht(Be,Q[ee[se]],vt),ve(function(){setTimeout(function(){he(Be,vt)},100)})}function he(Be,Ge){se++,we(Be,Q[ee[se]],Ge),se<ee.length-1&&setTimeout(function(){he(Be,Ge)},100)}function Ce(Be,Ge){Be.textContent=Ge}function Se(Be,Ge,vt,Kt){try{Kt(Be,Ge,vt)}catch(rt){throw Ce(Be,rt.message),rt}}function de(Be,Ge,vt,Kt){typeof Ge=="string"?me(Be,Ge,function(rt){Se(Be,rt,vt,Kt)}):typeof Ge=="function"?Ge(function(rt){Se(Be,rt,vt,Kt)},function(rt){Ce(Be,rt)}):Se(Be,Ge,vt,Kt)}function we(Be,Ge,vt){Jt(function(){vt.trail&&(dt(Ge,vt.trail),K.getSource("trails").setData(lt(Ge))),K.getSource("objects").setData(ye(Ge,vt))})}var Ue=new window.Map;function ye(Be,Ge){for(var vt={type:"FeatureCollection",features:[]},Kt=0;Kt<Be.length;Kt++){var rt=Be[Kt],Ct=Object.assign({},rt),Tt=void 0;if(q==="point"){if(Ct.icon||(Ct.icon=Ge.defaultIcon||"mapkick"),Ct.mapkickIconSize=Ct.icon==="mapkick"?.5:1,Ct.mapkickIconAnchor=Ct.icon==="mapkick"?"bottom":"center",Ct.mapkickIconOffset=Ct.icon==="mapkick"?[0,10]:[0,0],Ct.icon==="mapkick"){var ar=Ct.color||Br.color||"#f84d4d",er=Ue.get(ar);er===void 0&&(er=Ue.size,u(ar),Ue.set(ar,er)),Ct.icon="mapkick-"+er}var ir=ne(rt);if(!ir[1])throw new Error("missing latitude (index: "+Kt+")");if(!ir[0])throw new Error("missing longitude (index: "+Kt+")");Tt={type:"Point",coordinates:ir}}else{if(Tt=rt.geometry,!Tt)throw new Error("missing geometry (index: "+Kt+")");delete Ct.geometry,Ct.mapkickColor=Ct.color||Br.color||"#0090ff"}vt.features.push({type:"Feature",id:Kt,geometry:Tt,properties:Ct})}return vt}function ne(Be){return[Be.longitude||Be.lng||Be.lon,Be.latitude||Be.lat]}function st(Be){return Be.id}function dt(Be,Ge){for(var vt=0;vt<Be.length;vt++){var Kt=Be[vt],rt=st(Kt);j[rt]||(j[rt]=[]),j[rt].push(ne(Kt)),Ge&&Ge.len&&j[rt].length>Ge.len&&j[rt].shift()}}function lt(Be){for(var Ge={type:"FeatureCollection",features:[]},vt=0;vt<Be.length;vt++){var Kt=Be[vt];Ge.features.push({type:"Feature",geometry:{type:"LineString",coordinates:j[st(Kt)]}})}return Ge}function kt(Be){for(var Ge={type:"FeatureCollection",features:[]},vt=0;vt<Be.features.length;vt++){var Kt=Be.features[vt],rt=void 0,Ct=new p.LngLatBounds;if(Wt(Ct,Kt.geometry),!Ct.isEmpty()){var Tt=Ct.getCenter();rt=[Tt.lng,Tt.lat]}rt&&Ge.features.push({type:"Feature",id:vt,geometry:{type:"Point",coordinates:rt},properties:Kt.properties})}return Ge}function ut(Be){for(var Ge=Be.getStyle().layers,vt,Kt=Ge.length-1;Kt>=0;Kt--){var rt=Ge[Kt];if(!(rt.metadata&&rt.metadata["mapbox:featureComponent"]==="place-labels"))break;vt=rt.id}return vt}function Ut(Be,Ge){var vt={};if(K.addSource(Be,{type:"geojson",data:Ge}),q==="point")K.addLayer({id:Be+"-text",source:Be,type:"symbol",layout:{"text-field":"{label}","text-size":11,"text-anchor":"top","text-offset":[0,1]},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}}),K.addLayer({id:Be,source:Be,type:"symbol",layout:{"icon-image":"{icon}-15","icon-allow-overlap":!0,"icon-size":{type:"identity",property:"mapkickIconSize"},"icon-anchor":{type:"identity",property:"mapkickIconAnchor"},"icon-offset":{type:"identity",property:"mapkickIconOffset"}}});else{var Kt=ut(K),rt=Be+"-outline";K.addLayer({id:rt,source:Be,type:"line",paint:{"line-color":{type:"identity",property:"mapkickColor"},"line-opacity":.7,"line-width":1}},Kt),K.addLayer({id:Be,source:Be,type:"fill",paint:{"fill-color":{type:"identity",property:"mapkickColor"},"fill-opacity":.3}},rt);for(var Ct=Be+"-text",Tt=kt(Ge),ar=0;ar<Tt.features.length;ar++){var er=Tt.features[ar];vt[er.id]=er.geometry.coordinates}K.addSource(Ct,{type:"geojson",data:Tt}),K.addLayer({id:Be+"-text",source:Ct,type:"symbol",layout:{"text-field":"{label}","text-size":11},paint:{"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":1}})}var ir=!("hover"in Qr)||Qr.hover,sr={closeButton:!1,closeOnClick:!1};ir||(sr.anchor="bottom");var He=new p.Popup(sr),Xe=function(Cn,wt){var Ot=window.getComputedStyle(wt.getElement()),wr=new DOMMatrixReadOnly(Ot.transform),tr=5,on=5,pn=wr.m42,tn=wr.m41;(pn<tr||tn<tr)&&Cn.panBy([Math.min(tn-tr-on,0),Math.min(pn-tr-on,0)])},Rt=function(Cn){var wt=Yn(Cn),Ot=wt.properties.tooltip;if(Ot){q==="point"&&wt.properties.icon.startsWith("mapkick-")?He.options.offset={top:[0,14],"top-left":[0,14],"top-right":[0,14],bottom:[0,-44],"bottom-left":[0,-44],"bottom-right":[0,-44],left:[14,0],right:[-14,0]}:He.options.offset=14;var wr;q==="point"?wr=wt.geometry.coordinates:wr=vt[wt.id],He.setLngLat(wr),Qr.html?He.setHTML(Ot):He.setText(Ot),He.addTo(K),He._container.offsetWidth%2!==0&&(He._container.style.width=He._container.offsetWidth+1+"px"),q!=="area"&&Xe(K,He)}},xr=function(Cn){return Cn.geometry.coordinates[1]},Yn=function(Cn){for(var wt=Cn.features,Ot=wt[0],wr=1;wr<wt.length;wr++){var tr=wt[wr];xr(tr)<xr(Ot)&&(Ot=tr)}return Ot};if(!ir){var kn=null;K.on("click",Be,function(Cn){var wt=Yn(Cn).id;wt!==kn&&(Rt(Cn),kn=wt,Cn.mapkickPopupOpened=!0)}),K.on("click",function(Cn){Cn.mapkickPopupOpened||(He.remove(),kn=null)})}K.on("mouseenter",Be,function(Cn){var wt=Yn(Cn).properties.tooltip;wt&&(K.getCanvas().style.cursor="pointer",ir&&Rt(Cn))}),K.on("mouseleave",Be,function(){K.getCanvas().style.cursor="",ir&&He.remove()})}function Wt(Be,Ge){if(Ge.type==="Point")Be.extend(Ge.coordinates);else if(Ge.type==="Polygon")for(var vt=Ge.coordinates[0],Kt=0;Kt<vt.length;Kt++)Be.extend(vt[Kt]);else if(Ge.type==="MultiPolygon")for(var rt=Ge.coordinates,Ct=0;Ct<rt.length;Ct++)for(var Tt=rt[Ct][0],ar=0;ar<Tt.length;ar++)Be.extend(Tt[ar])}var Ht=function(Be,Ge,vt){var Kt=ye(Ge,vt);vt=vt||{};for(var rt=0;rt<Kt.features.length;rt++)Wt(Rr,Kt.features[rt].geometry);Be.textContent="";var Ct=vt.style;if(!Ct){var Tt=!("accessToken"in p)||/^1\.1[45]/.test(p.version);if(Tt)throw new Error("style required for MapLibre");Ct="mapbox://styles/mapbox/streets-v12"}var ar=vt.zoom,er=vt.center;er||(Rr.isEmpty()?(er=[0,0],ar||(ar=1)):er=Rr.getCenter()),ar||(ar=15);var ir={container:Be,style:Ct,dragRotate:!1,touchZoomRotate:!1,center:er,zoom:ar};vt.style||(ir.projection="mercator"),vt.accessToken&&(ir.accessToken=vt.accessToken),vt.library&&Object.assign(ir,vt.library),K=new p.Map(ir),vt.controls&&K.addControl(new p.NavigationControl({showCompass:!1})),vt.zoom||(K.style.stylesheet||(K.style.stylesheet={}),!Rr.isEmpty()&&K.getZoom()===ar&&K.fitBounds(Rr,{padding:40,animate:!1,maxZoom:15})),V.map=K,ve(function(){vt.trail&&(dt(Ge),K.addSource("trails",{type:"geojson",data:lt([])}),K.addLayer({id:"trails",source:"trails",type:"line",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":2}}));var sr=Ue.size;function He(){if(sr!==0){sr--;return}Ut("objects",Kt),pr=!0;for(var Xe;Xe=zr.shift();)Xe()}Ue.forEach(function(Xe,Rt){var xr=h(p,Rt);xr.addEventListener("load",function(){K.addImage("mapkick-"+Xe+"-15",xr),He()})}),He()})},pr=!1,zr=[];function Jt(Be){pr?Be():zr.push(Be)}G=G||{},G=Object.assign({},P.options,G);var Qr=G.tooltips||{},Br=G.markers||{},Rr=new p.LngLatBounds;G.replay?de(R,W,G,$):(de(R,W,G,Ht),G.refresh&&(this.intervalId=setInterval(function(){de(R,W,G,we)},G.refresh*1e3)))};w.prototype.getMapObject=function(){return this.map},w.prototype.destroy=function(){this.stopRefresh(),this.map&&(this.map.remove(),this.map=null)},w.prototype.stopRefresh=function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)};var T=function(L){function R(W,G,q){L.call(this,W,G,q,"point")}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(w),I=function(L){function R(W,G,q){L.call(this,W,G,q,"area")}return L&&(R.__proto__=L),R.prototype=Object.create(L&&L.prototype),R.prototype.constructor=R,R}(w),P={Map:T,AreaMap:I,maps:y,options:{},library:null};return P.use=function(L){P.library=L},typeof window<"u"&&!window.Mapkick&&(window.Mapkick=P,setTimeout(function(){window.dispatchEvent(new Event("mapkick:load"))},0)),P.use(o),P});var Fj=class{constructor(e,r,n){this.eventTarget=e,this.eventName=r,this.eventOptions=n,this.unorderedBindings=new Set}connect(){this.eventTarget.addEventListener(this.eventName,this,this.eventOptions)}disconnect(){this.eventTarget.removeEventListener(this.eventName,this,this.eventOptions)}bindingConnected(e){this.unorderedBindings.add(e)}bindingDisconnected(e){this.unorderedBindings.delete(e)}handleEvent(e){let r=hgt(e);for(let n of this.bindings){if(r.immediatePropagationStopped)break;n.handleEvent(r)}}hasBindings(){return this.unorderedBindings.size>0}get bindings(){return Array.from(this.unorderedBindings).sort((e,r)=>{let n=e.index,i=r.index;return n<i?-1:n>i?1:0})}};function hgt(t){if("immediatePropagationStopped"in t)return t;{let{stopImmediatePropagation:e}=t;return Object.assign(t,{immediatePropagationStopped:!1,stopImmediatePropagation(){this.immediatePropagationStopped=!0,e.call(this)}})}}var qj=class{constructor(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}start(){this.started||(this.started=!0,this.eventListeners.forEach(e=>e.connect()))}stop(){this.started&&(this.started=!1,this.eventListeners.forEach(e=>e.disconnect()))}get eventListeners(){return Array.from(this.eventListenerMaps.values()).reduce((e,r)=>e.concat(Array.from(r.values())),[])}bindingConnected(e){this.fetchEventListenerForBinding(e).bindingConnected(e)}bindingDisconnected(e,r=!1){this.fetchEventListenerForBinding(e).bindingDisconnected(e),r&&this.clearEventListenersForBinding(e)}handleError(e,r,n={}){this.application.handleError(e,`Error ${r}`,n)}clearEventListenersForBinding(e){let r=this.fetchEventListenerForBinding(e);r.hasBindings()||(r.disconnect(),this.removeMappedEventListenerFor(e))}removeMappedEventListenerFor(e){let{eventTarget:r,eventName:n,eventOptions:i}=e,o=this.fetchEventListenerMapForEventTarget(r),s=this.cacheKey(n,i);o.delete(s),o.size==0&&this.eventListenerMaps.delete(r)}fetchEventListenerForBinding(e){let{eventTarget:r,eventName:n,eventOptions:i}=e;return this.fetchEventListener(r,n,i)}fetchEventListener(e,r,n){let i=this.fetchEventListenerMapForEventTarget(e),o=this.cacheKey(r,n),s=i.get(o);return s||(s=this.createEventListener(e,r,n),i.set(o,s)),s}createEventListener(e,r,n){let i=new Fj(e,r,n);return this.started&&i.connect(),i}fetchEventListenerMapForEventTarget(e){let r=this.eventListenerMaps.get(e);return r||(r=new Map,this.eventListenerMaps.set(e,r)),r}cacheKey(e,r){let n=[e];return Object.keys(r).sort().forEach(i=>{n.push(`${r[i]?"":"!"}${i}`)}),n.join(":")}},dgt={stop({event:t,value:e}){return e&&t.stopPropagation(),!0},prevent({event:t,value:e}){return e&&t.preventDefault(),!0},self({event:t,value:e,element:r}){return e?r===t.target:!0}},pgt=/^(?:(?:([^.]+?)\+)?(.+?)(?:\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;function mgt(t){let r=t.trim().match(pgt)||[],n=r[2],i=r[3];return i&&!["keydown","keyup","keypress"].includes(n)&&(n+=`.${i}`,i=""),{eventTarget:ggt(r[4]),eventName:n,eventOptions:r[7]?vgt(r[7]):{},identifier:r[5],methodName:r[6],keyFilter:r[1]||i}}function ggt(t){if(t=="window")return window;if(t=="document")return document}function vgt(t){return t.split(":").reduce((e,r)=>Object.assign(e,{[r.replace(/^!/,"")]:!/^!/.test(r)}),{})}function ygt(t){if(t==window)return"window";if(t==document)return"document"}function o6(t){return t.replace(/(?:[_-])([a-z0-9])/g,(e,r)=>r.toUpperCase())}function Nj(t){return o6(t.replace(/--/g,"-").replace(/__/g,"_"))}function $E(t){return t.charAt(0).toUpperCase()+t.slice(1)}function nge(t){return t.replace(/([A-Z])/g,(e,r)=>`-${r.toLowerCase()}`)}function bgt(t){return t.match(/[^\s]+/g)||[]}function Kme(t){return t!=null}function Bj(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Zme=["meta","ctrl","alt","shift"],zj=class{constructor(e,r,n,i){this.element=e,this.index=r,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||_gt(e)||ND("missing event name"),this.eventOptions=n.eventOptions||{},this.identifier=n.identifier||ND("missing identifier"),this.methodName=n.methodName||ND("missing method name"),this.keyFilter=n.keyFilter||"",this.schema=i}static forToken(e,r){return new this(e.element,e.index,mgt(e.content),r)}toString(){let e=this.keyFilter?`.${this.keyFilter}`:"",r=this.eventTargetName?`@${this.eventTargetName}`:"";return`${this.eventName}${e}${r}->${this.identifier}#${this.methodName}`}shouldIgnoreKeyboardEvent(e){if(!this.keyFilter)return!1;let r=this.keyFilter.split("+");if(this.keyFilterDissatisfied(e,r))return!0;let n=r.filter(i=>!Zme.includes(i))[0];return n?(Bj(this.keyMappings,n)||ND(`contains unknown key filter: ${this.keyFilter}`),this.keyMappings[n].toLowerCase()!==e.key.toLowerCase()):!1}shouldIgnoreMouseEvent(e){if(!this.keyFilter)return!1;let r=[this.keyFilter];return!!this.keyFilterDissatisfied(e,r)}get params(){let e={},r=new RegExp(`^data-${this.identifier}-(.+)-param$`,"i");for(let{name:n,value:i}of Array.from(this.element.attributes)){let o=n.match(r),s=o&&o[1];s&&(e[o6(s)]=xgt(i))}return e}get eventTargetName(){return ygt(this.eventTarget)}get keyMappings(){return this.schema.keyMappings}keyFilterDissatisfied(e,r){let[n,i,o,s]=Zme.map(u=>r.includes(u));return e.metaKey!==n||e.ctrlKey!==i||e.altKey!==o||e.shiftKey!==s}},Yme={a:()=>"click",button:()=>"click",form:()=>"submit",details:()=>"toggle",input:t=>t.getAttribute("type")=="submit"?"click":"input",select:()=>"change",textarea:()=>"input"};function _gt(t){let e=t.tagName.toLowerCase();if(e in Yme)return Yme[e](t)}function ND(t){throw new Error(t)}function xgt(t){try{return JSON.parse(t)}catch{return t}}var jj=class{constructor(e,r){this.context=e,this.action=r}get index(){return this.action.index}get eventTarget(){return this.action.eventTarget}get eventOptions(){return this.action.eventOptions}get identifier(){return this.context.identifier}handleEvent(e){let r=this.prepareActionEvent(e);this.willBeInvokedByEvent(e)&&this.applyEventModifiers(r)&&this.invokeWithEvent(r)}get eventName(){return this.action.eventName}get method(){let e=this.controller[this.methodName];if(typeof e=="function")return e;throw new Error(`Action "${this.action}" references undefined method "${this.methodName}"`)}applyEventModifiers(e){let{element:r}=this.action,{actionDescriptorFilters:n}=this.context.application,{controller:i}=this.context,o=!0;for(let[s,u]of Object.entries(this.eventOptions))if(s in n){let h=n[s];o=o&&h({name:s,value:u,event:e,element:r,controller:i})}else continue;return o}prepareActionEvent(e){return Object.assign(e,{params:this.action.params})}invokeWithEvent(e){let{target:r,currentTarget:n}=e;try{this.method.call(this.controller,e),this.context.logDebugActivity(this.methodName,{event:e,target:r,currentTarget:n,action:this.methodName})}catch(i){let{identifier:o,controller:s,element:u,index:h}=this,y={identifier:o,controller:s,element:u,index:h,event:e};this.context.handleError(i,`invoking action "${this.action}"`,y)}}willBeInvokedByEvent(e){let r=e.target;return e instanceof KeyboardEvent&&this.action.shouldIgnoreKeyboardEvent(e)||e instanceof MouseEvent&&this.action.shouldIgnoreMouseEvent(e)?!1:this.element===r?!0:r instanceof Element&&this.element.contains(r)?this.scope.containsElement(r):this.scope.containsElement(this.action.element)}get controller(){return this.context.controller}get methodName(){return this.action.methodName}get element(){return this.scope.element}get scope(){return this.context.scope}},BD=class{constructor(e,r){this.mutationObserverInit={attributes:!0,childList:!0,subtree:!0},this.element=e,this.started=!1,this.delegate=r,this.elements=new Set,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,this.mutationObserverInit),this.refresh())}pause(e){this.started&&(this.mutationObserver.disconnect(),this.started=!1),e(),this.started||(this.mutationObserver.observe(this.element,this.mutationObserverInit),this.started=!0)}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started){let e=new Set(this.matchElementsInTree());for(let r of Array.from(this.elements))e.has(r)||this.removeElement(r);for(let r of Array.from(e))this.addElement(r)}}processMutations(e){if(this.started)for(let r of e)this.processMutation(r)}processMutation(e){e.type=="attributes"?this.processAttributeChange(e.target,e.attributeName):e.type=="childList"&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))}processAttributeChange(e,r){this.elements.has(e)?this.delegate.elementAttributeChanged&&this.matchElement(e)?this.delegate.elementAttributeChanged(e,r):this.removeElement(e):this.matchElement(e)&&this.addElement(e)}processRemovedNodes(e){for(let r of Array.from(e)){let n=this.elementFromNode(r);n&&this.processTree(n,this.removeElement)}}processAddedNodes(e){for(let r of Array.from(e)){let n=this.elementFromNode(r);n&&this.elementIsActive(n)&&this.processTree(n,this.addElement)}}matchElement(e){return this.delegate.matchElement(e)}matchElementsInTree(e=this.element){return this.delegate.matchElementsInTree(e)}processTree(e,r){for(let n of this.matchElementsInTree(e))r.call(this,n)}elementFromNode(e){if(e.nodeType==Node.ELEMENT_NODE)return e}elementIsActive(e){return e.isConnected!=this.element.isConnected?!1:this.element.contains(e)}addElement(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}removeElement(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}},zD=class{constructor(e,r,n){this.attributeName=r,this.delegate=n,this.elementObserver=new BD(e,this)}get element(){return this.elementObserver.element}get selector(){return`[${this.attributeName}]`}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get started(){return this.elementObserver.started}matchElement(e){return e.hasAttribute(this.attributeName)}matchElementsInTree(e){let r=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return r.concat(n)}elementMatched(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)}elementUnmatched(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)}elementAttributeChanged(e,r){this.delegate.elementAttributeValueChanged&&this.attributeName==r&&this.delegate.elementAttributeValueChanged(e,r)}};function wgt(t,e,r){ige(t,e).add(r)}function Sgt(t,e,r){ige(t,e).delete(r),Egt(t,e)}function ige(t,e){let r=t.get(e);return r||(r=new Set,t.set(e,r)),r}function Egt(t,e){let r=t.get(e);r!=null&&r.size==0&&t.delete(e)}var dg=class{constructor(){this.valuesByKey=new Map}get keys(){return Array.from(this.valuesByKey.keys())}get values(){return Array.from(this.valuesByKey.values()).reduce((r,n)=>r.concat(Array.from(n)),[])}get size(){return Array.from(this.valuesByKey.values()).reduce((r,n)=>r+n.size,0)}add(e,r){wgt(this.valuesByKey,e,r)}delete(e,r){Sgt(this.valuesByKey,e,r)}has(e,r){let n=this.valuesByKey.get(e);return n!=null&&n.has(r)}hasKey(e){return this.valuesByKey.has(e)}hasValue(e){return Array.from(this.valuesByKey.values()).some(n=>n.has(e))}getValuesForKey(e){let r=this.valuesByKey.get(e);return r?Array.from(r):[]}getKeysForValue(e){return Array.from(this.valuesByKey).filter(([r,n])=>n.has(e)).map(([r,n])=>r)}};var Uj=class{constructor(e,r,n,i){this._selector=r,this.details=i,this.elementObserver=new BD(e,this),this.delegate=n,this.matchesByElement=new dg}get started(){return this.elementObserver.started}get selector(){return this._selector}set selector(e){this._selector=e,this.refresh()}start(){this.elementObserver.start()}pause(e){this.elementObserver.pause(e)}stop(){this.elementObserver.stop()}refresh(){this.elementObserver.refresh()}get element(){return this.elementObserver.element}matchElement(e){let{selector:r}=this;if(r){let n=e.matches(r);return this.delegate.selectorMatchElement?n&&this.delegate.selectorMatchElement(e,this.details):n}else return!1}matchElementsInTree(e){let{selector:r}=this;if(r){let n=this.matchElement(e)?[e]:[],i=Array.from(e.querySelectorAll(r)).filter(o=>this.matchElement(o));return n.concat(i)}else return[]}elementMatched(e){let{selector:r}=this;r&&this.selectorMatched(e,r)}elementUnmatched(e){let r=this.matchesByElement.getKeysForValue(e);for(let n of r)this.selectorUnmatched(e,n)}elementAttributeChanged(e,r){let{selector:n}=this;if(n){let i=this.matchElement(e),o=this.matchesByElement.has(n,e);i&&!o?this.selectorMatched(e,n):!i&&o&&this.selectorUnmatched(e,n)}}selectorMatched(e,r){this.delegate.selectorMatched(e,r,this.details),this.matchesByElement.add(r,e)}selectorUnmatched(e,r){this.delegate.selectorUnmatched(e,r,this.details),this.matchesByElement.delete(r,e)}},Vj=class{constructor(e,r){this.element=e,this.delegate=r,this.started=!1,this.stringMap=new Map,this.mutationObserver=new MutationObserver(n=>this.processMutations(n))}start(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,attributeOldValue:!0}),this.refresh())}stop(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}refresh(){if(this.started)for(let e of this.knownAttributeNames)this.refreshAttribute(e,null)}processMutations(e){if(this.started)for(let r of e)this.processMutation(r)}processMutation(e){let r=e.attributeName;r&&this.refreshAttribute(r,e.oldValue)}refreshAttribute(e,r){let n=this.delegate.getStringMapKeyForAttribute(e);if(n!=null){this.stringMap.has(e)||this.stringMapKeyAdded(n,e);let i=this.element.getAttribute(e);if(this.stringMap.get(e)!=i&&this.stringMapValueChanged(i,n,r),i==null){let o=this.stringMap.get(e);this.stringMap.delete(e),o&&this.stringMapKeyRemoved(n,e,o)}else this.stringMap.set(e,i)}}stringMapKeyAdded(e,r){this.delegate.stringMapKeyAdded&&this.delegate.stringMapKeyAdded(e,r)}stringMapValueChanged(e,r,n){this.delegate.stringMapValueChanged&&this.delegate.stringMapValueChanged(e,r,n)}stringMapKeyRemoved(e,r,n){this.delegate.stringMapKeyRemoved&&this.delegate.stringMapKeyRemoved(e,r,n)}get knownAttributeNames(){return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)))}get currentAttributeNames(){return Array.from(this.element.attributes).map(e=>e.name)}get recordedAttributeNames(){return Array.from(this.stringMap.keys())}},jD=class{constructor(e,r,n){this.attributeObserver=new zD(e,r,this),this.delegate=n,this.tokensByElement=new dg}get started(){return this.attributeObserver.started}start(){this.attributeObserver.start()}pause(e){this.attributeObserver.pause(e)}stop(){this.attributeObserver.stop()}refresh(){this.attributeObserver.refresh()}get element(){return this.attributeObserver.element}get attributeName(){return this.attributeObserver.attributeName}elementMatchedAttribute(e){this.tokensMatched(this.readTokensForElement(e))}elementAttributeValueChanged(e){let[r,n]=this.refreshTokensForElement(e);this.tokensUnmatched(r),this.tokensMatched(n)}elementUnmatchedAttribute(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))}tokensMatched(e){e.forEach(r=>this.tokenMatched(r))}tokensUnmatched(e){e.forEach(r=>this.tokenUnmatched(r))}tokenMatched(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)}tokenUnmatched(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)}refreshTokensForElement(e){let r=this.tokensByElement.getValuesForKey(e),n=this.readTokensForElement(e),i=Agt(r,n).findIndex(([o,s])=>!kgt(o,s));return i==-1?[[],[]]:[r.slice(i),n.slice(i)]}readTokensForElement(e){let r=this.attributeName,n=e.getAttribute(r)||"";return Tgt(n,e,r)}};function Tgt(t,e,r){return t.trim().split(/\s+/).filter(n=>n.length).map((n,i)=>({element:e,attributeName:r,content:n,index:i}))}function Agt(t,e){let r=Math.max(t.length,e.length);return Array.from({length:r},(n,i)=>[t[i],e[i]])}function kgt(t,e){return t&&e&&t.index==e.index&&t.content==e.content}var UD=class{constructor(e,r,n){this.tokenListObserver=new jD(e,r,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}get started(){return this.tokenListObserver.started}start(){this.tokenListObserver.start()}stop(){this.tokenListObserver.stop()}refresh(){this.tokenListObserver.refresh()}get element(){return this.tokenListObserver.element}get attributeName(){return this.tokenListObserver.attributeName}tokenMatched(e){let{element:r}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(r).set(e,n),this.delegate.elementMatchedValue(r,n))}tokenUnmatched(e){let{element:r}=e,{value:n}=this.fetchParseResultForToken(e);n&&(this.fetchValuesByTokenForElement(r).delete(e),this.delegate.elementUnmatchedValue(r,n))}fetchParseResultForToken(e){let r=this.parseResultsByToken.get(e);return r||(r=this.parseToken(e),this.parseResultsByToken.set(e,r)),r}fetchValuesByTokenForElement(e){let r=this.valuesByTokenByElement.get(e);return r||(r=new Map,this.valuesByTokenByElement.set(e,r)),r}parseToken(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(r){return{error:r}}}},Hj=class{constructor(e,r){this.context=e,this.delegate=r,this.bindingsByAction=new Map}start(){this.valueListObserver||(this.valueListObserver=new UD(this.element,this.actionAttribute,this),this.valueListObserver.start())}stop(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())}get element(){return this.context.element}get identifier(){return this.context.identifier}get actionAttribute(){return this.schema.actionAttribute}get schema(){return this.context.schema}get bindings(){return Array.from(this.bindingsByAction.values())}connectAction(e){let r=new jj(this.context,e);this.bindingsByAction.set(e,r),this.delegate.bindingConnected(r)}disconnectAction(e){let r=this.bindingsByAction.get(e);r&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(r))}disconnectAllActions(){this.bindings.forEach(e=>this.delegate.bindingDisconnected(e,!0)),this.bindingsByAction.clear()}parseValueForToken(e){let r=zj.forToken(e,this.schema);if(r.identifier==this.identifier)return r}elementMatchedValue(e,r){this.connectAction(r)}elementUnmatchedValue(e,r){this.disconnectAction(r)}},Wj=class{constructor(e,r){this.context=e,this.receiver=r,this.stringMapObserver=new Vj(this.element,this),this.valueDescriptorMap=this.controller.valueDescriptorMap}start(){this.stringMapObserver.start(),this.invokeChangedCallbacksForDefaultValues()}stop(){this.stringMapObserver.stop()}get element(){return this.context.element}get controller(){return this.context.controller}getStringMapKeyForAttribute(e){if(e in this.valueDescriptorMap)return this.valueDescriptorMap[e].name}stringMapKeyAdded(e,r){let n=this.valueDescriptorMap[r];this.hasValue(e)||this.invokeChangedCallback(e,n.writer(this.receiver[e]),n.writer(n.defaultValue))}stringMapValueChanged(e,r,n){let i=this.valueDescriptorNameMap[r];e!==null&&(n===null&&(n=i.writer(i.defaultValue)),this.invokeChangedCallback(r,e,n))}stringMapKeyRemoved(e,r,n){let i=this.valueDescriptorNameMap[e];this.hasValue(e)?this.invokeChangedCallback(e,i.writer(this.receiver[e]),n):this.invokeChangedCallback(e,i.writer(i.defaultValue),n)}invokeChangedCallbacksForDefaultValues(){for(let{key:e,name:r,defaultValue:n,writer:i}of this.valueDescriptors)n!=null&&!this.controller.data.has(e)&&this.invokeChangedCallback(r,i(n),void 0)}invokeChangedCallback(e,r,n){let i=`${e}Changed`,o=this.receiver[i];if(typeof o=="function"){let s=this.valueDescriptorNameMap[e];try{let u=s.reader(r),h=n;n&&(h=s.reader(n)),o.call(this.receiver,u,h)}catch(u){throw u instanceof TypeError&&(u.message=`Stimulus Value "${this.context.identifier}.${s.name}" - ${u.message}`),u}}}get valueDescriptors(){let{valueDescriptorMap:e}=this;return Object.keys(e).map(r=>e[r])}get valueDescriptorNameMap(){let e={};return Object.keys(this.valueDescriptorMap).forEach(r=>{let n=this.valueDescriptorMap[r];e[n.name]=n}),e}hasValue(e){let r=this.valueDescriptorNameMap[e],n=`has${$E(r.name)}`;return this.receiver[n]}},$j=class{constructor(e,r){this.context=e,this.delegate=r,this.targetsByName=new dg}start(){this.tokenListObserver||(this.tokenListObserver=new jD(this.element,this.attributeName,this),this.tokenListObserver.start())}stop(){this.tokenListObserver&&(this.disconnectAllTargets(),this.tokenListObserver.stop(),delete this.tokenListObserver)}tokenMatched({element:e,content:r}){this.scope.containsElement(e)&&this.connectTarget(e,r)}tokenUnmatched({element:e,content:r}){this.disconnectTarget(e,r)}connectTarget(e,r){var n;this.targetsByName.has(r,e)||(this.targetsByName.add(r,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetConnected(e,r)))}disconnectTarget(e,r){var n;this.targetsByName.has(r,e)&&(this.targetsByName.delete(r,e),(n=this.tokenListObserver)===null||n===void 0||n.pause(()=>this.delegate.targetDisconnected(e,r)))}disconnectAllTargets(){for(let e of this.targetsByName.keys)for(let r of this.targetsByName.getValuesForKey(e))this.disconnectTarget(r,e)}get attributeName(){return`data-${this.context.identifier}-target`}get element(){return this.context.element}get scope(){return this.context.scope}};function GE(t,e){let r=oge(t);return Array.from(r.reduce((n,i)=>(Igt(i,e).forEach(o=>n.add(o)),n),new Set))}function Cgt(t,e){return oge(t).reduce((n,i)=>(n.push(...Dgt(i,e)),n),[])}function oge(t){let e=[];for(;t;)e.push(t),t=Object.getPrototypeOf(t);return e.reverse()}function Igt(t,e){let r=t[e];return Array.isArray(r)?r:[]}function Dgt(t,e){let r=t[e];return r?Object.keys(r).map(n=>[n,r[n]]):[]}var Gj=class{constructor(e,r){this.started=!1,this.context=e,this.delegate=r,this.outletsByName=new dg,this.outletElementsByName=new dg,this.selectorObserverMap=new Map,this.attributeObserverMap=new Map}start(){this.started||(this.outletDefinitions.forEach(e=>{this.setupSelectorObserverForOutlet(e),this.setupAttributeObserverForOutlet(e)}),this.started=!0,this.dependentContexts.forEach(e=>e.refresh()))}refresh(){this.selectorObserverMap.forEach(e=>e.refresh()),this.attributeObserverMap.forEach(e=>e.refresh())}stop(){this.started&&(this.started=!1,this.disconnectAllOutlets(),this.stopSelectorObservers(),this.stopAttributeObservers())}stopSelectorObservers(){this.selectorObserverMap.size>0&&(this.selectorObserverMap.forEach(e=>e.stop()),this.selectorObserverMap.clear())}stopAttributeObservers(){this.attributeObserverMap.size>0&&(this.attributeObserverMap.forEach(e=>e.stop()),this.attributeObserverMap.clear())}selectorMatched(e,r,{outletName:n}){let i=this.getOutlet(e,n);i&&this.connectOutlet(i,e,n)}selectorUnmatched(e,r,{outletName:n}){let i=this.getOutletFromMap(e,n);i&&this.disconnectOutlet(i,e,n)}selectorMatchElement(e,{outletName:r}){let n=this.selector(r),i=this.hasOutlet(e,r),o=e.matches(`[${this.schema.controllerAttribute}~=${r}]`);return n?i&&o&&e.matches(n):!1}elementMatchedAttribute(e,r){let n=this.getOutletNameFromOutletAttributeName(r);n&&this.updateSelectorObserverForOutlet(n)}elementAttributeValueChanged(e,r){let n=this.getOutletNameFromOutletAttributeName(r);n&&this.updateSelectorObserverForOutlet(n)}elementUnmatchedAttribute(e,r){let n=this.getOutletNameFromOutletAttributeName(r);n&&this.updateSelectorObserverForOutlet(n)}connectOutlet(e,r,n){var i;this.outletElementsByName.has(n,r)||(this.outletsByName.add(n,e),this.outletElementsByName.add(n,r),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletConnected(e,r,n)))}disconnectOutlet(e,r,n){var i;this.outletElementsByName.has(n,r)&&(this.outletsByName.delete(n,e),this.outletElementsByName.delete(n,r),(i=this.selectorObserverMap.get(n))===null||i===void 0||i.pause(()=>this.delegate.outletDisconnected(e,r,n)))}disconnectAllOutlets(){for(let e of this.outletElementsByName.keys)for(let r of this.outletElementsByName.getValuesForKey(e))for(let n of this.outletsByName.getValuesForKey(e))this.disconnectOutlet(n,r,e)}updateSelectorObserverForOutlet(e){let r=this.selectorObserverMap.get(e);r&&(r.selector=this.selector(e))}setupSelectorObserverForOutlet(e){let r=this.selector(e),n=new Uj(document.body,r,this,{outletName:e});this.selectorObserverMap.set(e,n),n.start()}setupAttributeObserverForOutlet(e){let r=this.attributeNameForOutletName(e),n=new zD(this.scope.element,r,this);this.attributeObserverMap.set(e,n),n.start()}selector(e){return this.scope.outlets.getSelectorForOutletName(e)}attributeNameForOutletName(e){return this.scope.schema.outletAttributeForScope(this.identifier,e)}getOutletNameFromOutletAttributeName(e){return this.outletDefinitions.find(r=>this.attributeNameForOutletName(r)===e)}get outletDependencies(){let e=new dg;return this.router.modules.forEach(r=>{let n=r.definition.controllerConstructor;GE(n,"outlets").forEach(o=>e.add(o,r.identifier))}),e}get outletDefinitions(){return this.outletDependencies.getKeysForValue(this.identifier)}get dependentControllerIdentifiers(){return this.outletDependencies.getValuesForKey(this.identifier)}get dependentContexts(){let e=this.dependentControllerIdentifiers;return this.router.contexts.filter(r=>e.includes(r.identifier))}hasOutlet(e,r){return!!this.getOutlet(e,r)||!!this.getOutletFromMap(e,r)}getOutlet(e,r){return this.application.getControllerForElementAndIdentifier(e,r)}getOutletFromMap(e,r){return this.outletsByName.getValuesForKey(r).find(n=>n.element===e)}get scope(){return this.context.scope}get schema(){return this.context.schema}get identifier(){return this.context.identifier}get application(){return this.context.application}get router(){return this.application.router}},Kj=class{constructor(e,r){this.logDebugActivity=(n,i={})=>{let{identifier:o,controller:s,element:u}=this;i=Object.assign({identifier:o,controller:s,element:u},i),this.application.logDebugActivity(this.identifier,n,i)},this.module=e,this.scope=r,this.controller=new e.controllerConstructor(this),this.bindingObserver=new Hj(this,this.dispatcher),this.valueObserver=new Wj(this,this.controller),this.targetObserver=new $j(this,this),this.outletObserver=new Gj(this,this);try{this.controller.initialize(),this.logDebugActivity("initialize")}catch(n){this.handleError(n,"initializing controller")}}connect(){this.bindingObserver.start(),this.valueObserver.start(),this.targetObserver.start(),this.outletObserver.start();try{this.controller.connect(),this.logDebugActivity("connect")}catch(e){this.handleError(e,"connecting controller")}}refresh(){this.outletObserver.refresh()}disconnect(){try{this.controller.disconnect(),this.logDebugActivity("disconnect")}catch(e){this.handleError(e,"disconnecting controller")}this.outletObserver.stop(),this.targetObserver.stop(),this.valueObserver.stop(),this.bindingObserver.stop()}get application(){return this.module.application}get identifier(){return this.module.identifier}get schema(){return this.application.schema}get dispatcher(){return this.application.dispatcher}get element(){return this.scope.element}get parentElement(){return this.element.parentElement}handleError(e,r,n={}){let{identifier:i,controller:o,element:s}=this;n=Object.assign({identifier:i,controller:o,element:s},n),this.application.handleError(e,`Error ${r}`,n)}targetConnected(e,r){this.invokeControllerMethod(`${r}TargetConnected`,e)}targetDisconnected(e,r){this.invokeControllerMethod(`${r}TargetDisconnected`,e)}outletConnected(e,r,n){this.invokeControllerMethod(`${Nj(n)}OutletConnected`,e,r)}outletDisconnected(e,r,n){this.invokeControllerMethod(`${Nj(n)}OutletDisconnected`,e,r)}invokeControllerMethod(e,...r){let n=this.controller;typeof n[e]=="function"&&n[e](...r)}};function Ogt(t){return Pgt(t,Mgt(t))}function Pgt(t,e){let r=qgt(t),n=Lgt(t.prototype,e);return Object.defineProperties(r.prototype,n),r}function Mgt(t){return GE(t,"blessings").reduce((r,n)=>{let i=n(t);for(let o in i){let s=r[o]||{};r[o]=Object.assign(s,i[o])}return r},{})}function Lgt(t,e){return Fgt(e).reduce((r,n)=>{let i=Rgt(t,e,n);return i&&Object.assign(r,{[n]:i}),r},{})}function Rgt(t,e,r){let n=Object.getOwnPropertyDescriptor(t,r);if(!(n&&"value"in n)){let o=Object.getOwnPropertyDescriptor(e,r).value;return n&&(o.get=n.get||o.get,o.set=n.set||o.set),o}}var Fgt=typeof Object.getOwnPropertySymbols=="function"?t=>[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)]:Object.getOwnPropertyNames,qgt=(()=>{function t(r){function n(){return Reflect.construct(r,arguments,new.target)}return n.prototype=Object.create(r.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,r),n}function e(){let n=t(function(){this.a.call(this)});return n.prototype.a=function(){},new n}try{return e(),t}catch{return n=>class extends n{}}})();function Ngt(t){return{identifier:t.identifier,controllerConstructor:Ogt(t.controllerConstructor)}}var Zj=class{constructor(e,r){this.application=e,this.definition=Ngt(r),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}get identifier(){return this.definition.identifier}get controllerConstructor(){return this.definition.controllerConstructor}get contexts(){return Array.from(this.connectedContexts)}connectContextForScope(e){let r=this.fetchContextForScope(e);this.connectedContexts.add(r),r.connect()}disconnectContextForScope(e){let r=this.contextsByScope.get(e);r&&(this.connectedContexts.delete(r),r.disconnect())}fetchContextForScope(e){let r=this.contextsByScope.get(e);return r||(r=new Kj(this,e),this.contextsByScope.set(e,r)),r}},Yj=class{constructor(e){this.scope=e}has(e){return this.data.has(this.getDataKey(e))}get(e){return this.getAll(e)[0]}getAll(e){let r=this.data.get(this.getDataKey(e))||"";return bgt(r)}getAttributeName(e){return this.data.getAttributeNameForKey(this.getDataKey(e))}getDataKey(e){return`${e}-class`}get data(){return this.scope.data}},Xj=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get(e){let r=this.getAttributeNameForKey(e);return this.element.getAttribute(r)}set(e,r){let n=this.getAttributeNameForKey(e);return this.element.setAttribute(n,r),this.get(e)}has(e){let r=this.getAttributeNameForKey(e);return this.element.hasAttribute(r)}delete(e){if(this.has(e)){let r=this.getAttributeNameForKey(e);return this.element.removeAttribute(r),!0}else return!1}getAttributeNameForKey(e){return`data-${this.identifier}-${nge(e)}`}},Jj=class{constructor(e){this.warnedKeysByObject=new WeakMap,this.logger=e}warn(e,r,n){let i=this.warnedKeysByObject.get(e);i||(i=new Set,this.warnedKeysByObject.set(e,i)),i.has(r)||(i.add(r),this.logger.warn(n,e))}};function Qj(t,e){return`[${t}~="${e}"]`}var e6=class{constructor(e){this.scope=e}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((r,n)=>r||this.findTarget(n)||this.findLegacyTarget(n),void 0)}findAll(...e){return e.reduce((r,n)=>[...r,...this.findAllTargets(n),...this.findAllLegacyTargets(n)],[])}findTarget(e){let r=this.getSelectorForTargetName(e);return this.scope.findElement(r)}findAllTargets(e){let r=this.getSelectorForTargetName(e);return this.scope.findAllElements(r)}getSelectorForTargetName(e){let r=this.schema.targetAttributeForScope(this.identifier);return Qj(r,e)}findLegacyTarget(e){let r=this.getLegacySelectorForTargetName(e);return this.deprecate(this.scope.findElement(r),e)}findAllLegacyTargets(e){let r=this.getLegacySelectorForTargetName(e);return this.scope.findAllElements(r).map(n=>this.deprecate(n,e))}getLegacySelectorForTargetName(e){let r=`${this.identifier}.${e}`;return Qj(this.schema.targetAttribute,r)}deprecate(e,r){if(e){let{identifier:n}=this,i=this.schema.targetAttribute,o=this.schema.targetAttributeForScope(n);this.guide.warn(e,`target:${r}`,`Please replace ${i}="${n}.${r}" with ${o}="${r}". The ${i} attribute is deprecated and will be removed in a future version of Stimulus.`)}return e}get guide(){return this.scope.guide}},t6=class{constructor(e,r){this.scope=e,this.controllerElement=r}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get schema(){return this.scope.schema}has(e){return this.find(e)!=null}find(...e){return e.reduce((r,n)=>r||this.findOutlet(n),void 0)}findAll(...e){return e.reduce((r,n)=>[...r,...this.findAllOutlets(n)],[])}getSelectorForOutletName(e){let r=this.schema.outletAttributeForScope(this.identifier,e);return this.controllerElement.getAttribute(r)}findOutlet(e){let r=this.getSelectorForOutletName(e);if(r)return this.findElement(r,e)}findAllOutlets(e){let r=this.getSelectorForOutletName(e);return r?this.findAllElements(r,e):[]}findElement(e,r){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,r))[0]}findAllElements(e,r){return this.scope.queryElements(e).filter(i=>this.matchesElement(i,e,r))}matchesElement(e,r,n){let i=e.getAttribute(this.scope.schema.controllerAttribute)||"";return e.matches(r)&&i.split(" ").includes(n)}},r6=class t{constructor(e,r,n,i){this.targets=new e6(this),this.classes=new Yj(this),this.data=new Xj(this),this.containsElement=o=>o.closest(this.controllerSelector)===this.element,this.schema=e,this.element=r,this.identifier=n,this.guide=new Jj(i),this.outlets=new t6(this.documentScope,r)}findElement(e){return this.element.matches(e)?this.element:this.queryElements(e).find(this.containsElement)}findAllElements(e){return[...this.element.matches(e)?[this.element]:[],...this.queryElements(e).filter(this.containsElement)]}queryElements(e){return Array.from(this.element.querySelectorAll(e))}get controllerSelector(){return Qj(this.schema.controllerAttribute,this.identifier)}get isDocumentScope(){return this.element===document.documentElement}get documentScope(){return this.isDocumentScope?this:new t(this.schema,document.documentElement,this.identifier,this.guide.logger)}},n6=class{constructor(e,r,n){this.element=e,this.schema=r,this.delegate=n,this.valueListObserver=new UD(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}start(){this.valueListObserver.start()}stop(){this.valueListObserver.stop()}get controllerAttribute(){return this.schema.controllerAttribute}parseValueForToken(e){let{element:r,content:n}=e;return this.parseValueForElementAndIdentifier(r,n)}parseValueForElementAndIdentifier(e,r){let n=this.fetchScopesByIdentifierForElement(e),i=n.get(r);return i||(i=this.delegate.createScopeForElementAndIdentifier(e,r),n.set(r,i)),i}elementMatchedValue(e,r){let n=(this.scopeReferenceCounts.get(r)||0)+1;this.scopeReferenceCounts.set(r,n),n==1&&this.delegate.scopeConnected(r)}elementUnmatchedValue(e,r){let n=this.scopeReferenceCounts.get(r);n&&(this.scopeReferenceCounts.set(r,n-1),n==1&&this.delegate.scopeDisconnected(r))}fetchScopesByIdentifierForElement(e){let r=this.scopesByIdentifierByElement.get(e);return r||(r=new Map,this.scopesByIdentifierByElement.set(e,r)),r}},i6=class{constructor(e){this.application=e,this.scopeObserver=new n6(this.element,this.schema,this),this.scopesByIdentifier=new dg,this.modulesByIdentifier=new Map}get element(){return this.application.element}get schema(){return this.application.schema}get logger(){return this.application.logger}get controllerAttribute(){return this.schema.controllerAttribute}get modules(){return Array.from(this.modulesByIdentifier.values())}get contexts(){return this.modules.reduce((e,r)=>e.concat(r.contexts),[])}start(){this.scopeObserver.start()}stop(){this.scopeObserver.stop()}loadDefinition(e){this.unloadIdentifier(e.identifier);let r=new Zj(this.application,e);this.connectModule(r);let n=e.controllerConstructor.afterLoad;n&&n.call(e.controllerConstructor,e.identifier,this.application)}unloadIdentifier(e){let r=this.modulesByIdentifier.get(e);r&&this.disconnectModule(r)}getContextForElementAndIdentifier(e,r){let n=this.modulesByIdentifier.get(r);if(n)return n.contexts.find(i=>i.element==e)}proposeToConnectScopeForElementAndIdentifier(e,r){let n=this.scopeObserver.parseValueForElementAndIdentifier(e,r);n?this.scopeObserver.elementMatchedValue(n.element,n):console.error(`Couldn't find or create scope for identifier: "${r}" and element:`,e)}handleError(e,r,n){this.application.handleError(e,r,n)}createScopeForElementAndIdentifier(e,r){return new r6(this.schema,e,r,this.logger)}scopeConnected(e){this.scopesByIdentifier.add(e.identifier,e);let r=this.modulesByIdentifier.get(e.identifier);r&&r.connectContextForScope(e)}scopeDisconnected(e){this.scopesByIdentifier.delete(e.identifier,e);let r=this.modulesByIdentifier.get(e.identifier);r&&r.disconnectContextForScope(e)}connectModule(e){this.modulesByIdentifier.set(e.identifier,e),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.connectContextForScope(n))}disconnectModule(e){this.modulesByIdentifier.delete(e.identifier),this.scopesByIdentifier.getValuesForKey(e.identifier).forEach(n=>e.disconnectContextForScope(n))}},Bgt={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target",targetAttributeForScope:t=>`data-${t}-target`,outletAttributeForScope:(t,e)=>`data-${t}-${e}-outlet`,keyMappings:Object.assign(Object.assign({enter:"Enter",tab:"Tab",esc:"Escape",space:" ",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",home:"Home",end:"End",page_up:"PageUp",page_down:"PageDown"},Xme("abcdefghijklmnopqrstuvwxyz".split("").map(t=>[t,t]))),Xme("0123456789".split("").map(t=>[t,t])))};function Xme(t){return t.reduce((e,[r,n])=>Object.assign(Object.assign({},e),{[r]:n}),{})}var VD=class{constructor(e=document.documentElement,r=Bgt){this.logger=console,this.debug=!1,this.logDebugActivity=(n,i,o={})=>{this.debug&&this.logFormattedMessage(n,i,o)},this.element=e,this.schema=r,this.dispatcher=new qj(this),this.router=new i6(this),this.actionDescriptorFilters=Object.assign({},dgt)}static start(e,r){let n=new this(e,r);return n.start(),n}async start(){await zgt(),this.logDebugActivity("application","starting"),this.dispatcher.start(),this.router.start(),this.logDebugActivity("application","start")}stop(){this.logDebugActivity("application","stopping"),this.dispatcher.stop(),this.router.stop(),this.logDebugActivity("application","stop")}register(e,r){this.load({identifier:e,controllerConstructor:r})}registerActionOption(e,r){this.actionDescriptorFilters[e]=r}load(e,...r){(Array.isArray(e)?e:[e,...r]).forEach(i=>{i.controllerConstructor.shouldLoad&&this.router.loadDefinition(i)})}unload(e,...r){(Array.isArray(e)?e:[e,...r]).forEach(i=>this.router.unloadIdentifier(i))}get controllers(){return this.router.contexts.map(e=>e.controller)}getControllerForElementAndIdentifier(e,r){let n=this.router.getContextForElementAndIdentifier(e,r);return n?n.controller:null}handleError(e,r,n){var i;this.logger.error(`%s

%o

%o`,r,e,n),(i=window.onerror)===null||i===void 0||i.call(window,r,"",0,0,e)}logFormattedMessage(e,r,n={}){n=Object.assign({application:this},n),this.logger.groupCollapsed(`${e} #${r}`),this.logger.log("details:",Object.assign({},n)),this.logger.groupEnd()}};function zgt(){return new Promise(t=>{document.readyState=="loading"?document.addEventListener("DOMContentLoaded",()=>t()):t()})}function jgt(t){return GE(t,"classes").reduce((r,n)=>Object.assign(r,Ugt(n)),{})}function Ugt(t){return{[`${t}Class`]:{get(){let{classes:e}=this;if(e.has(t))return e.get(t);{let r=e.getAttributeName(t);throw new Error(`Missing attribute "${r}"`)}}},[`${t}Classes`]:{get(){return this.classes.getAll(t)}},[`has${$E(t)}Class`]:{get(){return this.classes.has(t)}}}}function Vgt(t){return GE(t,"outlets").reduce((r,n)=>Object.assign(r,Hgt(n)),{})}function Jme(t,e,r){return t.application.getControllerForElementAndIdentifier(e,r)}function Qme(t,e,r){let n=Jme(t,e,r);if(n||(t.application.router.proposeToConnectScopeForElementAndIdentifier(e,r),n=Jme(t,e,r),n))return n}function Hgt(t){let e=Nj(t);return{[`${e}Outlet`]:{get(){let r=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(r){let i=Qme(this,r,t);if(i)return i;throw new Error(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`)}throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}Outlets`]:{get(){let r=this.outlets.findAll(t);return r.length>0?r.map(n=>{let i=Qme(this,n,t);if(i)return i;console.warn(`The provided outlet element is missing an outlet controller "${t}" instance for host controller "${this.identifier}"`,n)}).filter(n=>n):[]}},[`${e}OutletElement`]:{get(){let r=this.outlets.find(t),n=this.outlets.getSelectorForOutletName(t);if(r)return r;throw new Error(`Missing outlet element "${t}" for host controller "${this.identifier}". Stimulus couldn't find a matching outlet element using selector "${n}".`)}},[`${e}OutletElements`]:{get(){return this.outlets.findAll(t)}},[`has${$E(e)}Outlet`]:{get(){return this.outlets.has(t)}}}}function Wgt(t){return GE(t,"targets").reduce((r,n)=>Object.assign(r,$gt(n)),{})}function $gt(t){return{[`${t}Target`]:{get(){let e=this.targets.find(t);if(e)return e;throw new Error(`Missing target element "${t}" for "${this.identifier}" controller`)}},[`${t}Targets`]:{get(){return this.targets.findAll(t)}},[`has${$E(t)}Target`]:{get(){return this.targets.has(t)}}}}function Ggt(t){let e=Cgt(t,"values"),r={valueDescriptorMap:{get(){return e.reduce((n,i)=>{let o=age(i,this.identifier),s=this.data.getAttributeNameForKey(o.key);return Object.assign(n,{[s]:o})},{})}}};return e.reduce((n,i)=>Object.assign(n,Kgt(i)),r)}function Kgt(t,e){let r=age(t,e),{key:n,name:i,reader:o,writer:s}=r;return{[i]:{get(){let u=this.data.get(n);return u!==null?o(u):r.defaultValue},set(u){u===void 0?this.data.delete(n):this.data.set(n,s(u))}},[`has${$E(i)}`]:{get(){return this.data.has(n)||r.hasCustomDefaultValue}}}}function age([t,e],r){return Jgt({controller:r,token:t,typeDefinition:e})}function HD(t){switch(t){case Array:return"array";case Boolean:return"boolean";case Number:return"number";case Object:return"object";case String:return"string"}}function WE(t){switch(typeof t){case"boolean":return"boolean";case"number":return"number";case"string":return"string"}if(Array.isArray(t))return"array";if(Object.prototype.toString.call(t)==="[object Object]")return"object"}function Zgt(t){let{controller:e,token:r,typeObject:n}=t,i=Kme(n.type),o=Kme(n.default),s=i&&o,u=i&&!o,h=!i&&o,y=HD(n.type),w=WE(t.typeObject.default);if(u)return y;if(h)return w;if(y!==w){let T=e?`${e}.${r}`:r;throw new Error(`The specified default value for the Stimulus Value "${T}" must match the defined type "${y}". The provided default value of "${n.default}" is of type "${w}".`)}if(s)return y}function Ygt(t){let{controller:e,token:r,typeDefinition:n}=t,o=Zgt({controller:e,token:r,typeObject:n}),s=WE(n),u=HD(n),h=o||s||u;if(h)return h;let y=e?`${e}.${n}`:r;throw new Error(`Unknown value type "${y}" for "${r}" value`)}function Xgt(t){let e=HD(t);if(e)return ege[e];let r=Bj(t,"default"),n=Bj(t,"type"),i=t;if(r)return i.default;if(n){let{type:o}=i,s=HD(o);if(s)return ege[s]}return t}function Jgt(t){let{token:e,typeDefinition:r}=t,n=`${nge(e)}-value`,i=Ygt(t);return{type:i,key:n,name:o6(n),get defaultValue(){return Xgt(r)},get hasCustomDefaultValue(){return WE(r)!==void 0},reader:Qgt[i],writer:tge[i]||tge.default}}var ege={get array(){return[]},boolean:!1,number:0,get object(){return{}},string:""},Qgt={array(t){let e=JSON.parse(t);if(!Array.isArray(e))throw new TypeError(`expected value of type "array" but instead got value "${t}" of type "${WE(e)}"`);return e},boolean(t){return!(t=="0"||String(t).toLowerCase()=="false")},number(t){return Number(t.replace(/_/g,""))},object(t){let e=JSON.parse(t);if(e===null||typeof e!="object"||Array.isArray(e))throw new TypeError(`expected value of type "object" but instead got value "${t}" of type "${WE(e)}"`);return e},string(t){return t}},tge={default:evt,array:rge,object:rge};function rge(t){return JSON.stringify(t)}function evt(t){return`${t}`}var Lr=class{constructor(e){this.context=e}static get shouldLoad(){return!0}static afterLoad(e,r){}get application(){return this.context.application}get scope(){return this.context.scope}get element(){return this.scope.element}get identifier(){return this.scope.identifier}get targets(){return this.scope.targets}get outlets(){return this.scope.outlets}get classes(){return this.scope.classes}get data(){return this.scope.data}initialize(){}connect(){}disconnect(){}dispatch(e,{target:r=this.element,detail:n={},prefix:i=this.identifier,bubbles:o=!0,cancelable:s=!0}={}){let u=i?`${i}:${e}`:e,h=new CustomEvent(u,{detail:n,bubbles:o,cancelable:s});return r.dispatchEvent(h),h}};Lr.blessings=[jgt,Wgt,Ggt,Vgt];Lr.targets=[];Lr.outlets=[];Lr.values={};var tvt=Object.defineProperty,rvt=(t,e,r)=>e in t?tvt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,kl=(t,e,r)=>rvt(t,typeof e!="symbol"?e+"":e,r);async function l6(t,e,r={}){e?await hge(t,r):await dge(t,r)}async function hge(t,e={}){let{transitionClasses:r,fromClasses:n,toClasses:i,toggleClass:o}=pge("Enter",t,e);return mge(t,{firstFrame(){t.classList.add(...r.split(" ")),t.classList.add(...n.split(" ")),t.classList.remove(...i.split(" ")),t.classList.remove(...o.split(" "))},secondFrame(){t.classList.remove(...n.split(" ")),t.classList.add(...i.split(" "))},ending(){t.classList.remove(...r.split(" "))}})}async function dge(t,e={}){let{transitionClasses:r,fromClasses:n,toClasses:i,toggleClass:o}=pge("Leave",t,e);return mge(t,{firstFrame(){t.classList.add(...n.split(" ")),t.classList.remove(...i.split(" ")),t.classList.add(...r.split(" "))},secondFrame(){t.classList.remove(...n.split(" ")),t.classList.add(...i.split(" "))},ending(){t.classList.remove(...r.split(" ")),t.classList.add(...o.split(" "))}})}function pge(t,e,r){return{transitionClasses:e.dataset[`transition${t}`]||r[t.toLowerCase()]||t.toLowerCase(),fromClasses:e.dataset[`transition${t}From`]||r[`${t.toLowerCase()}From`]||`${t.toLowerCase()}-from`,toClasses:e.dataset[`transition${t}To`]||r[`${t.toLowerCase()}To`]||`${t.toLowerCase()}-to`,toggleClass:e.dataset.toggleClass||r.toggleClass||r.toggle||"hidden"}}function nvt(t){t._stimulus_transition={timeout:null,interrupted:!1}}function ivt(t){t._stimulus_transition&&t._stimulus_transition.interrupt&&t._stimulus_transition.interrupt()}function mge(t,e){t._stimulus_transition&&ivt(t);let r,n,i;return nvt(t),t._stimulus_transition.cleanup=()=>{n||e.firstFrame(),i||e.secondFrame(),e.ending(),t._stimulus_transition=null},t._stimulus_transition.interrupt=()=>{r=!0,t._stimulus_transition.timeout&&clearTimeout(t._stimulus_transition.timeout),t._stimulus_transition.cleanup()},new Promise(o=>{r||requestAnimationFrame(()=>{r||(e.firstFrame(),n=!0,requestAnimationFrame(()=>{r||(e.secondFrame(),i=!0,t._stimulus_transition&&(t._stimulus_transition.timeout=setTimeout(()=>{if(r){o();return}t._stimulus_transition.cleanup(),o()},ovt(t))))}))})})}function ovt(t){let e=Number(getComputedStyle(t).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,r=Number(getComputedStyle(t).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;return e===0&&(e=Number(getComputedStyle(t).animationDuration.replace("s",""))*1e3),e+r}var u6=class extends Lr{connect(){setTimeout(()=>{hge(this.element)},this.showDelayValue),this.hasDismissAfterValue&&setTimeout(()=>{this.close()},this.dismissAfterValue)}close(){dge(this.element).then(()=>{this.element.remove()})}};kl(u6,"values",{dismissAfter:Number,showDelay:{type:Number,default:0}});var sge=class extends Lr{connect(){this.timeout=null}save(){clearTimeout(this.timeout),this.timeout=setTimeout(()=>{this.statusTarget.textContent=this.submittingTextValue,this.formTarget.requestSubmit()},this.submitDurationValue)}success(){this.setStatus(this.successTextValue)}error(){this.setStatus(this.errorTextValue)}setStatus(t){this.statusTarget.textContent=t,this.timeout=setTimeout(()=>{this.statusTarget.textContent=""},this.statusDurationValue)}};kl(sge,"targets",["form","status"]),kl(sge,"values",{submitDuration:{type:Number,default:1e3},statusDuration:{type:Number,default:2e3},submittingText:{type:String,default:"Saving..."},successText:{type:String,default:"Saved!"},errorText:{type:String,default:"Unable to save."}});var lge=class extends Lr{update(){this.preview=this.colorTarget.value}set preview(t){this.previewTarget.style[this.styleValue]=t;let e=this._getContrastYIQ(t);this.styleValue==="color"?this.previewTarget.style.backgroundColor=e:this.previewTarget.style.color=e}_getContrastYIQ(t){t=t.replace("#","");let e=128,r=parseInt(t.substr(0,2),16),n=parseInt(t.substr(2,2),16),i=parseInt(t.substr(4,2),16);return(r*299+n*587+i*114)/1e3>=e?"#000":"#fff"}};kl(lge,"targets",["preview","color"]),kl(lge,"values",{style:{type:String,default:"backgroundColor"}});var a6=class extends Lr{connect(){this.boundBeforeCache=this.beforeCache.bind(this),document.addEventListener("turbo:before-cache",this.boundBeforeCache)}disconnect(){document.removeEventListener("turbo:before-cache",this.boundBeforeCache)}openValueChanged(){l6(this.menuTarget,this.openValue,this.transitionOptions),this.openValue===!0&&this.hasMenuItemTarget&&this.menuItemTargets[0].focus()}show(){this.openValue=!0}close(){this.openValue=!1}hide(t){this.closeOnClickOutsideValue&&t.target.nodeType&&this.element.contains(t.target)===!1&&this.openValue&&(this.openValue=!1),this.closeOnEscapeValue&&t.key==="Escape"&&this.openValue&&(this.openValue=!1)}toggle(){this.openValue=!this.openValue}nextItem(t){t.preventDefault(),this.menuItemTargets[this.nextIndex].focus()}previousItem(t){t.preventDefault(),this.menuItemTargets[this.previousIndex].focus()}get currentItemIndex(){return this.menuItemTargets.indexOf(document.activeElement)}get nextIndex(){return Math.min(this.currentItemIndex+1,this.menuItemTargets.length-1)}get previousIndex(){return Math.max(this.currentItemIndex-1,0)}get transitionOptions(){return{enter:this.hasEnterClass?this.enterClasses.join(" "):"transition ease-out duration-100",enterFrom:this.hasEnterFromClass?this.enterFromClasses.join(" "):"transform opacity-0 scale-95",enterTo:this.hasEnterToClass?this.enterToClasses.join(" "):"transform opacity-100 scale-100",leave:this.hasLeaveClass?this.leaveClasses.join(" "):"transition ease-in duration-75",leaveFrom:this.hasLeaveFromClass?this.leaveFromClasses.join(" "):"transform opacity-100 scale-100",leaveTo:this.hasLeaveToClass?this.leaveToClasses.join(" "):"transform opacity-0 scale-95",toggleClass:this.hasToggleClass?this.toggleClasses.join(" "):"hidden"}}beforeCache(){this.openValue=!1,this.menuTarget.classList.add(this.transitionOptions.toggleClass)}};kl(a6,"targets",["menu","button","menuItem"]),kl(a6,"values",{open:{type:Boolean,default:!1},closeOnEscape:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0}}),kl(a6,"classes",["enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","toggle"]);var uge=class extends Lr{connect(){this.openValue&&this.open(),this.boundBeforeCache=this.beforeCache.bind(this),document.addEventListener("turbo:before-cache",this.boundBeforeCache)}disconnect(){document.removeEventListener("turbo:before-cache",this.boundBeforeCache)}open(){this.dialogTarget.showModal()}close(){this.dialogTarget.setAttribute("closing",""),Promise.all(this.dialogTarget.getAnimations().map(t=>t.finished)).then(()=>{this.dialogTarget.removeAttribute("closing"),this.dialogTarget.close()})}backdropClose(t){t.target.nodeName=="DIALOG"&&this.close()}show(){this.dialogTarget.show()}hide(){this.close()}beforeCache(){this.close()}};kl(uge,"targets",["dialog"]),kl(uge,"values",{open:Boolean});var WD=class extends Lr{openValueChanged(){l6(this.contentTarget,this.openValue),this.shouldAutoDismiss&&this.scheduleDismissal()}show(t){this.shouldAutoDismiss&&this.scheduleDismissal(),this.openValue=!0}hide(){this.openValue=!1}toggle(){this.openValue=!this.openValue}get shouldAutoDismiss(){return this.openValue&&this.hasDismissAfterValue}scheduleDismissal(){this.hasDismissAfterValue&&(this.cancelDismissal(),this.timeoutId=setTimeout(()=>{this.hide(),this.timeoutId=void 0},this.dismissAfterValue))}cancelDismissal(){typeof this.timeoutId=="number"&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)}};kl(WD,"targets",["content"]),kl(WD,"values",{dismissAfter:Number,open:{type:Boolean,default:!1}});var cge=class extends Lr{connect(){this.openValue&&this.open(),this.boundBeforeCache=this.beforeCache,document.addEventListener("turbo:before-cache",this.boundBeforeCache)}disconnect(){document.removeEventListener("turbo:before-cache",this.boundBeforeCache)}open(){this.dialogTarget.showModal()}close(){this.dialogTarget.setAttribute("closing",""),Promise.all(this.dialogTarget.getAnimations().map(t=>t.finished)).then(()=>{this.dialogTarget.removeAttribute("closing"),this.dialogTarget.close()})}backdropClose(t){t.target.nodeName=="DIALOG"&&this.close()}show(){this.open()}hide(){this.close()}beforeCache(){this.close()}};kl(cge,"targets",["dialog"]),kl(cge,"values",{open:Boolean});var s6=class extends Lr{initialize(){this.updateAnchorValue&&this.anchor&&(this.indexValue=this.tabTargets.findIndex(t=>t.id===this.anchor))}connect(){this.showTab()}change(t){t.currentTarget.tagName==="SELECT"?this.indexValue=t.currentTarget.selectedIndex:t.currentTarget.dataset.index?this.indexValue=t.currentTarget.dataset.index:t.currentTarget.dataset.id?this.indexValue=this.tabTargets.findIndex(e=>e.id==t.currentTarget.dataset.id):this.indexValue=this.tabTargets.indexOf(t.currentTarget)}nextTab(){this.indexValue=Math.min(this.indexValue+1,this.tabsCount-1)}previousTab(){this.indexValue=Math.max(this.indexValue-1,0)}firstTab(){this.indexValue=0}lastTab(){this.indexValue=this.tabsCount-1}indexValueChanged(){if(this.showTab(),this.dispatch("tab-change",{target:this.tabTargets[this.indexValue],detail:{activeIndex:this.indexValue}}),this.updateAnchorValue){let t=this.tabTargets[this.indexValue].id;if(this.scrollToAnchorValue)location.hash=t;else{let e=window.location.href.split("#")[0]+"#"+t;typeof Turbo<"u"?Turbo.navigator.history.replace(new URL(e)):history.replaceState({},document.title,e)}}}showTab(){this.panelTargets.forEach((t,e)=>{let r=this.tabTargets[e];e===this.indexValue?(t.classList.remove("hidden"),r.ariaSelected="true",r.dataset.active=!0,this.hasInactiveTabClass&&r?.classList?.remove(...this.inactiveTabClasses),this.hasActiveTabClass&&r?.classList?.add(...this.activeTabClasses)):(t.classList.add("hidden"),r.ariaSelected=null,delete r.dataset.active,this.hasActiveTabClass&&r?.classList?.remove(...this.activeTabClasses),this.hasInactiveTabClass&&r?.classList?.add(...this.inactiveTabClasses))}),this.hasSelectTarget&&(this.selectTarget.selectedIndex=this.indexValue),this.scrollActiveTabIntoViewValue&&this.scrollToActiveTab()}scrollToActiveTab(){let t=this.element.querySelector("[aria-selected]");t&&t.scrollIntoView({inline:"center"})}get tabsCount(){return this.tabTargets.length}get anchor(){return document.URL.split("#").length>1?document.URL.split("#")[1]:null}};kl(s6,"classes",["activeTab","inactiveTab"]),kl(s6,"targets",["tab","panel","select"]),kl(s6,"values",{index:0,updateAnchor:Boolean,scrollToAnchor:Boolean,scrollActiveTabIntoView:Boolean});var fge=class extends Lr{toggle(t){this.openValue=!this.openValue,this.animate()}toggleInput(t){this.openValue=t.target.checked,this.animate()}hide(){this.openValue=!1,this.animate()}show(){this.openValue=!0,this.animate()}animate(){this.toggleableTargets.forEach(t=>{l6(t,this.openValue)})}};kl(fge,"targets",["toggleable"]),kl(fge,"values",{open:{type:Boolean,default:!1}});var gge=11;function avt(t,e){var r=e.attributes,n,i,o,s,u;if(!(e.nodeType===gge||t.nodeType===gge)){for(var h=r.length-1;h>=0;h--)n=r[h],i=n.name,o=n.namespaceURI,s=n.value,o?(i=n.localName||i,u=t.getAttributeNS(o,i),u!==s&&(n.prefix==="xmlns"&&(i=n.name),t.setAttributeNS(o,i,s))):(u=t.getAttribute(i),u!==s&&t.setAttribute(i,s));for(var y=t.attributes,w=y.length-1;w>=0;w--)n=y[w],i=n.name,o=n.namespaceURI,o?(i=n.localName||i,e.hasAttributeNS(o,i)||t.removeAttributeNS(o,i)):e.hasAttribute(i)||t.removeAttribute(i)}}var $D,svt="http://www.w3.org/1999/xhtml",Zc=typeof document>"u"?void 0:document,lvt=!!Zc&&"content"in Zc.createElement("template"),uvt=!!Zc&&Zc.createRange&&"createContextualFragment"in Zc.createRange();function cvt(t){var e=Zc.createElement("template");return e.innerHTML=t,e.content.childNodes[0]}function fvt(t){$D||($D=Zc.createRange(),$D.selectNode(Zc.body));var e=$D.createContextualFragment(t);return e.childNodes[0]}function hvt(t){var e=Zc.createElement("body");return e.innerHTML=t,e.childNodes[0]}function dvt(t){return t=t.trim(),lvt?cvt(t):uvt?fvt(t):hvt(t)}function GD(t,e){var r=t.nodeName,n=e.nodeName,i,o;return r===n?!0:(i=r.charCodeAt(0),o=n.charCodeAt(0),i<=90&&o>=97?r===n.toUpperCase():o<=90&&i>=97?n===r.toUpperCase():!1)}function pvt(t,e){return!e||e===svt?Zc.createElement(t):Zc.createElementNS(e,t)}function mvt(t,e){for(var r=t.firstChild;r;){var n=r.nextSibling;e.appendChild(r),r=n}return e}function c6(t,e,r){t[r]!==e[r]&&(t[r]=e[r],t[r]?t.setAttribute(r,""):t.removeAttribute(r))}var vge={OPTION:function(t,e){var r=t.parentNode;if(r){var n=r.nodeName.toUpperCase();n==="OPTGROUP"&&(r=r.parentNode,n=r&&r.nodeName.toUpperCase()),n==="SELECT"&&!r.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),r.selectedIndex=-1)}c6(t,e,"selected")},INPUT:function(t,e){c6(t,e,"checked"),c6(t,e,"disabled"),t.value!==e.value&&(t.value=e.value),e.hasAttribute("value")||t.removeAttribute("value")},TEXTAREA:function(t,e){var r=e.value;t.value!==r&&(t.value=r);var n=t.firstChild;if(n){var i=n.nodeValue;if(i==r||!r&&i==t.placeholder)return;n.nodeValue=r}},SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var r=-1,n=0,i=t.firstChild,o,s;i;)if(s=i.nodeName&&i.nodeName.toUpperCase(),s==="OPTGROUP")o=i,i=o.firstChild;else{if(s==="OPTION"){if(i.hasAttribute("selected")){r=n;break}n++}i=i.nextSibling,!i&&o&&(i=o.nextSibling,o=null)}t.selectedIndex=r}}},KE=1,yge=11,bge=3,_ge=8;function Xv(){}function gvt(t){if(t)return t.getAttribute&&t.getAttribute("id")||t.id}function vvt(t){return function(r,n,i){if(i||(i={}),typeof n=="string")if(r.nodeName==="#document"||r.nodeName==="HTML"||r.nodeName==="BODY"){var o=n;n=Zc.createElement("html"),n.innerHTML=o}else n=dvt(n);else n.nodeType===yge&&(n=n.firstElementChild);var s=i.getNodeKey||gvt,u=i.onBeforeNodeAdded||Xv,h=i.onNodeAdded||Xv,y=i.onBeforeElUpdated||Xv,w=i.onElUpdated||Xv,T=i.onBeforeNodeDiscarded||Xv,I=i.onNodeDiscarded||Xv,P=i.onBeforeElChildrenUpdated||Xv,L=i.skipFromChildren||Xv,R=i.addChild||function(de,we){return de.appendChild(we)},W=i.childrenOnly===!0,G=Object.create(null),q=[];function V(de){q.push(de)}function p(de,we){if(de.nodeType===KE)for(var Ue=de.firstChild;Ue;){var ye=void 0;we&&(ye=s(Ue))?V(ye):(I(Ue),Ue.firstChild&&p(Ue,we)),Ue=Ue.nextSibling}}function K(de,we,Ue){T(de)!==!1&&(we&&we.removeChild(de),I(de),p(de,Ue))}function j(de){if(de.nodeType===KE||de.nodeType===yge)for(var we=de.firstChild;we;){var Ue=s(we);Ue&&(G[Ue]=we),j(we),we=we.nextSibling}}j(r);function Q(de){h(de);for(var we=de.firstChild;we;){var Ue=we.nextSibling,ye=s(we);if(ye){var ne=G[ye];ne&&GD(we,ne)?(we.parentNode.replaceChild(ne,we),se(ne,we)):Q(we)}else Q(we);we=Ue}}function ee(de,we,Ue){for(;we;){var ye=we.nextSibling;(Ue=s(we))?V(Ue):K(we,de,!0),we=ye}}function se(de,we,Ue){var ye=s(we);ye&&delete G[ye],!(!Ue&&(y(de,we)===!1||(t(de,we),w(de),P(de,we)===!1)))&&(de.nodeName!=="TEXTAREA"?me(de,we):vge.TEXTAREA(de,we))}function me(de,we){var Ue=L(de),ye=we.firstChild,ne=de.firstChild,st,dt,lt,kt,ut;e:for(;ye;){for(kt=ye.nextSibling,st=s(ye);!Ue&&ne;){if(lt=ne.nextSibling,ye.isSameNode&&ye.isSameNode(ne)){ye=kt,ne=lt;continue e}dt=s(ne);var Ut=ne.nodeType,Wt=void 0;if(Ut===ye.nodeType&&(Ut===KE?(st?st!==dt&&((ut=G[st])?lt===ut?Wt=!1:(de.insertBefore(ut,ne),dt?V(dt):K(ne,de,!0),ne=ut):Wt=!1):dt&&(Wt=!1),Wt=Wt!==!1&&GD(ne,ye),Wt&&se(ne,ye)):(Ut===bge||Ut==_ge)&&(Wt=!0,ne.nodeValue!==ye.nodeValue&&(ne.nodeValue=ye.nodeValue))),Wt){ye=kt,ne=lt;continue e}dt?V(dt):K(ne,de,!0),ne=lt}if(st&&(ut=G[st])&&GD(ut,ye))R(de,ut),se(ut,ye);else{var Ht=u(ye);Ht!==!1&&(Ht&&(ye=Ht),ye.actualize&&(ye=ye.actualize(de.ownerDocument||Zc)),R(de,ye),Q(ye))}ye=kt,ne=lt}ee(de,ne,dt);var pr=vge[de.nodeName];pr&&pr(de,we)}var ve=r,U=ve.nodeType,$=n.nodeType;if(!W){if(U===KE)$===KE?GD(r,n)||(I(r),ve=mvt(r,pvt(n.nodeName,n.namespaceURI))):ve=n;else if(U===bge||U===_ge){if($===U)return ve.nodeValue!==n.nodeValue&&(ve.nodeValue=n.nodeValue),ve;ve=n}}if(ve===n)I(r);else{if(n.isSameNode&&n.isSameNode(ve))return;if(se(ve,n,W),q)for(var he=0,Ce=q.length;he<Ce;he++){var Se=G[q[he]];Se&&K(Se,Se.parentNode,!1)}}return!W&&ve!==r&&r.parentNode&&(ve.actualize&&(ve=ve.actualize(r.ownerDocument||Zc)),r.parentNode.replaceChild(ve,r)),ve}}var yvt=vvt(avt);function bvt(){let t={childrenOnly:this.hasAttribute("children-only")};this.targetElements.forEach(e=>{yvt(e,t.childrenOnly?this.templateContent:this.templateElement.innerHTML,t)})}var _vt=t=>{t.morph=bvt};function h6(t){return t.replace(/(?:[_-])([a-z0-9])/g,(e,r)=>r.toUpperCase())}function xvt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function wvt(t){return t.replace(/([A-Z])/g,(e,r)=>`-${r.toLowerCase()}`)}function KD(t){return t?t.match(/[^\s]+/g)||[]:[]}function d6(t){try{return JSON.parse(t)}catch{return t}}var Svt=Object.freeze({__proto__:null,camelize:h6,capitalize:xvt,dasherize:wvt,tokenize:KD,typecast:d6});function wge(){let t=KD(this.getAttribute("classes"));t.length>0?this.targetElements.forEach(e=>e.classList.add(...t)):console.warn('[TurboPower] no "classes" provided for Turbo Streams operation "add_css_class"')}function Sge(){let t=this.getAttribute("attribute");t?this.targetElements.forEach(e=>e.removeAttribute(t)):console.warn('[TurboPower] no "attribute" provided for Turbo Streams operation "remove_attribute"')}function Ege(){let t=KD(this.getAttribute("classes"));t.length>0?this.targetElements.forEach(e=>e.classList.remove(...t)):console.warn('[TurboPower] no "classes" provided for Turbo Streams operation "remove_css_class"')}function Tge(){let t=this.getAttribute("attribute"),e=this.getAttribute("value")||"";t?this.targetElements.forEach(r=>r.setAttribute(t,e)):console.warn('[TurboPower] no "attribute" provided for Turbo Streams operation "set_attribute"')}function Age(){let t=this.getAttribute("attribute"),e=this.getAttribute("force");if(!t){console.warn('[TurboPower] no "attribute" provided for Turbo Streams operation "toggle_attribute"');return}let r=e===null?void 0:e.toLowerCase()==="true";this.targetElements.forEach(n=>{n.toggleAttribute(t,r)})}function kge(){let t=this.getAttribute("attribute"),e=this.getAttribute("value")||"";t?this.targetElements.forEach(r=>r.dataset[h6(t)]=e):console.warn('[TurboPower] no "attribute" provided for Turbo Streams operation "set_dataset_attribute"')}function Cge(){let t=this.getAttribute("name"),e=d6(this.getAttribute("value")||"");t?this.targetElements.forEach(r=>r[t]=e):console.error('[TurboPower] no "name" provided for Turbo Streams operation "set_property"')}function Ige(){let t=this.getAttribute("name"),e=this.getAttribute("value")||"";t?this.targetElements.forEach(r=>r.style[t]=e):console.error('[TurboPower] no "name" provided for Turbo Streams operation "set_style"')}function Dge(){let t=this.getAttribute("styles")||"";this.targetElements.forEach(e=>e.setAttribute("style",t))}function Oge(){let t=this.getAttribute("value")||"";this.targetElements.forEach(e=>e.value=t)}function Pge(){let t=KD(this.getAttribute("classes"));t.length>0?this.targetElements.forEach(e=>{t.forEach(r=>e.classList.toggle(r))}):console.warn('[TurboPower] no "classes" provided for Turbo Streams operation "toggle_css_class"')}function Mge(){let t=this.getAttribute("from")||"",e=this.getAttribute("to")||"";t&&e?this.targetElements.forEach(r=>{r.classList.replace(t,e)||console.warn(`[TurboPower] The "${t}" CSS class provided in the "from" attribute for the "replace_css_class" action was not found on the target element. No replacements made.`,r)}):console.warn('[TurboPower] no "from" or "to" class provided for Turbo Streams operation "replace_css_class"')}function Lge(t){t.add_css_class=wge,t.remove_css_class=Ege,t.remove_attribute=Sge,t.set_attribute=Tge,t.toggle_attribute=Age,t.set_dataset_attribute=kge,t.set_property=Cge,t.set_style=Ige,t.set_styles=Dge,t.set_value=Oge,t.toggle_css_class=Pge,t.replace_css_class=Mge}function Rge(){window.location.reload()}function Fge(){let t=this.getAttribute("align-to-top"),e=this.getAttribute("block"),r=this.getAttribute("inline"),n=this.getAttribute("behavior");if(t)this.targetElements.forEach(i=>i.scrollIntoView(t==="true"));else if(e||r||n){let i={};e&&(i.block=e),r&&(i.inline=r),n&&(i.behavior=n),this.targetElements.forEach(o=>o.scrollIntoView(i))}else this.targetElements.forEach(i=>i.scrollIntoView())}function qge(){this.targetElements.forEach(t=>t.focus())}function Nge(){let t=this.getAttribute("title")||"",e=document.head.querySelector("title");e||(e=document.createElement("title"),document.head.appendChild(e)),e.textContent=t}function Bge(t){t.reload=Rge,t.scroll_into_view=Fge,t.set_focus=qge,t.set_title=Nge}function zge(){let t=this.getAttribute("message"),e=this.getAttribute("level")||"log";console[e](t)}function jge(){let t=JSON.parse(this.getAttribute("data")||"[]"),e=JSON.parse(this.getAttribute("columns")||"[]");console.table(t,e)}function Uge(t){t.console_log=zge,t.console_table=jge}function Vge(){console.warn("[TurboPower] The `invoke` Turbo Stream Action was removed from TurboPower. If you'd like to continue using this action please use the successor library instead. Read more here: https://github.com/hopsoft/turbo_boost-streams")}function Hge(t){t.invoke||(t.invoke=Vge)}var f6=class{constructor(e){this.ATTRIBUTE_TO_COOKIE_KEY_MAPPING=[["domain","Domain",!1],["path","Path",!1],["expires","Expires",!1],["max-age","Max-Age",!1],["http-only","HttpOnly",!0],["secure","Secure",!0],["same-site","SameSite",!1]],this.streamElement=e}build(){let e=`${this.streamElement.getAttribute("name")}=${this.streamElement.getAttribute("value")}`;return this.ATTRIBUTE_TO_COOKIE_KEY_MAPPING.forEach(([r,n,i])=>{let o=this.streamElement.getAttribute(r);if(o!==null){let s=i?n:`${n}=${o}`;e=`${e}; ${s}`}}),e}};function Wge(){let t=this.getAttribute("cookie")||"";document.cookie=t}function $ge(){let t=new f6(this);document.cookie=t.build()}function Gge(t){t.set_cookie=Wge,t.set_cookie_item=$ge}function Kge(){let t=this.getAttribute("parent");if(t){let e=document.querySelector(t);e?this.targetElements.forEach(r=>e.appendChild(r)):console.error(`[TurboPower] couldn't find parent element using selector "${t}" for Turbo Streams operation "graft"`)}else console.error('[TurboPower] no "parent" selector provided for Turbo Streams operation "graft"')}function Zge(){let t=this.templateContent.textContent||"";this.targetElements.forEach(e=>e.innerHTML=t)}function Yge(){let t=this.getAttribute("position")||"beforebegin",e=this.templateContent.textContent||"";this.targetElements.forEach(r=>r.insertAdjacentHTML(t,e))}function Xge(){let t=this.getAttribute("position")||"beforebegin",e=this.getAttribute("text")||"";this.targetElements.forEach(r=>r.insertAdjacentText(t,e))}function Jge(){let t=this.templateContent.textContent||"";this.targetElements.forEach(e=>e.outerHTML=t)}function Qge(){let t=this.getAttribute("name"),e=this.getAttribute("content")||"";if(t){let r=document.head.querySelector(`meta[name='${t}']`);r||(r=document.createElement("meta"),r.name=t,document.head.appendChild(r)),r.content=e}else console.error('[TurboPower] no "name" provided for Turbo Streams operation "set_meta"')}function eve(){let t=this.getAttribute("text")||"";this.targetElements.forEach(e=>e.textContent=t)}function tve(t){t.graft=Kge,t.inner_html=Zge,t.insert_adjacent_html=Yge,t.insert_adjacent_text=Xge,t.outer_html=Jge,t.text_content=eve,t.set_meta=Qge}function rve(){let t=this.getAttribute("name"),e=null;try{e=this.templateContent.textContent}catch{}try{let r=e?JSON.parse(e):{};if(t){let n={bubbles:!0,cancelable:!0,detail:r},i=new CustomEvent(t,n);this.targetElements.forEach(o=>o.dispatchEvent(i))}else console.warn('[TurboPower] no "name" provided for Turbo Streams operation "dispatch_event"')}catch(r){console.error(`[TurboPower] error proccessing provided "detail" in "<template>" ("${e}") for Turbo Streams operation "dispatch_event".`,`Error: "${r.message}"`)}}function nve(t){t.dispatch_event=rve}function ive(){this.targetElements.forEach(t=>t.reset())}function ove(t){t.reset_form=ive}function ave(){let t=this.getAttribute("url"),e=this.getAttribute("state"),r=this.getAttribute("title")||"";window.history.pushState(e,r,t)}function sve(){let t=this.getAttribute("url"),e=this.getAttribute("state"),r=this.getAttribute("title")||"";window.history.replaceState(e,r,t)}function lve(){window.history.back()}function Evt(){window.history.forward()}function uve(){let t=Number(this.getAttribute("delta"))||0;window.history.go(t)}function cve(t){t.push_state=ave,t.replace_state=sve,t.history_back=lve,t.history_go=uve}var Tvt=["dir","lang","badge","body","tag","icon","image","data","vibrate","renotify","require-interaction","actions","silent"],xge=t=>{let e=t.getAttribute("title")||"",r=Array.from(t.attributes).filter(i=>Tvt.includes(i.name)).map(i=>[h6(i.name),d6(i.value)]),n=Object.fromEntries(r);new Notification(e,n)};function fve(){window.Notification?Notification.permission==="granted"?xge(this):Notification.permission!=="denied"&&Notification.requestPermission().then(t=>{t==="granted"&&xge(this)}):alert("This browser does not support desktop notification")}function hve(t){t.notification=fve}function p6(t){return t==="session"?window.sessionStorage:window.localStorage}function dve(){let t=this.getAttribute("type");p6(t).clear()}function pve(){let t=this.getAttribute("key"),e=this.getAttribute("value")||"",r=this.getAttribute("type");t?p6(r).setItem(t,e):console.warn('[TurboPower] no "key" provided for Turbo Streams operation "set_storage_item"')}function mve(){let t=this.getAttribute("key"),e=this.getAttribute("type");t?p6(e).removeItem(t):console.warn('[TurboPower] no "key" provided for Turbo Streams operation "remove_storage_item"')}function gve(t){t.clear_storage=dve,t.set_storage_item=pve,t.remove_storage_item=mve}var Avt={get location(){return window.TurboPowerLocation||window.location}};function vve(){let t=this.getAttribute("url")||"/",e=this.getAttribute("turbo-action")||"advance",r=this.getAttribute("turbo-frame"),n=this.getAttribute("turbo")!=="false",i={action:e};r&&(i.frame=r),n&&window.Turbo?window.Turbo.visit(t,i):Avt.location.assign(t)}function yve(){window.Turbo.cache.clear()}function bve(t){t.redirect_to=vve,t.turbo_clear_cache=yve}function _ve(){let t=this.getAttribute("value")||0;window.Turbo.navigator.adapter.progressBar.setValue(Number(t))}function xve(){window.Turbo.navigator.adapter.progressBar.show()}function wve(){window.Turbo.navigator.adapter.progressBar.hide()}function Sve(t){t.turbo_progress_bar_set_value=_ve,t.turbo_progress_bar_show=xve,t.turbo_progress_bar_hide=wve}function Eve(){this.targetElements.forEach(t=>t.reload())}function Tve(){let t=this.getAttribute("src");this.targetElements.forEach(e=>e.src=t)}function Ave(t){t.turbo_frame_reload=Eve,t.turbo_frame_set_src=Tve}function kve(t){Lge(t),Bge(t),Uge(t),Hge(t),Gge(t),tve(t),nve(t),ove(t),cve(t),hve(t),gve(t),bve(t),Sve(t),Ave(t)}var kvt=Object.freeze({__proto__:null,add_css_class:wge,clear_storage:dve,console_log:zge,console_table:jge,dispatch_event:rve,graft:Kge,history_back:lve,history_forward:Evt,history_go:uve,inner_html:Zge,insert_adjacent_html:Yge,insert_adjacent_text:Xge,invoke:Vge,notification:fve,outer_html:Jge,push_state:ave,redirect_to:vve,register:kve,registerAttributesActions:Lge,registerBrowserActions:Bge,registerDOMActions:tve,registerDebugActions:Uge,registerDeprecatedActions:Hge,registerDocumentActions:Gge,registerEventsActions:nve,registerFormActions:ove,registerHistoryActions:cve,registerNotificationActions:hve,registerStorageActions:gve,registerTurboActions:bve,registerTurboFrameActions:Ave,registerTurboProgressBarActions:Sve,reload:Rge,remove_attribute:Sge,remove_css_class:Ege,remove_storage_item:mve,replace_css_class:Mge,replace_state:sve,reset_form:ive,scroll_into_view:Fge,set_attribute:Tge,set_cookie:Wge,set_cookie_item:$ge,set_dataset_attribute:kge,set_focus:qge,set_meta:Qge,set_property:Cge,set_storage_item:pve,set_style:Ige,set_styles:Dge,set_title:Nge,set_value:Oge,text_content:eve,toggle_attribute:Age,toggle_css_class:Pge,turbo_clear_cache:yve,turbo_frame_reload:Eve,turbo_frame_set_src:Tve,turbo_progress_bar_hide:wve,turbo_progress_bar_set_value:_ve,turbo_progress_bar_show:xve});function Cvt(t){_vt(t),kve(t)}function Ivt(t,e,r){r[t]=e}var Cve={initialize:Cvt,register:Ivt,Actions:kvt,Utils:Svt};Cve.initialize(Turbo.StreamActions);var wi=VD.start();wi.debug=window?.localStorage.getItem("jav.debug");window.Stimulus=wi;wi.register("alert",u6);wi.register("popover",WD);var hc=t=>t=="true";var ZD=class extends Lr{static targets=["controllerDiv","resourceIds","submit","selectedAllQuery"];connect(){this.resourceIdsTarget.value=this.resourceIds,this.selectionOptions.itemSelectAllSelectedAllValue==="true"&&(this.selectedAllQueryTarget.value=this.selectionOptions.itemSelectAllSelectedAllQueryValue),this.noConfirmation?this.submitTarget.click():this.controllerDivTarget.classList.remove("hidden")}get noConfirmation(){return hc(this.controllerDivTarget.dataset.noConfirmation)}get resourceName(){return this.controllerDivTarget.dataset.resourceName}get resourceIds(){try{return JSON.parse(this.selectionOptions.selectedResources)}catch{return[]}}get selectionOptions(){try{return document.querySelector(`[data-selected-resources-name="${this.resourceName}"]`).dataset}catch{return[]}}};var YD=class extends Lr{static targets=["resourceAction","standaloneAction"];static classes=["enabled","disabled"];target={};get targetIsDisabled(){return this.target.dataset.disabled==="true"}get actionsShowTurboFrame(){return document.querySelector("turbo-frame#actions_show")}enableTarget(){this.targetIsDisabled&&(this.target.classList.remove(...this.disabledClasses),this.target.classList.add(...this.enabledClasses),this.target.dataset.disabled=!1)}disableTarget(){this.target.classList.remove(...this.enabledClasses),this.target.classList.add(...this.disabledClasses),this.target.dataset.disabled=!0}visitAction(t){if(this.target=t.target,this.targetIsDisabled){t.preventDefault();return}this.disableTarget();let e=this;setTimeout(()=>{this.actionsShowTurboFrame.loaded.then(()=>e.enableTarget(e.target))},1)}};var XD=class extends Lr{static targets=["form"];connect(){this.formTarget.submit()}};var JD=class extends Lr{static targets=["select","type","loadAssociationLink"];defaults={};get selectedType(){return this.selectTarget.value}get isSearchable(){return this.context.scope.element.dataset.searchable==="true"}get association(){return this.context.scope.element.dataset.association}get associationClass(){return this.context.scope.element.dataset.associationClass}connect(){this.copyValidNames(),this.changeType()}changeType(){this.hideAllTypes(),this.showType(this.selectTarget.value)}hideAllTypes(){this.typeTargets.forEach(t=>{t.classList.add("hidden"),this.invalidateTarget(t)})}copyValidNames(){this.typeTargets.forEach(t=>{let{type:e}=t.dataset;if(this.isSearchable){let r=t.querySelector('input[type="text"]');r&&this.nameToValidName(r);let n=t.querySelector('input[type="hidden"]');n&&this.nameToValidName(n)}else{let r=t.querySelector("select");r&&this.nameToValidName(r);let n=t.querySelector('input[type="hidden"]');n&&this.nameToValidName(n),this.selectedType!==e&&(r.selectedIndex=0)}})}showType(t){let e=this.typeTargets.find(r=>r.dataset.type===t);e&&(e.classList.remove("hidden"),this.validateTarget(e))}validateTarget(t){if(this.isSearchable){let e=t.querySelector('input[type="text"]'),r=t.querySelector('input[type="hidden"]');this.validNameToName(e),this.validNameToName(r)}else{let e=t.querySelector("select"),r=t.querySelector('input[type="hidden"]');this.validNameToName(e),r&&this.validNameToName(r)}}invalidateTarget(t){if(this.isSearchable)try{t.querySelector('input[type="text"]').setAttribute("name",""),t.querySelector('input[type="hidden"]').setAttribute("name","")}catch{}else if(t)try{t.querySelector("select").setAttribute("name",""),t.querySelector('input[type="hidden"]').setAttribute("name","")}catch{}}validNameToName(t){t.setAttribute("name",t.getAttribute("valid-name"))}nameToValidName(t){t.setAttribute("valid-name",t.getAttribute("name"))}};var m6=ua(qx()),Gh=class extends Lr{static targets=["urlRedirect"];static values={keepFiltersPanelOpen:Boolean};uriParams(){return(0,m6.default)(window.location.toString()).query(!0)}viaResourceName(){return this.uriParams().via_resource_name}uriParam(t){return this.viaResourceName()?`${this.viaResourceName}_${t}`:t}b64EncodeUnicode(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(e,r)=>String.fromCharCode(`0x${r}`)))}b64DecodeUnicode(t){return decodeURIComponent(atob(t).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""))}changeFilter(){let t=this.getFilterValue(),e=this.getFilterClass(),r=this.uriParams()[this.uriParam("filters")];r?r=JSON.parse(this.b64DecodeUnicode(r)):r={},r[e]=t;let n=Object.keys(r).filter(o=>r[o]!==null).reduce((o,s)=>(o[s]=r[s],o),{}),i;n&&Object.keys(n).length>0&&(i=this.b64EncodeUnicode(JSON.stringify(n))),this.navigateToURLWithFilters(i)}navigateToURLWithFilters(t){let e=new m6.default(this.urlRedirectTarget.href),r={...e.query(!0)};this.keepFiltersPanelOpenValue&&(r.keep_filters_panel_open=this.keepFiltersPanelOpenValue?1:null),r.page=1,t?r.filters=t:delete r.filters,e.query(r),this.urlRedirectTarget.href=e,this.urlRedirectTarget.click()}};var rO=class extends Gh{static targets=["option"];getFilterValue(){let t={};return this.optionTargets.forEach(e=>{t[e.value]=e.checked}),t}getFilterClass(){let{filterClass:t}=this.optionTarget.dataset;return t}};var SVt=ua(Nx()),EVt=ua(jve()),TVt=ua(nO()),AVt=ua(ZE()),kVt=ua(iO()),CVt=ua(tye()),IVt=ua(sye()),DVt=ua(cye()),OVt=ua(b6()),PVt=ua(mye()),MVt=ua(yye()),LVt=ua(Nye()),RVt=ua(Bx()),FVt=ua(jye());var Uye=ua(io());var aO=class extends Lr{static targets=["element"];connect(){let t={readOnly:hc(this.elementTarget.dataset.readOnly),mode:this.elementTarget.dataset.language,theme:this.elementTarget.dataset.theme,tabSize:this.elementTarget.dataset.tabSize,indentWithTabs:hc(this.elementTarget.dataset.indentWithTabs),lineWrapping:hc(this.elementTarget.dataset.lineWrapping),lineNumbers:!0},e=this;setTimeout(()=>{Uye.default.fromTextArea(this.elementTarget,t).on("change",r=>{e.elementTarget.innerText=r.getValue(),e.elementTarget.dispatchEvent(new Event("input"))})},1)}};var sO=class extends Lr{copy(){let t=this.context.element.dataset.text,e=document.createElement("textarea"),r=e.contentEditable,n=e.readOnly;e.value=t,e.contentEditable=!0,e.readOnly=!1,e.setAttribute("readonly",!1),e.setAttribute("contenteditable",!0),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);let i=document.getSelection().rangeCount>0?document.getSelection().getRangeAt(0):!1;e.select(),e.setSelectionRange(0,999999),document.execCommand("copy"),document.body.removeChild(e),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i)),e.contentEditable=r,e.readOnly=n}};var lO=class extends Lr{static targets=["card"];interval;get parentTurboFrame(){return this.context.scope.element.closest("turbo-frame")}get refreshInterval(){if(this.cardTarget.dataset.refreshEvery)return parseInt(this.cardTarget.dataset.refreshEvery,10)*1e3}connect(){this.refreshInterval&&(this.interval=setInterval(()=>{this.parentTurboFrame.reload()},this.refreshInterval))}cardTargetDisconnected(){this.interval&&clearInterval(this.interval)}};var pg=class extends Error{},uO=class extends pg{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},cO=class extends pg{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},fO=class extends pg{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Bd=class extends pg{},zx=class extends pg{constructor(e){super(`Invalid unit ${e}`)}},Ps=class extends pg{},zd=class extends pg{constructor(){super("Zone is an abstract class")}};var Kr="numeric",jd="short",Kf="long",Jv={year:Kr,month:Kr,day:Kr},YE={year:Kr,month:jd,day:Kr},_6={year:Kr,month:jd,day:Kr,weekday:jd},XE={year:Kr,month:Kf,day:Kr},JE={year:Kr,month:Kf,day:Kr,weekday:Kf},QE={hour:Kr,minute:Kr},eT={hour:Kr,minute:Kr,second:Kr},tT={hour:Kr,minute:Kr,second:Kr,timeZoneName:jd},rT={hour:Kr,minute:Kr,second:Kr,timeZoneName:Kf},nT={hour:Kr,minute:Kr,hourCycle:"h23"},iT={hour:Kr,minute:Kr,second:Kr,hourCycle:"h23"},oT={hour:Kr,minute:Kr,second:Kr,hourCycle:"h23",timeZoneName:jd},aT={hour:Kr,minute:Kr,second:Kr,hourCycle:"h23",timeZoneName:Kf},sT={year:Kr,month:Kr,day:Kr,hour:Kr,minute:Kr},lT={year:Kr,month:Kr,day:Kr,hour:Kr,minute:Kr,second:Kr},uT={year:Kr,month:jd,day:Kr,hour:Kr,minute:Kr},cT={year:Kr,month:jd,day:Kr,hour:Kr,minute:Kr,second:Kr},x6={year:Kr,month:jd,day:Kr,weekday:jd,hour:Kr,minute:Kr},fT={year:Kr,month:Kf,day:Kr,hour:Kr,minute:Kr,timeZoneName:jd},hT={year:Kr,month:Kf,day:Kr,hour:Kr,minute:Kr,second:Kr,timeZoneName:jd},dT={year:Kr,month:Kf,day:Kr,weekday:Kf,hour:Kr,minute:Kr,timeZoneName:Kf},pT={year:Kr,month:Kf,day:Kr,weekday:Kf,hour:Kr,minute:Kr,second:Kr,timeZoneName:Kf};var Yc=class{get type(){throw new zd}get name(){throw new zd}get ianaName(){return this.name}get isUniversal(){throw new zd}offsetName(e,r){throw new zd}formatOffset(e,r){throw new zd}offset(e){throw new zd}equals(e){throw new zd}get isValid(){throw new zd}};var w6=null,Qv=class t extends Yc{static get instance(){return w6===null&&(w6=new t),w6}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return dO(e,r,n)}formatOffset(e,r){return ey(this.offset(e),r)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var mO={};function Dvt(t){return mO[t]||(mO[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),mO[t]}var Ovt={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function Pvt(t,e){let r=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,i,o,s,u,h,y,w]=n;return[s,i,o,u,h,y,w]}function Mvt(t,e){let r=t.formatToParts(e),n=[];for(let i=0;i<r.length;i++){let{type:o,value:s}=r[i],u=Ovt[o];o==="era"?n[u]=s:Nn(u)||(n[u]=parseInt(s,10))}return n}var pO={},qu=class t extends Yc{static create(e){return pO[e]||(pO[e]=new t(e)),pO[e]}static resetCache(){pO={},mO={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=t.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:r,locale:n}){return dO(e,r,n,this.name)}formatOffset(e,r){return ey(this.offset(e),r)}offset(e){let r=new Date(e);if(isNaN(r))return NaN;let n=Dvt(this.name),[i,o,s,u,h,y,w]=n.formatToParts?Mvt(n,r):Pvt(n,r);u==="BC"&&(i=-Math.abs(i)+1);let I=jx({year:i,month:o,day:s,hour:h===24?0:h,minute:y,second:w,millisecond:0}),P=+r,L=P%1e3;return P-=L>=0?L:1e3+L,(I-P)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var Vye={};function Lvt(t,e={}){let r=JSON.stringify([t,e]),n=Vye[r];return n||(n=new Intl.ListFormat(t,e),Vye[r]=n),n}var S6={};function E6(t,e={}){let r=JSON.stringify([t,e]),n=S6[r];return n||(n=new Intl.DateTimeFormat(t,e),S6[r]=n),n}var T6={};function Rvt(t,e={}){let r=JSON.stringify([t,e]),n=T6[r];return n||(n=new Intl.NumberFormat(t,e),T6[r]=n),n}var A6={};function Fvt(t,e={}){let{base:r,...n}=e,i=JSON.stringify([t,n]),o=A6[i];return o||(o=new Intl.RelativeTimeFormat(t,e),A6[i]=o),o}var mT=null;function qvt(){return mT||(mT=new Intl.DateTimeFormat().resolvedOptions().locale,mT)}var vO={};function Wye(t){return vO[t]||(vO[t]=new Intl.DateTimeFormat(t).resolvedOptions()),vO[t]}var Hye={};function Nvt(t){let e=Hye[t];if(!e){let r=new Intl.Locale(t);e="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,Hye[t]=e}return e}function Bvt(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let r=t.indexOf("-u-");if(r===-1)return[t];{let n,i;try{n=E6(t).resolvedOptions(),i=t}catch{let h=t.substring(0,r);n=E6(h).resolvedOptions(),i=h}let{numberingSystem:o,calendar:s}=n;return[i,o,s]}}function zvt(t,e,r){return(r||e)&&(t.includes("-u-")||(t+="-u"),r&&(t+=`-ca-${r}`),e&&(t+=`-nu-${e}`)),t}function jvt(t){let e=[];for(let r=1;r<=12;r++){let n=$i.utc(2009,r,1);e.push(t(n))}return e}function Uvt(t){let e=[];for(let r=1;r<=7;r++){let n=$i.utc(2016,11,13+r);e.push(t(n))}return e}function gO(t,e,r,n){let i=t.listingMode();return i==="error"?null:i==="en"?r(e):n(e)}function Vvt(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||Wye(t.locale).numberingSystem==="latn"}var k6=class{constructor(e,r,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;let{padTo:i,floor:o,...s}=n;if(!r||Object.keys(s).length>0){let u={useGrouping:!1,...n};n.padTo>0&&(u.minimumIntegerDigits=n.padTo),this.inf=Rvt(e,u)}}format(e){if(this.inf){let r=this.floor?Math.floor(e):e;return this.inf.format(r)}else{let r=this.floor?Math.floor(e):Ux(e,3);return vs(r,this.padTo)}}},C6=class{constructor(e,r,n){this.opts=n,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let s=-1*(e.offset/60),u=s>=0?`Etc/GMT+${s}`:`Etc/GMT${s}`;e.offset!==0&&qu.create(u).valid?(i=u,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let o={...this.opts};o.timeZone=o.timeZone||i,this.dtf=E6(r,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(r=>{if(r.type==="timeZoneName"){let n=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:n}}else return r}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},I6=class{constructor(e,r,n){this.opts={style:"long",...n},!r&&yO()&&(this.rtf=Fvt(e,n))}format(e,r){return this.rtf?this.rtf.format(e,r):$ye(r,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,r){return this.rtf?this.rtf.formatToParts(e,r):[]}},Hvt={firstDay:1,minimalDays:4,weekend:[6,7]},vo=class t{static fromOpts(e){return t.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,r,n,i,o=!1){let s=e||go.defaultLocale,u=s||(o?"en-US":qvt()),h=r||go.defaultNumberingSystem,y=n||go.defaultOutputCalendar,w=gT(i)||go.defaultWeekSettings;return new t(u,h,y,w,s)}static resetCache(){mT=null,S6={},T6={},A6={},vO={}}static fromObject({locale:e,numberingSystem:r,outputCalendar:n,weekSettings:i}={}){return t.create(e,r,n,i)}constructor(e,r,n,i,o){let[s,u,h]=Bvt(e);this.locale=s,this.numberingSystem=r||u||null,this.outputCalendar=n||h||null,this.weekSettings=i,this.intl=zvt(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=o,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=Vvt(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&r?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:t.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,gT(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,r=!1){return gO(this,e,D6,()=>{let n=r?{month:e,day:"numeric"}:{month:e},i=r?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=jvt(o=>this.extract(o,n,"month"))),this.monthsCache[i][e]})}weekdays(e,r=!1){return gO(this,e,O6,()=>{let n=r?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=r?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=Uvt(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return gO(this,void 0,()=>P6,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[$i.utc(2016,11,13,9),$i.utc(2016,11,13,19)].map(r=>this.extract(r,e,"dayperiod"))}return this.meridiemCache})}eras(e){return gO(this,e,M6,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[$i.utc(-40,1,1),$i.utc(2017,1,1)].map(n=>this.extract(n,r,"era"))),this.eraCache[e]})}extract(e,r,n){let i=this.dtFormatter(e,r),o=i.formatToParts(),s=o.find(u=>u.type.toLowerCase()===n);return s?s.value:null}numberFormatter(e={}){return new k6(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,r={}){return new C6(e,this.intl,r)}relFormatter(e={}){return new I6(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Lvt(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||Wye(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:bO()?Nvt(this.locale):Hvt}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}};var R6=null,Wl=class t extends Yc{static get utcInstance(){return R6===null&&(R6=new t(0)),R6}static instance(e){return e===0?t.utcInstance:new t(e)}static parseSpecifier(e){if(e){let r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(Vb(r[1],r[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${ey(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${ey(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,r){return ey(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var Vx=class extends Yc{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function Ud(t,e){let r;if(Nn(t)||t===null)return e;if(t instanceof Yc)return t;if(Gye(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Qv.instance:n==="utc"||n==="gmt"?Wl.utcInstance:Wl.parseSpecifier(n)||qu.create(t)}else return Vd(t)?Wl.instance(t):typeof t=="object"&&"offset"in t&&typeof t.offset=="function"?t:new Vx(t)}var F6={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Kye={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},Wvt=F6.hanidec.replace(/[\[|\]]/g,"").split("");function Zye(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let r=0;r<t.length;r++){let n=t.charCodeAt(r);if(t[r].search(F6.hanidec)!==-1)e+=Wvt.indexOf(t[r]);else for(let i in Kye){let[o,s]=Kye[i];n>=o&&n<=s&&(e+=n-o)}}return parseInt(e,10)}else return e}var Hx={};function Yye(){Hx={}}function Kh({numberingSystem:t},e=""){let r=t||"latn";return Hx[r]||(Hx[r]={}),Hx[r][e]||(Hx[r][e]=new RegExp(`${F6[r]}${e}`)),Hx[r][e]}var Xye=()=>Date.now(),Jye="system",Qye=null,ebe=null,tbe=null,rbe=60,nbe,ibe=null,go=class{static get now(){return Xye}static set now(e){Xye=e}static set defaultZone(e){Jye=e}static get defaultZone(){return Ud(Jye,Qv.instance)}static get defaultLocale(){return Qye}static set defaultLocale(e){Qye=e}static get defaultNumberingSystem(){return ebe}static set defaultNumberingSystem(e){ebe=e}static get defaultOutputCalendar(){return tbe}static set defaultOutputCalendar(e){tbe=e}static get defaultWeekSettings(){return ibe}static set defaultWeekSettings(e){ibe=gT(e)}static get twoDigitCutoffYear(){return rbe}static set twoDigitCutoffYear(e){rbe=e%100}static get throwOnInvalid(){return nbe}static set throwOnInvalid(e){nbe=e}static resetCaches(){vo.resetCache(),qu.resetCache(),$i.resetCache(),Yye()}};var $l=class{constructor(e,r){this.reason=e,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var obe=[0,31,59,90,120,151,181,212,243,273,304,334],abe=[0,31,60,91,121,152,182,213,244,274,305,335];function Zh(t,e){return new $l("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function _O(t,e,r){let n=new Date(Date.UTC(t,e-1,r));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);let i=n.getUTCDay();return i===0?7:i}function sbe(t,e,r){return r+(Wb(t)?abe:obe)[e-1]}function lbe(t,e){let r=Wb(t)?abe:obe,n=r.findIndex(o=>o<e),i=e-r[n];return{month:n+1,day:i}}function xO(t,e){return(t-e+7)%7+1}function vT(t,e=4,r=1){let{year:n,month:i,day:o}=t,s=sbe(n,i,o),u=xO(_O(n,i,o),r),h=Math.floor((s-u+14-e)/7),y;return h<1?(y=n-1,h=Hb(y,e,r)):h>Hb(n,e,r)?(y=n+1,h=1):y=n,{weekYear:y,weekNumber:h,weekday:u,...bT(t)}}function q6(t,e=4,r=1){let{weekYear:n,weekNumber:i,weekday:o}=t,s=xO(_O(n,1,e),r),u=ty(n),h=i*7+o-s-7+e,y;h<1?(y=n-1,h+=ty(y)):h>u?(y=n+1,h-=ty(n)):y=n;let{month:w,day:T}=lbe(y,h);return{year:y,month:w,day:T,...bT(t)}}function wO(t){let{year:e,month:r,day:n}=t,i=sbe(e,r,n);return{year:e,ordinal:i,...bT(t)}}function N6(t){let{year:e,ordinal:r}=t,{month:n,day:i}=lbe(e,r);return{year:e,month:n,day:i,...bT(t)}}function B6(t,e){if(!Nn(t.localWeekday)||!Nn(t.localWeekNumber)||!Nn(t.localWeekYear)){if(!Nn(t.weekday)||!Nn(t.weekNumber)||!Nn(t.weekYear))throw new Bd("Cannot mix locale-based week fields with ISO-based week fields");return Nn(t.localWeekday)||(t.weekday=t.localWeekday),Nn(t.localWeekNumber)||(t.weekNumber=t.localWeekNumber),Nn(t.localWeekYear)||(t.weekYear=t.localWeekYear),delete t.localWeekday,delete t.localWeekNumber,delete t.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ube(t,e=4,r=1){let n=yT(t.weekYear),i=Zf(t.weekNumber,1,Hb(t.weekYear,e,r)),o=Zf(t.weekday,1,7);return n?i?o?!1:Zh("weekday",t.weekday):Zh("week",t.weekNumber):Zh("weekYear",t.weekYear)}function cbe(t){let e=yT(t.year),r=Zf(t.ordinal,1,ty(t.year));return e?r?!1:Zh("ordinal",t.ordinal):Zh("year",t.year)}function z6(t){let e=yT(t.year),r=Zf(t.month,1,12),n=Zf(t.day,1,Wx(t.year,t.month));return e?r?n?!1:Zh("day",t.day):Zh("month",t.month):Zh("year",t.year)}function j6(t){let{hour:e,minute:r,second:n,millisecond:i}=t,o=Zf(e,0,23)||e===24&&r===0&&n===0&&i===0,s=Zf(r,0,59),u=Zf(n,0,59),h=Zf(i,0,999);return o?s?u?h?!1:Zh("millisecond",i):Zh("second",n):Zh("minute",r):Zh("hour",e)}function Nn(t){return typeof t>"u"}function Vd(t){return typeof t=="number"}function yT(t){return typeof t=="number"&&t%1===0}function Gye(t){return typeof t=="string"}function hbe(t){return Object.prototype.toString.call(t)==="[object Date]"}function yO(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function bO(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function dbe(t){return Array.isArray(t)?t:[t]}function U6(t,e,r){if(t.length!==0)return t.reduce((n,i)=>{let o=[e(i),i];return n&&r(n[0],o[0])===n[0]?n:o},null)[1]}function pbe(t,e){return e.reduce((r,n)=>(r[n]=t[n],r),{})}function ry(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function gT(t){if(t==null)return null;if(typeof t!="object")throw new Ps("Week settings must be an object");if(!Zf(t.firstDay,1,7)||!Zf(t.minimalDays,1,7)||!Array.isArray(t.weekend)||t.weekend.some(e=>!Zf(e,1,7)))throw new Ps("Invalid week settings");return{firstDay:t.firstDay,minimalDays:t.minimalDays,weekend:Array.from(t.weekend)}}function Zf(t,e,r){return yT(t)&&t>=e&&t<=r}function $vt(t,e){return t-e*Math.floor(t/e)}function vs(t,e=2){let r=t<0,n;return r?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function mg(t){if(!(Nn(t)||t===null||t===""))return parseInt(t,10)}function ny(t){if(!(Nn(t)||t===null||t===""))return parseFloat(t)}function _T(t){if(!(Nn(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Ux(t,e,r=!1){let n=10**e;return(r?Math.trunc:Math.round)(t*n)/n}function Wb(t){return t%4===0&&(t%100!==0||t%400===0)}function ty(t){return Wb(t)?366:365}function Wx(t,e){let r=$vt(e-1,12)+1,n=t+(e-r)/12;return r===2?Wb(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function jx(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(t.year,t.month-1,t.day)),+e}function fbe(t,e,r){return-xO(_O(t,1,e),r)+e-1}function Hb(t,e=4,r=1){let n=fbe(t,e,r),i=fbe(t+1,e,r);return(ty(t)-n+i)/7}function xT(t){return t>99?t:t>go.twoDigitCutoffYear?1900+t:2e3+t}function dO(t,e,r,n=null){let i=new Date(t),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);let s={timeZoneName:e,...o},u=new Intl.DateTimeFormat(r,s).formatToParts(i).find(h=>h.type.toLowerCase()==="timezonename");return u?u.value:null}function Vb(t,e){let r=parseInt(t,10);Number.isNaN(r)&&(r=0);let n=parseInt(e,10)||0,i=r<0||Object.is(r,-0)?-n:n;return r*60+i}function V6(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new Ps(`Invalid unit value ${t}`);return e}function $x(t,e){let r={};for(let n in t)if(ry(t,n)){let i=t[n];if(i==null)continue;r[e(n)]=V6(i)}return r}function ey(t,e){let r=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${vs(r,2)}:${vs(n,2)}`;case"narrow":return`${i}${r}${n>0?`:${n}`:""}`;case"techie":return`${i}${vs(r,2)}${vs(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function bT(t){return pbe(t,["hour","minute","second","millisecond"])}var Gvt=["January","February","March","April","May","June","July","August","September","October","November","December"],H6=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Kvt=["J","F","M","A","M","J","J","A","S","O","N","D"];function D6(t){switch(t){case"narrow":return[...Kvt];case"short":return[...H6];case"long":return[...Gvt];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var W6=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],$6=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Zvt=["M","T","W","T","F","S","S"];function O6(t){switch(t){case"narrow":return[...Zvt];case"short":return[...$6];case"long":return[...W6];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var P6=["AM","PM"],Yvt=["Before Christ","Anno Domini"],Xvt=["BC","AD"],Jvt=["B","A"];function M6(t){switch(t){case"narrow":return[...Jvt];case"short":return[...Xvt];case"long":return[...Yvt];default:return null}}function mbe(t){return P6[t.hour<12?0:1]}function gbe(t,e){return O6(e)[t.weekday-1]}function vbe(t,e){return D6(e)[t.month-1]}function ybe(t,e){return M6(e)[t.year<0?0:1]}function $ye(t,e,r="always",n=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(t)===-1;if(r==="auto"&&o){let T=t==="days";switch(e){case 1:return T?"tomorrow":`next ${i[t][0]}`;case-1:return T?"yesterday":`last ${i[t][0]}`;case 0:return T?"today":`this ${i[t][0]}`;default:}}let s=Object.is(e,-0)||e<0,u=Math.abs(e),h=u===1,y=i[t],w=n?h?y[1]:y[2]||y[1]:h?i[t][0]:t;return s?`${u} ${w} ago`:`in ${u} ${w}`}function bbe(t,e){let r="";for(let n of t)n.literal?r+=n.val:r+=e(n.val);return r}var Qvt={D:Jv,DD:YE,DDD:XE,DDDD:JE,t:QE,tt:eT,ttt:tT,tttt:rT,T:nT,TT:iT,TTT:oT,TTTT:aT,f:sT,ff:uT,fff:fT,ffff:dT,F:lT,FF:cT,FFF:hT,FFFF:pT},Gl=class t{static create(e,r={}){return new t(e,r)}static parseFormat(e){let r=null,n="",i=!1,o=[];for(let s=0;s<e.length;s++){let u=e.charAt(s);u==="'"?(n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),r=null,n="",i=!i):i||u===r?n+=u:(n.length>0&&o.push({literal:/^\s+$/.test(n),val:n}),n=u,r=u)}return n.length>0&&o.push({literal:i||/^\s+$/.test(n),val:n}),o}static macroTokenToFormatOpts(e){return Qvt[e]}constructor(e,r){this.opts=r,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...r}).format()}dtFormatter(e,r={}){return this.loc.dtFormatter(e,{...this.opts,...r})}formatDateTime(e,r){return this.dtFormatter(e,r).format()}formatDateTimeParts(e,r){return this.dtFormatter(e,r).formatToParts()}formatInterval(e,r){return this.dtFormatter(e.start,r).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,r){return this.dtFormatter(e,r).resolvedOptions()}num(e,r=0){if(this.opts.forceSimple)return vs(e,r);let n={...this.opts};return r>0&&(n.padTo=r),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,r){let n=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(P,L)=>this.loc.extract(e,P,L),s=P=>e.isOffsetFixed&&e.offset===0&&P.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,P.format):"",u=()=>n?mbe(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),h=(P,L)=>n?vbe(e,P):o(L?{month:P}:{month:P,day:"numeric"},"month"),y=(P,L)=>n?gbe(e,P):o(L?{weekday:P}:{weekday:P,month:"long",day:"numeric"},"weekday"),w=P=>{let L=t.macroTokenToFormatOpts(P);return L?this.formatWithSystemDefault(e,L):P},T=P=>n?ybe(e,P):o({era:P},"era"),I=P=>{switch(P){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return u();case"d":return i?o({day:"numeric"},"day"):this.num(e.day);case"dd":return i?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return y("short",!0);case"cccc":return y("long",!0);case"ccccc":return y("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return y("short",!1);case"EEEE":return y("long",!1);case"EEEEE":return y("narrow",!1);case"L":return i?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return h("short",!0);case"LLLL":return h("long",!0);case"LLLLL":return h("narrow",!0);case"M":return i?o({month:"numeric"},"month"):this.num(e.month);case"MM":return i?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return h("short",!1);case"MMMM":return h("long",!1);case"MMMMM":return h("narrow",!1);case"y":return i?o({year:"numeric"},"year"):this.num(e.year);case"yy":return i?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return T("short");case"GG":return T("long");case"GGGGG":return T("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return w(P)}};return bbe(t.parseFormat(r),I)}formatDurationFromString(e,r){let n=h=>{switch(h[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=h=>y=>{let w=n(y);return w?this.num(h.get(w),y.length):y},o=t.parseFormat(r),s=o.reduce((h,{literal:y,val:w})=>y?h:h.concat(w),[]),u=e.shiftTo(...s.map(n).filter(h=>h));return bbe(o,i(u))}};var xbe=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Kx(...t){let e=t.reduce((r,n)=>r+n.source,"");return RegExp(`^${e}$`)}function Zx(...t){return e=>t.reduce(([r,n,i],o)=>{let[s,u,h]=o(e,i);return[{...r,...s},u||n,h]},[{},null,1]).slice(0,2)}function Yx(t,...e){if(t==null)return[null,null];for(let[r,n]of e){let i=r.exec(t);if(i)return n(i)}return[null,null]}function wbe(...t){return(e,r)=>{let n={},i;for(i=0;i<t.length;i++)n[t[i]]=mg(e[r+i]);return[n,null,r+i]}}var Sbe=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,eyt=`(?:${Sbe.source}?(?:\\[(${xbe.source})\\])?)?`,G6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ebe=RegExp(`${G6.source}${eyt}`),K6=RegExp(`(?:T${Ebe.source})?`),tyt=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,ryt=/(\d{4})-?W(\d\d)(?:-?(\d))?/,nyt=/(\d{4})-?(\d{3})/,iyt=wbe("weekYear","weekNumber","weekDay"),oyt=wbe("year","ordinal"),ayt=/(\d{4})-(\d\d)-(\d\d)/,Tbe=RegExp(`${G6.source} ?(?:${Sbe.source}|(${xbe.source}))?`),syt=RegExp(`(?: ${Tbe.source})?`);function Gx(t,e,r){let n=t[e];return Nn(n)?r:mg(n)}function lyt(t,e){return[{year:Gx(t,e),month:Gx(t,e+1,1),day:Gx(t,e+2,1)},null,e+3]}function Xx(t,e){return[{hours:Gx(t,e,0),minutes:Gx(t,e+1,0),seconds:Gx(t,e+2,0),milliseconds:_T(t[e+3])},null,e+4]}function wT(t,e){let r=!t[e]&&!t[e+1],n=Vb(t[e+1],t[e+2]),i=r?null:Wl.instance(n);return[{},i,e+3]}function ST(t,e){let r=t[e]?qu.create(t[e]):null;return[{},r,e+1]}var uyt=RegExp(`^T?${G6.source}$`),cyt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function fyt(t){let[e,r,n,i,o,s,u,h,y]=t,w=e[0]==="-",T=h&&h[0]==="-",I=(P,L=!1)=>P!==void 0&&(L||P&&w)?-P:P;return[{years:I(ny(r)),months:I(ny(n)),weeks:I(ny(i)),days:I(ny(o)),hours:I(ny(s)),minutes:I(ny(u)),seconds:I(ny(h),h==="-0"),milliseconds:I(_T(y),T)}]}var hyt={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Z6(t,e,r,n,i,o,s){let u={year:e.length===2?xT(mg(e)):mg(e),month:H6.indexOf(r)+1,day:mg(n),hour:mg(i),minute:mg(o)};return s&&(u.second=mg(s)),t&&(u.weekday=t.length>3?W6.indexOf(t)+1:$6.indexOf(t)+1),u}var dyt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function pyt(t){let[,e,r,n,i,o,s,u,h,y,w,T]=t,I=Z6(e,i,n,r,o,s,u),P;return h?P=hyt[h]:y?P=0:P=Vb(w,T),[I,new Wl(P)]}function myt(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var gyt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,vyt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,yyt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function _be(t){let[,e,r,n,i,o,s,u]=t;return[Z6(e,i,n,r,o,s,u),Wl.utcInstance]}function byt(t){let[,e,r,n,i,o,s,u]=t;return[Z6(e,u,r,n,i,o,s),Wl.utcInstance]}var _yt=Kx(tyt,K6),xyt=Kx(ryt,K6),wyt=Kx(nyt,K6),Syt=Kx(Ebe),Abe=Zx(lyt,Xx,wT,ST),Eyt=Zx(iyt,Xx,wT,ST),Tyt=Zx(oyt,Xx,wT,ST),Ayt=Zx(Xx,wT,ST);function kbe(t){return Yx(t,[_yt,Abe],[xyt,Eyt],[wyt,Tyt],[Syt,Ayt])}function Cbe(t){return Yx(myt(t),[dyt,pyt])}function Ibe(t){return Yx(t,[gyt,_be],[vyt,_be],[yyt,byt])}function Dbe(t){return Yx(t,[cyt,fyt])}var kyt=Zx(Xx);function Obe(t){return Yx(t,[uyt,kyt])}var Cyt=Kx(ayt,syt),Iyt=Kx(Tbe),Dyt=Zx(Xx,wT,ST);function Pbe(t){return Yx(t,[Cyt,Abe],[Iyt,Dyt])}var Mbe="Invalid Duration",Rbe={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},Oyt={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Rbe},Yh=146097/400,Jx=146097/4800,Pyt={years:{quarters:4,months:12,weeks:Yh/7,days:Yh,hours:Yh*24,minutes:Yh*24*60,seconds:Yh*24*60*60,milliseconds:Yh*24*60*60*1e3},quarters:{months:3,weeks:Yh/28,days:Yh/4,hours:Yh*24/4,minutes:Yh*24*60/4,seconds:Yh*24*60*60/4,milliseconds:Yh*24*60*60*1e3/4},months:{weeks:Jx/7,days:Jx,hours:Jx*24,minutes:Jx*24*60,seconds:Jx*24*60*60,milliseconds:Jx*24*60*60*1e3},...Rbe},$b=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],Myt=$b.slice(0).reverse();function iy(t,e,r=!1){let n={values:r?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new ys(n)}function Fbe(t,e){let r=e.milliseconds??0;for(let n of Myt.slice(1))e[n]&&(r+=e[n]*t[n].milliseconds);return r}function Lbe(t,e){let r=Fbe(t,e)<0?-1:1;$b.reduceRight((n,i)=>{if(Nn(e[i]))return n;if(n){let o=e[n]*r,s=t[i][n],u=Math.floor(o/s);e[i]+=u*r,e[n]-=u*s*r}return i},null),$b.reduce((n,i)=>{if(Nn(e[i]))return n;if(n){let o=e[n]%1;e[n]-=o,e[i]+=o*t[n][i]}return i},null)}function Lyt(t){let e={};for(let[r,n]of Object.entries(t))n!==0&&(e[r]=n);return e}var ys=class t{constructor(e){let r=e.conversionAccuracy==="longterm"||!1,n=r?Pyt:Oyt;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||vo.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,r){return t.fromObject({milliseconds:e},r)}static fromObject(e,r={}){if(e==null||typeof e!="object")throw new Ps(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new t({values:$x(e,t.normalizeUnit),loc:vo.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(e){if(Vd(e))return t.fromMillis(e);if(t.isDuration(e))return e;if(typeof e=="object")return t.fromObject(e);throw new Ps(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,r){let[n]=Dbe(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,r){let[n]=Obe(e);return n?t.fromObject(n,r):t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,r=null){if(!e)throw new Ps("need to specify a reason the Duration is invalid");let n=e instanceof $l?e:new $l(e,r);if(go.throwOnInvalid)throw new fO(n);return new t({invalid:n})}static normalizeUnit(e){let r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!r)throw new zx(e);return r}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,r={}){let n={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Gl.create(this.loc,n).formatDurationFromString(this,e):Mbe}toHuman(e={}){if(!this.isValid)return Mbe;let r=$b.map(n=>{let i=this.values[n];return Nn(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(i)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(r)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ux(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let r=this.toMillis();return r<0||r>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},$i.fromMillis(r,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Fbe(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e),n={};for(let i of $b)(ry(r.values,i)||ry(this.values,i))&&(n[i]=r.get(i)+this.get(i));return iy(this,{values:n},!0)}minus(e){if(!this.isValid)return this;let r=t.fromDurationLike(e);return this.plus(r.negate())}mapUnits(e){if(!this.isValid)return this;let r={};for(let n of Object.keys(this.values))r[n]=V6(e(this.values[n],n));return iy(this,{values:r},!0)}get(e){return this[t.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let r={...this.values,...$x(e,t.normalizeUnit)};return iy(this,{values:r})}reconfigure({locale:e,numberingSystem:r,conversionAccuracy:n,matrix:i}={}){let s={loc:this.loc.clone({locale:e,numberingSystem:r}),matrix:i,conversionAccuracy:n};return iy(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return Lbe(this.matrix,e),iy(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=Lyt(this.normalize().shiftToAll().toObject());return iy(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(s=>t.normalizeUnit(s));let r={},n={},i=this.toObject(),o;for(let s of $b)if(e.indexOf(s)>=0){o=s;let u=0;for(let y in n)u+=this.matrix[y][s]*n[y],n[y]=0;Vd(i[s])&&(u+=i[s]);let h=Math.trunc(u);r[s]=h,n[s]=(u*1e3-h*1e3)/1e3}else Vd(i[s])&&(n[s]=i[s]);for(let s in n)n[s]!==0&&(r[o]+=s===o?n[s]:n[s]/this.matrix[o][s]);return Lbe(this.matrix,r),iy(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let r of Object.keys(this.values))e[r]=this.values[r]===0?0:-this.values[r];return iy(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function r(n,i){return n===void 0||n===0?i===void 0||i===0:n===i}for(let n of $b)if(!r(this.values[n],e.values[n]))return!1;return!0}};var Qx="Invalid Interval";function Ryt(t,e){return!t||!t.isValid?gg.invalid("missing or invalid start"):!e||!e.isValid?gg.invalid("missing or invalid end"):e<t?gg.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var gg=class t{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,r=null){if(!e)throw new Ps("need to specify a reason the Interval is invalid");let n=e instanceof $l?e:new $l(e,r);if(go.throwOnInvalid)throw new cO(n);return new t({invalid:n})}static fromDateTimes(e,r){let n=e1(e),i=e1(r),o=Ryt(n,i);return o??new t({start:n,end:i})}static after(e,r){let n=ys.fromDurationLike(r),i=e1(e);return t.fromDateTimes(i,i.plus(n))}static before(e,r){let n=ys.fromDurationLike(r),i=e1(e);return t.fromDateTimes(i.minus(n),i)}static fromISO(e,r){let[n,i]=(e||"").split("/",2);if(n&&i){let o,s;try{o=$i.fromISO(n,r),s=o.isValid}catch{s=!1}let u,h;try{u=$i.fromISO(i,r),h=u.isValid}catch{h=!1}if(s&&h)return t.fromDateTimes(o,u);if(s){let y=ys.fromISO(i,r);if(y.isValid)return t.after(o,y)}else if(h){let y=ys.fromISO(n,r);if(y.isValid)return t.before(u,y)}}return t.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",r){if(!this.isValid)return NaN;let n=this.start.startOf(e,r),i;return r?.useLocaleWeeks?i=this.end.reconfigure({locale:n.locale}):i=this.end,i=i.startOf(e,r),Math.floor(i.diff(n,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:r}={}){return this.isValid?t.fromDateTimes(e||this.s,r||this.e):this}splitAt(...e){if(!this.isValid)return[];let r=e.map(e1).filter(s=>this.contains(s)).sort((s,u)=>s.toMillis()-u.toMillis()),n=[],{s:i}=this,o=0;for(;i<this.e;){let s=r[o]||this.e,u=+s>+this.e?this.e:s;n.push(t.fromDateTimes(i,u)),i=u,o+=1}return n}splitBy(e){let r=ys.fromDurationLike(e);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:n}=this,i=1,o,s=[];for(;n<this.e;){let u=this.start.plus(r.mapUnits(h=>h*i));o=+u>+this.e?this.e:u,s.push(t.fromDateTimes(n,o)),n=o,i+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let r=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return r>=n?null:t.fromDateTimes(r,n)}union(e){if(!this.isValid)return this;let r=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return t.fromDateTimes(r,n)}static merge(e){let[r,n]=e.sort((i,o)=>i.s-o.s).reduce(([i,o],s)=>o?o.overlaps(s)||o.abutsStart(s)?[i,o.union(s)]:[i.concat([o]),s]:[i,s],[[],null]);return n&&r.push(n),r}static xor(e){let r=null,n=0,i=[],o=e.map(h=>[{time:h.s,type:"s"},{time:h.e,type:"e"}]),s=Array.prototype.concat(...o),u=s.sort((h,y)=>h.time-y.time);for(let h of u)n+=h.type==="s"?1:-1,n===1?r=h.time:(r&&+r!=+h.time&&i.push(t.fromDateTimes(r,h.time)),r=null);return t.merge(i)}difference(...e){return t.xor([this].concat(e)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Qx}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Jv,r={}){return this.isValid?Gl.create(this.s.loc.clone(r),e).formatInterval(this):Qx}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Qx}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Qx}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Qx}toFormat(e,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${r}${this.e.toFormat(e)}`:Qx}toDuration(e,r){return this.isValid?this.e.diff(this.s,e,r):ys.invalid(this.invalidReason)}mapEndpoints(e){return t.fromDateTimes(e(this.s),e(this.e))}};var vg=class{static hasDST(e=go.defaultZone){let r=$i.now().setZone(e).set({month:12});return!e.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(e){return qu.isValidZone(e)}static normalizeZone(e){return Ud(e,go.defaultZone)}static getStartOfWeek({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:r=null}={}){return(r||vo.create(e)).getWeekendDays().slice()}static months(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||vo.create(r,n,o)).months(e)}static monthsFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null,outputCalendar:o="gregory"}={}){return(i||vo.create(r,n,o)).months(e,!0)}static weekdays(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||vo.create(r,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:r=null,numberingSystem:n=null,locObj:i=null}={}){return(i||vo.create(r,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return vo.create(e).meridiems()}static eras(e="short",{locale:r=null}={}){return vo.create(r,null,"gregory").eras(e)}static features(){return{relative:yO(),localeWeek:bO()}}};function qbe(t,e){let r=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=r(e)-r(t);return Math.floor(ys.fromMillis(n).as("days"))}function Fyt(t,e,r){let n=[["years",(h,y)=>y.year-h.year],["quarters",(h,y)=>y.quarter-h.quarter+(y.year-h.year)*4],["months",(h,y)=>y.month-h.month+(y.year-h.year)*12],["weeks",(h,y)=>{let w=qbe(h,y);return(w-w%7)/7}],["days",qbe]],i={},o=t,s,u;for(let[h,y]of n)r.indexOf(h)>=0&&(s=h,i[h]=y(t,e),u=o.plus(i),u>e?(i[h]--,t=o.plus(i),t>e&&(u=t,i[h]--,t=o.plus(i))):t=u);return[t,i,u,s]}function Nbe(t,e,r,n){let[i,o,s,u]=Fyt(t,e,r),h=e-i,y=r.filter(T=>["hours","minutes","seconds","milliseconds"].indexOf(T)>=0);y.length===0&&(s<e&&(s=i.plus({[u]:1})),s!==i&&(o[u]=(o[u]||0)+h/(s-i)));let w=ys.fromObject(o,n);return y.length>0?ys.fromMillis(h,n).shiftTo(...y).plus(w):w}var qyt="missing Intl.DateTimeFormat.formatToParts support";function Ao(t,e=r=>r){return{regex:t,deser:([r])=>e(Zye(r))}}var Nyt="\xA0",jbe=`[ ${Nyt}]`,Ube=new RegExp(jbe,"g");function Byt(t){return t.replace(/\./g,"\\.?").replace(Ube,jbe)}function Bbe(t){return t.replace(/\./g,"").replace(Ube," ").toLowerCase()}function Hd(t,e){return t===null?null:{regex:RegExp(t.map(Byt).join("|")),deser:([r])=>t.findIndex(n=>Bbe(r)===Bbe(n))+e}}function zbe(t,e){return{regex:t,deser:([,r,n])=>Vb(r,n),groups:e}}function SO(t){return{regex:t,deser:([e])=>e}}function zyt(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function jyt(t,e){let r=Kh(e),n=Kh(e,"{2}"),i=Kh(e,"{3}"),o=Kh(e,"{4}"),s=Kh(e,"{6}"),u=Kh(e,"{1,2}"),h=Kh(e,"{1,3}"),y=Kh(e,"{1,6}"),w=Kh(e,"{1,9}"),T=Kh(e,"{2,4}"),I=Kh(e,"{4,6}"),P=W=>({regex:RegExp(zyt(W.val)),deser:([G])=>G,literal:!0}),R=(W=>{if(t.literal)return P(W);switch(W.val){case"G":return Hd(e.eras("short"),0);case"GG":return Hd(e.eras("long"),0);case"y":return Ao(y);case"yy":return Ao(T,xT);case"yyyy":return Ao(o);case"yyyyy":return Ao(I);case"yyyyyy":return Ao(s);case"M":return Ao(u);case"MM":return Ao(n);case"MMM":return Hd(e.months("short",!0),1);case"MMMM":return Hd(e.months("long",!0),1);case"L":return Ao(u);case"LL":return Ao(n);case"LLL":return Hd(e.months("short",!1),1);case"LLLL":return Hd(e.months("long",!1),1);case"d":return Ao(u);case"dd":return Ao(n);case"o":return Ao(h);case"ooo":return Ao(i);case"HH":return Ao(n);case"H":return Ao(u);case"hh":return Ao(n);case"h":return Ao(u);case"mm":return Ao(n);case"m":return Ao(u);case"q":return Ao(u);case"qq":return Ao(n);case"s":return Ao(u);case"ss":return Ao(n);case"S":return Ao(h);case"SSS":return Ao(i);case"u":return SO(w);case"uu":return SO(u);case"uuu":return Ao(r);case"a":return Hd(e.meridiems(),0);case"kkkk":return Ao(o);case"kk":return Ao(T,xT);case"W":return Ao(u);case"WW":return Ao(n);case"E":case"c":return Ao(r);case"EEE":return Hd(e.weekdays("short",!1),1);case"EEEE":return Hd(e.weekdays("long",!1),1);case"ccc":return Hd(e.weekdays("short",!0),1);case"cccc":return Hd(e.weekdays("long",!0),1);case"Z":case"ZZ":return zbe(new RegExp(`([+-]${u.source})(?::(${n.source}))?`),2);case"ZZZ":return zbe(new RegExp(`([+-]${u.source})(${n.source})?`),2);case"z":return SO(/[a-z_+-/]{1,256}?/i);case" ":return SO(/[^\S\n\r]/);default:return P(W)}})(t)||{invalidReason:qyt};return R.token=t,R}var Uyt={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Vyt(t,e,r){let{type:n,value:i}=t;if(n==="literal"){let h=/^\s+$/.test(i);return{literal:!h,val:h?" ":i}}let o=e[n],s=n;n==="hour"&&(e.hour12!=null?s=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?s="hour12":s="hour24":s=r.hour12?"hour12":"hour24");let u=Uyt[s];if(typeof u=="object"&&(u=u[o]),u)return{literal:!1,val:u}}function Hyt(t){return[`^${t.map(r=>r.regex).reduce((r,n)=>`${r}(${n.source})`,"")}$`,t]}function Wyt(t,e,r){let n=t.match(e);if(n){let i={},o=1;for(let s in r)if(ry(r,s)){let u=r[s],h=u.groups?u.groups+1:1;!u.literal&&u.token&&(i[u.token.val[0]]=u.deser(n.slice(o,o+h))),o+=h}return[n,i]}else return[n,{}]}function $yt(t){let e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},r=null,n;return Nn(t.z)||(r=qu.create(t.z)),Nn(t.Z)||(r||(r=new Wl(t.Z)),n=t.Z),Nn(t.q)||(t.M=(t.q-1)*3+1),Nn(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),Nn(t.u)||(t.S=_T(t.u)),[Object.keys(t).reduce((o,s)=>{let u=e(s);return u&&(o[u]=t[s]),o},{}),r,n]}var Y6=null;function Gyt(){return Y6||(Y6=$i.fromMillis(1555555555555)),Y6}function Kyt(t,e){if(t.literal)return t;let r=Gl.macroTokenToFormatOpts(t.val),n=Q6(r,e);return n==null||n.includes(void 0)?t:n}function X6(t,e){return Array.prototype.concat(...t.map(r=>Kyt(r,e)))}var ET=class{constructor(e,r){if(this.locale=e,this.format=r,this.tokens=X6(Gl.parseFormat(r),e),this.units=this.tokens.map(n=>jyt(n,e)),this.disqualifyingUnit=this.units.find(n=>n.invalidReason),!this.disqualifyingUnit){let[n,i]=Hyt(this.units);this.regex=RegExp(n,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){let[r,n]=Wyt(e,this.regex,this.handlers),[i,o,s]=n?$yt(n):[null,null,void 0];if(ry(n,"a")&&ry(n,"H"))throw new Bd("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:n,result:i,zone:o,specificOffset:s}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function J6(t,e,r){return new ET(t,r).explainFromTokens(e)}function Vbe(t,e,r){let{result:n,zone:i,specificOffset:o,invalidReason:s}=J6(t,e,r);return[n,i,o,s]}function Q6(t,e){if(!t)return null;let n=Gl.create(e,t).dtFormatter(Gyt()),i=n.formatToParts(),o=n.resolvedOptions();return i.map(s=>Vyt(s,t,o))}var eU="Invalid DateTime",Hbe=864e13;function TT(t){return new $l("unsupported zone",`the zone "${t.name}" is not supported`)}function tU(t){return t.weekData===null&&(t.weekData=vT(t.c)),t.weekData}function rU(t){return t.localWeekData===null&&(t.localWeekData=vT(t.c,t.loc.getMinDaysInFirstWeek(),t.loc.getStartOfWeek())),t.localWeekData}function Gb(t,e){let r={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new $i({...r,...e,old:r})}function Xbe(t,e,r){let n=t-e*60*1e3,i=r.offset(n);if(e===i)return[n,e];n-=(i-e)*60*1e3;let o=r.offset(n);return i===o?[n,i]:[t-Math.min(i,o)*60*1e3,Math.max(i,o)]}function EO(t,e){t+=e*60*1e3;let r=new Date(t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function AO(t,e,r){return Xbe(jx(t),e,r)}function Wbe(t,e){let r=t.o,n=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...t.c,year:n,month:i,day:Math.min(t.c.day,Wx(n,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},s=ys.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),u=jx(o),[h,y]=Xbe(u,r,t.zone);return s!==0&&(h+=s,y=t.zone.offset(h)),{ts:h,o:y}}function t1(t,e,r,n,i,o){let{setZone:s,zone:u}=r;if(t&&Object.keys(t).length!==0||e){let h=e||u,y=$i.fromObject(t,{...r,zone:h,specificOffset:o});return s?y:y.setZone(u)}else return $i.invalid(new $l("unparsable",`the input "${i}" can't be parsed as ${n}`))}function TO(t,e,r=!0){return t.isValid?Gl.create(vo.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(t,e):null}function nU(t,e){let r=t.c.year>9999||t.c.year<0,n="";return r&&t.c.year>=0&&(n+="+"),n+=vs(t.c.year,r?6:4),e?(n+="-",n+=vs(t.c.month),n+="-",n+=vs(t.c.day)):(n+=vs(t.c.month),n+=vs(t.c.day)),n}function $be(t,e,r,n,i,o){let s=vs(t.c.hour);return e?(s+=":",s+=vs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(s+=":")):s+=vs(t.c.minute),(t.c.millisecond!==0||t.c.second!==0||!r)&&(s+=vs(t.c.second),(t.c.millisecond!==0||!n)&&(s+=".",s+=vs(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!o?s+="Z":t.o<0?(s+="-",s+=vs(Math.trunc(-t.o/60)),s+=":",s+=vs(Math.trunc(-t.o%60))):(s+="+",s+=vs(Math.trunc(t.o/60)),s+=":",s+=vs(Math.trunc(t.o%60)))),o&&(s+="["+t.zone.ianaName+"]"),s}var Jbe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Zyt={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},Yyt={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Qbe=["year","month","day","hour","minute","second","millisecond"],Xyt=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Jyt=["year","ordinal","hour","minute","second","millisecond"];function Qyt(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new zx(t);return e}function Gbe(t){switch(t.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Qyt(t)}}function ebt(t){if(AT===void 0&&(AT=go.now()),t.type!=="iana")return t.offset(AT);let e=t.name;return kO[e]||(kO[e]=t.offset(AT)),kO[e]}function Kbe(t,e){let r=Ud(e.zone,go.defaultZone);if(!r.isValid)return $i.invalid(TT(r));let n=vo.fromObject(e),i,o;if(Nn(t.year))i=go.now();else{for(let h of Qbe)Nn(t[h])&&(t[h]=Jbe[h]);let s=z6(t)||j6(t);if(s)return $i.invalid(s);let u=ebt(r);[i,o]=AO(t,u,r)}return new $i({ts:i,zone:r,loc:n,o})}function Zbe(t,e,r){let n=Nn(r.round)?!0:r.round,i=(s,u)=>(s=Ux(s,n||r.calendary?0:2,!0),e.loc.clone(r).relFormatter(r).format(s,u)),o=s=>r.calendary?e.hasSame(t,s)?0:e.startOf(s).diff(t.startOf(s),s).get(s):e.diff(t,s).get(s);if(r.unit)return i(o(r.unit),r.unit);for(let s of r.units){let u=o(s);if(Math.abs(u)>=1)return i(u,s)}return i(t>e?-0:0,r.units[r.units.length-1])}function Ybe(t){let e={},r;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],r=Array.from(t).slice(0,t.length-1)):r=Array.from(t),[e,r]}var AT,kO={},$i=class t{constructor(e){let r=e.zone||go.defaultZone,n=e.invalid||(Number.isNaN(e.ts)?new $l("invalid input"):null)||(r.isValid?null:TT(r));this.ts=Nn(e.ts)?go.now():e.ts;let i=null,o=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(r))[i,o]=[e.old.c,e.old.o];else{let u=Vd(e.o)&&!e.old?e.o:r.offset(this.ts);i=EO(this.ts,u),n=Number.isNaN(i.year)?new $l("invalid input"):null,i=n?null:i,o=n?null:u}this._zone=r,this.loc=e.loc||vo.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=i,this.o=o,this.isLuxonDateTime=!0}static now(){return new t({})}static local(){let[e,r]=Ybe(arguments),[n,i,o,s,u,h,y]=r;return Kbe({year:n,month:i,day:o,hour:s,minute:u,second:h,millisecond:y},e)}static utc(){let[e,r]=Ybe(arguments),[n,i,o,s,u,h,y]=r;return e.zone=Wl.utcInstance,Kbe({year:n,month:i,day:o,hour:s,minute:u,second:h,millisecond:y},e)}static fromJSDate(e,r={}){let n=hbe(e)?e.valueOf():NaN;if(Number.isNaN(n))return t.invalid("invalid input");let i=Ud(r.zone,go.defaultZone);return i.isValid?new t({ts:n,zone:i,loc:vo.fromObject(r)}):t.invalid(TT(i))}static fromMillis(e,r={}){if(Vd(e))return e<-Hbe||e>Hbe?t.invalid("Timestamp out of range"):new t({ts:e,zone:Ud(r.zone,go.defaultZone),loc:vo.fromObject(r)});throw new Ps(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,r={}){if(Vd(e))return new t({ts:e*1e3,zone:Ud(r.zone,go.defaultZone),loc:vo.fromObject(r)});throw new Ps("fromSeconds requires a numerical input")}static fromObject(e,r={}){e=e||{};let n=Ud(r.zone,go.defaultZone);if(!n.isValid)return t.invalid(TT(n));let i=vo.fromObject(r),o=$x(e,Gbe),{minDaysInFirstWeek:s,startOfWeek:u}=B6(o,i),h=go.now(),y=Nn(r.specificOffset)?n.offset(h):r.specificOffset,w=!Nn(o.ordinal),T=!Nn(o.year),I=!Nn(o.month)||!Nn(o.day),P=T||I,L=o.weekYear||o.weekNumber;if((P||w)&&L)throw new Bd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(I&&w)throw new Bd("Can't mix ordinal dates with month/day");let R=L||o.weekday&&!P,W,G,q=EO(h,y);R?(W=Xyt,G=Zyt,q=vT(q,s,u)):w?(W=Jyt,G=Yyt,q=wO(q)):(W=Qbe,G=Jbe);let V=!1;for(let me of W){let ve=o[me];Nn(ve)?V?o[me]=G[me]:o[me]=q[me]:V=!0}let p=R?ube(o,s,u):w?cbe(o):z6(o),K=p||j6(o);if(K)return t.invalid(K);let j=R?q6(o,s,u):w?N6(o):o,[Q,ee]=AO(j,y,n),se=new t({ts:Q,zone:n,o:ee,loc:i});return o.weekday&&P&&e.weekday!==se.weekday?t.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${se.toISO()}`):se.isValid?se:t.invalid(se.invalid)}static fromISO(e,r={}){let[n,i]=kbe(e);return t1(n,i,r,"ISO 8601",e)}static fromRFC2822(e,r={}){let[n,i]=Cbe(e);return t1(n,i,r,"RFC 2822",e)}static fromHTTP(e,r={}){let[n,i]=Ibe(e);return t1(n,i,r,"HTTP",r)}static fromFormat(e,r,n={}){if(Nn(e)||Nn(r))throw new Ps("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:o=null}=n,s=vo.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0}),[u,h,y,w]=Vbe(s,e,r);return w?t.invalid(w):t1(u,h,n,`format ${r}`,e,y)}static fromString(e,r,n={}){return t.fromFormat(e,r,n)}static fromSQL(e,r={}){let[n,i]=Pbe(e);return t1(n,i,r,"SQL",e)}static invalid(e,r=null){if(!e)throw new Ps("need to specify a reason the DateTime is invalid");let n=e instanceof $l?e:new $l(e,r);if(go.throwOnInvalid)throw new uO(n);return new t({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,r={}){let n=Q6(e,vo.fromObject(r));return n?n.map(i=>i?i.val:null).join(""):null}static expandFormat(e,r={}){return X6(Gl.parseFormat(e),vo.fromObject(r)).map(i=>i.val).join("")}static resetCache(){AT=void 0,kO={}}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?tU(this).weekYear:NaN}get weekNumber(){return this.isValid?tU(this).weekNumber:NaN}get weekday(){return this.isValid?tU(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?rU(this).weekday:NaN}get localWeekNumber(){return this.isValid?rU(this).weekNumber:NaN}get localWeekYear(){return this.isValid?rU(this).weekYear:NaN}get ordinal(){return this.isValid?wO(this.c).ordinal:NaN}get monthShort(){return this.isValid?vg.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?vg.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?vg.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?vg.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,r=6e4,n=jx(this.c),i=this.zone.offset(n-e),o=this.zone.offset(n+e),s=this.zone.offset(n-i*r),u=this.zone.offset(n-o*r);if(s===u)return[this];let h=n-s*r,y=n-u*r,w=EO(h,s),T=EO(y,u);return w.hour===T.hour&&w.minute===T.minute&&w.second===T.second&&w.millisecond===T.millisecond?[Gb(this,{ts:h}),Gb(this,{ts:y})]:[this]}get isInLeapYear(){return Wb(this.year)}get daysInMonth(){return Wx(this.year,this.month)}get daysInYear(){return this.isValid?ty(this.year):NaN}get weeksInWeekYear(){return this.isValid?Hb(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Hb(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:r,numberingSystem:n,calendar:i}=Gl.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:r,numberingSystem:n,outputCalendar:i}}toUTC(e=0,r={}){return this.setZone(Wl.instance(e),r)}toLocal(){return this.setZone(go.defaultZone)}setZone(e,{keepLocalTime:r=!1,keepCalendarTime:n=!1}={}){if(e=Ud(e,go.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(r||n){let o=e.offset(this.ts),s=this.toObject();[i]=AO(s,o,e)}return Gb(this,{ts:i,zone:e})}else return t.invalid(TT(e))}reconfigure({locale:e,numberingSystem:r,outputCalendar:n}={}){let i=this.loc.clone({locale:e,numberingSystem:r,outputCalendar:n});return Gb(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let r=$x(e,Gbe),{minDaysInFirstWeek:n,startOfWeek:i}=B6(r,this.loc),o=!Nn(r.weekYear)||!Nn(r.weekNumber)||!Nn(r.weekday),s=!Nn(r.ordinal),u=!Nn(r.year),h=!Nn(r.month)||!Nn(r.day),y=u||h,w=r.weekYear||r.weekNumber;if((y||s)&&w)throw new Bd("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&s)throw new Bd("Can't mix ordinal dates with month/day");let T;o?T=q6({...vT(this.c,n,i),...r},n,i):Nn(r.ordinal)?(T={...this.toObject(),...r},Nn(r.day)&&(T.day=Math.min(Wx(T.year,T.month),T.day))):T=N6({...wO(this.c),...r});let[I,P]=AO(T,this.o,this.zone);return Gb(this,{ts:I,o:P})}plus(e){if(!this.isValid)return this;let r=ys.fromDurationLike(e);return Gb(this,Wbe(this,r))}minus(e){if(!this.isValid)return this;let r=ys.fromDurationLike(e).negate();return Gb(this,Wbe(this,r))}startOf(e,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;let n={},i=ys.normalizeUnit(e);switch(i){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break;case"milliseconds":break}if(i==="weeks")if(r){let o=this.loc.getStartOfWeek(),{weekday:s}=this;s<o&&(n.weekNumber=this.weekNumber-1),n.weekday=o}else n.weekday=1;if(i==="quarters"){let o=Math.ceil(this.month/3);n.month=(o-1)*3+1}return this.set(n)}endOf(e,r){return this.isValid?this.plus({[e]:1}).startOf(e,r).minus(1):this}toFormat(e,r={}){return this.isValid?Gl.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,e):eU}toLocaleString(e=Jv,r={}){return this.isValid?Gl.create(this.loc.clone(r),e).formatDateTime(this):eU}toLocaleParts(e={}){return this.isValid?Gl.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:r=!1,suppressMilliseconds:n=!1,includeOffset:i=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let s=e==="extended",u=nU(this,s);return u+="T",u+=$be(this,s,r,n,i,o),u}toISODate({format:e="extended"}={}){return this.isValid?nU(this,e==="extended"):null}toISOWeekDate(){return TO(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:r=!1,includeOffset:n=!0,includePrefix:i=!1,extendedZone:o=!1,format:s="extended"}={}){return this.isValid?(i?"T":"")+$be(this,s==="extended",r,e,n,o):null}toRFC2822(){return TO(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return TO(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?nU(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:r=!1,includeOffsetSpace:n=!0}={}){let i="HH:mm:ss.SSS";return(r||e)&&(n&&(i+=" "),r?i+="z":e&&(i+="ZZ")),TO(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():eU}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let r={...this.c};return e.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,r="milliseconds",n={}){if(!this.isValid||!e.isValid)return ys.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...n},o=dbe(r).map(ys.normalizeUnit),s=e.valueOf()>this.valueOf(),u=s?this:e,h=s?e:this,y=Nbe(u,h,o,i);return s?y.negate():y}diffNow(e="milliseconds",r={}){return this.diff(t.now(),e,r)}until(e){return this.isValid?gg.fromDateTimes(this,e):this}hasSame(e,r,n){if(!this.isValid)return!1;let i=e.valueOf(),o=this.setZone(e.zone,{keepLocalTime:!0});return o.startOf(r,n)<=i&&i<=o.endOf(r,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let r=e.base||t.fromObject({},{zone:this.zone}),n=e.padding?this<r?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(i=e.unit,o=void 0),Zbe(r,this.plus(n),{...e,numeric:"always",units:i,unit:o})}toRelativeCalendar(e={}){return this.isValid?Zbe(e.base||t.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(t.isDateTime))throw new Ps("min requires all arguments be DateTimes");return U6(e,r=>r.valueOf(),Math.min)}static max(...e){if(!e.every(t.isDateTime))throw new Ps("max requires all arguments be DateTimes");return U6(e,r=>r.valueOf(),Math.max)}static fromFormatExplain(e,r,n={}){let{locale:i=null,numberingSystem:o=null}=n,s=vo.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});return J6(s,e,r)}static fromStringExplain(e,r,n={}){return t.fromFormatExplain(e,r,n)}static buildFormatParser(e,r={}){let{locale:n=null,numberingSystem:i=null}=r,o=vo.fromOpts({locale:n,numberingSystem:i,defaultToEN:!0});return new ET(o,e)}static fromFormatParser(e,r,n={}){if(Nn(e)||Nn(r))throw new Ps("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:o=null}=n,s=vo.fromOpts({locale:i,numberingSystem:o,defaultToEN:!0});if(!s.equals(r.locale))throw new Ps(`fromFormatParser called with a locale of ${s}, but the format parser was created for ${r.locale}`);let{result:u,zone:h,specificOffset:y,invalidReason:w}=r.explainFromTokens(e);return w?t.invalid(w):t1(u,h,n,`format ${r.format}`,e,y)}static get DATE_SHORT(){return Jv}static get DATE_MED(){return YE}static get DATE_MED_WITH_WEEKDAY(){return _6}static get DATE_FULL(){return XE}static get DATE_HUGE(){return JE}static get TIME_SIMPLE(){return QE}static get TIME_WITH_SECONDS(){return eT}static get TIME_WITH_SHORT_OFFSET(){return tT}static get TIME_WITH_LONG_OFFSET(){return rT}static get TIME_24_SIMPLE(){return nT}static get TIME_24_WITH_SECONDS(){return iT}static get TIME_24_WITH_SHORT_OFFSET(){return oT}static get TIME_24_WITH_LONG_OFFSET(){return aT}static get DATETIME_SHORT(){return sT}static get DATETIME_SHORT_WITH_SECONDS(){return lT}static get DATETIME_MED(){return uT}static get DATETIME_MED_WITH_SECONDS(){return cT}static get DATETIME_MED_WITH_WEEKDAY(){return x6}static get DATETIME_FULL(){return fT}static get DATETIME_FULL_WITH_SECONDS(){return hT}static get DATETIME_HUGE(){return dT}static get DATETIME_HUGE_WITH_SECONDS(){return pT}};function e1(t){if($i.isDateTime(t))return t;if(t&&t.valueOf&&Vd(t.valueOf()))return $i.fromJSDate(t);if(t&&typeof t=="object")return $i.fromObject(t);throw new Ps(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var CO=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],oy={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(t){return typeof console<"u"&&console.warn(t)},getWeek:function(t){var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var r=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-r.getTime())/864e5-3+(r.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var IO={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(t){var e=t%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},DO=IO;var Nu=function(t,e){return e===void 0&&(e=2),("000"+t).slice(e*-1)},Xc=function(t){return t===!0?1:0};function iU(t,e){var r;return function(){var n=this,i=arguments;clearTimeout(r),r=setTimeout(function(){return t.apply(n,i)},e)}}var OO=function(t){return t instanceof Array?t:[t]};function Bu(t,e,r){if(r===!0)return t.classList.add(e);t.classList.remove(e)}function yo(t,e,r){var n=window.document.createElement(t);return e=e||"",r=r||"",n.className=e,r!==void 0&&(n.textContent=r),n}function kT(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function oU(t,e){if(e(t))return t;if(t.parentNode)return oU(t.parentNode,e)}function CT(t,e){var r=yo("div","numInputWrapper"),n=yo("input","numInput "+t),i=yo("span","arrowUp"),o=yo("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?n.type="number":(n.type="text",n.pattern="\\d*"),e!==void 0)for(var s in e)n.setAttribute(s,e[s]);return r.appendChild(n),r.appendChild(i),r.appendChild(o),r}function Jc(t){try{if(typeof t.composedPath=="function"){var e=t.composedPath();return e[0]}return t.target}catch{return t.target}}var aU=function(){},IT=function(t,e,r){return r.months[e?"shorthand":"longhand"][t]},e0e={D:aU,F:function(t,e,r){t.setMonth(r.months.longhand.indexOf(e))},G:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},H:function(t,e){t.setHours(parseFloat(e))},J:function(t,e){t.setDate(parseFloat(e))},K:function(t,e,r){t.setHours(t.getHours()%12+12*Xc(new RegExp(r.amPM[1],"i").test(e)))},M:function(t,e,r){t.setMonth(r.months.shorthand.indexOf(e))},S:function(t,e){t.setSeconds(parseFloat(e))},U:function(t,e){return new Date(parseFloat(e)*1e3)},W:function(t,e,r){var n=parseInt(e),i=new Date(t.getFullYear(),0,2+(n-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+r.firstDayOfWeek),i},Y:function(t,e){t.setFullYear(parseFloat(e))},Z:function(t,e){return new Date(e)},d:function(t,e){t.setDate(parseFloat(e))},h:function(t,e){t.setHours((t.getHours()>=12?12:0)+parseFloat(e))},i:function(t,e){t.setMinutes(parseFloat(e))},j:function(t,e){t.setDate(parseFloat(e))},l:aU,m:function(t,e){t.setMonth(parseFloat(e)-1)},n:function(t,e){t.setMonth(parseFloat(e)-1)},s:function(t,e){t.setSeconds(parseFloat(e))},u:function(t,e){return new Date(parseFloat(e))},w:aU,y:function(t,e){t.setFullYear(2e3+parseFloat(e))}},yg={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},r1={Z:function(t){return t.toISOString()},D:function(t,e,r){return e.weekdays.shorthand[r1.w(t,e,r)]},F:function(t,e,r){return IT(r1.n(t,e,r)-1,!1,e)},G:function(t,e,r){return Nu(r1.h(t,e,r))},H:function(t){return Nu(t.getHours())},J:function(t,e){return e.ordinal!==void 0?t.getDate()+e.ordinal(t.getDate()):t.getDate()},K:function(t,e){return e.amPM[Xc(t.getHours()>11)]},M:function(t,e){return IT(t.getMonth(),!0,e)},S:function(t){return Nu(t.getSeconds())},U:function(t){return t.getTime()/1e3},W:function(t,e,r){return r.getWeek(t)},Y:function(t){return Nu(t.getFullYear(),4)},d:function(t){return Nu(t.getDate())},h:function(t){return t.getHours()%12?t.getHours()%12:12},i:function(t){return Nu(t.getMinutes())},j:function(t){return t.getDate()},l:function(t,e){return e.weekdays.longhand[t.getDay()]},m:function(t){return Nu(t.getMonth()+1)},n:function(t){return t.getMonth()+1},s:function(t){return t.getSeconds()},u:function(t){return t.getTime()},w:function(t){return t.getDay()},y:function(t){return String(t.getFullYear()).substring(2)}};var sU=function(t){var e=t.config,r=e===void 0?oy:e,n=t.l10n,i=n===void 0?IO:n,o=t.isMobile,s=o===void 0?!1:o;return function(u,h,y){var w=y||i;return r.formatDate!==void 0&&!s?r.formatDate(u,h,w):h.split("").map(function(T,I,P){return r1[T]&&P[I-1]!=="\\"?r1[T](u,w,r):T!=="\\"?T:""}).join("")}},PO=function(t){var e=t.config,r=e===void 0?oy:e,n=t.l10n,i=n===void 0?IO:n;return function(o,s,u,h){if(!(o!==0&&!o)){var y=h||i,w,T=o;if(o instanceof Date)w=new Date(o.getTime());else if(typeof o!="string"&&o.toFixed!==void 0)w=new Date(o);else if(typeof o=="string"){var I=s||(r||oy).dateFormat,P=String(o).trim();if(P==="today")w=new Date,u=!0;else if(r&&r.parseDate)w=r.parseDate(o,I);else if(/Z$/.test(P)||/GMT$/.test(P))w=new Date(o);else{for(var L=void 0,R=[],W=0,G=0,q="";W<I.length;W++){var V=I[W],p=V==="\\",K=I[W-1]==="\\"||p;if(yg[V]&&!K){q+=yg[V];var j=new RegExp(q).exec(o);j&&(L=!0)&&R[V!=="Y"?"push":"unshift"]({fn:e0e[V],val:j[++G]})}else p||(q+=".")}w=!r||!r.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),R.forEach(function(Q){var ee=Q.fn,se=Q.val;return w=ee(w,se,y)||w}),w=L?w:void 0}}if(!(w instanceof Date&&!isNaN(w.getTime()))){r.errorHandler(new Error("Invalid date provided: "+T));return}return u===!0&&w.setHours(0,0,0,0),w}}};function Qc(t,e,r){return r===void 0&&(r=!0),r!==!1?new Date(t.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):t.getTime()-e.getTime()}var t0e=function(t,e,r){return t>Math.min(e,r)&&t<Math.max(e,r)},MO=function(t,e,r){return t*3600+e*60+r},r0e=function(t){var e=Math.floor(t/3600),r=(t-e*3600)/60;return[e,r,t-e*3600-r*60]},n0e={DAY:864e5};function LO(t){var e=t.defaultHour,r=t.defaultMinute,n=t.defaultSeconds;if(t.minDate!==void 0){var i=t.minDate.getHours(),o=t.minDate.getMinutes(),s=t.minDate.getSeconds();e<i&&(e=i),e===i&&r<o&&(r=o),e===i&&r===o&&n<s&&(n=t.minDate.getSeconds())}if(t.maxDate!==void 0){var u=t.maxDate.getHours(),h=t.maxDate.getMinutes();e=Math.min(e,u),e===u&&(r=Math.min(h,r)),e===u&&r===h&&(n=t.maxDate.getSeconds())}return{hours:e,minutes:r,seconds:n}}typeof Object.assign!="function"&&(Object.assign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!t)throw TypeError("Cannot convert undefined or null to object");for(var n=function(u){u&&Object.keys(u).forEach(function(h){return t[h]=u[h]})},i=0,o=e;i<o.length;i++){var s=o[i];n(s)}return t});var zu=function(){return zu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zu.apply(this,arguments)},i0e=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)n[i]=o[s];return n},tbt=300;function rbt(t,e){var r={config:zu(zu({},oy),il.defaultConfig),l10n:DO};r.parseDate=PO({config:r.config,l10n:r.l10n}),r._handlers=[],r.pluginElements=[],r.loadedPlugins=[],r._bind=R,r._setHoursFromDate=I,r._positionCalendar=Kt,r.changeMonth=ne,r.changeYear=Ut,r.clear=st,r.close=dt,r.onMouseOver=Jt,r._createElement=yo,r.createDay=j,r.destroy=lt,r.isEnabled=Wt,r.jumpToDate=q,r.updateValue=Rn,r.open=Br,r.redraw=Tt,r.set=sr,r.setDate=Xe,r.toggle=wt;function n(){r.utils={getDaysInMonth:function(qe,ze){return qe===void 0&&(qe=r.currentMonth),ze===void 0&&(ze=r.currentYear),qe===1&&(ze%4===0&&ze%100!==0||ze%400===0)?29:r.l10n.daysInMonth[qe]}}}function i(){r.element=r.input=t,r.isOpen=!1,Be(),vt(),Yn(),xr(),n(),r.isMobile||K(),G(),(r.selectedDates.length||r.config.noCalendar)&&(r.config.enableTime&&I(r.config.noCalendar?r.latestSelectedDateObj:void 0),Rn(!1)),u();var qe=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!r.isMobile&&qe&&Kt(),Ot("onReady")}function o(){var qe;return((qe=r.calendarContainer)===null||qe===void 0?void 0:qe.getRootNode()).activeElement||document.activeElement}function s(qe){return qe.bind(r)}function u(){var qe=r.config;qe.weekNumbers===!1&&qe.showMonths===1||qe.noCalendar!==!0&&window.requestAnimationFrame(function(){if(r.calendarContainer!==void 0&&(r.calendarContainer.style.visibility="hidden",r.calendarContainer.style.display="block"),r.daysContainer!==void 0){var ze=(r.days.offsetWidth+1)*qe.showMonths;r.daysContainer.style.width=ze+"px",r.calendarContainer.style.width=ze+(r.weekWrapper!==void 0?r.weekWrapper.offsetWidth:0)+"px",r.calendarContainer.style.removeProperty("visibility"),r.calendarContainer.style.removeProperty("display")}})}function h(qe){if(r.selectedDates.length===0){var ze=r.config.minDate===void 0||Qc(new Date,r.config.minDate)>=0?new Date:new Date(r.config.minDate.getTime()),mt=LO(r.config);ze.setHours(mt.hours,mt.minutes,mt.seconds,ze.getMilliseconds()),r.selectedDates=[ze],r.latestSelectedDateObj=ze}qe!==void 0&&qe.type!=="blur"&&Ei(qe);var Ft=r._input.value;T(),Rn(),r._input.value!==Ft&&r._debouncedChange()}function y(qe,ze){return qe%12+12*Xc(ze===r.l10n.amPM[1])}function w(qe){switch(qe%24){case 0:case 12:return 12;default:return qe%12}}function T(){if(!(r.hourElement===void 0||r.minuteElement===void 0)){var qe=(parseInt(r.hourElement.value.slice(-2),10)||0)%24,ze=(parseInt(r.minuteElement.value,10)||0)%60,mt=r.secondElement!==void 0?(parseInt(r.secondElement.value,10)||0)%60:0;r.amPM!==void 0&&(qe=y(qe,r.amPM.textContent));var Ft=r.config.minTime!==void 0||r.config.minDate&&r.minDateHasTime&&r.latestSelectedDateObj&&Qc(r.latestSelectedDateObj,r.config.minDate,!0)===0,fr=r.config.maxTime!==void 0||r.config.maxDate&&r.maxDateHasTime&&r.latestSelectedDateObj&&Qc(r.latestSelectedDateObj,r.config.maxDate,!0)===0;if(r.config.maxTime!==void 0&&r.config.minTime!==void 0&&r.config.minTime>r.config.maxTime){var yr=MO(r.config.minTime.getHours(),r.config.minTime.getMinutes(),r.config.minTime.getSeconds()),an=MO(r.config.maxTime.getHours(),r.config.maxTime.getMinutes(),r.config.maxTime.getSeconds()),Or=MO(qe,ze,mt);if(Or>an&&Or<yr){var bn=r0e(yr);qe=bn[0],ze=bn[1],mt=bn[2]}}else{if(fr){var Pr=r.config.maxTime!==void 0?r.config.maxTime:r.config.maxDate;qe=Math.min(qe,Pr.getHours()),qe===Pr.getHours()&&(ze=Math.min(ze,Pr.getMinutes())),ze===Pr.getMinutes()&&(mt=Math.min(mt,Pr.getSeconds()))}if(Ft){var Yr=r.config.minTime!==void 0?r.config.minTime:r.config.minDate;qe=Math.max(qe,Yr.getHours()),qe===Yr.getHours()&&ze<Yr.getMinutes()&&(ze=Yr.getMinutes()),ze===Yr.getMinutes()&&(mt=Math.max(mt,Yr.getSeconds()))}}P(qe,ze,mt)}}function I(qe){var ze=qe||r.latestSelectedDateObj;ze&&ze instanceof Date&&P(ze.getHours(),ze.getMinutes(),ze.getSeconds())}function P(qe,ze,mt){r.latestSelectedDateObj!==void 0&&r.latestSelectedDateObj.setHours(qe%24,ze,mt||0,0),!(!r.hourElement||!r.minuteElement||r.isMobile)&&(r.hourElement.value=Nu(r.config.time_24hr?qe:(12+qe)%12+12*Xc(qe%12===0)),r.minuteElement.value=Nu(ze),r.amPM!==void 0&&(r.amPM.textContent=r.l10n.amPM[Xc(qe>=12)]),r.secondElement!==void 0&&(r.secondElement.value=Nu(mt)))}function L(qe){var ze=Jc(qe),mt=parseInt(ze.value)+(qe.delta||0);(mt/1e3>1||qe.key==="Enter"&&!/[^\d]/.test(mt.toString()))&&Ut(mt)}function R(qe,ze,mt,Ft){if(ze instanceof Array)return ze.forEach(function(fr){return R(qe,fr,mt,Ft)});if(qe instanceof Array)return qe.forEach(function(fr){return R(fr,ze,mt,Ft)});qe.addEventListener(ze,mt,Ft),r._handlers.push({remove:function(){return qe.removeEventListener(ze,mt,Ft)}})}function W(){Ot("onChange")}function G(){if(r.config.wrap&&["open","close","toggle","clear"].forEach(function(mt){Array.prototype.forEach.call(r.element.querySelectorAll("[data-"+mt+"]"),function(Ft){return R(Ft,"click",r[mt])})}),r.isMobile){Cn();return}var qe=iU(Qr,50);if(r._debouncedChange=iU(W,tbt),r.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&R(r.daysContainer,"mouseover",function(mt){r.config.mode==="range"&&Jt(Jc(mt))}),R(r._input,"keydown",zr),r.calendarContainer!==void 0&&R(r.calendarContainer,"keydown",zr),!r.config.inline&&!r.config.static&&R(window,"resize",qe),window.ontouchstart!==void 0?R(window.document,"touchstart",ut):R(window.document,"mousedown",ut),R(window.document,"focus",ut,{capture:!0}),r.config.clickOpens===!0&&(R(r._input,"focus",r.open),R(r._input,"click",r.open)),r.daysContainer!==void 0&&(R(r.monthNav,"click",Si),R(r.monthNav,["keyup","increment"],L),R(r.daysContainer,"click",er)),r.timeContainer!==void 0&&r.minuteElement!==void 0&&r.hourElement!==void 0){var ze=function(mt){return Jc(mt).select()};R(r.timeContainer,["increment"],h),R(r.timeContainer,"blur",h,{capture:!0}),R(r.timeContainer,"click",V),R([r.hourElement,r.minuteElement],["focus","click"],ze),r.secondElement!==void 0&&R(r.secondElement,"focus",function(){return r.secondElement&&r.secondElement.select()}),r.amPM!==void 0&&R(r.amPM,"click",function(mt){h(mt)})}r.config.allowInput&&R(r._input,"blur",pr)}function q(qe,ze){var mt=qe!==void 0?r.parseDate(qe):r.latestSelectedDateObj||(r.config.minDate&&r.config.minDate>r.now?r.config.minDate:r.config.maxDate&&r.config.maxDate<r.now?r.config.maxDate:r.now),Ft=r.currentYear,fr=r.currentMonth;try{mt!==void 0&&(r.currentYear=mt.getFullYear(),r.currentMonth=mt.getMonth())}catch(yr){yr.message="Invalid date supplied: "+mt,r.config.errorHandler(yr)}ze&&r.currentYear!==Ft&&(Ot("onYearChange"),$()),ze&&(r.currentYear!==Ft||r.currentMonth!==fr)&&Ot("onMonthChange"),r.redraw()}function V(qe){var ze=Jc(qe);~ze.className.indexOf("arrow")&&p(qe,ze.classList.contains("arrowUp")?1:-1)}function p(qe,ze,mt){var Ft=qe&&Jc(qe),fr=mt||Ft&&Ft.parentNode&&Ft.parentNode.firstChild,yr=wr("increment");yr.delta=ze,fr&&fr.dispatchEvent(yr)}function K(){var qe=window.document.createDocumentFragment();if(r.calendarContainer=yo("div","flatpickr-calendar"),r.calendarContainer.tabIndex=-1,!r.config.noCalendar){if(qe.appendChild(Se()),r.innerContainer=yo("div","flatpickr-innerContainer"),r.config.weekNumbers){var ze=ye(),mt=ze.weekWrapper,Ft=ze.weekNumbers;r.innerContainer.appendChild(mt),r.weekNumbers=Ft,r.weekWrapper=mt}r.rContainer=yo("div","flatpickr-rContainer"),r.rContainer.appendChild(we()),r.daysContainer||(r.daysContainer=yo("div","flatpickr-days"),r.daysContainer.tabIndex=-1),U(),r.rContainer.appendChild(r.daysContainer),r.innerContainer.appendChild(r.rContainer),qe.appendChild(r.innerContainer)}r.config.enableTime&&qe.appendChild(de()),Bu(r.calendarContainer,"rangeMode",r.config.mode==="range"),Bu(r.calendarContainer,"animate",r.config.animate===!0),Bu(r.calendarContainer,"multiMonth",r.config.showMonths>1),r.calendarContainer.appendChild(qe);var fr=r.config.appendTo!==void 0&&r.config.appendTo.nodeType!==void 0;if((r.config.inline||r.config.static)&&(r.calendarContainer.classList.add(r.config.inline?"inline":"static"),r.config.inline&&(!fr&&r.element.parentNode?r.element.parentNode.insertBefore(r.calendarContainer,r._input.nextSibling):r.config.appendTo!==void 0&&r.config.appendTo.appendChild(r.calendarContainer)),r.config.static)){var yr=yo("div","flatpickr-wrapper");r.element.parentNode&&r.element.parentNode.insertBefore(yr,r.element),yr.appendChild(r.element),r.altInput&&yr.appendChild(r.altInput),yr.appendChild(r.calendarContainer)}!r.config.static&&!r.config.inline&&(r.config.appendTo!==void 0?r.config.appendTo:window.document.body).appendChild(r.calendarContainer)}function j(qe,ze,mt,Ft){var fr=Wt(ze,!0),yr=yo("span",qe,ze.getDate().toString());return yr.dateObj=ze,yr.$i=Ft,yr.setAttribute("aria-label",r.formatDate(ze,r.config.ariaDateFormat)),qe.indexOf("hidden")===-1&&Qc(ze,r.now)===0&&(r.todayDateElem=yr,yr.classList.add("today"),yr.setAttribute("aria-current","date")),fr?(yr.tabIndex=-1,tr(ze)&&(yr.classList.add("selected"),r.selectedDateElem=yr,r.config.mode==="range"&&(Bu(yr,"startRange",r.selectedDates[0]&&Qc(ze,r.selectedDates[0],!0)===0),Bu(yr,"endRange",r.selectedDates[1]&&Qc(ze,r.selectedDates[1],!0)===0),qe==="nextMonthDay"&&yr.classList.add("inRange")))):yr.classList.add("flatpickr-disabled"),r.config.mode==="range"&&on(ze)&&!tr(ze)&&yr.classList.add("inRange"),r.weekNumbers&&r.config.showMonths===1&&qe!=="prevMonthDay"&&Ft%7===6&&r.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+r.config.getWeek(ze)+"</span>"),Ot("onDayCreate",yr),yr}function Q(qe){qe.focus(),r.config.mode==="range"&&Jt(qe)}function ee(qe){for(var ze=qe>0?0:r.config.showMonths-1,mt=qe>0?r.config.showMonths:-1,Ft=ze;Ft!=mt;Ft+=qe)for(var fr=r.daysContainer.children[Ft],yr=qe>0?0:fr.children.length-1,an=qe>0?fr.children.length:-1,Or=yr;Or!=an;Or+=qe){var bn=fr.children[Or];if(bn.className.indexOf("hidden")===-1&&Wt(bn.dateObj))return bn}}function se(qe,ze){for(var mt=qe.className.indexOf("Month")===-1?qe.dateObj.getMonth():r.currentMonth,Ft=ze>0?r.config.showMonths:-1,fr=ze>0?1:-1,yr=mt-r.currentMonth;yr!=Ft;yr+=fr)for(var an=r.daysContainer.children[yr],Or=mt-r.currentMonth===yr?qe.$i+ze:ze<0?an.children.length-1:0,bn=an.children.length,Pr=Or;Pr>=0&&Pr<bn&&Pr!=(ze>0?bn:-1);Pr+=fr){var Yr=an.children[Pr];if(Yr.className.indexOf("hidden")===-1&&Wt(Yr.dateObj)&&Math.abs(qe.$i-Pr)>=Math.abs(ze))return Q(Yr)}r.changeMonth(fr),me(ee(fr),0)}function me(qe,ze){var mt=o(),Ft=Ht(mt||document.body),fr=qe!==void 0?qe:Ft?mt:r.selectedDateElem!==void 0&&Ht(r.selectedDateElem)?r.selectedDateElem:r.todayDateElem!==void 0&&Ht(r.todayDateElem)?r.todayDateElem:ee(ze>0?1:-1);fr===void 0?r._input.focus():Ft?se(fr,ze):Q(fr)}function ve(qe,ze){for(var mt=(new Date(qe,ze,1).getDay()-r.l10n.firstDayOfWeek+7)%7,Ft=r.utils.getDaysInMonth((ze-1+12)%12,qe),fr=r.utils.getDaysInMonth(ze,qe),yr=window.document.createDocumentFragment(),an=r.config.showMonths>1,Or=an?"prevMonthDay hidden":"prevMonthDay",bn=an?"nextMonthDay hidden":"nextMonthDay",Pr=Ft+1-mt,Yr=0;Pr<=Ft;Pr++,Yr++)yr.appendChild(j("flatpickr-day "+Or,new Date(qe,ze-1,Pr),Pr,Yr));for(Pr=1;Pr<=fr;Pr++,Yr++)yr.appendChild(j("flatpickr-day",new Date(qe,ze,Pr),Pr,Yr));for(var Sn=fr+1;Sn<=42-mt&&(r.config.showMonths===1||Yr%7!==0);Sn++,Yr++)yr.appendChild(j("flatpickr-day "+bn,new Date(qe,ze+1,Sn%fr),Sn,Yr));var ii=yo("div","dayContainer");return ii.appendChild(yr),ii}function U(){if(r.daysContainer!==void 0){kT(r.daysContainer),r.weekNumbers&&kT(r.weekNumbers);for(var qe=document.createDocumentFragment(),ze=0;ze<r.config.showMonths;ze++){var mt=new Date(r.currentYear,r.currentMonth,1);mt.setMonth(r.currentMonth+ze),qe.appendChild(ve(mt.getFullYear(),mt.getMonth()))}r.daysContainer.appendChild(qe),r.days=r.daysContainer.firstChild,r.config.mode==="range"&&r.selectedDates.length===1&&Jt()}}function $(){if(!(r.config.showMonths>1||r.config.monthSelectorType!=="dropdown")){var qe=function(Ft){return r.config.minDate!==void 0&&r.currentYear===r.config.minDate.getFullYear()&&Ft<r.config.minDate.getMonth()?!1:!(r.config.maxDate!==void 0&&r.currentYear===r.config.maxDate.getFullYear()&&Ft>r.config.maxDate.getMonth())};r.monthsDropdownContainer.tabIndex=-1,r.monthsDropdownContainer.innerHTML="";for(var ze=0;ze<12;ze++)if(qe(ze)){var mt=yo("option","flatpickr-monthDropdown-month");mt.value=new Date(r.currentYear,ze).getMonth().toString(),mt.textContent=IT(ze,r.config.shorthandCurrentMonth,r.l10n),mt.tabIndex=-1,r.currentMonth===ze&&(mt.selected=!0),r.monthsDropdownContainer.appendChild(mt)}}}function he(){var qe=yo("div","flatpickr-month"),ze=window.document.createDocumentFragment(),mt;r.config.showMonths>1||r.config.monthSelectorType==="static"?mt=yo("span","cur-month"):(r.monthsDropdownContainer=yo("select","flatpickr-monthDropdown-months"),r.monthsDropdownContainer.setAttribute("aria-label",r.l10n.monthAriaLabel),R(r.monthsDropdownContainer,"change",function(an){var Or=Jc(an),bn=parseInt(Or.value,10);r.changeMonth(bn-r.currentMonth),Ot("onMonthChange")}),$(),mt=r.monthsDropdownContainer);var Ft=CT("cur-year",{tabindex:"-1"}),fr=Ft.getElementsByTagName("input")[0];fr.setAttribute("aria-label",r.l10n.yearAriaLabel),r.config.minDate&&fr.setAttribute("min",r.config.minDate.getFullYear().toString()),r.config.maxDate&&(fr.setAttribute("max",r.config.maxDate.getFullYear().toString()),fr.disabled=!!r.config.minDate&&r.config.minDate.getFullYear()===r.config.maxDate.getFullYear());var yr=yo("div","flatpickr-current-month");return yr.appendChild(mt),yr.appendChild(Ft),ze.appendChild(yr),qe.appendChild(ze),{container:qe,yearElement:fr,monthElement:mt}}function Ce(){kT(r.monthNav),r.monthNav.appendChild(r.prevMonthNav),r.config.showMonths&&(r.yearElements=[],r.monthElements=[]);for(var qe=r.config.showMonths;qe--;){var ze=he();r.yearElements.push(ze.yearElement),r.monthElements.push(ze.monthElement),r.monthNav.appendChild(ze.container)}r.monthNav.appendChild(r.nextMonthNav)}function Se(){return r.monthNav=yo("div","flatpickr-months"),r.yearElements=[],r.monthElements=[],r.prevMonthNav=yo("span","flatpickr-prev-month"),r.prevMonthNav.innerHTML=r.config.prevArrow,r.nextMonthNav=yo("span","flatpickr-next-month"),r.nextMonthNav.innerHTML=r.config.nextArrow,Ce(),Object.defineProperty(r,"_hidePrevMonthArrow",{get:function(){return r.__hidePrevMonthArrow},set:function(qe){r.__hidePrevMonthArrow!==qe&&(Bu(r.prevMonthNav,"flatpickr-disabled",qe),r.__hidePrevMonthArrow=qe)}}),Object.defineProperty(r,"_hideNextMonthArrow",{get:function(){return r.__hideNextMonthArrow},set:function(qe){r.__hideNextMonthArrow!==qe&&(Bu(r.nextMonthNav,"flatpickr-disabled",qe),r.__hideNextMonthArrow=qe)}}),r.currentYearElement=r.yearElements[0],pn(),r.monthNav}function de(){r.calendarContainer.classList.add("hasTime"),r.config.noCalendar&&r.calendarContainer.classList.add("noCalendar");var qe=LO(r.config);r.timeContainer=yo("div","flatpickr-time"),r.timeContainer.tabIndex=-1;var ze=yo("span","flatpickr-time-separator",":"),mt=CT("flatpickr-hour",{"aria-label":r.l10n.hourAriaLabel});r.hourElement=mt.getElementsByTagName("input")[0];var Ft=CT("flatpickr-minute",{"aria-label":r.l10n.minuteAriaLabel});if(r.minuteElement=Ft.getElementsByTagName("input")[0],r.hourElement.tabIndex=r.minuteElement.tabIndex=-1,r.hourElement.value=Nu(r.latestSelectedDateObj?r.latestSelectedDateObj.getHours():r.config.time_24hr?qe.hours:w(qe.hours)),r.minuteElement.value=Nu(r.latestSelectedDateObj?r.latestSelectedDateObj.getMinutes():qe.minutes),r.hourElement.setAttribute("step",r.config.hourIncrement.toString()),r.minuteElement.setAttribute("step",r.config.minuteIncrement.toString()),r.hourElement.setAttribute("min",r.config.time_24hr?"0":"1"),r.hourElement.setAttribute("max",r.config.time_24hr?"23":"12"),r.hourElement.setAttribute("maxlength","2"),r.minuteElement.setAttribute("min","0"),r.minuteElement.setAttribute("max","59"),r.minuteElement.setAttribute("maxlength","2"),r.timeContainer.appendChild(mt),r.timeContainer.appendChild(ze),r.timeContainer.appendChild(Ft),r.config.time_24hr&&r.timeContainer.classList.add("time24hr"),r.config.enableSeconds){r.timeContainer.classList.add("hasSeconds");var fr=CT("flatpickr-second");r.secondElement=fr.getElementsByTagName("input")[0],r.secondElement.value=Nu(r.latestSelectedDateObj?r.latestSelectedDateObj.getSeconds():qe.seconds),r.secondElement.setAttribute("step",r.minuteElement.getAttribute("step")),r.secondElement.setAttribute("min","0"),r.secondElement.setAttribute("max","59"),r.secondElement.setAttribute("maxlength","2"),r.timeContainer.appendChild(yo("span","flatpickr-time-separator",":")),r.timeContainer.appendChild(fr)}return r.config.time_24hr||(r.amPM=yo("span","flatpickr-am-pm",r.l10n.amPM[Xc((r.latestSelectedDateObj?r.hourElement.value:r.config.defaultHour)>11)]),r.amPM.title=r.l10n.toggleTitle,r.amPM.tabIndex=-1,r.timeContainer.appendChild(r.amPM)),r.timeContainer}function we(){r.weekdayContainer?kT(r.weekdayContainer):r.weekdayContainer=yo("div","flatpickr-weekdays");for(var qe=r.config.showMonths;qe--;){var ze=yo("div","flatpickr-weekdaycontainer");r.weekdayContainer.appendChild(ze)}return Ue(),r.weekdayContainer}function Ue(){if(r.weekdayContainer){var qe=r.l10n.firstDayOfWeek,ze=i0e(r.l10n.weekdays.shorthand);qe>0&&qe<ze.length&&(ze=i0e(ze.splice(qe,ze.length),ze.splice(0,qe)));for(var mt=r.config.showMonths;mt--;)r.weekdayContainer.children[mt].innerHTML=`
      <span class='flatpickr-weekday'>
        `+ze.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function ye(){r.calendarContainer.classList.add("hasWeeks");var qe=yo("div","flatpickr-weekwrapper");qe.appendChild(yo("span","flatpickr-weekday",r.l10n.weekAbbreviation));var ze=yo("div","flatpickr-weeks");return qe.appendChild(ze),{weekWrapper:qe,weekNumbers:ze}}function ne(qe,ze){ze===void 0&&(ze=!0);var mt=ze?qe:qe-r.currentMonth;mt<0&&r._hidePrevMonthArrow===!0||mt>0&&r._hideNextMonthArrow===!0||(r.currentMonth+=mt,(r.currentMonth<0||r.currentMonth>11)&&(r.currentYear+=r.currentMonth>11?1:-1,r.currentMonth=(r.currentMonth+12)%12,Ot("onYearChange"),$()),U(),Ot("onMonthChange"),pn())}function st(qe,ze){if(qe===void 0&&(qe=!0),ze===void 0&&(ze=!0),r.input.value="",r.altInput!==void 0&&(r.altInput.value=""),r.mobileInput!==void 0&&(r.mobileInput.value=""),r.selectedDates=[],r.latestSelectedDateObj=void 0,ze===!0&&(r.currentYear=r._initialDate.getFullYear(),r.currentMonth=r._initialDate.getMonth()),r.config.enableTime===!0){var mt=LO(r.config),Ft=mt.hours,fr=mt.minutes,yr=mt.seconds;P(Ft,fr,yr)}r.redraw(),qe&&Ot("onChange")}function dt(){r.isOpen=!1,r.isMobile||(r.calendarContainer!==void 0&&r.calendarContainer.classList.remove("open"),r._input!==void 0&&r._input.classList.remove("active")),Ot("onClose")}function lt(){r.config!==void 0&&Ot("onDestroy");for(var qe=r._handlers.length;qe--;)r._handlers[qe].remove();if(r._handlers=[],r.mobileInput)r.mobileInput.parentNode&&r.mobileInput.parentNode.removeChild(r.mobileInput),r.mobileInput=void 0;else if(r.calendarContainer&&r.calendarContainer.parentNode)if(r.config.static&&r.calendarContainer.parentNode){var ze=r.calendarContainer.parentNode;if(ze.lastChild&&ze.removeChild(ze.lastChild),ze.parentNode){for(;ze.firstChild;)ze.parentNode.insertBefore(ze.firstChild,ze);ze.parentNode.removeChild(ze)}}else r.calendarContainer.parentNode.removeChild(r.calendarContainer);r.altInput&&(r.input.type="text",r.altInput.parentNode&&r.altInput.parentNode.removeChild(r.altInput),delete r.altInput),r.input&&(r.input.type=r.input._type,r.input.classList.remove("flatpickr-input"),r.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(mt){try{delete r[mt]}catch{}})}function kt(qe){return r.calendarContainer.contains(qe)}function ut(qe){if(r.isOpen&&!r.config.inline){var ze=Jc(qe),mt=kt(ze),Ft=ze===r.input||ze===r.altInput||r.element.contains(ze)||qe.path&&qe.path.indexOf&&(~qe.path.indexOf(r.input)||~qe.path.indexOf(r.altInput)),fr=!Ft&&!mt&&!kt(qe.relatedTarget),yr=!r.config.ignoredFocusElements.some(function(an){return an.contains(ze)});fr&&yr&&(r.config.allowInput&&r.setDate(r._input.value,!1,r.config.altInput?r.config.altFormat:r.config.dateFormat),r.timeContainer!==void 0&&r.minuteElement!==void 0&&r.hourElement!==void 0&&r.input.value!==""&&r.input.value!==void 0&&h(),r.close(),r.config&&r.config.mode==="range"&&r.selectedDates.length===1&&r.clear(!1))}}function Ut(qe){if(!(!qe||r.config.minDate&&qe<r.config.minDate.getFullYear()||r.config.maxDate&&qe>r.config.maxDate.getFullYear())){var ze=qe,mt=r.currentYear!==ze;r.currentYear=ze||r.currentYear,r.config.maxDate&&r.currentYear===r.config.maxDate.getFullYear()?r.currentMonth=Math.min(r.config.maxDate.getMonth(),r.currentMonth):r.config.minDate&&r.currentYear===r.config.minDate.getFullYear()&&(r.currentMonth=Math.max(r.config.minDate.getMonth(),r.currentMonth)),mt&&(r.redraw(),Ot("onYearChange"),$())}}function Wt(qe,ze){var mt;ze===void 0&&(ze=!0);var Ft=r.parseDate(qe,void 0,ze);if(r.config.minDate&&Ft&&Qc(Ft,r.config.minDate,ze!==void 0?ze:!r.minDateHasTime)<0||r.config.maxDate&&Ft&&Qc(Ft,r.config.maxDate,ze!==void 0?ze:!r.maxDateHasTime)>0)return!1;if(!r.config.enable&&r.config.disable.length===0)return!0;if(Ft===void 0)return!1;for(var fr=!!r.config.enable,yr=(mt=r.config.enable)!==null&&mt!==void 0?mt:r.config.disable,an=0,Or=void 0;an<yr.length;an++){if(Or=yr[an],typeof Or=="function"&&Or(Ft))return fr;if(Or instanceof Date&&Ft!==void 0&&Or.getTime()===Ft.getTime())return fr;if(typeof Or=="string"){var bn=r.parseDate(Or,void 0,!0);return bn&&bn.getTime()===Ft.getTime()?fr:!fr}else if(typeof Or=="object"&&Ft!==void 0&&Or.from&&Or.to&&Ft.getTime()>=Or.from.getTime()&&Ft.getTime()<=Or.to.getTime())return fr}return!fr}function Ht(qe){return r.daysContainer!==void 0?qe.className.indexOf("hidden")===-1&&qe.className.indexOf("flatpickr-disabled")===-1&&r.daysContainer.contains(qe):!1}function pr(qe){var ze=qe.target===r._input,mt=r._input.value.trimEnd()!==tn();ze&&mt&&!(qe.relatedTarget&&kt(qe.relatedTarget))&&r.setDate(r._input.value,!0,qe.target===r.altInput?r.config.altFormat:r.config.dateFormat)}function zr(qe){var ze=Jc(qe),mt=r.config.wrap?t.contains(ze):ze===r._input,Ft=r.config.allowInput,fr=r.isOpen&&(!Ft||!mt),yr=r.config.inline&&mt&&!Ft;if(qe.keyCode===13&&mt){if(Ft)return r.setDate(r._input.value,!0,ze===r.altInput?r.config.altFormat:r.config.dateFormat),r.close(),ze.blur();r.open()}else if(kt(ze)||fr||yr){var an=!!r.timeContainer&&r.timeContainer.contains(ze);switch(qe.keyCode){case 13:an?(qe.preventDefault(),h(),ar()):er(qe);break;case 27:qe.preventDefault(),ar();break;case 8:case 46:mt&&!r.config.allowInput&&(qe.preventDefault(),r.clear());break;case 37:case 39:if(!an&&!mt){qe.preventDefault();var Or=o();if(r.daysContainer!==void 0&&(Ft===!1||Or&&Ht(Or))){var bn=qe.keyCode===39?1:-1;qe.ctrlKey?(qe.stopPropagation(),ne(bn),me(ee(1),0)):me(void 0,bn)}}else r.hourElement&&r.hourElement.focus();break;case 38:case 40:qe.preventDefault();var Pr=qe.keyCode===40?1:-1;r.daysContainer&&ze.$i!==void 0||ze===r.input||ze===r.altInput?qe.ctrlKey?(qe.stopPropagation(),Ut(r.currentYear-Pr),me(ee(1),0)):an||me(void 0,Pr*7):ze===r.currentYearElement?Ut(r.currentYear-Pr):r.config.enableTime&&(!an&&r.hourElement&&r.hourElement.focus(),h(qe),r._debouncedChange());break;case 9:if(an){var Yr=[r.hourElement,r.minuteElement,r.secondElement,r.amPM].concat(r.pluginElements).filter(function(Xn){return Xn}),Sn=Yr.indexOf(ze);if(Sn!==-1){var ii=Yr[Sn+(qe.shiftKey?-1:1)];qe.preventDefault(),(ii||r._input).focus()}}else!r.config.noCalendar&&r.daysContainer&&r.daysContainer.contains(ze)&&qe.shiftKey&&(qe.preventDefault(),r._input.focus());break;default:break}}if(r.amPM!==void 0&&ze===r.amPM)switch(qe.key){case r.l10n.amPM[0].charAt(0):case r.l10n.amPM[0].charAt(0).toLowerCase():r.amPM.textContent=r.l10n.amPM[0],T(),Rn();break;case r.l10n.amPM[1].charAt(0):case r.l10n.amPM[1].charAt(0).toLowerCase():r.amPM.textContent=r.l10n.amPM[1],T(),Rn();break}(mt||kt(ze))&&Ot("onKeyDown",qe)}function Jt(qe,ze){if(ze===void 0&&(ze="flatpickr-day"),!(r.selectedDates.length!==1||qe&&(!qe.classList.contains(ze)||qe.classList.contains("flatpickr-disabled")))){for(var mt=qe?qe.dateObj.getTime():r.days.firstElementChild.dateObj.getTime(),Ft=r.parseDate(r.selectedDates[0],void 0,!0).getTime(),fr=Math.min(mt,r.selectedDates[0].getTime()),yr=Math.max(mt,r.selectedDates[0].getTime()),an=!1,Or=0,bn=0,Pr=fr;Pr<yr;Pr+=n0e.DAY)Wt(new Date(Pr),!0)||(an=an||Pr>fr&&Pr<yr,Pr<Ft&&(!Or||Pr>Or)?Or=Pr:Pr>Ft&&(!bn||Pr<bn)&&(bn=Pr));var Yr=Array.from(r.rContainer.querySelectorAll("*:nth-child(-n+"+r.config.showMonths+") > ."+ze));Yr.forEach(function(Sn){var ii=Sn.dateObj,Xn=ii.getTime(),ha=Or>0&&Xn<Or||bn>0&&Xn>bn;if(ha){Sn.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(xn){Sn.classList.remove(xn)});return}else if(an&&!ha)return;["startRange","inRange","endRange","notAllowed"].forEach(function(xn){Sn.classList.remove(xn)}),qe!==void 0&&(qe.classList.add(mt<=r.selectedDates[0].getTime()?"startRange":"endRange"),Ft<mt&&Xn===Ft?Sn.classList.add("startRange"):Ft>mt&&Xn===Ft&&Sn.classList.add("endRange"),Xn>=Or&&(bn===0||Xn<=bn)&&t0e(Xn,Ft,mt)&&Sn.classList.add("inRange"))})}}function Qr(){r.isOpen&&!r.config.static&&!r.config.inline&&Kt()}function Br(qe,ze){if(ze===void 0&&(ze=r._positionElement),r.isMobile===!0){if(qe){qe.preventDefault();var mt=Jc(qe);mt&&mt.blur()}r.mobileInput!==void 0&&(r.mobileInput.focus(),r.mobileInput.click()),Ot("onOpen");return}else if(r._input.disabled||r.config.inline)return;var Ft=r.isOpen;r.isOpen=!0,Ft||(r.calendarContainer.classList.add("open"),r._input.classList.add("active"),Ot("onOpen"),Kt(ze)),r.config.enableTime===!0&&r.config.noCalendar===!0&&r.config.allowInput===!1&&(qe===void 0||!r.timeContainer.contains(qe.relatedTarget))&&setTimeout(function(){return r.hourElement.select()},50)}function Rr(qe){return function(ze){var mt=r.config["_"+qe+"Date"]=r.parseDate(ze,r.config.dateFormat),Ft=r.config["_"+(qe==="min"?"max":"min")+"Date"];mt!==void 0&&(r[qe==="min"?"minDateHasTime":"maxDateHasTime"]=mt.getHours()>0||mt.getMinutes()>0||mt.getSeconds()>0),r.selectedDates&&(r.selectedDates=r.selectedDates.filter(function(fr){return Wt(fr)}),!r.selectedDates.length&&qe==="min"&&I(mt),Rn()),r.daysContainer&&(Tt(),mt!==void 0?r.currentYearElement[qe]=mt.getFullYear().toString():r.currentYearElement.removeAttribute(qe),r.currentYearElement.disabled=!!Ft&&mt!==void 0&&Ft.getFullYear()===mt.getFullYear())}}function Be(){var qe=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],ze=zu(zu({},JSON.parse(JSON.stringify(t.dataset||{}))),e),mt={};r.config.parseDate=ze.parseDate,r.config.formatDate=ze.formatDate,Object.defineProperty(r.config,"enable",{get:function(){return r.config._enable},set:function(Yr){r.config._enable=Rt(Yr)}}),Object.defineProperty(r.config,"disable",{get:function(){return r.config._disable},set:function(Yr){r.config._disable=Rt(Yr)}});var Ft=ze.mode==="time";if(!ze.dateFormat&&(ze.enableTime||Ft)){var fr=il.defaultConfig.dateFormat||oy.dateFormat;mt.dateFormat=ze.noCalendar||Ft?"H:i"+(ze.enableSeconds?":S":""):fr+" H:i"+(ze.enableSeconds?":S":"")}if(ze.altInput&&(ze.enableTime||Ft)&&!ze.altFormat){var yr=il.defaultConfig.altFormat||oy.altFormat;mt.altFormat=ze.noCalendar||Ft?"h:i"+(ze.enableSeconds?":S K":" K"):yr+(" h:i"+(ze.enableSeconds?":S":"")+" K")}Object.defineProperty(r.config,"minDate",{get:function(){return r.config._minDate},set:Rr("min")}),Object.defineProperty(r.config,"maxDate",{get:function(){return r.config._maxDate},set:Rr("max")});var an=function(Yr){return function(Sn){r.config[Yr==="min"?"_minTime":"_maxTime"]=r.parseDate(Sn,"H:i:S")}};Object.defineProperty(r.config,"minTime",{get:function(){return r.config._minTime},set:an("min")}),Object.defineProperty(r.config,"maxTime",{get:function(){return r.config._maxTime},set:an("max")}),ze.mode==="time"&&(r.config.noCalendar=!0,r.config.enableTime=!0),Object.assign(r.config,mt,ze);for(var Or=0;Or<qe.length;Or++)r.config[qe[Or]]=r.config[qe[Or]]===!0||r.config[qe[Or]]==="true";CO.filter(function(Yr){return r.config[Yr]!==void 0}).forEach(function(Yr){r.config[Yr]=OO(r.config[Yr]||[]).map(s)}),r.isMobile=!r.config.disableMobile&&!r.config.inline&&r.config.mode==="single"&&!r.config.disable.length&&!r.config.enable&&!r.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Or=0;Or<r.config.plugins.length;Or++){var bn=r.config.plugins[Or](r)||{};for(var Pr in bn)CO.indexOf(Pr)>-1?r.config[Pr]=OO(bn[Pr]).map(s).concat(r.config[Pr]):typeof ze[Pr]>"u"&&(r.config[Pr]=bn[Pr])}ze.altInputClass||(r.config.altInputClass=Ge().className+" "+r.config.altInputClass),Ot("onParseConfig")}function Ge(){return r.config.wrap?t.querySelector("[data-input]"):t}function vt(){typeof r.config.locale!="object"&&typeof il.l10ns[r.config.locale]>"u"&&r.config.errorHandler(new Error("flatpickr: invalid locale "+r.config.locale)),r.l10n=zu(zu({},il.l10ns.default),typeof r.config.locale=="object"?r.config.locale:r.config.locale!=="default"?il.l10ns[r.config.locale]:void 0),yg.D="("+r.l10n.weekdays.shorthand.join("|")+")",yg.l="("+r.l10n.weekdays.longhand.join("|")+")",yg.M="("+r.l10n.months.shorthand.join("|")+")",yg.F="("+r.l10n.months.longhand.join("|")+")",yg.K="("+r.l10n.amPM[0]+"|"+r.l10n.amPM[1]+"|"+r.l10n.amPM[0].toLowerCase()+"|"+r.l10n.amPM[1].toLowerCase()+")";var qe=zu(zu({},e),JSON.parse(JSON.stringify(t.dataset||{})));qe.time_24hr===void 0&&il.defaultConfig.time_24hr===void 0&&(r.config.time_24hr=r.l10n.time_24hr),r.formatDate=sU(r),r.parseDate=PO({config:r.config,l10n:r.l10n})}function Kt(qe){if(typeof r.config.position=="function")return void r.config.position(r,qe);if(r.calendarContainer!==void 0){Ot("onPreCalendarPosition");var ze=qe||r._positionElement,mt=Array.prototype.reduce.call(r.calendarContainer.children,function(Ie,nt){return Ie+nt.offsetHeight},0),Ft=r.calendarContainer.offsetWidth,fr=r.config.position.split(" "),yr=fr[0],an=fr.length>1?fr[1]:null,Or=ze.getBoundingClientRect(),bn=window.innerHeight-Or.bottom,Pr=yr==="above"||yr!=="below"&&bn<mt&&Or.top>mt,Yr=window.pageYOffset+Or.top+(Pr?-mt-2:ze.offsetHeight+2);if(Bu(r.calendarContainer,"arrowTop",!Pr),Bu(r.calendarContainer,"arrowBottom",Pr),!r.config.inline){var Sn=window.pageXOffset+Or.left,ii=!1,Xn=!1;an==="center"?(Sn-=(Ft-Or.width)/2,ii=!0):an==="right"&&(Sn-=Ft-Or.width,Xn=!0),Bu(r.calendarContainer,"arrowLeft",!ii&&!Xn),Bu(r.calendarContainer,"arrowCenter",ii),Bu(r.calendarContainer,"arrowRight",Xn);var ha=window.document.body.offsetWidth-(window.pageXOffset+Or.right),xn=Sn+Ft>window.document.body.offsetWidth,pe=ha+Ft>window.document.body.offsetWidth;if(Bu(r.calendarContainer,"rightMost",xn),!r.config.static)if(r.calendarContainer.style.top=Yr+"px",!xn)r.calendarContainer.style.left=Sn+"px",r.calendarContainer.style.right="auto";else if(!pe)r.calendarContainer.style.left="auto",r.calendarContainer.style.right=ha+"px";else{var Ee=rt();if(Ee===void 0)return;var ke=window.document.body.offsetWidth,oe=Math.max(0,ke/2-Ft/2),Fe=".flatpickr-calendar.centerMost:before",Pe=".flatpickr-calendar.centerMost:after",_e=Ee.cssRules.length,fe="{left:"+Or.left+"px;right:auto;}";Bu(r.calendarContainer,"rightMost",!1),Bu(r.calendarContainer,"centerMost",!0),Ee.insertRule(Fe+","+Pe+fe,_e),r.calendarContainer.style.left=oe+"px",r.calendarContainer.style.right="auto"}}}}function rt(){for(var qe=null,ze=0;ze<document.styleSheets.length;ze++){var mt=document.styleSheets[ze];if(mt.cssRules){try{mt.cssRules}catch{continue}qe=mt;break}}return qe??Ct()}function Ct(){var qe=document.createElement("style");return document.head.appendChild(qe),qe.sheet}function Tt(){r.config.noCalendar||r.isMobile||($(),pn(),U())}function ar(){r._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(r.close,0):r.close()}function er(qe){qe.preventDefault(),qe.stopPropagation();var ze=function(Yr){return Yr.classList&&Yr.classList.contains("flatpickr-day")&&!Yr.classList.contains("flatpickr-disabled")&&!Yr.classList.contains("notAllowed")},mt=oU(Jc(qe),ze);if(mt!==void 0){var Ft=mt,fr=r.latestSelectedDateObj=new Date(Ft.dateObj.getTime()),yr=(fr.getMonth()<r.currentMonth||fr.getMonth()>r.currentMonth+r.config.showMonths-1)&&r.config.mode!=="range";if(r.selectedDateElem=Ft,r.config.mode==="single")r.selectedDates=[fr];else if(r.config.mode==="multiple"){var an=tr(fr);an?r.selectedDates.splice(parseInt(an),1):r.selectedDates.push(fr)}else r.config.mode==="range"&&(r.selectedDates.length===2&&r.clear(!1,!1),r.latestSelectedDateObj=fr,r.selectedDates.push(fr),Qc(fr,r.selectedDates[0],!0)!==0&&r.selectedDates.sort(function(Yr,Sn){return Yr.getTime()-Sn.getTime()}));if(T(),yr){var Or=r.currentYear!==fr.getFullYear();r.currentYear=fr.getFullYear(),r.currentMonth=fr.getMonth(),Or&&(Ot("onYearChange"),$()),Ot("onMonthChange")}if(pn(),U(),Rn(),!yr&&r.config.mode!=="range"&&r.config.showMonths===1?Q(Ft):r.selectedDateElem!==void 0&&r.hourElement===void 0&&r.selectedDateElem&&r.selectedDateElem.focus(),r.hourElement!==void 0&&r.hourElement!==void 0&&r.hourElement.focus(),r.config.closeOnSelect){var bn=r.config.mode==="single"&&!r.config.enableTime,Pr=r.config.mode==="range"&&r.selectedDates.length===2&&!r.config.enableTime;(bn||Pr)&&ar()}W()}}var ir={locale:[vt,Ue],showMonths:[Ce,u,we],minDate:[q],maxDate:[q],positionElement:[kn],clickOpens:[function(){r.config.clickOpens===!0?(R(r._input,"focus",r.open),R(r._input,"click",r.open)):(r._input.removeEventListener("focus",r.open),r._input.removeEventListener("click",r.open))}]};function sr(qe,ze){if(qe!==null&&typeof qe=="object"){Object.assign(r.config,qe);for(var mt in qe)ir[mt]!==void 0&&ir[mt].forEach(function(Ft){return Ft()})}else r.config[qe]=ze,ir[qe]!==void 0?ir[qe].forEach(function(Ft){return Ft()}):CO.indexOf(qe)>-1&&(r.config[qe]=OO(ze));r.redraw(),Rn(!0)}function He(qe,ze){var mt=[];if(qe instanceof Array)mt=qe.map(function(Ft){return r.parseDate(Ft,ze)});else if(qe instanceof Date||typeof qe=="number")mt=[r.parseDate(qe,ze)];else if(typeof qe=="string")switch(r.config.mode){case"single":case"time":mt=[r.parseDate(qe,ze)];break;case"multiple":mt=qe.split(r.config.conjunction).map(function(Ft){return r.parseDate(Ft,ze)});break;case"range":mt=qe.split(r.l10n.rangeSeparator).map(function(Ft){return r.parseDate(Ft,ze)});break;default:break}else r.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(qe)));r.selectedDates=r.config.allowInvalidPreload?mt:mt.filter(function(Ft){return Ft instanceof Date&&Wt(Ft,!1)}),r.config.mode==="range"&&r.selectedDates.sort(function(Ft,fr){return Ft.getTime()-fr.getTime()})}function Xe(qe,ze,mt){if(ze===void 0&&(ze=!1),mt===void 0&&(mt=r.config.dateFormat),qe!==0&&!qe||qe instanceof Array&&qe.length===0)return r.clear(ze);He(qe,mt),r.latestSelectedDateObj=r.selectedDates[r.selectedDates.length-1],r.redraw(),q(void 0,ze),I(),r.selectedDates.length===0&&r.clear(!1),Rn(ze),ze&&Ot("onChange")}function Rt(qe){return qe.slice().map(function(ze){return typeof ze=="string"||typeof ze=="number"||ze instanceof Date?r.parseDate(ze,void 0,!0):ze&&typeof ze=="object"&&ze.from&&ze.to?{from:r.parseDate(ze.from,void 0),to:r.parseDate(ze.to,void 0)}:ze}).filter(function(ze){return ze})}function xr(){r.selectedDates=[],r.now=r.parseDate(r.config.now)||new Date;var qe=r.config.defaultDate||((r.input.nodeName==="INPUT"||r.input.nodeName==="TEXTAREA")&&r.input.placeholder&&r.input.value===r.input.placeholder?null:r.input.value);qe&&He(qe,r.config.dateFormat),r._initialDate=r.selectedDates.length>0?r.selectedDates[0]:r.config.minDate&&r.config.minDate.getTime()>r.now.getTime()?r.config.minDate:r.config.maxDate&&r.config.maxDate.getTime()<r.now.getTime()?r.config.maxDate:r.now,r.currentYear=r._initialDate.getFullYear(),r.currentMonth=r._initialDate.getMonth(),r.selectedDates.length>0&&(r.latestSelectedDateObj=r.selectedDates[0]),r.config.minTime!==void 0&&(r.config.minTime=r.parseDate(r.config.minTime,"H:i")),r.config.maxTime!==void 0&&(r.config.maxTime=r.parseDate(r.config.maxTime,"H:i")),r.minDateHasTime=!!r.config.minDate&&(r.config.minDate.getHours()>0||r.config.minDate.getMinutes()>0||r.config.minDate.getSeconds()>0),r.maxDateHasTime=!!r.config.maxDate&&(r.config.maxDate.getHours()>0||r.config.maxDate.getMinutes()>0||r.config.maxDate.getSeconds()>0)}function Yn(){if(r.input=Ge(),!r.input){r.config.errorHandler(new Error("Invalid input element specified"));return}r.input._type=r.input.type,r.input.type="text",r.input.classList.add("flatpickr-input"),r._input=r.input,r.config.altInput&&(r.altInput=yo(r.input.nodeName,r.config.altInputClass),r._input=r.altInput,r.altInput.placeholder=r.input.placeholder,r.altInput.disabled=r.input.disabled,r.altInput.required=r.input.required,r.altInput.tabIndex=r.input.tabIndex,r.altInput.type="text",r.input.setAttribute("type","hidden"),!r.config.static&&r.input.parentNode&&r.input.parentNode.insertBefore(r.altInput,r.input.nextSibling)),r.config.allowInput||r._input.setAttribute("readonly","readonly"),kn()}function kn(){r._positionElement=r.config.positionElement||r._input}function Cn(){var qe=r.config.enableTime?r.config.noCalendar?"time":"datetime-local":"date";r.mobileInput=yo("input",r.input.className+" flatpickr-mobile"),r.mobileInput.tabIndex=1,r.mobileInput.type=qe,r.mobileInput.disabled=r.input.disabled,r.mobileInput.required=r.input.required,r.mobileInput.placeholder=r.input.placeholder,r.mobileFormatStr=qe==="datetime-local"?"Y-m-d\\TH:i:S":qe==="date"?"Y-m-d":"H:i:S",r.selectedDates.length>0&&(r.mobileInput.defaultValue=r.mobileInput.value=r.formatDate(r.selectedDates[0],r.mobileFormatStr)),r.config.minDate&&(r.mobileInput.min=r.formatDate(r.config.minDate,"Y-m-d")),r.config.maxDate&&(r.mobileInput.max=r.formatDate(r.config.maxDate,"Y-m-d")),r.input.getAttribute("step")&&(r.mobileInput.step=String(r.input.getAttribute("step"))),r.input.type="hidden",r.altInput!==void 0&&(r.altInput.type="hidden");try{r.input.parentNode&&r.input.parentNode.insertBefore(r.mobileInput,r.input.nextSibling)}catch{}R(r.mobileInput,"change",function(ze){r.setDate(Jc(ze).value,!1,r.mobileFormatStr),Ot("onChange"),Ot("onClose")})}function wt(qe){if(r.isOpen===!0)return r.close();r.open(qe)}function Ot(qe,ze){if(r.config!==void 0){var mt=r.config[qe];if(mt!==void 0&&mt.length>0)for(var Ft=0;mt[Ft]&&Ft<mt.length;Ft++)mt[Ft](r.selectedDates,r.input.value,r,ze);qe==="onChange"&&(r.input.dispatchEvent(wr("change")),r.input.dispatchEvent(wr("input")))}}function wr(qe){var ze=document.createEvent("Event");return ze.initEvent(qe,!0,!0),ze}function tr(qe){for(var ze=0;ze<r.selectedDates.length;ze++){var mt=r.selectedDates[ze];if(mt instanceof Date&&Qc(mt,qe)===0)return""+ze}return!1}function on(qe){return r.config.mode!=="range"||r.selectedDates.length<2?!1:Qc(qe,r.selectedDates[0])>=0&&Qc(qe,r.selectedDates[1])<=0}function pn(){r.config.noCalendar||r.isMobile||!r.monthNav||(r.yearElements.forEach(function(qe,ze){var mt=new Date(r.currentYear,r.currentMonth,1);mt.setMonth(r.currentMonth+ze),r.config.showMonths>1||r.config.monthSelectorType==="static"?r.monthElements[ze].textContent=IT(mt.getMonth(),r.config.shorthandCurrentMonth,r.l10n)+" ":r.monthsDropdownContainer.value=mt.getMonth().toString(),qe.value=mt.getFullYear().toString()}),r._hidePrevMonthArrow=r.config.minDate!==void 0&&(r.currentYear===r.config.minDate.getFullYear()?r.currentMonth<=r.config.minDate.getMonth():r.currentYear<r.config.minDate.getFullYear()),r._hideNextMonthArrow=r.config.maxDate!==void 0&&(r.currentYear===r.config.maxDate.getFullYear()?r.currentMonth+1>r.config.maxDate.getMonth():r.currentYear>r.config.maxDate.getFullYear()))}function tn(qe){var ze=qe||(r.config.altInput?r.config.altFormat:r.config.dateFormat);return r.selectedDates.map(function(mt){return r.formatDate(mt,ze)}).filter(function(mt,Ft,fr){return r.config.mode!=="range"||r.config.enableTime||fr.indexOf(mt)===Ft}).join(r.config.mode!=="range"?r.config.conjunction:r.l10n.rangeSeparator)}function Rn(qe){qe===void 0&&(qe=!0),r.mobileInput!==void 0&&r.mobileFormatStr&&(r.mobileInput.value=r.latestSelectedDateObj!==void 0?r.formatDate(r.latestSelectedDateObj,r.mobileFormatStr):""),r.input.value=tn(r.config.dateFormat),r.altInput!==void 0&&(r.altInput.value=tn(r.config.altFormat)),qe!==!1&&Ot("onValueUpdate")}function Si(qe){var ze=Jc(qe),mt=r.prevMonthNav.contains(ze),Ft=r.nextMonthNav.contains(ze);mt||Ft?ne(mt?-1:1):r.yearElements.indexOf(ze)>=0?ze.select():ze.classList.contains("arrowUp")?r.changeYear(r.currentYear+1):ze.classList.contains("arrowDown")&&r.changeYear(r.currentYear-1)}function Ei(qe){qe.preventDefault();var ze=qe.type==="keydown",mt=Jc(qe),Ft=mt;r.amPM!==void 0&&mt===r.amPM&&(r.amPM.textContent=r.l10n.amPM[Xc(r.amPM.textContent===r.l10n.amPM[0])]);var fr=parseFloat(Ft.getAttribute("min")),yr=parseFloat(Ft.getAttribute("max")),an=parseFloat(Ft.getAttribute("step")),Or=parseInt(Ft.value,10),bn=qe.delta||(ze?qe.which===38?1:-1:0),Pr=Or+an*bn;if(typeof Ft.value<"u"&&Ft.value.length===2){var Yr=Ft===r.hourElement,Sn=Ft===r.minuteElement;Pr<fr?(Pr=yr+Pr+Xc(!Yr)+(Xc(Yr)&&Xc(!r.amPM)),Sn&&p(void 0,-1,r.hourElement)):Pr>yr&&(Pr=Ft===r.hourElement?Pr-yr-Xc(!r.amPM):fr,Sn&&p(void 0,1,r.hourElement)),r.amPM&&Yr&&(an===1?Pr+Or===23:Math.abs(Pr-Or)>an)&&(r.amPM.textContent=r.l10n.amPM[Xc(r.amPM.textContent===r.l10n.amPM[0])]),Ft.value=Nu(Pr)}}return i(),r}function n1(t,e){for(var r=Array.prototype.slice.call(t).filter(function(s){return s instanceof HTMLElement}),n=[],i=0;i<r.length;i++){var o=r[i];try{if(o.getAttribute("data-fp-omit")!==null)continue;o._flatpickr!==void 0&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=rbt(o,e||{}),n.push(o._flatpickr)}catch(s){console.error(s)}}return n.length===1?n[0]:n}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(t){return n1(this,t)},HTMLElement.prototype.flatpickr=function(t){return n1([this],t)});var il=function(t,e){return typeof t=="string"?n1(window.document.querySelectorAll(t),e):t instanceof Node?n1([t],e):n1(t,e)};il.defaultConfig={};il.l10ns={en:zu({},DO),default:zu({},DO)};il.localize=function(t){il.l10ns.default=zu(zu({},il.l10ns.default),t)};il.setDefaults=function(t){il.defaultConfig=zu(zu({},il.defaultConfig),t)};il.parseDate=PO({});il.formatDate=sU({});il.compareDates=Qc;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(t){return n1(this,t)});Date.prototype.fp_incr=function(t){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof t=="string"?parseInt(t,10):t))};typeof window<"u"&&(window.flatpickr=il);var o0e=il;function a0e(t){return new Date(new Date(t).getTime()+new Date(t).getTimezoneOffset()*60*1e3)}var s0e="y/LL/dd",l0e="TT",RO=class extends Lr{static targets=["input","fakeInput"];static values={view:String,timezone:String,format:String,enableTime:Boolean,pickerFormat:String,firstDayOfWeek:Number,time24Hr:Boolean,disableMobile:Boolean,noCalendar:Boolean,relative:Boolean,fieldType:{type:String,default:"dateTime"},pickerOptions:{type:Object,default:{}}};flatpickrInstance;cachedInitialValue;get browserZone(){return $i.local().zoneName}get initialValue(){return this.isOnShow||this.isOnIndex?this.context.element.innerText:this.isOnEdit?this.inputTarget.value:null}get isOnIndex(){return this.viewValue==="index"}get isOnEdit(){return this.viewValue==="edit"}get isOnShow(){return this.viewValue==="show"}get fieldIsDate(){return this.fieldTypeValue==="date"}get fieldIsDateTime(){return this.fieldTypeValue==="dateTime"}get fieldIsTime(){return this.fieldTypeValue==="time"}get fieldHasTime(){return this.fieldIsTime||this.fieldIsDateTime}get parsedValue(){return $i.fromISO(this.initialValue,{zone:"UTC"})}get displayTimezone(){return this.timezoneValue||this.browserZone}connect(){this.cacheInitialValue(),this.isOnShow||this.isOnIndex?this.initShow():this.isOnEdit&&this.initEdit()}disconnect(){this.isOnShow||this.isOnIndex?this.context.element.innerText=this.cachedInitialValue:this.isOnEdit&&this.flatpickrInstance&&this.flatpickrInstance.destroy()}cacheInitialValue(){this.cachedInitialValue=this.initialValue}initShow(){let t=this.parsedValue;this.fieldHasTime&&this.relativeValue&&(t=t.setZone(this.displayTimezone)),this.context.element.innerText=t.toFormat(this.formatValue)}initEdit(){let t={enableTime:!1,enableSeconds:!1,time_24hr:this.time24HrValue,locale:{firstDayOfWeek:0},altInput:!0,onChange:this.onChange.bind(this),noCalendar:!1,...this.pickerOptionsValue};if(t.altFormat=this.pickerFormatValue,t.disableMobile=this.disableMobileValue,t.locale.firstDayOfWeek=this.firstDayOfWeekValue,t.enableTime=this.enableTimeValue,t.enableSeconds=this.enableTimeValue,t.noCalendar=this.noCalendarValue,this.fieldHasTime&&(t.dateFormat="Y-m-d H:i:S"),this.initialValue)switch(this.fieldTypeValue){case"date":t.defaultDate=a0e(this.initialValue);break;default:case"time":t.defaultDate=this.parsedValue.setZone(this.displayTimezone,{keepLocalTime:!this.relativeValue}).toISO();break;case"dateTime":t.defaultDate=this.parsedValue.setZone(this.displayTimezone,{keepLocalTime:!this.relativeValue}).toISO();break}if(this.flatpickrInstance=o0e(this.fakeInputTarget,t),!this.initialValue)return;let e;switch(this.fieldTypeValue){case"time":e=this.parsedValue.setZone(this.displayTimezone,{keepLocalTime:!0}).toFormat(l0e);break;case"date":e=$i.fromJSDate(a0e(this.initialValue)).toFormat(s0e);break;default:case"dateTime":e=this.parsedValue.setZone(this.displayTimezone).toISO();break}this.updateRealInput(e)}onChange(t){if(t.length===0){this.updateRealInput("");return}let e=$i.fromISO(t[0].toISOString()).setZone(this.displayTimezone,{keepLocalTime:!0}).setZone("UTC",{keepLocalTime:!this.relativeValue}),r;switch(this.fieldTypeValue){case"time":r=e.toFormat(l0e);break;case"date":r=e.toFormat(s0e);break;default:case"dateTime":r=e.toISO();break}this.updateRealInput(r)}updateRealInput(t){this.inputTarget.value=t}};var s_e=ua(a_e()),uP=class extends Lr{static targets=["element"];get view(){return this.elementTarget.dataset.view}get componentOptions(){try{return JSON.parse(this.elementTarget.dataset.componentOptions)}catch{return{}}}connect(){let t={element:this.elementTarget,spellChecker:this.componentOptions.spell_checker,autoRefresh:{delay:500}};this.view==="show"&&(t.toolbar=!1,t.status=!1);let e=new s_e.default(t);this.view==="show"&&(e.codemirror.options.readOnly=!0)}};var cP=class extends Lr{static targets=["content"];showContent(t){this.contentTarget.classList.toggle("hidden"),t.target.classList.add("hidden")}};var fP=class extends Lr{static targets=["itemCheckbox","checkbox","selectAllOverlay","unselectedMessage","selectedMessage"];static values={pageCount:Number,selectedAll:Boolean,selectedAllQuery:String};connect(){this.resourceName=this.element.dataset.resourceName}toggle(t){let e=!!t.target.checked;document.querySelectorAll(`[data-controller="item-selector"][data-resource-name="${this.resourceName}"] input[type=checkbox]`).forEach(r=>r.checked!==e&&r.click()),this.selectAllEnabled()&&(this.selectAllOverlay(e),e||this.resetUnselected())}selectRow(){let t=!0;this.itemCheckboxTargets.forEach(e=>t=t&&e.checked),this.checkboxTarget.checked=t,this.selectAllEnabled()&&(this.selectAllOverlay(t),this.resetUnselected())}selectAll(t){t.preventDefault(),this.selectedAllValue=!this.selectedAllValue,this.unselectedMessageTarget.classList.toggle("hidden"),this.selectedMessageTarget.classList.toggle("hidden")}resetUnselected(){this.selectedAllValue=!1,this.unselectedMessageTarget.classList.remove("hidden"),this.selectedMessageTarget.classList.add("hidden")}selectAllOverlay(t){t?this.selectAllOverlayTarget.classList.remove("hidden"):this.selectAllOverlayTarget.classList.add("hidden")}selectAllEnabled(){return this.pageCountValue>1&&this.selectedAllQueryValue!=="select_all_disabled"}};var hP=class extends Lr{static targets=["panel"];checkbox={};enabledClasses=["text-black"];disabledClasses=["text-gray-500"];get actionsPanelPresent(){return this.actionsButtonElement!==null}get currentIds(){try{return JSON.parse(this.stateHolderElement.dataset.selectedResources)}catch{return[]}}get actionLinks(){return document.querySelectorAll('.js-actions-dropdown a[data-actions-picker-target="resourceAction"]')}set currentIds(t){this.stateHolderElement.dataset.selectedResources=JSON.stringify(t),this.actionsPanelPresent&&(t.length>0?this.enableResourceActions():this.disableResourceActions())}connect(){this.resourceName=this.element.dataset.resourceName,this.resourceId=this.element.dataset.resourceId,this.actionsButtonElement=document.querySelector(`[data-actions-dropdown-button="${this.resourceName}"]`),this.stateHolderElement=document.querySelector(`[data-selected-resources-name="${this.resourceName}"]`)}addToSelected(){let t=this.currentIds;t.push(this.resourceId),this.currentIds=t}removeFromSelected(){this.currentIds=this.currentIds.filter(t=>t.toString()!==this.resourceId)}toggle(t){this.checkbox=t.target,this.checkbox.checked?this.addToSelected():this.removeFromSelected()}enableResourceActions(){this.actionLinks.forEach(t=>{t.classList.add(...this.enabledClasses),t.classList.remove(...this.disabledClasses),t.setAttribute("data-href",t.getAttribute("href")),t.dataset.disabled=!1})}disableResourceActions(){this.actionLinks.forEach(t=>{t.classList.remove(...this.enabledClasses),t.classList.add(...this.disabledClasses),t.setAttribute("href",t.getAttribute("data-href")),t.dataset.disabled=!0})}};var{entries:v_e,setPrototypeOf:l_e,isFrozen:Kbt,getPrototypeOf:Zbt,getOwnPropertyDescriptor:Ybt}=Object,{freeze:pc,seal:Xh,create:y_e}=Object,{apply:AU,construct:kU}=typeof Reflect<"u"&&Reflect;pc||(pc=function(e){return e});Xh||(Xh=function(e){return e});AU||(AU=function(e,r,n){return e.apply(r,n)});kU||(kU=function(e,r){return new e(...r)});var dP=mc(Array.prototype.forEach),Xbt=mc(Array.prototype.lastIndexOf),u_e=mc(Array.prototype.pop),MT=mc(Array.prototype.push),Jbt=mc(Array.prototype.splice),mP=mc(String.prototype.toLowerCase),xU=mc(String.prototype.toString),c_e=mc(String.prototype.match),LT=mc(String.prototype.replace),Qbt=mc(String.prototype.indexOf),e0t=mc(String.prototype.trim),Wd=mc(Object.prototype.hasOwnProperty),dc=mc(RegExp.prototype.test),RT=t0t(TypeError);function mc(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return AU(t,e,n)}}function t0t(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return kU(t,r)}}function Ni(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mP;l_e&&l_e(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){let o=r(i);o!==i&&(Kbt(e)||(e[n]=o),i=o)}t[i]=!0}return t}function r0t(t){for(let e=0;e<t.length;e++)Wd(t,e)||(t[e]=null);return t}function Xb(t){let e=y_e(null);for(let[r,n]of v_e(t))Wd(t,r)&&(Array.isArray(n)?e[r]=r0t(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=Xb(n):e[r]=n);return e}function FT(t,e){for(;t!==null;){let n=Ybt(t,e);if(n){if(n.get)return mc(n.get);if(typeof n.value=="function")return mc(n.value)}t=Zbt(t)}function r(){return null}return r}var f_e=pc(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wU=pc(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),SU=pc(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),n0t=pc(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),EU=pc(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),i0t=pc(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),h_e=pc(["#text"]),d_e=pc(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),TU=pc(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),p_e=pc(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pP=pc(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),o0t=Xh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),a0t=Xh(/<%[\w\W]*|[\w\W]*%>/gm),s0t=Xh(/\$\{[\w\W]*/gm),l0t=Xh(/^data-[\-\w.\u00B7-\uFFFF]+$/),u0t=Xh(/^aria-[\-\w]+$/),b_e=Xh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),c0t=Xh(/^(?:\w+script|data):/i),f0t=Xh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),__e=Xh(/^html$/i),h0t=Xh(/^[a-z][.\w]*(-[.\w]+)+$/i),m_e=Object.freeze({__proto__:null,ARIA_ATTR:u0t,ATTR_WHITESPACE:f0t,CUSTOM_ELEMENT:h0t,DATA_ATTR:l0t,DOCTYPE_NAME:__e,ERB_EXPR:a0t,IS_ALLOWED_URI:b_e,IS_SCRIPT_OR_DATA:c0t,MUSTACHE_EXPR:o0t,TMPLIT_EXPR:s0t}),qT={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},d0t=function(){return typeof window>"u"?null:window},p0t=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";r&&r.hasAttribute(i)&&(n=r.getAttribute(i));let o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},g_e=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function x_e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d0t(),e=Pe=>x_e(Pe);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==qT.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t,n=r,i=n.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:u,Element:h,NodeFilter:y,NamedNodeMap:w=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:T,DOMParser:I,trustedTypes:P}=t,L=h.prototype,R=FT(L,"cloneNode"),W=FT(L,"remove"),G=FT(L,"nextSibling"),q=FT(L,"childNodes"),V=FT(L,"parentNode");if(typeof s=="function"){let Pe=r.createElement("template");Pe.content&&Pe.content.ownerDocument&&(r=Pe.content.ownerDocument)}let p,K="",{implementation:j,createNodeIterator:Q,createDocumentFragment:ee,getElementsByTagName:se}=r,{importNode:me}=n,ve=g_e();e.isSupported=typeof v_e=="function"&&typeof V=="function"&&j&&j.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:U,ERB_EXPR:$,TMPLIT_EXPR:he,DATA_ATTR:Ce,ARIA_ATTR:Se,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:we,CUSTOM_ELEMENT:Ue}=m_e,{IS_ALLOWED_URI:ye}=m_e,ne=null,st=Ni({},[...f_e,...wU,...SU,...EU,...h_e]),dt=null,lt=Ni({},[...d_e,...TU,...p_e,...pP]),kt=Object.seal(y_e(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ut=null,Ut=null,Wt=!0,Ht=!0,pr=!1,zr=!0,Jt=!1,Qr=!0,Br=!1,Rr=!1,Be=!1,Ge=!1,vt=!1,Kt=!1,rt=!0,Ct=!1,Tt="user-content-",ar=!0,er=!1,ir={},sr=null,He=Ni({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xe=null,Rt=Ni({},["audio","video","img","source","image","track"]),xr=null,Yn=Ni({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kn="http://www.w3.org/1998/Math/MathML",Cn="http://www.w3.org/2000/svg",wt="http://www.w3.org/1999/xhtml",Ot=wt,wr=!1,tr=null,on=Ni({},[kn,Cn,wt],xU),pn=Ni({},["mi","mo","mn","ms","mtext"]),tn=Ni({},["annotation-xml"]),Rn=Ni({},["title","style","font","a","script"]),Si=null,Ei=["application/xhtml+xml","text/html"],qe="text/html",ze=null,mt=null,Ft=r.createElement("form"),fr=function(_e){return _e instanceof RegExp||_e instanceof Function},yr=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(mt&&mt===_e)){if((!_e||typeof _e!="object")&&(_e={}),_e=Xb(_e),Si=Ei.indexOf(_e.PARSER_MEDIA_TYPE)===-1?qe:_e.PARSER_MEDIA_TYPE,ze=Si==="application/xhtml+xml"?xU:mP,ne=Wd(_e,"ALLOWED_TAGS")?Ni({},_e.ALLOWED_TAGS,ze):st,dt=Wd(_e,"ALLOWED_ATTR")?Ni({},_e.ALLOWED_ATTR,ze):lt,tr=Wd(_e,"ALLOWED_NAMESPACES")?Ni({},_e.ALLOWED_NAMESPACES,xU):on,xr=Wd(_e,"ADD_URI_SAFE_ATTR")?Ni(Xb(Yn),_e.ADD_URI_SAFE_ATTR,ze):Yn,Xe=Wd(_e,"ADD_DATA_URI_TAGS")?Ni(Xb(Rt),_e.ADD_DATA_URI_TAGS,ze):Rt,sr=Wd(_e,"FORBID_CONTENTS")?Ni({},_e.FORBID_CONTENTS,ze):He,ut=Wd(_e,"FORBID_TAGS")?Ni({},_e.FORBID_TAGS,ze):{},Ut=Wd(_e,"FORBID_ATTR")?Ni({},_e.FORBID_ATTR,ze):{},ir=Wd(_e,"USE_PROFILES")?_e.USE_PROFILES:!1,Wt=_e.ALLOW_ARIA_ATTR!==!1,Ht=_e.ALLOW_DATA_ATTR!==!1,pr=_e.ALLOW_UNKNOWN_PROTOCOLS||!1,zr=_e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jt=_e.SAFE_FOR_TEMPLATES||!1,Qr=_e.SAFE_FOR_XML!==!1,Br=_e.WHOLE_DOCUMENT||!1,Ge=_e.RETURN_DOM||!1,vt=_e.RETURN_DOM_FRAGMENT||!1,Kt=_e.RETURN_TRUSTED_TYPE||!1,Be=_e.FORCE_BODY||!1,rt=_e.SANITIZE_DOM!==!1,Ct=_e.SANITIZE_NAMED_PROPS||!1,ar=_e.KEEP_CONTENT!==!1,er=_e.IN_PLACE||!1,ye=_e.ALLOWED_URI_REGEXP||b_e,Ot=_e.NAMESPACE||wt,pn=_e.MATHML_TEXT_INTEGRATION_POINTS||pn,tn=_e.HTML_INTEGRATION_POINTS||tn,kt=_e.CUSTOM_ELEMENT_HANDLING||{},_e.CUSTOM_ELEMENT_HANDLING&&fr(_e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=_e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_e.CUSTOM_ELEMENT_HANDLING&&fr(_e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=_e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_e.CUSTOM_ELEMENT_HANDLING&&typeof _e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(kt.allowCustomizedBuiltInElements=_e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jt&&(Ht=!1),vt&&(Ge=!0),ir&&(ne=Ni({},h_e),dt=[],ir.html===!0&&(Ni(ne,f_e),Ni(dt,d_e)),ir.svg===!0&&(Ni(ne,wU),Ni(dt,TU),Ni(dt,pP)),ir.svgFilters===!0&&(Ni(ne,SU),Ni(dt,TU),Ni(dt,pP)),ir.mathMl===!0&&(Ni(ne,EU),Ni(dt,p_e),Ni(dt,pP))),_e.ADD_TAGS&&(ne===st&&(ne=Xb(ne)),Ni(ne,_e.ADD_TAGS,ze)),_e.ADD_ATTR&&(dt===lt&&(dt=Xb(dt)),Ni(dt,_e.ADD_ATTR,ze)),_e.ADD_URI_SAFE_ATTR&&Ni(xr,_e.ADD_URI_SAFE_ATTR,ze),_e.FORBID_CONTENTS&&(sr===He&&(sr=Xb(sr)),Ni(sr,_e.FORBID_CONTENTS,ze)),ar&&(ne["#text"]=!0),Br&&Ni(ne,["html","head","body"]),ne.table&&(Ni(ne,["tbody"]),delete ut.tbody),_e.TRUSTED_TYPES_POLICY){if(typeof _e.TRUSTED_TYPES_POLICY.createHTML!="function")throw RT('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw RT('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');p=_e.TRUSTED_TYPES_POLICY,K=p.createHTML("")}else p===void 0&&(p=p0t(P,i)),p!==null&&typeof K=="string"&&(K=p.createHTML(""));pc&&pc(_e),mt=_e}},an=Ni({},[...wU,...SU,...n0t]),Or=Ni({},[...EU,...i0t]),bn=function(_e){let fe=V(_e);(!fe||!fe.tagName)&&(fe={namespaceURI:Ot,tagName:"template"});let Ie=mP(_e.tagName),nt=mP(fe.tagName);return tr[_e.namespaceURI]?_e.namespaceURI===Cn?fe.namespaceURI===wt?Ie==="svg":fe.namespaceURI===kn?Ie==="svg"&&(nt==="annotation-xml"||pn[nt]):!!an[Ie]:_e.namespaceURI===kn?fe.namespaceURI===wt?Ie==="math":fe.namespaceURI===Cn?Ie==="math"&&tn[nt]:!!Or[Ie]:_e.namespaceURI===wt?fe.namespaceURI===Cn&&!tn[nt]||fe.namespaceURI===kn&&!pn[nt]?!1:!Or[Ie]&&(Rn[Ie]||!an[Ie]):!!(Si==="application/xhtml+xml"&&tr[_e.namespaceURI]):!1},Pr=function(_e){MT(e.removed,{element:_e});try{V(_e).removeChild(_e)}catch{W(_e)}},Yr=function(_e,fe){try{MT(e.removed,{attribute:fe.getAttributeNode(_e),from:fe})}catch{MT(e.removed,{attribute:null,from:fe})}if(fe.removeAttribute(_e),_e==="is")if(Ge||vt)try{Pr(fe)}catch{}else try{fe.setAttribute(_e,"")}catch{}},Sn=function(_e){let fe=null,Ie=null;if(Be)_e="<remove></remove>"+_e;else{let Vt=c_e(_e,/^[\r\n\t ]+/);Ie=Vt&&Vt[0]}Si==="application/xhtml+xml"&&Ot===wt&&(_e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_e+"</body></html>");let nt=p?p.createHTML(_e):_e;if(Ot===wt)try{fe=new I().parseFromString(nt,Si)}catch{}if(!fe||!fe.documentElement){fe=j.createDocument(Ot,"template",null);try{fe.documentElement.innerHTML=wr?K:nt}catch{}}let zt=fe.body||fe.documentElement;return _e&&Ie&&zt.insertBefore(r.createTextNode(Ie),zt.childNodes[0]||null),Ot===wt?se.call(fe,Br?"html":"body")[0]:Br?fe.documentElement:zt},ii=function(_e){return Q.call(_e.ownerDocument||_e,_e,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},Xn=function(_e){return _e instanceof T&&(typeof _e.nodeName!="string"||typeof _e.textContent!="string"||typeof _e.removeChild!="function"||!(_e.attributes instanceof w)||typeof _e.removeAttribute!="function"||typeof _e.setAttribute!="function"||typeof _e.namespaceURI!="string"||typeof _e.insertBefore!="function"||typeof _e.hasChildNodes!="function")},ha=function(_e){return typeof u=="function"&&_e instanceof u};function xn(Pe,_e,fe){dP(Pe,Ie=>{Ie.call(e,_e,fe,mt)})}let pe=function(_e){let fe=null;if(xn(ve.beforeSanitizeElements,_e,null),Xn(_e))return Pr(_e),!0;let Ie=ze(_e.nodeName);if(xn(ve.uponSanitizeElement,_e,{tagName:Ie,allowedTags:ne}),_e.hasChildNodes()&&!ha(_e.firstElementChild)&&dc(/<[/\w]/g,_e.innerHTML)&&dc(/<[/\w]/g,_e.textContent)||_e.nodeType===qT.progressingInstruction||Qr&&_e.nodeType===qT.comment&&dc(/<[/\w]/g,_e.data))return Pr(_e),!0;if(!ne[Ie]||ut[Ie]){if(!ut[Ie]&&ke(Ie)&&(kt.tagNameCheck instanceof RegExp&&dc(kt.tagNameCheck,Ie)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(Ie)))return!1;if(ar&&!sr[Ie]){let nt=V(_e)||_e.parentNode,zt=q(_e)||_e.childNodes;if(zt&&nt){let Vt=zt.length;for(let pt=Vt-1;pt>=0;--pt){let _t=R(zt[pt],!0);_t.__removalCount=(_e.__removalCount||0)+1,nt.insertBefore(_t,G(_e))}}}return Pr(_e),!0}return _e instanceof h&&!bn(_e)||(Ie==="noscript"||Ie==="noembed"||Ie==="noframes")&&dc(/<\/no(script|embed|frames)/i,_e.innerHTML)?(Pr(_e),!0):(Jt&&_e.nodeType===qT.text&&(fe=_e.textContent,dP([U,$,he],nt=>{fe=LT(fe,nt," ")}),_e.textContent!==fe&&(MT(e.removed,{element:_e.cloneNode()}),_e.textContent=fe)),xn(ve.afterSanitizeElements,_e,null),!1)},Ee=function(_e,fe,Ie){if(rt&&(fe==="id"||fe==="name")&&(Ie in r||Ie in Ft))return!1;if(!(Ht&&!Ut[fe]&&dc(Ce,fe))){if(!(Wt&&dc(Se,fe))){if(!dt[fe]||Ut[fe]){if(!(ke(_e)&&(kt.tagNameCheck instanceof RegExp&&dc(kt.tagNameCheck,_e)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(_e))&&(kt.attributeNameCheck instanceof RegExp&&dc(kt.attributeNameCheck,fe)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(fe))||fe==="is"&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&dc(kt.tagNameCheck,Ie)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(Ie))))return!1}else if(!xr[fe]){if(!dc(ye,LT(Ie,we,""))){if(!((fe==="src"||fe==="xlink:href"||fe==="href")&&_e!=="script"&&Qbt(Ie,"data:")===0&&Xe[_e])){if(!(pr&&!dc(de,LT(Ie,we,"")))){if(Ie)return!1}}}}}}return!0},ke=function(_e){return _e!=="annotation-xml"&&c_e(_e,Ue)},oe=function(_e){xn(ve.beforeSanitizeAttributes,_e,null);let{attributes:fe}=_e;if(!fe||Xn(_e))return;let Ie={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:dt,forceKeepAttr:void 0},nt=fe.length;for(;nt--;){let zt=fe[nt],{name:Vt,namespaceURI:pt,value:_t}=zt,_r=ze(Vt),dr=Vt==="value"?_t:e0t(_t);if(Ie.attrName=_r,Ie.attrValue=dr,Ie.keepAttr=!0,Ie.forceKeepAttr=void 0,xn(ve.uponSanitizeAttribute,_e,Ie),dr=Ie.attrValue,Ct&&(_r==="id"||_r==="name")&&(Yr(Vt,_e),dr=Tt+dr),Qr&&dc(/((--!?|])>)|<\/(style|title)/i,dr)){Yr(Vt,_e);continue}if(Ie.forceKeepAttr||(Yr(Vt,_e),!Ie.keepAttr))continue;if(!zr&&dc(/\/>/i,dr)){Yr(Vt,_e);continue}Jt&&dP([U,$,he],ce=>{dr=LT(dr,ce," ")});let Mt=ze(_e.nodeName);if(Ee(Mt,_r,dr)){if(p&&typeof P=="object"&&typeof P.getAttributeType=="function"&&!pt)switch(P.getAttributeType(Mt,_r)){case"TrustedHTML":{dr=p.createHTML(dr);break}case"TrustedScriptURL":{dr=p.createScriptURL(dr);break}}try{pt?_e.setAttributeNS(pt,Vt,dr):_e.setAttribute(Vt,dr),Xn(_e)?Pr(_e):u_e(e.removed)}catch{}}}xn(ve.afterSanitizeAttributes,_e,null)},Fe=function Pe(_e){let fe=null,Ie=ii(_e);for(xn(ve.beforeSanitizeShadowDOM,_e,null);fe=Ie.nextNode();)xn(ve.uponSanitizeShadowNode,fe,null),pe(fe),oe(fe),fe.content instanceof o&&Pe(fe.content);xn(ve.afterSanitizeShadowDOM,_e,null)};return e.sanitize=function(Pe){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fe=null,Ie=null,nt=null,zt=null;if(wr=!Pe,wr&&(Pe="<!-->"),typeof Pe!="string"&&!ha(Pe))if(typeof Pe.toString=="function"){if(Pe=Pe.toString(),typeof Pe!="string")throw RT("dirty is not a string, aborting")}else throw RT("toString is not a function");if(!e.isSupported)return Pe;if(Rr||yr(_e),e.removed=[],typeof Pe=="string"&&(er=!1),er){if(Pe.nodeName){let _t=ze(Pe.nodeName);if(!ne[_t]||ut[_t])throw RT("root node is forbidden and cannot be sanitized in-place")}}else if(Pe instanceof u)fe=Sn("<!---->"),Ie=fe.ownerDocument.importNode(Pe,!0),Ie.nodeType===qT.element&&Ie.nodeName==="BODY"||Ie.nodeName==="HTML"?fe=Ie:fe.appendChild(Ie);else{if(!Ge&&!Jt&&!Br&&Pe.indexOf("<")===-1)return p&&Kt?p.createHTML(Pe):Pe;if(fe=Sn(Pe),!fe)return Ge?null:Kt?K:""}fe&&Be&&Pr(fe.firstChild);let Vt=ii(er?Pe:fe);for(;nt=Vt.nextNode();)pe(nt),oe(nt),nt.content instanceof o&&Fe(nt.content);if(er)return Pe;if(Ge){if(vt)for(zt=ee.call(fe.ownerDocument);fe.firstChild;)zt.appendChild(fe.firstChild);else zt=fe;return(dt.shadowroot||dt.shadowrootmode)&&(zt=me.call(n,zt,!0)),zt}let pt=Br?fe.outerHTML:fe.innerHTML;return Br&&ne["!doctype"]&&fe.ownerDocument&&fe.ownerDocument.doctype&&fe.ownerDocument.doctype.name&&dc(__e,fe.ownerDocument.doctype.name)&&(pt="<!DOCTYPE "+fe.ownerDocument.doctype.name+`>
`+pt),Jt&&dP([U,$,he],_t=>{pt=LT(pt,_t," ")}),p&&Kt?p.createHTML(pt):pt},e.setConfig=function(){let Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yr(Pe),Rr=!0},e.clearConfig=function(){mt=null,Rr=!1},e.isValidAttribute=function(Pe,_e,fe){mt||yr({});let Ie=ze(Pe),nt=ze(_e);return Ee(Ie,nt,fe)},e.addHook=function(Pe,_e){typeof _e=="function"&&MT(ve[Pe],_e)},e.removeHook=function(Pe,_e){if(_e!==void 0){let fe=Xbt(ve[Pe],_e);return fe===-1?void 0:Jbt(ve[Pe],fe,1)[0]}return u_e(ve[Pe])},e.removeHooks=function(Pe){ve[Pe]=[]},e.removeAllHooks=function(){ve=g_e()},e}var CU=x_e();var gP=class extends Lr{static targets=["input","controller","rows"];fieldValue=[];options={};get keyInputDisabled(){return!this.options.editable||this.options.disable_editing_keys}get valueInputDisabled(){return!this.options.editable}connect(){this.setOptions();try{let t=JSON.parse(this.inputTarget.value);Object.keys(t).forEach(e=>this.fieldValue.push([e,t[e]]))}catch{this.fieldValue=[]}this.updateKeyValueComponent()}addRow(){this.options.disable_adding_rows||!this.options.editable||(this.fieldValue.push(["",""]),this.updateKeyValueComponent(),this.focusLastRow())}deleteRow(t){if(this.options.disable_deleting_rows||!this.options.editable)return;let{index:e}=t.params;this.fieldValue.splice(e,1),this.updateTextareaInput(),this.updateKeyValueComponent()}focusLastRow(){return this.rowsTarget.querySelector(".flex.key-value-row:last-child .key-value-input-key").focus()}valueFieldUpdated(t){let{value:e}=t.target,{index:r}=t.target.dataset;this.fieldValue[r][1]=e,this.updateTextareaInput()}keyFieldUpdated(t){let{value:e}=t.target,{index:r}=t.target.dataset;this.fieldValue[r][0]=e,this.updateTextareaInput()}updateTextareaInput(){if(!this.hasInputTarget)return;let t={};this.fieldValue&&this.fieldValue.length>0&&(t=Object.assign(...this.fieldValue.map(([e,r])=>({[e]:r})))),this.inputTarget.innerText=JSON.stringify(t),this.inputTarget.dispatchEvent(new Event("input"))}updateKeyValueComponent(){let t="",e=0;this.fieldValue.forEach(r=>{let[n,i]=r;t+=this.interpolatedRow(CU.sanitize(n),CU.sanitize(i),e),e++}),this.rowsTarget.innerHTML=t,window.initTippy()}interpolatedRow(t,e,r){let n=`<div class="flex key-value-row">
      ${this.inputField("key",r,t,e)}
      ${this.inputField("value",r,t,e)}`;return this.options.editable&&(n+=`<a
  href="javascript:void(0);"
  data-key-value-index-param="${r}"
  data-action="click->key-value#deleteRow"
  title="${this.options.delete_text}"
  data-tippy="tooltip"
  data-button="delete-row"
  tabindex="-1"
  ${this.options.disable_deleting_rows?"disabled='disabled'":""}
  class="flex items-center justify-center p-2 px-3 border-none ${this.options.disable_deleting_rows?"cursor-not-allowed":""}"
><svg class="pointer-events-none text-gray-500 h-5 hover:text-gray-500" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor"><path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></a>`),n+="</div>",n}inputField(t="key",e,r,n){let i=t==="key"?r:n;return`<input
  class="${this.options.inputClasses} focus:bg-gray-100 !rounded-none border-gray-600 border-r border-l-0 border-b-0 border-t-0 focus:border-gray-300 w-1/2 focus:outline-none outline-none key-value-input-${t}"
  data-action="input->key-value#${t}FieldUpdated"
  placeholder="${this.options[`${t}_label`]}"
  data-index="${e}"
  ${this[`${t}InputDisabled`]?"disabled='disabled'":""}
  value="${typeof i>"u"||i===null?"":i.replace(/[<>&"]/g,function(o){return{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;"}[o]})}" />`}setOptions(){let t;try{t=JSON.parse(this.controllerTarget.dataset.options)}catch{t={}}this.options={...t,inputClasses:this.controllerTarget.dataset.inputClasses,editable:hc(this.controllerTarget.dataset.editable)}}};var vP=class extends Lr{spinnerMarkup=`<div class="button-spinner">
  <div class="double-bounce1"></div>
  <div class="double-bounce2"></div>
</div>`;static values={confirmationMessage:String,confirmed:Boolean};attemptSubmit(t){return this.confirmationMessageValue?this.confirmAndApply(t):this.applyLoader(),null}confirmAndApply(t){this.confirmedValue||(t.preventDefault(),window.confirm(this.confirmationMessageValue)&&this.applyLoader())}get button(){return this.context.scope.element}applyLoader(){let{button:t}=this;t.style.width=`${t.getBoundingClientRect().width}px`,t.style.height=`${t.getBoundingClientRect().height}px`,t.innerHTML=this.spinnerMarkup,t.classList.add("justify-center"),setTimeout(()=>{this.markConfirmed(),t.click(),t.setAttribute("disabled","disabled")},1)}markConfirmed(){this.confirmedValue=!0}markUnconfirmed(){this.confirmedValue=!1}};var yP=class extends Lr{static targets=["svg","items","self"];collapsed=!0;get key(){return this.selfTarget.getAttribute("data-menu-key-param")}get defaultState(){return this.selfTarget.getAttribute("data-menu-default-collapsed-state")}get userState(){return window.localStorage.getItem(this.key)}set userState(t){window.localStorage.setItem(this.key,t)}get initiallyCollapsed(){return this.userState?this.userState==="collapsed":this.defaultState==="collapsed"}connect(){this.initiallyCollapsed?(this.collapsed=!0,this.markCollapsed()):(this.collapsed=!1,this.markExpanded())}triggerCollapse(){this.collapsed=!this.collapsed,this.userState=this.collapsed?"collapsed":"expanded",this.updateDom()}updateDom(){this.collapsed?this.markCollapsed():this.markExpanded()}markCollapsed(){this.svgTarget.classList.add("rotate-90"),this.itemsTarget.classList.add("hidden")}markExpanded(){this.svgTarget.classList.remove("rotate-90"),this.itemsTarget.classList.remove("hidden")}};var bP=class extends Lr{static targets=["modal"];close(){this.modalTarget.remove(),document.dispatchEvent(new Event("actions-modal:close"))}delayedClose(){let t=this;setTimeout(()=>{t.modalTarget.remove(),document.dispatchEvent(new Event("actions-modal:close"))},500)}};var _P=class extends Gh{static targets=["selector"];getFilterValue(){let t=Array.from(this.selectorTarget.selectedOptions).map(({value:e})=>e);return t.length===0?null:t}getFilterClass(){let{filterClass:t}=this.selectorTarget.dataset;return t}};var xP=class extends Lr{static targets=["selector"];get turboFrame(){return this.selectorTarget.dataset.turboFrame}reload(){document.querySelector(`[data-per-page-option="${this.selectorTarget.value}"][data-turbo-frame="${this.turboFrame}"]`).click()}};var wP=class extends Lr{static targets=["label"];update(t){this.labelTarget.textContent=t.target.value}};var SP=class extends Lr{static values={polymorphic:Boolean,searchable:Boolean,targetName:String,relationName:String};beforeStreamRender(t){let{relationName:e}=t.target.dataset;if(t.target.action!=="update-belongs-to"||this.relationNameValue!==e)return!1;t.detail.render=r=>{this.searchableValue?this.updateSearchable(r):this.updateNonSearchable(r)}}updateSearchable(t){document.querySelector(`input[name="${this.targetNameValue}"][type="hidden"]`).value=t.dataset.targetResourceId,document.querySelector(`input[name="${this.targetNameValue}"][type="text"]`).value=t.dataset.targetResourceLabel}updateNonSearchable(t){let e=this.selectorContext(t).querySelector(`select[name="${this.targetNameValue}"]`),r=document.createElement("option");r.value=t.dataset.targetResourceId,r.text=t.dataset.targetResourceLabel,r.selected=!0,e.appendChild(r)}selectorContext(t){return this.polymorphicValue?document.querySelector(`[data-type="${t.dataset.targetResourceClass}"]`):document}};var PU=ua(n1e()),TP=class extends Lr{static targets=[];static values={view:String};debugOnInput(t){console.log("onInput",t,t.target.value)}toggle({params:t}){let{toggleTarget:e,toggleTargets:r}=t;e&&this.toggleJavTarget(e),r&&r.length>0&&r.forEach(this.toggleJavTarget.bind(this))}disable({params:t}){let{disableTarget:e,disableTargets:r}=t;e&&this.disableJavTarget(e),r&&r.length>0&&r.forEach(this.disableJavTarget.bind(this))}toggleJavTarget(t){let e=(0,PU.default)(t),r=document.querySelector(`[data-resource-edit-target="${e}"]`);r&&r.classList.toggle("hidden")}disableJavTarget(t){let e=(0,PU.default)(t);document.querySelectorAll(`[data-resource-edit-target="${e}"]`).forEach(this.toggleItemDisabled),document.querySelectorAll(`[data-resource-edit-target="${e}"] input`).forEach(this.toggleItemDisabled),document.querySelectorAll(`[data-resource-edit-target="${e}"] select`).forEach(this.toggleItemDisabled),document.querySelectorAll(`[data-resource-edit-target="${e}"] [data-slot="value"] button`).forEach(this.toggleItemDisabled)}toggleItemDisabled(t){t.disabled=!t.disabled}};var AP=class extends Lr{};var kP=class extends Lr{};var oSe=ua(Iz());function Jb(t){return{current:t}}function u1(t,e){var r=void 0;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];r&&clearTimeout(r),r=setTimeout(function(){return t.apply(void 0,i)},e)}}function Mxt(t,e){return qxt(t)||Fxt(t,e)||Rxt(t,e)||Lxt()}function Lxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rxt(t,e){if(t){if(typeof t=="string")return i1e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i1e(t,e)}}function i1e(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Fxt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,u=[],h=!0,y=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(w){y=!0,i=w}finally{try{if(!h&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(y)throw i}}return u}}function qxt(t){if(Array.isArray(t))return t}function c1(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:new Set;return t;var r}function _g(t){return t.reduce(function(e,r){return e.concat(r)},[])}var Nxt=0;function CP(){return"autocomplete-".concat(Nxt++)}function f1(t,e){return e.reduce(function(r,n){return r&&r[n]},t)}function ly(t){return t.collections.length===0?0:t.collections.reduce(function(e,r){return e+r.items.length},0)}function o1e(t){return t!==Object(t)}function MU(t,e){if(t===e)return!0;if(o1e(t)||o1e(e)||typeof t=="function"||typeof e=="function")return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(!(i in e)||!MU(t[i],e[i]))return!1}return!0}var Qb=function(){};function a1e(t){if(typeof window<"u")return t({window})}var IP="1.18.1";var s1e=[{segment:"autocomplete-core",version:IP}];function LU(t){var e=t.item,r=t.items,n=r===void 0?[]:r;return{index:e.__autocomplete_indexName,items:[e],positions:[1+n.findIndex(function(i){return i.objectID===e.objectID})],queryID:e.__autocomplete_queryID,algoliaSource:["autocomplete"]}}function Bxt(t,e){return Vxt(t)||Uxt(t,e)||jxt(t,e)||zxt()}function zxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jxt(t,e){if(t){if(typeof t=="string")return l1e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l1e(t,e)}}function l1e(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Uxt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,u=[],h=!0,y=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(w){y=!0,i=w}finally{try{if(!h&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(y)throw i}}return u}}function Vxt(t){if(Array.isArray(t))return t}function u1e(t){var e=(t.version||"").split(".").map(Number),r=Bxt(e,2),n=r[0],i=r[1],o=n>=3,s=n===2&&i>=4,u=n===1&&i>=10;return o||s||u}var Hxt=["items"],Wxt=["items"];function zT(t){"@babel/helpers - typeof";return zT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zT(t)}function DP(t){return Zxt(t)||Kxt(t)||Gxt(t)||$xt()}function $xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gxt(t,e){if(t){if(typeof t=="string")return RU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RU(t,e)}}function Kxt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Zxt(t){if(Array.isArray(t))return RU(t)}function RU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f1e(t,e){if(t==null)return{};var r=Yxt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yxt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function c1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function h1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?c1e(Object(r),!0).forEach(function(n){Xxt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xxt(t,e,r){return e=Jxt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jxt(t){var e=Qxt(t,"string");return zT(e)==="symbol"?e:String(e)}function Qxt(t,e){if(zT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(zT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function e1t(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,r=[],n=0;n<t.objectIDs.length;n+=e)r.push(h1(h1({},t),{},{objectIDs:t.objectIDs.slice(n,n+e)}));return r}function OP(t){return t.map(function(e){var r=e.items,n=f1e(e,Hxt);return h1(h1({},n),{},{objectIDs:r?.map(function(i){var o=i.objectID;return o})||n.objectIDs})})}function h1e(t){var e=u1e(t);function r(n,i,o){if(e&&typeof o<"u"){var s=o[0].__autocomplete_algoliaCredentials,u=s.appId,h=s.apiKey,y={"X-Algolia-Application-Id":u,"X-Algolia-API-Key":h};t.apply(void 0,[n].concat(DP(i),[{headers:y}]))}else t.apply(void 0,[n].concat(DP(i)))}return{init:function(i,o){t("init",{appId:i,apiKey:o})},setAuthenticatedUserToken:function(i){t("setAuthenticatedUserToken",i)},setUserToken:function(i){t("setUserToken",i)},clickedObjectIDsAfterSearch:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&r("clickedObjectIDsAfterSearch",OP(o),o[0].items)},clickedObjectIDs:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&r("clickedObjectIDs",OP(o),o[0].items)},clickedFilters:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&t.apply(void 0,["clickedFilters"].concat(o))},convertedObjectIDsAfterSearch:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&r("convertedObjectIDsAfterSearch",OP(o),o[0].items)},convertedObjectIDs:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&r("convertedObjectIDs",OP(o),o[0].items)},convertedFilters:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&t.apply(void 0,["convertedFilters"].concat(o))},viewedObjectIDs:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&o.reduce(function(u,h){var y=h.items,w=f1e(h,Wxt);return[].concat(DP(u),DP(e1t(h1(h1({},w),{},{objectIDs:y?.map(function(T){var I=T.objectID;return I})||w.objectIDs})).map(function(T){return{items:y,payload:T}})))},[]).forEach(function(u){var h=u.items,y=u.payload;return r("viewedObjectIDs",[y],h)})},viewedFilters:function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];o.length>0&&t.apply(void 0,["viewedFilters"].concat(o))}}}function d1e(t){var e=t.items,r=e.reduce(function(n,i){var o;return n[i.__autocomplete_indexName]=((o=n[i.__autocomplete_indexName])!==null&&o!==void 0?o:[]).concat(i),n},{});return Object.keys(r).map(function(n){var i=r[n];return{index:n,items:i,algoliaSource:["autocomplete"]}})}function d1(t){return t.objectID&&t.__autocomplete_indexName&&t.__autocomplete_queryID}function jT(t){"@babel/helpers - typeof";return jT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jT(t)}function p1(t){return i1t(t)||n1t(t)||r1t(t)||t1t()}function t1t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r1t(t,e){if(t){if(typeof t=="string")return FU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FU(t,e)}}function n1t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function i1t(t){if(Array.isArray(t))return FU(t)}function FU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function $d(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?p1e(Object(r),!0).forEach(function(n){o1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function o1t(t,e,r){return e=a1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a1t(t){var e=s1t(t,"string");return jT(e)==="symbol"?e:String(e)}function s1t(t,e){if(jT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(jT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var l1t=400,g1e="2.15.0",u1t="https://cdn.jsdelivr.net/npm/search-insights@".concat(g1e,"/dist/search-insights.min.js"),c1t=u1(function(t){var e=t.onItemsChange,r=t.items,n=t.insights,i=t.state;e({insights:n,insightsEvents:d1e({items:r}).map(function(o){return $d({eventName:"Items Viewed"},o)}),state:i})},l1t);function qU(t){var e=f1t(t),r=e.insightsClient,n=e.insightsInitParams,i=e.onItemsChange,o=e.onSelect,s=e.onActive,u=e.__autocomplete_clickAnalytics,h=r;if(r||a1e(function(I){var P=I.window,L=P.AlgoliaAnalyticsObject||"aa";typeof L=="string"&&(h=P[L]),h||(P.AlgoliaAnalyticsObject=L,P[L]||(P[L]=function(){P[L].queue||(P[L].queue=[]);for(var R=arguments.length,W=new Array(R),G=0;G<R;G++)W[G]=arguments[G];P[L].queue.push(W)}),P[L].version=g1e,h=P[L],h1t(P))}),!h)return{};n&&h("init",$d({partial:!0},n));var y=h1e(h),w=Jb([]),T=u1(function(I){var P=I.state;if(P.isOpen){var L=P.collections.reduce(function(R,W){return[].concat(p1(R),p1(W.items))},[]).filter(d1);MU(w.current.map(function(R){return R.objectID}),L.map(function(R){return R.objectID}))||(w.current=L,L.length>0&&c1t({onItemsChange:i,items:L,insights:y,state:P}))}},0);return{name:"aa.algoliaInsightsPlugin",subscribe:function(P){var L=P.setContext,R=P.onSelect,W=P.onActive;function G(q){L({algoliaInsightsPlugin:{__algoliaSearchParameters:$d($d({},u?{clickAnalytics:!0}:{}),q?{userToken:d1t(q)}:{}),insights:y}})}h("addAlgoliaAgent","insights-plugin"),G(),h("onUserTokenChange",function(q){G(q)}),h("getUserToken",null,function(q,V){G(V)}),R(function(q){var V=q.item,p=q.state,K=q.event,j=q.source;d1(V)&&o({state:p,event:K,insights:y,item:V,insightsEvents:[$d({eventName:"Item Selected"},LU({item:V,items:j.getItems().filter(d1)}))]})}),W(function(q){var V=q.item,p=q.source,K=q.state,j=q.event;d1(V)&&s({state:K,event:j,insights:y,item:V,insightsEvents:[$d({eventName:"Item Active"},LU({item:V,items:p.getItems().filter(d1)}))]})})},onStateChange:function(P){var L=P.state;T({state:L})},__autocomplete_pluginOptions:t}}function m1e(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;return[].concat(p1(e),["autocomplete-internal"],p1((t=r.algoliaInsightsPlugin)!==null&&t!==void 0&&t.__automaticInsights?["autocomplete-automatic"]:[]))}function f1t(t){return $d({onItemsChange:function(r){var n=r.insights,i=r.insightsEvents,o=r.state;n.viewedObjectIDs.apply(n,p1(i.map(function(s){return $d($d({},s),{},{algoliaSource:m1e(s.algoliaSource,o.context)})})))},onSelect:function(r){var n=r.insights,i=r.insightsEvents,o=r.state;n.clickedObjectIDsAfterSearch.apply(n,p1(i.map(function(s){return $d($d({},s),{},{algoliaSource:m1e(s.algoliaSource,o.context)})})))},onActive:Qb,__autocomplete_clickAnalytics:!0},t)}function h1t(t){var e="[Autocomplete]: Could not load search-insights.js. Please load it manually following https://alg.li/insights-autocomplete";try{var r=t.document.createElement("script");r.async=!0,r.src=u1t,r.onerror=function(){console.error(e)},document.body.appendChild(r)}catch{console.error(e)}}function d1t(t){return typeof t=="number"?t.toString():t}function UT(t,e){var r=e;return{then:function(i,o){return UT(t.then(PP(i,r,t),PP(o,r,t)),r)},catch:function(i){return UT(t.catch(PP(i,r,t)),r)},finally:function(i){return i&&r.onCancelList.push(i),UT(t.finally(PP(i&&function(){return r.onCancelList=[],i()},r,t)),r)},cancel:function(){r.isCanceled=!0;var i=r.onCancelList;r.onCancelList=[],i.forEach(function(o){o()})},isCanceled:function(){return r.isCanceled===!0}}}function v1e(t){return UT(new Promise(function(e,r){return t(e,r)}),{isCanceled:!1,onCancelList:[]})}v1e.resolve=function(t){return VT(Promise.resolve(t))};v1e.reject=function(t){return VT(Promise.reject(t))};function VT(t){return UT(t,{isCanceled:!1,onCancelList:[]})}function PP(t,e,r){return t?function(i){return e.isCanceled?i:t(i)}:r}function y1e(){var t=[];return{add:function(r){return t.push(r),r.finally(function(){t=t.filter(function(n){return n!==r})})},cancelAll:function(){t.forEach(function(r){return r.cancel()})},isEmpty:function(){return t.length===0}}}function b1e(){var t=-1,e=-1,r=void 0;return function(i){t++;var o=t;return Promise.resolve(i).then(function(s){return r&&o<e?r:(e=o,r=s,s)})}}function NU(t,e,r,n){if(!r)return null;if(t<0&&(e===null||n!==null&&e===0))return r+t;var i=(e===null?-1:e)+t;return i<=-1||i>=r?n===null?null:0:i}function _1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function x1e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_1e(Object(r),!0).forEach(function(n){p1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function p1t(t,e,r){return e=m1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function m1t(t){var e=g1t(t,"string");return m1(e)==="symbol"?e:String(e)}function g1t(t,e){if(m1(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(m1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function m1(t){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m1(t)}function w1e(t,e){var r=[];return Promise.resolve(t(e)).then(function(n){return Array.isArray(n),Promise.all(n.filter(function(i){return!!i}).map(function(i){if(i.sourceId,r.includes(i.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(i.sourceId)," is not unique."));r.push(i.sourceId);var o={getItemInputValue:function(h){var y=h.state;return y.query},getItemUrl:function(){},onSelect:function(h){var y=h.setIsOpen;y(!1)},onActive:Qb,onResolve:Qb};Object.keys(o).forEach(function(u){o[u].__default=!0});var s=x1e(x1e({},o),i);return Promise.resolve(s)}))})}function v1t(t){var e=t.collections.map(function(n){return n.items.length}).reduce(function(n,i,o){var s=n[o-1]||0,u=s+i;return n.push(u),n},[]),r=e.reduce(function(n,i){return i<=t.activeItemId?n+1:n},0);return t.collections[r]}function y1t(t){for(var e=t.state,r=t.collection,n=!1,i=0,o=0;n===!1;){var s=e.collections[i];if(s===r){n=!0;break}o+=s.items.length,i++}return e.activeItemId-o}function Gd(t){var e=v1t(t);if(!e)return null;var r=e.items[y1t({state:t,collection:e})],n=e.source,i=n.getItemInputValue({item:r,state:t}),o=n.getItemUrl({item:r,state:t});return{item:r,itemInputValue:i,itemUrl:o,source:n}}function ef(t,e,r){return[t,r?.sourceId,e].filter(Boolean).join("-").replace(/\s/g,"")}function S1e(t,e){return t===e||t.contains(e)}var b1t=/((gt|sm)-|galaxy nexus)|samsung[- ]|samsungbrowser/i;function E1e(t){return!!(t&&t.match(b1t))}function T1e(t){return{results:t,hits:t.map(function(e){return e.hits}).filter(Boolean),facetHits:t.map(function(e){var r;return(r=e.facetHits)===null||r===void 0?void 0:r.map(function(n){return{label:n.value,count:n.count,_highlightResult:{label:{value:n.highlighted}}}})}).filter(Boolean)}}function zU(t){return t.nativeEvent||t}function HT(t){"@babel/helpers - typeof";return HT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},HT(t)}function A1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function _1t(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?A1e(Object(r),!0).forEach(function(n){x1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):A1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function x1t(t,e,r){return e=w1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w1t(t){var e=S1t(t,"string");return HT(e)==="symbol"?e:String(e)}function S1t(t,e){if(HT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(HT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function k1e(t,e,r){var n=e.initialState;return{getState:function(){return n},dispatch:function(o,s){var u=_1t({},n);n=t(n,{type:o,props:e,payload:s}),r({state:n,prevState:u})},pendingRequests:y1e()}}function WT(t){"@babel/helpers - typeof";return WT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},WT(t)}function C1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function MP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?C1e(Object(r),!0).forEach(function(n){E1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):C1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function E1t(t,e,r){return e=T1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function T1t(t){var e=A1t(t,"string");return WT(e)==="symbol"?e:String(e)}function A1t(t,e){if(WT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(WT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function I1e(t){var e=t.store,r=function(y){e.dispatch("setActiveItemId",y)},n=function(y){e.dispatch("setQuery",y)},i=function(y){var w=0,T=y.map(function(I){return MP(MP({},I),{},{items:_g(I.items).map(function(P){return MP(MP({},P),{},{__autocomplete_id:w++})})})});e.dispatch("setCollections",T)},o=function(y){e.dispatch("setIsOpen",y)},s=function(y){e.dispatch("setStatus",y)},u=function(y){e.dispatch("setContext",y)};return{setActiveItemId:r,setQuery:n,setCollections:i,setIsOpen:o,setStatus:s,setContext:u}}function $T(t){"@babel/helpers - typeof";return $T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$T(t)}function k1t(t){return O1t(t)||D1t(t)||I1t(t)||C1t()}function C1t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I1t(t,e){if(t){if(typeof t=="string")return jU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jU(t,e)}}function D1t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function O1t(t){if(Array.isArray(t))return jU(t)}function jU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function g1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?D1e(Object(r),!0).forEach(function(n){P1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function P1t(t,e,r){return e=M1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function M1t(t){var e=L1t(t,"string");return $T(e)==="symbol"?e:String(e)}function L1t(t,e){if($T(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if($T(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O1e(t,e){var r,n=typeof window<"u"?window:{},i=t.plugins||[];return g1(g1({debug:!1,openOnFocus:!1,enterKeyHint:void 0,ignoreCompositionEvents:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,insights:void 0,environment:n,shouldPanelOpen:function(s){var u=s.state;return ly(u)>0},reshape:function(s){var u=s.sources;return u}},t),{},{id:(r=t.id)!==null&&r!==void 0?r:CP(),plugins:i,initialState:g1({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},t.initialState),onStateChange:function(s){var u;(u=t.onStateChange)===null||u===void 0||u.call(t,s),i.forEach(function(h){var y;return(y=h.onStateChange)===null||y===void 0?void 0:y.call(h,s)})},onSubmit:function(s){var u;(u=t.onSubmit)===null||u===void 0||u.call(t,s),i.forEach(function(h){var y;return(y=h.onSubmit)===null||y===void 0?void 0:y.call(h,s)})},onReset:function(s){var u;(u=t.onReset)===null||u===void 0||u.call(t,s),i.forEach(function(h){var y;return(y=h.onReset)===null||y===void 0?void 0:y.call(h,s)})},getSources:function(s){return Promise.all([].concat(k1t(i.map(function(u){return u.getSources})),[t.getSources]).filter(Boolean).map(function(u){return w1e(u,s)})).then(function(u){return _g(u)}).then(function(u){return u.map(function(h){return g1(g1({},h),{},{onSelect:function(w){h.onSelect(w),e.forEach(function(T){var I;return(I=T.onSelect)===null||I===void 0?void 0:I.call(T,w)})},onActive:function(w){h.onActive(w),e.forEach(function(T){var I;return(I=T.onActive)===null||I===void 0?void 0:I.call(T,w)})},onResolve:function(w){h.onResolve(w),e.forEach(function(T){var I;return(I=T.onResolve)===null||I===void 0?void 0:I.call(T,w)})}})})})},navigator:g1({navigate:function(s){var u=s.itemUrl;n.location.assign(u)},navigateNewTab:function(s){var u=s.itemUrl,h=n.open(u,"_blank","noopener");h?.focus()},navigateNewWindow:function(s){var u=s.itemUrl;n.open(u,"_blank","noopener")}},t.navigator)})}function GT(t){"@babel/helpers - typeof";return GT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},GT(t)}function P1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function LP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?P1e(Object(r),!0).forEach(function(n){M1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function M1e(t,e,r){return e=R1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function R1t(t){var e=F1t(t,"string");return GT(e)==="symbol"?e:String(e)}function F1t(t,e){if(GT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(GT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L1e(t){var e=t.collections,r=t.props,n=t.state,i=e.reduce(function(h,y){return LP(LP({},h),{},M1e({},y.source.sourceId,LP(LP({},y.source),{},{getItems:function(){return _g(y.items)}})))},{}),o=r.plugins.reduce(function(h,y){return y.reshape?y.reshape(h):h},{sourcesBySourceId:i,state:n}),s=o.sourcesBySourceId,u=r.reshape({sourcesBySourceId:s,sources:Object.values(s),state:n});return _g(u).filter(Boolean).map(function(h){return{source:h,items:h.getItems()}})}function y1(t){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y1(t)}function R1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function v1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?R1e(Object(r),!0).forEach(function(n){q1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function q1t(t,e,r){return e=N1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N1t(t){var e=B1t(t,"string");return y1(e)==="symbol"?e:String(e)}function B1t(t,e){if(y1(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(y1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function F1e(t){return V1t(t)||U1t(t)||j1t(t)||z1t()}function z1t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j1t(t,e){if(t){if(typeof t=="string")return UU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UU(t,e)}}function U1t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function V1t(t){if(Array.isArray(t))return UU(t)}function UU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RP(t){return!!t.execute}function H1t(t){return!!t?.execute}function q1e(t,e,r){if(H1t(t)){var n=t.requesterId==="algolia"?Object.assign.apply(Object,[{}].concat(F1e(Object.keys(r.context).map(function(i){var o;return(o=r.context[i])===null||o===void 0?void 0:o.__algoliaSearchParameters})))):{};return v1(v1({},t),{},{requests:t.queries.map(function(i){return{query:t.requesterId==="algolia"?v1(v1({},i),{},{params:v1(v1({},n),i.params)}):i,sourceId:e,transformResponse:t.transformResponse}})})}return{items:t,sourceId:e}}function N1e(t){var e=t.reduce(function(n,i){if(!RP(i))return n.push(i),n;var o=i.searchClient,s=i.execute,u=i.requesterId,h=i.requests,y=n.find(function(I){return RP(i)&&RP(I)&&I.searchClient===o&&!!u&&I.requesterId===u});if(y){var w;(w=y.items).push.apply(w,F1e(h))}else{var T={execute:s,requesterId:u,items:h,searchClient:o};n.push(T)}return n},[]),r=e.map(function(n){if(!RP(n))return Promise.resolve(n);var i=n,o=i.execute,s=i.items,u=i.searchClient;return o({searchClient:u,requests:s})});return Promise.all(r).then(function(n){return _g(n)})}function B1e(t,e,r){return e.map(function(n){var i=t.filter(function(h){return h.sourceId===n.sourceId}),o=i.map(function(h){var y=h.items;return y}),s=i[0].transformResponse,u=s?s(T1e(o)):o;return n.onResolve({source:n,results:o,items:u,state:r.getState()}),Array.isArray(u),u.every(Boolean),'The `getItems` function from source "'.concat(n.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:n,items:u}})}function ZT(t){"@babel/helpers - typeof";return ZT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZT(t)}var W1t=["event","nextState","props","query","refresh","store"];function z1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function e0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?z1e(Object(r),!0).forEach(function(n){$1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $1t(t,e,r){return e=G1t(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G1t(t){var e=K1t(t,"string");return ZT(e)==="symbol"?e:String(e)}function K1t(t,e){if(ZT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(ZT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Z1t(t,e){if(t==null)return{};var r=Y1t(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Y1t(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var KT=null,j1e=b1e();function rm(t){var e=t.event,r=t.nextState,n=r===void 0?{}:r,i=t.props,o=t.query,s=t.refresh,u=t.store,h=Z1t(t,W1t);KT&&i.environment.clearTimeout(KT);var y=h.setCollections,w=h.setIsOpen,T=h.setQuery,I=h.setActiveItemId,P=h.setStatus,L=h.setContext;if(T(o),I(i.defaultActiveItemId),!o&&i.openOnFocus===!1){var R,W=u.getState().collections.map(function(V){return e0(e0({},V),{},{items:[]})});P("idle"),y(W),w((R=n.isOpen)!==null&&R!==void 0?R:i.shouldPanelOpen({state:u.getState()}));var G=VT(j1e(W).then(function(){return Promise.resolve()}));return u.pendingRequests.add(G)}P("loading"),KT=i.environment.setTimeout(function(){P("stalled")},i.stallThreshold);var q=VT(j1e(i.getSources(e0({query:o,refresh:s,state:u.getState()},h)).then(function(V){return Promise.all(V.map(function(p){return Promise.resolve(p.getItems(e0({query:o,refresh:s,state:u.getState()},h))).then(function(K){return q1e(K,p.sourceId,u.getState())})})).then(N1e).then(function(p){var K=p.some(function(Q){var ee=Q.items;return X1t(ee)});if(K){var j;L({algoliaInsightsPlugin:e0(e0({},((j=u.getState().context)===null||j===void 0?void 0:j.algoliaInsightsPlugin)||{}),{},{__automaticInsights:K})})}return B1e(p,V,u)}).then(function(p){return L1e({collections:p,props:i,state:u.getState()})})}))).then(function(V){var p;P("idle"),y(V);var K=i.shouldPanelOpen({state:u.getState()});w((p=n.isOpen)!==null&&p!==void 0?p:i.openOnFocus&&!o&&K||K);var j=Gd(u.getState());if(u.getState().activeItemId!==null&&j){var Q=j.item,ee=j.itemInputValue,se=j.itemUrl,me=j.source;me.onActive(e0({event:e,item:Q,itemInputValue:ee,itemUrl:se,refresh:s,source:me,state:u.getState()},h))}}).finally(function(){P("idle"),KT&&i.environment.clearTimeout(KT)});return u.pendingRequests.add(q)}function X1t(t){return!Array.isArray(t)&&!!t?._automaticInsights}function YT(t){"@babel/helpers - typeof";return YT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},YT(t)}var J1t=["event","props","refresh","store"];function U1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function t0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U1e(Object(r),!0).forEach(function(n){Q1t(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Q1t(t,e,r){return e=ewt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ewt(t){var e=twt(t,"string");return YT(e)==="symbol"?e:String(e)}function twt(t,e){if(YT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(YT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rwt(t,e){if(t==null)return{};var r=nwt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function nwt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function V1e(t){var e=t.event,r=t.props,n=t.refresh,i=t.store,o=rwt(t,J1t);if(e.key==="ArrowUp"||e.key==="ArrowDown"){var s=function(){var L=Gd(i.getState()),R=r.environment.document.getElementById(ef(r.id,"item-".concat(i.getState().activeItemId),L?.source));R&&(R.scrollIntoViewIfNeeded?R.scrollIntoViewIfNeeded(!1):R.scrollIntoView(!1))},u=function(){var L=Gd(i.getState());if(i.getState().activeItemId!==null&&L){var R=L.item,W=L.itemInputValue,G=L.itemUrl,q=L.source;q.onActive(t0({event:e,item:R,itemInputValue:W,itemUrl:G,refresh:n,source:q,state:i.getState()},o))}};e.preventDefault(),i.getState().isOpen===!1&&(r.openOnFocus||i.getState().query)?rm(t0({event:e,props:r,query:i.getState().query,refresh:n,store:i},o)).then(function(){i.dispatch(e.key,{nextActiveItemId:r.defaultActiveItemId}),u(),setTimeout(s,0)}):(i.dispatch(e.key,{}),u(),s())}else if(e.key==="Escape")e.preventDefault(),i.dispatch(e.key,null),i.pendingRequests.cancelAll();else if(e.key==="Tab")i.dispatch("blur",null),i.pendingRequests.cancelAll();else if(e.key==="Enter"){if(i.getState().activeItemId===null||i.getState().collections.every(function(P){return P.items.length===0})){r.debug||i.pendingRequests.cancelAll();return}e.preventDefault();var h=Gd(i.getState()),y=h.item,w=h.itemInputValue,T=h.itemUrl,I=h.source;if(e.metaKey||e.ctrlKey)T!==void 0&&(I.onSelect(t0({event:e,item:y,itemInputValue:w,itemUrl:T,refresh:n,source:I,state:i.getState()},o)),r.navigator.navigateNewTab({itemUrl:T,item:y,state:i.getState()}));else if(e.shiftKey)T!==void 0&&(I.onSelect(t0({event:e,item:y,itemInputValue:w,itemUrl:T,refresh:n,source:I,state:i.getState()},o)),r.navigator.navigateNewWindow({itemUrl:T,item:y,state:i.getState()}));else if(!e.altKey){if(T!==void 0){I.onSelect(t0({event:e,item:y,itemInputValue:w,itemUrl:T,refresh:n,source:I,state:i.getState()},o)),r.navigator.navigate({itemUrl:T,item:y,state:i.getState()});return}rm(t0({event:e,nextState:{isOpen:!1},props:r,query:w,refresh:n,store:i},o)).then(function(){I.onSelect(t0({event:e,item:y,itemInputValue:w,itemUrl:T,refresh:n,source:I,state:i.getState()},o))})}}}function XT(t){"@babel/helpers - typeof";return XT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},XT(t)}var iwt=["props","refresh","store"],owt=["inputElement","formElement","panelElement"],awt=["inputElement"],swt=["inputElement","maxLength"],lwt=["source"],uwt=["item","source"];function H1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pu(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?H1e(Object(r),!0).forEach(function(n){cwt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function cwt(t,e,r){return e=fwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fwt(t){var e=hwt(t,"string");return XT(e)==="symbol"?e:String(e)}function hwt(t,e){if(XT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(XT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function b1(t,e){if(t==null)return{};var r=dwt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function dwt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function W1e(t){var e=t.props,r=t.refresh,n=t.store,i=b1(t,iwt),o=function(L){var R=L.inputElement,W=L.formElement,G=L.panelElement,q=b1(L,owt);function V(p){var K=n.getState().isOpen||!n.pendingRequests.isEmpty();if(!(!K||p.target===R)){var j=[W,G].some(function(Q){return S1e(Q,p.target)});j===!1&&(n.dispatch("blur",null),e.debug||n.pendingRequests.cancelAll())}}return pu({onTouchStart:V,onMouseDown:V,onTouchMove:function(K){n.getState().isOpen===!1||R!==e.environment.document.activeElement||K.target===R||R.blur()}},q)},s=function(L){return pu({role:"combobox","aria-expanded":n.getState().isOpen,"aria-haspopup":"listbox","aria-controls":n.getState().isOpen?n.getState().collections.map(function(R){var W=R.source;return ef(e.id,"list",W)}).join(" "):void 0,"aria-labelledby":ef(e.id,"label")},L)},u=function(L){var R=L.inputElement,W=b1(L,awt);return pu({action:"",noValidate:!0,role:"search",onSubmit:function(q){var V;q.preventDefault(),e.onSubmit(pu({event:q,refresh:r,state:n.getState()},i)),n.dispatch("submit",null),(V=L.inputElement)===null||V===void 0||V.blur()},onReset:function(q){var V;q.preventDefault(),e.onReset(pu({event:q,refresh:r,state:n.getState()},i)),n.dispatch("reset",null),(V=L.inputElement)===null||V===void 0||V.focus()}},W)},h=function(L){var R;function W(me){(e.openOnFocus||n.getState().query)&&rm(pu({event:me,props:e,query:n.getState().completion||n.getState().query,refresh:r,store:n},i)),n.dispatch("focus",null)}var G=L||{},q=G.inputElement,V=G.maxLength,p=V===void 0?512:V,K=b1(G,swt),j=Gd(n.getState()),Q=((R=e.environment.navigator)===null||R===void 0?void 0:R.userAgent)||"",ee=E1e(Q),se=e.enterKeyHint||(j!=null&&j.itemUrl&&!ee?"go":"search");return pu({"aria-autocomplete":"both","aria-activedescendant":n.getState().isOpen&&n.getState().activeItemId!==null?ef(e.id,"item-".concat(n.getState().activeItemId),j?.source):void 0,"aria-controls":n.getState().isOpen?n.getState().collections.filter(function(me){return me.items.length>0}).map(function(me){var ve=me.source;return ef(e.id,"list",ve)}).join(" "):void 0,"aria-labelledby":ef(e.id,"label"),value:n.getState().completion||n.getState().query,id:ef(e.id,"input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:se,spellCheck:"false",autoFocus:e.autoFocus,placeholder:e.placeholder,maxLength:p,type:"search",onChange:function(ve){var U=ve.currentTarget.value;if(e.ignoreCompositionEvents&&zU(ve).isComposing){i.setQuery(U);return}rm(pu({event:ve,props:e,query:U.slice(0,p),refresh:r,store:n},i))},onCompositionEnd:function(ve){rm(pu({event:ve,props:e,query:ve.currentTarget.value.slice(0,p),refresh:r,store:n},i))},onKeyDown:function(ve){zU(ve).isComposing||V1e(pu({event:ve,props:e,refresh:r,store:n},i))},onFocus:W,onBlur:Qb,onClick:function(ve){L.inputElement===e.environment.document.activeElement&&!n.getState().isOpen&&W(ve)}},K)},y=function(L){return pu({htmlFor:ef(e.id,"input"),id:ef(e.id,"label")},L)},w=function(L){var R=L||{},W=R.source,G=b1(R,lwt);return pu({role:"listbox","aria-labelledby":ef(e.id,"label"),id:ef(e.id,"list",W)},G)},T=function(L){return pu({onMouseDown:function(W){W.preventDefault()},onMouseLeave:function(){n.dispatch("mouseleave",null)}},L)},I=function(L){var R=L.item,W=L.source,G=b1(L,uwt);return pu({id:ef(e.id,"item-".concat(R.__autocomplete_id),W),role:"option","aria-selected":n.getState().activeItemId===R.__autocomplete_id,onMouseMove:function(V){if(R.__autocomplete_id!==n.getState().activeItemId){n.dispatch("mousemove",R.__autocomplete_id);var p=Gd(n.getState());if(n.getState().activeItemId!==null&&p){var K=p.item,j=p.itemInputValue,Q=p.itemUrl,ee=p.source;ee.onActive(pu({event:V,item:K,itemInputValue:j,itemUrl:Q,refresh:r,source:ee,state:n.getState()},i))}}},onMouseDown:function(V){V.preventDefault()},onClick:function(V){var p=W.getItemInputValue({item:R,state:n.getState()}),K=W.getItemUrl({item:R,state:n.getState()}),j=K?Promise.resolve():rm(pu({event:V,nextState:{isOpen:!1},props:e,query:p,refresh:r,store:n},i));j.then(function(){W.onSelect(pu({event:V,item:R,itemInputValue:p,itemUrl:K,refresh:r,source:W,state:n.getState()},i))})}},G)};return{getEnvironmentProps:o,getRootProps:s,getFormProps:u,getLabelProps:y,getInputProps:h,getPanelProps:T,getListProps:w,getItemProps:I}}function JT(t){"@babel/helpers - typeof";return JT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},JT(t)}function $1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pwt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$1e(Object(r),!0).forEach(function(n){G1e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function G1e(t,e,r){return e=mwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mwt(t){var e=gwt(t,"string");return JT(e)==="symbol"?e:String(e)}function gwt(t,e){if(JT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(JT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K1e(t){var e,r,n,i,o=t.plugins,s=t.options,u=(e=(((r=s.__autocomplete_metadata)===null||r===void 0?void 0:r.userAgents)||[])[0])===null||e===void 0?void 0:e.segment,h=u?G1e({},u,Object.keys(((n=s.__autocomplete_metadata)===null||n===void 0?void 0:n.options)||{})):{};return{plugins:o.map(function(y){return{name:y.name,options:Object.keys(y.__autocomplete_pluginOptions||[])}}),options:pwt({"autocomplete-core":Object.keys(s)},h),ua:s1e.concat(((i=s.__autocomplete_metadata)===null||i===void 0?void 0:i.userAgents)||[])}}function Z1e(t){var e,r,n=t.metadata,i=t.environment,o=(e=i.navigator)===null||e===void 0||(r=e.userAgent)===null||r===void 0?void 0:r.includes("Algolia Crawler");if(o){var s=i.document.createElement("meta"),u=i.document.querySelector("head");s.name="algolia:metadata",setTimeout(function(){s.content=JSON.stringify(n),u.appendChild(s)},0)}}function VU(t){var e,r=t.state;return r.isOpen===!1||r.activeItemId===null?null:((e=Gd(r))===null||e===void 0?void 0:e.itemInputValue)||null}function QT(t){"@babel/helpers - typeof";return QT=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QT(t)}function Y1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Di(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Y1e(Object(r),!0).forEach(function(n){vwt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Y1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vwt(t,e,r){return e=ywt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ywt(t){var e=bwt(t,"string");return QT(e)==="symbol"?e:String(e)}function bwt(t,e){if(QT(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(QT(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var X1e=function(e,r){switch(r.type){case"setActiveItemId":return Di(Di({},e),{},{activeItemId:r.payload});case"setQuery":return Di(Di({},e),{},{query:r.payload,completion:null});case"setCollections":return Di(Di({},e),{},{collections:r.payload});case"setIsOpen":return Di(Di({},e),{},{isOpen:r.payload});case"setStatus":return Di(Di({},e),{},{status:r.payload});case"setContext":return Di(Di({},e),{},{context:Di(Di({},e.context),r.payload)});case"ArrowDown":{var n=Di(Di({},e),{},{activeItemId:r.payload.hasOwnProperty("nextActiveItemId")?r.payload.nextActiveItemId:NU(1,e.activeItemId,ly(e),r.props.defaultActiveItemId)});return Di(Di({},n),{},{completion:VU({state:n})})}case"ArrowUp":{var i=Di(Di({},e),{},{activeItemId:NU(-1,e.activeItemId,ly(e),r.props.defaultActiveItemId)});return Di(Di({},i),{},{completion:VU({state:i})})}case"Escape":return e.isOpen?Di(Di({},e),{},{activeItemId:null,isOpen:!1,completion:null}):Di(Di({},e),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return Di(Di({},e),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return Di(Di({},e),{},{activeItemId:r.props.openOnFocus===!0?r.props.defaultActiveItemId:null,status:"idle",completion:null,query:""});case"focus":return Di(Di({},e),{},{activeItemId:r.props.defaultActiveItemId,isOpen:(r.props.openOnFocus||!!e.query)&&r.props.shouldPanelOpen({state:e})});case"blur":return r.props.debug?e:Di(Di({},e),{},{isOpen:!1,activeItemId:null});case"mousemove":return Di(Di({},e),{},{activeItemId:r.payload});case"mouseleave":return Di(Di({},e),{},{activeItemId:r.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(r.type)," is not supported."),e}};function eA(t){"@babel/helpers - typeof";return eA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},eA(t)}function J1e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function r0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?J1e(Object(r),!0).forEach(function(n){_wt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J1e(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function _wt(t,e,r){return e=xwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xwt(t){var e=wwt(t,"string");return eA(e)==="symbol"?e:String(e)}function wwt(t,e){if(eA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(eA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q1e(t){var e=[],r=O1e(t,e),n=k1e(X1e,r,s),i=I1e({store:n}),o=W1e(r0({props:r,refresh:u,store:n,navigator:r.navigator},i));function s(T){var I,P,L=T.prevState,R=T.state;if(r.onStateChange(r0({prevState:L,state:R,refresh:u,navigator:r.navigator},i)),!y()&&(I=R.context)!==null&&I!==void 0&&(P=I.algoliaInsightsPlugin)!==null&&P!==void 0&&P.__automaticInsights&&r.insights!==!1){var W=qU({__autocomplete_clickAnalytics:!1});r.plugins.push(W),h([W])}}function u(){return rm(r0({event:new Event("input"),nextState:{isOpen:n.getState().isOpen},props:r,navigator:r.navigator,query:n.getState().query,refresh:u,store:n},i))}function h(T){T.forEach(function(I){var P;return(P=I.subscribe)===null||P===void 0?void 0:P.call(I,r0(r0({},i),{},{navigator:r.navigator,refresh:u,onSelect:function(R){e.push({onSelect:R})},onActive:function(R){e.push({onActive:R})},onResolve:function(R){e.push({onResolve:R})}}))})}function y(){return r.plugins.some(function(T){return T.name==="aa.algoliaInsightsPlugin"})}if(r.insights&&!y()){var w=typeof r.insights=="boolean"?{}:r.insights;r.plugins.push(qU(w))}return h(r.plugins),Z1e({metadata:K1e({plugins:r.plugins,options:t}),environment:r.environment}),r0(r0({refresh:u,navigator:r.navigator},o),i)}var twe=function(t,e,r,n){var i;e[0]=0;for(var o=1;o<e.length;o++){var s=e[o++],u=e[o]?(e[0]|=s?1:2,r[e[o++]]):e[++o];s===3?n[0]=u:s===4?n[1]=Object.assign(n[1]||{},u):s===5?(n[1]=n[1]||{})[e[++o]]=u:s===6?n[1][e[++o]]+=u+"":s?(i=t.apply(u,twe(t,u,r,["",null])),n.push(i),u[0]?e[0]|=2:(e[o-2]=0,e[o]=i)):n.push(u)}return n},ewe=new Map;function rwe(t){var e=ewe.get(this);return e||(e=new Map,ewe.set(this,e)),(e=twe(this,e.get(t)||(e.set(t,e=function(r){for(var n,i,o=1,s="",u="",h=[0],y=function(I){o===1&&(I||(s=s.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?h.push(0,I,s):o===3&&(I||s)?(h.push(3,I,s),o=2):o===2&&s==="..."&&I?h.push(4,I,0):o===2&&s&&!I?h.push(5,0,!0,s):o>=5&&((s||!I&&o===5)&&(h.push(o,0,s,i),o=6),I&&(h.push(o,I,0,i),o=6)),s=""},w=0;w<r.length;w++){w&&(o===1&&y(),y(w));for(var T=0;T<r[w].length;T++)n=r[w][T],o===1?n==="<"?(y(),h=[h],o=3):s+=n:o===4?s==="--"&&n===">"?(o=1,s=""):s=n+s[0]:u?n===u?u="":s+=n:n==='"'||n==="'"?u=n:n===">"?(y(),o=1):o&&(n==="="?(o=5,i=s,s=""):n==="/"&&(o<5||r[w][T+1]===">")?(y(),o===3&&(h=h[0]),o=h,(h=h[0]).push(2,0,o),o=0):n===" "||n==="	"||n===`
`||n==="\r"?(y(),o=2):s+=n),o===3&&s==="!--"&&(o=4,h=h[0])}return y(),h}(t)),e),arguments,[])).length>1?e:e[0]}var nwe=function(e){var r=e.environment,n=r.document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class","aa-ClearIcon"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("width","18"),n.setAttribute("height","18"),n.setAttribute("fill","currentColor");var i=r.document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M5.293 6.707l5.293 5.293-5.293 5.293c-0.391 0.391-0.391 1.024 0 1.414s1.024 0.391 1.414 0l5.293-5.293 5.293 5.293c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414l-5.293-5.293 5.293-5.293c0.391-0.391 0.391-1.024 0-1.414s-1.024-0.391-1.414 0l-5.293 5.293-5.293-5.293c-0.391-0.391-1.024-0.391-1.414 0s-0.391 1.024 0 1.414z"),n.appendChild(i),n};function HU(t,e){if(typeof e=="string"){var r=t.document.querySelector(e);return"The element ".concat(JSON.stringify(e)," is not in the document."),r}return e}function iwe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(n,i){return Object.keys(i).forEach(function(o){var s=n[o],u=i[o];s!==u&&(n[o]=[s,u].filter(Boolean).join(" "))}),n},{})}function Swt(t){return kwt(t)||Awt(t)||Twt(t)||Ewt()}function Ewt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Twt(t,e){if(t){if(typeof t=="string")return WU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return WU(t,e)}}function Awt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function kwt(t){if(Array.isArray(t))return WU(t)}function WU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $U(t){"@babel/helpers - typeof";return $U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$U(t)}var owe=function(e){return e&&$U(e)==="object"&&Object.prototype.toString.call(e)==="[object Object]"};function GU(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.reduce(function(n,i){return Object.keys(i).forEach(function(o){var s=n[o],u=i[o];Array.isArray(s)&&Array.isArray(u)?n[o]=s.concat.apply(s,Swt(u)):owe(s)&&owe(u)?n[o]=GU(s,u):n[o]=u}),n},{})}function tA(t){"@babel/helpers - typeof";return tA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tA(t)}function awe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function swe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?awe(Object(r),!0).forEach(function(n){uwe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):awe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function uwe(t,e,r){return e=Cwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cwt(t){var e=Iwt(t,"string");return tA(e)==="symbol"?e:String(e)}function Iwt(t,e){if(tA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(tA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Dwt(t,e){return Lwt(t)||Mwt(t,e)||Pwt(t,e)||Owt()}function Owt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pwt(t,e){if(t){if(typeof t=="string")return lwe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lwe(t,e)}}function lwe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mwt(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,i,o,s,u=[],h=!0,y=!1;try{if(o=(r=r.call(t)).next,e===0){if(Object(r)!==r)return;h=!1}else for(;!(h=(n=o.call(r)).done)&&(u.push(n.value),u.length!==e);h=!0);}catch(w){y=!0,i=w}finally{try{if(!h&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(y)throw i}}return u}}function Lwt(t){if(Array.isArray(t))return t}function cwe(t,e){return Object.entries(t).reduce(function(r,n){var i=Dwt(n,2),o=i[0],s=i[1];return e({key:o,value:s})?swe(swe({},r),{},uwe({},o,s)):r},{})}var Rwt=["ontouchstart","ontouchend","ontouchmove","ontouchcancel"];function Fwt(t,e,r){r===null?t[e]="":typeof r!="number"?t[e]=r:t[e]=r+"px"}function fwe(t){this._listeners[t.type](t)}function hwe(t,e,r){var n,i,o=t[e];if(e==="style")if(typeof r=="string")t.style=r;else if(r===null)t.style="";else for(e in r)(!o||r[e]!==o[e])&&Fwt(t.style,e,r[e]);else e[0]==="o"&&e[1]==="n"?(n=e!==(e=e.replace(/Capture$/,"")),i=e.toLowerCase(),(i in t||Rwt.includes(i))&&(e=i),e=e.slice(2),t._listeners||(t._listeners={}),t._listeners[e]=r,r?o||t.addEventListener(e,fwe,n):t.removeEventListener(e,fwe,n)):e!=="list"&&e!=="tagName"&&e!=="form"&&e!=="type"&&e!=="size"&&e!=="download"&&e!=="href"&&e in t?t[e]=r??"":typeof r!="function"&&e!=="dangerouslySetInnerHTML"&&(r==null||r===!1&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,r))}function dwe(t){switch(t){case"onChange":return"onInput";case"onCompositionEnd":return"oncompositionend";default:return t}}function tf(t,e){for(var r in e)hwe(t,dwe(r),e[r])}function KU(t,e){for(var r in e)r[0]==="o"&&r[1]==="n"||hwe(t,dwe(r),e[r])}var qwt=["children"];function Nwt(t){return Uwt(t)||jwt(t)||zwt(t)||Bwt()}function Bwt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zwt(t,e){if(t){if(typeof t=="string")return ZU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ZU(t,e)}}function jwt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Uwt(t){if(Array.isArray(t))return ZU(t)}function ZU(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vwt(t,e){if(t==null)return{};var r=Hwt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Hwt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function FP(t){return function(r,n){var i=n.children,o=i===void 0?[]:i,s=Vwt(n,qwt),u=t.document.createElement(r);return tf(u,s),u.append.apply(u,Nwt(o)),u}}function rA(t){"@babel/helpers - typeof";return rA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rA(t)}var Wwt=["autocompleteScopeApi","environment","classNames","getInputProps","getInputPropsCore","isDetached","state"];function pwe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function YU(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pwe(Object(r),!0).forEach(function(n){$wt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pwe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function $wt(t,e,r){return e=Gwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gwt(t){var e=Kwt(t,"string");return rA(e)==="symbol"?e:String(e)}function Kwt(t,e){if(rA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(rA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zwt(t,e){if(t==null)return{};var r=Ywt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ywt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var mwe=function(e){var r=e.autocompleteScopeApi,n=e.environment,i=e.classNames,o=e.getInputProps,s=e.getInputPropsCore,u=e.isDetached,h=e.state,y=Zwt(e,Wwt),w=FP(n),T=w("input",y),I=o(YU({state:h,props:s({inputElement:T}),inputElement:T},r));return tf(T,YU(YU({},I),{},{onKeyDown:function(L){u&&L.key==="Tab"||I.onKeyDown(L)}})),T};var gwe=function(e){var r=e.environment,n=r.document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("class","aa-LoadingIcon"),n.setAttribute("viewBox","0 0 100 100"),n.setAttribute("width","20"),n.setAttribute("height","20"),n.innerHTML=`<circle
  cx="50"
  cy="50"
  fill="none"
  r="35"
  stroke="currentColor"
  stroke-dasharray="164.93361431346415 56.97787143782138"
  stroke-width="6"
>
  <animateTransform
    attributeName="transform"
    type="rotate"
    repeatCount="indefinite"
    dur="1s"
    values="0 50 50;90 50 50;180 50 50;360 50 50"
    keyTimes="0;0.40;0.65;1"
  />
</circle>`,n};var XU=function(e){var r=e.environment,n=r.document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("class","aa-SubmitIcon"),n.setAttribute("viewBox","0 0 24 24"),n.setAttribute("width","20"),n.setAttribute("height","20"),n.setAttribute("fill","currentColor");var i=r.document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M16.041 15.856c-0.034 0.026-0.067 0.055-0.099 0.087s-0.060 0.064-0.087 0.099c-1.258 1.213-2.969 1.958-4.855 1.958-1.933 0-3.682-0.782-4.95-2.050s-2.050-3.017-2.050-4.95 0.782-3.682 2.050-4.95 3.017-2.050 4.95-2.050 3.682 0.782 4.95 2.050 2.050 3.017 2.050 4.95c0 1.886-0.745 3.597-1.959 4.856zM21.707 20.293l-3.675-3.675c1.231-1.54 1.968-3.493 1.968-5.618 0-2.485-1.008-4.736-2.636-6.364s-3.879-2.636-6.364-2.636-4.736 1.008-6.364 2.636-2.636 3.879-2.636 6.364 1.008 4.736 2.636 6.364 3.879 2.636 6.364 2.636c2.125 0 4.078-0.737 5.618-1.968l3.675 3.675c0.391 0.391 1.024 0.391 1.414 0s0.391-1.024 0-1.414z"),n.appendChild(i),n};function nA(t){"@babel/helpers - typeof";return nA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nA(t)}function vwe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function uy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vwe(Object(r),!0).forEach(function(n){Xwt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vwe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xwt(t,e,r){return e=Jwt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Jwt(t){var e=Qwt(t,"string");return nA(e)==="symbol"?e:String(e)}function Qwt(t,e){if(nA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(nA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ywe(t){var e=t.autocomplete,r=t.autocompleteScopeApi,n=t.classNames,i=t.environment,o=t.isDetached,s=t.placeholder,u=s===void 0?"Search":s,h=t.propGetters,y=t.setIsModalOpen,w=t.state,T=t.translations,I=FP(i),P=h.getRootProps(uy({state:w,props:e.getRootProps({})},r)),L=I("div",uy({class:n.root},P)),R=I("div",{class:n.detachedContainer,onMouseDown:function(ne){ne.stopPropagation()}}),W=I("div",{class:n.detachedOverlay,children:[R],onMouseDown:function(){y(!1),e.setIsOpen(!1)}}),G=h.getLabelProps(uy({state:w,props:e.getLabelProps({})},r)),q=I("button",{class:n.submitButton,type:"submit",title:T.submitButtonTitle,children:[XU({environment:i})]}),V=I("label",uy({class:n.label,children:[q],ariaLabel:T.submitButtonTitle},G)),p=I("button",{class:n.clearButton,type:"reset",title:T.clearButtonTitle,children:[nwe({environment:i})]}),K=I("div",{class:n.loadingIndicator,children:[gwe({environment:i})]}),j=mwe({class:n.input,environment:i,state:w,getInputProps:h.getInputProps,getInputPropsCore:e.getInputProps,autocompleteScopeApi:r,isDetached:o}),Q=I("div",{class:n.inputWrapperPrefix,children:[V,K]}),ee=I("div",{class:n.inputWrapperSuffix,children:[p]}),se=I("div",{class:n.inputWrapper,children:[j]}),me=h.getFormProps(uy({state:w,props:e.getFormProps({inputElement:j})},r)),ve=I("form",uy({class:n.form,children:[Q,se,ee]},me)),U=h.getPanelProps(uy({state:w,props:e.getPanelProps({})},r)),$=I("div",uy({class:n.panel},U)),he=I("div",{class:n.detachedSearchButtonQuery,textContent:w.query}),Ce=I("div",{class:n.detachedSearchButtonPlaceholder,hidden:!!w.query,textContent:u});if(o){var Se=I("div",{class:n.detachedSearchButtonIcon,children:[XU({environment:i})]}),de=I("button",{type:"button",class:n.detachedSearchButton,title:T.detachedSearchButtonTitle,id:G.id,onClick:function(){y(!0)},children:[Se,Ce,he]}),we=I("button",{type:"button",class:n.detachedCancelButton,textContent:T.detachedCancelButtonText,onTouchStart:function(ne){ne.stopPropagation()},onClick:function(){e.setIsOpen(!1),y(!1)}}),Ue=I("div",{class:n.detachedFormContainer,children:[ve,we]});R.appendChild(Ue),L.appendChild(de)}else L.appendChild(ve);return{detachedContainer:R,detachedOverlay:W,detachedSearchButtonQuery:he,detachedSearchButtonPlaceholder:Ce,inputWrapper:se,input:j,root:L,form:ve,label:V,submitButton:q,clearButton:p,loadingIndicator:K,panel:$}}function bwe(){var t=[],e=[];function r(n){t.push(n);var i=n();e.push(i)}return{runEffect:r,cleanupEffects:function(){var i=e;e=[],i.forEach(function(o){o()})},runEffects:function(){var i=t;t=[],i.forEach(function(o){r(o)})}}}function _we(){var t=[];return{reactive:function(r){var n=r(),i={_fn:r,_ref:{current:n},get value(){return this._ref.current},set value(o){this._ref.current=o}};return t.push(i),i},runReactives:function(){t.forEach(function(r){r._ref.current=r._fn()})}}}var jP,ns,Twe,eSt,n0,xwe,Awe,kwe,Cwe,eV,JU,QU,tSt,iA={},Iwe=[],rSt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,UP=Array.isArray;function xg(t,e){for(var r in e)t[r]=e[r];return t}function tV(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function rV(t,e,r){var n,i,o,s={};for(o in e)o=="key"?n=e[o]:o=="ref"?i=e[o]:s[o]=e[o];if(arguments.length>2&&(s.children=arguments.length>3?jP.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)s[o]===void 0&&(s[o]=t.defaultProps[o]);return NP(t,s,n,i,null)}function NP(t,e,r,n,i){var o={type:t,props:e,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++Twe,__i:-1,__u:0};return i==null&&ns.vnode!=null&&ns.vnode(o),o}function x1(t){return t.children}function BP(t,e){this.props=t,this.context=e}function _1(t,e){if(e==null)return t.__?_1(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?_1(t):null}function Dwe(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Dwe(t)}}function wwe(t){(!t.__d&&(t.__d=!0)&&n0.push(t)&&!zP.__r++||xwe!==ns.debounceRendering)&&((xwe=ns.debounceRendering)||Awe)(zP)}function zP(){for(var t,e,r,n,i,o,s,u=1;n0.length;)n0.length>u&&n0.sort(kwe),t=n0.shift(),u=n0.length,t.__d&&(r=void 0,i=(n=(e=t).__v).__e,o=[],s=[],e.__P&&((r=xg({},n)).__v=n.__v+1,ns.vnode&&ns.vnode(r),nV(e.__P,r,n,e.__n,e.__P.namespaceURI,32&n.__u?[i]:null,o,i??_1(n),!!(32&n.__u),s),r.__v=n.__v,r.__.__k[r.__i]=r,Mwe(o,r,s),r.__e!=i&&Dwe(r)));zP.__r=0}function Owe(t,e,r,n,i,o,s,u,h,y,w){var T,I,P,L,R,W,G=n&&n.__k||Iwe,q=e.length;for(h=nSt(r,e,G,h,q),T=0;T<q;T++)(P=r.__k[T])!=null&&(I=P.__i===-1?iA:G[P.__i]||iA,P.__i=T,W=nV(t,P,I,i,o,s,u,h,y,w),L=P.__e,P.ref&&I.ref!=P.ref&&(I.ref&&iV(I.ref,null,P),w.push(P.ref,P.__c||L,P)),R==null&&L!=null&&(R=L),4&P.__u||I.__k===P.__k?h=Pwe(P,h,t):typeof P.type=="function"&&W!==void 0?h=W:L&&(h=L.nextSibling),P.__u&=-7);return r.__e=R,h}function nSt(t,e,r,n,i){var o,s,u,h,y,w=r.length,T=w,I=0;for(t.__k=new Array(i),o=0;o<i;o++)(s=e[o])!=null&&typeof s!="boolean"&&typeof s!="function"?(h=o+I,(s=t.__k[o]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?NP(null,s,null,null,null):UP(s)?NP(x1,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?NP(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,u=null,(y=s.__i=iSt(s,r,h,T))!==-1&&(T--,(u=r[y])&&(u.__u|=2)),u==null||u.__v===null?(y==-1&&(i>w?I--:i<w&&I++),typeof s.type!="function"&&(s.__u|=4)):y!=h&&(y==h-1?I--:y==h+1?I++:(y>h?I--:I++,s.__u|=4))):t.__k[o]=null;if(T)for(o=0;o<w;o++)(u=r[o])!=null&&(2&u.__u)==0&&(u.__e==n&&(n=_1(u)),Rwe(u,u));return n}function Pwe(t,e,r){var n,i;if(typeof t.type=="function"){for(n=t.__k,i=0;n&&i<n.length;i++)n[i]&&(n[i].__=t,e=Pwe(n[i],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=_1(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function iSt(t,e,r,n){var i,o,s=t.key,u=t.type,h=e[r];if(h===null&&t.key==null||h&&s==h.key&&u===h.type&&(2&h.__u)==0)return r;if(n>(h!=null&&(2&h.__u)==0?1:0))for(i=r-1,o=r+1;i>=0||o<e.length;){if(i>=0){if((h=e[i])&&(2&h.__u)==0&&s==h.key&&u===h.type)return i;i--}if(o<e.length){if((h=e[o])&&(2&h.__u)==0&&s==h.key&&u===h.type)return o;o++}}return-1}function Swe(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||rSt.test(e)?r:r+"px"}function qP(t,e,r,n,i){var o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof n=="string"&&(t.style.cssText=n=""),n)for(e in n)r&&e in r||Swe(t.style,e,"");if(r)for(e in r)n&&r[e]===n[e]||Swe(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(Cwe,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=r,r?n?r.t=n.t:(r.t=eV,t.addEventListener(e,o?QU:JU,o)):t.removeEventListener(e,o?QU:JU,o);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function Ewe(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.u==null)e.u=eV++;else if(e.u<r.t)return;return r(ns.event?ns.event(e):e)}}}function nV(t,e,r,n,i,o,s,u,h,y){var w,T,I,P,L,R,W,G,q,V,p,K,j,Q,ee,se,me,ve=e.type;if(e.constructor!==void 0)return null;128&r.__u&&(h=!!(32&r.__u),o=[u=e.__e=r.__e]),(w=ns.__b)&&w(e);e:if(typeof ve=="function")try{if(G=e.props,q="prototype"in ve&&ve.prototype.render,V=(w=ve.contextType)&&n[w.__c],p=w?V?V.props.value:w.__:n,r.__c?W=(T=e.__c=r.__c).__=T.__E:(q?e.__c=T=new ve(G,p):(e.__c=T=new BP(G,p),T.constructor=ve,T.render=aSt),V&&V.sub(T),T.props=G,T.state||(T.state={}),T.context=p,T.__n=n,I=T.__d=!0,T.__h=[],T._sb=[]),q&&T.__s==null&&(T.__s=T.state),q&&ve.getDerivedStateFromProps!=null&&(T.__s==T.state&&(T.__s=xg({},T.__s)),xg(T.__s,ve.getDerivedStateFromProps(G,T.__s))),P=T.props,L=T.state,T.__v=e,I)q&&ve.getDerivedStateFromProps==null&&T.componentWillMount!=null&&T.componentWillMount(),q&&T.componentDidMount!=null&&T.__h.push(T.componentDidMount);else{if(q&&ve.getDerivedStateFromProps==null&&G!==P&&T.componentWillReceiveProps!=null&&T.componentWillReceiveProps(G,p),!T.__e&&(T.shouldComponentUpdate!=null&&T.shouldComponentUpdate(G,T.__s,p)===!1||e.__v==r.__v)){for(e.__v!=r.__v&&(T.props=G,T.state=T.__s,T.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(U){U&&(U.__=e)}),K=0;K<T._sb.length;K++)T.__h.push(T._sb[K]);T._sb=[],T.__h.length&&s.push(T);break e}T.componentWillUpdate!=null&&T.componentWillUpdate(G,T.__s,p),q&&T.componentDidUpdate!=null&&T.__h.push(function(){T.componentDidUpdate(P,L,R)})}if(T.context=p,T.props=G,T.__P=t,T.__e=!1,j=ns.__r,Q=0,q){for(T.state=T.__s,T.__d=!1,j&&j(e),w=T.render(T.props,T.state,T.context),ee=0;ee<T._sb.length;ee++)T.__h.push(T._sb[ee]);T._sb=[]}else do T.__d=!1,j&&j(e),w=T.render(T.props,T.state,T.context),T.state=T.__s;while(T.__d&&++Q<25);T.state=T.__s,T.getChildContext!=null&&(n=xg(xg({},n),T.getChildContext())),q&&!I&&T.getSnapshotBeforeUpdate!=null&&(R=T.getSnapshotBeforeUpdate(P,L)),se=w,w!=null&&w.type===x1&&w.key==null&&(se=Lwe(w.props.children)),u=Owe(t,UP(se)?se:[se],e,r,n,i,o,s,u,h,y),T.base=e.__e,e.__u&=-161,T.__h.length&&s.push(T),W&&(T.__E=T.__=null)}catch(U){if(e.__v=null,h||o!=null)if(U.then){for(e.__u|=h?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;o[o.indexOf(u)]=null,e.__e=u}else for(me=o.length;me--;)tV(o[me]);else e.__e=r.__e,e.__k=r.__k;ns.__e(U,e,r)}else o==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):u=e.__e=oSt(r.__e,e,r,n,i,o,s,h,y);return(w=ns.diffed)&&w(e),128&e.__u?void 0:u}function Mwe(t,e,r){for(var n=0;n<r.length;n++)iV(r[n],r[++n],r[++n]);ns.__c&&ns.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(o){o.call(i)})}catch(o){ns.__e(o,i.__v)}})}function Lwe(t){return typeof t!="object"||t==null?t:UP(t)?t.map(Lwe):xg({},t)}function oSt(t,e,r,n,i,o,s,u,h){var y,w,T,I,P,L,R,W=r.props,G=e.props,q=e.type;if(q=="svg"?i="http://www.w3.org/2000/svg":q=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),o!=null){for(y=0;y<o.length;y++)if((P=o[y])&&"setAttribute"in P==!!q&&(q?P.localName==q:P.nodeType==3)){t=P,o[y]=null;break}}if(t==null){if(q==null)return document.createTextNode(G);t=document.createElementNS(i,q,G.is&&G),u&&(ns.__m&&ns.__m(e,o),u=!1),o=null}if(q===null)W===G||u&&t.data===G||(t.data=G);else{if(o=o&&jP.call(t.childNodes),W=r.props||iA,!u&&o!=null)for(W={},y=0;y<t.attributes.length;y++)W[(P=t.attributes[y]).name]=P.value;for(y in W)if(P=W[y],y!="children"){if(y=="dangerouslySetInnerHTML")T=P;else if(!(y in G)){if(y=="value"&&"defaultValue"in G||y=="checked"&&"defaultChecked"in G)continue;qP(t,y,null,P,i)}}for(y in G)P=G[y],y=="children"?I=P:y=="dangerouslySetInnerHTML"?w=P:y=="value"?L=P:y=="checked"?R=P:u&&typeof P!="function"||W[y]===P||qP(t,y,P,W[y],i);if(w)u||T&&(w.__html===T.__html||w.__html===t.innerHTML)||(t.innerHTML=w.__html),e.__k=[];else if(T&&(t.innerHTML=""),Owe(e.type==="template"?t.content:t,UP(I)?I:[I],e,r,n,q=="foreignObject"?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:r.__k&&_1(r,0),u,h),o!=null)for(y=o.length;y--;)tV(o[y]);u||(y="value",q=="progress"&&L==null?t.removeAttribute("value"):L!==void 0&&(L!==t[y]||q=="progress"&&!L||q=="option"&&L!==W[y])&&qP(t,y,L,W[y],i),y="checked",R!==void 0&&R!==t[y]&&qP(t,y,R,W[y],i))}return t}function iV(t,e,r){try{if(typeof t=="function"){var n=typeof t.__u=="function";n&&t.__u(),n&&e==null||(t.__u=t(e))}else t.current=e}catch(i){ns.__e(i,r)}}function Rwe(t,e,r){var n,i;if(ns.unmount&&ns.unmount(t),(n=t.ref)&&(n.current&&n.current!==t.__e||iV(n,null,e)),(n=t.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(o){ns.__e(o,e)}n.base=n.__P=null}if(n=t.__k)for(i=0;i<n.length;i++)n[i]&&Rwe(n[i],e,r||typeof t.type!="function");r||tV(t.__e),t.__c=t.__=t.__e=void 0}function aSt(t,e,r){return this.constructor(t,r)}function Fwe(t,e,r){var n,i,o,s;e==document&&(e=document.documentElement),ns.__&&ns.__(t,e),i=(n=typeof r=="function")?null:r&&r.__k||e.__k,o=[],s=[],nV(e,t=(!n&&r||e).__k=rV(x1,null,[t]),i||iA,iA,e.namespaceURI,!n&&r?[r]:i?null:e.firstChild?jP.call(e.childNodes):null,o,!n&&r?r:i?i.__e:e.firstChild,n,s),Mwe(o,t,s)}jP=Iwe.slice,ns={__e:function(t,e,r,n){for(var i,o,s;e=e.__;)if((i=e.__c)&&!i.__)try{if((o=i.constructor)&&o.getDerivedStateFromError!=null&&(i.setState(o.getDerivedStateFromError(t)),s=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,n||{}),s=i.__d),s)return i.__E=i}catch(u){t=u}throw t}},Twe=0,eSt=function(t){return t!=null&&t.constructor==null},BP.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=xg({},this.state),typeof t=="function"&&(t=t(xg({},r),this.props)),t&&xg(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),wwe(this))},BP.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),wwe(this))},BP.prototype.render=x1,n0=[],Awe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,kwe=function(t,e){return t.__v.__b-e.__v.__b},zP.__r=0,Cwe=/(PointerCapture)$|Capture$/i,eV=0,JU=Ewe(!1),QU=Ewe(!0),tSt=0;var qwe="__aa-highlight__",Nwe="__/aa-highlight__";function sSt(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=t;return{get:function(){return e},add:function(n){var i=e[e.length-1];i?.isHighlighted===n.isHighlighted?e[e.length-1]={value:i.value+n.value,isHighlighted:i.isHighlighted}:e.push(n)}}}function VP(t){var e=t.highlightedValue,r=e.split(qwe),n=r.shift(),i=sSt(n?[{value:n,isHighlighted:!1}]:[]);return r.forEach(function(o){var s=o.split(Nwe);i.add({value:s[0],isHighlighted:!0}),s[1]!==""&&i.add({value:s[1],isHighlighted:!1})}),i.get()}function lSt(t){return hSt(t)||fSt(t)||cSt(t)||uSt()}function uSt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cSt(t,e){if(t){if(typeof t=="string")return oV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oV(t,e)}}function fSt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hSt(t){if(Array.isArray(t))return oV(t)}function oV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function HP(t){var e=t.hit,r=t.attribute,n=Array.isArray(r)?r:[r],i=f1(e,["_highlightResult"].concat(lSt(n),["value"]));return typeof i!="string"&&(i=f1(e,n)||""),VP({highlightedValue:i})}var dSt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},pSt=new RegExp(/\w/i),Bwe=/&(amp|quot|lt|gt|#39);/g,mSt=RegExp(Bwe.source);function gSt(t){return t&&mSt.test(t)?t.replace(Bwe,function(e){return dSt[e]}):t}function zwe(t,e){var r,n,i=t[e],o=((r=t[e+1])===null||r===void 0?void 0:r.isHighlighted)||!0,s=((n=t[e-1])===null||n===void 0?void 0:n.isHighlighted)||!0;return!pSt.test(gSt(i.value))&&s===o?s:i.isHighlighted}function oA(t){"@babel/helpers - typeof";return oA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oA(t)}function jwe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function WP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?jwe(Object(r),!0).forEach(function(n){vSt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):jwe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function vSt(t,e,r){return e=ySt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ySt(t){var e=bSt(t,"string");return oA(e)==="symbol"?e:String(e)}function bSt(t,e){if(oA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(oA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $P(t){return t.some(function(e){return e.isHighlighted})?t.map(function(e,r){return WP(WP({},e),{},{isHighlighted:!zwe(t,r)})}):t.map(function(e){return WP(WP({},e),{},{isHighlighted:!1})})}function Uwe(t){return $P(HP(t))}function _St(t){return ESt(t)||SSt(t)||wSt(t)||xSt()}function xSt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wSt(t,e){if(t){if(typeof t=="string")return aV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aV(t,e)}}function SSt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ESt(t){if(Array.isArray(t))return aV(t)}function aV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function GP(t){var e=t.hit,r=t.attribute,n=Array.isArray(r)?r:[r],i=f1(e,["_snippetResult"].concat(_St(n),["value"]));return typeof i!="string"&&(i=f1(e,n)||""),VP({highlightedValue:i})}function Vwe(t){return $P(GP(t))}function Hwe(t){var e=t.createElement,r=t.Fragment;function n(i){var o=i.hit,s=i.attribute,u=i.tagName,h=u===void 0?"mark":u;return e(r,{},HP({hit:o,attribute:s}).map(function(y,w){return y.isHighlighted?e(h,{key:w},y.value):y.value}))}return n.__autocomplete_componentName="Highlight",n}function Wwe(t){var e=t.createElement,r=t.Fragment;function n(i){var o=i.hit,s=i.attribute,u=i.tagName,h=u===void 0?"mark":u;return e(r,{},Uwe({hit:o,attribute:s}).map(function(y,w){return y.isHighlighted?e(h,{key:w},y.value):y.value}))}return n.__autocomplete_componentName="ReverseHighlight",n}function $we(t){var e=t.createElement,r=t.Fragment;function n(i){var o=i.hit,s=i.attribute,u=i.tagName,h=u===void 0?"mark":u;return e(r,{},Vwe({hit:o,attribute:s}).map(function(y,w){return y.isHighlighted?e(h,{key:w},y.value):y.value}))}return n.__autocomplete_componentName="ReverseSnippet",n}function Gwe(t){var e=t.createElement,r=t.Fragment;function n(i){var o=i.hit,s=i.attribute,u=i.tagName,h=u===void 0?"mark":u;return e(r,{},GP({hit:o,attribute:s}).map(function(y,w){return y.isHighlighted?e(h,{key:w},y.value):y.value}))}return n.__autocomplete_componentName="Snippet",n}function aA(t){"@babel/helpers - typeof";return aA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aA(t)}var TSt=["classNames","container","getEnvironmentProps","getFormProps","getInputProps","getItemProps","getLabelProps","getListProps","getPanelProps","getRootProps","panelContainer","panelPlacement","render","renderNoResults","renderer","detachedMediaQuery","components","translations"];function Kwe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function cy(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Kwe(Object(r),!0).forEach(function(n){ASt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Kwe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ASt(t,e,r){return e=kSt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kSt(t){var e=CSt(t,"string");return aA(e)==="symbol"?e:String(e)}function CSt(t,e){if(aA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(aA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ISt(t,e){if(t==null)return{};var r=DSt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function DSt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}var OSt={clearButton:"aa-ClearButton",detachedCancelButton:"aa-DetachedCancelButton",detachedContainer:"aa-DetachedContainer",detachedFormContainer:"aa-DetachedFormContainer",detachedOverlay:"aa-DetachedOverlay",detachedSearchButton:"aa-DetachedSearchButton",detachedSearchButtonIcon:"aa-DetachedSearchButtonIcon",detachedSearchButtonPlaceholder:"aa-DetachedSearchButtonPlaceholder",detachedSearchButtonQuery:"aa-DetachedSearchButtonQuery",form:"aa-Form",input:"aa-Input",inputWrapper:"aa-InputWrapper",inputWrapperPrefix:"aa-InputWrapperPrefix",inputWrapperSuffix:"aa-InputWrapperSuffix",item:"aa-Item",label:"aa-Label",list:"aa-List",loadingIndicator:"aa-LoadingIndicator",panel:"aa-Panel",panelLayout:"aa-PanelLayout aa-Panel--scrollable",root:"aa-Autocomplete",source:"aa-Source",sourceFooter:"aa-SourceFooter",sourceHeader:"aa-SourceHeader",sourceNoResults:"aa-SourceNoResults",submitButton:"aa-SubmitButton"},PSt=function(e,r){var n=e.children,i=e.render;i(n,r)},MSt={createElement:rV,Fragment:x1,render:Fwe};function Zwe(t){var e,r=t.classNames,n=t.container,i=t.getEnvironmentProps,o=t.getFormProps,s=t.getInputProps,u=t.getItemProps,h=t.getLabelProps,y=t.getListProps,w=t.getPanelProps,T=t.getRootProps,I=t.panelContainer,P=t.panelPlacement,L=t.render,R=t.renderNoResults,W=t.renderer,G=t.detachedMediaQuery,q=t.components,V=t.translations,p=ISt(t,TSt),K=typeof window<"u"?window:{},j=HU(K,n);j.tagName;var Q=cy(cy({},MSt),W),ee={Highlight:Hwe(Q),ReverseHighlight:Wwe(Q),ReverseSnippet:$we(Q),Snippet:Gwe(Q)},se={clearButtonTitle:"Clear",detachedCancelButtonText:"Cancel",detachedSearchButtonTitle:"Search",submitButtonTitle:"Submit"};return{renderer:{classNames:iwe(OSt,r??{}),container:j,getEnvironmentProps:i??function(me){var ve=me.props;return ve},getFormProps:o??function(me){var ve=me.props;return ve},getInputProps:s??function(me){var ve=me.props;return ve},getItemProps:u??function(me){var ve=me.props;return ve},getLabelProps:h??function(me){var ve=me.props;return ve},getListProps:y??function(me){var ve=me.props;return ve},getPanelProps:w??function(me){var ve=me.props;return ve},getRootProps:T??function(me){var ve=me.props;return ve},panelContainer:I?HU(K,I):K.document.body,panelPlacement:P??"input-wrapper-width",render:L??PSt,renderNoResults:R,renderer:Q,detachedMediaQuery:G??getComputedStyle(K.document.documentElement).getPropertyValue("--aa-detached-media-query"),components:cy(cy({},ee),q),translations:cy(cy({},se),V)},core:cy(cy({},p),{},{id:(e=p.id)!==null&&e!==void 0?e:CP(),environment:K})}}function Ywe(t){var e=t.panelPlacement,r=t.container,n=t.form,i=t.environment,o=r.getBoundingClientRect(),s=i.pageYOffset||i.document.documentElement.scrollTop||i.document.body.scrollTop||0,u=s+o.top+o.height;switch(e){case"start":return{top:u,left:o.left};case"end":return{top:u,right:i.document.documentElement.clientWidth-(o.left+o.width)};case"full-width":return{top:u,left:0,right:0,width:"unset",maxWidth:"unset"};case"input-wrapper-width":{var h=n.getBoundingClientRect();return{top:u,left:h.left,right:i.document.documentElement.clientWidth-(h.left+h.width),width:"unset",maxWidth:"unset"}}default:throw new Error("[Autocomplete] The `panelPlacement` value ".concat(JSON.stringify(e)," is not valid."))}}function sA(t){"@babel/helpers - typeof";return sA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sA(t)}function KP(){return KP=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},KP.apply(this,arguments)}function Xwe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function w1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Xwe(Object(r),!0).forEach(function(n){LSt(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xwe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function LSt(t,e,r){return e=RSt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function RSt(t){var e=FSt(t,"string");return sA(e)==="symbol"?e:String(e)}function FSt(t,e){if(sA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(sA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jwe(t){var e=t.autocomplete,r=t.autocompleteScopeApi,n=t.dom,i=t.propGetters,o=t.state;KU(n.root,i.getRootProps(w1({state:o,props:e.getRootProps({})},r))),KU(n.input,i.getInputProps(w1({state:o,props:e.getInputProps({inputElement:n.input}),inputElement:n.input},r))),tf(n.label,{hidden:o.status==="stalled"}),tf(n.loadingIndicator,{hidden:o.status!=="stalled"}),tf(n.clearButton,{hidden:!o.query}),tf(n.detachedSearchButtonQuery,{textContent:o.query}),tf(n.detachedSearchButtonPlaceholder,{hidden:!!o.query})}function Qwe(t,e){var r=e.autocomplete,n=e.autocompleteScopeApi,i=e.classNames,o=e.html,s=e.dom,u=e.panelContainer,h=e.propGetters,y=e.state,w=e.components,T=e.renderer;if(!y.isOpen){u.contains(s.panel)&&u.removeChild(s.panel);return}!u.contains(s.panel)&&y.status!=="loading"&&u.appendChild(s.panel),s.panel.classList.toggle("aa-Panel--stalled",y.status==="stalled");var I=y.collections.filter(function(R){var W=R.source,G=R.items;return W.templates.noResults||G.length>0}).map(function(R,W){var G=R.source,q=R.items;return T.createElement("section",{key:W,className:i.source,"data-autocomplete-source-id":G.sourceId},G.templates.header&&T.createElement("div",{className:i.sourceHeader},G.templates.header({components:w,createElement:T.createElement,Fragment:T.Fragment,items:q,source:G,state:y,html:o})),G.templates.noResults&&q.length===0?T.createElement("div",{className:i.sourceNoResults},G.templates.noResults({components:w,createElement:T.createElement,Fragment:T.Fragment,source:G,state:y,html:o})):T.createElement("ul",KP({className:i.list},h.getListProps(w1({state:y,props:r.getListProps({source:G})},n))),q.map(function(V){var p=r.getItemProps({item:V,source:G});return T.createElement("li",KP({key:p.id,className:i.item},h.getItemProps(w1({state:y,props:p},n))),G.templates.item({components:w,createElement:T.createElement,Fragment:T.Fragment,item:V,state:y,html:o}))})),G.templates.footer&&T.createElement("div",{className:i.sourceFooter},G.templates.footer({components:w,createElement:T.createElement,Fragment:T.Fragment,items:q,source:G,state:y,html:o})))}),P=T.createElement(T.Fragment,null,T.createElement("div",{className:i.panelLayout},I),T.createElement("div",{className:"aa-GradientBottom"})),L=I.reduce(function(R,W){return R[W.props["data-autocomplete-source-id"]]=W,R},{});t(w1(w1({children:P,state:y,sections:I,elements:L},T),{},{components:w,html:o},n),s.panel)}var eSe=[{segment:"autocomplete-js",version:IP}];var qSt=["components"];function lA(t){"@babel/helpers - typeof";return lA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lA(t)}function NSt(t,e){if(t==null)return{};var r=BSt(t,e),n,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function BSt(t,e){if(t==null)return{};var r={},n=Object.keys(t),i,o;for(o=0;o<n.length;o++)i=n[o],!(e.indexOf(i)>=0)&&(r[i]=t[i]);return r}function tSe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function i0(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tSe(Object(r),!0).forEach(function(n){nSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tSe(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function nSe(t,e,r){return e=zSt(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zSt(t){var e=jSt(t,"string");return lA(e)==="symbol"?e:String(e)}function jSt(t,e){if(lA(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(lA(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rSe=0;function iSe(t){var e=bwe(),r=e.runEffect,n=e.cleanupEffects,i=e.runEffects,o=_we(),s=o.reactive,u=o.runReactives,h=Jb(!1),y=Jb(t),w=Jb(void 0),T=s(function(){return Zwe(y.current)}),I=s(function(){return T.value.core.environment.matchMedia(T.value.renderer.detachedMediaQuery).matches}),P=s(function(){return Q1e(i0(i0({},T.value.core),{},{onStateChange:function(se){var me,ve,U;h.current=se.state.collections.some(function($){return $.source.templates.noResults}),(me=w.current)===null||me===void 0||me.call(w,se),(ve=(U=T.value.core).onStateChange)===null||ve===void 0||ve.call(U,se)},shouldPanelOpen:y.current.shouldPanelOpen||function(ee){var se=ee.state;if(I.value)return!0;var me=ly(se)>0;if(!T.value.core.openOnFocus&&!se.query)return me;var ve=!!(h.current||T.value.renderer.renderNoResults);return!me&&ve||me},__autocomplete_metadata:{userAgents:eSe,options:t}}))}),L=Jb(i0({collections:[],completion:null,context:{},isOpen:!1,query:"",activeItemId:null,status:"idle"},T.value.core.initialState)),R={getEnvironmentProps:T.value.renderer.getEnvironmentProps,getFormProps:T.value.renderer.getFormProps,getInputProps:T.value.renderer.getInputProps,getItemProps:T.value.renderer.getItemProps,getLabelProps:T.value.renderer.getLabelProps,getListProps:T.value.renderer.getListProps,getPanelProps:T.value.renderer.getPanelProps,getRootProps:T.value.renderer.getRootProps},W={setActiveItemId:P.value.setActiveItemId,setQuery:P.value.setQuery,setCollections:P.value.setCollections,setIsOpen:P.value.setIsOpen,setStatus:P.value.setStatus,setContext:P.value.setContext,refresh:P.value.refresh,navigator:P.value.navigator},G=s(function(){return rwe.bind(T.value.renderer.renderer.createElement)}),q=s(function(){return ywe({autocomplete:P.value,autocompleteScopeApi:W,classNames:T.value.renderer.classNames,environment:T.value.core.environment,isDetached:I.value,placeholder:T.value.core.placeholder,propGetters:R,setIsModalOpen:Q,state:L.current,translations:T.value.renderer.translations})});function V(){tf(q.value.panel,{style:I.value?{}:Ywe({panelPlacement:T.value.renderer.panelPlacement,container:q.value.root,form:q.value.form,environment:T.value.core.environment})})}function p(ee){L.current=ee;var se={autocomplete:P.value,autocompleteScopeApi:W,classNames:T.value.renderer.classNames,components:T.value.renderer.components,container:T.value.renderer.container,html:G.value,dom:q.value,panelContainer:I.value?q.value.detachedContainer:T.value.renderer.panelContainer,propGetters:R,state:L.current,renderer:T.value.renderer.renderer},me=!ly(ee)&&!h.current&&T.value.renderer.renderNoResults||T.value.renderer.render;Jwe(se),Qwe(me,se)}r(function(){var ee=P.value.getEnvironmentProps({formElement:q.value.form,panelElement:q.value.panel,inputElement:q.value.input});return tf(T.value.core.environment,ee),function(){tf(T.value.core.environment,Object.keys(ee).reduce(function(se,me){return i0(i0({},se),{},nSe({},me,void 0))},{}))}}),r(function(){var ee=I.value?T.value.core.environment.document.body:T.value.renderer.panelContainer,se=I.value?q.value.detachedOverlay:q.value.panel;return I.value&&L.current.isOpen&&Q(!0),p(L.current),function(){ee.contains(se)&&(ee.removeChild(se),ee.classList.remove("aa-Detached"))}}),r(function(){var ee=T.value.renderer.container;return ee.appendChild(q.value.root),function(){ee.removeChild(q.value.root)}}),r(function(){var ee=u1(function(se){var me=se.state;p(me)},0);return w.current=function(se){var me=se.state,ve=se.prevState;if(I.value&&ve.isOpen!==me.isOpen&&Q(me.isOpen),!I.value&&me.isOpen&&!ve.isOpen&&V(),me.query!==ve.query){var U=T.value.core.environment.document.querySelectorAll(".aa-Panel--scrollable");U.forEach(function($){$.scrollTop!==0&&($.scrollTop=0)})}ee({state:me})},function(){w.current=void 0}}),r(function(){var ee=u1(function(){var se=I.value;I.value=T.value.core.environment.matchMedia(T.value.renderer.detachedMediaQuery).matches,se!==I.value?j({}):requestAnimationFrame(V)},20);return T.value.core.environment.addEventListener("resize",ee),function(){T.value.core.environment.removeEventListener("resize",ee)}}),r(function(){if(!I.value)return function(){};function ee(U){q.value.detachedContainer.classList.toggle("aa-DetachedContainer--modal",U)}function se(U){ee(U.matches)}var me=T.value.core.environment.matchMedia(getComputedStyle(T.value.core.environment.document.documentElement).getPropertyValue("--aa-detached-modal-media-query"));ee(me.matches);var ve=!!me.addEventListener;return ve?me.addEventListener("change",se):me.addListener(se),function(){ve?me.removeEventListener("change",se):me.removeListener(se)}}),r(function(){return requestAnimationFrame(V),function(){}});function K(){rSe--,n()}function j(){var ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n();var se=T.value.renderer,me=se.components,ve=NSt(se,qSt);y.current=GU(ve,T.value.core,{components:cwe(me,function(U){var $=U.value;return!$.hasOwnProperty("__autocomplete_componentName")}),initialState:L.current},ee),u(),i(),P.value.refresh().then(function(){p(L.current)})}function Q(ee){var se=T.value.core.environment.document.body.contains(q.value.detachedOverlay);ee!==se&&(ee?(T.value.core.environment.document.body.appendChild(q.value.detachedOverlay),T.value.core.environment.document.body.classList.add("aa-Detached"),q.value.input.focus()):(T.value.core.environment.document.body.removeChild(q.value.detachedOverlay),T.value.core.environment.document.body.classList.remove("aa-Detached")))}return rSe++,i0(i0({},W),{},{update:j,destroy:K})}var aSe=ua(qx());var ZP=(t,e)=>{let r;return(...n)=>(r&&clearTimeout(r),new Promise(i=>{r=setTimeout(()=>i(t(...n)),e)}))};var YP=class extends Lr{static targets=["autocomplete","button","hiddenId","visibleLabel","clearValue","clearButton"];debouncedFetch=ZP(fetch,this.searchDebounce);destroyMethod;get dataset(){return this.autocompleteTarget.dataset}get searchDebounce(){return window.Jav.configuration.search_debounce}get translationKeys(){let t;try{t=JSON.parse(this.dataset.translationKeys)}catch{t={}}return t}get isBelongsToSearch(){return this.dataset.viaAssociation==="belongs_to"}get isHasManySearch(){return this.dataset.viaAssociation==="has_many"}get isGlobalSearch(){return this.dataset.searchResource==="global"}connect(){let t=this;this.buttonTarget.onclick=()=>this.showSearchPanel(),this.clearValueTargets.forEach(r=>{r.getAttribute("value")&&this.hasClearButtonTarget&&this.clearButtonTarget.classList.remove("hidden")}),this.isGlobalSearch&&oSe.bind(["command+k","ctrl+k"],()=>this.showSearchPanel()),this.autocompleteTarget.innerHTML="";let{destroy:e}=iSe({container:this.autocompleteTarget,placeholder:this.translationKeys.placeholder,translations:{detachedCancelButtonText:this.translationKeys.cancel_button},autoFocus:!0,openOnFocus:!0,detachedMediaQuery:"",getSources:({query:r})=>{document.body.classList.add("search-loading");let n=t.searchUrl(r);return t.debouncedFetch(n).then(i=>(document.body.classList.remove("search-loading"),i.json())).then(i=>Object.keys(i).map(o=>t.addSource(o,i[o])))}});this.destroyMethod=e,this.buttonTarget.dataset.shouldBeDisabled!=="true"&&this.buttonTarget.removeAttribute("disabled")}disconnect(){this.destroyMethod&&(this.destroyMethod(),this.destroyMethod=null)}addSource(t,e){let r=this;return{sourceId:t,getItems:()=>e.results,onSelect:r.handleOnSelect.bind(r),templates:{header(){return`${e.header.toUpperCase()} ${e.help}`},item({item:n,createElement:i}){let o=[];if(n._avatar){let u;switch(n._avatar_type){default:case"circle":u="rounded-full";break;case"rounded":u="rounded";break;case"square":u="rounded-none";break}o.push(i("img",{src:n._avatar,alt:n._label,class:`flex-shrink-0 w-8 h-8 my-[2px] inline mr-2 ${u}`}))}let s=[n._label];return n._description&&s.push(i("div",{class:"aa-ItemDescription"},n._description)),o.push(i("div",null,s)),i("div",{class:"flex"},o)},noResults(){return r.translationKeys.no_item_found.replace("%{item}",t)}}}}handleOnSelect({item:t}){this.isBelongsToSearch?(this.updateFieldAttribute(this.hiddenIdTarget,"value",t._id),this.updateFieldAttribute(this.buttonTarget,"value",t._label),document.querySelector(".aa-DetachedOverlay").remove(),this.hasClearButtonTarget&&this.clearButtonTarget.classList.remove("hidden")):Rv.visit(t._url,{action:"advance"}),document.body.classList.remove("aa-Detached")}searchUrl(t){return(0,aSe.default)().segment([window.Jav.configuration.root_path,...this.searchSegments()]).search(this.searchParams(encodeURIComponent(t))).readable().toString()}searchSegments(){let t=["jav_api",this.dataset.searchResource,"search"];return this.isGlobalSearch&&(t=["jav_api","search"]),t}searchParams(t){let e={q:t,global:!1,force_local:location.search?.match(/force_locale=([a-zA-Z-]+)/)?.[1]};return this.isGlobalSearch&&(e.global=!0),(this.isBelongsToSearch||this.isHasManySearch)&&(e=this.addAssociationParams(e),e=this.addReflectionParams(e),this.isBelongsToSearch&&(e={...e,via_parent_resource_id:this.dataset.viaParentResourceId,via_parent_resource_class:this.dataset.viaParentResourceClass,via_relation:this.dataset.viaRelation})),e}addAssociationParams(t){return t={...t,via_association:this.dataset.viaAssociation,via_association_id:this.dataset.viaAssociationId},t}addReflectionParams(t){return t={...t,via_reflection_class:this.dataset.viaReflectionClass,via_reflection_id:this.dataset.viaReflectionId},t}showSearchPanel(){this.autocompleteTarget.querySelector("button").click()}clearValue(){this.clearValueTargets.map(t=>this.updateFieldAttribute(t,"value","")),this.clearButtonTarget.classList.add("hidden")}updateFieldAttribute(t,e,r){t.setAttribute(e,r),t.dispatchEvent(new Event("input"))}};var sSe=ua(qx()),XP=class extends Lr{static targets=["select"];get parentTurboFrame(){return this.context.scope.element.closest("turbo-frame")}onChange(t){if(!this.parentTurboFrame.src)return;let e=new sSe.default(this.parentTurboFrame.src);e.search({...e.query(!0),range:t.currentTarget.value}),this.parentTurboFrame.src=e.toString(),this.parentTurboFrame.reload()}};var JP=class extends Gh{static targets=["selector"];getFilterValue(){return this.selectorTarget.value===""?null:this.selectorTarget.value}getFilterClass(){let{filterClass:t}=this.selectorTarget.dataset;return t}};async function uV(t,e=null){t.classList.remove("hidden"),await uSe("enter",t,e)}async function cV(t,e=null){await uSe("leave",t,e),t.classList.add("hidden")}async function lSe(t,e=null){t.classList.contains("hidden")?await uV(t,e):await cV(t,e)}async function uSe(t,e,r){let n=e.dataset,i=r?`${r}-${t}`:t,o=`transition${t.charAt(0).toUpperCase()+t.slice(1)}`,s=n[o]?n[o].split(" "):[i],u=n[`${o}Start`]?n[`${o}Start`].split(" "):[`${i}-start`],h=n[`${o}End`]?n[`${o}End`].split(" "):[`${i}-end`];sV(e,s),sV(e,u),await USt(),lV(e,u),sV(e,h),await VSt(e),lV(e,h),lV(e,s)}function sV(t,e){t.classList.add(...e)}function lV(t,e){t.classList.remove(...e)}function USt(){return new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(t)})})}function VSt(t){return new Promise(e=>{let r=getComputedStyle(t).transitionDuration.split(",")[0],n=Number(r.replace("s",""))*1e3;setTimeout(()=>{e()},n)})}function QP(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var HSt={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function fV(t,e){function r(i,o,s){if(!(typeof document>"u")){s=QP({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var h in s)s[h]&&(u+="; "+h,s[h]!==!0&&(u+="="+s[h].split(";")[0]));return document.cookie=i+"="+t.write(o,i)+u}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],s={},u=0;u<o.length;u++){var h=o[u].split("="),y=h.slice(1).join("=");try{var w=decodeURIComponent(h[0]);if(s[w]=t.read(y,w),i===w)break}catch{}}return i?s[i]:s}}return Object.create({set:r,get:n,remove:function(i,o){r(i,"",QP({},o,{expires:-1}))},withAttributes:function(i){return fV(this.converter,QP({},this.attributes,i))},withConverter:function(i){return fV(QP({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var uA=fV(HSt,{path:"/"});var eM=class extends Lr{static targets=["sidebar","mobileSidebar","mainArea"];static values={open:Boolean};get cookieKey(){return`${window.Jav.configuration.cookies_key}.sidebar.open`}get sidebarOpen(){return uA.get(this.cookieKey)==="1"}set cookie(t){uA.set(this.cookieKey,t===!0?1:0)}markSidebarClosed(){uA.set(this.cookieKey,"0"),this.openValue=!1,cV(this.sidebarTarget),this.mainAreaTarget.classList.remove("sidebar-open")}markSidebarOpen(){uA.set(this.cookieKey,"1"),this.openValue=!0,uV(this.sidebarTarget),this.mainAreaTarget.classList.add("sidebar-open")}toggleSidebar(){this.openValue?this.markSidebarClosed():this.markSidebarOpen()}toggleSidebarOnMobile(){lSe(this.mobileSidebarTarget)}};var tM=class extends Lr{static targets=["tabPanel"];static values={view:String,activeTab:String};get currentTab(){return this.tabPanelTargets.find(t=>t.dataset.tabId===this.activeTabValue)}targetTabPanel(t){return this.tabPanelTargets.find(e=>e.dataset.tabId===t)}async changeTab(t){t.preventDefault();let{params:e}=t,{id:r}=e;await this.setTheTargetPanelHeight(r),this.hideAllTabs(),this.revealTab(r),this.markTabLoaded(r),this.activeTabValue=r}async setTheTargetPanelHeight(t){if(this.viewValue==="edit"||this.viewValue==="new"||hc(this.targetTabPanel(t).dataset.loaded))return;let{height:e}=this.currentTab.getBoundingClientRect();this.targetTabPanel(t).style.height=`${e}px`,await this.targetTabPanel(t).loaded,this.targetTabPanel(t).style.height=""}markTabLoaded(t){this.targetTabPanel(t).dataset.loaded=!0}revealTab(t){this.targetTabPanel(t).classList.remove("hidden")}hideAllTabs(){this.tabPanelTargets.map(t=>t.classList.add("hidden"))}};var l0=ua(cSe());var fSe="&#8203;";function hV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hSe(t){return function(e){if(Array.isArray(e))return hV(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return hV(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hV(e,r)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var hy={isEnabled:function(){var t;return(t=window.TAGIFY_DEBUG)===null||t===void 0||t},log:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n;this.isEnabled()&&(n=console).log.apply(n,["[Tagify]:"].concat(hSe(e)))},warn:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n;this.isEnabled()&&(n=console).warn.apply(n,["[Tagify]:"].concat(hSe(e)))}},hA=function(t,e,r,n){return t=""+t,e=""+e,n&&(t=t.trim(),e=e.trim()),r?t==e:t.toLowerCase()==e.toLowerCase()},dSe=function(t,e){return t&&Array.isArray(t)&&t.map(function(r){return bV(r,e)})};function bV(t,e){var r,n={};for(r in t)e.indexOf(r)<0&&(n[r]=t[r]);return n}function dV(t){return new DOMParser().parseFromString(t.trim(),"text/html").body.firstElementChild}function pSe(t,e){for(e=e||"previous";t=t[e+"Sibling"];)if(t.nodeType==3)return t}function a0(t){return typeof t=="string"?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/`|'/g,"&#039;"):t}function Kd(t){var e=Object.prototype.toString.call(t).split(" ")[1].slice(0,-1);return t===Object(t)&&e!="Array"&&e!="Function"&&e!="RegExp"&&e!="HTMLUnknownElement"}function Cl(t,e,r){var n,i;function o(s,u){for(var h in u)if(u.hasOwnProperty(h)){if(Kd(u[h])){Kd(s[h])?o(s[h],u[h]):s[h]=Object.assign({},u[h]);continue}if(Array.isArray(u[h])){s[h]=Object.assign([],u[h]);continue}s[h]=u[h]}}return n=t,((i=Object)!=null&&typeof Symbol<"u"&&i[Symbol.hasInstance]?i[Symbol.hasInstance](n):n instanceof i)||(t={}),o(t,e),r&&o(t,r),t}function mSe(){var t=[],e={},r=!0,n=!1,i=void 0;try{for(var o,s=arguments[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var u=o.value,h=!0,y=!1,w=void 0;try{for(var T,I=u[Symbol.iterator]();!(h=(T=I.next()).done);h=!0){var P=T.value;Kd(P)?e[P.value]||(t.push(P),e[P.value]=1):t.includes(P)||t.push(P)}}catch(L){y=!0,w=L}finally{try{h||I.return==null||I.return()}finally{if(y)throw w}}}}catch(L){n=!0,i=L}finally{try{r||s.return==null||s.return()}finally{if(n)throw i}}return t}function rM(t){return String.prototype.normalize?typeof t=="string"?t.normalize("NFD").replace(/[\u0300-\u036f]/g,""):void 0:t}var gSe=function(){return/(?=.*chrome)(?=.*android)/i.test(navigator.userAgent)};function vSe(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}function s0(t){var e;return SSe.call(this,t)&&(t==null||(e=t.classList)===null||e===void 0?void 0:e.contains(this.settings.classNames.tag))}function ySe(t){return SSe.call(this,t)&&t?.closest(this.settings.classNames.tagSelector)}function SSe(t){var e;return(t==null||(e=t.closest)===null||e===void 0?void 0:e.call(t,this.settings.classNames.namespaceSelector))===this.DOM.scope}function ESe(t,e){var r=window.getSelection();return e=e||r.getRangeAt(0),typeof t=="string"&&(t=document.createTextNode(t)),e&&(e.deleteContents(),e.insertNode(t)),t}function Ua(t,e,r){return t?(e&&(t.__tagifyTagData=r?e:Cl({},t.__tagifyTagData||{},e)),t.__tagifyTagData):(hy.warn("tag element doesn't exist",{tagElm:t,data:e}),e)}function fy(t){if(t&&t.parentNode){var e=t,r=window.getSelection(),n=r.getRangeAt(0);r.rangeCount&&(n.setStartAfter(e),n.collapse(!0),r.removeAllRanges(),r.addRange(n))}}function TSe(t,e){t.forEach(function(r){if(Ua(r.previousSibling)||!r.previousSibling){var n=document.createTextNode("\u200B");r.before(n),e&&fy(n)}})}var pV={delimiters:",",pattern:null,tagTextProp:"value",maxTags:1/0,callbacks:{},addTagOnBlur:!0,addTagOn:["blur","tab","enter"],onChangeAfterBlur:!0,duplicates:!1,whitelist:[],blacklist:[],enforceWhitelist:!1,userInput:!0,focusable:!0,keepInvalidTags:!1,createInvalidTags:!0,mixTagsAllowedAfter:/,|\.|\:|\s/,mixTagsInterpolator:["[[","]]"],backspace:!0,skipInvalid:!1,pasteAsTags:!0,editTags:{clicks:2,keepInvalid:!0},transformTag:function(){},trim:!0,a11y:{focusableTags:!1},mixMode:{insertAfterTag:"\xA0"},autoComplete:{enabled:!0,rightKey:!1,tabKey:!1},classNames:{namespace:"tagify",mixMode:"tagify--mix",selectMode:"tagify--select",input:"tagify__input",focus:"tagify--focus",tagNoAnimation:"tagify--noAnim",tagInvalid:"tagify--invalid",tagNotAllowed:"tagify--notAllowed",scopeLoading:"tagify--loading",hasMaxTags:"tagify--hasMaxTags",hasNoTags:"tagify--noTags",empty:"tagify--empty",inputInvalid:"tagify__input--invalid",dropdown:"tagify__dropdown",dropdownWrapper:"tagify__dropdown__wrapper",dropdownHeader:"tagify__dropdown__header",dropdownFooter:"tagify__dropdown__footer",dropdownItem:"tagify__dropdown__item",dropdownItemActive:"tagify__dropdown__item--active",dropdownItemHidden:"tagify__dropdown__item--hidden",dropdownItemSelected:"tagify__dropdown__item--selected",dropdownInital:"tagify__dropdown--initial",tag:"tagify__tag",tagText:"tagify__tag-text",tagX:"tagify__tag__removeBtn",tagLoading:"tagify__tag--loading",tagEditing:"tagify__tag--editable",tagFlash:"tagify__tag--flash",tagHide:"tagify__tag--hide"},dropdown:{classname:"",enabled:2,maxItems:10,searchKeys:["value","searchBy"],fuzzySearch:!0,caseSensitive:!1,accentedSearch:!0,includeSelectedTags:!1,escapeHTML:!0,highlightFirst:!0,closeOnSelect:!0,clearOnSelect:!0,position:"all",appendTarget:null},hooks:{beforeRemoveTag:function(){return Promise.resolve()},beforePaste:function(){return Promise.resolve()},suggestionClick:function(){return Promise.resolve()},beforeKeyDown:function(){return Promise.resolve()}}};function WSt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $St(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){WSt(t,i,r[i])})}return t}function GSt(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),i.push.apply(i,o)}return i}(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}function mV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KSt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ZSt(t){return function(e){if(Array.isArray(e))return mV(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return mV(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mV(e,r)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function YSt(){for(var t in this.dropdown={},this._dropdown)this.dropdown[t]=typeof this._dropdown[t]=="function"?this._dropdown[t].bind(this):this._dropdown[t];this.dropdown.refs(),this.DOM.dropdown.__tagify=this}var nM,E1,XSt=(nM=function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){KSt(t,i,r[i])})}return t}({},{events:{binding:function(){var t=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],e=this.dropdown.events.callbacks,r=this.listeners.dropdown=this.listeners.dropdown||{position:this.dropdown.position.bind(this,null),onKeyDown:e.onKeyDown.bind(this),onMouseOver:e.onMouseOver.bind(this),onMouseLeave:e.onMouseLeave.bind(this),onClick:e.onClick.bind(this),onScroll:e.onScroll.bind(this)},n=t?"addEventListener":"removeEventListener";this.settings.dropdown.position!="manual"&&(document[n]("scroll",r.position,!0),window[n]("resize",r.position),window[n]("keydown",r.onKeyDown)),this.DOM.dropdown[n]("mouseover",r.onMouseOver),this.DOM.dropdown[n]("mouseleave",r.onMouseLeave),this.DOM.dropdown[n]("mousedown",r.onClick),this.DOM.dropdown.content[n]("scroll",r.onScroll)},callbacks:{onKeyDown:function(t){var e=this;if(this.state.hasFocus&&!this.state.composing){var r=this.settings,n=r.dropdown.includeSelectedTags,i=this.DOM.dropdown.querySelector(r.classNames.dropdownItemActiveSelector),o=this.dropdown.getSuggestionDataByNode(i),s=r.mode=="mix",u=r.mode=="select";r.hooks.beforeKeyDown(t,{tagify:this}).then(function(h){switch(t.key){case"ArrowDown":case"ArrowUp":case"Down":case"Up":t.preventDefault();var y=e.dropdown.getAllSuggestionsRefs(),w=t.key=="ArrowUp"||t.key=="Up";i&&(i=e.dropdown.getNextOrPrevOption(i,!w)),i&&i.matches(r.classNames.dropdownItemSelector)||(i=y[w?y.length-1:0]),e.dropdown.highlightOption(i,!0);break;case"PageUp":case"PageDown":var T;t.preventDefault();var I=e.dropdown.getAllSuggestionsRefs(),P=Math.floor(e.DOM.dropdown.content.clientHeight/((T=I[0])===null||T===void 0?void 0:T.offsetHeight))||1,L=t.key==="PageUp";if(i){var R=I.indexOf(i),W=L?Math.max(0,R-P):Math.min(I.length-1,R+P);i=I[W]}else i=I[0];e.dropdown.highlightOption(i,!0);break;case"Home":case"End":t.preventDefault();var G=e.dropdown.getAllSuggestionsRefs();i=G[t.key==="Home"?0:G.length-1],e.dropdown.highlightOption(i,!0);break;case"Escape":case"Esc":e.dropdown.hide();break;case"ArrowRight":if(e.state.actions.ArrowLeft||r.autoComplete.rightKey)return;case"Tab":var q=!r.autoComplete.rightKey||!r.autoComplete.tabKey;if(!s&&!u&&i&&q&&!e.state.editing&&o){t.preventDefault();var V=e.dropdown.getMappedValue(o);return e.state.autoCompleteData=o,e.input.autocomplete.set.call(e,V),!1}return!0;case"Enter":t.preventDefault(),e.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),r.hooks.suggestionClick(t,{tagify:e,tagData:o,suggestionElm:i}).then(function(){if(i){var K=n?i:e.dropdown.getNextOrPrevOption(i,!w);e.dropdown.selectOption(i,t,function(){if(K){var j=K.getAttribute("value");K=e.dropdown.getSuggestionNodeByValue(j),e.dropdown.highlightOption(K)}})}else e.dropdown.hide(),s||e.addTags(e.state.inputText.trim(),!0)}).catch(function(K){return hy.warn(K)});break;case"Backspace":if(s||e.state.editing.scope)return;var p=e.input.raw.call(e);p!=""&&p.charCodeAt(0)!=8203||(r.backspace===!0?e.removeTags():r.backspace=="edit"&&setTimeout(e.editTag.bind(e),0))}})}},onMouseOver:function(t){var e=t.target.closest(this.settings.classNames.dropdownItemSelector);this.dropdown.highlightOption(e)},onMouseLeave:function(t){this.dropdown.highlightOption()},onClick:function(t){var e=this;if(t.button==0&&t.target!=this.DOM.dropdown&&t.target!=this.DOM.dropdown.content){var r=t.target.closest(this.settings.classNames.dropdownItemSelector),n=this.dropdown.getSuggestionDataByNode(r);this.state.actions.selectOption=!0,setTimeout(function(){return e.state.actions.selectOption=!1},100),this.settings.hooks.suggestionClick(t,{tagify:this,tagData:n,suggestionElm:r}).then(function(){r?e.dropdown.selectOption(r,t):e.dropdown.hide()}).catch(function(i){return hy.warn(i)})}},onScroll:function(t){var e=t.target,r=e.scrollTop/(e.scrollHeight-e.parentNode.clientHeight)*100;this.trigger("dropdown:scroll",{percentage:Math.round(r)})}}},refilter:function(t){t=t||this.state.dropdown.query||"",this.suggestedListItems=this.dropdown.filterListItems(t),this.dropdown.fill(),this.suggestedListItems.length||this.dropdown.hide(),this.trigger("dropdown:updated",this.DOM.dropdown)},getSuggestionDataByNode:function(t){for(var e,r=t&&t.getAttribute("value"),n=this.suggestedListItems.length;n--;){if(Kd(e=this.suggestedListItems[n])&&e.value==r)return e;if(e==r)return{value:e}}},getSuggestionNodeByValue:function(t){return this.dropdown.getAllSuggestionsRefs().find(function(e){return e.getAttribute("value")===t})},getNextOrPrevOption:function(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.dropdown.getAllSuggestionsRefs(),n=r.findIndex(function(i){return i===t});return e?r[n+1]:r[n-1]},highlightOption:function(t,e){var r,n=this.settings.classNames.dropdownItemActive;if(this.state.ddItemElm&&(this.state.ddItemElm.classList.remove(n),this.state.ddItemElm.removeAttribute("aria-selected")),!t)return this.state.ddItemData=null,this.state.ddItemElm=null,void this.input.autocomplete.suggest.call(this);r=this.dropdown.getSuggestionDataByNode(t),this.state.ddItemData=r,this.state.ddItemElm=t,t.classList.add(n),t.setAttribute("aria-selected",!0),e&&(t.parentNode.scrollTop=t.clientHeight+t.offsetTop-t.parentNode.clientHeight),this.settings.autoComplete&&(this.input.autocomplete.suggest.call(this,r),this.dropdown.position())},selectOption:function(t,e,r){var n=this,i=this.settings,o=i.dropdown.includeSelectedTags,s=i.dropdown,u=s.clearOnSelect,h=s.closeOnSelect;if(!t)return this.addTags(this.state.inputText,!0),void(h&&this.dropdown.hide());e=e||{};var y=t.getAttribute("value"),w=y=="noMatch",T=i.mode=="mix",I=this.suggestedListItems.find(function(L){var R;return((R=L.value)!==null&&R!==void 0?R:L)==y});if(this.trigger("dropdown:select",{data:I,elm:t,event:e}),I||w){if(this.state.editing){var P=this.normalizeTags([I])[0];I=i.transformTag.call(this,P)||P,this.onEditTagDone(null,Cl({__isValid:!0},I))}else this[T?"addMixTags":"addTags"]([I||this.input.raw.call(this)],u);(T||this.DOM.input.parentNode)&&(setTimeout(function(){n.DOM.input.focus(),n.toggleFocusClass(!0)}),h&&setTimeout(this.dropdown.hide.bind(this)),o?r&&r():(t.addEventListener("transitionend",function(){n.dropdown.fillHeaderFooter(),setTimeout(function(){t.remove(),n.dropdown.refilter(),r&&r()},100)},{once:!0}),t.classList.add(this.settings.classNames.dropdownItemHidden)))}else h&&setTimeout(this.dropdown.hide.bind(this))},selectAll:function(t){this.suggestedListItems.length=0,this.dropdown.hide(),this.dropdown.filterListItems("");var e=this.dropdown.filterListItems("");return t||(e=this.state.dropdown.suggestions),this.addTags(e,!0),this},filterListItems:function(t,e){var r,n,i,o,s,u,h=function(){var K,j,Q=void 0,ee=void 0;K=L[V],n=((j=Object)!=null&&typeof Symbol<"u"&&j[Symbol.hasInstance]?j[Symbol.hasInstance](K):K instanceof j)?L[V]:{value:L[V]};var se,me=Object.keys(n).some(function(ve){return q.includes(ve)})?q:["value"];T.fuzzySearch&&!e.exact?(o=me.reduce(function(ve,U){return ve+" "+(n[U]||"")},"").toLowerCase().trim(),T.accentedSearch&&(o=rM(o),u=rM(u)),Q=o.indexOf(u)==0,ee=o===u,se=o,i=u.toLowerCase().split(" ").every(function(ve){return se.includes(ve.toLowerCase())})):(Q=!0,i=me.some(function(ve){var U=""+(n[ve]||"");return T.accentedSearch&&(U=rM(U),u=rM(u)),T.caseSensitive||(U=U.toLowerCase()),ee=U===u,e.exact?U===u:U.indexOf(u)==0})),s=!T.includeSelectedTags&&r.isTagDuplicate(Kd(n)?n.value:n),i&&!s&&(ee&&Q?P.push(n):T.sortby=="startsWith"&&Q?I.unshift(n):I.push(n))},y=this,w=this.settings,T=w.dropdown,I=(e=e||{},[]),P=[],L=w.whitelist,R=T.maxItems>=0?T.maxItems:1/0,W=T.includeSelectedTags,G=typeof T.sortby=="function",q=T.searchKeys,V=0;if(!(t=w.mode=="select"&&this.value.length&&this.value[0][w.tagTextProp]==t?"":t)||!q.length){I=W?L:L.filter(function(K){return!y.isTagDuplicate(Kd(K)?K.value:K)});var p=G?T.sortby(I,u):I.slice(0,R);return this.state.dropdown.suggestions=p,p}for(u=T.caseSensitive?""+t:(""+t).toLowerCase();V<L.length;V++)r=this,h();return this.state.dropdown.suggestions=P.concat(I),p=G?T.sortby(P.concat(I),u):P.concat(I).slice(0,R),this.state.dropdown.suggestions=p,p},getMappedValue:function(t){var e=this.settings.dropdown.mapValueTo;return e?typeof e=="function"?e(t):t[e]||t.value:t.value},createListHTML:function(t){var e=this;return Cl([],t).map(function(r,n){typeof r!="string"&&typeof r!="number"||(r={value:r});var i=e.dropdown.getMappedValue(r);return i=typeof i=="string"&&e.settings.dropdown.escapeHTML?a0(i):i,e.settings.templates.dropdownItem.apply(e,[GSt($St({},r),{mappedValue:i}),e])}).join("")}}),E1=(E1={refs:function(){this.DOM.dropdown=this.parseTemplate("dropdown",[this.settings]),this.DOM.dropdown.content=this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-wrapper']")},getHeaderRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-header']")},getFooterRef:function(){return this.DOM.dropdown.querySelector("[data-selector='tagify-suggestions-footer']")},getAllSuggestionsRefs:function(){return ZSt(this.DOM.dropdown.content.querySelectorAll(this.settings.classNames.dropdownItemSelector))},show:function(t){var e,r,n,i=this,o=this.settings,s=o.mode=="mix"&&!o.enforceWhitelist,u=!o.whitelist||!o.whitelist.length,h=o.dropdown.position=="manual";if(t=t===void 0?this.state.inputText:t,!(u&&!s&&!o.templates.dropdownItemNoMatch||o.dropdown.enabled===!1||this.state.isLoading||this.settings.readonly)){if(clearTimeout(this.dropdownHide__bindEventsTimeout),this.suggestedListItems=this.dropdown.filterListItems(t),t&&!this.suggestedListItems.length&&(this.trigger("dropdown:noMatch",t),o.templates.dropdownItemNoMatch&&(n=o.templates.dropdownItemNoMatch.call(this,{value:t}))),!n){if(this.suggestedListItems.length)t&&s&&!this.state.editing.scope&&!hA(this.suggestedListItems[0].value,t)&&this.suggestedListItems.unshift({value:t});else{if(!t||!s||this.state.editing.scope)return this.input.autocomplete.suggest.call(this),void this.dropdown.hide();this.suggestedListItems=[{value:t}]}r=""+(Kd(e=this.suggestedListItems[0])?e.value:e),o.autoComplete&&r&&r.indexOf(t)==0&&this.input.autocomplete.suggest.call(this,e)}this.dropdown.fill(n),o.dropdown.highlightFirst&&this.dropdown.highlightOption(this.DOM.dropdown.content.querySelector(o.classNames.dropdownItemSelector)),this.state.dropdown.visible||setTimeout(this.dropdown.events.binding.bind(this)),this.state.dropdown.visible=t||!0,this.state.dropdown.query=t,this.setStateSelection(),h||setTimeout(function(){i.dropdown.position(),i.dropdown.render()}),setTimeout(function(){i.trigger("dropdown:show",i.DOM.dropdown)})}},hide:function(t){var e=this,r=this.DOM,n=r.scope,i=r.dropdown,o=this.settings.dropdown.position=="manual"&&!t;if(i&&document.body.contains(i)&&!o)return window.removeEventListener("resize",this.dropdown.position),this.dropdown.events.binding.call(this,!1),n.setAttribute("aria-expanded",!1),i.parentNode.removeChild(i),setTimeout(function(){e.state.dropdown.visible=!1},100),this.state.dropdown.query=this.state.ddItemData=this.state.ddItemElm=this.state.selection=null,this.state.tag&&this.state.tag.value.length&&(this.state.flaggedTags[this.state.tag.baseOffset]=this.state.tag),this.trigger("dropdown:hide",i),this},toggle:function(t){this.dropdown[this.state.dropdown.visible&&!t?"hide":"show"]()},getAppendTarget:function(){var t=this.settings.dropdown;return typeof t.appendTarget=="function"?t.appendTarget():t.appendTarget},render:function(){var t,e,r,n=this,i=(t=this.DOM.dropdown,(r=t.cloneNode(!0)).style.cssText="position:fixed; top:-9999px; opacity:0",document.body.appendChild(r),e=r.clientHeight,r.parentNode.removeChild(r),e),o=this.settings,s=this.dropdown.getAppendTarget();return o.dropdown.enabled===!1||(this.DOM.scope.setAttribute("aria-expanded",!0),document.body.contains(this.DOM.dropdown)||(this.DOM.dropdown.classList.add(o.classNames.dropdownInital),this.dropdown.position(i),s.appendChild(this.DOM.dropdown),setTimeout(function(){return n.DOM.dropdown.classList.remove(o.classNames.dropdownInital)}))),this},fill:function(t){t=typeof t=="string"?t:this.dropdown.createListHTML(t||this.suggestedListItems);var e,r=this.settings.templates.dropdownContent.call(this,t);this.DOM.dropdown.content.innerHTML=(e=r)?e.replace(/\>[\r\n ]+\</g,"><").split(/>\s+</).join("><").trim():""},fillHeaderFooter:function(){var t=this.dropdown.filterListItems(this.state.dropdown.query),e=this.parseTemplate("dropdownHeader",[t]),r=this.parseTemplate("dropdownFooter",[t]),n=this.dropdown.getHeaderRef(),i=this.dropdown.getFooterRef();e&&n?.parentNode.replaceChild(e,n),r&&i?.parentNode.replaceChild(r,i)},position:function(t){var e=this.settings.dropdown,r=this.dropdown.getAppendTarget();if(e.position!="manual"&&r){var n,i,o,s,u,h,y,w,T,I,P=this.DOM.dropdown,L=e.RTL,R=r===document.body,W=r===this.DOM.scope,G=R?window.pageYOffset:r.scrollTop,q=document.fullscreenElement||document.webkitFullscreenElement||document.documentElement,V=q.clientHeight,p=Math.max(q.clientWidth||0,window.innerWidth||0),K=p>480?e.position:"all",j=this.DOM[K=="input"?"input":"scope"];if(t=t||P.clientHeight,this.state.dropdown.visible){if(K=="text"?(o=(n=function(){var se=document.getSelection();if(se.rangeCount){var me,ve,U=se.getRangeAt(0),$=U.startContainer,he=U.startOffset;if(he>0)return(ve=document.createRange()).setStart($,he-1),ve.setEnd($,he),{left:(me=ve.getBoundingClientRect()).right,top:me.top,bottom:me.bottom};if($.getBoundingClientRect)return $.getBoundingClientRect()}return{left:-9999,top:-9999}}()).bottom,i=n.top,s=n.left,u="auto"):(h=function(se){var me=0,ve=0;for(se=se.parentNode;se&&se!=q;)me+=se.offsetTop||0,ve+=se.offsetLeft||0,se=se.parentNode;return{top:me,left:ve}}(r),n=j.getBoundingClientRect(),i=W?-1:n.top-h.top,o=(W?n.height:n.bottom-h.top)-1,s=W?-1:n.left-h.left,u=n.width+"px"),!R){var Q=function(){for(var se=0,me=e.appendTarget.parentNode;me;)se+=me.scrollTop||0,me=me.parentNode;return se}();i+=Q,o+=Q}var ee;i=Math.floor(i),o=Math.ceil(o),w=p-s<120,T=((y=(ee=e.placeAbove)!==null&&ee!==void 0?ee:V-n.bottom<t)?i:o)+G,I=s+(L&&n.width||0)+window.pageXOffset,I=K=="text"&&w?"right: 0;":"left: ".concat(I,"px;"),P.style.cssText="".concat(I," top: ").concat(T,"px; min-width: ").concat(u,"; max-width: ").concat(u),P.setAttribute("placement",y?"top":"bottom"),P.setAttribute("position",K)}}}})!=null?E1:{},Object.getOwnPropertyDescriptors?Object.defineProperties(nM,Object.getOwnPropertyDescriptors(E1)):function(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}(Object(E1)).forEach(function(t){Object.defineProperty(nM,t,Object.getOwnPropertyDescriptor(E1,t))}),nM),fA="@yaireo/tagify/",JSt={empty:"empty",exceed:"number of tags exceeded",pattern:"pattern mismatch",duplicate:"already exists",notAllowed:"not allowed"},QSt={wrapper:function(t,e){return'<tags class="'.concat(e.classNames.namespace," ").concat(e.mode?"".concat(e.classNames[e.mode+"Mode"]):""," ").concat(t.className,`"
                    `).concat(e.readonly?"readonly":"",`
                    `).concat(e.disabled?"disabled":"",`
                    `).concat(e.required?"required":"",`
                    `).concat(e.mode==="select"?"spellcheck='false'":"",`
                    tabIndex="-1">
                    `).concat(this.settings.templates.input.call(this),`
                `).concat(fSe,`
        </tags>`)},input:function(){var t=this.settings,e=t.placeholder||fSe;return"<span ".concat(!t.readonly&&t.userInput?"contenteditable":"",' tabIndex="0" data-placeholder="').concat(e,'" aria-placeholder="').concat(t.placeholder||"",`"
                    class="`).concat(t.classNames.input,`"
                    role="textbox"
                    autocapitalize="false"
                    autocorrect="off"
                    aria-autocomplete="both"
                    aria-multiline="`).concat(t.mode=="mix",'"></span>')},tag:function(t,e){var r=e.settings;return'<tag title="'.concat(t.title||t.value,`"
                    contenteditable='false'
                    tabIndex="`).concat(r.a11y.focusableTags?0:-1,`"
                    class="`).concat(r.classNames.tag," ").concat(t.class||"",`"
                    `).concat(this.getAttributes(t),`>
            <x title='' tabIndex="`).concat(r.a11y.focusableTags?0:-1,'" class="').concat(r.classNames.tagX,`" role='button' aria-label='remove tag'></x>
            <div>
                <span `).concat(r.mode==="select"&&r.userInput?"contenteditable='true'":"",` autocapitalize="false" autocorrect="off" spellcheck='false' class="`).concat(r.classNames.tagText,'">').concat(t[r.tagTextProp]||t.value,`</span>
            </div>
        </tag>`)},dropdown:function(t){var e=t.dropdown,r=e.position=="manual";return'<div class="'.concat(r?"":t.classNames.dropdown," ").concat(e.classname,'" role="listbox" aria-labelledby="dropdown" dir="').concat(e.RTL?"rtl":"",`">
                    <div data-selector='tagify-suggestions-wrapper' class="`).concat(t.classNames.dropdownWrapper,`"></div>
                </div>`)},dropdownContent:function(t){var e=this.settings.templates,r=this.state.dropdown.suggestions;return`
            `.concat(e.dropdownHeader.call(this,r),`
            `).concat(t,`
            `).concat(e.dropdownFooter.call(this,r),`
        `)},dropdownItem:function(t){return"<div ".concat(this.getAttributes(t),`
                    class='`).concat(this.settings.classNames.dropdownItem," ").concat(this.isTagDuplicate(t.value)?this.settings.classNames.dropdownItemSelected:""," ").concat(t.class||"",`'
                    tabindex="0"
                    role="option">`).concat(t.mappedValue||t.value,"</div>")},dropdownHeader:function(t){return`<header data-selector='tagify-suggestions-header' class="`.concat(this.settings.classNames.dropdownHeader,'"></header>')},dropdownFooter:function(t){var e=t.length-this.settings.dropdown.maxItems;return e>0?`<footer data-selector='tagify-suggestions-footer' class="`.concat(this.settings.classNames.dropdownFooter,`">
                `).concat(e,` more items. Refine your search.
            </footer>`):""},dropdownItemNoMatch:null};function bSe(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _Se(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function eEt(t,e){return function(r){if(Array.isArray(r))return r}(t)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var o,s,u=[],h=!0,y=!1;try{for(i=i.call(r);!(h=(o=i.next()).done)&&(u.push(o.value),!n||u.length!==n);h=!0);}catch(w){y=!0,s=w}finally{try{h||i.return==null||i.return()}finally{if(y)throw s}}return u}}(t,e)||function(r,n){if(r){if(typeof r=="string")return bSe(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return bSe(r,n)}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o0(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xSe(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function tEt(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):function(r,n){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);n&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),i.push.apply(i,o)}return i}(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}function vV(t){return function(e){if(Array.isArray(e))return gV(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return gV(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gV(e,r)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rEt={customBinding:function(){var t=this;this.customEventsList.forEach(function(e){t.on(e,t.settings.callbacks[e])})},binding:function(){var t,e=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],r=this.settings,n=this.events.callbacks,i=e?"addEventListener":"removeEventListener";if(!this.state.mainEvents||!e){for(var o in this.state.mainEvents=e,e&&!this.listeners.main&&(this.events.bindGlobal.call(this),this.settings.isJQueryPlugin&&jQuery(this.DOM.originalInput).on("tagify.removeAllTags",this.removeAllTags.bind(this))),t=this.listeners.main=this.listeners.main||{keydown:["input",n.onKeydown.bind(this)],click:["scope",n.onClickScope.bind(this)],dblclick:r.mode!="select"&&["scope",n.onDoubleClickScope.bind(this)],paste:["input",n.onPaste.bind(this)],drop:["input",n.onDrop.bind(this)],compositionstart:["input",n.onCompositionStart.bind(this)],compositionend:["input",n.onCompositionEnd.bind(this)]})t[o]&&this.DOM[t[o][0]][i](o,t[o][1]);var s=this.listeners.main.inputMutationObserver||new MutationObserver(n.onInputDOMChange.bind(this));s.disconnect(),r.mode=="mix"&&s.observe(this.DOM.input,{childList:!0}),this.events.bindOriginaInputListener.call(this)}},bindOriginaInputListener:function(t){var e=(t||0)+500;this.listeners.main&&(clearInterval(this.listeners.main.originalInputValueObserverInterval),this.listeners.main.originalInputValueObserverInterval=setInterval(this.events.callbacks.observeOriginalInputValue.bind(this),e))},bindGlobal:function(t){var e,r=this.events.callbacks,n=t?"removeEventListener":"addEventListener";if(this.listeners&&(t||!this.listeners.global)){this.listeners.global=this.listeners.global||[{type:this.isIE?"keydown":"input",target:this.DOM.input,cb:r[this.isIE?"onInputIE":"onInput"].bind(this)},{type:"keydown",target:window,cb:r.onWindowKeyDown.bind(this)},{type:"focusin",target:this.DOM.scope,cb:r.onFocusBlur.bind(this)},{type:"focusout",target:this.DOM.scope,cb:r.onFocusBlur.bind(this)},{type:"click",target:document,cb:r.onClickAnywhere.bind(this),useCapture:!0}];var i=!0,o=!1,s=void 0;try{for(var u,h=this.listeners.global[Symbol.iterator]();!(i=(u=h.next()).done);i=!0)(e=u.value).target[n](e.type,e.cb,!!e.useCapture)}catch(y){o=!0,s=y}finally{try{i||h.return==null||h.return()}finally{if(o)throw s}}}},unbindGlobal:function(){this.events.bindGlobal.call(this,!0)},callbacks:{onFocusBlur:function(t){var e,r,n=this.settings,i=ySe.call(this,t.relatedTarget),o=s0.call(this,t.relatedTarget),s=t.target.classList.contains(n.classNames.tagX),u=t.type=="focusin",h=t.type=="focusout";s&&n.mode!="mix"&&this.DOM.input.focus(),i&&u&&!o&&!s&&this.toggleFocusClass(this.state.hasFocus=+new Date);var y=t.target?this.trim(this.DOM.input.textContent):"",w=(r=this.value)===null||r===void 0||(e=r[0])===null||e===void 0?void 0:e[n.tagTextProp],T=n.dropdown.enabled>=0,I={relatedTarget:t.relatedTarget},P=this.state.actions.selectOption&&(T||!n.dropdown.closeOnSelect),L=this.state.actions.addNew&&T;if(h){if(t.relatedTarget===this.DOM.scope)return this.dropdown.hide(),void this.DOM.input.focus();this.postUpdate(),n.onChangeAfterBlur&&this.triggerChangeEvent()}if(!(P||L||s))if(this.state.hasFocus=!(!u&&!i)&&+new Date,this.toggleFocusClass(this.state.hasFocus),n.mode!="mix"){if(u){if(!n.focusable)return;var R=n.dropdown.enabled===0&&!this.state.dropdown.visible,W=!o||n.mode==="select",G=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector);return this.trigger("focus",I),void(R&&W&&(this.dropdown.show(this.value.length?"":void 0),this.setRangeAtStartEnd(!1,G)))}if(h){if(this.trigger("blur",I),this.loading(!1),n.mode=="select"){if(this.value.length){var q=this.getTagElms()[0];y=this.trim(q.textContent)}w===y&&(y="")}y&&!this.state.actions.selectOption&&n.addTagOnBlur&&n.addTagOn.includes("blur")&&this.addTags(y,!0)}i||(this.DOM.input.removeAttribute("style"),this.dropdown.hide())}else u?this.trigger("focus",I):h&&(this.trigger("blur",I),this.loading(!1),this.dropdown.hide(),this.state.dropdown.visible=void 0,this.setStateSelection())},onCompositionStart:function(t){this.state.composing=!0},onCompositionEnd:function(t){this.state.composing=!1},onWindowKeyDown:function(t){var e,r=this.settings,n=document.activeElement,i=ySe.call(this,n)&&this.DOM.scope.contains(n),o=n===this.DOM.input,s=i&&n.hasAttribute("readonly"),u=this.DOM.scope.querySelector(this.settings.classNames.tagTextSelector),h=this.state.dropdown.visible;if((t.key==="Tab"&&h||this.state.hasFocus||i&&!s)&&!o){e=n.nextElementSibling;var y=t.target.classList.contains(r.classNames.tagX);switch(t.key){case"Backspace":r.readonly||this.state.editing||(this.removeTags(n),(e||this.DOM.input).focus());break;case"Enter":if(y)return void this.removeTags(t.target.parentNode);r.a11y.focusableTags&&s0.call(this,n)&&setTimeout(this.editTag.bind(this),0,n);break;case"ArrowDown":this.state.dropdown.visible||r.mode=="mix"||this.dropdown.show();break;case"Tab":u?.focus()}}},onKeydown:function(t){var e=this,r=this.settings;if(!this.state.composing&&r.userInput){r.mode=="select"&&r.enforceWhitelist&&this.value.length&&t.key!="Tab"&&t.preventDefault();var n=this.trim(t.target.textContent);this.trigger("keydown",{event:t}),r.hooks.beforeKeyDown(t,{tagify:this}).then(function(i){if(r.mode=="mix"){switch(t.key){case"Left":case"ArrowLeft":e.state.actions.ArrowLeft=!0;break;case"Delete":case"Backspace":if(e.state.editing)return;var o=document.getSelection(),s=t.key=="Delete"&&o.anchorOffset==(o.anchorNode.length||0),u=o.anchorNode.previousSibling,h=o.anchorNode.nodeType==1||!o.anchorOffset&&u&&u.nodeType==1&&o.anchorNode.previousSibling;(function(G){var q=document.createElement("div");G.replace(/\&#?[0-9a-z]+;/gi,function(V){return q.innerHTML=V,q.innerText})})(e.DOM.input.innerHTML);var y,w,T,I=e.getTagElms(),P=o.anchorNode.length===1&&o.anchorNode.nodeValue=="\u200B";if(r.backspace=="edit"&&h)return y=o.anchorNode.nodeType==1?null:o.anchorNode.previousElementSibling,setTimeout(e.editTag.bind(e),0,y),void t.preventDefault();if(gSe()&&xSe(h,Element))return T=pSe(h),h.hasAttribute("readonly")||h.remove(),e.DOM.input.focus(),void setTimeout(function(){fy(T),e.DOM.input.click()});if(o.anchorNode.nodeName=="BR")return;if((s||h)&&o.anchorNode.nodeType==1?w=o.anchorOffset==0?s?I[0]:null:I[Math.min(I.length,o.anchorOffset)-1]:s?w=o.anchorNode.nextElementSibling:xSe(h,Element)&&(w=h),o.anchorNode.nodeType==3&&!o.anchorNode.nodeValue&&o.anchorNode.previousElementSibling&&t.preventDefault(),(h||s)&&!r.backspace||o.type!="Range"&&!o.anchorOffset&&o.anchorNode==e.DOM.input&&t.key!="Delete")return void t.preventDefault();if(o.type!="Range"&&w&&w.hasAttribute("readonly"))return void fy(pSe(w));t.key=="Delete"&&P&&Ua(o.anchorNode.nextSibling)&&e.removeTags(o.anchorNode.nextSibling)}return!0}var L=r.dropdown.position=="manual";switch(t.key){case"Backspace":r.mode=="select"&&r.enforceWhitelist&&e.value.length?e.removeTags():e.state.dropdown.visible&&r.dropdown.position!="manual"||t.target.textContent!=""&&n.charCodeAt(0)!=8203||(r.backspace===!0?e.removeTags():r.backspace=="edit"&&setTimeout(e.editTag.bind(e),0));break;case"Esc":case"Escape":if(e.state.dropdown.visible)return;t.target.blur();break;case"Down":case"ArrowDown":e.state.dropdown.visible||e.dropdown.show();break;case"ArrowRight":var R=e.state.inputSuggestion||e.state.ddItemData;if(R&&r.autoComplete.rightKey)return void e.addTags([R],!0);break;case"Tab":return!0;case"Enter":if(e.state.dropdown.visible&&!L)return;t.preventDefault();var W=e.state.autoCompleteData||n;setTimeout(function(){e.state.dropdown.visible&&!L||e.state.actions.selectOption||!r.addTagOn.includes(t.key.toLowerCase())||(e.addTags([W],!0),e.state.autoCompleteData=null)})}}).catch(function(i){return i})}},onInput:function(t){this.postUpdate();var e=this.settings;if(e.mode=="mix")return this.events.callbacks.onMixTagsInput.call(this,t);var r=this.input.normalize.call(this,void 0,{trim:!1}),n=r.length>=e.dropdown.enabled,i={value:r,inputElm:this.DOM.input},o=this.validateTag({value:r});e.mode=="select"&&this.toggleScopeValidation(o),i.isValid=o,this.state.inputText!=r&&(this.input.set.call(this,r,!1),r.search(e.delimiters)!=-1?this.addTags(r)&&this.input.set.call(this):e.dropdown.enabled>=0&&this.dropdown[n?"show":"hide"](r),this.trigger("input",i))},onMixTagsInput:function(t){var e,r,n,i,o,s,u,h,y=this,w=this.settings,T=this.value.length,I=this.getTagElms(),P=document.createDocumentFragment(),L=window.getSelection().getRangeAt(0),R=[].map.call(I,function(W){return Ua(W).value});if(t.inputType=="deleteContentBackward"&&gSe()&&this.events.callbacks.onKeydown.call(this,{target:t.target,key:"Backspace"}),TSe(this.getTagElms()),this.value.slice().forEach(function(W){W.readonly&&!R.includes(W.value)&&P.appendChild(y.createTagElem(W))}),P.childNodes.length&&(L.insertNode(P),this.setRangeAtStartEnd(!1,P.lastChild)),I.length!=T)return this.value=[].map.call(this.getTagElms(),function(W){return Ua(W)}),void this.update({withoutChangeEvent:!0});if(this.hasMaxTags())return!0;if(window.getSelection&&(s=window.getSelection()).rangeCount>0&&s.anchorNode.nodeType==3){if((L=s.getRangeAt(0).cloneRange()).collapse(!0),L.setStart(s.focusNode,0),n=(e=L.toString().slice(0,L.endOffset)).split(w.pattern).length-1,(r=e.match(w.pattern))&&(i=e.slice(e.lastIndexOf(r[r.length-1]))),i){if(this.state.actions.ArrowLeft=!1,this.state.tag={prefix:i.match(w.pattern)[0],value:i.replace(w.pattern,"")},this.state.tag.baseOffset=s.baseOffset-this.state.tag.value.length,h=this.state.tag.value.match(w.delimiters))return this.state.tag.value=this.state.tag.value.replace(w.delimiters,""),this.state.tag.delimiters=h[0],this.addTags(this.state.tag.value,w.dropdown.clearOnSelect),void this.dropdown.hide();o=this.state.tag.value.length>=w.dropdown.enabled;try{u=(u=this.state.flaggedTags[this.state.tag.baseOffset]).prefix==this.state.tag.prefix&&u.value[0]==this.state.tag.value[0],this.state.flaggedTags[this.state.tag.baseOffset]&&!this.state.tag.value&&delete this.state.flaggedTags[this.state.tag.baseOffset]}catch{}(u||n<this.state.mixMode.matchedPatternCount)&&(o=!1)}else this.state.flaggedTags={};this.state.mixMode.matchedPatternCount=n}setTimeout(function(){y.update({withoutChangeEvent:!0}),y.trigger("input",Cl({},y.state.tag,{textContent:y.DOM.input.textContent})),y.state.tag&&y.dropdown[o?"show":"hide"](y.state.tag.value)},10)},onInputIE:function(t){var e=this;setTimeout(function(){e.events.callbacks.onInput.call(e,t)})},observeOriginalInputValue:function(){this.DOM.originalInput.parentNode||this.destroy(),this.DOM.originalInput.value!=this.DOM.originalInput.tagifyValue&&this.loadOriginalValues()},onClickAnywhere:function(t){if(t.target!=this.DOM.scope&&!this.DOM.scope.contains(t.target)){this.toggleFocusClass(!1),this.state.hasFocus=!1;var e=t.target.closest(this.settings.classNames.dropdownSelector);e?.__tagify!=this&&this.dropdown.hide()}},onClickScope:function(t){var e=this.settings,r=t.target.closest("."+e.classNames.tag),n=t.target===this.DOM.scope,i=+new Date-this.state.hasFocus;if(n&&e.mode!="select")this.DOM.input.focus();else{if(!t.target.classList.contains(e.classNames.tagX))return r&&!this.state.editing?(this.trigger("click",{tag:r,index:this.getNodeIndex(r),data:Ua(r),event:t}),void(e.editTags!==1&&e.editTags.clicks!==1&&e.mode!="select"||this.events.callbacks.onDoubleClickScope.call(this,t))):void(t.target==this.DOM.input&&(e.mode=="mix"&&this.fixFirefoxLastTagNoCaret(),i>500||!e.focusable)?this.state.dropdown.visible?this.dropdown.hide():e.dropdown.enabled===0&&e.mode!="mix"&&this.dropdown.show(this.value.length?"":void 0):e.mode!="select"||e.dropdown.enabled!==0||this.state.dropdown.visible||(this.events.callbacks.onDoubleClickScope.call(this,tEt(function(o){for(var s=1;s<arguments.length;s++){var u=arguments[s]!=null?arguments[s]:{},h=Object.keys(u);typeof Object.getOwnPropertySymbols=="function"&&(h=h.concat(Object.getOwnPropertySymbols(u).filter(function(y){return Object.getOwnPropertyDescriptor(u,y).enumerable}))),h.forEach(function(y){o0(o,y,u[y])})}return o}({},t),{target:this.getTagElms()[0]})),!e.userInput&&this.dropdown.show()));this.removeTags(t.target.parentNode)}},onPaste:function(t){var e=this;t.preventDefault();var r,n,i,o=this.settings;if(!o.userInput)return!1;o.readonly||(n=t.clipboardData||window.clipboardData,i=n.getData("Text"),o.hooks.beforePaste(t,{tagify:this,pastedText:i,clipboardData:n}).then(function(s){s===void 0&&(s=i),s&&(e.injectAtCaret(s,window.getSelection().getRangeAt(0)),e.settings.mode=="mix"?e.events.callbacks.onMixTagsInput.call(e,t):e.settings.pasteAsTags?r=e.addTags(e.state.inputText+s,!0):(e.state.inputText=s,e.dropdown.show(s))),e.trigger("paste",{event:t,pastedText:i,clipboardData:n,tagsElems:r})}).catch(function(s){return s}))},onDrop:function(t){t.preventDefault()},onEditTagInput:function(t,e){var r,n=t.closest("."+this.settings.classNames.tag),i=this.getNodeIndex(n),o=Ua(n),s=this.input.normalize.call(this,t),u=(o0(r={},this.settings.tagTextProp,s),o0(r,"__tagId",o.__tagId),r),h=this.validateTag(u);this.editTagChangeDetected(Cl(o,u))||t.originalIsValid!==!0||(h=!0),n.classList.toggle(this.settings.classNames.tagInvalid,h!==!0),o.__isValid=h,n.title=h===!0?o.title||o.value:h,s.length>=this.settings.dropdown.enabled&&(this.state.editing&&(this.state.editing.value=s),this.dropdown.show(s)),this.trigger("edit:input",{tag:n,index:i,data:Cl({},this.value[i],{newValue:s}),event:e})},onEditTagPaste:function(t,e){var r=(e.clipboardData||window.clipboardData).getData("Text");e.preventDefault();var n=ESe(r);this.setRangeAtStartEnd(!1,n)},onEditTagClick:function(t,e){this.events.callbacks.onClickScope.call(this,e)},onEditTagFocus:function(t){this.state.editing={scope:t,input:t.querySelector("[contenteditable]")}},onEditTagBlur:function(t,e){var r=s0.call(this,e.relatedTarget);if(this.settings.mode=="select"&&r&&e.relatedTarget.contains(e.target))this.dropdown.hide();else if(this.state.editing&&(this.state.hasFocus||this.toggleFocusClass(),this.DOM.scope.contains(document.activeElement)||this.trigger("blur",{}),this.DOM.scope.contains(t))){var n,i,o,s=this.settings,u=t.closest("."+s.classNames.tag),h=Ua(u),y=this.input.normalize.call(this,t),w=(o0(n={},s.tagTextProp,y),o0(n,"__tagId",h.__tagId),n),T=h.__originalData,I=this.editTagChangeDetected(Cl(h,w)),P=this.validateTag(w);if(y)if(I){var L;if(i=this.hasMaxTags(),o=Cl({},T,(o0(L={},s.tagTextProp,this.trim(y)),o0(L,"__isValid",P),L)),s.transformTag.call(this,o,T),(P=(!i||T.__isValid===!0)&&this.validateTag(o))!==!0){if(this.trigger("invalid",{data:o,tag:u,message:P}),s.editTags.keepInvalid)return;s.keepInvalidTags?o.__isValid=P:o=T}else s.keepInvalidTags&&(delete o.title,delete o["aria-invalid"],delete o.class);this.onEditTagDone(u,o)}else this.onEditTagDone(u,T);else this.onEditTagDone(u)}},onEditTagkeydown:function(t,e){if(!this.state.composing)switch(this.trigger("edit:keydown",{event:t}),t.key){case"Esc":case"Escape":this.state.editing=!1,e.__tagifyTagData.__originalData.value?e.parentNode.replaceChild(e.__tagifyTagData.__originalHTML,e):e.remove();break;case"Enter":case"Tab":t.preventDefault(),setTimeout(function(){return t.target.blur()},0)}},onDoubleClickScope:function(t){var e=t.target.closest("."+this.settings.classNames.tag);if(e){var r,n,i=Ua(e),o=this.settings;i?.editable!==!1&&(r=e.classList.contains(this.settings.classNames.tagEditing),n=e.hasAttribute("readonly"),o.readonly||r||n||!this.settings.editTags||!o.userInput||(this.events.callbacks.onEditTagFocus.call(this,e),this.editTag(e)),this.toggleFocusClass(!0),o.mode!="select"&&this.trigger("dblclick",{tag:e,index:this.getNodeIndex(e),data:Ua(e)}))}},onInputDOMChange:function(t){var e=this;t.forEach(function(n){n.addedNodes.forEach(function(i){if(i.outerHTML=="<div><br></div>")i.replaceWith(document.createElement("br"));else if(i.nodeType==1&&i.querySelector(e.settings.classNames.tagSelector)){var o,s=document.createTextNode("");i.childNodes[0].nodeType==3&&i.previousSibling.nodeName!="BR"&&(s=document.createTextNode(`
`)),(o=i).replaceWith.apply(o,vV([s].concat(vV(vV(i.childNodes).slice(0,-1))))),fy(s)}else if(s0.call(e,i)){var u;if(((u=i.previousSibling)===null||u===void 0?void 0:u.nodeType)!=3||i.previousSibling.textContent||i.previousSibling.remove(),i.previousSibling&&i.previousSibling.nodeName=="BR"){i.previousSibling.replaceWith(`
\u200B`);for(var h=i.nextSibling,y="";h;)y+=h.textContent,h=h.nextSibling;y.trim()&&fy(i.previousSibling)}else i.previousSibling&&!Ua(i.previousSibling)||i.before("\u200B")}}),n.removedNodes.forEach(function(i){i&&i.nodeName=="BR"&&s0.call(e,r)&&(e.removeTags(r),e.fixFirefoxLastTagNoCaret())})});var r=this.DOM.input.lastChild;r&&r.nodeValue==""&&r.remove(),r&&r.nodeName=="BR"||this.DOM.input.appendChild(document.createElement("br"))}}};function yV(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wg(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function wSe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable}))),n.forEach(function(i){_V(t,i,r[i])})}return t}function iM(t){return function(e){if(Array.isArray(e))return yV(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,r){if(e){if(typeof e=="string")return yV(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yV(e,r)}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dA(t,e){if(!t){hy.warn("input element not found",t);var r=new Proxy(this,{get:function(){return function(){return r}}});return r}if(t.__tagify)return hy.warn("input element is already Tagified - Same instance is returned.",t),t.__tagify;var n;Cl(this,function(i){var o=document.createTextNode(""),s={};function u(h,y,w){w&&y.split(/\s+/g).forEach(function(T){return o[h+"EventListener"].call(o,T,w)})}return{removeAllCustomListeners:function(){Object.entries(s).forEach(function(h){var y=eEt(h,2),w=y[0];y[1].forEach(function(T){return u("remove",w,T)})}),s={}},off:function(h,y){return h&&(y?u("remove",h,y):h.split(/\s+/g).forEach(function(w){var T;(T=s[w])===null||T===void 0||T.forEach(function(I){return u("remove",w,I)}),delete s[w]})),this},on:function(h,y){return y&&typeof y=="function"&&(h.split(/\s+/g).forEach(function(w){Array.isArray(s[w])?s[w].push(y):s[w]=[y]}),u("add",h,y)),this},trigger:function(h,y,w){var T;if(w=w||{cloneData:!0},h)if(i.settings.isJQueryPlugin)h=="remove"&&(h="removeTag"),jQuery(i.DOM.originalInput).triggerHandler(h,[y]);else{try{var I=typeof y=="object"?y:{value:y};if((I=w.cloneData?Cl({},I):I).tagify=this,y.event&&(I.event=this.cloneEvent(y.event)),_Se(y,Object))for(var P in y)_Se(y[P],HTMLElement)&&(I[P]=y[P]);T=new CustomEvent(h,{detail:I})}catch(L){hy.warn(L)}o.dispatchEvent(T)}}}}(this)),this.isFirefox=/firefox|fxios/i.test(navigator.userAgent)&&!/seamonkey/i.test(navigator.userAgent),this.isIE=window.document.documentMode,e=e||{},this.getPersistedData=(n=e.id,function(i){var o;if(n){var s,u="/"+i;if(((o=localStorage)===null||o===void 0?void 0:o.getItem(fA+n+"/v"))===1)try{s=JSON.parse(localStorage[fA+n+u])}catch{}return s}}),this.setPersistedData=function(i){var o;return i?((o=localStorage)===null||o===void 0||o.setItem(fA+i+"/v",1),function(s,u){var h,y="/"+u,w=JSON.stringify(s);s&&u&&((h=localStorage)===null||h===void 0||h.setItem(fA+i+y,w),dispatchEvent(new Event("storage")))}):function(){}}(e.id),this.clearPersistedData=function(i){return function(o){var s=fA+"/"+i+"/";if(o)localStorage.removeItem(s+o);else for(var u in localStorage)u.includes(s)&&localStorage.removeItem(u)}}(e.id),this.applySettings(t,e),this.state={inputText:"",editing:!1,composing:!1,actions:{},mixMode:{},dropdown:{},flaggedTags:{}},this.value=[],this.listeners={},this.DOM={},this.build(t),YSt.call(this),this.getCSSVars(),this.loadOriginalValues(),this.events.customBinding.call(this),this.events.binding.call(this),t.autofocus&&this.DOM.input.focus(),t.__tagify=this}dA.prototype={_dropdown:XSt,placeCaretAfterNode:fy,getSetTagData:Ua,helpers:{sameStr:hA,removeCollectionProp:dSe,omit:bV,isObject:Kd,parseHTML:dV,escapeHTML:a0,extend:Cl,concatWithoutDups:mSe,getUID:vSe,isNodeTag:s0},customEventsList:["change","add","remove","invalid","input","paste","click","keydown","focus","blur","edit:input","edit:beforeUpdate","edit:updated","edit:start","edit:keydown","dropdown:show","dropdown:hide","dropdown:select","dropdown:updated","dropdown:noMatch","dropdown:scroll"],dataProps:["__isValid","__removed","__originalData","__originalHTML","__tagId"],trim:function(t){return this.settings.trim&&t&&typeof t=="string"?t.trim():t},parseHTML:dV,templates:QSt,parseTemplate:function(t,e){return dV((t=this.settings.templates[t]||t).apply(this,e))},set whitelist(t){var e=t&&Array.isArray(t);this.settings.whitelist=e?t:[],this.setPersistedData(e?t:[],"whitelist")},get whitelist(){return this.settings.whitelist},set userInput(t){this.settings.userInput=!!t,this.setContentEditable(!!t)},get userInput(){return this.settings.userInput},generateClassSelectors:function(t){var e=function(n){var i=n;Object.defineProperty(t,i+"Selector",{get:function(){return"."+this[i].split(" ")[0]}})};for(var r in t)e(r)},applySettings:function(t,e){var r,n;pV.templates=this.templates;var i=Cl({},pV,e.mode=="mix"?{dropdown:{position:"text"}}:{}),o=this.settings=Cl({},i,e);if(o.disabled=t.hasAttribute("disabled"),o.readonly=o.readonly||t.hasAttribute("readonly"),o.placeholder=a0(t.getAttribute("placeholder")||o.placeholder||""),o.required=t.hasAttribute("required"),this.generateClassSelectors(o.classNames),this.isIE&&(o.autoComplete=!1),["whitelist","blacklist"].forEach(function(u){var h=t.getAttribute("data-"+u);h&&wg(h=h.split(o.delimiters),Array)&&(o[u]=h)}),"autoComplete"in e&&!Kd(e.autoComplete)&&(o.autoComplete=pV.autoComplete,o.autoComplete.enabled=e.autoComplete),o.mode=="mix"&&(o.pattern=o.pattern||/@/,o.autoComplete.rightKey=!0,o.delimiters=e.delimiters||null,o.tagTextProp&&!o.dropdown.searchKeys.includes(o.tagTextProp)&&o.dropdown.searchKeys.push(o.tagTextProp)),t.pattern)try{o.pattern=new RegExp(t.pattern)}catch{}if(o.delimiters){o._delimiters=o.delimiters;try{o.delimiters=new RegExp(this.settings.delimiters,"g")}catch{}}o.disabled&&(o.userInput=!1),this.TEXTS=wSe({},JSt,o.texts||{}),o.mode=="select"&&(o.dropdown.includeSelectedTags=!0),(o.mode!="select"||!((r=e.dropdown)===null||r===void 0)&&r.enabled)&&o.userInput||(o.dropdown.enabled=0),o.dropdown.appendTarget=((n=e.dropdown)===null||n===void 0?void 0:n.appendTarget)||document.body,o.dropdown.includeSelectedTags===void 0&&(o.dropdown.includeSelectedTags=o.duplicates);var s=this.getPersistedData("whitelist");Array.isArray(s)&&(this.whitelist=Array.isArray(o.whitelist)?mSe(o.whitelist,s):s)},getAttributes:function(t){var e,r=this.getCustomAttributes(t),n="";for(e in r)n+=" "+e+(t[e]!==void 0?'="'.concat(r[e],'"'):"");return n},getCustomAttributes:function(t){if(!Kd(t))return"";var e,r={};for(e in t)e.slice(0,2)!="__"&&e!="class"&&t.hasOwnProperty(e)&&t[e]!==void 0&&(r[e]=a0(t[e]));return r},setStateSelection:function(){var t=window.getSelection(),e={anchorOffset:t.anchorOffset,anchorNode:t.anchorNode,range:t.getRangeAt&&t.rangeCount&&t.getRangeAt(0)};return this.state.selection=e,e},getCSSVars:function(){var t,e,r,n=getComputedStyle(this.DOM.scope,null);this.CSSVars={tagHideTransition:(t=function(i){if(!i)return{};var o=(i=i.trim().split(" ")[0]).split(/\d+/g).filter(function(s){return s}).pop().trim();return{value:+i.split(o).filter(function(s){return s})[0].trim(),unit:o}}((r="tag-hide-transition",n.getPropertyValue("--"+r))),e=t.value,t.unit=="s"?1e3*e:e)}},build:function(t){var e=this.DOM,r=t.closest("label");this.settings.mixMode.integrated?(e.originalInput=null,e.scope=t,e.input=t):(e.originalInput=t,e.originalInput_tabIndex=t.tabIndex,e.scope=this.parseTemplate("wrapper",[t,this.settings]),e.input=e.scope.querySelector(this.settings.classNames.inputSelector),t.parentNode.insertBefore(e.scope,t),t.tabIndex=-1),r&&r.setAttribute("for","")},destroy:function(){var t;this.events.unbindGlobal.call(this),(t=this.DOM.scope.parentNode)===null||t===void 0||t.removeChild(this.DOM.scope),this.DOM.originalInput.tabIndex=this.DOM.originalInput_tabIndex,delete this.DOM.originalInput.__tagify,this.dropdown.hide(!0),this.removeAllCustomListeners(),clearTimeout(this.dropdownHide__bindEventsTimeout),clearInterval(this.listeners.main.originalInputValueObserverInterval)},loadOriginalValues:function(t){var e,r=this.settings;if(this.state.blockChangeEvent=!0,t===void 0){var n=this.getPersistedData("value");t=n&&!this.DOM.originalInput.value?n:r.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value}if(this.removeAllTags(),t)if(r.mode=="mix")this.parseMixTags(t),(e=this.DOM.input.lastChild)&&e.tagName=="BR"||this.DOM.input.insertAdjacentHTML("beforeend","<br>");else{try{wg(JSON.parse(t),Array)&&(t=JSON.parse(t))}catch{}this.addTags(t,!0).forEach(function(i){return i&&i.classList.add(r.classNames.tagNoAnimation)})}else this.postUpdate();this.state.lastOriginalValueReported=r.mixMode.integrated?"":this.DOM.originalInput.value},cloneEvent:function(t){var e={};for(var r in t)r!="path"&&(e[r]=t[r]);return e},loading:function(t){return this.state.isLoading=t,this.DOM.scope.classList[t?"add":"remove"](this.settings.classNames.scopeLoading),this},tagLoading:function(t,e){return t&&t.classList[e?"add":"remove"](this.settings.classNames.tagLoading),this},toggleClass:function(t,e){typeof t=="string"&&this.DOM.scope.classList.toggle(t,e)},toggleScopeValidation:function(t){var e=t===!0||t===void 0;!this.settings.required&&t&&t===this.TEXTS.empty&&(e=!0),this.toggleClass(this.settings.classNames.tagInvalid,!e),this.DOM.scope.title=e?"":t},toggleFocusClass:function(t){this.toggleClass(this.settings.classNames.focus,!!t)},setPlaceholder:function(t){var e=this;["data","aria"].forEach(function(r){return e.DOM.input.setAttribute("".concat(r,"-placeholder"),t)})},triggerChangeEvent:function(){if(!this.settings.mixMode.integrated){var t=this.DOM.originalInput,e=this.state.lastOriginalValueReported!==t.value,r=new CustomEvent("change",{bubbles:!0});e&&(this.state.lastOriginalValueReported=t.value,r.simulated=!0,t._valueTracker&&t._valueTracker.setValue(Math.random()),t.dispatchEvent(r),this.trigger("change",this.state.lastOriginalValueReported),t.value=this.state.lastOriginalValueReported)}},events:rEt,fixFirefoxLastTagNoCaret:function(){},setRangeAtStartEnd:function(t,e){if(e){t=typeof t=="number"?t:!!t,e=e.lastChild||e;var r=document.getSelection();if(wg(r.focusNode,Element)&&!this.DOM.input.contains(r.focusNode))return!0;try{r.rangeCount>=1&&["Start","End"].forEach(function(n){return r.getRangeAt(0)["set"+n](e,t||e.length)})}catch(n){console.warn(n)}}},insertAfterTag:function(t,e){if(e=e||this.settings.mixMode.insertAfterTag,t&&t.parentNode&&e)return e=typeof e=="string"?document.createTextNode(e):e,t.parentNode.insertBefore(e,t.nextSibling),e},editTagChangeDetected:function(t){var e=t.__originalData;for(var r in e)if(!this.dataProps.includes(r)&&t[r]!=e[r])return!0;return!1},getTagTextNode:function(t){return t.querySelector(this.settings.classNames.tagTextSelector)},setTagTextNode:function(t,e){this.getTagTextNode(t).innerHTML=a0(e)},editTag:function(t,e){var r=this;t=t||this.getLastTag(),e=e||{};var n=this.settings,i=this.getTagTextNode(t),o=this.getNodeIndex(t),s=Ua(t),u=this.events.callbacks,h=!0,y=n.mode=="select";if(!y&&this.dropdown.hide(),i){if(!wg(s,Object)||!("editable"in s)||s.editable)return s=Ua(t,{__originalData:Cl({},s),__originalHTML:t.cloneNode(!0)}),Ua(s.__originalHTML,s.__originalData),i.setAttribute("contenteditable",!0),t.classList.add(n.classNames.tagEditing),this.events.callbacks.onEditTagFocus.call(this,t),i.addEventListener("click",u.onEditTagClick.bind(this,t)),i.addEventListener("blur",u.onEditTagBlur.bind(this,this.getTagTextNode(t))),i.addEventListener("input",u.onEditTagInput.bind(this,i)),i.addEventListener("paste",u.onEditTagPaste.bind(this,i)),i.addEventListener("keydown",function(w){return u.onEditTagkeydown.call(r,w,t)}),i.addEventListener("compositionstart",u.onCompositionStart.bind(this)),i.addEventListener("compositionend",u.onCompositionEnd.bind(this)),e.skipValidation||(h=this.editTagToggleValidity(t)),i.originalIsValid=h,this.trigger("edit:start",{tag:t,index:o,data:s,isValid:h}),i.focus(),!y&&this.setRangeAtStartEnd(!1,i),n.dropdown.enabled===0&&!y&&this.dropdown.show(),this.state.hasFocus=!0,this}else hy.warn("Cannot find element in Tag template: .",n.classNames.tagTextSelector)},editTagToggleValidity:function(t,e){var r;if(e=e||Ua(t))return(r=!("__isValid"in e)||e.__isValid===!0)||this.removeTagsFromValue(t),this.update(),t.classList.toggle(this.settings.classNames.tagNotAllowed,!r),e.__isValid=r,e.__isValid;hy.warn("tag has no data: ",t,e)},onEditTagDone:function(t,e){t=t||this.state.editing.scope,e=e||{};var r,n,i=this.settings,o={tag:t,index:this.getNodeIndex(t),previousData:Ua(t),data:e};this.trigger("edit:beforeUpdate",o,{cloneData:!1}),this.state.editing=!1,delete e.__originalData,delete e.__originalHTML,t&&t.parentNode&&(((n=e[i.tagTextProp])!==void 0?!((r=(n+="").trim)===null||r===void 0)&&r.call(n):!(i.tagTextProp in e)&&e.value)?(t=this.replaceTag(t,e),this.editTagToggleValidity(t,e),i.a11y.focusableTags?t.focus():i.mode!="select"&&fy(t)):this.removeTags(t)),this.trigger("edit:updated",o),i.dropdown.closeOnSelect&&this.dropdown.hide(),this.settings.keepInvalidTags&&this.reCheckInvalidTags()},replaceTag:function(t,e){e&&e.value!==""&&e.value!==void 0||(e=t.__tagifyTagData),e.__isValid&&e.__isValid!=1&&Cl(e,this.getInvalidTagAttrs(e,e.__isValid));var r=this.createTagElem(e);return t.parentNode.replaceChild(r,t),this.updateValueByDOMTags(),r},updateValueByDOMTags:function(){var t=this;this.value.length=0;var e=this.settings.classNames,r=[e.tagNotAllowed.split(" ")[0],e.tagHide];[].forEach.call(this.getTagElms(),function(n){iM(n.classList).some(function(i){return r.includes(i)})||t.value.push(Ua(n))}),this.update(),this.dropdown.refilter()},injectAtCaret:function(t,e){var r;if(e=e||((r=this.state.selection)===null||r===void 0?void 0:r.range),typeof t=="string"&&(t=document.createTextNode(t)),!e&&t)return this.appendMixTags(t),this;var n=ESe(t,e);return this.setRangeAtStartEnd(!1,n),this.updateValueByDOMTags(),this.update(),this},input:{set:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.settings,n=r.dropdown.closeOnSelect;this.state.inputText=t,e&&(this.DOM.input.innerHTML=a0(""+t),t&&this.toggleClass(r.classNames.empty,!this.DOM.input.innerHTML)),!t&&n&&this.dropdown.hide.bind(this),this.input.autocomplete.suggest.call(this),this.input.validate.call(this)},raw:function(){return this.DOM.input.textContent},validate:function(){var t=!this.state.inputText||this.validateTag({value:this.state.inputText})===!0;return this.DOM.input.classList.toggle(this.settings.classNames.inputInvalid,!t),t},normalize:function(t,e){var r=t||this.DOM.input,n=[];r.childNodes.forEach(function(i){return i.nodeType==3&&n.push(i.nodeValue)}),n=n.join(`
`);try{n=n.replace(/(?:\r\n|\r|\n)/g,this.settings.delimiters.source.charAt(0))}catch{}return n=n.replace(/\s/g," "),e?.trim?this.trim(n):n},autocomplete:{suggest:function(t){if(this.settings.autoComplete.enabled){typeof(t=t||{value:""})!="object"&&(t={value:t});var e=this.dropdown.getMappedValue(t);if(typeof e!="number"){var r=this.state.inputText.toLowerCase(),n=e.substr(0,this.state.inputText.length).toLowerCase(),i=e.substring(this.state.inputText.length);e&&this.state.inputText&&n==r?(this.DOM.input.setAttribute("data-suggest",i),this.state.inputSuggestion=t):(this.DOM.input.removeAttribute("data-suggest"),delete this.state.inputSuggestion)}}},set:function(t){var e=this.DOM.input.getAttribute("data-suggest"),r=t||(e?this.state.inputText+e:null);return!!r&&(this.settings.mode=="mix"?this.replaceTextWithNode(document.createTextNode(this.state.tag.prefix+r)):(this.input.set.call(this,r),this.setRangeAtStartEnd(!1,this.DOM.input)),this.input.autocomplete.suggest.call(this),this.dropdown.hide(),!0)}}},getTagIdx:function(t){return this.value.findIndex(function(e){return e.__tagId==(t||{}).__tagId})},getNodeIndex:function(t){var e=0;if(t)for(;t=t.previousElementSibling;)e++;return e},getTagElms:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n="."+iM(this.settings.classNames.tag.split(" ")).concat(iM(e)).join(".");return[].slice.call(this.DOM.scope.querySelectorAll(n))},getLastTag:function(){var t=this.settings.classNames,e=this.DOM.scope.querySelectorAll("".concat(t.tagSelector,":not(.").concat(t.tagHide,"):not([readonly])"));return e[e.length-1]},isTagDuplicate:function(t,e,r){var n=0,i=!0,o=!1,s=void 0;try{for(var u,h=this.value[Symbol.iterator]();!(i=(u=h.next()).done);i=!0){var y=u.value;hA(this.trim(""+t),y.value,e)&&r!=y.__tagId&&n++}}catch(w){o=!0,s=w}finally{try{i||h.return==null||h.return()}finally{if(o)throw s}}return n},getTagIndexByValue:function(t){var e=this,r=[],n=this.settings.dropdown.caseSensitive;return this.getTagElms().forEach(function(i,o){i.__tagifyTagData&&hA(e.trim(i.__tagifyTagData.value),t,n)&&r.push(o)}),r},getTagElmByValue:function(t){var e=this.getTagIndexByValue(t)[0];return this.getTagElms()[e]},flashTag:function(t){var e=this;t&&(t.classList.add(this.settings.classNames.tagFlash),setTimeout(function(){t.classList.remove(e.settings.classNames.tagFlash)},100))},isTagBlacklisted:function(t){return t=this.trim(t.toLowerCase()),this.settings.blacklist.filter(function(e){return(""+e).toLowerCase()==t}).length},isTagWhitelisted:function(t){return!!this.getWhitelistItem(t)},getWhitelistItem:function(t,e,r){e=e||"value";var n,i=this.settings;return(r=r||i.whitelist).some(function(o){var s=typeof o=="object"?o[e]||o.value:o;if(hA(s,t,i.dropdown.caseSensitive,i.trim))return n=typeof o=="object"?o:{value:o},!0}),n||e!="value"||i.tagTextProp=="value"||(n=this.getWhitelistItem(t,i.tagTextProp,r)),n},validateTag:function(t){var e=this.settings,r="value"in t?"value":e.tagTextProp,n=this.trim(t[r]+"");return(t[r]+"").trim()?e.mode!="mix"&&e.pattern&&wg(e.pattern,RegExp)&&!e.pattern.test(n)?this.TEXTS.pattern:!e.duplicates&&this.isTagDuplicate(n,e.dropdown.caseSensitive,t.__tagId)?this.TEXTS.duplicate:this.isTagBlacklisted(n)||e.enforceWhitelist&&!this.isTagWhitelisted(n)?this.TEXTS.notAllowed:!e.validate||e.validate(t):this.TEXTS.empty},getInvalidTagAttrs:function(t,e){return{"aria-invalid":!0,class:"".concat(t.class||""," ").concat(this.settings.classNames.tagNotAllowed).trim(),title:e}},hasMaxTags:function(){return this.value.length>=this.settings.maxTags&&this.TEXTS.exceed},setReadonly:function(t,e){var r=this.settings;this.DOM.scope.contains(document.activeElement)&&document.activeElement.blur(),r[e||"readonly"]=t,this.DOM.scope[(t?"set":"remove")+"Attribute"](e||"readonly",!0),this.settings.userInput=!0,this.setContentEditable(!t)},setContentEditable:function(t){this.DOM.input.contentEditable=t,this.DOM.input.tabIndex=t?0:-1},setDisabled:function(t){this.setReadonly(t,"disabled")},normalizeTags:function(t){var e=this,r=this.settings,n=r.whitelist,i=r.delimiters,o=r.mode,s=r.tagTextProp,u=[],h=!!n&&wg(n[0],Object),y=Array.isArray(t),w=y&&t[0].value,T=function(I){return(I+"").split(i).reduce(function(P,L){var R,W=e.trim(L);return W&&P.push((_V(R={},s,W),_V(R,"value",W),R)),P},[])};if(typeof t=="number"&&(t=t.toString()),typeof t=="string"){if(!t.trim())return[];t=T(t)}else y&&(t=t.reduce(function(I,P){if(Kd(P)){var L=Cl({},P);s in L||(s="value"),L[s]=e.trim(L[s]),(L[s]||L[s]===0)&&I.push(L)}else if(P!=null&&P!==""&&P!==void 0){var R;(R=I).push.apply(R,iM(T(P)))}return I},[]));return h&&!w&&(t.forEach(function(I){var P=u.map(function(W){return W.value}),L=e.dropdown.filterListItems.call(e,I[s],{exact:!0});e.settings.duplicates||(L=L.filter(function(W){return!P.includes(W.value)}));var R=L.length>1?e.getWhitelistItem(I[s],s,L):L[0];R&&wg(R,Object)?u.push(R):o!="mix"&&(I.value==null&&(I.value=I[s]),u.push(I))}),u.length&&(t=u)),t},parseMixTags:function(t){var e=this,r=this.settings,n=r.mixTagsInterpolator,i=r.duplicates,o=r.transformTag,s=r.enforceWhitelist,u=r.maxTags,h=r.tagTextProp,y=[];t=t.split(n[0]).map(function(T,I){var P,L,R,W=T.split(n[1]),G=W[0],q=y.length==u;try{if(G==+G)throw Error;L=JSON.parse(G)}catch{L=e.normalizeTags(G)[0]||{value:G}}if(o.call(e,L),q||!(W.length>1)||s&&!e.isTagWhitelisted(L.value)||!i&&e.isTagDuplicate(L.value)){if(T)return I?n[0]+T:T}else L[P=L[h]?h:"value"]=e.trim(L[P]),R=e.createTagElem(L),y.push(L),R.classList.add(e.settings.classNames.tagNoAnimation),W[0]=R.outerHTML,e.value.push(L);return W.join("")}).join(""),this.DOM.input.innerHTML=t,this.DOM.input.appendChild(document.createTextNode("")),this.DOM.input.normalize();var w=this.getTagElms();return w.forEach(function(T,I){return Ua(T,y[I])}),this.update({withoutChangeEvent:!0}),TSe(w,this.state.hasFocus),t},replaceTextWithNode:function(t,e){if(this.state.tag||e){e=e||this.state.tag.prefix+this.state.tag.value;var r,n,i=this.state.selection||window.getSelection(),o=i.anchorNode,s=this.state.tag.delimiters?this.state.tag.delimiters.length:0;return o.splitText(i.anchorOffset-s),(r=o.nodeValue.lastIndexOf(e))==-1||(n=o.splitText(r),t&&o.parentNode.replaceChild(t,n)),!0}},prepareNewTagNode:function(t,e){e=e||{};var r=this.settings,n=[],i={},o=Object.assign({},t,{value:t.value+""});if(t=Object.assign({},o),r.transformTag.call(this,t),t.__isValid=this.hasMaxTags()||this.validateTag(t),t.__isValid!==!0){if(e.skipInvalid)return;if(Cl(i,this.getInvalidTagAttrs(t,t.__isValid),{__preInvalidData:o}),t.__isValid==this.TEXTS.duplicate&&this.flashTag(this.getTagElmByValue(t.value)),!r.createInvalidTags)return void n.push(t.value)}return"readonly"in t&&(t.readonly?i["aria-readonly"]=!0:delete t.readonly),{tagElm:this.createTagElem(t,i),tagData:t,aggregatedInvalidInput:n}},postProcessNewTagNode:function(t,e){var r=this,n=this.settings,i=e.__isValid;i&&i===!0?this.value.push(e):(this.trigger("invalid",{data:e,index:this.value.length,tag:t,message:i}),n.keepInvalidTags||setTimeout(function(){return r.removeTags(t,!0)},1e3)),this.dropdown.position()},selectTag:function(t,e){var r=this;if(!this.settings.enforceWhitelist||this.isTagWhitelisted(e.value)){this.state.actions.selectOption&&setTimeout(function(){return r.setRangeAtStartEnd(!1,r.DOM.input)});var n=this.getLastTag();return n?this.replaceTag(n,e):this.appendTag(t),this.value[0]=e,this.update(),this.trigger("add",{tag:t,data:e}),[t]}},addEmptyTag:function(t){var e=Cl({value:""},t||{}),r=this.createTagElem(e);Ua(r,e),this.appendTag(r),this.editTag(r,{skipValidation:!0}),this.toggleFocusClass(!0)},addTags:function(t,e,r){var n=this,i=[],o=this.settings,s=[],u=document.createDocumentFragment(),h=[];if(!t||t.length==0)return i;switch(t=this.normalizeTags(t),o.mode){case"mix":return this.addMixTags(t);case"select":e=!1,this.removeAllTags()}return this.DOM.input.removeAttribute("style"),t.forEach(function(y){var w=n.prepareNewTagNode(y,{skipInvalid:r||o.skipInvalid});if(w){var T=w.tagElm;if(y=w.tagData,s=w.aggregatedInvalidInput,i.push(T),o.mode=="select")return n.selectTag(T,y);u.appendChild(T),n.postProcessNewTagNode(T,y),h.push({tagElm:T,tagData:y})}}),this.appendTag(u),h.forEach(function(y){var w=y.tagElm,T=y.tagData;return n.trigger("add",{tag:w,index:n.getTagIdx(T),data:T})}),this.update(),t.length&&e&&(this.input.set.call(this,o.createInvalidTags?"":s.join(o._delimiters)),this.setRangeAtStartEnd(!1,this.DOM.input)),this.dropdown.refilter(),i},addMixTags:function(t){var e=this;if((t=this.normalizeTags(t))[0].prefix||this.state.tag)return this.prefixedTextToTag(t[0]);var r=document.createDocumentFragment();return t.forEach(function(n){var i=e.prepareNewTagNode(n);r.appendChild(i.tagElm),e.insertAfterTag(i.tagElm),e.postProcessNewTagNode(i.tagElm,i.tagData)}),this.appendMixTags(r),r.children},appendMixTags:function(t){var e=!!this.state.selection;e?this.injectAtCaret(t):(this.DOM.input.focus(),(e=this.setStateSelection()).range.setStart(this.DOM.input,e.range.endOffset),e.range.setEnd(this.DOM.input,e.range.endOffset),this.DOM.input.appendChild(t),this.updateValueByDOMTags(),this.update())},prefixedTextToTag:function(t){var e,r,n,i=this,o=this.settings,s=(e=this.state.tag)===null||e===void 0?void 0:e.delimiters;if(t.prefix=t.prefix||this.state.tag?this.state.tag.prefix:(o.pattern.source||o.pattern)[0],n=this.prepareNewTagNode(t),r=n.tagElm,this.replaceTextWithNode(r)||this.DOM.input.appendChild(r),setTimeout(function(){return r.classList.add(i.settings.classNames.tagNoAnimation)},300),this.update(),!s){var u=this.insertAfterTag(r)||r;setTimeout(fy,0,u)}return this.state.tag=null,this.postProcessNewTagNode(r,n.tagData),r},appendTag:function(t){var e=this.DOM,r=e.input;e.scope.insertBefore(t,r)},createTagElem:function(t,e){t.__tagId=vSe();var r,n=Cl({},t,wSe({value:a0(t.value+"")},e));return function(i){for(var o,s=document.createNodeIterator(i,NodeFilter.SHOW_TEXT,null,!1);o=s.nextNode();)o.textContent.trim()||o.parentNode.removeChild(o)}(r=this.parseTemplate("tag",[n,this])),Ua(r,t),r},reCheckInvalidTags:function(){var t=this,e=this.settings;this.getTagElms(e.classNames.tagNotAllowed).forEach(function(r,n){var i=Ua(r),o=t.hasMaxTags(),s=t.validateTag(i),u=s===!0&&!o;if(e.mode=="select"&&t.toggleScopeValidation(s),u)return i=i.__preInvalidData?i.__preInvalidData:{value:i.value},t.replaceTag(r,i);r.title=o||s})},removeTags:function(t,e,r){var n,i=this,o=this.settings;if(t=t&&wg(t,HTMLElement)?[t]:wg(t,Array)?t:t?[t]:[this.getLastTag()].filter(function(s){return s}),n=t.reduce(function(s,u){u&&typeof u=="string"&&(u=i.getTagElmByValue(u));var h=Ua(u);return u&&h&&!h.readonly&&s.push({node:u,idx:i.getTagIdx(h),data:Ua(u,{__removed:!0})}),s},[]),r=typeof r=="number"?r:this.CSSVars.tagHideTransition,o.mode=="select"&&(r=0,this.input.set.call(this)),n.length==1&&o.mode!="select"&&n[0].node.classList.contains(o.classNames.tagNotAllowed)&&(e=!0),n.length)return o.hooks.beforeRemoveTag(n,{tagify:this}).then(function(){var s=function(u){u.node.parentNode&&(u.node.parentNode.removeChild(u.node),e?o.keepInvalidTags&&this.trigger("remove",{tag:u.node,index:u.idx}):(this.trigger("remove",{tag:u.node,index:u.idx,data:u.data}),this.dropdown.refilter(),this.dropdown.position(),this.DOM.input.normalize(),o.keepInvalidTags&&this.reCheckInvalidTags()))};r&&r>10&&n.length==1?function(u){u.node.style.width=parseFloat(window.getComputedStyle(u.node).width)+"px",document.body.clientTop,u.node.classList.add(o.classNames.tagHide),setTimeout(s.bind(this),r,u)}.call(i,n[0]):n.forEach(s.bind(i)),e||(i.removeTagsFromValue(n.map(function(u){return u.node})),i.update(),o.mode=="select"&&o.userInput&&i.setContentEditable(!0))}).catch(function(s){})},removeTagsFromDOM:function(){this.getTagElms().forEach(function(t){return t.remove()})},removeTagsFromValue:function(t){var e=this;(t=Array.isArray(t)?t:[t]).forEach(function(r){var n=Ua(r),i=e.getTagIdx(n);i>-1&&e.value.splice(i,1)})},removeAllTags:function(t){var e=this;t=t||{},this.value=[],this.settings.mode=="mix"?this.DOM.input.innerHTML="":this.removeTagsFromDOM(),this.dropdown.refilter(),this.dropdown.position(),this.state.dropdown.visible&&setTimeout(function(){e.DOM.input.focus()}),this.settings.mode=="select"&&(this.input.set.call(this),this.settings.userInput&&this.setContentEditable(!0)),this.update(t)},postUpdate:function(){this.state.blockChangeEvent=!1;var t,e,r=this.settings,n=r.classNames,i=r.mode=="mix"?r.mixMode.integrated?this.DOM.input.textContent:this.DOM.originalInput.value.trim():this.value.length+this.input.raw.call(this).length;this.toggleClass(n.hasMaxTags,this.value.length>=r.maxTags),this.toggleClass(n.hasNoTags,!this.value.length),this.toggleClass(n.empty,!i),r.mode=="select"&&this.toggleScopeValidation((e=this.value)===null||e===void 0||(t=e[0])===null||t===void 0?void 0:t.__isValid)},setOriginalInputValue:function(t){var e=this.DOM.originalInput;this.settings.mixMode.integrated||(e.value=t,e.tagifyValue=e.value,this.setPersistedData(t,"value"))},update:function(t){clearTimeout(this.debouncedUpdateTimeout),this.debouncedUpdateTimeout=setTimeout(function(){var e=this.getInputValue();this.setOriginalInputValue(e),this.settings.onChangeAfterBlur&&(t||{}).withoutChangeEvent||this.state.blockChangeEvent||this.triggerChangeEvent(),this.postUpdate()}.bind(this),100),this.events.bindOriginaInputListener.call(this,100)},getInputValue:function(){var t=this.getCleanValue();return this.settings.mode=="mix"?this.getMixedTagsAsString(t):t.length?this.settings.originalInputValueFormat?this.settings.originalInputValueFormat(t):JSON.stringify(t):""},getCleanValue:function(t){return dSe(t||this.value,this.dataProps)},getMixedTagsAsString:function(){var t="",e=this,r=this.settings,n=r.originalInputValueFormat||JSON.stringify,i=r.mixTagsInterpolator;return function o(s){s.childNodes.forEach(function(u){if(u.nodeType==1){var h=Ua(u);if(u.tagName=="BR"&&(t+=`\r
`),h&&s0.call(e,u)){if(h.__removed)return;t+=i[0]+n(bV(h,e.dataProps))+i[1]}else u.getAttribute("style")||["B","I","U"].includes(u.tagName)?t+=u.textContent:u.tagName!="DIV"&&u.tagName!="P"||(t+=`\r
`,o(u))}else t+=u.textContent})}(this.DOM.input),t}},dA.prototype.removeTag=dA.prototype.removeTags;var CSe=ua(qx());function ASe(t){let r=(this.settings.whitelist||[]).find(i=>i.value==t.value),n=r?r.label:t.value;return`
<tag title="${t.value}"
  contenteditable='false'
  spellcheck='false'
  tabIndex="-1"
  class="tagify__tag ${t.class?t.class:""}"
  ${this.getAttributes(t)}
>
  <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>
  <div>
      <span class='tagify__tag-text'>${n}</span>
  </div>
</tag>
`}function kSe(t){return`
<div ${this.getAttributes(t)}
  class='tagify__dropdown__item flex items-center ${t.class?t.class:""}'
  tabindex="0"
  role="option">
  ${t.avatar?`
  <div class='rounded-sm w-8 h-8 block mr-2'>
      <img onerror="this.style.visibility='hidden'" class="w-full" src="${t.avatar}">
  </div>`:""}
  <span>${t.label}</span>
</div>
`}var oM=class extends Lr{getJsonAttribute(t,e,r=[]){let n=r;try{n=JSON.parse(t.getAttribute(e))}catch{}return n}getBooleanAttribute(t,e){return t.getAttribute(e)==="1"}};var aM=class extends oM{static targets=["input","fakeInput"];static values={whitelistItems:{type:Array,default:[]},disallowedItems:{type:Array,default:[]},enforceSuggestions:{type:Boolean,default:!1},closeOnSelect:{type:Boolean,default:!1},delimiters:{type:Array,default:[]},suggestionsMaxItems:{type:Number,default:20},mode:String,fetchValuesFrom:String};tagify=null;searchDebounce=500;debouncedFetch=ZP(fetch,this.searchDebounce);get suggestionsAreObjects(){return(0,l0.isObject)((0,l0.first)(this.whitelistItemsValue))||this.fetchValuesFromValue}get tagifyOptions(){let t={whitelist:this.whitelistItemsValue,blacklist:this.disallowedItemsValue,enforceWhitelist:this.enforceSuggestionsValue||this.fetchValuesFromValue,delimiters:this.delimitersValue.join("|"),dropdown:{maxItems:this.suggestionsMaxItemsValue,enabled:0,searchKeys:[this.labelAttributeValue],closeOnSelect:this.closeOnSelectValue}};return this.modeValue&&(t.mode=this.modeValue),this.suggestionsAreObjects?t=(0,l0.merge)(t,{tagTextProp:"label",dropdown:{searchKeys:["label"],mapValueTo:"value"},templates:{tag:ASe,dropdownItem:kSe},originalInputValueFormat:e=>e.map(r=>r.value)}):t=(0,l0.merge)(t,{originalInputValueFormat:e=>e.map(r=>r.value).join(",")}),t}connect(){this.hasInputTarget&&(this.hideFakeInput(),this.showRealInput(),this.initTagify())}initTagify(){this.tagify=new dA(this.inputTarget,this.tagifyOptions);let t=this;function e(r){let n=r.detail.value,i=new CSe.default(t.fetchValuesFromValue);i.addSearch({q:n}),t.tagify.whitelist=null,t.tagify.loading(!0),t.fetchResults(i.toString()).then(o=>{t.tagify.settings.whitelist=o,t.tagify.loading(!1).dropdown.show(r.detail.value)}).catch(()=>t.tagify.dropdown.hide())}this.fetchValuesFromValue&&this.tagify.on("input",e)}fetchResults(t){return this.debouncedFetch(t).then(e=>e.json())}hideFakeInput(){this.fakeInputTarget.classList.add("hidden")}showRealInput(){this.inputTarget.classList.remove("hidden")}};var sM=class extends Gh{static targets=["text"];getFilterValue(){return this.textTarget.value}tryToSubmit(t){if(t.keyCode===13)return this.changeFilter()}getFilterClass(){let{filterClass:t}=this.textTarget.dataset;return t}};var lM=class extends Lr{static targets=["source","content"];connect(){GI(this.sourceTarget,{content:this.contentTarget.innerHTML,allowHTML:!0,theme:"light"})}};var nEt=(t,e,r)=>{let n=t;return r===!0?n=`${e.identifier}:${t}`:typeof r=="string"&&(n=`${r}:${t}`),n},iEt=(t,e,r)=>{let{bubbles:n,cancelable:i,composed:o}=e||{bubbles:!0,cancelable:!0,composed:!0};return e&&Object.assign(r,{originalEvent:e}),new CustomEvent(t,{bubbles:n,cancelable:i,composed:o,detail:r})};function oEt(t){let e=t.getBoundingClientRect(),r=window.innerHeight||document.documentElement.clientHeight,n=window.innerWidth||document.documentElement.clientWidth,i=e.top<=r&&e.top+e.height>0,o=e.left<=n&&e.left+e.width>0;return i&&o}var aEt={events:["click","touchend"],onlyVisible:!0,dispatchEvent:!0,eventPrefix:!0},ISe=(t,e={})=>{let r=t,{onlyVisible:n,dispatchEvent:i,events:o,eventPrefix:s}=Object.assign({},aEt,e),u=T=>{let I=e?.element||r.element;if(!(I.contains(T.target)||!oEt(I)&&n)&&(r.clickOutside&&r.clickOutside(T),i)){let P=nEt("click:outside",r,s),L=iEt(P,T,{controller:r});I.dispatchEvent(L)}},h=()=>{o?.forEach(T=>{window.addEventListener(T,u,!0)})},y=()=>{o?.forEach(T=>{window.removeEventListener(T,u,!0)})},w=r.disconnect.bind(r);return Object.assign(r,{disconnect(){y(),w()}}),h(),[h,y]};var xV=class extends Lr{};xV.debounces=[];var wV=class extends Lr{};wV.throttles=[];var uM=class extends Lr{static targets=["panel"];connect(){ISe(this)}clickOutside(){this.panelTarget.classList.add("hidden")}togglePanel(){this.panelTarget.classList.toggle("hidden")}};var sEt="2.1.13",h0="[data-trix-attachment]",d8={preview:{presentation:"gallery",caption:{name:!0,size:!0}},file:{caption:{size:!0}}},yc={default:{tagName:"div",parse:!1},quote:{tagName:"blockquote",nestable:!0},heading1:{tagName:"h1",terminal:!0,breakOnReturn:!0,group:!1},code:{tagName:"pre",terminal:!0,htmlAttributes:["language"],text:{plaintext:!0}},bulletList:{tagName:"ul",parse:!1},bullet:{tagName:"li",listAttribute:"bulletList",group:!1,nestable:!0,test(t){return DSe(t.parentNode)===yc[this.listAttribute].tagName}},numberList:{tagName:"ol",parse:!1},number:{tagName:"li",listAttribute:"numberList",group:!1,nestable:!0,test(t){return DSe(t.parentNode)===yc[this.listAttribute].tagName}},attachmentGallery:{tagName:"div",exclusive:!0,terminal:!0,parse:!1,group:!1}},DSe=t=>{var e;return t==null||(e=t.tagName)===null||e===void 0?void 0:e.toLowerCase()},OSe=navigator.userAgent.match(/android\s([0-9]+.*Chrome)/i),SV=OSe&&parseInt(OSe[1]),OA={composesExistingText:/Android.*Chrome/.test(navigator.userAgent),recentAndroid:SV&&SV>12,samsungAndroid:SV&&navigator.userAgent.match(/Android.*SM-/),forcesObjectResizing:/Trident.*rv:11/.test(navigator.userAgent),supportsInputEvents:typeof InputEvent<"u"&&["data","getTargetRanges","inputType"].every(t=>t in InputEvent.prototype)},hEe={ADD_ATTR:["language"],SAFE_FOR_XML:!1,RETURN_DOM:!0},hi={attachFiles:"Attach Files",bold:"Bold",bullets:"Bullets",byte:"Byte",bytes:"Bytes",captionPlaceholder:"Add a caption\u2026",code:"Code",heading1:"Heading",indent:"Increase Level",italic:"Italic",link:"Link",numbers:"Numbers",outdent:"Decrease Level",quote:"Quote",redo:"Redo",remove:"Remove",strike:"Strikethrough",undo:"Undo",unlink:"Unlink",url:"URL",urlPlaceholder:"Enter a URL\u2026",GB:"GB",KB:"KB",MB:"MB",PB:"PB",TB:"TB"},lEt=[hi.bytes,hi.KB,hi.MB,hi.GB,hi.TB,hi.PB],dEe={prefix:"IEC",precision:2,formatter(t){switch(t){case 0:return"0 ".concat(hi.bytes);case 1:return"1 ".concat(hi.byte);default:let e;this.prefix==="SI"?e=1e3:this.prefix==="IEC"&&(e=1024);let r=Math.floor(Math.log(t)/Math.log(e)),n=(t/Math.pow(e,r)).toFixed(this.precision).replace(/0*$/,"").replace(/\.$/,"");return"".concat(n," ").concat(lEt[r])}}},jM="\uFEFF",py="\xA0",pEe=function(t){for(let e in t){let r=t[e];this[e]=r}return this},p8=document.documentElement,uEt=p8.matches,_s=function(t){let{onElement:e,matchingSelector:r,withCallback:n,inPhase:i,preventDefault:o,times:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u=e||p8,h=r,y=i==="capturing",w=function(T){s!=null&&--s==0&&w.destroy();let I=gy(T.target,{matchingSelector:h});I!=null&&(n?.call(I,T,I),o&&T.preventDefault())};return w.destroy=()=>u.removeEventListener(t,w,y),u.addEventListener(t,w,y),w},wA=function(t){let{onElement:e,bubbles:r,cancelable:n,attributes:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=e??p8;r=r!==!1,n=n!==!1;let s=document.createEvent("Events");return s.initEvent(t,r,n),i!=null&&pEe.call(s,i),o.dispatchEvent(s)},mEe=function(t,e){if(t?.nodeType===1)return uEt.call(t,e)},gy=function(t){let{matchingSelector:e,untilNode:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(;t&&t.nodeType!==Node.ELEMENT_NODE;)t=t.parentNode;if(t!=null){if(e==null)return t;if(t.closest&&r==null)return t.closest(e);for(;t&&t!==r;){if(mEe(t,e))return t;t=t.parentNode}}},m8=t=>document.activeElement!==t&&f0(t,document.activeElement),f0=function(t,e){if(t&&e)for(;e;){if(e===t)return!0;e=e.parentNode}},EV=function(t){var e;if((e=t)===null||e===void 0||!e.parentNode)return;let r=0;for(t=t.previousSibling;t;)r++,t=t.previousSibling;return r},vy=t=>{var e;return t==null||(e=t.parentNode)===null||e===void 0?void 0:e.removeChild(t)},bM=function(t){let{onlyNodesOfType:e,usingFilter:r,expandEntityReferences:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=(()=>{switch(e){case"element":return NodeFilter.SHOW_ELEMENT;case"text":return NodeFilter.SHOW_TEXT;case"comment":return NodeFilter.SHOW_COMMENT;default:return NodeFilter.SHOW_ALL}})();return document.createTreeWalker(t,i,r??null,n===!0)},vc=t=>{var e;return t==null||(e=t.tagName)===null||e===void 0?void 0:e.toLowerCase()},Oi=function(t){let e,r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};typeof t=="object"?(n=t,t=n.tagName):n={attributes:n};let i=document.createElement(t);if(n.editable!=null&&(n.attributes==null&&(n.attributes={}),n.attributes.contenteditable=n.editable),n.attributes)for(e in n.attributes)r=n.attributes[e],i.setAttribute(e,r);if(n.style)for(e in n.style)r=n.style[e],i.style[e]=r;if(n.data)for(e in n.data)r=n.data[e],i.dataset[e]=r;return n.className&&n.className.split(" ").forEach(o=>{i.classList.add(o)}),n.textContent&&(i.textContent=n.textContent),n.childNodes&&[].concat(n.childNodes).forEach(o=>{i.appendChild(o)}),i},pA,SA=function(){if(pA!=null)return pA;pA=[];for(let t in yc){let e=yc[t];e.tagName&&pA.push(e.tagName)}return pA},TV=t=>A1(t?.firstChild),PSe=function(t){let{strict:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{strict:!0};return e?A1(t):A1(t)||!A1(t.firstChild)&&function(r){return SA().includes(vc(r))&&!SA().includes(vc(r.firstChild))}(t)},A1=t=>cEt(t)&&t?.data==="block",cEt=t=>t?.nodeType===Node.COMMENT_NODE,k1=function(t){let{name:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t)return EA(t)?t.data===jM?!e||t.parentNode.dataset.trixCursorTarget===e:void 0:k1(t.firstChild)},d0=t=>mEe(t,h0),gEe=t=>EA(t)&&t?.data==="",EA=t=>t?.nodeType===Node.TEXT_NODE,g8={level2Enabled:!0,getLevel(){return this.level2Enabled&&OA.supportsInputEvents?2:0},pickFiles(t){let e=Oi("input",{type:"file",multiple:!0,hidden:!0,id:this.fileInputId});e.addEventListener("change",()=>{t(e.files),vy(e)}),vy(document.getElementById(this.fileInputId)),document.body.appendChild(e),e.click()}},gM={removeBlankTableCells:!1,tableCellSeparator:" | ",tableRowSeparator:`
`},g0={bold:{tagName:"strong",inheritable:!0,parser(t){let e=window.getComputedStyle(t);return e.fontWeight==="bold"||e.fontWeight>=600}},italic:{tagName:"em",inheritable:!0,parser:t=>window.getComputedStyle(t).fontStyle==="italic"},href:{groupTagName:"a",parser(t){let e="a:not(".concat(h0,")"),r=t.closest(e);if(r)return r.getAttribute("href")}},strike:{tagName:"del",inheritable:!0},frozen:{style:{backgroundColor:"highlight"}}},vEe={getDefaultHTML:()=>`<div class="trix-button-row">
      <span class="trix-button-group trix-button-group--text-tools" data-trix-button-group="text-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bold" data-trix-attribute="bold" data-trix-key="b" title="`.concat(hi.bold,'" tabindex="-1">').concat(hi.bold,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-italic" data-trix-attribute="italic" data-trix-key="i" title="`).concat(hi.italic,'" tabindex="-1">').concat(hi.italic,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-strike" data-trix-attribute="strike" title="`).concat(hi.strike,'" tabindex="-1">').concat(hi.strike,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-link" data-trix-attribute="href" data-trix-action="link" data-trix-key="k" title="`).concat(hi.link,'" tabindex="-1">').concat(hi.link,`</button>
      </span>

      <span class="trix-button-group trix-button-group--block-tools" data-trix-button-group="block-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-heading-1" data-trix-attribute="heading1" title="`).concat(hi.heading1,'" tabindex="-1">').concat(hi.heading1,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-quote" data-trix-attribute="quote" title="`).concat(hi.quote,'" tabindex="-1">').concat(hi.quote,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-code" data-trix-attribute="code" title="`).concat(hi.code,'" tabindex="-1">').concat(hi.code,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-bullet-list" data-trix-attribute="bullet" title="`).concat(hi.bullets,'" tabindex="-1">').concat(hi.bullets,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-number-list" data-trix-attribute="number" title="`).concat(hi.numbers,'" tabindex="-1">').concat(hi.numbers,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-decrease-nesting-level" data-trix-action="decreaseNestingLevel" title="`).concat(hi.outdent,'" tabindex="-1">').concat(hi.outdent,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-increase-nesting-level" data-trix-action="increaseNestingLevel" title="`).concat(hi.indent,'" tabindex="-1">').concat(hi.indent,`</button>
      </span>

      <span class="trix-button-group trix-button-group--file-tools" data-trix-button-group="file-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-attach" data-trix-action="attachFiles" title="`).concat(hi.attachFiles,'" tabindex="-1">').concat(hi.attachFiles,`</button>
      </span>

      <span class="trix-button-group-spacer"></span>

      <span class="trix-button-group trix-button-group--history-tools" data-trix-button-group="history-tools">
        <button type="button" class="trix-button trix-button--icon trix-button--icon-undo" data-trix-action="undo" data-trix-key="z" title="`).concat(hi.undo,'" tabindex="-1">').concat(hi.undo,`</button>
        <button type="button" class="trix-button trix-button--icon trix-button--icon-redo" data-trix-action="redo" data-trix-key="shift+z" title="`).concat(hi.redo,'" tabindex="-1">').concat(hi.redo,`</button>
      </span>
    </div>

    <div class="trix-dialogs" data-trix-dialogs>
      <div class="trix-dialog trix-dialog--link" data-trix-dialog="href" data-trix-dialog-attribute="href">
        <div class="trix-dialog__link-fields">
          <input type="url" name="href" class="trix-input trix-input--dialog" placeholder="`).concat(hi.urlPlaceholder,'" aria-label="').concat(hi.url,`" data-trix-validate-href required data-trix-input>
          <div class="trix-button-group">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(hi.link,`" data-trix-method="setAttribute">
            <input type="button" class="trix-button trix-button--dialog" value="`).concat(hi.unlink,`" data-trix-method="removeAttribute">
          </div>
        </div>
      </div>
    </div>`)},ZV={interval:5e3},PA=Object.freeze({__proto__:null,attachments:d8,blockAttributes:yc,browser:OA,css:{attachment:"attachment",attachmentCaption:"attachment__caption",attachmentCaptionEditor:"attachment__caption-editor",attachmentMetadata:"attachment__metadata",attachmentMetadataContainer:"attachment__metadata-container",attachmentName:"attachment__name",attachmentProgress:"attachment__progress",attachmentSize:"attachment__size",attachmentToolbar:"attachment__toolbar",attachmentGallery:"attachment-gallery"},dompurify:hEe,fileSize:dEe,input:g8,keyNames:{8:"backspace",9:"tab",13:"return",27:"escape",37:"left",39:"right",46:"delete",68:"d",72:"h",79:"o"},lang:hi,parser:gM,textAttributes:g0,toolbar:vEe,undo:ZV}),Ms=class{static proxyMethod(e){let{name:r,toMethod:n,toProperty:i,optional:o}=fEt(e);this.prototype[r]=function(){let s,u;var h,y;return n?u=o?(h=this[n])===null||h===void 0?void 0:h.call(this):this[n]():i&&(u=this[i]),o?(s=(y=u)===null||y===void 0?void 0:y[r],s?MSe.call(s,u,arguments):void 0):(s=u[r],MSe.call(s,u,arguments))}}},fEt=function(t){let e=t.match(hEt);if(!e)throw new Error("can't parse @proxyMethod expression: ".concat(t));let r={name:e[4]};return e[2]!=null?r.toMethod=e[1]:r.toProperty=e[1],e[3]!=null&&(r.optional=!0),r},{apply:MSe}=Function.prototype,hEt=new RegExp("^(.+?)(\\(\\))?(\\?)?\\.(.+?)$"),AV,kV,CV,v0=class extends Ms{static box(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e instanceof this?e:this.fromUCS2String(e?.toString())}static fromUCS2String(e){return new this(e,YV(e))}static fromCodepoints(e){return new this(XV(e),e)}constructor(e,r){super(...arguments),this.ucs2String=e,this.codepoints=r,this.length=this.codepoints.length,this.ucs2Length=this.ucs2String.length}offsetToUCS2Offset(e){return XV(this.codepoints.slice(0,Math.max(0,e))).length}offsetFromUCS2Offset(e){return YV(this.ucs2String.slice(0,Math.max(0,e))).length}slice(){return this.constructor.fromCodepoints(this.codepoints.slice(...arguments))}charAt(e){return this.slice(e,e+1)}isEqualTo(e){return this.constructor.box(e).ucs2String===this.ucs2String}toJSON(){return this.ucs2String}getCacheKey(){return this.ucs2String}toString(){return this.ucs2String}},dEt=((AV=Array.from)===null||AV===void 0?void 0:AV.call(Array,"\u{1F47C}").length)===1,pEt=((kV=" ".codePointAt)===null||kV===void 0?void 0:kV.call(" ",0))!=null,mEt=((CV=String.fromCodePoint)===null||CV===void 0?void 0:CV.call(String,32,128124))===" \u{1F47C}",YV,XV;YV=dEt&&pEt?t=>Array.from(t).map(e=>e.codePointAt(0)):function(t){let e=[],r=0,{length:n}=t;for(;r<n;){let i=t.charCodeAt(r++);if(55296<=i&&i<=56319&&r<n){let o=t.charCodeAt(r++);(64512&o)==56320?i=((1023&i)<<10)+(1023&o)+65536:r--}e.push(i)}return e},XV=mEt?t=>String.fromCodePoint(...Array.from(t||[])):function(t){return(()=>{let e=[];return Array.from(t).forEach(r=>{let n="";r>65535&&(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),r=56320|1023&r),e.push(n+String.fromCharCode(r))}),e})().join("")};var gEt=0,Ag=class extends Ms{static fromJSONString(e){return this.fromJSON(JSON.parse(e))}constructor(){super(...arguments),this.id=++gEt}hasSameConstructorAs(e){return this.constructor===e?.constructor}isEqualTo(e){return this===e}inspect(){let e=[],r=this.contentsForInspection()||{};for(let n in r){let i=r[n];e.push("".concat(n,"=").concat(i))}return"#<".concat(this.constructor.name,":").concat(this.id).concat(e.length?" ".concat(e.join(", ")):"",">")}contentsForInspection(){}toJSONString(){return JSON.stringify(this)}toUTF16String(){return v0.box(this)}getCacheKey(){return this.id.toString()}},y0=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},v8=function(t){let e=t.slice(0);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return e.splice(...n),e},vEt=/[\u05BE\u05C0\u05C3\u05D0-\u05EA\u05F0-\u05F4\u061B\u061F\u0621-\u063A\u0640-\u064A\u066D\u0671-\u06B7\u06BA-\u06BE\u06C0-\u06CE\u06D0-\u06D5\u06E5\u06E6\u200F\u202B\u202E\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE72\uFE74\uFE76-\uFEFC]/,yEt=function(){let t=Oi("input",{dir:"auto",name:"x",dirName:"x.dir"}),e=Oi("textarea",{dir:"auto",name:"y",dirName:"y.dir"}),r=Oi("form");r.appendChild(t),r.appendChild(e);let n=function(){try{return new FormData(r).has(e.dirName)}catch{return!1}}(),i=function(){try{return t.matches(":dir(ltr),:dir(rtl)")}catch{return!1}}();return n?function(o){return e.value=o,new FormData(r).get(e.dirName)}:i?function(o){return t.value=o,t.matches(":dir(rtl)")?"rtl":"ltr"}:function(o){let s=o.trim().charAt(0);return vEt.test(s)?"rtl":"ltr"}}(),IV=null,DV=null,OV=null,cM=null,JV=()=>(IV||(IV=_Et().concat(bEt())),IV),Hs=t=>yc[t],bEt=()=>(DV||(DV=Object.keys(yc)),DV),QV=t=>g0[t],_Et=()=>(OV||(OV=Object.keys(g0)),OV),yEe=function(t,e){xEt(t).textContent=e.replace(/%t/g,t)},xEt=function(t){let e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-tag-name",t.toLowerCase());let r=wEt();return r&&e.setAttribute("nonce",r),document.head.insertBefore(e,document.head.firstChild),e},wEt=function(){let t=LSe("trix-csp-nonce")||LSe("csp-nonce");if(t){let{nonce:e,content:r}=t;return e==""?r:e}},LSe=t=>document.head.querySelector("meta[name=".concat(t,"]")),RSe={"application/x-trix-feature-detection":"test"},bEe=function(t){let e=t.getData("text/plain"),r=t.getData("text/html");if(!e||!r)return e?.length;{let{body:n}=new DOMParser().parseFromString(r,"text/html");if(n.textContent===e)return!n.querySelector("*")}},_Ee=/Mac|^iP/.test(navigator.platform)?t=>t.metaKey:t=>t.ctrlKey,y8=t=>setTimeout(t,1),xEe=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e={};for(let r in t){let n=t[r];e[r]=n}return e},F1=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let r in t)if(t[r]!==e[r])return!1;return!0},$o=function(t){if(t!=null)return Array.isArray(t)||(t=[t,t]),[FSe(t[0]),FSe(t[1]!=null?t[1]:t[0])]},Tg=function(t){if(t==null)return;let[e,r]=$o(t);return e8(e,r)},_M=function(t,e){if(t==null||e==null)return;let[r,n]=$o(t),[i,o]=$o(e);return e8(r,i)&&e8(n,o)},FSe=function(t){return typeof t=="number"?t:xEe(t)},e8=function(t,e){return typeof t=="number"?t===e:F1(t,e)},xM=class extends Ms{constructor(){super(...arguments),this.update=this.update.bind(this),this.selectionManagers=[]}start(){this.started||(this.started=!0,document.addEventListener("selectionchange",this.update,!0))}stop(){if(this.started)return this.started=!1,document.removeEventListener("selectionchange",this.update,!0)}registerSelectionManager(e){if(!this.selectionManagers.includes(e))return this.selectionManagers.push(e),this.start()}unregisterSelectionManager(e){if(this.selectionManagers=this.selectionManagers.filter(r=>r!==e),this.selectionManagers.length===0)return this.stop()}notifySelectionManagersOfSelectionChange(){return this.selectionManagers.map(e=>e.selectionDidChange())}update(){this.notifySelectionManagersOfSelectionChange()}reset(){this.update()}},b0=new xM,wEe=function(){let t=window.getSelection();if(t.rangeCount>0)return t},TA=function(){var t;let e=(t=wEe())===null||t===void 0?void 0:t.getRangeAt(0);if(e&&!SEt(e))return e},SEe=function(t){let e=window.getSelection();return e.removeAllRanges(),e.addRange(t),b0.update()},SEt=t=>qSe(t.startContainer)||qSe(t.endContainer),qSe=t=>!Object.getPrototypeOf(t),xA=t=>t.replace(new RegExp("".concat(jM),"g"),"").replace(new RegExp("".concat(py),"g")," "),b8=new RegExp("[^\\S".concat(py,"]")),_8=t=>t.replace(new RegExp("".concat(b8.source),"g")," ").replace(/\ {2,}/g," "),NSe=function(t,e){if(t.isEqualTo(e))return["",""];let r=PV(t,e),{length:n}=r.utf16String,i;if(n){let{offset:o}=r,s=t.codepoints.slice(0,o).concat(t.codepoints.slice(o+n));i=PV(e,v0.fromCodepoints(s))}else i=PV(e,t);return[r.utf16String.toString(),i.utf16String.toString()]},PV=function(t,e){let r=0,n=t.length,i=e.length;for(;r<n&&t.charAt(r).isEqualTo(e.charAt(r));)r++;for(;n>r+1&&t.charAt(n-1).isEqualTo(e.charAt(i-1));)n--,i--;return{utf16String:t.slice(r,n),offset:r}},Xd=class t extends Ag{static fromCommonAttributesOfObjects(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(!e.length)return new this;let r=mA(e[0]),n=r.getKeys();return e.slice(1).forEach(i=>{n=r.getKeysCommonToHash(mA(i)),r=r.slice(n)}),r}static box(e){return mA(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(...arguments),this.values=vM(e)}add(e,r){return this.merge(EEt(e,r))}remove(e){return new t(vM(this.values,e))}get(e){return this.values[e]}has(e){return e in this.values}merge(e){return new t(TEt(this.values,AEt(e)))}slice(e){let r={};return Array.from(e).forEach(n=>{this.has(n)&&(r[n]=this.values[n])}),new t(r)}getKeys(){return Object.keys(this.values)}getKeysCommonToHash(e){return e=mA(e),this.getKeys().filter(r=>this.values[r]===e.values[r])}isEqualTo(e){return y0(this.toArray(),mA(e).toArray())}isEmpty(){return this.getKeys().length===0}toArray(){if(!this.array){let e=[];for(let r in this.values){let n=this.values[r];e.push(e.push(r,n))}this.array=e.slice(0)}return this.array}toObject(){return vM(this.values)}toJSON(){return this.toObject()}contentsForInspection(){return{values:JSON.stringify(this.values)}}},EEt=function(t,e){let r={};return r[t]=e,r},TEt=function(t,e){let r=vM(t);for(let n in e){let i=e[n];r[n]=i}return r},vM=function(t,e){let r={};return Object.keys(t).sort().forEach(n=>{n!==e&&(r[n]=t[n])}),r},mA=function(t){return t instanceof Xd?t:new Xd(t)},AEt=function(t){return t instanceof Xd?t.values:t},kA=class{static groupObjects(){let e,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:n,asTree:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i&&n==null&&(n=0);let o=[];return Array.from(r).forEach(s=>{var u;if(e){var h,y,w;if((h=s.canBeGrouped)!==null&&h!==void 0&&h.call(s,n)&&(y=(w=e[e.length-1]).canBeGroupedWith)!==null&&y!==void 0&&y.call(w,s,n))return void e.push(s);o.push(new this(e,{depth:n,asTree:i})),e=null}(u=s.canBeGrouped)!==null&&u!==void 0&&u.call(s,n)?e=[s]:o.push(s)}),e&&o.push(new this(e,{depth:n,asTree:i})),o}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],{depth:r,asTree:n}=arguments.length>1?arguments[1]:void 0;this.objects=e,n&&(this.depth=r,this.objects=this.constructor.groupObjects(this.objects,{asTree:n,depth:this.depth+1}))}getObjects(){return this.objects}getDepth(){return this.depth}getCacheKey(){let e=["objectGroup"];return Array.from(this.getObjects()).forEach(r=>{e.push(r.getCacheKey())}),e.join("/")}},t8=class extends Ms{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects={},Array.from(e).forEach(r=>{let n=JSON.stringify(r);this.objects[n]==null&&(this.objects[n]=r)})}find(e){let r=JSON.stringify(e);return this.objects[r]}},r8=class{constructor(e){this.reset(e)}add(e){let r=BSe(e);this.elements[r]=e}remove(e){let r=BSe(e),n=this.elements[r];if(n)return delete this.elements[r],n}reset(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return this.elements={},Array.from(e).forEach(r=>{this.add(r)}),e}},BSe=t=>t.dataset.trixStoreKey,C1=class extends Ms{isPerforming(){return this.performing===!0}hasPerformed(){return this.performed===!0}hasSucceeded(){return this.performed&&this.succeeded}hasFailed(){return this.performed&&!this.succeeded}getPromise(){return this.promise||(this.promise=new Promise((e,r)=>(this.performing=!0,this.perform((n,i)=>{this.succeeded=n,this.performing=!1,this.performed=!0,this.succeeded?e(i):r(i)})))),this.promise}perform(e){return e(!1)}release(){var e,r;(e=this.promise)===null||e===void 0||(r=e.cancel)===null||r===void 0||r.call(e),this.promise=null,this.performing=null,this.performed=null,this.succeeded=null}};C1.proxyMethod("getPromise().then"),C1.proxyMethod("getPromise().catch");var kg=class extends Ms{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.object=e,this.options=r,this.childViews=[],this.rootView=this}getNodes(){return this.nodes||(this.nodes=this.createNodes()),this.nodes.map(e=>e.cloneNode(!0))}invalidate(){var e;return this.nodes=null,this.childViews=[],(e=this.parentView)===null||e===void 0?void 0:e.invalidate()}invalidateViewForObject(e){var r;return(r=this.findViewForObject(e))===null||r===void 0?void 0:r.invalidate()}findOrCreateCachedChildView(e,r,n){let i=this.getCachedViewForObject(r);return i?this.recordChildView(i):(i=this.createChildView(...arguments),this.cacheViewForObject(i,r)),i}createChildView(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};r instanceof kA&&(n.viewClass=e,e=n8);let i=new e(r,n);return this.recordChildView(i)}recordChildView(e){return e.parentView=this,e.rootView=this.rootView,this.childViews.push(e),e}getAllChildViews(){let e=[];return this.childViews.forEach(r=>{e.push(r),e=e.concat(r.getAllChildViews())}),e}findElement(){return this.findElementForObject(this.object)}findElementForObject(e){let r=e?.id;if(r)return this.rootView.element.querySelector("[data-trix-id='".concat(r,"']"))}findViewForObject(e){for(let r of this.getAllChildViews())if(r.object===e)return r}getViewCache(){return this.rootView!==this?this.rootView.getViewCache():this.isViewCachingEnabled()?(this.viewCache||(this.viewCache={}),this.viewCache):void 0}isViewCachingEnabled(){return this.shouldCacheViews!==!1}enableViewCaching(){this.shouldCacheViews=!0}disableViewCaching(){this.shouldCacheViews=!1}getCachedViewForObject(e){var r;return(r=this.getViewCache())===null||r===void 0?void 0:r[e.getCacheKey()]}cacheViewForObject(e,r){let n=this.getViewCache();n&&(n[r.getCacheKey()]=e)}garbageCollectCachedViews(){let e=this.getViewCache();if(e){let r=this.getAllChildViews().concat(this).map(n=>n.object.getCacheKey());for(let n in e)r.includes(n)||delete e[n]}}},n8=class extends kg{constructor(){super(...arguments),this.objectGroup=this.object,this.viewClass=this.options.viewClass,delete this.options.viewClass}getChildViews(){return this.childViews.length||Array.from(this.objectGroup.getObjects()).forEach(e=>{this.findOrCreateCachedChildView(this.viewClass,e,this.options)}),this.childViews}createNodes(){let e=this.createContainerElement();return this.getChildViews().forEach(r=>{Array.from(r.getNodes()).forEach(n=>{e.appendChild(n)})}),[e]}createContainerElement(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.objectGroup.getDepth();return this.getChildViews()[0].createContainerElement(e)}};var{entries:EEe,setPrototypeOf:zSe,isFrozen:kEt,getPrototypeOf:CEt,getOwnPropertyDescriptor:IEt}=Object,{freeze:_c,seal:Jh,create:TEe}=Object,{apply:i8,construct:o8}=typeof Reflect<"u"&&Reflect;_c||(_c=function(t){return t}),Jh||(Jh=function(t){return t}),i8||(i8=function(t,e,r){return t.apply(e,r)}),o8||(o8=function(t,e){return new t(...e)});var fM=Jf(Array.prototype.forEach),jSe=Jf(Array.prototype.pop),gA=Jf(Array.prototype.push),yM=Jf(String.prototype.toLowerCase),MV=Jf(String.prototype.toString),USe=Jf(String.prototype.match),vA=Jf(String.prototype.replace),DEt=Jf(String.prototype.indexOf),OEt=Jf(String.prototype.trim),Zd=Jf(Object.prototype.hasOwnProperty),gc=Jf(RegExp.prototype.test),yA=(VSe=TypeError,function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return o8(VSe,e)}),VSe;function Jf(t){return function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return i8(t,e,n)}}function Bi(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yM;zSe&&zSe(t,null);let n=e.length;for(;n--;){let i=e[n];if(typeof i=="string"){let o=r(i);o!==i&&(kEt(e)||(e[n]=o),i=o)}t[i]=!0}return t}function PEt(t){for(let e=0;e<t.length;e++)Zd(t,e)||(t[e]=null);return t}function c0(t){let e=TEe(null);for(let[r,n]of EEe(t))Zd(t,r)&&(Array.isArray(n)?e[r]=PEt(n):n&&typeof n=="object"&&n.constructor===Object?e[r]=c0(n):e[r]=n);return e}function bA(t,e){for(;t!==null;){let r=IEt(t,e);if(r){if(r.get)return Jf(r.get);if(typeof r.value=="function")return Jf(r.value)}t=CEt(t)}return function(){return null}}var HSe=_c(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),LV=_c(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),RV=_c(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),MEt=_c(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),FV=_c(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),LEt=_c(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),WSe=_c(["#text"]),$Se=_c(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),qV=_c(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GSe=_c(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hM=_c(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),REt=Jh(/\{\{[\w\W]*|[\w\W]*\}\}/gm),FEt=Jh(/<%[\w\W]*|[\w\W]*%>/gm),qEt=Jh(/\$\{[\w\W]*}/gm),NEt=Jh(/^data-[\-\w.\u00B7-\uFFFF]+$/),BEt=Jh(/^aria-[\-\w]+$/),AEe=Jh(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),zEt=Jh(/^(?:\w+script|data):/i),jEt=Jh(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),kEe=Jh(/^html$/i),UEt=Jh(/^[a-z][.\w]*(-[.\w]+)+$/i),KSe=Object.freeze({__proto__:null,ARIA_ATTR:BEt,ATTR_WHITESPACE:jEt,CUSTOM_ELEMENT:UEt,DATA_ATTR:NEt,DOCTYPE_NAME:kEe,ERB_EXPR:FEt,IS_ALLOWED_URI:AEe,IS_SCRIPT_OR_DATA:zEt,MUSTACHE_EXPR:REt,TMPLIT_EXPR:qEt}),VEt=1,HEt=3,WEt=7,$Et=8,GEt=9,KEt=function(){return typeof window>"u"?null:window},wM=function t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:KEt(),r=oe=>t(oe);if(r.version="3.2.3",r.removed=[],!e||!e.document||e.document.nodeType!==GEt)return r.isSupported=!1,r;let{document:n}=e,i=n,o=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:u,Node:h,Element:y,NodeFilter:w,NamedNodeMap:T=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:I,DOMParser:P,trustedTypes:L}=e,R=y.prototype,W=bA(R,"cloneNode"),G=bA(R,"remove"),q=bA(R,"nextSibling"),V=bA(R,"childNodes"),p=bA(R,"parentNode");if(typeof u=="function"){let oe=n.createElement("template");oe.content&&oe.content.ownerDocument&&(n=oe.content.ownerDocument)}let K,j="",{implementation:Q,createNodeIterator:ee,createDocumentFragment:se,getElementsByTagName:me}=n,{importNode:ve}=i,U={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};r.isSupported=typeof EEe=="function"&&typeof p=="function"&&Q&&Q.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:$,ERB_EXPR:he,TMPLIT_EXPR:Ce,DATA_ATTR:Se,ARIA_ATTR:de,IS_SCRIPT_OR_DATA:we,ATTR_WHITESPACE:Ue,CUSTOM_ELEMENT:ye}=KSe,{IS_ALLOWED_URI:ne}=KSe,st=null,dt=Bi({},[...HSe,...LV,...RV,...FV,...WSe]),lt=null,kt=Bi({},[...$Se,...qV,...GSe,...hM]),ut=Object.seal(TEe(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ut=null,Wt=null,Ht=!0,pr=!0,zr=!1,Jt=!0,Qr=!1,Br=!0,Rr=!1,Be=!1,Ge=!1,vt=!1,Kt=!1,rt=!1,Ct=!0,Tt=!1,ar=!0,er=!1,ir={},sr=null,He=Bi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Xe=null,Rt=Bi({},["audio","video","img","source","image","track"]),xr=null,Yn=Bi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kn="http://www.w3.org/1998/Math/MathML",Cn="http://www.w3.org/2000/svg",wt="http://www.w3.org/1999/xhtml",Ot=wt,wr=!1,tr=null,on=Bi({},[kn,Cn,wt],MV),pn=Bi({},["mi","mo","mn","ms","mtext"]),tn=Bi({},["annotation-xml"]),Rn=Bi({},["title","style","font","a","script"]),Si=null,Ei=["application/xhtml+xml","text/html"],qe=null,ze=null,mt=n.createElement("form"),Ft=function(oe){return oe instanceof RegExp||oe instanceof Function},fr=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!ze||ze!==oe){if(oe&&typeof oe=="object"||(oe={}),oe=c0(oe),Si=Ei.indexOf(oe.PARSER_MEDIA_TYPE)===-1?"text/html":oe.PARSER_MEDIA_TYPE,qe=Si==="application/xhtml+xml"?MV:yM,st=Zd(oe,"ALLOWED_TAGS")?Bi({},oe.ALLOWED_TAGS,qe):dt,lt=Zd(oe,"ALLOWED_ATTR")?Bi({},oe.ALLOWED_ATTR,qe):kt,tr=Zd(oe,"ALLOWED_NAMESPACES")?Bi({},oe.ALLOWED_NAMESPACES,MV):on,xr=Zd(oe,"ADD_URI_SAFE_ATTR")?Bi(c0(Yn),oe.ADD_URI_SAFE_ATTR,qe):Yn,Xe=Zd(oe,"ADD_DATA_URI_TAGS")?Bi(c0(Rt),oe.ADD_DATA_URI_TAGS,qe):Rt,sr=Zd(oe,"FORBID_CONTENTS")?Bi({},oe.FORBID_CONTENTS,qe):He,Ut=Zd(oe,"FORBID_TAGS")?Bi({},oe.FORBID_TAGS,qe):{},Wt=Zd(oe,"FORBID_ATTR")?Bi({},oe.FORBID_ATTR,qe):{},ir=!!Zd(oe,"USE_PROFILES")&&oe.USE_PROFILES,Ht=oe.ALLOW_ARIA_ATTR!==!1,pr=oe.ALLOW_DATA_ATTR!==!1,zr=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,Jt=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qr=oe.SAFE_FOR_TEMPLATES||!1,Br=oe.SAFE_FOR_XML!==!1,Rr=oe.WHOLE_DOCUMENT||!1,vt=oe.RETURN_DOM||!1,Kt=oe.RETURN_DOM_FRAGMENT||!1,rt=oe.RETURN_TRUSTED_TYPE||!1,Ge=oe.FORCE_BODY||!1,Ct=oe.SANITIZE_DOM!==!1,Tt=oe.SANITIZE_NAMED_PROPS||!1,ar=oe.KEEP_CONTENT!==!1,er=oe.IN_PLACE||!1,ne=oe.ALLOWED_URI_REGEXP||AEe,Ot=oe.NAMESPACE||wt,pn=oe.MATHML_TEXT_INTEGRATION_POINTS||pn,tn=oe.HTML_INTEGRATION_POINTS||tn,ut=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&Ft(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ut.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&Ft(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ut.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ut.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qr&&(pr=!1),Kt&&(vt=!0),ir&&(st=Bi({},WSe),lt=[],ir.html===!0&&(Bi(st,HSe),Bi(lt,$Se)),ir.svg===!0&&(Bi(st,LV),Bi(lt,qV),Bi(lt,hM)),ir.svgFilters===!0&&(Bi(st,RV),Bi(lt,qV),Bi(lt,hM)),ir.mathMl===!0&&(Bi(st,FV),Bi(lt,GSe),Bi(lt,hM))),oe.ADD_TAGS&&(st===dt&&(st=c0(st)),Bi(st,oe.ADD_TAGS,qe)),oe.ADD_ATTR&&(lt===kt&&(lt=c0(lt)),Bi(lt,oe.ADD_ATTR,qe)),oe.ADD_URI_SAFE_ATTR&&Bi(xr,oe.ADD_URI_SAFE_ATTR,qe),oe.FORBID_CONTENTS&&(sr===He&&(sr=c0(sr)),Bi(sr,oe.FORBID_CONTENTS,qe)),ar&&(st["#text"]=!0),Rr&&Bi(st,["html","head","body"]),st.table&&(Bi(st,["tbody"]),delete Ut.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw yA('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw yA('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');K=oe.TRUSTED_TYPES_POLICY,j=K.createHTML("")}else K===void 0&&(K=function(Fe,Pe){if(typeof Fe!="object"||typeof Fe.createPolicy!="function")return null;let _e=null,fe="data-tt-policy-suffix";Pe&&Pe.hasAttribute(fe)&&(_e=Pe.getAttribute(fe));let Ie="dompurify"+(_e?"#"+_e:"");try{return Fe.createPolicy(Ie,{createHTML:nt=>nt,createScriptURL:nt=>nt})}catch{return console.warn("TrustedTypes policy "+Ie+" could not be created."),null}}(L,o)),K!==null&&typeof j=="string"&&(j=K.createHTML(""));_c&&_c(oe),ze=oe}},yr=Bi({},[...LV,...RV,...MEt]),an=Bi({},[...FV,...LEt]),Or=function(oe){gA(r.removed,{element:oe});try{p(oe).removeChild(oe)}catch{G(oe)}},bn=function(oe,Fe){try{gA(r.removed,{attribute:Fe.getAttributeNode(oe),from:Fe})}catch{gA(r.removed,{attribute:null,from:Fe})}if(Fe.removeAttribute(oe),oe==="is")if(vt||Kt)try{Or(Fe)}catch{}else try{Fe.setAttribute(oe,"")}catch{}},Pr=function(oe){let Fe=null,Pe=null;if(Ge)oe="<remove></remove>"+oe;else{let Ie=USe(oe,/^[\r\n\t ]+/);Pe=Ie&&Ie[0]}Si==="application/xhtml+xml"&&Ot===wt&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");let _e=K?K.createHTML(oe):oe;if(Ot===wt)try{Fe=new P().parseFromString(_e,Si)}catch{}if(!Fe||!Fe.documentElement){Fe=Q.createDocument(Ot,"template",null);try{Fe.documentElement.innerHTML=wr?j:_e}catch{}}let fe=Fe.body||Fe.documentElement;return oe&&Pe&&fe.insertBefore(n.createTextNode(Pe),fe.childNodes[0]||null),Ot===wt?me.call(Fe,Rr?"html":"body")[0]:Rr?Fe.documentElement:fe},Yr=function(oe){return ee.call(oe.ownerDocument||oe,oe,w.SHOW_ELEMENT|w.SHOW_COMMENT|w.SHOW_TEXT|w.SHOW_PROCESSING_INSTRUCTION|w.SHOW_CDATA_SECTION,null)},Sn=function(oe){return oe instanceof I&&(typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof T)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},ii=function(oe){return typeof h=="function"&&oe instanceof h};function Xn(oe,Fe,Pe){fM(oe,_e=>{_e.call(r,Fe,Pe,ze)})}let ha=function(oe){let Fe=null;if(Xn(U.beforeSanitizeElements,oe,null),Sn(oe))return Or(oe),!0;let Pe=qe(oe.nodeName);if(Xn(U.uponSanitizeElement,oe,{tagName:Pe,allowedTags:st}),oe.hasChildNodes()&&!ii(oe.firstElementChild)&&gc(/<[/\w]/g,oe.innerHTML)&&gc(/<[/\w]/g,oe.textContent)||oe.nodeType===WEt||Br&&oe.nodeType===$Et&&gc(/<[/\w]/g,oe.data))return Or(oe),!0;if(!st[Pe]||Ut[Pe]){if(!Ut[Pe]&&pe(Pe)&&(ut.tagNameCheck instanceof RegExp&&gc(ut.tagNameCheck,Pe)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(Pe)))return!1;if(ar&&!sr[Pe]){let _e=p(oe)||oe.parentNode,fe=V(oe)||oe.childNodes;if(fe&&_e)for(let Ie=fe.length-1;Ie>=0;--Ie){let nt=W(fe[Ie],!0);nt.__removalCount=(oe.__removalCount||0)+1,_e.insertBefore(nt,q(oe))}}return Or(oe),!0}return oe instanceof y&&!function(_e){let fe=p(_e);fe&&fe.tagName||(fe={namespaceURI:Ot,tagName:"template"});let Ie=yM(_e.tagName),nt=yM(fe.tagName);return!!tr[_e.namespaceURI]&&(_e.namespaceURI===Cn?fe.namespaceURI===wt?Ie==="svg":fe.namespaceURI===kn?Ie==="svg"&&(nt==="annotation-xml"||pn[nt]):!!yr[Ie]:_e.namespaceURI===kn?fe.namespaceURI===wt?Ie==="math":fe.namespaceURI===Cn?Ie==="math"&&tn[nt]:!!an[Ie]:_e.namespaceURI===wt?!(fe.namespaceURI===Cn&&!tn[nt])&&!(fe.namespaceURI===kn&&!pn[nt])&&!an[Ie]&&(Rn[Ie]||!yr[Ie]):!(Si!=="application/xhtml+xml"||!tr[_e.namespaceURI]))}(oe)?(Or(oe),!0):Pe!=="noscript"&&Pe!=="noembed"&&Pe!=="noframes"||!gc(/<\/no(script|embed|frames)/i,oe.innerHTML)?(Qr&&oe.nodeType===HEt&&(Fe=oe.textContent,fM([$,he,Ce],_e=>{Fe=vA(Fe,_e," ")}),oe.textContent!==Fe&&(gA(r.removed,{element:oe.cloneNode()}),oe.textContent=Fe)),Xn(U.afterSanitizeElements,oe,null),!1):(Or(oe),!0)},xn=function(oe,Fe,Pe){if(Ct&&(Fe==="id"||Fe==="name")&&(Pe in n||Pe in mt))return!1;if(!(pr&&!Wt[Fe]&&gc(Se,Fe))){if(!(Ht&&gc(de,Fe))){if(!lt[Fe]||Wt[Fe]){if(!(pe(oe)&&(ut.tagNameCheck instanceof RegExp&&gc(ut.tagNameCheck,oe)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(oe))&&(ut.attributeNameCheck instanceof RegExp&&gc(ut.attributeNameCheck,Fe)||ut.attributeNameCheck instanceof Function&&ut.attributeNameCheck(Fe))||Fe==="is"&&ut.allowCustomizedBuiltInElements&&(ut.tagNameCheck instanceof RegExp&&gc(ut.tagNameCheck,Pe)||ut.tagNameCheck instanceof Function&&ut.tagNameCheck(Pe))))return!1}else if(!xr[Fe]){if(!gc(ne,vA(Pe,Ue,""))){if((Fe!=="src"&&Fe!=="xlink:href"&&Fe!=="href"||oe==="script"||DEt(Pe,"data:")!==0||!Xe[oe])&&!(zr&&!gc(we,vA(Pe,Ue,"")))){if(Pe)return!1}}}}}return!0},pe=function(oe){return oe!=="annotation-xml"&&USe(oe,ye)},Ee=function(oe){Xn(U.beforeSanitizeAttributes,oe,null);let{attributes:Fe}=oe;if(!Fe||Sn(oe))return;let Pe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:lt,forceKeepAttr:void 0},_e=Fe.length;for(;_e--;){let fe=Fe[_e],{name:Ie,namespaceURI:nt,value:zt}=fe,Vt=qe(Ie),pt=Ie==="value"?zt:OEt(zt);if(Pe.attrName=Vt,Pe.attrValue=pt,Pe.keepAttr=!0,Pe.forceKeepAttr=void 0,Xn(U.uponSanitizeAttribute,oe,Pe),pt=Pe.attrValue,!Tt||Vt!=="id"&&Vt!=="name"||(bn(Ie,oe),pt="user-content-"+pt),Br&&gc(/((--!?|])>)|<\/(style|title)/i,pt)){bn(Ie,oe);continue}if(Pe.forceKeepAttr||(bn(Ie,oe),!Pe.keepAttr))continue;if(!Jt&&gc(/\/>/i,pt)){bn(Ie,oe);continue}Qr&&fM([$,he,Ce],_r=>{pt=vA(pt,_r," ")});let _t=qe(oe.nodeName);if(xn(_t,Vt,pt)){if(K&&typeof L=="object"&&typeof L.getAttributeType=="function"&&!nt)switch(L.getAttributeType(_t,Vt)){case"TrustedHTML":pt=K.createHTML(pt);break;case"TrustedScriptURL":pt=K.createScriptURL(pt)}try{nt?oe.setAttributeNS(nt,Ie,pt):oe.setAttribute(Ie,pt),Sn(oe)?Or(oe):jSe(r.removed)}catch{}}}Xn(U.afterSanitizeAttributes,oe,null)},ke=function oe(Fe){let Pe=null,_e=Yr(Fe);for(Xn(U.beforeSanitizeShadowDOM,Fe,null);Pe=_e.nextNode();)Xn(U.uponSanitizeShadowNode,Pe,null),ha(Pe),Ee(Pe),Pe.content instanceof s&&oe(Pe.content);Xn(U.afterSanitizeShadowDOM,Fe,null)};return r.sanitize=function(oe){let Fe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe=null,_e=null,fe=null,Ie=null;if(wr=!oe,wr&&(oe="<!-->"),typeof oe!="string"&&!ii(oe)){if(typeof oe.toString!="function")throw yA("toString is not a function");if(typeof(oe=oe.toString())!="string")throw yA("dirty is not a string, aborting")}if(!r.isSupported)return oe;if(Be||fr(Fe),r.removed=[],typeof oe=="string"&&(er=!1),er){if(oe.nodeName){let Vt=qe(oe.nodeName);if(!st[Vt]||Ut[Vt])throw yA("root node is forbidden and cannot be sanitized in-place")}}else if(oe instanceof h)Pe=Pr("<!---->"),_e=Pe.ownerDocument.importNode(oe,!0),_e.nodeType===VEt&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?Pe=_e:Pe.appendChild(_e);else{if(!vt&&!Qr&&!Rr&&oe.indexOf("<")===-1)return K&&rt?K.createHTML(oe):oe;if(Pe=Pr(oe),!Pe)return vt?null:rt?j:""}Pe&&Ge&&Or(Pe.firstChild);let nt=Yr(er?oe:Pe);for(;fe=nt.nextNode();)ha(fe),Ee(fe),fe.content instanceof s&&ke(fe.content);if(er)return oe;if(vt){if(Kt)for(Ie=se.call(Pe.ownerDocument);Pe.firstChild;)Ie.appendChild(Pe.firstChild);else Ie=Pe;return(lt.shadowroot||lt.shadowrootmode)&&(Ie=ve.call(i,Ie,!0)),Ie}let zt=Rr?Pe.outerHTML:Pe.innerHTML;return Rr&&st["!doctype"]&&Pe.ownerDocument&&Pe.ownerDocument.doctype&&Pe.ownerDocument.doctype.name&&gc(kEe,Pe.ownerDocument.doctype.name)&&(zt="<!DOCTYPE "+Pe.ownerDocument.doctype.name+`>
`+zt),Qr&&fM([$,he,Ce],Vt=>{zt=vA(zt,Vt," ")}),K&&rt?K.createHTML(zt):zt},r.setConfig=function(){fr(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}),Be=!0},r.clearConfig=function(){ze=null,Be=!1},r.isValidAttribute=function(oe,Fe,Pe){ze||fr({});let _e=qe(oe),fe=qe(Fe);return xn(_e,fe,Pe)},r.addHook=function(oe,Fe){typeof Fe=="function"&&gA(U[oe],Fe)},r.removeHook=function(oe){return jSe(U[oe])},r.removeHooks=function(oe){U[oe]=[]},r.removeAllHooks=function(){U={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},r}();wM.addHook("uponSanitizeAttribute",function(t,e){/^data-trix-/.test(e.attrName)&&(e.forceKeepAttr=!0)});var ZEt="style href src width height language class".split(" "),YEt="javascript:".split(" "),XEt="script iframe form noscript".split(" "),I1=class extends Ms{static setHTML(e,r){let n=new this(r).sanitize(),i=n.getHTML?n.getHTML():n.outerHTML;e.innerHTML=i}static sanitize(e,r){let n=new this(e,r);return n.sanitize(),n}constructor(e){let{allowedAttributes:r,forbiddenProtocols:n,forbiddenElements:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.allowedAttributes=r||ZEt,this.forbiddenProtocols=n||YEt,this.forbiddenElements=i||XEt,this.body=JEt(e)}sanitize(){return this.sanitizeElements(),this.normalizeListElementNesting(),wM.setConfig(hEe),this.body=wM.sanitize(this.body),this.body}getHTML(){return this.body.innerHTML}getBody(){return this.body}sanitizeElements(){let e=bM(this.body),r=[];for(;e.nextNode();){let n=e.currentNode;switch(n.nodeType){case Node.ELEMENT_NODE:this.elementIsRemovable(n)?r.push(n):this.sanitizeElement(n);break;case Node.COMMENT_NODE:r.push(n)}}return r.forEach(n=>vy(n)),this.body}sanitizeElement(e){return e.hasAttribute("href")&&this.forbiddenProtocols.includes(e.protocol)&&e.removeAttribute("href"),Array.from(e.attributes).forEach(r=>{let{name:n}=r;this.allowedAttributes.includes(n)||n.indexOf("data-trix")===0||e.removeAttribute(n)}),e}normalizeListElementNesting(){return Array.from(this.body.querySelectorAll("ul,ol")).forEach(e=>{let r=e.previousElementSibling;r&&vc(r)==="li"&&r.appendChild(e)}),this.body}elementIsRemovable(e){if(e?.nodeType===Node.ELEMENT_NODE)return this.elementIsForbidden(e)||this.elementIsntSerializable(e)}elementIsForbidden(e){return this.forbiddenElements.includes(vc(e))}elementIsntSerializable(e){return e.getAttribute("data-trix-serialize")==="false"&&!d0(e)}},JEt=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";t=t.replace(/<\/html[^>]*>[^]*$/i,"</html>");let e=document.implementation.createHTMLDocument("");return e.documentElement.innerHTML=t,Array.from(e.head.querySelectorAll("style")).forEach(r=>{e.body.appendChild(r)}),e.body},{css:dy}=PA,CA=class extends kg{constructor(){super(...arguments),this.attachment=this.object,this.attachment.uploadProgressDelegate=this,this.attachmentPiece=this.options.piece}createContentNodes(){return[]}createNodes(){let e,r=e=Oi({tagName:"figure",className:this.getClassName(),data:this.getData(),editable:!1}),n=this.getHref();return n&&(e=Oi({tagName:"a",editable:!1,attributes:{href:n,tabindex:-1}}),r.appendChild(e)),this.attachment.hasContent()?I1.setHTML(e,this.attachment.getContent()):this.createContentNodes().forEach(i=>{e.appendChild(i)}),e.appendChild(this.createCaptionElement()),this.attachment.isPending()&&(this.progressElement=Oi({tagName:"progress",attributes:{class:dy.attachmentProgress,value:this.attachment.getUploadProgress(),max:100},data:{trixMutable:!0,trixStoreKey:["progressElement",this.attachment.id].join("/")}}),r.appendChild(this.progressElement)),[ZSe("left"),r,ZSe("right")]}createCaptionElement(){let e=Oi({tagName:"figcaption",className:dy.attachmentCaption}),r=this.attachmentPiece.getCaption();if(r)e.classList.add("".concat(dy.attachmentCaption,"--edited")),e.textContent=r;else{let n,i,o=this.getCaptionConfig();if(o.name&&(n=this.attachment.getFilename()),o.size&&(i=this.attachment.getFormattedFilesize()),n){let s=Oi({tagName:"span",className:dy.attachmentName,textContent:n});e.appendChild(s)}if(i){n&&e.appendChild(document.createTextNode(" "));let s=Oi({tagName:"span",className:dy.attachmentSize,textContent:i});e.appendChild(s)}}return e}getClassName(){let e=[dy.attachment,"".concat(dy.attachment,"--").concat(this.attachment.getType())],r=this.attachment.getExtension();return r&&e.push("".concat(dy.attachment,"--").concat(r)),e.join(" ")}getData(){let e={trixAttachment:JSON.stringify(this.attachment),trixContentType:this.attachment.getContentType(),trixId:this.attachment.id},{attributes:r}=this.attachmentPiece;return r.isEmpty()||(e.trixAttributes=JSON.stringify(r)),this.attachment.isPending()&&(e.trixSerialize=!1),e}getHref(){if(!QEt(this.attachment.getContent(),"a"))return this.attachment.getHref()}getCaptionConfig(){var e;let r=this.attachment.getType(),n=xEe((e=d8[r])===null||e===void 0?void 0:e.caption);return r==="file"&&(n.name=!0),n}findProgressElement(){var e;return(e=this.findElement())===null||e===void 0?void 0:e.querySelector("progress")}attachmentDidChangeUploadProgress(){let e=this.attachment.getUploadProgress(),r=this.findProgressElement();r&&(r.value=e)}},ZSe=t=>Oi({tagName:"span",textContent:jM,data:{trixCursorTarget:t,trixSerialize:!1}}),QEt=function(t,e){let r=Oi("div");return I1.setHTML(r,t||""),r.querySelector(e)},SM=class extends CA{constructor(){super(...arguments),this.attachment.previewDelegate=this}createContentNodes(){return this.image=Oi({tagName:"img",attributes:{src:""},data:{trixMutable:!0}}),this.refresh(this.image),[this.image]}createCaptionElement(){let e=super.createCaptionElement(...arguments);return e.textContent||e.setAttribute("data-trix-placeholder",hi.captionPlaceholder),e}refresh(e){var r;if(e||(e=(r=this.findElement())===null||r===void 0?void 0:r.querySelector("img")),e)return this.updateAttributesForImage(e)}updateAttributesForImage(e){let r=this.attachment.getURL(),n=this.attachment.getPreviewURL();if(e.src=n||r,n===r)e.removeAttribute("data-trix-serialized-attributes");else{let u=JSON.stringify({src:r});e.setAttribute("data-trix-serialized-attributes",u)}let i=this.attachment.getWidth(),o=this.attachment.getHeight();i!=null&&(e.width=i),o!=null&&(e.height=o);let s=["imageElement",this.attachment.id,e.src,e.width,e.height].join("/");e.dataset.trixStoreKey=s}attachmentDidChangeAttributes(){return this.refresh(this.image),this.refresh()}},EM=class extends kg{constructor(){super(...arguments),this.piece=this.object,this.attributes=this.piece.getAttributes(),this.textConfig=this.options.textConfig,this.context=this.options.context,this.piece.attachment?this.attachment=this.piece.attachment:this.string=this.piece.toString()}createNodes(){let e=this.attachment?this.createAttachmentNodes():this.createStringNodes(),r=this.createElement();if(r){let n=function(i){for(;(o=i)!==null&&o!==void 0&&o.firstElementChild;){var o;i=i.firstElementChild}return i}(r);Array.from(e).forEach(i=>{n.appendChild(i)}),e=[r]}return e}createAttachmentNodes(){let e=this.attachment.isPreviewable()?SM:CA;return this.createChildView(e,this.piece.attachment,{piece:this.piece}).getNodes()}createStringNodes(){var e;if((e=this.textConfig)!==null&&e!==void 0&&e.plaintext)return[document.createTextNode(this.string)];{let r=[],n=this.string.split(`
`);for(let i=0;i<n.length;i++){let o=n[i];if(i>0){let s=Oi("br");r.push(s)}if(o.length){let s=document.createTextNode(this.preserveSpaces(o));r.push(s)}}return r}}createElement(){let e,r,n,i={};for(r in this.attributes){n=this.attributes[r];let s=QV(r);if(s){if(s.tagName){var o;let u=Oi(s.tagName);o?(o.appendChild(u),o=u):e=o=u}if(s.styleProperty&&(i[s.styleProperty]=n),s.style)for(r in s.style)n=s.style[r],i[r]=n}}if(Object.keys(i).length)for(r in e||(e=Oi("span")),i)n=i[r],e.style[r]=n;return e}createContainerElement(){for(let e in this.attributes){let r=this.attributes[e],n=QV(e);if(n&&n.groupTagName){let i={};return i[e]=r,Oi(n.groupTagName,i)}}}preserveSpaces(e){return this.context.isLast&&(e=e.replace(/\ $/,py)),e=e.replace(/(\S)\ {3}(\S)/g,"$1 ".concat(py," $2")).replace(/\ {2}/g,"".concat(py," ")).replace(/\ {2}/g," ".concat(py)),(this.context.isFirst||this.context.followsWhitespace)&&(e=e.replace(/^\ /,py)),e}},TM=class extends kg{constructor(){super(...arguments),this.text=this.object,this.textConfig=this.options.textConfig}createNodes(){let e=[],r=kA.groupObjects(this.getPieces()),n=r.length-1;for(let o=0;o<r.length;o++){let s=r[o],u={};o===0&&(u.isFirst=!0),o===n&&(u.isLast=!0),eTt(i)&&(u.followsWhitespace=!0);let h=this.findOrCreateCachedChildView(EM,s,{textConfig:this.textConfig,context:u});e.push(...Array.from(h.getNodes()||[]));var i=s}return e}getPieces(){return Array.from(this.text.getPieces()).filter(e=>!e.hasAttribute("blockBreak"))}},eTt=t=>/\s$/.test(t?.toString()),{css:YSe}=PA,AM=class extends kg{constructor(){super(...arguments),this.block=this.object,this.attributes=this.block.getAttributes()}createNodes(){let e=[document.createComment("block")];if(this.block.isEmpty())e.push(Oi("br"));else{var r;let n=(r=Hs(this.block.getLastAttribute()))===null||r===void 0?void 0:r.text,i=this.findOrCreateCachedChildView(TM,this.block.text,{textConfig:n});e.push(...Array.from(i.getNodes()||[])),this.shouldAddExtraNewlineElement()&&e.push(Oi("br"))}if(this.attributes.length)return e;{let n,{tagName:i}=yc.default;this.block.isRTL()&&(n={dir:"rtl"});let o=Oi({tagName:i,attributes:n});return e.forEach(s=>o.appendChild(s)),[o]}}createContainerElement(e){let r={},n,i=this.attributes[e],{tagName:o,htmlAttributes:s=[]}=Hs(i);if(e===0&&this.block.isRTL()&&Object.assign(r,{dir:"rtl"}),i==="attachmentGallery"){let u=this.block.getBlockBreakPosition();n="".concat(YSe.attachmentGallery," ").concat(YSe.attachmentGallery,"--").concat(u)}return Object.entries(this.block.htmlAttributes).forEach(u=>{let[h,y]=u;s.includes(h)&&(r[h]=y)}),Oi({tagName:o,className:n,attributes:r})}shouldAddExtraNewlineElement(){return/\n\n$/.test(this.block.toString())}},D1=class extends kg{static render(e){let r=Oi("div"),n=new this(e,{element:r});return n.render(),n.sync(),r}constructor(){super(...arguments),this.element=this.options.element,this.elementStore=new r8,this.setDocument(this.object)}setDocument(e){e.isEqualTo(this.document)||(this.document=this.object=e)}render(){if(this.childViews=[],this.shadowElement=Oi("div"),!this.document.isEmpty()){let e=kA.groupObjects(this.document.getBlocks(),{asTree:!0});Array.from(e).forEach(r=>{let n=this.findOrCreateCachedChildView(AM,r);Array.from(n.getNodes()).map(i=>this.shadowElement.appendChild(i))})}}isSynced(){return tTt(this.shadowElement,this.element)}sync(){let e=this.createDocumentFragmentForSync();for(;this.element.lastChild;)this.element.removeChild(this.element.lastChild);return this.element.appendChild(e),this.didSync()}didSync(){return this.elementStore.reset(XSe(this.element)),y8(()=>this.garbageCollectCachedViews())}createDocumentFragmentForSync(){let e=document.createDocumentFragment();return Array.from(this.shadowElement.childNodes).forEach(r=>{e.appendChild(r.cloneNode(!0))}),Array.from(XSe(e)).forEach(r=>{let n=this.elementStore.remove(r);n&&r.parentNode.replaceChild(n,r)}),e}},XSe=t=>t.querySelectorAll("[data-trix-store-key]"),tTt=(t,e)=>JSe(t.innerHTML)===JSe(e.innerHTML),JSe=t=>t.replace(/&nbsp;/g," ");function dM(t){var e,r;function n(o,s){try{var u=t[o](s),h=u.value,y=h instanceof rTt;Promise.resolve(y?h.v:h).then(function(w){if(y){var T=o==="return"?"return":"next";if(!h.k||w.done)return n(T,w);w=t[T](w).value}i(u.done?"return":"normal",w)},function(w){n("throw",w)})}catch(w){i("throw",w)}}function i(o,s){switch(o){case"return":e.resolve({value:s,done:!0});break;case"throw":e.reject(s);break;default:e.resolve({value:s,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(o,s){return new Promise(function(u,h){var y={key:o,arg:s,resolve:u,reject:h,next:null};r?r=r.next=y:(e=r=y,n(o,s))})},typeof t.return!="function"&&(this.return=void 0)}function rTt(t,e){this.v=t,this.k=e}function bc(t,e,r){return(e=nTt(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function nTt(t){var e=function(r,n){if(typeof r!="object"||r===null)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var o=i.call(r,n||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(t,"string");return typeof e=="symbol"?e:String(e)}dM.prototype[typeof Symbol=="function"&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},dM.prototype.next=function(t){return this._invoke("next",t)},dM.prototype.throw=function(t){return this._invoke("throw",t)},dM.prototype.return=function(t){return this._invoke("return",t)};function Pa(t,e){return iTt(t,CEe(t,e,"get"))}function x8(t,e,r){return oTt(t,CEe(t,e,"set"),r),r}function CEe(t,e,r){if(!e.has(t))throw new TypeError("attempted to "+r+" private field on non-instance");return e.get(t)}function iTt(t,e){return e.get?e.get.call(t):e.value}function oTt(t,e,r){if(e.set)e.set.call(t,r);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=r}}function pM(t,e,r){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return r}function IEe(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function AA(t,e,r){IEe(t,e),e.set(t,r)}var Cg=class extends Ag{static registerType(e,r){r.type=e,this.types[e]=r}static fromJSON(e){let r=this.types[e.type];if(r)return r.fromJSON(e)}constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.attributes=Xd.box(r)}copyWithAttributes(e){return new this.constructor(this.getValue(),e)}copyWithAdditionalAttributes(e){return this.copyWithAttributes(this.attributes.merge(e))}copyWithoutAttribute(e){return this.copyWithAttributes(this.attributes.remove(e))}copy(){return this.copyWithAttributes(this.attributes)}getAttribute(e){return this.attributes.get(e)}getAttributesHash(){return this.attributes}getAttributes(){return this.attributes.toObject()}hasAttribute(e){return this.attributes.has(e)}hasSameStringValueAsPiece(e){return e&&this.toString()===e.toString()}hasSameAttributesAsPiece(e){return e&&(this.attributes===e.attributes||this.attributes.isEqualTo(e.attributes))}isBlockBreak(){return!1}isEqualTo(e){return super.isEqualTo(...arguments)||this.hasSameConstructorAs(e)&&this.hasSameStringValueAsPiece(e)&&this.hasSameAttributesAsPiece(e)}isEmpty(){return this.length===0}isSerializable(){return!0}toJSON(){return{type:this.constructor.type,attributes:this.getAttributes()}}contentsForInspection(){return{type:this.constructor.type,attributes:this.attributes.inspect()}}canBeGrouped(){return this.hasAttribute("href")}canBeGroupedWith(e){return this.getAttribute("href")===e.getAttribute("href")}getLength(){return this.length}canBeConsolidatedWith(e){return!1}};bc(Cg,"types",{});var kM=class extends C1{constructor(e){super(...arguments),this.url=e}perform(e){let r=new Image;r.onload=()=>(r.width=this.width=r.naturalWidth,r.height=this.height=r.naturalHeight,e(!0,r)),r.onerror=()=>e(!1),r.src=this.url}},O1=class t extends Ag{static attachmentForFile(e){let r=new this(this.attributesForFile(e));return r.setFile(e),r}static attributesForFile(e){return new Xd({filename:e.name,filesize:e.size,contentType:e.type})}static fromJSON(e){return new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(e),this.releaseFile=this.releaseFile.bind(this),this.attributes=Xd.box(e),this.didChangeAttributes()}getAttribute(e){return this.attributes.get(e)}hasAttribute(e){return this.attributes.has(e)}getAttributes(){return this.attributes.toObject()}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=this.attributes.merge(e);var n,i,o,s;if(!this.attributes.isEqualTo(r))return this.attributes=r,this.didChangeAttributes(),(n=this.previewDelegate)===null||n===void 0||(i=n.attachmentDidChangeAttributes)===null||i===void 0||i.call(n,this),(o=this.delegate)===null||o===void 0||(s=o.attachmentDidChangeAttributes)===null||s===void 0?void 0:s.call(o,this)}didChangeAttributes(){if(this.isPreviewable())return this.preloadURL()}isPending(){return this.file!=null&&!(this.getURL()||this.getHref())}isPreviewable(){return this.attributes.has("previewable")?this.attributes.get("previewable"):t.previewablePattern.test(this.getContentType())}getType(){return this.hasContent()?"content":this.isPreviewable()?"preview":"file"}getURL(){return this.attributes.get("url")}getHref(){return this.attributes.get("href")}getFilename(){return this.attributes.get("filename")||""}getFilesize(){return this.attributes.get("filesize")}getFormattedFilesize(){let e=this.attributes.get("filesize");return typeof e=="number"?dEe.formatter(e):""}getExtension(){var e;return(e=this.getFilename().match(/\.(\w+)$/))===null||e===void 0?void 0:e[1].toLowerCase()}getContentType(){return this.attributes.get("contentType")}hasContent(){return this.attributes.has("content")}getContent(){return this.attributes.get("content")}getWidth(){return this.attributes.get("width")}getHeight(){return this.attributes.get("height")}getFile(){return this.file}setFile(e){if(this.file=e,this.isPreviewable())return this.preloadFile()}releaseFile(){this.releasePreloadedFile(),this.file=null}getUploadProgress(){return this.uploadProgress!=null?this.uploadProgress:0}setUploadProgress(e){var r,n;if(this.uploadProgress!==e)return this.uploadProgress=e,(r=this.uploadProgressDelegate)===null||r===void 0||(n=r.attachmentDidChangeUploadProgress)===null||n===void 0?void 0:n.call(r,this)}toJSON(){return this.getAttributes()}getCacheKey(){return[super.getCacheKey(...arguments),this.attributes.getCacheKey(),this.getPreviewURL()].join("/")}getPreviewURL(){return this.previewURL||this.preloadingURL}setPreviewURL(e){var r,n,i,o;if(e!==this.getPreviewURL())return this.previewURL=e,(r=this.previewDelegate)===null||r===void 0||(n=r.attachmentDidChangeAttributes)===null||n===void 0||n.call(r,this),(i=this.delegate)===null||i===void 0||(o=i.attachmentDidChangePreviewURL)===null||o===void 0?void 0:o.call(i,this)}preloadURL(){return this.preload(this.getURL(),this.releaseFile)}preloadFile(){if(this.file)return this.fileObjectURL=URL.createObjectURL(this.file),this.preload(this.fileObjectURL)}releasePreloadedFile(){this.fileObjectURL&&(URL.revokeObjectURL(this.fileObjectURL),this.fileObjectURL=null)}preload(e,r){if(e&&e!==this.getPreviewURL())return this.preloadingURL=e,new kM(e).then(n=>{let{width:i,height:o}=n;return this.getWidth()&&this.getHeight()||this.setAttributes({width:i,height:o}),this.preloadingURL=null,this.setPreviewURL(e),r?.()}).catch(()=>(this.preloadingURL=null,r?.()))}};bc(O1,"previewablePattern",/^image(\/(gif|png|webp|jpe?g)|$)/);var P1=class t extends Cg{static fromJSON(e){return new this(O1.fromJSON(e.attachment),e.attributes)}constructor(e){super(...arguments),this.attachment=e,this.length=1,this.ensureAttachmentExclusivelyHasAttribute("href"),this.attachment.hasContent()||this.removeProhibitedAttributes()}ensureAttachmentExclusivelyHasAttribute(e){this.hasAttribute(e)&&(this.attachment.hasAttribute(e)||this.attachment.setAttributes(this.attributes.slice([e])),this.attributes=this.attributes.remove(e))}removeProhibitedAttributes(){let e=this.attributes.slice(t.permittedAttributes);e.isEqualTo(this.attributes)||(this.attributes=e)}getValue(){return this.attachment}isSerializable(){return!this.attachment.isPending()}getCaption(){return this.attributes.get("caption")||""}isEqualTo(e){var r;return super.isEqualTo(e)&&this.attachment.id===(e==null||(r=e.attachment)===null||r===void 0?void 0:r.id)}toString(){return"\uFFFC"}toJSON(){let e=super.toJSON(...arguments);return e.attachment=this.attachment,e}getCacheKey(){return[super.getCacheKey(...arguments),this.attachment.getCacheKey()].join("/")}toConsole(){return JSON.stringify(this.toString())}};bc(P1,"permittedAttributes",["caption","presentation"]),Cg.registerType("attachment",P1);var IA=class extends Cg{static fromJSON(e){return new this(e.string,e.attributes)}constructor(e){super(...arguments),this.string=(r=>r.replace(/\r\n?/g,`
`))(e),this.length=this.string.length}getValue(){return this.string}toString(){return this.string.toString()}isBlockBreak(){return this.toString()===`
`&&this.getAttribute("blockBreak")===!0}toJSON(){let e=super.toJSON(...arguments);return e.string=this.string,e}canBeConsolidatedWith(e){return e&&this.hasSameConstructorAs(e)&&this.hasSameAttributesAsPiece(e)}consolidateWith(e){return new this.constructor(this.toString()+e.toString(),this.attributes)}splitAtOffset(e){let r,n;return e===0?(r=null,n=this):e===this.length?(r=this,n=null):(r=new this.constructor(this.string.slice(0,e),this.attributes),n=new this.constructor(this.string.slice(e),this.attributes)),[r,n]}toConsole(){let{string:e}=this;return e.length>15&&(e=e.slice(0,14)+"\u2026"),JSON.stringify(e.toString())}};Cg.registerType("string",IA);var M1=class extends Ag{static box(e){return e instanceof this?e:new this(e)}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.objects=e.slice(0),this.length=this.objects.length}indexOf(e){return this.objects.indexOf(e)}splice(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return new this.constructor(v8(this.objects,...r))}eachObject(e){return this.objects.map((r,n)=>e(r,n))}insertObjectAtIndex(e,r){return this.splice(r,0,e)}insertSplittableListAtIndex(e,r){return this.splice(r,0,...e.objects)}insertSplittableListAtPosition(e,r){let[n,i]=this.splitObjectAtPosition(r);return new this.constructor(n).insertSplittableListAtIndex(e,i)}editObjectAtIndex(e,r){return this.replaceObjectAtIndex(r(this.objects[e]),e)}replaceObjectAtIndex(e,r){return this.splice(r,1,e)}removeObjectAtIndex(e){return this.splice(e,1)}getObjectAtIndex(e){return this.objects[e]}getSplittableListInRange(e){let[r,n,i]=this.splitObjectsAtRange(e);return new this.constructor(r.slice(n,i+1))}selectSplittableList(e){let r=this.objects.filter(n=>e(n));return new this.constructor(r)}removeObjectsInRange(e){let[r,n,i]=this.splitObjectsAtRange(e);return new this.constructor(r).splice(n,i-n+1)}transformObjectsInRange(e,r){let[n,i,o]=this.splitObjectsAtRange(e),s=n.map((u,h)=>i<=h&&h<=o?r(u):u);return new this.constructor(s)}splitObjectsAtRange(e){let r,[n,i,o]=this.splitObjectAtPosition(sTt(e));return[n,r]=new this.constructor(n).splitObjectAtPosition(lTt(e)+o),[n,i,r-1]}getObjectAtPosition(e){let{index:r}=this.findIndexAndOffsetAtPosition(e);return this.objects[r]}splitObjectAtPosition(e){let r,n,{index:i,offset:o}=this.findIndexAndOffsetAtPosition(e),s=this.objects.slice(0);if(i!=null)if(o===0)r=i,n=0;else{let u=this.getObjectAtIndex(i),[h,y]=u.splitAtOffset(o);s.splice(i,1,h,y),r=i+1,n=h.getLength()-o}else r=s.length,n=0;return[s,r,n]}consolidate(){let e=[],r=this.objects[0];return this.objects.slice(1).forEach(n=>{var i,o;(i=(o=r).canBeConsolidatedWith)!==null&&i!==void 0&&i.call(o,n)?r=r.consolidateWith(n):(e.push(r),r=n)}),r&&e.push(r),new this.constructor(e)}consolidateFromIndexToIndex(e,r){let n=this.objects.slice(0).slice(e,r+1),i=new this.constructor(n).consolidate().toArray();return this.splice(e,n.length,...i)}findIndexAndOffsetAtPosition(e){let r,n=0;for(r=0;r<this.objects.length;r++){let i=n+this.objects[r].getLength();if(n<=e&&e<i)return{index:r,offset:e-n};n=i}return{index:null,offset:null}}findPositionAtIndexAndOffset(e,r){let n=0;for(let i=0;i<this.objects.length;i++){let o=this.objects[i];if(i<e)n+=o.getLength();else if(i===e){n+=r;break}}return n}getEndPosition(){return this.endPosition==null&&(this.endPosition=0,this.objects.forEach(e=>this.endPosition+=e.getLength())),this.endPosition}toString(){return this.objects.join("")}toArray(){return this.objects.slice(0)}toJSON(){return this.toArray()}isEqualTo(e){return super.isEqualTo(...arguments)||aTt(this.objects,e?.objects)}contentsForInspection(){return{objects:"[".concat(this.objects.map(e=>e.inspect()).join(", "),"]")}}},aTt=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if(t.length!==e.length)return!1;let r=!0;for(let n=0;n<t.length;n++){let i=t[n];r&&!i.isEqualTo(e[n])&&(r=!1)}return r},sTt=t=>t[0],lTt=t=>t[1],Xf=class extends Ag{static textForAttachmentWithAttributes(e,r){return new this([new P1(e,r)])}static textForStringWithAttributes(e,r){return new this([new IA(e,r)])}static fromJSON(e){return new this(Array.from(e).map(r=>Cg.fromJSON(r)))}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments);let r=e.filter(n=>!n.isEmpty());this.pieceList=new M1(r)}copy(){return this.copyWithPieceList(this.pieceList)}copyWithPieceList(e){return new this.constructor(e.consolidate().toArray())}copyUsingObjectMap(e){let r=this.getPieces().map(n=>e.find(n)||n);return new this.constructor(r)}appendText(e){return this.insertTextAtPosition(e,this.getLength())}insertTextAtPosition(e,r){return this.copyWithPieceList(this.pieceList.insertSplittableListAtPosition(e.pieceList,r))}removeTextAtRange(e){return this.copyWithPieceList(this.pieceList.removeObjectsInRange(e))}replaceTextAtRange(e,r){return this.removeTextAtRange(r).insertTextAtPosition(e,r[0])}moveTextFromRangeToPosition(e,r){if(e[0]<=r&&r<=e[1])return;let n=this.getTextAtRange(e),i=n.getLength();return e[0]<r&&(r-=i),this.removeTextAtRange(e).insertTextAtPosition(n,r)}addAttributeAtRange(e,r,n){let i={};return i[e]=r,this.addAttributesAtRange(i,n)}addAttributesAtRange(e,r){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(r,n=>n.copyWithAdditionalAttributes(e)))}removeAttributeAtRange(e,r){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(r,n=>n.copyWithoutAttribute(e)))}setAttributesAtRange(e,r){return this.copyWithPieceList(this.pieceList.transformObjectsInRange(r,n=>n.copyWithAttributes(e)))}getAttributesAtPosition(e){var r;return((r=this.pieceList.getObjectAtPosition(e))===null||r===void 0?void 0:r.getAttributes())||{}}getCommonAttributes(){let e=Array.from(this.pieceList.toArray()).map(r=>r.getAttributes());return Xd.fromCommonAttributesOfObjects(e).toObject()}getCommonAttributesAtRange(e){return this.getTextAtRange(e).getCommonAttributes()||{}}getExpandedRangeForAttributeAtOffset(e,r){let n,i=n=r,o=this.getLength();for(;i>0&&this.getCommonAttributesAtRange([i-1,n])[e];)i--;for(;n<o&&this.getCommonAttributesAtRange([r,n+1])[e];)n++;return[i,n]}getTextAtRange(e){return this.copyWithPieceList(this.pieceList.getSplittableListInRange(e))}getStringAtRange(e){return this.pieceList.getSplittableListInRange(e).toString()}getStringAtPosition(e){return this.getStringAtRange([e,e+1])}startsWithString(e){return this.getStringAtRange([0,e.length])===e}endsWithString(e){let r=this.getLength();return this.getStringAtRange([r-e.length,r])===e}getAttachmentPieces(){return this.pieceList.toArray().filter(e=>!!e.attachment)}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getAttachmentAndPositionById(e){let r=0;for(let i of this.pieceList.toArray()){var n;if(((n=i.attachment)===null||n===void 0?void 0:n.id)===e)return{attachment:i.attachment,position:r};r+=i.length}return{attachment:null,position:null}}getAttachmentById(e){let{attachment:r}=this.getAttachmentAndPositionById(e);return r}getRangeOfAttachment(e){let r=this.getAttachmentAndPositionById(e.id),n=r.position;if(e=r.attachment)return[n,n+1]}updateAttributesForAttachment(e,r){let n=this.getRangeOfAttachment(r);return n?this.addAttributesAtRange(e,n):this}getLength(){return this.pieceList.getEndPosition()}isEmpty(){return this.getLength()===0}isEqualTo(e){var r;return super.isEqualTo(e)||(e==null||(r=e.pieceList)===null||r===void 0?void 0:r.isEqualTo(this.pieceList))}isBlockBreak(){return this.getLength()===1&&this.pieceList.getObjectAtIndex(0).isBlockBreak()}eachPiece(e){return this.pieceList.eachObject(e)}getPieces(){return this.pieceList.toArray()}getPieceAtPosition(e){return this.pieceList.getObjectAtPosition(e)}contentsForInspection(){return{pieceList:this.pieceList.inspect()}}toSerializableText(){let e=this.pieceList.selectSplittableList(r=>r.isSerializable());return this.copyWithPieceList(e)}toString(){return this.pieceList.toString()}toJSON(){return this.pieceList.toJSON()}toConsole(){return JSON.stringify(this.pieceList.toArray().map(e=>JSON.parse(e.toConsole())))}getDirection(){return yEt(this.toString())}isRTL(){return this.getDirection()==="rtl"}},my=class t extends Ag{static fromJSON(e){return new this(Xf.fromJSON(e.text),e.attributes,e.htmlAttributes)}constructor(e,r,n){super(...arguments),this.text=uTt(e||new Xf),this.attributes=r||[],this.htmlAttributes=n||{}}isEmpty(){return this.text.isBlockBreak()}isEqualTo(e){return!!super.isEqualTo(e)||this.text.isEqualTo(e?.text)&&y0(this.attributes,e?.attributes)&&F1(this.htmlAttributes,e?.htmlAttributes)}copyWithText(e){return new t(e,this.attributes,this.htmlAttributes)}copyWithoutText(){return this.copyWithText(null)}copyWithAttributes(e){return new t(this.text,e,this.htmlAttributes)}copyWithoutAttributes(){return this.copyWithAttributes(null)}copyUsingObjectMap(e){let r=e.find(this.text);return r?this.copyWithText(r):this.copyWithText(this.text.copyUsingObjectMap(e))}addAttribute(e){let r=this.attributes.concat(QSe(e));return this.copyWithAttributes(r)}addHTMLAttribute(e,r){let n=Object.assign({},this.htmlAttributes,{[e]:r});return new t(this.text,this.attributes,n)}removeAttribute(e){let{listAttribute:r}=Hs(e),n=tEe(tEe(this.attributes,e),r);return this.copyWithAttributes(n)}removeLastAttribute(){return this.removeAttribute(this.getLastAttribute())}getLastAttribute(){return eEe(this.attributes)}getAttributes(){return this.attributes.slice(0)}getAttributeLevel(){return this.attributes.length}getAttributeAtLevel(e){return this.attributes[e-1]}hasAttribute(e){return this.attributes.includes(e)}hasAttributes(){return this.getAttributeLevel()>0}getLastNestableAttribute(){return eEe(this.getNestableAttributes())}getNestableAttributes(){return this.attributes.filter(e=>Hs(e).nestable)}getNestingLevel(){return this.getNestableAttributes().length}decreaseNestingLevel(){let e=this.getLastNestableAttribute();return e?this.removeAttribute(e):this}increaseNestingLevel(){let e=this.getLastNestableAttribute();if(e){let r=this.attributes.lastIndexOf(e),n=v8(this.attributes,r+1,0,...QSe(e));return this.copyWithAttributes(n)}return this}getListItemAttributes(){return this.attributes.filter(e=>Hs(e).listAttribute)}isListItem(){var e;return(e=Hs(this.getLastAttribute()))===null||e===void 0?void 0:e.listAttribute}isTerminalBlock(){var e;return(e=Hs(this.getLastAttribute()))===null||e===void 0?void 0:e.terminal}breaksOnReturn(){var e;return(e=Hs(this.getLastAttribute()))===null||e===void 0?void 0:e.breakOnReturn}findLineBreakInDirectionFromPosition(e,r){let n=this.toString(),i;switch(e){case"forward":i=n.indexOf(`
`,r);break;case"backward":i=n.slice(0,r).lastIndexOf(`
`)}if(i!==-1)return i}contentsForInspection(){return{text:this.text.inspect(),attributes:this.attributes}}toString(){return this.text.toString()}toJSON(){return{text:this.text,attributes:this.attributes,htmlAttributes:this.htmlAttributes}}getDirection(){return this.text.getDirection()}isRTL(){return this.text.isRTL()}getLength(){return this.text.getLength()}canBeConsolidatedWith(e){return!this.hasAttributes()&&!e.hasAttributes()&&this.getDirection()===e.getDirection()}consolidateWith(e){let r=Xf.textForStringWithAttributes(`
`),n=this.getTextWithoutBlockBreak().appendText(r);return this.copyWithText(n.appendText(e.text))}splitAtOffset(e){let r,n;return e===0?(r=null,n=this):e===this.getLength()?(r=this,n=null):(r=this.copyWithText(this.text.getTextAtRange([0,e])),n=this.copyWithText(this.text.getTextAtRange([e,this.getLength()]))),[r,n]}getBlockBreakPosition(){return this.text.getLength()-1}getTextWithoutBlockBreak(){return DEe(this.text)?this.text.getTextAtRange([0,this.getBlockBreakPosition()]):this.text.copy()}canBeGrouped(e){return this.attributes[e]}canBeGroupedWith(e,r){let n=e.getAttributes(),i=n[r],o=this.attributes[r];return o===i&&!(Hs(o).group===!1&&!(()=>{if(!cM){cM=[];for(let s in yc){let{listAttribute:u}=yc[s];u!=null&&cM.push(u)}}return cM})().includes(n[r+1]))&&(this.getDirection()===e.getDirection()||e.isEmpty())}},uTt=function(t){return t=cTt(t),t=hTt(t)},cTt=function(t){let e=!1,r=t.getPieces(),n=r.slice(0,r.length-1),i=r[r.length-1];return i?(n=n.map(o=>o.isBlockBreak()?(e=!0,dTt(o)):o),e?new Xf([...n,i]):t):t},fTt=Xf.textForStringWithAttributes(`
`,{blockBreak:!0}),hTt=function(t){return DEe(t)?t:t.appendText(fTt)},DEe=function(t){let e=t.getLength();return e===0?!1:t.getTextAtRange([e-1,e]).isBlockBreak()},dTt=t=>t.copyWithoutAttribute("blockBreak"),QSe=function(t){let{listAttribute:e}=Hs(t);return e?[e,t]:[t]},eEe=t=>t.slice(-1)[0],tEe=function(t,e){let r=t.lastIndexOf(e);return r===-1?t:v8(t,r,1)},rf=class extends Ag{static fromJSON(e){return new this(Array.from(e).map(r=>my.fromJSON(r)))}static fromString(e,r){let n=Xf.textForStringWithAttributes(e,r);return new this([new my(n)])}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),e.length===0&&(e=[new my]),this.blockList=M1.box(e)}isEmpty(){let e=this.getBlockAtIndex(0);return this.blockList.length===1&&e.isEmpty()&&!e.hasAttributes()}copy(){let e=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).consolidateBlocks?this.blockList.consolidate().toArray():this.blockList.toArray();return new this.constructor(e)}copyUsingObjectsFromDocument(e){let r=new t8(e.getObjects());return this.copyUsingObjectMap(r)}copyUsingObjectMap(e){let r=this.getBlocks().map(n=>e.find(n)||n.copyUsingObjectMap(e));return new this.constructor(r)}copyWithBaseBlockAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=this.getBlocks().map(n=>{let i=e.concat(n.getAttributes());return n.copyWithAttributes(i)});return new this.constructor(r)}replaceBlock(e,r){let n=this.blockList.indexOf(e);return n===-1?this:new this.constructor(this.blockList.replaceObjectAtIndex(r,n))}insertDocumentAtRange(e,r){let{blockList:n}=e;r=$o(r);let[i]=r,{index:o,offset:s}=this.locationFromPosition(i),u=this,h=this.getBlockAtPosition(i);return Tg(r)&&h.isEmpty()&&!h.hasAttributes()?u=new this.constructor(u.blockList.removeObjectAtIndex(o)):h.getBlockBreakPosition()===s&&i++,u=u.removeTextAtRange(r),new this.constructor(u.blockList.insertSplittableListAtPosition(n,i))}mergeDocumentAtRange(e,r){let n,i;r=$o(r);let[o]=r,s=this.locationFromPosition(o),u=this.getBlockAtIndex(s.index).getAttributes(),h=e.getBaseBlockAttributes(),y=u.slice(-h.length);if(y0(h,y)){let I=u.slice(0,-h.length);n=e.copyWithBaseBlockAttributes(I)}else n=e.copy({consolidateBlocks:!0}).copyWithBaseBlockAttributes(u);let w=n.getBlockCount(),T=n.getBlockAtIndex(0);if(y0(u,T.getAttributes())){let I=T.getTextWithoutBlockBreak();if(i=this.insertTextAtRange(I,r),w>1){n=new this.constructor(n.getBlocks().slice(1));let P=o+I.getLength();i=i.insertDocumentAtRange(n,P)}}else i=this.insertDocumentAtRange(n,r);return i}insertTextAtRange(e,r){r=$o(r);let[n]=r,{index:i,offset:o}=this.locationFromPosition(n),s=this.removeTextAtRange(r);return new this.constructor(s.blockList.editObjectAtIndex(i,u=>u.copyWithText(u.text.insertTextAtPosition(e,o))))}removeTextAtRange(e){let r;e=$o(e);let[n,i]=e;if(Tg(e))return this;let[o,s]=Array.from(this.locationRangeFromRange(e)),u=o.index,h=o.offset,y=this.getBlockAtIndex(u),w=s.index,T=s.offset,I=this.getBlockAtIndex(w);if(i-n==1&&y.getBlockBreakPosition()===h&&I.getBlockBreakPosition()!==T&&I.text.getStringAtPosition(T)===`
`)r=this.blockList.editObjectAtIndex(w,P=>P.copyWithText(P.text.removeTextAtRange([T,T+1])));else{let P,L=y.text.getTextAtRange([0,h]),R=I.text.getTextAtRange([T,I.getLength()]),W=L.appendText(R);P=u!==w&&h===0&&y.getAttributeLevel()>=I.getAttributeLevel()?I.copyWithText(W):y.copyWithText(W);let G=w+1-u;r=this.blockList.splice(u,G,P)}return new this.constructor(r)}moveTextFromRangeToPosition(e,r){let n;e=$o(e);let[i,o]=e;if(i<=r&&r<=o)return this;let s=this.getDocumentAtRange(e),u=this.removeTextAtRange(e),h=i<r;h&&(r-=s.getLength());let[y,...w]=s.getBlocks();return w.length===0?(n=y.getTextWithoutBlockBreak(),h&&(r+=1)):n=y.text,u=u.insertTextAtRange(n,r),w.length===0?u:(s=new this.constructor(w),r+=n.getLength(),u.insertDocumentAtRange(s,r))}addAttributeAtRange(e,r,n){let{blockList:i}=this;return this.eachBlockAtRange(n,(o,s,u)=>i=i.editObjectAtIndex(u,function(){return Hs(e)?o.addAttribute(e,r):s[0]===s[1]?o:o.copyWithText(o.text.addAttributeAtRange(e,r,s))})),new this.constructor(i)}addAttribute(e,r){let{blockList:n}=this;return this.eachBlock((i,o)=>n=n.editObjectAtIndex(o,()=>i.addAttribute(e,r))),new this.constructor(n)}removeAttributeAtRange(e,r){let{blockList:n}=this;return this.eachBlockAtRange(r,function(i,o,s){Hs(e)?n=n.editObjectAtIndex(s,()=>i.removeAttribute(e)):o[0]!==o[1]&&(n=n.editObjectAtIndex(s,()=>i.copyWithText(i.text.removeAttributeAtRange(e,o))))}),new this.constructor(n)}updateAttributesForAttachment(e,r){let n=this.getRangeOfAttachment(r),[i]=Array.from(n),{index:o}=this.locationFromPosition(i),s=this.getTextAtIndex(o);return new this.constructor(this.blockList.editObjectAtIndex(o,u=>u.copyWithText(s.updateAttributesForAttachment(e,r))))}removeAttributeForAttachment(e,r){let n=this.getRangeOfAttachment(r);return this.removeAttributeAtRange(e,n)}setHTMLAttributeAtPosition(e,r,n){let i=this.getBlockAtPosition(e),o=i.addHTMLAttribute(r,n);return this.replaceBlock(i,o)}insertBlockBreakAtRange(e){let r;e=$o(e);let[n]=e,{offset:i}=this.locationFromPosition(n),o=this.removeTextAtRange(e);return i===0&&(r=[new my]),new this.constructor(o.blockList.insertSplittableListAtPosition(new M1(r),n))}applyBlockAttributeAtRange(e,r,n){let i=this.expandRangeToLineBreaksAndSplitBlocks(n),o=i.document;n=i.range;let s=Hs(e);if(s.listAttribute){o=o.removeLastListAttributeAtRange(n,{exceptAttributeName:e});let u=o.convertLineBreaksToBlockBreaksInRange(n);o=u.document,n=u.range}else o=s.exclusive?o.removeBlockAttributesAtRange(n):s.terminal?o.removeLastTerminalAttributeAtRange(n):o.consolidateBlocksAtRange(n);return o.addAttributeAtRange(e,r,n)}removeLastListAttributeAtRange(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{blockList:n}=this;return this.eachBlockAtRange(e,function(i,o,s){let u=i.getLastAttribute();u&&Hs(u).listAttribute&&u!==r.exceptAttributeName&&(n=n.editObjectAtIndex(s,()=>i.removeAttribute(u)))}),new this.constructor(n)}removeLastTerminalAttributeAtRange(e){let{blockList:r}=this;return this.eachBlockAtRange(e,function(n,i,o){let s=n.getLastAttribute();s&&Hs(s).terminal&&(r=r.editObjectAtIndex(o,()=>n.removeAttribute(s)))}),new this.constructor(r)}removeBlockAttributesAtRange(e){let{blockList:r}=this;return this.eachBlockAtRange(e,function(n,i,o){n.hasAttributes()&&(r=r.editObjectAtIndex(o,()=>n.copyWithoutAttributes()))}),new this.constructor(r)}expandRangeToLineBreaksAndSplitBlocks(e){let r;e=$o(e);let[n,i]=e,o=this.locationFromPosition(n),s=this.locationFromPosition(i),u=this,h=u.getBlockAtIndex(o.index);if(o.offset=h.findLineBreakInDirectionFromPosition("backward",o.offset),o.offset!=null&&(r=u.positionFromLocation(o),u=u.insertBlockBreakAtRange([r,r+1]),s.index+=1,s.offset-=u.getBlockAtIndex(o.index).getLength(),o.index+=1),o.offset=0,s.offset===0&&s.index>o.index)s.index-=1,s.offset=u.getBlockAtIndex(s.index).getBlockBreakPosition();else{let y=u.getBlockAtIndex(s.index);y.text.getStringAtRange([s.offset-1,s.offset])===`
`?s.offset-=1:s.offset=y.findLineBreakInDirectionFromPosition("forward",s.offset),s.offset!==y.getBlockBreakPosition()&&(r=u.positionFromLocation(s),u=u.insertBlockBreakAtRange([r,r+1]))}return n=u.positionFromLocation(o),i=u.positionFromLocation(s),{document:u,range:e=$o([n,i])}}convertLineBreaksToBlockBreaksInRange(e){e=$o(e);let[r]=e,n=this.getStringAtRange(e).slice(0,-1),i=this;return n.replace(/.*?\n/g,function(o){r+=o.length,i=i.insertBlockBreakAtRange([r-1,r])}),{document:i,range:e}}consolidateBlocksAtRange(e){e=$o(e);let[r,n]=e,i=this.locationFromPosition(r).index,o=this.locationFromPosition(n).index;return new this.constructor(this.blockList.consolidateFromIndexToIndex(i,o))}getDocumentAtRange(e){e=$o(e);let r=this.blockList.getSplittableListInRange(e).toArray();return new this.constructor(r)}getStringAtRange(e){let r,n=e=$o(e);return n[n.length-1]!==this.getLength()&&(r=-1),this.getDocumentAtRange(e).toString().slice(0,r)}getBlockAtIndex(e){return this.blockList.getObjectAtIndex(e)}getBlockAtPosition(e){let{index:r}=this.locationFromPosition(e);return this.getBlockAtIndex(r)}getTextAtIndex(e){var r;return(r=this.getBlockAtIndex(e))===null||r===void 0?void 0:r.text}getTextAtPosition(e){let{index:r}=this.locationFromPosition(e);return this.getTextAtIndex(r)}getPieceAtPosition(e){let{index:r,offset:n}=this.locationFromPosition(e);return this.getTextAtIndex(r).getPieceAtPosition(n)}getCharacterAtPosition(e){let{index:r,offset:n}=this.locationFromPosition(e);return this.getTextAtIndex(r).getStringAtRange([n,n+1])}getLength(){return this.blockList.getEndPosition()}getBlocks(){return this.blockList.toArray()}getBlockCount(){return this.blockList.length}getEditCount(){return this.editCount}eachBlock(e){return this.blockList.eachObject(e)}eachBlockAtRange(e,r){let n,i;e=$o(e);let[o,s]=e,u=this.locationFromPosition(o),h=this.locationFromPosition(s);if(u.index===h.index)return n=this.getBlockAtIndex(u.index),i=[u.offset,h.offset],r(n,i,u.index);for(let y=u.index;y<=h.index;y++)if(n=this.getBlockAtIndex(y),n){switch(y){case u.index:i=[u.offset,n.text.getLength()];break;case h.index:i=[0,h.offset];break;default:i=[0,n.text.getLength()]}r(n,i,y)}}getCommonAttributesAtRange(e){e=$o(e);let[r]=e;if(Tg(e))return this.getCommonAttributesAtPosition(r);{let n=[],i=[];return this.eachBlockAtRange(e,function(o,s){if(s[0]!==s[1])return n.push(o.text.getCommonAttributesAtRange(s)),i.push(rEe(o))}),Xd.fromCommonAttributesOfObjects(n).merge(Xd.fromCommonAttributesOfObjects(i)).toObject()}}getCommonAttributesAtPosition(e){let r,n,{index:i,offset:o}=this.locationFromPosition(e),s=this.getBlockAtIndex(i);if(!s)return{};let u=rEe(s),h=s.text.getAttributesAtPosition(o),y=s.text.getAttributesAtPosition(o-1),w=Object.keys(g0).filter(T=>g0[T].inheritable);for(r in y)n=y[r],(n===h[r]||w.includes(r))&&(u[r]=n);return u}getRangeOfCommonAttributeAtPosition(e,r){let{index:n,offset:i}=this.locationFromPosition(r),o=this.getTextAtIndex(n),[s,u]=Array.from(o.getExpandedRangeForAttributeAtOffset(e,i)),h=this.positionFromLocation({index:n,offset:s}),y=this.positionFromLocation({index:n,offset:u});return $o([h,y])}getBaseBlockAttributes(){let e=this.getBlockAtIndex(0).getAttributes();for(let r=1;r<this.getBlockCount();r++){let n=this.getBlockAtIndex(r).getAttributes(),i=Math.min(e.length,n.length);e=(()=>{let o=[];for(let s=0;s<i&&n[s]===e[s];s++)o.push(n[s]);return o})()}return e}getAttachmentById(e){for(let r of this.getAttachments())if(r.id===e)return r}getAttachmentPieces(){let e=[];return this.blockList.eachObject(r=>{let{text:n}=r;return e=e.concat(n.getAttachmentPieces())}),e}getAttachments(){return this.getAttachmentPieces().map(e=>e.attachment)}getRangeOfAttachment(e){let r=0,n=this.blockList.toArray();for(let i=0;i<n.length;i++){let{text:o}=n[i],s=o.getRangeOfAttachment(e);if(s)return $o([r+s[0],r+s[1]]);r+=o.getLength()}}getLocationRangeOfAttachment(e){let r=this.getRangeOfAttachment(e);return this.locationRangeFromRange(r)}getAttachmentPieceForAttachment(e){for(let r of this.getAttachmentPieces())if(r.attachment===e)return r}findRangesForBlockAttribute(e){let r=0,n=[];return this.getBlocks().forEach(i=>{let o=i.getLength();i.hasAttribute(e)&&n.push([r,r+o]),r+=o}),n}findRangesForTextAttribute(e){let{withValue:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=0,i=[],o=[];return this.getPieces().forEach(s=>{let u=s.getLength();(function(h){return r?h.getAttribute(e)===r:h.hasAttribute(e)})(s)&&(i[1]===n?i[1]=n+u:o.push(i=[n,n+u])),n+=u}),o}locationFromPosition(e){let r=this.blockList.findIndexAndOffsetAtPosition(Math.max(0,e));if(r.index!=null)return r;{let n=this.getBlocks();return{index:n.length-1,offset:n[n.length-1].getLength()}}}positionFromLocation(e){return this.blockList.findPositionAtIndexAndOffset(e.index,e.offset)}locationRangeFromPosition(e){return $o(this.locationFromPosition(e))}locationRangeFromRange(e){if(!(e=$o(e)))return;let[r,n]=Array.from(e),i=this.locationFromPosition(r),o=this.locationFromPosition(n);return $o([i,o])}rangeFromLocationRange(e){let r;e=$o(e);let n=this.positionFromLocation(e[0]);return Tg(e)||(r=this.positionFromLocation(e[1])),$o([n,r])}isEqualTo(e){return this.blockList.isEqualTo(e?.blockList)}getTexts(){return this.getBlocks().map(e=>e.text)}getPieces(){let e=[];return Array.from(this.getTexts()).forEach(r=>{e.push(...Array.from(r.getPieces()||[]))}),e}getObjects(){return this.getBlocks().concat(this.getTexts()).concat(this.getPieces())}toSerializableDocument(){let e=[];return this.blockList.eachObject(r=>e.push(r.copyWithText(r.text.toSerializableText()))),new this.constructor(e)}toString(){return this.blockList.toString()}toJSON(){return this.blockList.toJSON()}toConsole(){return JSON.stringify(this.blockList.toArray().map(e=>JSON.parse(e.text.toConsole())))}},rEe=function(t){let e={},r=t.getLastAttribute();return r&&(e[r]=!0),e},NV=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return{string:t=xA(t),attributes:e,type:"string"}},nEe=(t,e)=>{try{return JSON.parse(t.getAttribute("data-trix-".concat(e)))}catch{return{}}},_0=class extends Ms{static parse(e,r){let n=new this(e,r);return n.parse(),n}constructor(e){let{referenceElement:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(...arguments),this.html=e,this.referenceElement=r,this.blocks=[],this.blockElements=[],this.processedElements=[]}getDocument(){return rf.fromJSON(this.blocks)}parse(){try{this.createHiddenContainer(),I1.setHTML(this.containerElement,this.html);let e=bM(this.containerElement,{usingFilter:mTt});for(;e.nextNode();)this.processNode(e.currentNode);return this.translateBlockElementMarginsToNewlines()}finally{this.removeHiddenContainer()}}createHiddenContainer(){return this.referenceElement?(this.containerElement=this.referenceElement.cloneNode(!1),this.containerElement.removeAttribute("id"),this.containerElement.setAttribute("data-trix-internal",""),this.containerElement.style.display="none",this.referenceElement.parentNode.insertBefore(this.containerElement,this.referenceElement.nextSibling)):(this.containerElement=Oi({tagName:"div",style:{display:"none"}}),document.body.appendChild(this.containerElement))}removeHiddenContainer(){return vy(this.containerElement)}processNode(e){switch(e.nodeType){case Node.TEXT_NODE:if(!this.isInsignificantTextNode(e))return this.appendBlockForTextNode(e),this.processTextNode(e);break;case Node.ELEMENT_NODE:return this.appendBlockForElement(e),this.processElement(e)}}appendBlockForTextNode(e){let r=e.parentNode;if(r===this.currentBlockElement&&this.isBlockElement(e.previousSibling))return this.appendStringWithAttributes(`
`);if(r===this.containerElement||this.isBlockElement(r)){var n;let i=this.getBlockAttributes(r),o=this.getBlockHTMLAttributes(r);y0(i,(n=this.currentBlock)===null||n===void 0?void 0:n.attributes)||(this.currentBlock=this.appendBlockForAttributesWithElement(i,r,o),this.currentBlockElement=r)}}appendBlockForElement(e){let r=this.isBlockElement(e),n=f0(this.currentBlockElement,e);if(r&&!this.isBlockElement(e.firstChild)){if(!this.isInsignificantTextNode(e.firstChild)||!this.isBlockElement(e.firstElementChild)){let i=this.getBlockAttributes(e),o=this.getBlockHTMLAttributes(e);if(e.firstChild){if(n&&y0(i,this.currentBlock.attributes))return this.appendStringWithAttributes(`
`);this.currentBlock=this.appendBlockForAttributesWithElement(i,e,o),this.currentBlockElement=e}}}else if(this.currentBlockElement&&!n&&!r){let i=this.findParentBlockElement(e);if(i)return this.appendBlockForElement(i);this.currentBlock=this.appendEmptyBlock(),this.currentBlockElement=null}}findParentBlockElement(e){let{parentElement:r}=e;for(;r&&r!==this.containerElement;){if(this.isBlockElement(r)&&this.blockElements.includes(r))return r;r=r.parentElement}return null}processTextNode(e){let r=e.data;var n;return iEe(e.parentNode)||(r=_8(r),OEe((n=e.previousSibling)===null||n===void 0?void 0:n.textContent)&&(r=gTt(r))),this.appendStringWithAttributes(r,this.getTextAttributes(e.parentNode))}processElement(e){let r;if(d0(e)){if(r=nEe(e,"attachment"),Object.keys(r).length){let n=this.getTextAttributes(e);this.appendAttachmentWithAttributes(r,n),e.innerHTML=""}return this.processedElements.push(e)}switch(vc(e)){case"br":return this.isExtraBR(e)||this.isBlockElement(e.nextSibling)||this.appendStringWithAttributes(`
`,this.getTextAttributes(e)),this.processedElements.push(e);case"img":r={url:e.getAttribute("src"),contentType:"image"};let n=(i=>{let o=i.getAttribute("width"),s=i.getAttribute("height"),u={};return o&&(u.width=parseInt(o,10)),s&&(u.height=parseInt(s,10)),u})(e);for(let i in n){let o=n[i];r[i]=o}return this.appendAttachmentWithAttributes(r,this.getTextAttributes(e)),this.processedElements.push(e);case"tr":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(gM.tableRowSeparator);break;case"td":if(this.needsTableSeparator(e))return this.appendStringWithAttributes(gM.tableCellSeparator)}}appendBlockForAttributesWithElement(e,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.blockElements.push(r);let i=function(){return{text:[],attributes:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},htmlAttributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}}}(e,n);return this.blocks.push(i),i}appendEmptyBlock(){return this.appendBlockForAttributesWithElement([],null)}appendStringWithAttributes(e,r){return this.appendPiece(NV(e,r))}appendAttachmentWithAttributes(e,r){return this.appendPiece(function(n){return{attachment:n,attributes:arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},type:"attachment"}}(e,r))}appendPiece(e){return this.blocks.length===0&&this.appendEmptyBlock(),this.blocks[this.blocks.length-1].text.push(e)}appendStringToTextAtIndex(e,r){let{text:n}=this.blocks[r],i=n[n.length-1];if(i?.type!=="string")return n.push(NV(e));i.string+=e}prependStringToTextAtIndex(e,r){let{text:n}=this.blocks[r],i=n[0];if(i?.type!=="string")return n.unshift(NV(e));i.string=e+i.string}getTextAttributes(e){let r,n={};for(let i in g0){let o=g0[i];if(o.tagName&&gy(e,{matchingSelector:o.tagName,untilNode:this.containerElement}))n[i]=!0;else if(o.parser){if(r=o.parser(e),r){let s=!1;for(let u of this.findBlockElementAncestors(e))if(o.parser(u)===r){s=!0;break}s||(n[i]=r)}}else o.styleProperty&&(r=e.style[o.styleProperty],r&&(n[i]=r))}if(d0(e)){let i=nEe(e,"attributes");for(let o in i)r=i[o],n[o]=r}return n}getBlockAttributes(e){let r=[];for(;e&&e!==this.containerElement;){for(let i in yc){let o=yc[i];var n;o.parse!==!1&&vc(e)===o.tagName&&((n=o.test)!==null&&n!==void 0&&n.call(o,e)||!o.test)&&(r.push(i),o.listAttribute&&r.push(o.listAttribute))}e=e.parentNode}return r.reverse()}getBlockHTMLAttributes(e){let r={},n=Object.values(yc).find(i=>i.tagName===vc(e));return(n?.htmlAttributes||[]).forEach(i=>{e.hasAttribute(i)&&(r[i]=e.getAttribute(i))}),r}findBlockElementAncestors(e){let r=[];for(;e&&e!==this.containerElement;){let n=vc(e);SA().includes(n)&&r.push(e),e=e.parentNode}return r}isBlockElement(e){if(e?.nodeType===Node.ELEMENT_NODE&&!d0(e)&&!gy(e,{matchingSelector:"td",untilNode:this.containerElement}))return SA().includes(vc(e))||window.getComputedStyle(e).display==="block"}isInsignificantTextNode(e){if(e?.nodeType!==Node.TEXT_NODE||!vTt(e.data))return;let{parentNode:r,previousSibling:n,nextSibling:i}=e;return pTt(r.previousSibling)&&!this.isBlockElement(r.previousSibling)||iEe(r)?void 0:!n||this.isBlockElement(n)||!i||this.isBlockElement(i)}isExtraBR(e){return vc(e)==="br"&&this.isBlockElement(e.parentNode)&&e.parentNode.lastChild===e}needsTableSeparator(e){if(gM.removeBlankTableCells){var r;let n=(r=e.previousSibling)===null||r===void 0?void 0:r.textContent;return n&&/\S/.test(n)}return e.previousSibling}translateBlockElementMarginsToNewlines(){let e=this.getMarginOfDefaultBlockElement();for(let r=0;r<this.blocks.length;r++){let n=this.getMarginOfBlockElementAtIndex(r);n&&(n.top>2*e.top&&this.prependStringToTextAtIndex(`
`,r),n.bottom>2*e.bottom&&this.appendStringToTextAtIndex(`
`,r))}}getMarginOfBlockElementAtIndex(e){let r=this.blockElements[e];if(r&&r.textContent&&!SA().includes(vc(r))&&!this.processedElements.includes(r))return oEe(r)}getMarginOfDefaultBlockElement(){let e=Oi(yc.default.tagName);return this.containerElement.appendChild(e),oEe(e)}},iEe=function(t){let{whiteSpace:e}=window.getComputedStyle(t);return["pre","pre-wrap","pre-line"].includes(e)},pTt=t=>t&&!OEe(t.textContent),oEe=function(t){let e=window.getComputedStyle(t);if(e.display==="block")return{top:parseInt(e.marginTop),bottom:parseInt(e.marginBottom)}},mTt=function(t){return vc(t)==="style"?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},gTt=t=>t.replace(new RegExp("^".concat(b8.source,"+")),""),vTt=t=>new RegExp("^".concat(b8.source,"*$")).test(t),OEe=t=>/\s$/.test(t),yTt=["contenteditable","data-trix-id","data-trix-store-key","data-trix-mutable","data-trix-placeholder","tabindex"],a8="data-trix-serialized-attributes",bTt="[".concat(a8,"]"),_Tt=new RegExp("<!--block-->","g"),xTt={"application/json":function(t){let e;if(t instanceof rf)e=t;else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=_0.parse(t.innerHTML).getDocument()}return e.toSerializableDocument().toJSONString()},"text/html":function(t){let e;if(t instanceof rf)e=D1.render(t);else{if(!(t instanceof HTMLElement))throw new Error("unserializable object");e=t.cloneNode(!0)}return Array.from(e.querySelectorAll("[data-trix-serialize=false]")).forEach(r=>{vy(r)}),yTt.forEach(r=>{Array.from(e.querySelectorAll("[".concat(r,"]"))).forEach(n=>{n.removeAttribute(r)})}),Array.from(e.querySelectorAll(bTt)).forEach(r=>{try{let n=JSON.parse(r.getAttribute(a8));r.removeAttribute(a8);for(let i in n){let o=n[i];r.setAttribute(i,o)}}catch{}}),e.innerHTML.replace(_Tt,"")}},wTt=Object.freeze({__proto__:null}),bs=class extends Ms{constructor(e,r){super(...arguments),this.attachmentManager=e,this.attachment=r,this.id=this.attachment.id,this.file=this.attachment.file}remove(){return this.attachmentManager.requestRemovalOfAttachment(this.attachment)}};bs.proxyMethod("attachment.getAttribute"),bs.proxyMethod("attachment.hasAttribute"),bs.proxyMethod("attachment.setAttribute"),bs.proxyMethod("attachment.getAttributes"),bs.proxyMethod("attachment.setAttributes"),bs.proxyMethod("attachment.isPending"),bs.proxyMethod("attachment.isPreviewable"),bs.proxyMethod("attachment.getURL"),bs.proxyMethod("attachment.getHref"),bs.proxyMethod("attachment.getFilename"),bs.proxyMethod("attachment.getFilesize"),bs.proxyMethod("attachment.getFormattedFilesize"),bs.proxyMethod("attachment.getExtension"),bs.proxyMethod("attachment.getContentType"),bs.proxyMethod("attachment.getFile"),bs.proxyMethod("attachment.setFile"),bs.proxyMethod("attachment.releaseFile"),bs.proxyMethod("attachment.getUploadProgress"),bs.proxyMethod("attachment.setUploadProgress");var CM=class extends Ms{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];super(...arguments),this.managedAttachments={},Array.from(e).forEach(r=>{this.manageAttachment(r)})}getAttachments(){let e=[];for(let r in this.managedAttachments){let n=this.managedAttachments[r];e.push(n)}return e}manageAttachment(e){return this.managedAttachments[e.id]||(this.managedAttachments[e.id]=new bs(this,e)),this.managedAttachments[e.id]}attachmentIsManaged(e){return e.id in this.managedAttachments}requestRemovalOfAttachment(e){var r,n;if(this.attachmentIsManaged(e))return(r=this.delegate)===null||r===void 0||(n=r.attachmentManagerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(r,e)}unmanageAttachment(e){let r=this.managedAttachments[e.id];return delete this.managedAttachments[e.id],r}},IM=class{constructor(e){this.composition=e,this.document=this.composition.document;let r=this.composition.getSelectedRange();this.startPosition=r[0],this.endPosition=r[1],this.startLocation=this.document.locationFromPosition(this.startPosition),this.endLocation=this.document.locationFromPosition(this.endPosition),this.block=this.document.getBlockAtIndex(this.endLocation.index),this.breaksOnReturn=this.block.breaksOnReturn(),this.previousCharacter=this.block.text.getStringAtPosition(this.endLocation.offset-1),this.nextCharacter=this.block.text.getStringAtPosition(this.endLocation.offset)}shouldInsertBlockBreak(){return this.block.hasAttributes()&&this.block.isListItem()&&!this.block.isEmpty()?this.startLocation.offset!==0:this.breaksOnReturn&&this.nextCharacter!==`
`}shouldBreakFormattedBlock(){return this.block.hasAttributes()&&!this.block.isListItem()&&(this.breaksOnReturn&&this.nextCharacter===`
`||this.previousCharacter===`
`)}shouldDecreaseListLevel(){return this.block.hasAttributes()&&this.block.isListItem()&&this.block.isEmpty()}shouldPrependListItem(){return this.block.isListItem()&&this.startLocation.offset===0&&!this.block.isEmpty()}shouldRemoveLastBlockAttribute(){return this.block.hasAttributes()&&!this.block.isListItem()&&this.block.isEmpty()}},im=class extends Ms{constructor(){super(...arguments),this.document=new rf,this.attachments=[],this.currentAttributes={},this.revision=0}setDocument(e){var r,n;if(!e.isEqualTo(this.document))return this.document=e,this.refreshAttachments(),this.revision++,(r=this.delegate)===null||r===void 0||(n=r.compositionDidChangeDocument)===null||n===void 0?void 0:n.call(r,e)}getSnapshot(){return{document:this.document,selectedRange:this.getSelectedRange()}}loadSnapshot(e){var r,n,i,o;let{document:s,selectedRange:u}=e;return(r=this.delegate)===null||r===void 0||(n=r.compositionWillLoadSnapshot)===null||n===void 0||n.call(r),this.setDocument(s??new rf),this.setSelection(u??[0,0]),(i=this.delegate)===null||i===void 0||(o=i.compositionDidLoadSnapshot)===null||o===void 0?void 0:o.call(i)}insertText(e){let{updatePosition:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{updatePosition:!0},n=this.getSelectedRange();this.setDocument(this.document.insertTextAtRange(e,n));let i=n[0],o=i+e.getLength();return r&&this.setSelection(o),this.notifyDelegateOfInsertionAtRange([i,o])}insertBlock(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new my,r=new rf([e]);return this.insertDocument(r)}insertDocument(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new rf,r=this.getSelectedRange();this.setDocument(this.document.insertDocumentAtRange(e,r));let n=r[0],i=n+e.getLength();return this.setSelection(i),this.notifyDelegateOfInsertionAtRange([n,i])}insertString(e,r){let n=this.getCurrentTextAttributes(),i=Xf.textForStringWithAttributes(e,n);return this.insertText(i,r)}insertBlockBreak(){let e=this.getSelectedRange();this.setDocument(this.document.insertBlockBreakAtRange(e));let r=e[0],n=r+1;return this.setSelection(n),this.notifyDelegateOfInsertionAtRange([r,n])}insertLineBreak(){let e=new IM(this);if(e.shouldDecreaseListLevel())return this.decreaseListLevel(),this.setSelection(e.startPosition);if(e.shouldPrependListItem()){let r=new rf([e.block.copyWithoutText()]);return this.insertDocument(r)}return e.shouldInsertBlockBreak()?this.insertBlockBreak():e.shouldRemoveLastBlockAttribute()?this.removeLastBlockAttribute():e.shouldBreakFormattedBlock()?this.breakFormattedBlock(e):this.insertString(`
`)}insertHTML(e){let r=_0.parse(e).getDocument(),n=this.getSelectedRange();this.setDocument(this.document.mergeDocumentAtRange(r,n));let i=n[0],o=i+r.getLength()-1;return this.setSelection(o),this.notifyDelegateOfInsertionAtRange([i,o])}replaceHTML(e){let r=_0.parse(e).getDocument().copyUsingObjectsFromDocument(this.document),n=this.getLocationRange({strict:!1}),i=this.document.rangeFromLocationRange(n);return this.setDocument(r),this.setSelection(i)}insertFile(e){return this.insertFiles([e])}insertFiles(e){let r=[];return Array.from(e).forEach(n=>{var i;if((i=this.delegate)!==null&&i!==void 0&&i.compositionShouldAcceptFile(n)){let o=O1.attachmentForFile(n);r.push(o)}}),this.insertAttachments(r)}insertAttachment(e){return this.insertAttachments([e])}insertAttachments(e){let r=new Xf;return Array.from(e).forEach(n=>{var i;let o=n.getType(),s=(i=d8[o])===null||i===void 0?void 0:i.presentation,u=this.getCurrentTextAttributes();s&&(u.presentation=s);let h=Xf.textForAttachmentWithAttributes(n,u);r=r.appendText(h)}),this.insertText(r)}shouldManageDeletingInDirection(e){let r=this.getLocationRange();if(Tg(r)){if(e==="backward"&&r[0].offset===0||this.shouldManageMovingCursorInDirection(e))return!0}else if(r[0].index!==r[1].index)return!0;return!1}deleteInDirection(e){let r,n,i,{length:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getLocationRange(),u=this.getSelectedRange(),h=Tg(u);if(h?n=e==="backward"&&s[0].offset===0:i=s[0].index!==s[1].index,n&&this.canDecreaseBlockAttributeLevel()){let y=this.getBlock();if(y.isListItem()?this.decreaseListLevel():this.decreaseBlockAttributeLevel(),this.setSelection(u[0]),y.isEmpty())return!1}return h&&(u=this.getExpandedRangeInDirection(e,{length:o}),e==="backward"&&(r=this.getAttachmentAtRange(u))),r?(this.editAttachment(r),!1):(this.setDocument(this.document.removeTextAtRange(u)),this.setSelection(u[0]),!n&&!i&&void 0)}moveTextFromRange(e){let[r]=Array.from(this.getSelectedRange());return this.setDocument(this.document.moveTextFromRangeToPosition(e,r)),this.setSelection(r)}removeAttachment(e){let r=this.document.getRangeOfAttachment(e);if(r)return this.stopEditingAttachment(),this.setDocument(this.document.removeTextAtRange(r)),this.setSelection(r[0])}removeLastBlockAttribute(){let[e,r]=Array.from(this.getSelectedRange()),n=this.document.getBlockAtPosition(r);return this.removeCurrentAttribute(n.getLastAttribute()),this.setSelection(e)}insertPlaceholder(){return this.placeholderPosition=this.getPosition(),this.insertString(" ")}selectPlaceholder(){if(this.placeholderPosition!=null)return this.setSelectedRange([this.placeholderPosition,this.placeholderPosition+1]),this.getSelectedRange()}forgetPlaceholder(){this.placeholderPosition=null}hasCurrentAttribute(e){let r=this.currentAttributes[e];return r!=null&&r!==!1}toggleCurrentAttribute(e){let r=!this.currentAttributes[e];return r?this.setCurrentAttribute(e,r):this.removeCurrentAttribute(e)}canSetCurrentAttribute(e){return Hs(e)?this.canSetCurrentBlockAttribute(e):this.canSetCurrentTextAttribute(e)}canSetCurrentTextAttribute(e){let r=this.getSelectedDocument();if(r){for(let n of Array.from(r.getAttachments()))if(!n.hasContent())return!1;return!0}}canSetCurrentBlockAttribute(e){let r=this.getBlock();if(r)return!r.isTerminalBlock()}setCurrentAttribute(e,r){return Hs(e)?this.setBlockAttribute(e,r):(this.setTextAttribute(e,r),this.currentAttributes[e]=r,this.notifyDelegateOfCurrentAttributesChange())}setHTMLAtributeAtPosition(e,r,n){var i;let o=this.document.getBlockAtPosition(e),s=(i=Hs(o.getLastAttribute()))===null||i===void 0?void 0:i.htmlAttributes;if(o&&s!=null&&s.includes(r)){let u=this.document.setHTMLAttributeAtPosition(e,r,n);this.setDocument(u)}}setTextAttribute(e,r){let n=this.getSelectedRange();if(!n)return;let[i,o]=Array.from(n);if(i!==o)return this.setDocument(this.document.addAttributeAtRange(e,r,n));if(e==="href"){let s=Xf.textForStringWithAttributes(r,{href:r});return this.insertText(s)}}setBlockAttribute(e,r){let n=this.getSelectedRange();if(this.canSetCurrentAttribute(e))return this.setDocument(this.document.applyBlockAttributeAtRange(e,r,n)),this.setSelection(n)}removeCurrentAttribute(e){return Hs(e)?(this.removeBlockAttribute(e),this.updateCurrentAttributes()):(this.removeTextAttribute(e),delete this.currentAttributes[e],this.notifyDelegateOfCurrentAttributesChange())}removeTextAttribute(e){let r=this.getSelectedRange();if(r)return this.setDocument(this.document.removeAttributeAtRange(e,r))}removeBlockAttribute(e){let r=this.getSelectedRange();if(r)return this.setDocument(this.document.removeAttributeAtRange(e,r))}canDecreaseNestingLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getNestingLevel())>0}canIncreaseNestingLevel(){var e;let r=this.getBlock();if(r){if((e=Hs(r.getLastNestableAttribute()))===null||e===void 0||!e.listAttribute)return r.getNestingLevel()>0;{let n=this.getPreviousBlock();if(n)return function(){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return y0((arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).slice(0,i.length),i)}(n.getListItemAttributes(),r.getListItemAttributes())}}}decreaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.decreaseNestingLevel()))}increaseNestingLevel(){let e=this.getBlock();if(e)return this.setDocument(this.document.replaceBlock(e,e.increaseNestingLevel()))}canDecreaseBlockAttributeLevel(){var e;return((e=this.getBlock())===null||e===void 0?void 0:e.getAttributeLevel())>0}decreaseBlockAttributeLevel(){var e;let r=(e=this.getBlock())===null||e===void 0?void 0:e.getLastAttribute();if(r)return this.removeCurrentAttribute(r)}decreaseListLevel(){let[e]=Array.from(this.getSelectedRange()),{index:r}=this.document.locationFromPosition(e),n=r,i=this.getBlock().getAttributeLevel(),o=this.document.getBlockAtIndex(n+1);for(;o&&o.isListItem()&&!(o.getAttributeLevel()<=i);)n++,o=this.document.getBlockAtIndex(n+1);e=this.document.positionFromLocation({index:r,offset:0});let s=this.document.positionFromLocation({index:n,offset:0});return this.setDocument(this.document.removeLastListAttributeAtRange([e,s]))}updateCurrentAttributes(){let e=this.getSelectedRange({ignoreLock:!0});if(e){let r=this.document.getCommonAttributesAtRange(e);if(Array.from(JV()).forEach(n=>{r[n]||this.canSetCurrentAttribute(n)||(r[n]=!1)}),!F1(r,this.currentAttributes))return this.currentAttributes=r,this.notifyDelegateOfCurrentAttributesChange()}}getCurrentAttributes(){return pEe.call({},this.currentAttributes)}getCurrentTextAttributes(){let e={};for(let r in this.currentAttributes){let n=this.currentAttributes[r];n!==!1&&QV(r)&&(e[r]=n)}return e}freezeSelection(){return this.setCurrentAttribute("frozen",!0)}thawSelection(){return this.removeCurrentAttribute("frozen")}hasFrozenSelection(){return this.hasCurrentAttribute("frozen")}setSelection(e){var r;let n=this.document.locationRangeFromRange(e);return(r=this.delegate)===null||r===void 0?void 0:r.compositionDidRequestChangingSelectionToLocationRange(n)}getSelectedRange(){let e=this.getLocationRange();if(e)return this.document.rangeFromLocationRange(e)}setSelectedRange(e){let r=this.document.locationRangeFromRange(e);return this.getSelectionManager().setLocationRange(r)}getPosition(){let e=this.getLocationRange();if(e)return this.document.positionFromLocation(e[0])}getLocationRange(e){return this.targetLocationRange?this.targetLocationRange:this.getSelectionManager().getLocationRange(e)||$o({index:0,offset:0})}withTargetLocationRange(e,r){let n;this.targetLocationRange=e;try{n=r()}finally{this.targetLocationRange=null}return n}withTargetRange(e,r){let n=this.document.locationRangeFromRange(e);return this.withTargetLocationRange(n,r)}withTargetDOMRange(e,r){let n=this.createLocationRangeFromDOMRange(e,{strict:!1});return this.withTargetLocationRange(n,r)}getExpandedRangeInDirection(e){let{length:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},[n,i]=Array.from(this.getSelectedRange());return e==="backward"?r?n-=r:n=this.translateUTF16PositionFromOffset(n,-1):r?i+=r:i=this.translateUTF16PositionFromOffset(i,1),$o([n,i])}shouldManageMovingCursorInDirection(e){if(this.editingAttachment)return!0;let r=this.getExpandedRangeInDirection(e);return this.getAttachmentAtRange(r)!=null}moveCursorInDirection(e){let r,n;if(this.editingAttachment)n=this.document.getRangeOfAttachment(this.editingAttachment);else{let i=this.getSelectedRange();n=this.getExpandedRangeInDirection(e),r=!_M(i,n)}if(e==="backward"?this.setSelectedRange(n[0]):this.setSelectedRange(n[1]),r){let i=this.getAttachmentAtRange(n);if(i)return this.editAttachment(i)}}expandSelectionInDirection(e){let{length:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=this.getExpandedRangeInDirection(e,{length:r});return this.setSelectedRange(n)}expandSelectionForEditing(){if(this.hasCurrentAttribute("href"))return this.expandSelectionAroundCommonAttribute("href")}expandSelectionAroundCommonAttribute(e){let r=this.getPosition(),n=this.document.getRangeOfCommonAttributeAtPosition(e,r);return this.setSelectedRange(n)}selectionContainsAttachments(){var e;return((e=this.getSelectedAttachments())===null||e===void 0?void 0:e.length)>0}selectionIsInCursorTarget(){return this.editingAttachment||this.positionIsCursorTarget(this.getPosition())}positionIsCursorTarget(e){let r=this.document.locationFromPosition(e);if(r)return this.locationIsCursorTarget(r)}positionIsBlockBreak(e){var r;return(r=this.document.getPieceAtPosition(e))===null||r===void 0?void 0:r.isBlockBreak()}getSelectedDocument(){let e=this.getSelectedRange();if(e)return this.document.getDocumentAtRange(e)}getSelectedAttachments(){var e;return(e=this.getSelectedDocument())===null||e===void 0?void 0:e.getAttachments()}getAttachments(){return this.attachments.slice(0)}refreshAttachments(){let e=this.document.getAttachments(),{added:r,removed:n}=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=[],u=[],h=new Set;i.forEach(w=>{h.add(w)});let y=new Set;return o.forEach(w=>{y.add(w),h.has(w)||s.push(w)}),i.forEach(w=>{y.has(w)||u.push(w)}),{added:s,removed:u}}(this.attachments,e);return this.attachments=e,Array.from(n).forEach(i=>{var o,s;i.delegate=null,(o=this.delegate)===null||o===void 0||(s=o.compositionDidRemoveAttachment)===null||s===void 0||s.call(o,i)}),(()=>{let i=[];return Array.from(r).forEach(o=>{var s,u;o.delegate=this,i.push((s=this.delegate)===null||s===void 0||(u=s.compositionDidAddAttachment)===null||u===void 0?void 0:u.call(s,o))}),i})()}attachmentDidChangeAttributes(e){var r,n;return this.revision++,(r=this.delegate)===null||r===void 0||(n=r.compositionDidEditAttachment)===null||n===void 0?void 0:n.call(r,e)}attachmentDidChangePreviewURL(e){var r,n;return this.revision++,(r=this.delegate)===null||r===void 0||(n=r.compositionDidChangeAttachmentPreviewURL)===null||n===void 0?void 0:n.call(r,e)}editAttachment(e,r){var n,i;if(e!==this.editingAttachment)return this.stopEditingAttachment(),this.editingAttachment=e,(n=this.delegate)===null||n===void 0||(i=n.compositionDidStartEditingAttachment)===null||i===void 0?void 0:i.call(n,this.editingAttachment,r)}stopEditingAttachment(){var e,r;this.editingAttachment&&((e=this.delegate)===null||e===void 0||(r=e.compositionDidStopEditingAttachment)===null||r===void 0||r.call(e,this.editingAttachment),this.editingAttachment=null)}updateAttributesForAttachment(e,r){return this.setDocument(this.document.updateAttributesForAttachment(e,r))}removeAttributeForAttachment(e,r){return this.setDocument(this.document.removeAttributeForAttachment(e,r))}breakFormattedBlock(e){let{document:r}=e,{block:n}=e,i=e.startPosition,o=[i-1,i];n.getBlockBreakPosition()===e.startLocation.offset?(n.breaksOnReturn()&&e.nextCharacter===`
`?i+=1:r=r.removeTextAtRange(o),o=[i,i]):e.nextCharacter===`
`?e.previousCharacter===`
`?o=[i-1,i+1]:(o=[i,i+1],i+=1):e.startLocation.offset-1!=0&&(i+=1);let s=new rf([n.removeLastAttribute().copyWithoutText()]);return this.setDocument(r.insertDocumentAtRange(s,o)),this.setSelection(i)}getPreviousBlock(){let e=this.getLocationRange();if(e){let{index:r}=e[0];if(r>0)return this.document.getBlockAtIndex(r-1)}}getBlock(){let e=this.getLocationRange();if(e)return this.document.getBlockAtIndex(e[0].index)}getAttachmentAtRange(e){let r=this.document.getDocumentAtRange(e);if(r.toString()==="".concat("\uFFFC",`
`))return r.getAttachments()[0]}notifyDelegateOfCurrentAttributesChange(){var e,r;return(e=this.delegate)===null||e===void 0||(r=e.compositionDidChangeCurrentAttributes)===null||r===void 0?void 0:r.call(e,this.currentAttributes)}notifyDelegateOfInsertionAtRange(e){var r,n;return(r=this.delegate)===null||r===void 0||(n=r.compositionDidPerformInsertionAtRange)===null||n===void 0?void 0:n.call(r,e)}translateUTF16PositionFromOffset(e,r){let n=this.document.toUTF16String(),i=n.offsetFromUCS2Offset(e);return n.offsetToUCS2Offset(i+r)}};im.proxyMethod("getSelectionManager().getPointRange"),im.proxyMethod("getSelectionManager().setLocationRangeFromPointRange"),im.proxyMethod("getSelectionManager().createLocationRangeFromDOMRange"),im.proxyMethod("getSelectionManager().locationIsCursorTarget"),im.proxyMethod("getSelectionManager().selectionIsExpanded"),im.proxyMethod("delegate?.getSelectionManager");var DA=class extends Ms{constructor(e){super(...arguments),this.composition=e,this.undoEntries=[],this.redoEntries=[]}recordUndoEntry(e){let{context:r,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.undoEntries.slice(-1)[0];if(!n||!STt(i,e,r)){let o=this.createEntry({description:e,context:r});this.undoEntries.push(o),this.redoEntries=[]}}undo(){let e=this.undoEntries.pop();if(e){let r=this.createEntry(e);return this.redoEntries.push(r),this.composition.loadSnapshot(e.snapshot)}}redo(){let e=this.redoEntries.pop();if(e){let r=this.createEntry(e);return this.undoEntries.push(r),this.composition.loadSnapshot(e.snapshot)}}canUndo(){return this.undoEntries.length>0}canRedo(){return this.redoEntries.length>0}createEntry(){let{description:e,context:r}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{description:e?.toString(),context:JSON.stringify(r),snapshot:this.composition.getSnapshot()}}},STt=(t,e,r)=>t?.description===e?.toString()&&t?.context===JSON.stringify(r),BV="attachmentGallery",DM=class{constructor(e){this.document=e.document,this.selectedRange=e.selectedRange}perform(){return this.removeBlockAttribute(),this.applyBlockAttribute()}getSnapshot(){return{document:this.document,selectedRange:this.selectedRange}}removeBlockAttribute(){return this.findRangesOfBlocks().map(e=>this.document=this.document.removeAttributeAtRange(BV,e))}applyBlockAttribute(){let e=0;this.findRangesOfPieces().forEach(r=>{r[1]-r[0]>1&&(r[0]+=e,r[1]+=e,this.document.getCharacterAtPosition(r[1])!==`
`&&(this.document=this.document.insertBlockBreakAtRange(r[1]),r[1]<this.selectedRange[1]&&this.moveSelectedRangeForward(),r[1]++,e++),r[0]!==0&&this.document.getCharacterAtPosition(r[0]-1)!==`
`&&(this.document=this.document.insertBlockBreakAtRange(r[0]),r[0]<this.selectedRange[0]&&this.moveSelectedRangeForward(),r[0]++,e++),this.document=this.document.applyBlockAttributeAtRange(BV,!0,r))})}findRangesOfBlocks(){return this.document.findRangesForBlockAttribute(BV)}findRangesOfPieces(){return this.document.findRangesForTextAttribute("presentation",{withValue:"gallery"})}moveSelectedRangeForward(){this.selectedRange[0]+=1,this.selectedRange[1]+=1}},PEe=function(t){let e=new DM(t);return e.perform(),e.getSnapshot()},ETt=[PEe],OM=class{constructor(e,r,n){this.insertFiles=this.insertFiles.bind(this),this.composition=e,this.selectionManager=r,this.element=n,this.undoManager=new DA(this.composition),this.filters=ETt.slice(0)}loadDocument(e){return this.loadSnapshot({document:e,selectedRange:[0,0]})}loadHTML(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=_0.parse(e,{referenceElement:this.element}).getDocument();return this.loadDocument(r)}loadJSON(e){let{document:r,selectedRange:n}=e;return r=rf.fromJSON(r),this.loadSnapshot({document:r,selectedRange:n})}loadSnapshot(e){return this.undoManager=new DA(this.composition),this.composition.loadSnapshot(e)}getDocument(){return this.composition.document}getSelectedDocument(){return this.composition.getSelectedDocument()}getSnapshot(){return this.composition.getSnapshot()}toJSON(){return this.getSnapshot()}deleteInDirection(e){return this.composition.deleteInDirection(e)}insertAttachment(e){return this.composition.insertAttachment(e)}insertAttachments(e){return this.composition.insertAttachments(e)}insertDocument(e){return this.composition.insertDocument(e)}insertFile(e){return this.composition.insertFile(e)}insertFiles(e){return this.composition.insertFiles(e)}insertHTML(e){return this.composition.insertHTML(e)}insertString(e){return this.composition.insertString(e)}insertText(e){return this.composition.insertText(e)}insertLineBreak(){return this.composition.insertLineBreak()}getSelectedRange(){return this.composition.getSelectedRange()}getPosition(){return this.composition.getPosition()}getClientRectAtPosition(e){let r=this.getDocument().locationRangeFromRange([e,e+1]);return this.selectionManager.getClientRectAtLocationRange(r)}expandSelectionInDirection(e){return this.composition.expandSelectionInDirection(e)}moveCursorInDirection(e){return this.composition.moveCursorInDirection(e)}setSelectedRange(e){return this.composition.setSelectedRange(e)}activateAttribute(e){let r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return this.composition.setCurrentAttribute(e,r)}attributeIsActive(e){return this.composition.hasCurrentAttribute(e)}canActivateAttribute(e){return this.composition.canSetCurrentAttribute(e)}deactivateAttribute(e){return this.composition.removeCurrentAttribute(e)}setHTMLAtributeAtPosition(e,r,n){this.composition.setHTMLAtributeAtPosition(e,r,n)}canDecreaseNestingLevel(){return this.composition.canDecreaseNestingLevel()}canIncreaseNestingLevel(){return this.composition.canIncreaseNestingLevel()}decreaseNestingLevel(){if(this.canDecreaseNestingLevel())return this.composition.decreaseNestingLevel()}increaseNestingLevel(){if(this.canIncreaseNestingLevel())return this.composition.increaseNestingLevel()}canRedo(){return this.undoManager.canRedo()}canUndo(){return this.undoManager.canUndo()}recordUndoEntry(e){let{context:r,consolidatable:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.undoManager.recordUndoEntry(e,{context:r,consolidatable:n})}redo(){if(this.canRedo())return this.undoManager.redo()}undo(){if(this.canUndo())return this.undoManager.undo()}},PM=class{constructor(e){this.element=e}findLocationFromContainerAndOffset(e,r){let{strict:n}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{strict:!0},i=0,o=!1,s={index:0,offset:0},u=this.findAttachmentElementParentForNode(e);u&&(e=u.parentNode,r=EV(u));let h=bM(this.element,{usingFilter:MEe});for(;h.nextNode();){let y=h.currentNode;if(y===e&&EA(e)){k1(y)||(s.offset+=r);break}if(y.parentNode===e){if(i++===r)break}else if(!f0(e,y)&&i>0)break;PSe(y,{strict:n})?(o&&s.index++,s.offset=0,o=!0):s.offset+=zV(y)}return s}findContainerAndOffsetFromLocation(e){let r,n;if(e.index===0&&e.offset===0){for(r=this.element,n=0;r.firstChild;)if(r=r.firstChild,TV(r)){n=1;break}return[r,n]}let[i,o]=this.findNodeAndOffsetFromLocation(e);if(i){if(EA(i))zV(i)===0?(r=i.parentNode.parentNode,n=EV(i.parentNode),k1(i,{name:"right"})&&n++):(r=i,n=e.offset-o);else{if(r=i.parentNode,!PSe(i.previousSibling)&&!TV(r))for(;i===r.lastChild&&(i=r,r=r.parentNode,!TV(r)););n=EV(i),e.offset!==0&&n++}return[r,n]}}findNodeAndOffsetFromLocation(e){let r,n,i=0;for(let o of this.getSignificantNodesForIndex(e.index)){let s=zV(o);if(e.offset<=i+s)if(EA(o)){if(r=o,n=i,e.offset===n&&k1(r))break}else r||(r=o,n=i);if(i+=s,i>e.offset)break}return[r,n]}findAttachmentElementParentForNode(e){for(;e&&e!==this.element;){if(d0(e))return e;e=e.parentNode}}getSignificantNodesForIndex(e){let r=[],n=bM(this.element,{usingFilter:TTt}),i=!1;for(;n.nextNode();){let s=n.currentNode;var o;if(A1(s)){if(o!=null?o++:o=0,o===e)i=!0;else if(i)break}else i&&r.push(s)}return r}},zV=function(t){return t.nodeType===Node.TEXT_NODE?k1(t)?0:t.textContent.length:vc(t)==="br"||d0(t)?1:0},TTt=function(t){return ATt(t)===NodeFilter.FILTER_ACCEPT?MEe(t):NodeFilter.FILTER_REJECT},ATt=function(t){return gEe(t)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},MEe=function(t){return d0(t.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},MM=class{createDOMRangeFromPoint(e){let r,{x:n,y:i}=e;if(document.caretPositionFromPoint){let{offsetNode:o,offset:s}=document.caretPositionFromPoint(n,i);return r=document.createRange(),r.setStart(o,s),r}if(document.caretRangeFromPoint)return document.caretRangeFromPoint(n,i);if(document.body.createTextRange){let o=TA();try{let s=document.body.createTextRange();s.moveToPoint(n,i),s.select()}catch{}return r=TA(),SEe(o),r}}getClientRectsForDOMRange(e){let r=Array.from(e.getClientRects());return[r[0],r[r.length-1]]}},Eg=class extends Ms{constructor(e){super(...arguments),this.didMouseDown=this.didMouseDown.bind(this),this.selectionDidChange=this.selectionDidChange.bind(this),this.element=e,this.locationMapper=new PM(this.element),this.pointMapper=new MM,this.lockCount=0,_s("mousedown",{onElement:this.element,withCallback:this.didMouseDown})}getLocationRange(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.strict===!1?this.createLocationRangeFromDOMRange(TA()):e.ignoreLock?this.currentLocationRange:this.lockedLocationRange?this.lockedLocationRange:this.currentLocationRange}setLocationRange(e){if(this.lockedLocationRange)return;e=$o(e);let r=this.createDOMRangeFromLocationRange(e);r&&(SEe(r),this.updateCurrentLocationRange(e))}setLocationRangeFromPointRange(e){e=$o(e);let r=this.getLocationAtPoint(e[0]),n=this.getLocationAtPoint(e[1]);this.setLocationRange([r,n])}getClientRectAtLocationRange(e){let r=this.createDOMRangeFromLocationRange(e);if(r)return this.getClientRectsForDOMRange(r)[1]}locationIsCursorTarget(e){let r=Array.from(this.findNodeAndOffsetFromLocation(e))[0];return k1(r)}lock(){this.lockCount++==0&&(this.updateCurrentLocationRange(),this.lockedLocationRange=this.getLocationRange())}unlock(){if(--this.lockCount==0){let{lockedLocationRange:e}=this;if(this.lockedLocationRange=null,e!=null)return this.setLocationRange(e)}}clearSelection(){var e;return(e=wEe())===null||e===void 0?void 0:e.removeAllRanges()}selectionIsCollapsed(){var e;return((e=TA())===null||e===void 0?void 0:e.collapsed)===!0}selectionIsExpanded(){return!this.selectionIsCollapsed()}createLocationRangeFromDOMRange(e,r){if(e==null||!this.domRangeWithinElement(e))return;let n=this.findLocationFromContainerAndOffset(e.startContainer,e.startOffset,r);if(!n)return;let i=e.collapsed?void 0:this.findLocationFromContainerAndOffset(e.endContainer,e.endOffset,r);return $o([n,i])}didMouseDown(){return this.pauseTemporarily()}pauseTemporarily(){let e;this.paused=!0;let r=()=>{if(this.paused=!1,clearTimeout(n),Array.from(e).forEach(i=>{i.destroy()}),f0(document,this.element))return this.selectionDidChange()},n=setTimeout(r,200);e=["mousemove","keydown"].map(i=>_s(i,{onElement:document,withCallback:r}))}selectionDidChange(){if(!this.paused&&!m8(this.element))return this.updateCurrentLocationRange()}updateCurrentLocationRange(e){var r,n;if((e??(e=this.createLocationRangeFromDOMRange(TA())))&&!_M(e,this.currentLocationRange))return this.currentLocationRange=e,(r=this.delegate)===null||r===void 0||(n=r.locationRangeDidChange)===null||n===void 0?void 0:n.call(r,this.currentLocationRange.slice(0))}createDOMRangeFromLocationRange(e){let r=this.findContainerAndOffsetFromLocation(e[0]),n=Tg(e)?r:this.findContainerAndOffsetFromLocation(e[1])||r;if(r!=null&&n!=null){let i=document.createRange();return i.setStart(...Array.from(r||[])),i.setEnd(...Array.from(n||[])),i}}getLocationAtPoint(e){let r=this.createDOMRangeFromPoint(e);var n;if(r)return(n=this.createLocationRangeFromDOMRange(r))===null||n===void 0?void 0:n[0]}domRangeWithinElement(e){return e.collapsed?f0(this.element,e.startContainer):f0(this.element,e.startContainer)&&f0(this.element,e.endContainer)}};Eg.proxyMethod("locationMapper.findLocationFromContainerAndOffset"),Eg.proxyMethod("locationMapper.findContainerAndOffsetFromLocation"),Eg.proxyMethod("locationMapper.findNodeAndOffsetFromLocation"),Eg.proxyMethod("pointMapper.createDOMRangeFromPoint"),Eg.proxyMethod("pointMapper.getClientRectsForDOMRange");var LEe=Object.freeze({__proto__:null,Attachment:O1,AttachmentManager:CM,AttachmentPiece:P1,Block:my,Composition:im,Document:rf,Editor:OM,HTMLParser:_0,HTMLSanitizer:I1,LineBreakInsertion:IM,LocationMapper:PM,ManagedAttachment:bs,Piece:Cg,PointMapper:MM,SelectionManager:Eg,SplittableList:M1,StringPiece:IA,Text:Xf,UndoManager:DA}),kTt=Object.freeze({__proto__:null,ObjectView:kg,AttachmentView:CA,BlockView:AM,DocumentView:D1,PieceView:EM,PreviewableAttachmentView:SM,TextView:TM}),{lang:jV,css:u0,keyNames:CTt}=PA,UV=function(t){return function(){let e=t.apply(this,arguments);e.do(),this.undos||(this.undos=[]),this.undos.push(e.undo)}},LM=class extends Ms{constructor(e,r,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(...arguments),bc(this,"makeElementMutable",UV(()=>({do:()=>{this.element.dataset.trixMutable=!0},undo:()=>delete this.element.dataset.trixMutable}))),bc(this,"addToolbar",UV(()=>{let o=Oi({tagName:"div",className:u0.attachmentToolbar,data:{trixMutable:!0},childNodes:Oi({tagName:"div",className:"trix-button-row",childNodes:Oi({tagName:"span",className:"trix-button-group trix-button-group--actions",childNodes:Oi({tagName:"button",className:"trix-button trix-button--remove",textContent:jV.remove,attributes:{title:jV.remove},data:{trixAction:"remove"}})})})});return this.attachment.isPreviewable()&&o.appendChild(Oi({tagName:"div",className:u0.attachmentMetadataContainer,childNodes:Oi({tagName:"span",className:u0.attachmentMetadata,childNodes:[Oi({tagName:"span",className:u0.attachmentName,textContent:this.attachment.getFilename(),attributes:{title:this.attachment.getFilename()}}),Oi({tagName:"span",className:u0.attachmentSize,textContent:this.attachment.getFormattedFilesize()})]})})),_s("click",{onElement:o,withCallback:this.didClickToolbar}),_s("click",{onElement:o,matchingSelector:"[data-trix-action]",withCallback:this.didClickActionButton}),wA("trix-attachment-before-toolbar",{onElement:this.element,attributes:{toolbar:o,attachment:this.attachment}}),{do:()=>this.element.appendChild(o),undo:()=>vy(o)}})),bc(this,"installCaptionEditor",UV(()=>{let o=Oi({tagName:"textarea",className:u0.attachmentCaptionEditor,attributes:{placeholder:jV.captionPlaceholder},data:{trixMutable:!0}});o.value=this.attachmentPiece.getCaption();let s=o.cloneNode();s.classList.add("trix-autoresize-clone"),s.tabIndex=-1;let u=function(){s.value=o.value,o.style.height=s.scrollHeight+"px"};_s("input",{onElement:o,withCallback:u}),_s("input",{onElement:o,withCallback:this.didInputCaption}),_s("keydown",{onElement:o,withCallback:this.didKeyDownCaption}),_s("change",{onElement:o,withCallback:this.didChangeCaption}),_s("blur",{onElement:o,withCallback:this.didBlurCaption});let h=this.element.querySelector("figcaption"),y=h.cloneNode();return{do:()=>{if(h.style.display="none",y.appendChild(o),y.appendChild(s),y.classList.add("".concat(u0.attachmentCaption,"--editing")),h.parentElement.insertBefore(y,h),u(),this.options.editCaption)return y8(()=>o.focus())},undo(){vy(y),h.style.display=null}}})),this.didClickToolbar=this.didClickToolbar.bind(this),this.didClickActionButton=this.didClickActionButton.bind(this),this.didKeyDownCaption=this.didKeyDownCaption.bind(this),this.didInputCaption=this.didInputCaption.bind(this),this.didChangeCaption=this.didChangeCaption.bind(this),this.didBlurCaption=this.didBlurCaption.bind(this),this.attachmentPiece=e,this.element=r,this.container=n,this.options=i,this.attachment=this.attachmentPiece.attachment,vc(this.element)==="a"&&(this.element=this.element.firstChild),this.install()}install(){this.makeElementMutable(),this.addToolbar(),this.attachment.isPreviewable()&&this.installCaptionEditor()}uninstall(){var e;let r=this.undos.pop();for(this.savePendingCaption();r;)r(),r=this.undos.pop();(e=this.delegate)===null||e===void 0||e.didUninstallAttachmentEditor(this)}savePendingCaption(){if(this.pendingCaption!=null){let o=this.pendingCaption;var e,r,n,i;this.pendingCaption=null,o?(e=this.delegate)===null||e===void 0||(r=e.attachmentEditorDidRequestUpdatingAttributesForAttachment)===null||r===void 0||r.call(e,{caption:o},this.attachment):(n=this.delegate)===null||n===void 0||(i=n.attachmentEditorDidRequestRemovingAttributeForAttachment)===null||i===void 0||i.call(n,"caption",this.attachment)}}didClickToolbar(e){return e.preventDefault(),e.stopPropagation()}didClickActionButton(e){var r;if(e.target.getAttribute("data-trix-action")==="remove")return(r=this.delegate)===null||r===void 0?void 0:r.attachmentEditorDidRequestRemovalOfAttachment(this.attachment)}didKeyDownCaption(e){var r,n;if(CTt[e.keyCode]==="return")return e.preventDefault(),this.savePendingCaption(),(r=this.delegate)===null||r===void 0||(n=r.attachmentEditorDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(r,this.attachment)}didInputCaption(e){this.pendingCaption=e.target.value.replace(/\s/g," ").trim()}didChangeCaption(e){return this.savePendingCaption()}didBlurCaption(e){return this.savePendingCaption()}},RM=class extends Ms{constructor(e,r){super(...arguments),this.didFocus=this.didFocus.bind(this),this.didBlur=this.didBlur.bind(this),this.didClickAttachment=this.didClickAttachment.bind(this),this.element=e,this.composition=r,this.documentView=new D1(this.composition.document,{element:this.element}),_s("focus",{onElement:this.element,withCallback:this.didFocus}),_s("blur",{onElement:this.element,withCallback:this.didBlur}),_s("click",{onElement:this.element,matchingSelector:"a[contenteditable=false]",preventDefault:!0}),_s("mousedown",{onElement:this.element,matchingSelector:h0,withCallback:this.didClickAttachment}),_s("click",{onElement:this.element,matchingSelector:"a".concat(h0),preventDefault:!0})}didFocus(e){var r;let n=()=>{var i,o;if(!this.focused)return this.focused=!0,(i=this.delegate)===null||i===void 0||(o=i.compositionControllerDidFocus)===null||o===void 0?void 0:o.call(i)};return((r=this.blurPromise)===null||r===void 0?void 0:r.then(n))||n()}didBlur(e){this.blurPromise=new Promise(r=>y8(()=>{var n,i;return m8(this.element)||(this.focused=null,(n=this.delegate)===null||n===void 0||(i=n.compositionControllerDidBlur)===null||i===void 0||i.call(n)),this.blurPromise=null,r()}))}didClickAttachment(e,r){var n,i;let o=this.findAttachmentForElement(r),s=!!gy(e.target,{matchingSelector:"figcaption"});return(n=this.delegate)===null||n===void 0||(i=n.compositionControllerDidSelectAttachment)===null||i===void 0?void 0:i.call(n,o,{editCaption:s})}getSerializableElement(){return this.isEditingAttachment()?this.documentView.shadowElement:this.element}render(){var e,r,n,i,o,s;return this.revision!==this.composition.revision&&(this.documentView.setDocument(this.composition.document),this.documentView.render(),this.revision=this.composition.revision),this.canSyncDocumentView()&&!this.documentView.isSynced()&&((n=this.delegate)===null||n===void 0||(i=n.compositionControllerWillSyncDocumentView)===null||i===void 0||i.call(n),this.documentView.sync(),(o=this.delegate)===null||o===void 0||(s=o.compositionControllerDidSyncDocumentView)===null||s===void 0||s.call(o)),(e=this.delegate)===null||e===void 0||(r=e.compositionControllerDidRender)===null||r===void 0?void 0:r.call(e)}rerenderViewForObject(e){return this.invalidateViewForObject(e),this.render()}invalidateViewForObject(e){return this.documentView.invalidateViewForObject(e)}isViewCachingEnabled(){return this.documentView.isViewCachingEnabled()}enableViewCaching(){return this.documentView.enableViewCaching()}disableViewCaching(){return this.documentView.disableViewCaching()}refreshViewCache(){return this.documentView.garbageCollectCachedViews()}isEditingAttachment(){return!!this.attachmentEditor}installAttachmentEditorForAttachment(e,r){var n;if(((n=this.attachmentEditor)===null||n===void 0?void 0:n.attachment)===e)return;let i=this.documentView.findElementForObject(e);if(!i)return;this.uninstallAttachmentEditor();let o=this.composition.document.getAttachmentPieceForAttachment(e);this.attachmentEditor=new LM(o,i,this.element,r),this.attachmentEditor.delegate=this}uninstallAttachmentEditor(){var e;return(e=this.attachmentEditor)===null||e===void 0?void 0:e.uninstall()}didUninstallAttachmentEditor(){return this.attachmentEditor=null,this.render()}attachmentEditorDidRequestUpdatingAttributesForAttachment(e,r){var n,i;return(n=this.delegate)===null||n===void 0||(i=n.compositionControllerWillUpdateAttachment)===null||i===void 0||i.call(n,r),this.composition.updateAttributesForAttachment(e,r)}attachmentEditorDidRequestRemovingAttributeForAttachment(e,r){var n,i;return(n=this.delegate)===null||n===void 0||(i=n.compositionControllerWillUpdateAttachment)===null||i===void 0||i.call(n,r),this.composition.removeAttributeForAttachment(e,r)}attachmentEditorDidRequestRemovalOfAttachment(e){var r,n;return(r=this.delegate)===null||r===void 0||(n=r.compositionControllerDidRequestRemovalOfAttachment)===null||n===void 0?void 0:n.call(r,e)}attachmentEditorDidRequestDeselectingAttachment(e){var r,n;return(r=this.delegate)===null||r===void 0||(n=r.compositionControllerDidRequestDeselectingAttachment)===null||n===void 0?void 0:n.call(r,e)}canSyncDocumentView(){return!this.isEditingAttachment()}findAttachmentForElement(e){return this.composition.document.getAttachmentById(parseInt(e.dataset.trixId,10))}},FM=class extends Ms{},REe="data-trix-mutable",ITt="[".concat(REe,"]"),DTt={attributes:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},qM=class extends Ms{constructor(e){super(e),this.didMutate=this.didMutate.bind(this),this.element=e,this.observer=new window.MutationObserver(this.didMutate),this.start()}start(){return this.reset(),this.observer.observe(this.element,DTt)}stop(){return this.observer.disconnect()}didMutate(e){var r,n;if(this.mutations.push(...Array.from(this.findSignificantMutations(e)||[])),this.mutations.length)return(r=this.delegate)===null||r===void 0||(n=r.elementDidMutate)===null||n===void 0||n.call(r,this.getMutationSummary()),this.reset()}reset(){this.mutations=[]}findSignificantMutations(e){return e.filter(r=>this.mutationIsSignificant(r))}mutationIsSignificant(e){if(this.nodeIsMutable(e.target))return!1;for(let r of Array.from(this.nodesModifiedByMutation(e)))if(this.nodeIsSignificant(r))return!0;return!1}nodeIsSignificant(e){return e!==this.element&&!this.nodeIsMutable(e)&&!gEe(e)}nodeIsMutable(e){return gy(e,{matchingSelector:ITt})}nodesModifiedByMutation(e){let r=[];switch(e.type){case"attributes":e.attributeName!==REe&&r.push(e.target);break;case"characterData":r.push(e.target.parentNode),r.push(e.target);break;case"childList":r.push(...Array.from(e.addedNodes||[])),r.push(...Array.from(e.removedNodes||[]))}return r}getMutationSummary(){return this.getTextMutationSummary()}getTextMutationSummary(){let{additions:e,deletions:r}=this.getTextChangesFromCharacterData(),n=this.getTextChangesFromChildList();Array.from(n.additions).forEach(u=>{Array.from(e).includes(u)||e.push(u)}),r.push(...Array.from(n.deletions||[]));let i={},o=e.join("");o&&(i.textAdded=o);let s=r.join("");return s&&(i.textDeleted=s),i}getMutationsByType(e){return Array.from(this.mutations).filter(r=>r.type===e)}getTextChangesFromChildList(){let e,r,n=[],i=[];Array.from(this.getMutationsByType("childList")).forEach(u=>{n.push(...Array.from(u.addedNodes||[])),i.push(...Array.from(u.removedNodes||[]))}),n.length===0&&i.length===1&&A1(i[0])?(e=[],r=[`
`]):(e=s8(n),r=s8(i));let o=e.filter((u,h)=>u!==r[h]).map(xA),s=r.filter((u,h)=>u!==e[h]).map(xA);return{additions:o,deletions:s}}getTextChangesFromCharacterData(){let e,r,n=this.getMutationsByType("characterData");if(n.length){let i=n[0],o=n[n.length-1],s=function(u,h){let y,w;return u=v0.box(u),(h=v0.box(h)).length<u.length?[w,y]=NSe(u,h):[y,w]=NSe(h,u),{added:y,removed:w}}(xA(i.oldValue),xA(o.target.data));e=s.added,r=s.removed}return{additions:e?[e]:[],deletions:r?[r]:[]}}},s8=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=[];for(let r of Array.from(t))switch(r.nodeType){case Node.TEXT_NODE:e.push(r.data);break;case Node.ELEMENT_NODE:vc(r)==="br"?e.push(`
`):e.push(...Array.from(s8(r.childNodes)||[]))}return e},NM=class extends C1{constructor(e){super(...arguments),this.file=e}perform(e){let r=new FileReader;return r.onerror=()=>e(!1),r.onload=()=>{r.onerror=null;try{r.abort()}catch{}return e(!0,this.file)},r.readAsArrayBuffer(this.file)}},l8=class{constructor(e){this.element=e}shouldIgnore(e){return!!OA.samsungAndroid&&(this.previousEvent=this.event,this.event=e,this.checkSamsungKeyboardBuggyModeStart(),this.checkSamsungKeyboardBuggyModeEnd(),this.buggyMode)}checkSamsungKeyboardBuggyModeStart(){this.insertingLongTextAfterUnidentifiedChar()&&OTt(this.element.innerText,this.event.data)&&(this.buggyMode=!0,this.event.preventDefault())}checkSamsungKeyboardBuggyModeEnd(){this.buggyMode&&this.event.inputType!=="insertText"&&(this.buggyMode=!1)}insertingLongTextAfterUnidentifiedChar(){var e;return this.isBeforeInputInsertText()&&this.previousEventWasUnidentifiedKeydown()&&((e=this.event.data)===null||e===void 0?void 0:e.length)>50}isBeforeInputInsertText(){return this.event.type==="beforeinput"&&this.event.inputType==="insertText"}previousEventWasUnidentifiedKeydown(){var e,r;return((e=this.previousEvent)===null||e===void 0?void 0:e.type)==="keydown"&&((r=this.previousEvent)===null||r===void 0?void 0:r.key)==="Unidentified"}},OTt=(t,e)=>aEe(t)===aEe(e),PTt=new RegExp("(".concat("\uFFFC","|").concat(jM,"|").concat(py,"|\\s)+"),"g"),aEe=t=>t.replace(PTt," ").trim(),L1=class extends Ms{constructor(e){super(...arguments),this.element=e,this.mutationObserver=new qM(this.element),this.mutationObserver.delegate=this,this.flakyKeyboardDetector=new l8(this.element);for(let r in this.constructor.events)_s(r,{onElement:this.element,withCallback:this.handlerFor(r)})}elementDidMutate(e){}editorWillSyncDocumentView(){return this.mutationObserver.stop()}editorDidSyncDocumentView(){return this.mutationObserver.start()}requestRender(){var e,r;return(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidRequestRender)===null||r===void 0?void 0:r.call(e)}requestReparse(){var e,r;return(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidRequestReparse)===null||r===void 0||r.call(e),this.requestRender()}attachFiles(e){let r=Array.from(e).map(n=>new NM(n));return Promise.all(r).then(n=>{this.handleInput(function(){var i,o;return(i=this.delegate)===null||i===void 0||i.inputControllerWillAttachFiles(),(o=this.responder)===null||o===void 0||o.insertFiles(n),this.requestRender()})})}handlerFor(e){return r=>{r.defaultPrevented||this.handleInput(()=>{if(!m8(this.element)){if(this.flakyKeyboardDetector.shouldIgnore(r))return;this.eventName=e,this.constructor.events[e].call(this,r)}})}}handleInput(e){try{var r;(r=this.delegate)===null||r===void 0||r.inputControllerWillHandleInput(),e.call(this)}finally{var n;(n=this.delegate)===null||n===void 0||n.inputControllerDidHandleInput()}}createLinkHTML(e,r){let n=document.createElement("a");return n.href=e,n.textContent=r||e,n.outerHTML}},VV;bc(L1,"events",{});var{browser:MTt,keyNames:FEe}=PA,LTt=0,Yd=class extends L1{constructor(){super(...arguments),this.resetInputSummary()}setInputSummary(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.inputSummary.eventName=this.eventName;for(let r in e){let n=e[r];this.inputSummary[r]=n}return this.inputSummary}resetInputSummary(){this.inputSummary={}}reset(){return this.resetInputSummary(),b0.reset()}elementDidMutate(e){var r,n;return this.isComposing()?(r=this.delegate)===null||r===void 0||(n=r.inputControllerDidAllowUnhandledInput)===null||n===void 0?void 0:n.call(r):this.handleInput(function(){return this.mutationIsSignificant(e)&&(this.mutationIsExpected(e)?this.requestRender():this.requestReparse()),this.reset()})}mutationIsExpected(e){let{textAdded:r,textDeleted:n}=e;if(this.inputSummary.preferDocument)return!0;let i=r!=null?r===this.inputSummary.textAdded:!this.inputSummary.textAdded,o=n!=null?this.inputSummary.didDelete:!this.inputSummary.didDelete,s=[`
`,` 
`].includes(r)&&!i,u=n===`
`&&!o;if(s&&!u||u&&!s){let y=this.getSelectedRange();if(y){var h;let w=s?r.replace(/\n$/,"").length||-1:r?.length||1;if((h=this.responder)!==null&&h!==void 0&&h.positionIsBlockBreak(y[1]+w))return!0}}return i&&o}mutationIsSignificant(e){var r;let n=Object.keys(e).length>0,i=((r=this.compositionInput)===null||r===void 0?void 0:r.getEndData())==="";return n||!i}getCompositionInput(){if(this.isComposing())return this.compositionInput;this.compositionInput=new nm(this)}isComposing(){return this.compositionInput&&!this.compositionInput.isEnded()}deleteInDirection(e,r){var n;return((n=this.responder)===null||n===void 0?void 0:n.deleteInDirection(e))!==!1?this.setInputSummary({didDelete:!0}):r?(r.preventDefault(),this.requestRender()):void 0}serializeSelectionToDataTransfer(e){var r;if(!function(i){if(i==null||!i.setData)return!1;for(let o in RSe){let s=RSe[o];try{if(i.setData(o,s),!i.getData(o)===s)return!1}catch{return!1}}return!0}(e))return;let n=(r=this.responder)===null||r===void 0?void 0:r.getSelectedDocument().toSerializableDocument();return e.setData("application/x-trix-document",JSON.stringify(n)),e.setData("text/html",D1.render(n).innerHTML),e.setData("text/plain",n.toString().replace(/\n$/,"")),!0}canAcceptDataTransfer(e){let r={};return Array.from(e?.types||[]).forEach(n=>{r[n]=!0}),r.Files||r["application/x-trix-document"]||r["text/html"]||r["text/plain"]}getPastedHTMLUsingHiddenElement(e){let r=this.getSelectedRange(),n={position:"absolute",left:"".concat(window.pageXOffset,"px"),top:"".concat(window.pageYOffset,"px"),opacity:0},i=Oi({style:n,tagName:"div",editable:!0});return document.body.appendChild(i),i.focus(),requestAnimationFrame(()=>{let o=i.innerHTML;return vy(i),this.setSelectedRange(r),e(o)})}};bc(Yd,"events",{keydown(t){this.isComposing()||this.resetInputSummary(),this.inputSummary.didInput=!0;let e=FEe[t.keyCode];if(e){var r;let i=this.keys;["ctrl","alt","shift","meta"].forEach(o=>{var s;t["".concat(o,"Key")]&&(o==="ctrl"&&(o="control"),i=(s=i)===null||s===void 0?void 0:s[o])}),((r=i)===null||r===void 0?void 0:r[e])!=null&&(this.setInputSummary({keyName:e}),b0.reset(),i[e].call(this,t))}if(_Ee(t)){let i=String.fromCharCode(t.keyCode).toLowerCase();if(i){var n;let o=["alt","shift"].map(s=>{if(t["".concat(s,"Key")])return s}).filter(s=>s);o.push(i),(n=this.delegate)!==null&&n!==void 0&&n.inputControllerDidReceiveKeyboardCommand(o)&&t.preventDefault()}}},keypress(t){if(this.inputSummary.eventName!=null||t.metaKey||t.ctrlKey&&!t.altKey)return;let e=qTt(t);var r,n;return e?((r=this.delegate)===null||r===void 0||r.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.insertString(e),this.setInputSummary({textAdded:e,didDelete:this.selectionIsExpanded()})):void 0},textInput(t){let{data:e}=t,{textAdded:r}=this.inputSummary;if(r&&r!==e&&r.toUpperCase()===e){var n;let i=this.getSelectedRange();return this.setSelectedRange([i[0],i[1]+r.length]),(n=this.responder)===null||n===void 0||n.insertString(e),this.setInputSummary({textAdded:e}),this.setSelectedRange(i)}},dragenter(t){t.preventDefault()},dragstart(t){var e,r;return this.serializeSelectionToDataTransfer(t.dataTransfer),this.draggedRange=this.getSelectedRange(),(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidStartDrag)===null||r===void 0?void 0:r.call(e)},dragover(t){if(this.draggedRange||this.canAcceptDataTransfer(t.dataTransfer)){t.preventDefault();let n={x:t.clientX,y:t.clientY};var e,r;if(!F1(n,this.draggingPoint))return this.draggingPoint=n,(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidReceiveDragOverPoint)===null||r===void 0?void 0:r.call(e,this.draggingPoint)}},dragend(t){var e,r;(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidCancelDrag)===null||r===void 0||r.call(e),this.draggedRange=null,this.draggingPoint=null},drop(t){var e,r;t.preventDefault();let n=(e=t.dataTransfer)===null||e===void 0?void 0:e.files,i=t.dataTransfer.getData("application/x-trix-document"),o={x:t.clientX,y:t.clientY};if((r=this.responder)===null||r===void 0||r.setLocationRangeFromPointRange(o),n!=null&&n.length)this.attachFiles(n);else if(this.draggedRange){var s,u;(s=this.delegate)===null||s===void 0||s.inputControllerWillMoveText(),(u=this.responder)===null||u===void 0||u.moveTextFromRange(this.draggedRange),this.draggedRange=null,this.requestRender()}else if(i){var h;let y=rf.fromJSONString(i);(h=this.responder)===null||h===void 0||h.insertDocument(y),this.requestRender()}this.draggedRange=null,this.draggingPoint=null},cut(t){var e,r;if((e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&(this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault(),(r=this.delegate)===null||r===void 0||r.inputControllerWillCutText(),this.deleteInDirection("backward"),t.defaultPrevented))return this.requestRender()},copy(t){var e;(e=this.responder)!==null&&e!==void 0&&e.selectionIsExpanded()&&this.serializeSelectionToDataTransfer(t.clipboardData)&&t.preventDefault()},paste(t){let e=t.clipboardData||t.testClipboardData,r={clipboard:e};if(!e||NTt(t))return void this.getPastedHTMLUsingHiddenElement(p=>{var K,j,Q;return r.type="text/html",r.html=p,(K=this.delegate)===null||K===void 0||K.inputControllerWillPaste(r),(j=this.responder)===null||j===void 0||j.insertHTML(r.html),this.requestRender(),(Q=this.delegate)===null||Q===void 0?void 0:Q.inputControllerDidPaste(r)});let n=e.getData("URL"),i=e.getData("text/html"),o=e.getData("public.url-name");if(n){var s,u,h;let p;r.type="text/html",p=o?_8(o).trim():n,r.html=this.createLinkHTML(n,p),(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(r),this.setInputSummary({textAdded:p,didDelete:this.selectionIsExpanded()}),(u=this.responder)===null||u===void 0||u.insertHTML(r.html),this.requestRender(),(h=this.delegate)===null||h===void 0||h.inputControllerDidPaste(r)}else if(bEe(e)){var y,w,T;r.type="text/plain",r.string=e.getData("text/plain"),(y=this.delegate)===null||y===void 0||y.inputControllerWillPaste(r),this.setInputSummary({textAdded:r.string,didDelete:this.selectionIsExpanded()}),(w=this.responder)===null||w===void 0||w.insertString(r.string),this.requestRender(),(T=this.delegate)===null||T===void 0||T.inputControllerDidPaste(r)}else if(i){var I,P,L;r.type="text/html",r.html=i,(I=this.delegate)===null||I===void 0||I.inputControllerWillPaste(r),(P=this.responder)===null||P===void 0||P.insertHTML(r.html),this.requestRender(),(L=this.delegate)===null||L===void 0||L.inputControllerDidPaste(r)}else if(Array.from(e.types).includes("Files")){var R,W;let p=(R=e.items)===null||R===void 0||(R=R[0])===null||R===void 0||(W=R.getAsFile)===null||W===void 0?void 0:W.call(R);if(p){var G,q,V;let K=RTt(p);!p.name&&K&&(p.name="pasted-file-".concat(++LTt,".").concat(K)),r.type="File",r.file=p,(G=this.delegate)===null||G===void 0||G.inputControllerWillAttachFiles(),(q=this.responder)===null||q===void 0||q.insertFile(r.file),this.requestRender(),(V=this.delegate)===null||V===void 0||V.inputControllerDidPaste(r)}}t.preventDefault()},compositionstart(t){return this.getCompositionInput().start(t.data)},compositionupdate(t){return this.getCompositionInput().update(t.data)},compositionend(t){return this.getCompositionInput().end(t.data)},beforeinput(t){this.inputSummary.didInput=!0},input(t){return this.inputSummary.didInput=!0,t.stopPropagation()}}),bc(Yd,"keys",{backspace(t){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},delete(t){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},return(t){var e,r;return this.setInputSummary({preferDocument:!0}),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0?void 0:r.insertLineBreak()},tab(t){var e,r;(e=this.responder)!==null&&e!==void 0&&e.canIncreaseNestingLevel()&&((r=this.responder)===null||r===void 0||r.increaseNestingLevel(),this.requestRender(),t.preventDefault())},left(t){var e;if(this.selectionIsInCursorTarget())return t.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},right(t){var e;if(this.selectionIsInCursorTarget())return t.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},control:{d(t){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("forward",t)},h(t){var e;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.deleteInDirection("backward",t)},o(t){var e,r;return t.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0||r.insertString(`
`,{updatePosition:!1}),this.requestRender()}},shift:{return(t){var e,r;(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0||r.insertString(`
`),this.requestRender(),t.preventDefault()},tab(t){var e,r;(e=this.responder)!==null&&e!==void 0&&e.canDecreaseNestingLevel()&&((r=this.responder)===null||r===void 0||r.decreaseNestingLevel(),this.requestRender(),t.preventDefault())},left(t){if(this.selectionIsInCursorTarget())return t.preventDefault(),this.expandSelectionInDirection("backward")},right(t){if(this.selectionIsInCursorTarget())return t.preventDefault(),this.expandSelectionInDirection("forward")}},alt:{backspace(t){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}},meta:{backspace(t){var e;return this.setInputSummary({preferDocument:!1}),(e=this.delegate)===null||e===void 0?void 0:e.inputControllerWillPerformTyping()}}}),Yd.proxyMethod("responder?.getSelectedRange"),Yd.proxyMethod("responder?.setSelectedRange"),Yd.proxyMethod("responder?.expandSelectionInDirection"),Yd.proxyMethod("responder?.selectionIsInCursorTarget"),Yd.proxyMethod("responder?.selectionIsExpanded");var RTt=t=>{var e;return(e=t.type)===null||e===void 0||(e=e.match(/\/(\w+)$/))===null||e===void 0?void 0:e[1]},FTt=!((VV=" ".codePointAt)===null||VV===void 0||!VV.call(" ",0)),qTt=function(t){if(t.key&&FTt&&t.key.codePointAt(0)===t.keyCode)return t.key;{let e;if(t.which===null?e=t.keyCode:t.which!==0&&t.charCode!==0&&(e=t.charCode),e!=null&&FEe[e]!=="escape")return v0.fromCodepoints([e]).toString()}},NTt=function(t){let e=t.clipboardData;if(e){if(e.types.includes("text/html")){for(let r of e.types){let n=/^CorePasteboardFlavorType/.test(r),i=/^dyn\./.test(r)&&e.getData(r);if(n||i)return!0}return!1}{let r=e.types.includes("com.apple.webarchive"),n=e.types.includes("com.apple.flat-rtfd");return r||n}}},nm=class extends Ms{constructor(e){super(...arguments),this.inputController=e,this.responder=this.inputController.responder,this.delegate=this.inputController.delegate,this.inputSummary=this.inputController.inputSummary,this.data={}}start(e){if(this.data.start=e,this.isSignificant()){var r,n;this.inputSummary.eventName==="keypress"&&this.inputSummary.textAdded&&((n=this.responder)===null||n===void 0||n.deleteInDirection("left")),this.selectionIsExpanded()||(this.insertPlaceholder(),this.requestRender()),this.range=(r=this.responder)===null||r===void 0?void 0:r.getSelectedRange()}}update(e){if(this.data.update=e,this.isSignificant()){let r=this.selectPlaceholder();r&&(this.forgetPlaceholder(),this.range=r)}}end(e){return this.data.end=e,this.isSignificant()?(this.forgetPlaceholder(),this.canApplyToDocument()?(this.setInputSummary({preferDocument:!0,didInput:!1}),(r=this.delegate)===null||r===void 0||r.inputControllerWillPerformTyping(),(n=this.responder)===null||n===void 0||n.setSelectedRange(this.range),(i=this.responder)===null||i===void 0||i.insertString(this.data.end),(o=this.responder)===null||o===void 0?void 0:o.setSelectedRange(this.range[0]+this.data.end.length)):this.data.start!=null||this.data.update!=null?(this.requestReparse(),this.inputController.reset()):void 0):this.inputController.reset();var r,n,i,o}getEndData(){return this.data.end}isEnded(){return this.getEndData()!=null}isSignificant(){return!MTt.composesExistingText||this.inputSummary.didInput}canApplyToDocument(){var e,r;return((e=this.data.start)===null||e===void 0?void 0:e.length)===0&&((r=this.data.end)===null||r===void 0?void 0:r.length)>0&&this.range}};nm.proxyMethod("inputController.setInputSummary"),nm.proxyMethod("inputController.requestRender"),nm.proxyMethod("inputController.requestReparse"),nm.proxyMethod("responder?.selectionIsExpanded"),nm.proxyMethod("responder?.insertPlaceholder"),nm.proxyMethod("responder?.selectPlaceholder"),nm.proxyMethod("responder?.forgetPlaceholder");var p0=class extends L1{constructor(){super(...arguments),this.render=this.render.bind(this)}elementDidMutate(){return this.scheduledRender?this.composing?(e=this.delegate)===null||e===void 0||(r=e.inputControllerDidAllowUnhandledInput)===null||r===void 0?void 0:r.call(e):void 0:this.reparse();var e,r}scheduleRender(){return this.scheduledRender?this.scheduledRender:this.scheduledRender=requestAnimationFrame(this.render)}render(){var e,r;cancelAnimationFrame(this.scheduledRender),this.scheduledRender=null,this.composing||(r=this.delegate)===null||r===void 0||r.render(),(e=this.afterRender)===null||e===void 0||e.call(this),this.afterRender=null}reparse(){var e;return(e=this.delegate)===null||e===void 0?void 0:e.reparse()}insertString(){var e;let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;return(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.insertString(r,n)})}toggleAttributeIfSupported(e){var r;if(JV().includes(e))return(r=this.delegate)===null||r===void 0||r.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var n;return(n=this.responder)===null||n===void 0?void 0:n.toggleCurrentAttribute(e)})}activateAttributeIfSupported(e,r){var n;if(JV().includes(e))return(n=this.delegate)===null||n===void 0||n.inputControllerWillPerformFormatting(e),this.withTargetDOMRange(function(){var i;return(i=this.responder)===null||i===void 0?void 0:i.setCurrentAttribute(e,r)})}deleteInDirection(e){let{recordUndoEntry:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{recordUndoEntry:!0};var n;r&&((n=this.delegate)===null||n===void 0||n.inputControllerWillPerformTyping());let i=()=>{var s;return(s=this.responder)===null||s===void 0?void 0:s.deleteInDirection(e)},o=this.getTargetDOMRange({minLength:this.composing?1:2});return o?this.withTargetDOMRange(o,i):i()}withTargetDOMRange(e,r){var n;return typeof e=="function"&&(r=e,e=this.getTargetDOMRange()),e?(n=this.responder)===null||n===void 0?void 0:n.withTargetDOMRange(e,r.bind(this)):(b0.reset(),r.call(this))}getTargetDOMRange(){var e,r;let{minLength:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{minLength:0},i=(e=(r=this.event).getTargetRanges)===null||e===void 0?void 0:e.call(r);if(i&&i.length){let o=BTt(i[0]);if(n===0||o.toString().length>=n)return o}}withEvent(e,r){let n;this.event=e;try{n=r.call(this)}finally{this.event=null}return n}};bc(p0,"events",{keydown(t){if(_Ee(t)){var e;let r=UTt(t);(e=this.delegate)!==null&&e!==void 0&&e.inputControllerDidReceiveKeyboardCommand(r)&&t.preventDefault()}else{let r=t.key;t.altKey&&(r+="+Alt"),t.shiftKey&&(r+="+Shift");let n=this.constructor.keys[r];if(n)return this.withEvent(t,n)}},paste(t){var e;let r,n=(e=t.clipboardData)===null||e===void 0?void 0:e.getData("URL");return qEe(t)?(t.preventDefault(),this.attachFiles(t.clipboardData.files)):jTt(t)?(t.preventDefault(),r={type:"text/plain",string:t.clipboardData.getData("text/plain")},(i=this.delegate)===null||i===void 0||i.inputControllerWillPaste(r),(o=this.responder)===null||o===void 0||o.insertString(r.string),this.render(),(s=this.delegate)===null||s===void 0?void 0:s.inputControllerDidPaste(r)):n?(t.preventDefault(),r={type:"text/html",html:this.createLinkHTML(n)},(u=this.delegate)===null||u===void 0||u.inputControllerWillPaste(r),(h=this.responder)===null||h===void 0||h.insertHTML(r.html),this.render(),(y=this.delegate)===null||y===void 0?void 0:y.inputControllerDidPaste(r)):void 0;var i,o,s,u,h,y},beforeinput(t){let e=this.constructor.inputTypes[t.inputType],r=(n=t,!(!/iPhone|iPad/.test(navigator.userAgent)||n.inputType&&n.inputType!=="insertParagraph"));var n;e&&(this.withEvent(t,e),r||this.scheduleRender()),r&&this.render()},input(t){b0.reset()},dragstart(t){var e,r;(e=this.responder)!==null&&e!==void 0&&e.selectionContainsAttachments()&&(t.dataTransfer.setData("application/x-trix-dragging",!0),this.dragging={range:(r=this.responder)===null||r===void 0?void 0:r.getSelectedRange(),point:WV(t)})},dragenter(t){HV(t)&&t.preventDefault()},dragover(t){if(this.dragging){t.preventDefault();let r=WV(t);var e;if(!F1(r,this.dragging.point))return this.dragging.point=r,(e=this.responder)===null||e===void 0?void 0:e.setLocationRangeFromPointRange(r)}else HV(t)&&t.preventDefault()},drop(t){var e,r;if(this.dragging)return t.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),(r=this.responder)===null||r===void 0||r.moveTextFromRange(this.dragging.range),this.dragging=null,this.scheduleRender();if(HV(t)){var n;t.preventDefault();let i=WV(t);return(n=this.responder)===null||n===void 0||n.setLocationRangeFromPointRange(i),this.attachFiles(t.dataTransfer.files)}},dragend(){var t;this.dragging&&((t=this.responder)===null||t===void 0||t.setSelectedRange(this.dragging.range),this.dragging=null)},compositionend(t){this.composing&&(this.composing=!1,OA.recentAndroid||this.scheduleRender())}}),bc(p0,"keys",{ArrowLeft(){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.shouldManageMovingCursorInDirection("backward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("backward")},ArrowRight(){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.shouldManageMovingCursorInDirection("forward"))return this.event.preventDefault(),(e=this.responder)===null||e===void 0?void 0:e.moveCursorInDirection("forward")},Backspace(){var t,e,r;if((t=this.responder)!==null&&t!==void 0&&t.shouldManageDeletingInDirection("backward"))return this.event.preventDefault(),(e=this.delegate)===null||e===void 0||e.inputControllerWillPerformTyping(),(r=this.responder)===null||r===void 0||r.deleteInDirection("backward"),this.render()},Tab(){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.increaseNestingLevel(),this.render()},"Tab+Shift"(){var t,e;if((t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel())return this.event.preventDefault(),(e=this.responder)===null||e===void 0||e.decreaseNestingLevel(),this.render()}}),bc(p0,"inputTypes",{deleteByComposition(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteByCut(){return this.deleteInDirection("backward")},deleteByDrag(){return this.event.preventDefault(),this.withTargetDOMRange(function(){var t;this.deleteByDragRange=(t=this.responder)===null||t===void 0?void 0:t.getSelectedRange()})},deleteCompositionText(){return this.deleteInDirection("backward",{recordUndoEntry:!1})},deleteContent(){return this.deleteInDirection("backward")},deleteContentBackward(){return this.deleteInDirection("backward")},deleteContentForward(){return this.deleteInDirection("forward")},deleteEntireSoftLine(){return this.deleteInDirection("forward")},deleteHardLineBackward(){return this.deleteInDirection("backward")},deleteHardLineForward(){return this.deleteInDirection("forward")},deleteSoftLineBackward(){return this.deleteInDirection("backward")},deleteSoftLineForward(){return this.deleteInDirection("forward")},deleteWordBackward(){return this.deleteInDirection("backward")},deleteWordForward(){return this.deleteInDirection("forward")},formatBackColor(){return this.activateAttributeIfSupported("backgroundColor",this.event.data)},formatBold(){return this.toggleAttributeIfSupported("bold")},formatFontColor(){return this.activateAttributeIfSupported("color",this.event.data)},formatFontName(){return this.activateAttributeIfSupported("font",this.event.data)},formatIndent(){var t;if((t=this.responder)!==null&&t!==void 0&&t.canIncreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.increaseNestingLevel()})},formatItalic(){return this.toggleAttributeIfSupported("italic")},formatJustifyCenter(){return this.toggleAttributeIfSupported("justifyCenter")},formatJustifyFull(){return this.toggleAttributeIfSupported("justifyFull")},formatJustifyLeft(){return this.toggleAttributeIfSupported("justifyLeft")},formatJustifyRight(){return this.toggleAttributeIfSupported("justifyRight")},formatOutdent(){var t;if((t=this.responder)!==null&&t!==void 0&&t.canDecreaseNestingLevel())return this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.decreaseNestingLevel()})},formatRemove(){this.withTargetDOMRange(function(){for(let r in(t=this.responder)===null||t===void 0?void 0:t.getCurrentAttributes()){var t,e;(e=this.responder)===null||e===void 0||e.removeCurrentAttribute(r)}})},formatSetBlockTextDirection(){return this.activateAttributeIfSupported("blockDir",this.event.data)},formatSetInlineTextDirection(){return this.activateAttributeIfSupported("textDir",this.event.data)},formatStrikeThrough(){return this.toggleAttributeIfSupported("strike")},formatSubscript(){return this.toggleAttributeIfSupported("sub")},formatSuperscript(){return this.toggleAttributeIfSupported("sup")},formatUnderline(){return this.toggleAttributeIfSupported("underline")},historyRedo(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformRedo()},historyUndo(){var t;return(t=this.delegate)===null||t===void 0?void 0:t.inputControllerWillPerformUndo()},insertCompositionText(){return this.composing=!0,this.insertString(this.event.data)},insertFromComposition(){return this.composing=!1,this.insertString(this.event.data)},insertFromDrop(){let t=this.deleteByDragRange;var e;if(t)return this.deleteByDragRange=null,(e=this.delegate)===null||e===void 0||e.inputControllerWillMoveText(),this.withTargetDOMRange(function(){var r;return(r=this.responder)===null||r===void 0?void 0:r.moveTextFromRange(t)})},insertFromPaste(){let{dataTransfer:t}=this.event,e={dataTransfer:t},r=t.getData("URL"),n=t.getData("text/html");if(r){var i;let h;this.event.preventDefault(),e.type="text/html";let y=t.getData("public.url-name");h=y?_8(y).trim():r,e.html=this.createLinkHTML(r,h),(i=this.delegate)===null||i===void 0||i.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var w;return(w=this.responder)===null||w===void 0?void 0:w.insertHTML(e.html)}),this.afterRender=()=>{var w;return(w=this.delegate)===null||w===void 0?void 0:w.inputControllerDidPaste(e)}}else if(bEe(t)){var o;e.type="text/plain",e.string=t.getData("text/plain"),(o=this.delegate)===null||o===void 0||o.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var h;return(h=this.responder)===null||h===void 0?void 0:h.insertString(e.string)}),this.afterRender=()=>{var h;return(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(e)}}else if(zTt(this.event)){var s;e.type="File",e.file=t.files[0],(s=this.delegate)===null||s===void 0||s.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var h;return(h=this.responder)===null||h===void 0?void 0:h.insertFile(e.file)}),this.afterRender=()=>{var h;return(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(e)}}else if(n){var u;this.event.preventDefault(),e.type="text/html",e.html=n,(u=this.delegate)===null||u===void 0||u.inputControllerWillPaste(e),this.withTargetDOMRange(function(){var h;return(h=this.responder)===null||h===void 0?void 0:h.insertHTML(e.html)}),this.afterRender=()=>{var h;return(h=this.delegate)===null||h===void 0?void 0:h.inputControllerDidPaste(e)}}},insertFromYank(){return this.insertString(this.event.data)},insertLineBreak(){return this.insertString(`
`)},insertLink(){return this.activateAttributeIfSupported("href",this.event.data)},insertOrderedList(){return this.toggleAttributeIfSupported("number")},insertParagraph(){var t;return(t=this.delegate)===null||t===void 0||t.inputControllerWillPerformTyping(),this.withTargetDOMRange(function(){var e;return(e=this.responder)===null||e===void 0?void 0:e.insertLineBreak()})},insertReplacementText(){let t=this.event.dataTransfer.getData("text/plain"),e=this.event.getTargetRanges()[0];this.withTargetDOMRange(e,()=>{this.insertString(t,{updatePosition:!1})})},insertText(){var t;return this.insertString(this.event.data||((t=this.event.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain")))},insertTranspose(){return this.insertString(this.event.data)},insertUnorderedList(){return this.toggleAttributeIfSupported("bullet")}});var BTt=function(t){let e=document.createRange();return e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),e},HV=t=>{var e;return Array.from(((e=t.dataTransfer)===null||e===void 0?void 0:e.types)||[]).includes("Files")},zTt=t=>{var e;return((e=t.dataTransfer.files)===null||e===void 0?void 0:e[0])&&!qEe(t)&&!(r=>{let{dataTransfer:n}=r;return n.types.includes("Files")&&n.types.includes("text/html")&&n.getData("text/html").includes("urn:schemas-microsoft-com:office:office")})(t)},qEe=function(t){let e=t.clipboardData;if(e)return Array.from(e.types).filter(r=>r.match(/file/i)).length===e.types.length&&e.files.length>=1},jTt=function(t){let e=t.clipboardData;if(e)return e.types.includes("text/plain")&&e.types.length===1},UTt=function(t){let e=[];return t.altKey&&e.push("alt"),t.shiftKey&&e.push("shift"),e.push(t.key),e},WV=t=>({x:t.clientX,y:t.clientY}),u8="[data-trix-attribute]",c8="[data-trix-action]",VTt="".concat(u8,", ").concat(c8),UM="[data-trix-dialog]",HTt="".concat(UM,"[data-trix-active]"),WTt="".concat(UM," [data-trix-method]"),sEe="".concat(UM," [data-trix-input]"),lEe=(t,e)=>(e||(e=T1(t)),t.querySelector("[data-trix-input][name='".concat(e,"']"))),uEe=t=>t.getAttribute("data-trix-action"),T1=t=>t.getAttribute("data-trix-attribute")||t.getAttribute("data-trix-dialog-attribute"),BM=class extends Ms{constructor(e){super(e),this.didClickActionButton=this.didClickActionButton.bind(this),this.didClickAttributeButton=this.didClickAttributeButton.bind(this),this.didClickDialogButton=this.didClickDialogButton.bind(this),this.didKeyDownDialogInput=this.didKeyDownDialogInput.bind(this),this.element=e,this.attributes={},this.actions={},this.resetDialogInputs(),_s("mousedown",{onElement:this.element,matchingSelector:c8,withCallback:this.didClickActionButton}),_s("mousedown",{onElement:this.element,matchingSelector:u8,withCallback:this.didClickAttributeButton}),_s("click",{onElement:this.element,matchingSelector:VTt,preventDefault:!0}),_s("click",{onElement:this.element,matchingSelector:WTt,withCallback:this.didClickDialogButton}),_s("keydown",{onElement:this.element,matchingSelector:sEe,withCallback:this.didKeyDownDialogInput})}didClickActionButton(e,r){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),e.preventDefault();let i=uEe(r);return this.getDialog(i)?this.toggleDialog(i):(o=this.delegate)===null||o===void 0?void 0:o.toolbarDidInvokeAction(i,r);var o}didClickAttributeButton(e,r){var n;(n=this.delegate)===null||n===void 0||n.toolbarDidClickButton(),e.preventDefault();let i=T1(r);var o;return this.getDialog(i)?this.toggleDialog(i):(o=this.delegate)===null||o===void 0||o.toolbarDidToggleAttribute(i),this.refreshAttributeButtons()}didClickDialogButton(e,r){let n=gy(r,{matchingSelector:UM});return this[r.getAttribute("data-trix-method")].call(this,n)}didKeyDownDialogInput(e,r){if(e.keyCode===13){e.preventDefault();let n=r.getAttribute("name"),i=this.getDialog(n);this.setAttribute(i)}if(e.keyCode===27)return e.preventDefault(),this.hideDialog()}updateActions(e){return this.actions=e,this.refreshActionButtons()}refreshActionButtons(){return this.eachActionButton((e,r)=>{e.disabled=this.actions[r]===!1})}eachActionButton(e){return Array.from(this.element.querySelectorAll(c8)).map(r=>e(r,uEe(r)))}updateAttributes(e){return this.attributes=e,this.refreshAttributeButtons()}refreshAttributeButtons(){return this.eachAttributeButton((e,r)=>(e.disabled=this.attributes[r]===!1,this.attributes[r]||this.dialogIsVisible(r)?(e.setAttribute("data-trix-active",""),e.classList.add("trix-active")):(e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"))))}eachAttributeButton(e){return Array.from(this.element.querySelectorAll(u8)).map(r=>e(r,T1(r)))}applyKeyboardCommand(e){let r=JSON.stringify(e.sort());for(let n of Array.from(this.element.querySelectorAll("[data-trix-key]"))){let i=n.getAttribute("data-trix-key").split("+");if(JSON.stringify(i.sort())===r)return wA("mousedown",{onElement:n}),!0}return!1}dialogIsVisible(e){let r=this.getDialog(e);if(r)return r.hasAttribute("data-trix-active")}toggleDialog(e){return this.dialogIsVisible(e)?this.hideDialog():this.showDialog(e)}showDialog(e){var r,n;this.hideDialog(),(r=this.delegate)===null||r===void 0||r.toolbarWillShowDialog();let i=this.getDialog(e);i.setAttribute("data-trix-active",""),i.classList.add("trix-active"),Array.from(i.querySelectorAll("input[disabled]")).forEach(s=>{s.removeAttribute("disabled")});let o=T1(i);if(o){let s=lEe(i,e);s&&(s.value=this.attributes[o]||"",s.select())}return(n=this.delegate)===null||n===void 0?void 0:n.toolbarDidShowDialog(e)}setAttribute(e){var r;let n=T1(e),i=lEe(e,n);return!i.willValidate||(i.setCustomValidity(""),i.checkValidity()&&this.isSafeAttribute(i))?((r=this.delegate)===null||r===void 0||r.toolbarDidUpdateAttribute(n,i.value),this.hideDialog()):(i.setCustomValidity("Invalid value"),i.setAttribute("data-trix-validate",""),i.classList.add("trix-validate"),i.focus())}isSafeAttribute(e){return!e.hasAttribute("data-trix-validate-href")||wM.isValidAttribute("a","href",e.value)}removeAttribute(e){var r;let n=T1(e);return(r=this.delegate)===null||r===void 0||r.toolbarDidRemoveAttribute(n),this.hideDialog()}hideDialog(){let e=this.element.querySelector(HTt);var r;if(e)return e.removeAttribute("data-trix-active"),e.classList.remove("trix-active"),this.resetDialogInputs(),(r=this.delegate)===null||r===void 0?void 0:r.toolbarDidHideDialog((n=>n.getAttribute("data-trix-dialog"))(e))}resetDialogInputs(){Array.from(this.element.querySelectorAll(sEe)).forEach(e=>{e.setAttribute("disabled","disabled"),e.removeAttribute("data-trix-validate"),e.classList.remove("trix-validate")})}getDialog(e){return this.element.querySelector("[data-trix-dialog=".concat(e,"]"))}},m0=class extends FM{constructor(e){let{editorElement:r,document:n,html:i}=e;super(...arguments),this.editorElement=r,this.selectionManager=new Eg(this.editorElement),this.selectionManager.delegate=this,this.composition=new im,this.composition.delegate=this,this.attachmentManager=new CM(this.composition.getAttachments()),this.attachmentManager.delegate=this,this.inputController=g8.getLevel()===2?new p0(this.editorElement):new Yd(this.editorElement),this.inputController.delegate=this,this.inputController.responder=this.composition,this.compositionController=new RM(this.editorElement,this.composition),this.compositionController.delegate=this,this.toolbarController=new BM(this.editorElement.toolbarElement),this.toolbarController.delegate=this,this.editor=new OM(this.composition,this.selectionManager,this.editorElement),n?this.editor.loadDocument(n):this.editor.loadHTML(i)}registerSelectionManager(){return b0.registerSelectionManager(this.selectionManager)}unregisterSelectionManager(){return b0.unregisterSelectionManager(this.selectionManager)}render(){return this.compositionController.render()}reparse(){return this.composition.replaceHTML(this.editorElement.innerHTML)}compositionDidChangeDocument(e){if(this.notifyEditorElement("document-change"),!this.handlingInput)return this.render()}compositionDidChangeCurrentAttributes(e){return this.currentAttributes=e,this.toolbarController.updateAttributes(this.currentAttributes),this.updateCurrentActions(),this.notifyEditorElement("attributes-change",{attributes:this.currentAttributes})}compositionDidPerformInsertionAtRange(e){this.pasting&&(this.pastedRange=e)}compositionShouldAcceptFile(e){return this.notifyEditorElement("file-accept",{file:e})}compositionDidAddAttachment(e){let r=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-add",{attachment:r})}compositionDidEditAttachment(e){this.compositionController.rerenderViewForObject(e);let r=this.attachmentManager.manageAttachment(e);return this.notifyEditorElement("attachment-edit",{attachment:r}),this.notifyEditorElement("change")}compositionDidChangeAttachmentPreviewURL(e){return this.compositionController.invalidateViewForObject(e),this.notifyEditorElement("change")}compositionDidRemoveAttachment(e){let r=this.attachmentManager.unmanageAttachment(e);return this.notifyEditorElement("attachment-remove",{attachment:r})}compositionDidStartEditingAttachment(e,r){return this.attachmentLocationRange=this.composition.document.getLocationRangeOfAttachment(e),this.compositionController.installAttachmentEditorForAttachment(e,r),this.selectionManager.setLocationRange(this.attachmentLocationRange)}compositionDidStopEditingAttachment(e){this.compositionController.uninstallAttachmentEditor(),this.attachmentLocationRange=null}compositionDidRequestChangingSelectionToLocationRange(e){if(!this.loadingSnapshot||this.isFocused())return this.requestedLocationRange=e,this.compositionRevisionWhenLocationRangeRequested=this.composition.revision,this.handlingInput?void 0:this.render()}compositionWillLoadSnapshot(){this.loadingSnapshot=!0}compositionDidLoadSnapshot(){this.compositionController.refreshViewCache(),this.render(),this.loadingSnapshot=!1}getSelectionManager(){return this.selectionManager}attachmentManagerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}compositionControllerWillSyncDocumentView(){return this.inputController.editorWillSyncDocumentView(),this.selectionManager.lock(),this.selectionManager.clearSelection()}compositionControllerDidSyncDocumentView(){return this.inputController.editorDidSyncDocumentView(),this.selectionManager.unlock(),this.updateCurrentActions(),this.notifyEditorElement("sync")}compositionControllerDidRender(){this.requestedLocationRange&&(this.compositionRevisionWhenLocationRangeRequested===this.composition.revision&&this.selectionManager.setLocationRange(this.requestedLocationRange),this.requestedLocationRange=null,this.compositionRevisionWhenLocationRangeRequested=null),this.renderedCompositionRevision!==this.composition.revision&&(this.runEditorFilters(),this.composition.updateCurrentAttributes(),this.notifyEditorElement("render")),this.renderedCompositionRevision=this.composition.revision}compositionControllerDidFocus(){return this.isFocusedInvisibly()&&this.setLocationRange({index:0,offset:0}),this.toolbarController.hideDialog(),this.notifyEditorElement("focus")}compositionControllerDidBlur(){return this.notifyEditorElement("blur")}compositionControllerDidSelectAttachment(e,r){return this.toolbarController.hideDialog(),this.composition.editAttachment(e,r)}compositionControllerDidRequestDeselectingAttachment(e){let r=this.attachmentLocationRange||this.composition.document.getLocationRangeOfAttachment(e);return this.selectionManager.setLocationRange(r[1])}compositionControllerWillUpdateAttachment(e){return this.editor.recordUndoEntry("Edit Attachment",{context:e.id,consolidatable:!0})}compositionControllerDidRequestRemovalOfAttachment(e){return this.removeAttachment(e)}inputControllerWillHandleInput(){this.handlingInput=!0,this.requestedRender=!1}inputControllerDidRequestRender(){this.requestedRender=!0}inputControllerDidHandleInput(){if(this.handlingInput=!1,this.requestedRender)return this.requestedRender=!1,this.render()}inputControllerDidAllowUnhandledInput(){return this.notifyEditorElement("change")}inputControllerDidRequestReparse(){return this.reparse()}inputControllerWillPerformTyping(){return this.recordTypingUndoEntry()}inputControllerWillPerformFormatting(e){return this.recordFormattingUndoEntry(e)}inputControllerWillCutText(){return this.editor.recordUndoEntry("Cut")}inputControllerWillPaste(e){return this.editor.recordUndoEntry("Paste"),this.pasting=!0,this.notifyEditorElement("before-paste",{paste:e})}inputControllerDidPaste(e){return e.range=this.pastedRange,this.pastedRange=null,this.pasting=null,this.notifyEditorElement("paste",{paste:e})}inputControllerWillMoveText(){return this.editor.recordUndoEntry("Move")}inputControllerWillAttachFiles(){return this.editor.recordUndoEntry("Drop Files")}inputControllerWillPerformUndo(){return this.editor.undo()}inputControllerWillPerformRedo(){return this.editor.redo()}inputControllerDidReceiveKeyboardCommand(e){return this.toolbarController.applyKeyboardCommand(e)}inputControllerDidStartDrag(){this.locationRangeBeforeDrag=this.selectionManager.getLocationRange()}inputControllerDidReceiveDragOverPoint(e){return this.selectionManager.setLocationRangeFromPointRange(e)}inputControllerDidCancelDrag(){this.selectionManager.setLocationRange(this.locationRangeBeforeDrag),this.locationRangeBeforeDrag=null}locationRangeDidChange(e){return this.composition.updateCurrentAttributes(),this.updateCurrentActions(),this.attachmentLocationRange&&!_M(this.attachmentLocationRange,e)&&this.composition.stopEditingAttachment(),this.notifyEditorElement("selection-change")}toolbarDidClickButton(){if(!this.getLocationRange())return this.setLocationRange({index:0,offset:0})}toolbarDidInvokeAction(e,r){return this.invokeAction(e,r)}toolbarDidToggleAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.toggleCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidUpdateAttribute(e,r){if(this.recordFormattingUndoEntry(e),this.composition.setCurrentAttribute(e,r),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarDidRemoveAttribute(e){if(this.recordFormattingUndoEntry(e),this.composition.removeCurrentAttribute(e),this.render(),!this.selectionFrozen)return this.editorElement.focus()}toolbarWillShowDialog(e){return this.composition.expandSelectionForEditing(),this.freezeSelection()}toolbarDidShowDialog(e){return this.notifyEditorElement("toolbar-dialog-show",{dialogName:e})}toolbarDidHideDialog(e){return this.thawSelection(),this.editorElement.focus(),this.notifyEditorElement("toolbar-dialog-hide",{dialogName:e})}freezeSelection(){if(!this.selectionFrozen)return this.selectionManager.lock(),this.composition.freezeSelection(),this.selectionFrozen=!0,this.render()}thawSelection(){if(this.selectionFrozen)return this.composition.thawSelection(),this.selectionManager.unlock(),this.selectionFrozen=!1,this.render()}canInvokeAction(e){return!!this.actionIsExternal(e)||!((r=this.actions[e])===null||r===void 0||(r=r.test)===null||r===void 0||!r.call(this));var r}invokeAction(e,r){return this.actionIsExternal(e)?this.notifyEditorElement("action-invoke",{actionName:e,invokingElement:r}):(n=this.actions[e])===null||n===void 0||(n=n.perform)===null||n===void 0?void 0:n.call(this);var n}actionIsExternal(e){return/^x-./.test(e)}getCurrentActions(){let e={};for(let r in this.actions)e[r]=this.canInvokeAction(r);return e}updateCurrentActions(){let e=this.getCurrentActions();if(!F1(e,this.currentActions))return this.currentActions=e,this.toolbarController.updateActions(this.currentActions),this.notifyEditorElement("actions-change",{actions:this.currentActions})}runEditorFilters(){let e=this.composition.getSnapshot();if(Array.from(this.editor.filters).forEach(i=>{let{document:o,selectedRange:s}=e;e=i.call(this.editor,e)||{},e.document||(e.document=o),e.selectedRange||(e.selectedRange=s)}),r=e,n=this.composition.getSnapshot(),!_M(r.selectedRange,n.selectedRange)||!r.document.isEqualTo(n.document))return this.composition.loadSnapshot(e);var r,n}updateInputElement(){let e=function(r,n){let i=xTt[n];if(i)return i(r);throw new Error("unknown content type: ".concat(n))}(this.compositionController.getSerializableElement(),"text/html");return this.editorElement.setFormValue(e)}notifyEditorElement(e,r){switch(e){case"document-change":this.documentChangedSinceLastRender=!0;break;case"render":this.documentChangedSinceLastRender&&(this.documentChangedSinceLastRender=!1,this.notifyEditorElement("change"));break;case"change":case"attachment-add":case"attachment-edit":case"attachment-remove":this.updateInputElement()}return this.editorElement.notify(e,r)}removeAttachment(e){return this.editor.recordUndoEntry("Delete Attachment"),this.composition.removeAttachment(e),this.render()}recordFormattingUndoEntry(e){let r=Hs(e),n=this.selectionManager.getLocationRange();if(r||!Tg(n))return this.editor.recordUndoEntry("Formatting",{context:this.getUndoContext(),consolidatable:!0})}recordTypingUndoEntry(){return this.editor.recordUndoEntry("Typing",{context:this.getUndoContext(this.currentAttributes),consolidatable:!0})}getUndoContext(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return[this.getLocationContext(),this.getTimeContext(),...Array.from(r)]}getLocationContext(){let e=this.selectionManager.getLocationRange();return Tg(e)?e[0].index:e}getTimeContext(){return ZV.interval>0?Math.floor(new Date().getTime()/ZV.interval):0}isFocused(){var e;return this.editorElement===((e=this.editorElement.ownerDocument)===null||e===void 0?void 0:e.activeElement)}isFocusedInvisibly(){return this.isFocused()&&!this.getLocationRange()}get actions(){return this.constructor.actions}};bc(m0,"actions",{undo:{test(){return this.editor.canUndo()},perform(){return this.editor.undo()}},redo:{test(){return this.editor.canRedo()},perform(){return this.editor.redo()}},link:{test(){return this.editor.canActivateAttribute("href")}},increaseNestingLevel:{test(){return this.editor.canIncreaseNestingLevel()},perform(){return this.editor.increaseNestingLevel()&&this.render()}},decreaseNestingLevel:{test(){return this.editor.canDecreaseNestingLevel()},perform(){return this.editor.decreaseNestingLevel()&&this.render()}},attachFiles:{test:()=>!0,perform(){return g8.pickFiles(this.editor.insertFiles)}}}),m0.proxyMethod("getSelectionManager().setLocationRange"),m0.proxyMethod("getSelectionManager().getLocationRange");var $Tt=Object.freeze({__proto__:null,AttachmentEditorController:LM,CompositionController:RM,Controller:FM,EditorController:m0,InputController:L1,Level0InputController:Yd,Level2InputController:p0,ToolbarController:BM}),GTt=Object.freeze({__proto__:null,MutationObserver:qM,SelectionChangeObserver:xM}),KTt=Object.freeze({__proto__:null,FileVerificationOperation:NM,ImagePreloadOperation:kM});yEe("trix-toolbar",`%t {
  display: block;
}

%t {
  white-space: nowrap;
}

%t [data-trix-dialog] {
  display: none;
}

%t [data-trix-dialog][data-trix-active] {
  display: block;
}

%t [data-trix-dialog] [data-trix-validate]:invalid {
  background-color: #ffdddd;
}`);var zM=class extends HTMLElement{connectedCallback(){this.innerHTML===""&&(this.innerHTML=vEe.getDefaultHTML())}},ZTt=0,YTt=function(t){if(!t.hasAttribute("contenteditable"))return t.setAttribute("contenteditable",""),function(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return r.times=1,_s(e,r)}("focus",{onElement:t,withCallback:()=>XTt(t)})},XTt=function(t){return JTt(t),QTt(t)},JTt=function(t){var e,r;if((e=(r=document).queryCommandSupported)!==null&&e!==void 0&&e.call(r,"enableObjectResizing"))return document.execCommand("enableObjectResizing",!1,!1),_s("mscontrolselect",{onElement:t,preventDefault:!0})},QTt=function(t){var e,r;if((e=(r=document).queryCommandSupported)!==null&&e!==void 0&&e.call(r,"DefaultParagraphSeparator")){let{tagName:n}=yc.default;if(["div","p"].includes(n))return document.execCommand("DefaultParagraphSeparator",!1,n)}},cEe=OA.forcesObjectResizing?{display:"inline",width:"auto"}:{display:"inline-block",width:"1px"};yEe("trix-editor",`%t {
    display: block;
}

%t:empty::before {
    content: attr(placeholder);
    color: graytext;
    cursor: text;
    pointer-events: none;
    white-space: pre-line;
}

%t a[contenteditable=false] {
    cursor: text;
}

%t img {
    max-width: 100%;
    height: auto;
}

%t `.concat(h0,` figcaption textarea {
    resize: none;
}

%t `).concat(h0,` figcaption textarea.trix-autoresize-clone {
    position: absolute;
    left: -9999px;
    max-height: 0px;
}

%t `).concat(h0,` figcaption[data-trix-placeholder]:empty::before {
    content: attr(data-trix-placeholder);
    color: graytext;
}

%t [data-trix-cursor-target] {
    display: `).concat(cEe.display,` !important;
    width: `).concat(cEe.width,` !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
}

%t [data-trix-cursor-target=left] {
    vertical-align: top !important;
    margin-left: -1px !important;
}

%t [data-trix-cursor-target=right] {
    vertical-align: bottom !important;
    margin-right: -1px !important;
}`));var Sg=new WeakMap,_A=new WeakSet,f8=class{constructor(e){var r,n;IEe(r=this,n=_A),n.add(r),AA(this,Sg,{writable:!0,value:void 0}),this.element=e,x8(this,Sg,e.attachInternals())}connectedCallback(){pM(this,_A,mM).call(this)}disconnectedCallback(){}get labels(){return Pa(this,Sg).labels}get disabled(){var e;return(e=this.element.inputElement)===null||e===void 0?void 0:e.disabled}set disabled(e){this.element.toggleAttribute("disabled",e)}get required(){return this.element.hasAttribute("required")}set required(e){this.element.toggleAttribute("required",e),pM(this,_A,mM).call(this)}get validity(){return Pa(this,Sg).validity}get validationMessage(){return Pa(this,Sg).validationMessage}get willValidate(){return Pa(this,Sg).willValidate}setFormValue(e){pM(this,_A,mM).call(this)}checkValidity(){return Pa(this,Sg).checkValidity()}reportValidity(){return Pa(this,Sg).reportValidity()}setCustomValidity(e){pM(this,_A,mM).call(this,e)}};function mM(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",{required:e,value:r}=this.element,n=e&&!r,i=!!t,o=Oi("input",{required:e}),s=t||o.validationMessage;Pa(this,Sg).setValidity({valueMissing:n,customError:i},s)}var $V=new WeakMap,GV=new WeakMap,KV=new WeakMap,h8=class{constructor(e){AA(this,$V,{writable:!0,value:void 0}),AA(this,GV,{writable:!0,value:r=>{r.defaultPrevented||r.target===this.element.form&&this.element.reset()}}),AA(this,KV,{writable:!0,value:r=>{if(r.defaultPrevented||this.element.contains(r.target))return;let n=gy(r.target,{matchingSelector:"label"});n&&Array.from(this.labels).includes(n)&&this.element.focus()}}),this.element=e}connectedCallback(){x8(this,$V,function(e){if(e.hasAttribute("aria-label")||e.hasAttribute("aria-labelledby"))return;let r=function(){let n=Array.from(e.labels).map(o=>{if(!o.contains(e))return o.textContent}).filter(o=>o),i=n.join(" ");return i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label")};return r(),_s("focus",{onElement:e,withCallback:r})}(this.element)),window.addEventListener("reset",Pa(this,GV),!1),window.addEventListener("click",Pa(this,KV),!1)}disconnectedCallback(){var e;(e=Pa(this,$V))===null||e===void 0||e.destroy(),window.removeEventListener("reset",Pa(this,GV),!1),window.removeEventListener("click",Pa(this,KV),!1)}get labels(){let e=[];this.element.id&&this.element.ownerDocument&&e.push(...Array.from(this.element.ownerDocument.querySelectorAll("label[for='".concat(this.element.id,"']"))||[]));let r=gy(this.element,{matchingSelector:"label"});return r&&[this.element,null].includes(r.control)&&e.push(r),e}get disabled(){return console.warn("This browser does not support the [disabled] attribute for trix-editor elements."),!1}set disabled(e){console.warn("This browser does not support the [disabled] attribute for trix-editor elements.")}get required(){return console.warn("This browser does not support the [required] attribute for trix-editor elements."),!1}set required(e){console.warn("This browser does not support the [required] attribute for trix-editor elements.")}get validity(){return console.warn("This browser does not support the validity property for trix-editor elements."),null}get validationMessage(){return console.warn("This browser does not support the validationMessage property for trix-editor elements."),""}get willValidate(){return console.warn("This browser does not support the willValidate property for trix-editor elements."),!1}setFormValue(e){}checkValidity(){return console.warn("This browser does not support checkValidity() for trix-editor elements."),!0}reportValidity(){return console.warn("This browser does not support reportValidity() for trix-editor elements."),!0}setCustomValidity(e){console.warn("This browser does not support setCustomValidity(validationMessage) for trix-editor elements.")}},Uu=new WeakMap,R1=class extends HTMLElement{constructor(){super(),AA(this,Uu,{writable:!0,value:void 0}),x8(this,Uu,this.constructor.formAssociated?new f8(this):new h8(this))}get trixId(){return this.hasAttribute("trix-id")?this.getAttribute("trix-id"):(this.setAttribute("trix-id",++ZTt),this.trixId)}get labels(){return Pa(this,Uu).labels}get disabled(){return Pa(this,Uu).disabled}set disabled(e){Pa(this,Uu).disabled=e}get required(){return Pa(this,Uu).required}set required(e){Pa(this,Uu).required=e}get validity(){return Pa(this,Uu).validity}get validationMessage(){return Pa(this,Uu).validationMessage}get willValidate(){return Pa(this,Uu).willValidate}get type(){return this.localName}get toolbarElement(){var e;if(this.hasAttribute("toolbar"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("toolbar"));if(this.parentNode){let r="trix-toolbar-".concat(this.trixId);return this.setAttribute("toolbar",r),this.internalToolbar=Oi("trix-toolbar",{id:r}),this.parentNode.insertBefore(this.internalToolbar,this),this.internalToolbar}}get form(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.form}get inputElement(){var e;if(this.hasAttribute("input"))return(e=this.ownerDocument)===null||e===void 0?void 0:e.getElementById(this.getAttribute("input"));if(this.parentNode){let r="trix-input-".concat(this.trixId);this.setAttribute("input",r);let n=Oi("input",{type:"hidden",id:r});return this.parentNode.insertBefore(n,this.nextElementSibling),n}}get editor(){var e;return(e=this.editorController)===null||e===void 0?void 0:e.editor}get name(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.name}get value(){var e;return(e=this.inputElement)===null||e===void 0?void 0:e.value}set value(e){var r;this.defaultValue=e,(r=this.editor)===null||r===void 0||r.loadHTML(this.defaultValue)}attributeChangedCallback(e,r,n){e==="connected"&&this.isConnected&&r!=null&&r!==n&&requestAnimationFrame(()=>this.reconnect())}notify(e,r){if(this.editorController)return wA("trix-".concat(e),{onElement:this,attributes:r})}setFormValue(e){this.inputElement&&(this.inputElement.value=e,Pa(this,Uu).setFormValue(e))}connectedCallback(){this.hasAttribute("data-trix-internal")||(YTt(this),function(e){e.hasAttribute("role")||e.setAttribute("role","textbox")}(this),this.editorController||(wA("trix-before-initialize",{onElement:this}),this.editorController=new m0({editorElement:this,html:this.defaultValue=this.value}),requestAnimationFrame(()=>wA("trix-initialize",{onElement:this}))),this.editorController.registerSelectionManager(),Pa(this,Uu).connectedCallback(),this.toggleAttribute("connected",!0),function(e){!document.querySelector(":focus")&&e.hasAttribute("autofocus")&&document.querySelector("[autofocus]")===e&&e.focus()}(this))}disconnectedCallback(){var e;(e=this.editorController)===null||e===void 0||e.unregisterSelectionManager(),Pa(this,Uu).disconnectedCallback(),this.toggleAttribute("connected",!1)}reconnect(){this.removeInternalToolbar(),this.disconnectedCallback(),this.connectedCallback()}removeInternalToolbar(){var e;(e=this.internalToolbar)===null||e===void 0||e.remove(),this.internalToolbar=null}checkValidity(){return Pa(this,Uu).checkValidity()}reportValidity(){return Pa(this,Uu).reportValidity()}setCustomValidity(e){Pa(this,Uu).setCustomValidity(e)}formDisabledCallback(e){this.inputElement&&(this.inputElement.disabled=e),this.toggleAttribute("contenteditable",!e)}formResetCallback(){this.reset()}reset(){this.value=this.defaultValue}};bc(R1,"formAssociated","ElementInternals"in window),bc(R1,"observedAttributes",["connected"]);var fEe={VERSION:sEt,config:PA,core:wTt,models:LEe,views:kTt,controllers:$Tt,observers:GTt,operations:KTt,elements:Object.freeze({__proto__:null,TrixEditorElement:R1,TrixToolbarElement:zM}),filters:Object.freeze({__proto__:null,Filter:DM,attachmentGalleryFilter:PEe})};Object.assign(fEe,LEe),window.Trix=fEe,setTimeout(function(){customElements.get("trix-toolbar")||customElements.define("trix-toolbar",zM),customElements.get("trix-editor")||customElements.define("trix-editor",R1)},0);var w8=ua(qx());var VM=class extends Lr{static targets=["editor","controller"];get resourceId(){return this.controllerTarget.dataset.resourceId}get resourceName(){return this.controllerTarget.dataset.resourceName}get attachmentKey(){return this.controllerTarget.dataset.attachmentKey}get attachmentsDisabled(){return hc(this.controllerTarget.dataset.attachmentsDisabled)}get hideAttachmentFilename(){return hc(this.controllerTarget.dataset.hideAttachmentFilename)}get hideAttachmentFilesize(){return hc(this.controllerTarget.dataset.hideAttachmentFilesize)}get hideAttachmentUrl(){return hc(this.controllerTarget.dataset.hideAttachmentUrl)}get uploadUrl(){let t=new w8.default(window.location.origin),e=new w8.default(window.Jav.configuration.root_path);return t.path(`${e.path()}/jav_api/resources/${this.resourceName}/${this.resourceId}/attachments`),t.query(e.query()),t.toString()}connect(){this.attachmentsDisabled&&this.controllerTarget.querySelector(".trix-button-group--file-tools")?.remove(),window.addEventListener("trix-file-accept",t=>{if(t.target===this.editorTarget){if(this.attachmentsDisabled){t.preventDefault(),alert("This field has attachments disabled.");return}if(!this.resourceId){t.preventDefault(),alert("You can't upload files into the Trix editor until you save the resource.");return}this.attachmentKey||(t.preventDefault(),alert("You haven't set an `attachment_key` to this Trix field."))}}),window.addEventListener("trix-attachment-add",t=>{t.target===this.editorTarget&&t.attachment.file&&this.uploadFileAttachment(t.attachment)})}uploadFileAttachment(t){this.uploadFile(t.file,e=>t.setUploadProgress(e),e=>t.setAttributes(e))}uploadFile(t,e,r){let n=this.createFormData(t),i=new XMLHttpRequest;i.open("POST",this.uploadUrl,!0);let o=document.querySelector('meta[name="csrf-token"]')?.content;o&&i.setRequestHeader("X-CSRF-Token",o),i.upload.addEventListener("progress",s=>{let u=s.loaded/s.total*100;e(u)}),i.addEventListener("load",()=>{if(i.status===200){let s;try{s=JSON.parse(i.response)}catch{s={}}let u={url:s.url,href:s.href,previewable:s.previewable};this.hideAttachmentFilename&&(u.filename=null),this.hideAttachmentFilesize&&(u.filesize=null),this.hideAttachmentUrl&&(u.href=null),r(u)}}),i.send(n)}createFormData(t){let e=new FormData;return e.append("Content-Type",t.type),e.append("file",t),e.append("filename",t.name),e.append("attachment_key",this.attachmentKey),e}};wi.register("action",ZD);wi.register("actions-picker",YD);wi.register("attachments",XD);wi.register("boolean-filter",rO);wi.register("copy-to-clipboard",sO);wi.register("dashboard-card",lO);wi.register("filter",Gh);wi.register("hidden-input",cP);wi.register("item-select-all",fP);wi.register("item-selector",hP);wi.register("loading-button",vP);wi.register("menu",yP);wi.register("modal",bP);wi.register("multiple-select-filter",_P);wi.register("per-page",xP);wi.register("resource-edit",TP);wi.register("resource-index",AP);wi.register("resource-show",kP);wi.register("search",YP);wi.register("select",XP);wi.register("select-filter",JP);wi.register("sidebar",eM);wi.register("tabs",tM);wi.register("tags-field",aM);wi.register("text-filter",sM);wi.register("tippy",lM);wi.register("toggle-panel",uM);wi.register("belongs-to-field",JD);wi.register("code-field",aO);wi.register("date-field",RO);wi.register("easy-mde",uP);wi.register("key-value",gP);wi.register("progress-bar-field",wP);wi.register("reload-belongs-to-field",SP);wi.register("trix-field",VM);Hp.start();window.Turbolinks=Rv;var HM=null;NEe.bind("r r r",()=>{HM=document.scrollingElement.scrollTop,Rv.visit(window.location.href,{action:"replace"})});function eAt(){window.navigator.userAgent.indexOf("Mac OS X")>=0?(document.body.classList.add("os-mac"),document.body.classList.remove("os-pc")):(document.body.classList.add("os-pc"),document.body.classList.remove("os-mac"))}function S8(){GI('[data-tippy="tooltip"]',{theme:"light",content(t){let e=t.getAttribute("title");return t.removeAttribute("title"),t.removeAttribute("data-tippy"),e}})}window.initTippy=S8;Cz();document.addEventListener("turbo:load",()=>{S8(),eAt(),HM&&setTimeout(()=>{document.scrollingElement.scrollTo(0,HM),HM=0},50),setTimeout(()=>{document.body.classList.remove("turbo-loading")},1)});document.addEventListener("turbo:frame-load",()=>{S8()});document.addEventListener("turbo:before-fetch-response",async t=>{if(t.detail.fetchResponse.response.status===500){let{id:e,src:r}=t.target;t.detail.fetchResponse?.response?.url?.includes("/failed_to_load")||(t.target.src=`${window.Jav.configuration.root_path}/failed_to_load?turbo_frame=${e}&src=${r}`)}});document.addEventListener("turbo:visit",()=>document.body.classList.add("turbo-loading"));document.addEventListener("turbo:submit-start",()=>document.body.classList.add("turbo-loading"));document.addEventListener("turbo:submit-end",()=>document.body.classList.remove("turbo-loading"));document.addEventListener("turbo:before-cache",()=>{document.querySelectorAll("[data-turbo-remove-before-cache]").forEach(t=>t.remove())});window.Jav=window.Jav||{configuration:{}};window.Jav.menus={resetCollapsedState(){Array.from(document.querySelectorAll("[data-menu-key-param]")).map(t=>t.getAttribute("data-menu-key-param")).filter(Boolean).forEach(t=>{window.localStorage.removeItem(t)})}};})();
/*! Bundled license information:

urijs/src/punycode.js:
  (*! https://mths.be/punycode v1.4.0 by @mathias *)

urijs/src/IPv6.js:
  (*!
   * URI.js - Mutating URLs
   * IPv6 Support
   *
   * Version: 1.19.11
   *
   * Author: Rodney Rehm
   * Web: http://medialize.github.io/URI.js/
   *
   * Licensed under
   *   MIT License http://www.opensource.org/licenses/mit-license
   *
   *)

urijs/src/SecondLevelDomains.js:
  (*!
   * URI.js - Mutating URLs
   * Second Level Domain (SLD) Support
   *
   * Version: 1.19.11
   *
   * Author: Rodney Rehm
   * Web: http://medialize.github.io/URI.js/
   *
   * Licensed under
   *   MIT License http://www.opensource.org/licenses/mit-license
   *
   *)

urijs/src/URI.js:
  (*!
   * URI.js - Mutating URLs
   *
   * Version: 1.19.11
   *
   * Author: Rodney Rehm
   * Web: http://medialize.github.io/URI.js/
   *
   * Licensed under
   *   MIT License http://www.opensource.org/licenses/mit-license
   *
   *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

@hotwired/turbo/dist/turbo.es2017-esm.js:
  (*!
  Turbo 8.0.13
  Copyright © 2025 37signals LLC
   *)

chartkick/dist/chartkick.esm.js:
  (*!
   * Chartkick.js v5.0.1
   * Create beautiful charts with one line of JavaScript
   * https://github.com/ankane/chartkick.js
   * MIT License
   *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.4
   * https://github.com/kurkle/color#readme
   * (c) 2024 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.segment.js:
  (*!
   * Chart.js v4.4.8
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chart.js:
  (*!
   * Chart.js v4.4.8
   * https://www.chartjs.org
   * (c) 2025 Chart.js Contributors
   * Released under the MIT License
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE *)

js-cookie/dist/js.cookie.mjs:
  (*! js-cookie v3.0.5 | MIT *)

trix/dist/trix.esm.min.js:
  (*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE *)
*/
//# sourceMappingURL=jav.base.js.map
